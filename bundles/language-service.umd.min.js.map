{"version":3,"sources":["packages/language-service/bundles/language-service.umd.js"],"names":["$deferred","$resolved","$provided","$reflect","defineMetadata","getOwnMetadata","$getModule","name","require","define","modules","cb","global","module","exports","provided","result","Object","assign","reflect-metadata","apply","this","map","fs","path","ts","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__extends","__","constructor","prototype","create","TagContentType","__assign","t","s","i","n","arguments","length","call","__values","o","m","Symbol","iterator","next","value","done","__read","r","e","ar","push","error","__spread","concat","splitNsName","elementName","colonIndex","indexOf","Error","slice","isNgContainer","tagName","isNgContent","getNsPrefix","fullName","mergeNsAndName","prefix","localName","NAMED_ENTITIES","Aacute","aacute","Acirc","acirc","acute","AElig","aelig","Agrave","agrave","alefsym","Alpha","alpha","amp","and","ang","apos","Aring","aring","asymp","Atilde","atilde","Auml","auml","bdquo","Beta","beta","brvbar","bull","cap","Ccedil","ccedil","cedil","cent","Chi","chi","circ","clubs","cong","copy","crarr","cup","curren","dagger","Dagger","darr","dArr","deg","Delta","delta","diams","divide","Eacute","eacute","Ecirc","ecirc","Egrave","egrave","empty","emsp","ensp","Epsilon","epsilon","equiv","Eta","eta","ETH","eth","Euml","euml","euro","exist","fnof","forall","frac12","frac14","frac34","frasl","Gamma","gamma","ge","gt","harr","hArr","hearts","hellip","Iacute","iacute","Icirc","icirc","iexcl","Igrave","igrave","image","infin","int","Iota","iota","iquest","isin","Iuml","iuml","Kappa","kappa","Lambda","lambda","lang","laquo","larr","lArr","lceil","ldquo","le","lfloor","lowast","loz","lrm","lsaquo","lsquo","lt","macr","mdash","micro","middot","minus","Mu","mu","nabla","nbsp","ndash","ne","ni","not","notin","nsub","Ntilde","ntilde","Nu","nu","Oacute","oacute","Ocirc","ocirc","OElig","oelig","Ograve","ograve","oline","Omega","omega","Omicron","omicron","oplus","or","ordf","ordm","Oslash","oslash","Otilde","otilde","otimes","Ouml","ouml","para","permil","perp","Phi","phi","Pi","pi","piv","plusmn","pound","prime","Prime","prod","prop","Psi","psi","quot","radic","rang","raquo","rarr","rArr","rceil","rdquo","real","reg","rfloor","Rho","rho","rlm","rsaquo","rsquo","sbquo","Scaron","scaron","sdot","sect","shy","Sigma","sigma","sigmaf","sim","spades","sub","sube","sum","sup","sup1","sup2","sup3","supe","szlig","Tau","tau","there4","Theta","theta","thetasym","thinsp","THORN","thorn","tilde","times","trade","Uacute","uacute","uarr","uArr","Ucirc","ucirc","Ugrave","ugrave","uml","upsih","Upsilon","upsilon","Uuml","uuml","weierp","Xi","xi","Yacute","yacute","yen","yuml","Yuml","Zeta","zeta","zwj","zwnj","NGSP_UNICODE","HtmlTagDefinition","_a","_b","closedByChildren","requiredParents","implicitNamespacePrefix","_c","contentType","PARSABLE_DATA","_d","closedByParent","_e","isVoid","_f","ignoreFirstLf","_this","canSelfClose","forEach","parentToAdd","requireExtraParent","currentParent","lcParent","toLowerCase","isClosedByChild","TAG_DEFINITIONS","base","meta","area","embed","link","img","input","param","hr","br","source","track","wbr","thead","tbody","tfoot","tr","td","th","col","svg","math","li","dt","dd","rb","rt","rtc","rp","optgroup","option","pre","listing","style","RAW_TEXT","script","title","ESCAPABLE_RAW_TEXT","textarea","_DEFAULT_TAG_DEFINITION","getHtmlTagDefinition","ViewEncapsulation","ChangeDetectionStrategy","_SELECTOR_REGEXP","RegExp","CssSelector","element","classNames","attrs","notSelectors","parse","selector","match","results","_addResult","res","cssSel","cssSelector","current","inNot","lastIndex","exec","setElement","addClassName","addAttribute","isElementSelector","hasElementSelector","getMatchingElementTemplate","classAttr","join","getAttrs","toString","klass","notSelector","SelectorMatcher","_elementMap","Map","_elementPartialMap","_classMap","_classPartialMap","_attrValueMap","_attrValuePartialMap","_listContexts","createNotMatcher","notMatcher","addSelectables","cssSelectors","callbackCtxt","listContext","SelectorListContext","_addSelectable","matcher","selectable","SelectorContext","_addTerminal","_addPartial","className","name_2","terminalMap","terminalValuesMap","get","set","partialMap","partialValuesMap","terminalList","matchedCallback","alreadyMatched","_matchTerminal","_matchPartial","name_3","selectables","starSelectables","finalize","nestedSelector","selectors","cbContext","callback","createInject","makeMetadataFactory","token","createInjectionToken","desc","_desc","ngInjectableDef","undefined","createAttribute","attributeName","createContentChildren","data","first","isViewQuery","descendants","createContentChild","createViewChildren","createViewChild","createDirective","dir","SecurityContext","MissingTranslationStrategy","createComponent","c","changeDetection","Default","createPipe","pure","createInput","bindingPropertyName","createOutput","createHostBinding","hostPropertyName","createHostListener","eventName","args","createNgModule","ngModule","createInjectable","injectable","createOptional","createSelf","createSkipSelf","createHost","Type","Function","props","factory","_i","values","ngMetadataName","isTypeOf","obj","DASH_CASE_REGEXP","splitAtColon","defaultValues","_splitAt","character","characterIndex","trim","visitValue","visitor","context","isArray","visitArray","isStrictStringMap","getPrototypeOf","STRING_MAP_PROTO","visitStringMap","visitPrimitive","visitOther","isDefined","val","noUndefined","ValueTransformer","arr","keys","key","SyncAsync","isPromise","then","msg","syntaxError","parseErrors","ERROR_SYNTAX_ERROR","ERROR_PARSE_ERRORS","escapeRegExp","replace","utf8Encode","str","encoded","index","codePoint","charCodeAt","low","String","fromCharCode","stringify","overriddenName","newLineIndex","substring","resolveForwardRef","type","Version","full","splits","split","major","minor","patch","PropertyBindingType","TextAst","ngContentIndex","sourceSpan","visit","visitText","BoundTextAst","visitBoundText","AttrAst","visitAttr","ProviderAstType","BoundPropertyMapping","Animation","Attribute","Class","Property","Style","BoundElementPropertyAst","securityContext","unit","isAnimation","fromBoundProperty","visitElementProperty","BoundEventAst","target","phase","handler","calcFullName","fromParsedEvent","event","targetOrPhase","visitEvent","ReferenceAst","originalValue","visitReference","VariableAst","fromParsedVariable","v","visitVariable","ElementAst","inputs","outputs","references","directives","providers","hasViewContainer","queryMatches","children","endSourceSpan","visitElement","EmbeddedTemplateAst","variables","visitEmbeddedTemplate","BoundDirectivePropertyAst","directiveName","templateName","visitDirectiveProperty","DirectiveAst","directive","hostProperties","hostEvents","contentQueryStartId","visitDirective","ProviderAst","multiProvider","eager","providerType","lifecycleHooks","isModule","NgContentAst","visitNgContent","NullTemplateVisitor","ast","RecursiveTemplateAstVisitor","_super","visitChildren","templateVisitAll","asts","astResult","CompilerConfig","defaultEncapsulation","useJit","jitDevMode","missingTranslation","preserveWhitespaces","strictInjectionParameters","Emulated","preserveWhitespacesDefault","preserveWhitespacesOption","defaultSetting","StaticSymbol","filePath","members","assertNoMembers","JSON","StaticSymbolCache","cache","declarationFile","HOST_REG_EXP","sanitizeIdentifier","CompileSummaryKind","_anonymousTypeIndex","identifierName","compileIdentifier","reference","ref","identifier","tokenName","tokenReference","CompileStylesheetMetadata","styles","styleUrls","moduleUrl","_normalizeArray","CompileTemplateMetadata","template","templateUrl","htmlAst","externalStylesheets","animations","ngContentSelectors","interpolation","isInline","encapsulation","flatten","list","reduce","flat","item","flatItem","toSummary","CompileDirectiveMetadata","isComponent","exportAs","hostListeners","hostAttributes","viewProviders","queries","guards","viewQueries","entryComponents","componentViewType","rendererType","componentFactory","isHost","host","matches","inputsMap","bindConfig","parts","outputsMap","summaryKind","Directive","CompilePipeMetadata","Pipe","CompileNgModuleMetadata","declaredDirectives","exportedDirectives","declaredPipes","exportedPipes","bootstrapComponents","importedModules","exportedModules","schemas","transitiveModule","id","NgModule","TransitiveCompileNgModuleMetadata","directivesSet","Set","exportedDirectivesSet","pipesSet","pipes","exportedPipesSet","modulesSet","entryComponentsSet","addProvider","provider","addDirective","has","add","addExportedDirective","addPipe","addExportedPipe","addModule","addEntryComponent","ec","componentType","ProviderMeta","useClass","useValue","useExisting","useFactory","deps","multi","dependencies","AstPath","path$$1","position","defineProperty","enumerable","configurable","parentOf","node","childOf","ctor","pop","Text","Expansion","switchValue","cases","switchValueSourceSpan","visitExpansion","ExpansionCase","expression","valueSourceSpan","expSourceSpan","visitExpansionCase","valueSpan","visitAttribute","Element","startSourceSpan","Comment","visitComment","visitAll","nodes","RecursiveVisitor","findNode","class_1","span","spanOf","start","offset","end","assertArrayOfStrings","INTERPOLATION_BLACKLIST_REGEXPS","assertInterpolationSymbols","start_1","end_1","regexp","test","InterpolationConfig","fromArray","markers","DEFAULT_INTERPOLATION_CONFIG","StyleWithImports","isStyleUrlResolvable","url","schemeMatch","URL_WITH_SCHEMA_REGEXP","PreparsedElementType","CSS_IMPORT_REGEXP","CSS_STRIPPABLE_COMMENT_REGEXP","NG_CONTENT_SELECT_ATTR","LINK_ELEMENT","LINK_STYLE_REL_ATTR","LINK_STYLE_HREF_ATTR","LINK_STYLE_REL_VALUE","STYLE_ELEMENT","SCRIPT_ELEMENT","NG_NON_BINDABLE_ATTR","NG_PROJECT_AS","preparseElement","selectAttr","hrefAttr","relAttr","nonBindable","projectAs","attr","lcAttrName","normalizeNgContentSelect","nodeName","OTHER","NG_CONTENT","STYLE","SCRIPT","STYLESHEET","PreparsedElement","DirectiveNormalizer","_resourceLoader","_urlResolver","_htmlParser","_config","_resourceLoaderCache","clearCache","clear","clearCacheFor","normalizedDirective","delete","stylesheet","_fetch","normalizeTemplate","prenormData","_preParseTemplate","preparsedTemplate","_normalizeTemplateMetadata","prenomData","resolve","_preparseLoadedTemplate","templateAbsUrl","interpolationConfig","rootNodesAndErrors","templateSourceUrl","ngModuleType","compMeta","templateMeta","jitSourceUrl","errors","templateMetadataStyles","_normalizeStylesheet","TemplatePreparseVisitor","rootNodes","templateStyles","inlineStyleUrls","_loadMissingExternalStylesheets","_normalizeLoadedTemplateMetadata","stylesheets","_inlineStyles","styleUrl","None","targetStyles","loadedStylesheets","syncAsyncValues","filter","loadedStyle","some","Promise","all","_","allStyleUrls","allStyles","styleWithImports","extractStyleUrls","resolver","baseUrl","cssText","foundUrls","modifiedCssText","ngNonBindableStackCount","preparsedElement","textContent_1","child","QUERY_METADATA_IDENTIFIERS","DirectiveResolver","_reflector","isDirective","typeMetadata","annotations","isDirectiveMetadata","throwIfNotFound","metadata","findLast","propertyMetadata","propMetadata","_mergeWithPropertyMetadata","dm","directiveType","propName","a","output","hostBinding","startWith","hostListener","query","_merge","_extractPublicName","def","_dedupeBindings","bindings","names","publicNames","reversedResult","binding","name_1","reverse","mergedInputs","mergedOutputs","mergedHost","mergedQueries","moduleId","condition","TokenType","$EOF","$TAB","$LF","$VTAB","$FF","$CR","$SPACE","$DQ","$$","$SQ","$PLUS","$MINUS","$SLASH","$SEMICOLON","$EQ","$GT","$0","$9","$A","$F","$Z","$_","$a","$f","$n","$r","$t","$v","$z","$LBRACE","$NBSP","isWhitespace","code","isDigit","isAsciiLetter","Token","KEYWORDS","Lexer","tokenize","text","scanner","_Scanner","tokens","scanToken","newCharacterToken","Character","newOperatorToken","Operator","EOF","numValue","strValue","isCharacter","isNumber","Number","isString","isOperator","operater","isIdentifier","Identifier","isKeyword","Keyword","isKeywordLet","isKeywordAs","isKeywordNull","isKeywordUndefined","isKeywordTrue","isKeywordFalse","isKeywordThis","isError","toNumber","peek","advance","isIdentifierStart","scanIdentifier","scanNumber","scanCharacter","scanString","scanOperator","scanComplexOperator","one","twoCode","two","threeCode","three","isIdentifierPart","newKeywordToken","newIdentifierToken","simple","isExponentSign","newNumberToken","parseIntAutoRadix","parseInt","isNaN","parseFloat","quote","buffer","marker","unescapedCode","hex","unescape","last","newStringToken","message","newErrorToken","ParserError","errLocation","ctxLocation","ParseSpan","AST","Quote","uninterpretedExpression","location","visitQuote","EmptyExpr","ImplicitReceiver","visitImplicitReceiver","Chain","expressions","visitChain","Conditional","trueExp","falseExp","visitConditional","PropertyRead","receiver","visitPropertyRead","PropertyWrite","visitPropertyWrite","SafePropertyRead","visitSafePropertyRead","KeyedRead","visitKeyedRead","KeyedWrite","visitKeyedWrite","BindingPipe","exp","visitPipe","LiteralPrimitive","visitLiteralPrimitive","LiteralArray","visitLiteralArray","LiteralMap","visitLiteralMap","Interpolation","strings","visitInterpolation","Binary","operation","left","right","visitBinary","PrefixNot","visitPrefixNot","NonNullAssert","visitNonNullAssert","MethodCall","visitMethodCall","SafeMethodCall","visitSafeMethodCall","FunctionCall","visitFunctionCall","ASTWithSource","TemplateBinding","keyIsVar","NullAstVisitor","RecursiveAstVisitor","AstTransformer","AstMemoryEfficientTransformer","modified","original","visitAstChildren","ParsedPropertyType","ParsedProperty","isLiteral","LITERAL_ATTR","ANIMATION","ParsedEvent","ParsedVariable","BoundElementProperty","SplitInterpolation","offsets","TemplateBindingParseResult","templateBindings","warnings","_createInterpolateRegExp","config","pattern","ParseErrorLevel","Parser","_lexer","parseAction","_checkNoInterpolation","sourceToLex","_stripComments","_ParseAST","parseChain","parseBinding","_parseBindingAst","parseSimpleBinding","SimpleExpressionChecker","check","_reportError","_parseQuote","prefixSeparatorIndex","parseTemplateBindings","tplKey","tplValue","parseInterpolation","splitInterpolation","expressionText","part","_findInterpolationErrorColumn","wrapLiteralPrimitive","_commentStart","outerQuote","char","nextChar","partInErrIdx","j","inputLength","rparensExpected","rbracketsExpected","rbracesExpected","inputIndex","optionalCharacter","peekKeywordLet","peekKeywordAs","expectCharacter","optionalOperator","op","expectOperator","operator","expectIdentifierOrKeyword","expectIdentifierOrKeywordOrString","exprs","expr","parsePipe","parseExpression","parseConditional","parseLogicalOr","yes","no","parseLogicalAnd","parseEquality","parseRelational","parseAdditive","parseMultiplicative","parsePrefix","parseCallChain","parsePrimary","parseAccessMemberOrMethodCall","parseCallArguments","elements","parseExpressionList","parseLiteralMap","literalValue","terminator","quoted","isSafe","positionals","expectTemplateBindingKey","operatorFound","firstBinding","rawKey","isVar","toUpperCase","letStart","letName","locationText","skip","ParseLocation","file","line","moveBy","content","len","ch","priorLine","substr","lastIndexOf","getContext","maxChars","maxLines","startOffset","endOffset","ctxChars","ctxLines","before","after","ParseSourceFile","ParseSourceSpan","details","TokenType$1","ParseError","level","ERROR","contextualMessage","ctx","Token$1","TokenError","errorMsg","tokenType","TokenizeResult","_CR_OR_CRLF_REGEXP","_unexpectedCharacterErrorMsg","charCode","_unknownEntityErrorMsg","entitySrc","_ControlFlowError","_Tokenizer","_file","_getTagDefinition","_tokenizeIcu","_interpolationConfig","_peek","_nextPeek","_index","_line","_column","_expansionCaseStack","_inInterpolation","_input","_length","_advance","_processCarriageReturns","_getLocation","_attemptCharCode","_consumeCdata","_consumeComment","_consumeDocType","_consumeTagClose","_consumeTagOpen","_tokenizeExpansionForm","_consumeText","_beginToken","_endToken","mergeTextTokens","srcTokens","dstTokens","lastDstToken","TEXT","isExpansionFormStart","_consumeExpansionFormStart","isExpansionCaseStart","_isInExpansionForm","_consumeExpansionCaseStart","_isInExpansionCase","_consumeExpansionCaseEnd","_consumeExpansionFormEnd","_getSpan","_currentTokenStart","_currentTokenType","_createError","_attemptCharCodeCaseInsensitive","compareCharCodeCaseInsensitive","code1","code2","toUpperCaseCharCode","_requireCharCode","_attemptStr","chars","initialPosition","_savePosition","_restorePosition","_attemptStrCaseInsensitive","_requireStr","_attemptCharCodeUntilFn","predicate","_requireCharCodeUntilFn","_attemptUntilChar","_readChar","decodeEntities","_decodeEntity","startPosition","isNamedEntityEnd","isHex","numberStart","isDigitEntityEnd","strNum","entity","_consumeRawText","firstCharOfEnd","attemptEndRest","tagCloseStart","textStart","COMMENT_START","textToken","COMMENT_END","CDATA_START","CDATA_END","DOC_TYPE","_consumePrefixAndName","nameStart","nameOrPrefixStart","isNameEnd","lowercaseTagName","savedPos","_consumeTagOpenStart","isNotWhitespace","_consumeAttributeName","_consumeAttributeValue","_consumeTagOpenEnd","contentTokenType","_consumeRawTextWithTagClose","TAG_CLOSE","TAG_OPEN_START","ATTR_NAME","prefixAndName","ATTR_VALUE","quoteChar","valueStart","TAG_OPEN_END_VOID","TAG_OPEN_END","EXPANSION_FORM_START","_readUntil","EXPANSION_CASE_VALUE","EXPANSION_CASE_EXP_START","EXPANSION_CASE_EXP_END","EXPANSION_FORM_END","_isTextEnd","nbTokens","isAsciiHexDigit","isInterpolationStart","TreeError","ParseTreeResult","Parser$1","getTagDefinition","parseExpansionForms","tokensAndErrors","tokenizeExpansionForms","treeAndErrors","_TreeBuilder","build","_rootNodes","_errors","_elementStack","_consumeStartTag","_consumeEndTag","_closeVoidElement","_consumeExpansion","prev","_advanceIf","startToken","_addToParent","expCase","_parseExpansionCase","_collectExpansionExpTokens","parsedExp","expansionFormStack","lastOnStack","parent_1","_getParentElement","el","startTagToken","_consumeAttr","_getElementFullName","selfClosing","tagDef","_pushElement","_popElement","parentEl","_getParentElementSkippingContainers","parent","container","newParent","_insertBeforeContainer","endTagToken","stackIndex","splice","attrName","valueToken","parentElement","stack","digest","sha1","utf8","words32","stringToWords32","endian","wordAt","Endian","Big","w","h0","h1","h2","h3","h4","rol32","fk","f","k","temp","add32","byteStringToHexString","byteAt","words32ToByteString","serializeNodes","serializerVisitor","meaning","decimalDigest","_SerializerIgnoreIcuExpVisitor","computeMsgId","fingerprint","hi","lo","him","lom","add64","ah","al","bh","add32to64","carry","l","rol64","count","byteStringToDecString","decimal","toThePower","addBigInt","numberTimesBigInt","_SerializerVisitor","visitContainer","visitIcu","icu","strCases","visitTagPlaceholder","ph","startName","closeName","visitPlaceholder","visitIcuPlaceholder","hash32","mix","Little","sub32","high","word","word32ToByteString","x","y","Math","max","tmpSum","num","product","bToThePower","_VisitorMode","Message","placeholders","placeholderToMessage","description","sources","startLine","startCol","endLine","endCol","Text$1","Container","Icu","TagPlaceholder","tag","Placeholder","IcuPlaceholder","CloneVisitor","expressionPlaceholder","RecurseVisitor","TAG_TO_PLACEHOLDER_NAMES","A","B","BR","EM","H1","H2","H3","H4","H5","H6","HR","I","LI","LINK","OL","P","Q","S","SMALL","SUB","SUP","TBODY","TD","TFOOT","TH","THEAD","TR","TT","U","UL","PlaceholderRegistry","_placeHolderNameCounts","_signatureToName","getStartTagPlaceholderName","signature","_hashTag","upperTag","baseName","_generateUniqueName","getCloseTagPlaceholderName","_hashClosingTag","getPlaceholderName","upperName","uniqueName","getUniquePlaceholder","sort","_expParser","_I18nVisitor","_expressionParser","toI18nMessage","_isIcu","_icuDepth","_placeholderRegistry","_placeholderToContent","_placeholderToMessage","i18nodes","startPhName","closePhName","attribute","_visitTextWithInterpolation","comment","i18nIcuCases","i18nIcu","caze","expPh","phName","icuCase","sDelimiter","eDelimiter","_CUSTOM_PH_EXP","lastStringIdx","I18nError","_I18N_COMMENT_PREFIX_REGEXP","MEANING_SEPARATOR","ID_SEPARATOR","i18nCommentsWarned","ExtractionResult","messages","_Visitor","_implicitTags","_implicitAttrs","extract","_init","Extract","_inI18nBlock","_messages","merge","translations","Merge","_translations","translatedNode","_mode","_mayBeAddBlockChildren","wasInIcu","_inIcu","_isInTranslatableSection","_addMessage","isOpening","_isOpeningComment","startsWith","isClosing","_isClosingComment","_inI18nNode","_depth","_blockStartDepth","_closeTranslatableSection","_blockChildren","_blockMeaningAndDesc","_translateMessage","console","warn","_openTranslatableSection","wasInI18nNode","wasInImplicitNode","_inImplicitNode","childNodes","translatedChildNodes","i18nAttr","_getI18nAttr","find","i18nMeta","isImplicit","isTopLevelImplicit","isTranslatable","visited","_visitAttributesOf","translatedAttrs","_translateAttributes","mode","_msgCountAtSectionStart","_createI18nMessage","createI18nMessageFactory","explicitAttrNameToValue","implicitAttrNames","msgMeta","_parseMessageMeta","attributes","i18nParsedMessageMeta","translatedAttributes","directChildren","startIndex","i18n","idIndex","descIndex","meaningAndDesc","_TAG_DEFINITION","XmlTagDefinition","getXmlTagDefinition","XmlParser","Serializer","createNameMapper","SimplePlaceholderMapper","mapName","internalToPublic","publicToNextId","publicToInternal","toPublicName","internalName","toInternalName","publicName","visitPlaceholderName","nextId","_visitor","visitTag","strAttrs","_serializeAttributes","strChildren","visitDeclaration","decl","visitDoctype","doctype","rootTag","dtd","serialize","Declaration","unescapedAttrs","escapeXml","Doctype","Tag","Text$2","unescapedValue","CR","ws","_ESCAPED_CHARS","entry","Xliff","write","locale","_WriteVisitor","transUnits","contextTags","contextGroupTag","purpose","context-type","transUnit","datatype","priority","from","body","source-language","xliff","version","xmlns","encoding","load","XliffParser","msgIdToHtml","i18nNodesByMsgId","converter","XmlToI18n","msgId","convert","i18nNodes","ctype","getCtypeForTag","equiv-text","startTagPh","closeTagPh","equivText","_locale","_unitMlString","_msgIdToHtml","xml","idAttr","_addError","innerText","localeAttr","expansion","expansionCase","xmlIcu","nameAttr","caseMap","Xliff2","_WriteVisitor$1","units","notes","category","segment","srcLang","Xliff2Parser","XmlToI18n$1","getTypeForTag","_nextPlaceholderId","disp","tagPc","equivStart","equivEnd","dispStart","dispEnd","idStr","versionAttr","version$$1","startAttr","endAttr","endId","Xmb","exampleVisitor","ExampleVisitor","_Visitor$2","rootNode","sourceTags","addDefaultExamples","digest$1","startEx","closeEx","exTag","exText","TypeModifier","Xtb","XtbParser","XmlToI18n$2","createLazyProperty","valueFn","xtb","_bundleDepth","langAttr","HtmlParser","TranslationBundle","_i18nNodesByMsgId","mapperFactory","missingTranslationStrategy","Warning","_i18nToHtml","I18nToHtmlVisitor","serializer","srcMsg","html","_digest","_mapperFactory","_missingTranslationStrategy","_console","_contextStack","_convertToText","_srcMsg","_mapper","mapper","I18NHtmlParser","translationsFormat","createSerializer","format","_translationBundle","parseResult","mergeTranslations","implicitTags","implicitAttrs","CORE","Identifiers","ANALYZE_FOR_ENTRY_COMPONENTS","moduleName","ElementRef","NgModuleRef","ViewContainerRef","ChangeDetectorRef","QueryList","TemplateRef","CodegenComponentFactoryResolver","ComponentFactoryResolver","ComponentFactory","ComponentRef","NgModuleFactory","createModuleFactory","moduleDef","moduleProviderDef","RegisterModuleFactoryFn","inject","INJECTOR","Injector","defineInjectable","InjectableDef","LOCALE_ID","TRANSLATIONS_FORMAT","inlineInterpolate","interpolate","EMPTY_ARRAY","EMPTY_MAP","Renderer","viewDef","elementDef","anchorDef","textDef","directiveDef","providerDef","queryDef","pureArrayDef","pureObjectDef","purePipeDef","pipeDef","nodeValue","ngContentDef","unwrapValue","createRendererType2","RendererType2","ViewDefinition","createComponentFactory","createTokenForReference","createTokenForExternalReference","reflector","resolveExternalReference","BuiltinTypeName","Type$1","modifiers","hasModifier","modifier","BinaryOperator","BuiltinType","visitType","visitBuiltinType","MapType","ExpressionType","visitExpressionType","ArrayType","of","visitArrayType","valueType","visitMapType","INFERRED_TYPE","Dynamic","Inferred","BOOL_TYPE","Bool","nullSafeIsEquivalent","other","isEquivalent","areAllEquivalent","Int","BuiltinVar","Expression","ReadPropExpr","ReadKeyExpr","callMethod","params","InvokeMethodExpr","callFn","InvokeFunctionExpr","instantiate","InstantiateExpr","conditional","trueCase","falseCase","ConditionalExpr","equals","rhs","BinaryOperatorExpr","Equals","notEquals","NotEquals","identical","Identical","notIdentical","NotIdentical","Minus","plus","Plus","Divide","multiply","Multiply","modulo","Modulo","And","bitwiseAnd","parens","BitwiseAnd","Or","lower","Lower","lowerEquals","LowerEquals","bigger","Bigger","biggerEquals","BiggerEquals","isBlank","TYPED_NULL_EXPR","cast","CastExpr","toStmt","ExpressionStatement","BuiltinMethod","ReadVarExpr","builtin","isConstant","visitExpression","visitReadVarExpr","WriteVarExpr","WrappedNodeExpr","visitWrappedNodeExpr","visitWriteVarExpr","toDeclStmt","DeclareVarStmt","WriteKeyExpr","visitWriteKeyExpr","WritePropExpr","visitWritePropExpr","StmtModifier","method","visitInvokeMethodExpr","fn","visitInvokeFunctionExpr","classExpr","visitInstantiateExpr","LiteralExpr","visitLiteralExpr","ExternalExpr","typeParams","runtime","visitExternalExpr","visitConditionalExpr","NotExpr","visitNotExpr","AssertNotNull","visitAssertNotNullExpr","visitCastExpr","FunctionExpr","statements","visitFunctionExpr","DeclareFunctionStmt","lhs","visitBinaryOperatorExpr","visitReadPropExpr","visitReadKeyExpr","LiteralArrayExpr","entries","every","visitLiteralArrayExpr","LiteralMapEntry","LiteralMapExpr","visitLiteralMapExpr","CommaExpr","visitCommaExpr","This","Super","CatchError","CatchStack","Statement","stmt","visitStatement","visitDeclareVarStmt","visitDeclareFunctionStmt","visitExpressionStmt","ReturnStatement","visitReturnStmt","AbstractClassPart","ClassMethod","ClassField","initializer","ClassGetter","ClassStmt","fields","getters","constructorMethod","methods","visitDeclareClassStmt","IfStmt","visitIfStmt","TryCatchStmt","CommentStmt","multiline","visitCommentStmt","JSDocCommentStmt","tags","visitJSDocCommentStmt","serializeTags","e_1","out","tags_1","tags_1_1","tagToString","e_1_1","return","bodyStmts","catchStmts","visitTryCatchStmt","ThrowStmt","visitThrowStmt","AstTransformer$1","transformExpr","transformStmt","visitAllExpressions","visitAllStatements","mapType","getter","ctorMethod","stmts","RecursiveAstVisitor$1","variable","importExpr","literalArr","_ReadVarVisitor","varNames","_FindExternalReferencesVisitor","externalReferences","_ApplySourceSpanTransformer","_clone","clone","STRIP_SRC_FILE_SUFFIXES","GENERATED_FILE","JIT_SUMMARY_FILE","JIT_SUMMARY_NAME","ngfactoryFilePath","forceSourceFile","urlWithSuffix","splitTypescriptSuffix","normalizeGenFileSuffix","srcFileSuffix","stripGeneratedFileSuffix","endsWith","lastDot","LifecycleHooks","LOWERED_SYMBOL","LIFECYCLE_HOOKS_VALUES","OnInit","OnDestroy","DoCheck","OnChanges","AfterContentInit","AfterContentChecked","AfterViewInit","AfterViewChecked","CompileMetadataResolver","_ngModuleResolver","_directiveResolver","_pipeResolver","_summaryResolver","_schemaRegistry","_directiveNormalizer","_staticSymbolCache","_errorCollector","_nonNormalizedDirectiveCache","_directiveCache","_summaryCache","_pipeCache","_ngModuleCache","_ngModuleOfTypes","_shallowModuleCache","getReflector","dirMeta","_createProxyClass","baseType","delegate","proxyClass","setDelegate","getGeneratedClass","dirType","getComponentViewClass","viewClassName","compType","embeddedTemplateIndex","getHostComponentViewClass","hostViewClassName","getHostComponentType","HostClass","getRendererType","rendererTypeName","getComponentFactory","componentFactoryName","hostView","initComponentFactory","_loadSummary","kind","typeSummary","summary","resolveSummary","getHostComponentMetadata","hostViewType","hostType","diDeps","loadDirectiveMetadata","isSync","getNonNormalizedDirectiveMetadata","createDirectiveMetadata","templateMetadata","normalizedDirMeta","componentModuleUrl","annotation","componentStillLoadingError","error$$1","cacheEntry","nonNormalizedTemplateMetadata","changeDetectionStrategy","entryComponentMetadata","_getProvidersMetadata","stringifyType","flattenAndDedupeArray","_getEntryComponentMetadata","getDefaultComponentElementName","_getQueriesMetadata","_getTypeMetadata","getDirectiveMetadata","getDirectiveSummary","dirSummary","isPipe","isNgModule","getNgModuleSummary","moduleType","alreadyCollecting","moduleSummary","moduleMeta","getNgModuleMetadata","loadNgModuleDirectiveAndPipeMetadata","loading","promise","_loadPipeMetadata","getShallowModuleMetadata","compileMeta","ngModuleMeta","shallowAnnotations","rawExports","rawImports","imports","rawProviders","exportedNonModuleIdentifiers","importedType","importedModuleType","isValidType","_checkSelfImport","_getTypeDescriptor","importedModuleSummary","exportedType","exportedModuleSummary","_getIdentifierMetadata","_getTransitiveNgModuleMetadata","declarations","declaredType","declaredIdentifier","_addTypeToModule","exportedId","bootstrap","provide","oldModule","modulesByToken","modSummary","mod","comp","addedTokens","tokenRef","prevModules","moduleRef","isInjectable","tryAnnotations","ann","getInjectableSummary","Injectable","getInjectableMetadata","throwOnUnknownDeps","symbol","providedIn","_getDependenciesMetadata","getAllLifecycleHooks","hook","hasLifecycleHook","getHookName","_getFactoryMetadata","getPipeMetadata","pipeType","pipeMeta","getPipeSummary","pipeSummary","getOrLoadPipeMetadata","pipeAnnotation","typeOrFunc","hasUnknownDeps","dependenciesMetadata","parameters","isAttribute","isSelf","isSkipSelf","isOptional","paramEntry","_getTokenMetadata","depsTokens","dep","targetEntryComponents","debugInfo","compileProviders","providerIdx","providerMeta","_validateProvider","providersInfo","soFar","seenProvider","seenProviderIdx","_getEntryComponentsFromProvider","getProviderMetadata","components","collectedIdentifiers","extractIdentifiers","targetIdentifiers","_CompileValueConverter","_getInjectableTypeMetadata","compileDeps","compileTypeMetadata","compileFactoryMetadata","propertyName","_getQueryMetadata","_queryVarBindings","q","varName","read","otherType","tree","dedupeArray","array","flattenArray","ProviderError","ProviderViewContext","component","_getViewQueries","viewQueryId","_addQueryToTokenMap","queryId","ProviderElementContext","viewContext","_parent","_isViewRoot","_directiveAsts","refs","isTemplate","_sourceSpan","_transformedProviders","_seenProviders","_queriedTokens","transformedHasViewContainer","_attrs","attrAst","directivesMeta","directiveAst","_allProviders","_resolveProvidersFromDirectives","targetErrors","providersByToken","_resolveProviders","Component","PublicService","PrivateService","_contentQueries","_getContentQueries","contentQueryId","contentQueries","directiveIndex","_addQueryReadsTo","templateRefId","refAst","defaultQueryValue","_getOrCreateLocalProvider","afterElement","lazyProviders","eagerProviders","sortedProviderTypes","transformProviders","sortedDirectives","dir1","dir2","allMatches","defaultValue","queryReadTokens","_getQueriesFor","queryValue","currentEl","distance","requestingProviderType","resolvedProvider","Builtin","transformedProviderAst","transformedProviders","transformedUseValue","transformedUseExisting","transformedDeps","existingDiDep","_getDependency","_transformProvider","_transformProviderAst","_getLocalDependency","attrValue","isValue","currElement","currEager","prevElement","targetProvidersByToken","NgModuleResolver","SourceMapGenerator","sourcesContent","lines","lastCol0","hasMappings","addSource","addLine","addMapping","col0","sourceUrl","sourceLine0","sourceCol0","currentLine","toJSON","sourcesIndex","mappings","lastSourceIndex","lastSourceLine0","lastSourceCol0","segments","segAsStr","toBase64VLQ","sourceRoot","toJsComment","toBase64String","b64","i1","i2","i3","toBase64Digit","digit","B64_DIGITS","_SINGLE_QUOTE_ESCAPE_STRING_RE","_LEGAL_IDENTIFIER_RE","_INDENT_WITH","CATCH_ERROR_VAR$1","CATCH_STACK_VAR$1","_EmittedLine","indent","partsLength","srcSpans","AbstractEmitterVisitor","EmitterVisitorContext","_indent","_classes","_preambleLineCount","_lines","createRoot","println","lastPart","print","lineIsEmpty","_currentLine","lineLength","newLine","removeEmptyLastLine","incIndent","decIndent","pushClass","clazz","popClass","toSource","sourceLines","_createIndent","toSourceMapGenerator","genFilePath","startsAtLine","firstOffsetMapped","mapFirstOffsetIfNeeded","lineIdx","spans","spanIdx","sourceLine","sourceCol","setPreambleLineCount","column","emittedLine","columnsLeft","partIndex","_escapeDollarInStrings","hasElseCase","lineWasEmpty","getBuiltinMethodName","escapeIdentifier","opStr","visitAllObjects","separator","incrementedIndent","escapeDollar","alwaysQuote","_TsEmitterVisitor","referenceFilter","importFilter","typeExpression","importsWithPrefixes","reexports","defaultType","_visitIdentifier","Exported","as","Final","_printColonType","field","_visitClassField","_visitClassConstructor","_visitClassGetter","_visitClassMethod","Private","Static","_visitParams","typeStr","ConcatArray","SubscribeObservable","Bind","size","PipeResolver","metas","SECURITY_SCHEMA","registerContext","specs","specs_1","specs_1_1","HTML","URL","RESOURCE_URL","BOOLEAN","NUMBER","STRING","OBJECT","SCHEMA","_ATTR_TO_PROP","class","for","formaction","innerHtml","readonly","tabindex","DomElementSchemaRegistry","_schema","encodedType","strType","properties","superName","superType","property","hasProperty","schemaMetas","schema","hasElement","getMappedPropName","NONE","validateProperty","validateAttribute","allKnownElementNames","normalizeAnimationStyleProperty","dashCaseToCamelCase","normalizeAnimationStyleValue","camelCaseProp","userProvidedProp","strVal","_isPixelDimensionStyle","valAndSuffixMatch","ElementSchemaRegistry","SKIP_WS_TRIM_TAGS","WS_CHARS","NO_WS_REGEXP","WS_REPLACE_REGEXP","replaceNgsp","WhitespaceVisitor","hasPreserveWhitespacesAttr","PLURAL_CASES","expandNodes","expander","_Expander","ExpansionResult","isExpanded","expanded","ExpansionError","_expandPluralForm","expansionResult","switchAttr","_expandDefaultForm","BindingParser","_exprParser","pipesByName","_usedPipes","pipesByName_1","pipe","getUsedPipes","createBoundHostProperties","boundProps_1","parsePropertyBinding","createDirectiveHostPropertyAsts","elementSelector","boundProps","createBoundElementProperty","createDirectiveHostEventAsts","targetEvents_1","parseEvent","sourceInfo","_reportExpressionParserErrors","_checkPipes","parseInlineTemplateBinding","targetMatchableAttrs","targetProps","targetVars","_parseTemplateBindings","_parsePropertyAst","parseLiteralAttr","bindingsResult","warning","WARNING","isAnimationLabel","_parseAnimation","isAnimationProp","_parseBinding","parsePropertyInterpolation","DEFAULT","isHostBinding","boundProp","bindingType","boundPropertyName","securityContexts","_validatePropertyOrAttributeName","calcPossibleSecurityContexts","nsSeparatorIdx","targetEvents","_parseAnimationEvent","_parseRegularEvent","splitAtPeriod","_parseAction","errors_1","errors_1_1","collector","PipeCollector","pipeName","isAttr","report","registry","ctxs","elementNames","notElementNames","possibleElementNames","BIND_NAME_REGEXP","CLASS_ATTR","TEXT_CSS_SELECTOR","TemplateParseError","TemplateParseResult","templateAst","usedPipes","TemplateParser","transforms","tryParse","htmlParseResult","getInterpolationConfig","removeWhitespaces","htmlAstWithErrors","tryParseHtml","expandHtml","uniqDirectives","removeSummaryDuplicates","uniqPipes","providerViewContext","bindingParser","parseVisitor","TemplateParseVisitor","EMPTY_ELEMENT_CONTEXT","_assertNoReferenceDuplicationOnTemplate","transform","forced","expandedHtmlAst","existingReferences","_bindingParser","_schemas","_targetErrors","selectorMatcher","directivesIndex","ngContentCount","findNgContentIndex","valueNoNgsp","queryStartIndex","elName","matchableAttrs","elementOrDirectiveProps","elementOrDirectiveRefs","elementVars","events","templateElementOrDirectiveProps","templateMatchableAttrs","templateElementVars","hasInlineTemplates","isTemplateElement","isNgTemplate","templateValue","templateKey","hasBinding","_parseAttr","normalizedName","_normalizeAttributeName","hasTemplateBinding","parsedVariables_1","elementCssSelector","createElementCssSelector","_parseDirectives","directiveMetas","matchElement","boundDirectivePropNames","directiveAsts","_createDirectiveAsts","elementProps","_createElementPropertyAsts","providerContext","NON_BINDABLE_VISITOR","ElementContext","parsedElement","projectionSelector","_isEmptyTextNode","_assertAllEventsPublishedByDirectives","_assertNoComponentsNorElementBindingsOnTemplate","transformedDirectiveAsts","_assertElementExists","_assertOnlyOneComponent","ngContentIndex_1","templateQueryStartIndex","templateSelector","templateBoundDirectivePropNames","templateDirectiveAsts","templateElementProps","templateProviderContext","targetRefs","srcSpan","boundEvents","bindParts","_parseVariable","_parseReference","_parseAssignmentEvent","ElementOrDirectiveRef","elementSourceSpan","targetReferences","targetBoundDirectivePropNames","matchedReferences","directiveProperties","_checkPropertiesInSchema","parsedEvents","_createDirectivePropertyAsts","elOrDirRef","isReferenceToDirective","refToken","targetBoundDirectiveProps","boundPropsByName_1","prevValue","dirProp","isEmptyExpression","boundElementProps","_findComponentDirectives","_findComponentDirectiveNames","componentTypeNames","allDirectiveEvents","NonBindableVisitor","attrNameAndValues","splitExportAs","_ngContentIndexMatcher","_wildcardNgContentIndex","wildcardNgContentIndex","ngContentIndices","elNameNoNs","attrNameNoNs","BindingForm","_Mode","items","_BuiltinAstConverter","_converterFactory","BuiltinFunctionCall","createPipeConverter","createLiteralArrayConverter","createLiteralMapConverter","R3ResolvedDependencyType","KEY_CONTEXT","CORE$1","FixupExpression","resolved","fixup","shared","MapPlaceholderNames","Identifiers$1","NEW_METHOD","TRANSFORM_METHOD","PATCH_DEPS","createElement","elementEnd","elementProperty","elementAttribute","elementClassNamed","elementStyleNamed","containerCreate","textBinding","bind","interpolation1","interpolation2","interpolation3","interpolation4","interpolation5","interpolation6","interpolation7","interpolation8","interpolationV","pureFunction0","pureFunction1","pureFunction2","pureFunction3","pureFunction4","pureFunction5","pureFunction6","pureFunction7","pureFunction8","pureFunctionV","pipeBind1","pipeBind2","pipeBind3","pipeBind4","pipeBindV","loadDirective","projection","projectionDef","refreshComponent","directiveLifeCycle","injectAttribute","injectElementRef","injectTemplateRef","injectViewContainerRef","directiveInject","defineComponent","ComponentDef","defineDirective","DirectiveDef","defineInjector","defineNgModule","definePipe","queryRefresh","NgOnChangesFeature","listener","reserveSlots","noop","_a$1","ValueConverter","constantPool","allocateSlot","allocatePureFunctionSlots","slot","slotPseudoLocal","pureFunctionSlot","pipeBindingCallInfo","pipeBindingIdentifiers","isVarLength","convertedArgs","literal$$1","getConstLiteral","getLiteralFactory","literalMap","pureFunctionIdentifiers","allocateSlots","literalFactory","literalFactoryArguments","startSlot","pureFunctionCallInfo","literal","BindingScope","declareLocalVarCallback","referenceNameIndex","declared","getLocal","nestedScope","declareCallback","freshReferenceName","ROOT_SCOPE","TS","ResolvedStaticSymbol","StaticSymbolResolver","staticSymbolCache","summaryResolver","errorRecorder","metadataCache","resolvedSymbols","resolvedFilePaths","importAs","symbolResourcePaths","symbolFromFile","knownFileNameToModuleNames","resolveSymbol","staticSymbol","_resolveSymbolMembers","_resolveSymbolFromSummary","_createSymbolsOf","getImportAs","useSummaries","baseSymbol","getStaticSymbol","baseImportAs","summarizedFileName","stripSummaryForJitFileSuffix","summarizedName","stripSummaryForJitNameSuffix","symbolName","summaryForJitFileName","fileName","summaryForJitName","getResourcePath","getTypeArity","isGeneratedFile","resolvedSymbol","unwrapResolvedMetadata","arity","getKnownModuleName","recordImportAs","sourceSymbol","targetSymbol","recordModuleNameForFileName","invalidateFile","symbols","symbols_1","symbols_1_1","ignoreErrorsFor","recorder","baseResolvedSymbol","baseMetadata","__symbolic","statics","hasDecorators","getModuleMetadata","metadataKey","decorators","getSymbolsOf","summarySymbols","metadataSymbols","e_2","_loop_1","moduleExport","export","exportSymbol","symName","unescapeIdentifier","resolvedModule","resolveModule","createExport","this_1","e_2_1","topLevelSymbolNames_1","origins_1","symbolMeta","origin","originFilePath","reportError","createResolvedSymbol","topLevelPath","topLevelSymbolNames","_originalFileMemo","isTsFile","isLibraryFile","getOriginalName","getOutputName","self","transformedMeta","ReferenceTransformer","functionParams","symbolic","oldLen","unwrappedTransformedMeta","moduleMetadata","moduleMetadatas","getMetadataFor","maxVersion_1","md","getSymbolByModule","containingFile","moduleNameToFileName","ToJsonSerializer","symbolResolver","srcFileName","indexBySymbol","reexportedBy","processedSummaryBySymbol","processedSummaries","unprocessedSymbolSummariesBySymbol","addSummary","unprocessedSummary","processedSummary","processValue","metadata_1","clone_1","isCall","isFunctionCall","isMethodCallOnVariable","declarationSymbol","isLoweredSymbol","ngModuleSummary","summary_1","json","summaries","reexportSymbol","__symbol","toSummaryFileName","flags","visitStaticSymbol","loadSummary","FromJsonDeserializer","symbolCache","deserialize","libraryFileName","allImportAs","serializedSymbol","fromSummaryFileName","FORMATTED_MESSAGE","ANGULAR_CORE","HIDDEN_KEY","IGNORE","REFERENCE_SET","shouldIgnore","StaticReflector","knownMetadataClasses","knownMetadataFunctions","annotationCache","shallowAnnotationCache","propertyCache","parameterCache","methodCache","staticCache","conversionMap","resolvedExternalReferences","annotationForParentClassWithSummaryKind","initializeConversionMap","kc","_registerDecoratorOrConstructor","kf","_registerFunction","findSymbolDeclaration","declarationSymbol_1","refSymbol","findDeclaration","tryFindDeclaration","resolvedMetadata","originalRecorder","_annotations","simplify","classMetadata","getTypeMetadata","parentType","findParentType","parentAnnotations","ownAnnotations_1","requiredAnnotationTypes","requiredType","formatMetadataError","metadataError","parentPropMetadata_1","parentProp","members_1","parameters_1","ctorData","rawParameterTypes","parameterDecorators_1","rawParamType","nestedResult","paramType","trySimplify","_methodNames","methodNames","parentMethodNames_1","members_2","isMethod","_staticMembers","staticMembers","lcProperty","staticMembers_1","staticMembers_1_1","injectionToken","opaqueToken","ROUTES","lazy","scope","BindingScope$1","calling","simplifyInContext","depth","resolveReferenceValue","simplifyEagerly","simplifyNested","nestedContext","isMetadataError","summaryMsg","chain","errorSummary","REFERENCE_TO_NONEXPORTED_CLASS","VARIABLE_NOT_INITIALIZED","DESTRUCTURE_NOT_SUPPORTED","COULD_NOT_RESOLVE_TYPE","FUNCTION_CALL_NOT_SUPPORTED","REFERENCE_TO_LOCAL_SYMBOL","advise","isPrimitive","result_2","spreadArray","spreadArray_1","spreadArray_1_1","value_2","e_3_1","e_3","declarationValue","operand","indexTarget","member","selectContext","selectTarget","localValue","missing","argExpressions","arg","simplifyCall","functionSymbol","targetFunction","targetExpression","value_1","defaults","functionScope","result_1","oldScope","mapStringMap","simplifyLazily","reportingContext","METADATA_ERROR","LAMBDA_NOT_SUPPORTED","PopulatedScope","formattedError","formatChain","indentStr","half","floor","formatMetadataMessageChain","expandedMessage","typeName","messageAdvise","AotSummaryResolver","summaryCache","loadedFilePaths","isSourceFile","referringSrcFileName","referringLibFileName","rootSymbol","_loadSummaryFile","importedFilePath","hasSummary","summaryFilePath","summaryFileName","deserializeSummaries","JitSummaryResolver","_summaries","createOfflineCompileUrlResolver","UrlResolver","JitEmitterVisitor","_evalArgNames","_evalArgValues","_evalExportedVars","createReturnStmt","resultVar","getArgs","_emitReferenceToExternal","AbstractJsEmitterVisitor","fnExpr","currentClass","_ComponentIndex","UrlResolverImpl","_packagePrefix","resolvedUrl","_resolveUrl","_split","encodeURI","baseParts","Scheme","_joinAndCanonicalizePath","Port","Path","resolvedParts","_splitRe","uri","_removeDotSegments","leadingSlash","trailingSlash","up","pos","unshift","_buildFromEncodedParts","opt_scheme","opt_userInfo","opt_domain","opt_port","opt_path","opt_queryData","opt_fragment","UserInfo","Domain","QueryData","Fragment","BuiltinType$1","DiagnosticKind","ResourceLoader","TypeDiagnostic","AstType","getType","getDiagnostics","diagnostics","callable","reportWarning","normalize$$1","Undefined","Null","Other","nullable","getNonNullableType","leftType","rightType","leftRawKind","getTypeKind","rightRawKind","leftKind","operKind","Any","getBuiltinType","errorAst","Boolean","anyType","getTypeUnion","selectSignature","language","public","definition","signatures","types","indexed","argument","undefinedType","targetType","keyType","getArrayType","resolveMethodCall","getPipes","expType","expressionType","resolvePropertyRead","_anyType","_undefinedType","receiverType","isAny","receiverInfo","getDefinitionOf","info","templateOffset","refinedVariableType","templateElement","ngForDirective","ngForOfBinding","getElementType","getExpressionScope","includeEvent","getReferences","processReferences","getTypeSymbol","references_1","references_1_1","getVarDeclarations","tail","_loop_2","getTemplateContext","Unbound","getEventDeclaration","referenceTable","createSymbolTable","variableTable","eventsTable","mergeSymbolTable","ExpressionDiagnosticsVisitor","diagnoseExpression","attributeValueLocation","directiveSummary","spanOf$1","previousDirectiveSummary","hasTemplateReference","diDep","getExpressionDiagnostics","analyzer","offsetSpan","amount","toNumbers","compareNumbers","min","longestArray","comparisonResult","isPrivate","ModifierFlags","getCombinedModifierFlags","NodeFlags","isReferenceType","ObjectFlags","TypeFlags","objectFlags","Reference","TypeScriptSymbolQuery","program","checker","fetchPipes","typeCache","typeKindOf","StringLike","StringLiteral","NumberLike","Union","candidate","unionType","e_7_1","e_7","TypeParameter","getTsTypeOf","getBuiltinTypeFromTs","TypeWrapper","elementType","getTypeParameterOf","tsType","nonNullableType","pipesCache","typeSymbol","findClassSymbolInContext","contextType","getTemplateRefContextType","SymbolWrapper","MapSymbolTable","addAll","DeclaredSymbol","symbolTables","symbolTables_1","symbolTables_1_1","getSpanAt","spanAt","sourceFile","position_1","getPositionOfLineAndCharacter","forEachChild","findChild","SyntaxKind","LastToken","getStart","getEnd","getTypeOfSymbolAtLocation","getFromSymbolTable","constructorDeclaration","type_1","getTypeAtLocation","typeArguments","getTypeWrapper","typeCallable","getCallSignatures","signaturesOf","SignatureWrapper","getSymbol","definitionFromTsSymbol","SymbolTableWrapper","getProperties","SymbolFlags","Alias","getAliasedSymbol","getContainerOf","getFlags","ClassMember","parentDeclarationOf","e_6_1","e_6","isSymbolPrivate","valueDeclaration","_members","Interface","getDeclaredTypeOfSymbol","typeWrapper","_tsType","declaration","getParameters","getReturnType","SignatureResultOverride","resultType","toSymbolTableFactory","tsVersion","isVersionBetween","tsNumbers","e_4","symbols_2","symbols_2_1","e_4_1","toSymbolTable","symbolTable","toSymbols","table","own","_values","previous","symbols_3","symbols_3_1","e_5_1","e_5","PipesTable","PipeSymbol","INDEX_PATTERN","EmptyTable","instance","parameterType","classSymbol","findClassSymbol","findTransformMethodType","classType","getProperty","getSourceFile","indexVersion","dirname","getExportsOfModule","setParents","AsExpression","TrueKeyword","AnyKeyword","NullKeyword","numeric","NumericLiteral","NoSubstitutionTemplateLiteral","VoidExpression","ClassDeclaration","InterfaceDeclaration","SourceFile","METADATA_VERSION","isFunctionMetadata","isMetadataGlobalReferenceExpression","isMetadataSymbolicReferenceExpression","isMetadataModuleReferenceExpression","default","isMetadataError$1","spreadElementSyntaxKind","SpreadElement","SpreadElementExpression","isMethodCallOf","callExpression","memberName","PropertyAccessExpression","isCallOf","ident","recordMapEntry","nodeMap","isMetadataImportedSymbolReferenceExpression","isMetadataImportDefaultReference","everyNodeChild","isPrimitive$1","isDefined$1","getSourceFileOfNode","getLineAndCharacterOfPosition","errorSymbol","Evaluator","options","recordExport","nameOf","evaluateNode","received","getText","isFoldable","isFoldableWorker","folding","ObjectLiteralExpression","PropertyAssignment","ArrayLiteralExpression","CallExpression","arrayOrEmpty","arrayNode","arrayValue","FalseKeyword","TemplateHead","TemplateMiddle","TemplateTail","ParenthesizedExpression","BinaryExpression","binaryExpression","operatorToken","PlusToken","MinusToken","AsteriskToken","SlashToken","PercentToken","AmpersandAmpersandToken","BarBarToken","ElementAccessExpression","elementAccessExpression","argumentExpression","TemplateExpression","templateSpans","preferReference","recordEntry","substituteExpression","newEntry","isFoldableError","verboseInvalidExpression","resolveName","obj_1","quoted_1","ShorthandPropertyAssignment","assignment","propertyValue","isPropertyAssignment","quotedNames","arr_1","isMetadataSymbolicSpreadExpression","firstArgument","ArrowFunction","NewExpression","newExpression","newArgs","newTarget","propertyAccessExpression","expression_1","expression_2","TypeReference","typeReferenceNode","typeNameNode_1","typeReference","QualifiedName","qualifiedName","left_1","identifier_1","getReference","args_1","UnionType","UndefinedKeyword","StringKeyword","NumberKeyword","BooleanKeyword","TypeAssertionExpression","PrefixUnaryExpression","prefixUnaryExpression","TildeToken","ExclamationToken","operatorText","AmpersandToken","BarToken","CaretToken","EqualsEqualsToken","ExclamationEqualsToken","EqualsEqualsEqualsToken","ExclamationEqualsEqualsToken","LessThanToken","GreaterThanToken","LessThanEqualsToken","GreaterThanEqualsToken","LessThanLessThanToken","GreaterThanGreaterThanToken","GreaterThanGreaterThanGreaterThanToken","ConditionalExpression","conditionalExpression","thenExpression","whenTrue","elseExpression","whenFalse","FunctionExpression","TaggedTemplateExpression","templateExpression","head","ClassExpression","createNodeArray","EmitFlags","Symbols","defineReference","_symbols","populateBuiltins","buildImports","stripQuotes","ImportEqualsDeclaration","importEqualsDeclaration","moduleReference","ExternalModuleReference","externalReference","from_1","ImportDeclaration","importDecl","importClause","moduleSpecifier","namedBindings","NamedImports","NamespaceImport","isStatic","MetadataCollector","getMetadata","strict","locals","composedSubstituter","evaluatorOptions","evaluator","errorSym","maybeGetSimpleFunction","functionDeclaration","functionName","functionBody","statement","returnStatement","func","namesOf","addNamesOf","bindingPattern","parameters_2","parameters_2_1","exportMap","ExportDeclaration","exportClause","spec","isExport","isDeclarationFile","Export","isExportedIdentifier","isExported","exportedIdentifierName","exportedName","classDeclaration","FunctionDeclaration","nameNode","classMetadataOf","getDecorators","decorator","objFromDecorator","decoratorNode","referenceFrom","isMetadataSymbolicSelectExpression","heritageClauses","hc","ExtendsKeyword","extends","typeParameters","recordMember","recordStaticMember","isConstructor","Constructor","MethodDeclaration","maybeFunc","methodDecorators","parameterDecoratorData","parametersData","hasDecoratorData","hasParameterData","parameters_1_1","parameter","parameterData","parameterDecorators","PropertyDeclaration","GetAccessor","SetAccessor","propertyDecorators","TypeAliasDeclaration","typeDeclaration","interfaceDeclaration","EnumDeclaration","enumDeclaration","enumValueHolder","enumName","nextDefaultValue","writtenMembers","enumValue","VariableStatement","variableStatement","variableDeclaration","varValue","exported","report_1","BindingElement","ObjectBindingPattern","ArrayBindingPattern","declarationList","validateMetadata","validateExpression","shouldReportNode","expandedMessage$1","validateFunction","oldLocals","isMetadataSymbolicExpression","indexExpression","ifExpression","getOwnPropertyNames","nodeStart","isClassMetadata","validateClass","classData","validateMember","isMethodMetadata","isConstructorMetadata","staticMember","DiagnosticKind$1","DTS$1","upgradeMetadataWithDtsData","oldMetadata","dtsFilePath","newMetadata","origins","dtsMetadata","getSourceFileMetadata","spanOf$3","isParseSourceSpan","inSpan","exclusive","offsetSpan$1","getSelectors","flatten$1","removeSuffix","suffix","uniqueByName","elements_1","elements_1_1","diagnosticInfoFromTemplateInfo","findTemplateAstAt","allowWidening","isNarrower","spanA","spanB","findAstAt","excludeEmpty","getExpressionCompletions","getExpressionSymbol","groups","onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onkeypress","onkeydown","onkeyup","onload","onunload","href","alt","media","nohref","usemap","src","onfocus","onblur","charset","declare","classid","codebase","codetype","archive","standby","cite","datetime","accept","shape","coords","action","enctype","onsubmit","onreset","accept-charset","valuetype","longdesc","width","disabled","onselect","accesskey","multiple","onchange","label","selected","checked","maxlength","rows","cols","height","border","frame","rules","cellspacing","cellpadding","datapagesize","align","charoff","valign","abbr","axis","headers","rowspan","colspan","profile","http-equiv","scheme","hreflang","rel","rev","ismap","defer","BIG","STRONG","DFN","CODE","SAMP","KBD","VAR","CITE","ABBR","ACRONYM","SPAN","BDO","BODY","ADDRESS","DIV","MAP","AREA","IMG","PARAM","PRE","BLOCKQUOTE","INS","DEL","DL","DT","DD","FORM","LABEL","INPUT","SELECT","OPTGROUP","OPTION","TEXTAREA","FIELDSET","LEGEND","BUTTON","TABLE","CAPTION","COLGROUP","COL","HEAD","TITLE","BASE","META","NOSCRIPT","defaultAttributes","SCHEMA$1","EVENT","BOOLEAN$1","NUMBER$1","STRING$1","OBJECT$1","SchemaInformation","typeParts","allKnownElements","eventsOf","propertiesOf","typeOf","_instance","hiddenHtmlElements","noscript","attributeCompletions","attributeCompletionsForElement","getAttributeInfosForElement","htmlAttributes","attributeNames","compose","indexes","indexes_1","indexes_1_1","group","fromHtml","htmlProperties","propertyNames","htmlEvents","eventNames","selectorMap","selectorAndAttributeNames","attrs_1","selectorAndAttr","hasTemplateReference$1","createElementCssSelector$1","templateAttr","foldAttrs","inputOutput","templates","duplicate","cloneAttr","expandedAttr","nameOfAttr","elementCompletions","htmlNames","voidElementAttributeCompletions","ExpressionVisitor","attributeValueCompletions","key_1","selectorInfo","selector_1","templateBindingResult","expressionParser","valueRelativePosition_1","keyCompletions","lowerName","equalLocation","directiveMetadata","contextTable","symbolsToCompletions","expressionPosition","completions","attributeValuePosition","locateSymbol","templatePosition","symbol_1","span_1","attributeValueSymbol_1","inEvent","findAttribute","expressionOffset","OverrideKindSymbol","findOutputBinding","fieldName","invertMap","findInputBinding","sym","kindOverride","createLanguageService","LanguageServiceImpl","getTemplateReferences","getTemplates","getTemplateDiagnostics","astProvider","getTemplateAst","expressionDiagnostics","getTemplateExpressionDiagnostics","templates_1","templates_1_1","getDeclarations","getAnalyzedModules","getDeclarationDiagnostics","declarationSpan","ngModuleByPipeOrDirective","ngModules","declarations_1","declarations_1_1","uniqueBySpan","getPipesAt","templateInfo","getTemplateAstAtPosition","getCompletionsAt","getTemplateCompletions","templatePosition_1","path_1","mostSpecific","astPosition_1","startTagSpan","dinfo","widerPath_1","widerVisitor","entityCompletions","found","re","getSourceText","interpolationCompletions","templatePath","getDefinitionAt","getDefinition","getHoverAt","getHover","hoverTextOf","getTemplateAt","contextFile","metadataResolver","rawHtmlParser","htmlParser","parser","htmlResult","analyzedModules","findSuitableDefaultModule","resultSize","module_1","moduleSize","removeMissing","opts","ChangeDetectionStrategy$1","ChangeDetectorStatus","Query","InjectionToken","ANNOTATIONS","PARAMETERS","PROP_METADATA","makeDecorator","parentClass","chainFn","typeFn","metaCtor","makeMetadataCtor","DecoratorFactory","annotationInstance","TypeDecorator","cls","annotationCls","makeParamDecorator","ParamDecoratorFactory","ParamDecorator","unusedKey","makePropDecorator","PropDecoratorFactory","decoratorInstance","PropDecorator","Type$2","isType","__window","window","__self","WorkerGlobalScope","__global","_global","_symbolIterator","getSymbolIterator","Symbol_1","scheduleMicroTask","Zone","looseIdentical","stringify$1","DELEGATE_CTOR","INHERITED_CLASS","INHERITED_CLASS_WITH_CTOR","ReflectionCapabilities","reflect","_reflect","isReflectionEnabled","_zipTypesAndAnnotations","paramTypes","paramAnnotations","_ownParameters","parentCtor","tsickleCtorParams","ctorParameters","paramTypes_1","ctorParam","paramAnnotations_1","convertTsickleDecoratorIntoMetadata","fill","getParentCtor","_ownAnnotations","ownAnnotations","_ownPropMetadata","propDecorators","propDecorators_1","propMetadata_1","ownPropMetadata","setter","importUri","resourceUri","resolveIdentifier","resolveEnum","enumIdentifier","decoratorInvocations","decoratorInvocation","parentProto","forwardRef","forwardRefFn","__forward_ref__","resolveForwardRef$1","Inject","Optional","Self","SkipSelf","SOURCE$1","_THROW_IF_NOT_FOUND","THROW_IF_NOT_FOUND","NullInjector","notFoundValue","StaticInjector","NULL","IDENT","EMPTY","CIRCULAR","MULTI_PROVIDER_FN","GET_PROPERTY_NAME$1","USE_VALUE$2","getClosureSafeProperty$1","objWithPropertyToExtract","NULL_INJECTOR","NEW_LINE","NO_NEW_LINE","records","_records","useNew","recursivelyProcessProviders","staticError","resolveProvider","computeDeps","providerDeps","multiProviderMixError","record","tryResolveToken","resolveToken","depRecords","depRecord","childRecord","tokenPath","formatError","charAt","_currentInjector","setCurrentInjector","injector","former","injectableDef","injectArgs","GET_PROPERTY_NAME","USE_VALUE$1","getClosureSafeProperty","convertInjectableProviderToFactory","deps_1","reflectionCapabilities","valueProvider_1","existingProvider_1","factoryProvider_1","classProvider_1","deps_2","deps_3","ViewEncapsulation$1","preR3InjectableCompile","injectableType","preR3NgModuleCompile","ngInjectorDef","Version$1","VERSION$2","ERROR_DEBUG_CONTEXT","ERROR_ORIGINAL_ERROR","ERROR_LOGGER","getDebugContext","getOriginalError","defaultErrorLogger","ErrorHandler","handleError","originalError","_findOriginalError","_findContext","errorLogger","getErrorLogger","constructResolvingPath","findFirstClosedCycle","injectionError","constructResolvingMessage","errMsg","wrappedError","addKey","injectors","noAnnotationError","ii","ReflectiveKey","displayName","_globalKeyRegistry","numberOfKeys","KeyRegistry","_allKeys","newKey","Reflector","updateCapabilities","caps","ReflectiveDependency","optional","visibility","fromKey","_EMPTY_LIST","ResolvedReflectiveProvider_","resolvedFactories","resolvedFactory","ResolvedReflectiveFactory","resolveReflectiveProvider","resolveReflectiveFactory","factoryFn","resolvedDeps","_dependenciesFor","aliasInstance","constructDependencies","params_1","_extractToken","_createDependency","paramMetadata","UNDEFINED","ReflectiveInjector","resolveReflectiveProviders","resolvedProviderMap","mergeResolvedReflectiveProviders","normalizedProvidersMap","existing","_normalizeProviders","invalidProviderError","resolveAndCreate","ResolvedReflectiveProviders","fromResolvedProviders","ReflectiveInjector_","_providers","_constructionCounter","keyIds","objs","_getByKey","resolveAndCreateChild","createChildFromResolved","inj","resolveAndInstantiate","instantiateResolved","_instantiateProvider","getProviderAtIndex","outOfBoundsError","_new","_getMaxNumberOfObjects","cyclicDependencyError","_instantiate","ResolvedReflectiveFactory$$1","_getByReflectiveDependency","instantiationError","originalException","originalStack","INJECTOR_KEY","_getByKeySelf","_getByKeyDefault","_getObjByKeyId","keyId","_throwOrNull","noProviderError","inj_","_mapProviders","isFunction","_enable_super_gross_mode_that_will_cause_bad_things","useDeprecatedSynchronousErrorHandling","log","hostReportError","err","setTimeout","empty$1","closed","complete","isObject","tryCatchTarget","errorObject","tryCatcher","tryCatch","__extends$2","UnsubscriptionError","Subscription","unsubscribe","_parents","_subscriptions","_unsubscribe","hasErrors","remove","flattenUnsubscriptionErrors","teardown","subscription","_addParent","tmp","subscriptions","subscriptionIndex","errs","rxSubscriber","__extends$1","Subscriber","destinationOrNext","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","isTrustedSubscriber","trustedSubscriber","SafeSubscriber","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parentSubscriber","observerOrNext","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","observable","noop$1","Observable","subscribe","_isScalar","_subscribe","lift","observable$$1","sink","toSubscriber","nextOrObserver","_trySubscribe","promiseCtor","getPromiseCtor","reject","operations","pipeFromArray","fns","piped","toPromise","__extends$5","ObjectUnsubscribedError","__extends$6","SubjectSubscription","subject","observers","subscriberIndex","__extends$4","SubjectSubscriber","Subject","hasError","thrownError","AnonymousSubject","asObservable","__extends$7","refCount","refCountOperatorFunction","RefCountOperator$1","RefCountOperator","connectable","_refCount","refCounter","RefCountSubscriber$1","connection","connect","RefCountSubscriber","sharedConnection","_connection","__extends$3","connectableProto","ConnectableObservable","subjectFactory","_isComplete","getSubject","_subject","ConnectableSubscriber","connectableObservableDescriptor","writable","__extends$8","refCount$$1","GroupDurationSubscriber","GroupBySubscriber","keySelector","durationSelector","subjectSelector","attemptedToUnsubscribe","_group","groupedObservable","GroupedObservable","duration","removeGroup","groupSubject","refCountSubscription","InnerRefCountSubscription","__extends$9","__extends$13","BehaviorSubject","_value","getValue","Action","scheduler","work","schedule","state","delay","__extends$12","AsyncAction","pending","recycleAsyncId","requestAsyncId","setInterval","flush","clearInterval","execute","_execute","errored","errorValue","actions","__extends$11","QueueAction","Scheduler","SchedulerAction","now","Date","__extends$15","AsyncScheduler","active","scheduled","shift","__extends$14","queue","QueueScheduler","EMPTY$1","empty$2","emptyScheduled","isScheduler","subscribeToArray","dispatch","Notification","hasValue","observe","observer","do","toObservable","scalar","throwError","createNext","undefinedValueNotification","createError","createComplete","completeNotification","__extends$16","ObserveOnSubscriber","notification","scheduleMessage","ObserveOnMessage","__extends$10","ReplayEvent","ReplaySubject","bufferSize","windowTime","POSITIVE_INFINITY","_events","_infiniteTimeWindow","_bufferSize","_windowTime","nextInfiniteTimeWindow","nextTimeWindow","_getNow","_trimBufferThenGetEvents","eventsCount","spliceCount","time","__extends$17","nextHandle","AsyncSubject","hasNext","hasCompleted","tasksByHandle","__extends$18","AsapAction","handle","runIfPresent","__extends$19","asap","AsapScheduler","__extends$20","AnimationFrameAction","requestAnimationFrame","cancelAnimationFrame","__extends$21","__extends$22","AnimationFrameScheduler","VirtualAction","VirtualTimeScheduler","maxFrames","frameTimeFactor","sortActions","identity","__extends$23","__extends$24","ArgumentOutOfRangeError","EmptyError","__extends$25","__extends$26","TimeoutError","MapOperator","project","thisArg","MapSubscriber","__extends$28","OuterSubscriber","notifyNext","outerValue","innerValue","outerIndex","innerIndex","innerSub","notifyError","notifyComplete","__extends$29","InnerSubscriber","subscribeToPromise","getSymbolIterator$1","subscribeToIterable","iterable","iterator$$1","subscribeToObservable","obs","TypeError","isArrayLike","isPromise$1","subscribeTo","subscribeToResult","outerSubscriber","__extends$27","CombineLatestSubscriber","resultSelector","observables","toRespond","unused","_tryResultSelector","__extends$30","MergeMapOperator","concurrent","MergeMapSubscriber","_tryNext","_innerSub","ish","__extends$31","ForkJoinSubscriber","completed","haveValues","innerSubscription","_hasValue","__extends$32","__extends$33","RaceSubscriber","hasFirst","StaticIterator","ZipSubscriber","iterators","StaticArrayIterator","ZipBufferIterator","stillUnsubscribed","notifyInactive","checkIterators","shouldComplete","_tryresultSelector","nextResult","isComplete","__extends$34","__extends$35","AuditSubscriber","throttled","clearThrottle","__extends$36","BufferSubscriber","closingNotifier","__extends$37","BufferCountSubscriber","BufferSkipCountSubscriber","startBufferEvery","buffers","Context","dispatchBufferTimeSpanOnly","prevContext","closeContext","openContext","closeAction","bufferTimeSpan","dispatchBufferCreation","bufferCreationInterval","dispatchBufferClose","BufferTimeSubscriber","maxBufferSize","contexts","timespanOnly","creationState","filledBufferContext","onBufferFull","__extends$38","__extends$39","BufferToggleSubscriber","openings","closingSelector","closeBuffer","openBuffer","trySubscribe","__extends$40","BufferWhenSubscriber","subscribing","closingSubscription","__extends$41","CatchSubscriber","caught","err2","__extends$42","CountSubscriber","_tryPredicate","__extends$43","DebounceSubscriber","durationSubscription","emitValue","dispatchNext$2","debouncedNext","DebounceTimeSubscriber","dueTime","debouncedSubscription","lastValue","clearDebounce","__extends$44","__extends$45","DefaultIfEmptySubscriber","isEmpty","DelayMessage","DelaySubscriber","delay_1","_schedule","scheduleNotification","__extends$46","SubscriptionDelaySubscriber","DelayWhenSubscriber","delayDurationSelector","delayNotifierSubscriptions","removeSubscription","tryComplete","delayNotifier","tryDelay","subscriptionIdx","notifierSubscription","SubscriptionDelayObservable","subscriptionDelay","sourceSubscribed","subscribeToSource","__extends$47","__extends$48","DeMaterializeSubscriber","__extends$49","DistinctSubscriber","flushes","_useKeySelector","_finalizeNext","__extends$50","DistinctUntilChangedSubscriber","compare","hasKey","__extends$51","FilterSubscriber","__extends$52","TapSubscriber","_tapNext","_tapError","_tapComplete","__extends$53","TakeSubscriber","total","__extends$54","EverySubscriber","everyValueMatch","__extends$55","SwitchFirstSubscriber","hasSubscription","__extends$56","ExhaustMapSubscriber","tryNext","__extends$57","ExpandSubscriber","subscribeToProjection","__extends$58","FinallySubscriber","__extends$59","FindValueSubscriber","yieldIndex","__extends$60","IgnoreElementsSubscriber","__extends$61","IsEmptySubscriber","__extends$62","TakeLastSubscriber","ring","idx","__extends$63","MapToSubscriber","__extends$64","MaterializeSubscriber","__extends$65","ScanSubscriber","accumulator","_seed","hasSeed","seed","MergeScanSubscriber","acc","MulticastOperator","__extends$66","__extends$67","OnErrorResumeNextSubscriber","nextSources","subscribeToNextSource","__extends$68","PairwiseSubscriber","hasPrev","__extends$69","RepeatSubscriber","__extends$70","RepeatWhenSubscriber","notifier","sourceIsBeingSubscribedTo","retries","subscribeToRetries","retriesSubscription","notifications","__extends$71","RetrySubscriber","__extends$72","RetryWhenSubscriber","__extends$73","SampleSubscriber","dispatchNotification","period","SampleTimeSubscriber","__extends$74","SequenceEqualCompareToSubscriber","SequenceEqualSubscriber","compareTo","comparor","_oneComplete","emit","checkValues","areEqual","nextB","shareSubjectFactory","__extends$75","__extends$76","SingleSubscriber","seenValue","applySingleValue","singleValue","__extends$77","SkipSubscriber","__extends$78","SkipLastSubscriber","_skipCount","_count","_ring","skipCount","currentIndex","oldValue","__extends$79","SkipUntilSubscriber","__extends$80","SkipWhileSubscriber","skipping","tryCallPredicate","__extends$81","SubscribeOnObservable","delayTime","isNumeric","__extends$82","SwitchMapSubscriber","__extends$83","TakeUntilSubscriber","__extends$84","TakeWhileSubscriber","nextOrComplete","predicateResult","__extends$85","ThrottleSubscriber","_leading","_trailing","_sendValue","_throttled","send","throttle","tryDurationSelector","throttlingDone","dispatchNext$3","ThrottleTimeSubscriber","leading","trailing","_hasTrailingValue","_trailingValue","__extends$86","__extends$87","TimeoutWithSubscriber","absoluteTimeout","waitFor","withObservable","scheduleTimeout","dispatchTimeout","__extends$88","WindowSubscriber","openWindow","prevWindow","newWindow","__extends$89","WindowCountSubscriber","windowSize","startWindowEvery","windows","window_1","CountedSubject","_numberOfNextedValues","dispatchWindowTimeSpanOnly","windowTimeSpan","closeWindow","dispatchWindowCreation","windowCreationInterval","dispatchWindowClose","WindowTimeSubscriber","maxWindowSize","numberOfNextedValues","window_2","__extends$90","__extends$91","WindowToggleSubscriber","openSubscription","inner","__extends$92","unsubscribeClosingNotification","closingNotification","__read$12","isPromise$2","WithLatestFromSubscriber","__spread$12","_tryProject","APP_INITIALIZER","ApplicationInitStatus","appInits","initialized","donePromise","rej","runInitializers","asyncInitPromises","initResult","catch","APP_ID_RANDOM_PROVIDER","_appIdRandomProviderFactory","_randomChar","random","PLATFORM_ID","APP_BOOTSTRAP_LISTENER","Console","_throwError","trace","Compiler","compileModuleSync","compileModuleAsync","compileModuleAndAllComponentsSync","compileModuleAndAllComponentsAsync","CompilerFactory","_NullComponentFactoryResolver","resolveComponentFactory","noComponentFactoryError","ComponentFactoryBoundToModule","projectableNodes","rootSelectorOrNode","wtfEnabled","detectWTF","wtf","noopScope","arg0","arg1","wtfCreateScope","createScope","wtfLeave","leave","returnValue","leaveScope","EventEmitter","isAsync","__isAsync","generatorOrNext","schedulerFn","errorFn","completeFn","NgZone","enableLongStackTrace","hasPendingMicrotasks","hasPendingMacrotasks","isStable","onUnstable","onMicrotaskEmpty","onStable","onError","assertZonePatched","_nesting","_outer","_inner","fork","forkInnerZoneWithAngularBehavior","zone","isAngularZone","onInvokeTask","task","applyThis","applyArgs","onEnter","invokeTask","onLeave","onInvoke","invoke","onHasTask","hasTaskState","hasTask","change","microTask","checkStable","macroTask","onHandleError","runOutsideAngular","isInAngularZone","assertInAngularZone","assertNotInAngularZone","run","runTask","scheduleEventTask","EMPTY_PAYLOAD","noop$2","cancelTask","runGuarded","NoopNgZone","Testability","_ngZone","_pendingCount","_isZoneStable","_didWork","_callbacks","_watchAngularEvents","taskTrackingZone","_runCallbacksIfReady","increasePendingRequestCount","decreasePendingRequestCount","clearTimeout","timeoutId","doneCb","pending_1","getPendingTasks","updateCb","macroTasks","isPeriodic","creationLocation","xhr","addCallback","timeout","whenStable","getPendingRequestCount","findProviders","using","exactMatch","TestabilityRegistry","_applications","_testabilityGetter","addToWindow","registerApplication","testability","unregisterApplication","unregisterAllApplications","getTestability","elem","getAllTestabilities","getAllRootElements","findTestabilityInTree","findInAncestors","_NoopGetTestability","_devMode","isDevMode","PlatformRef","_injector","_modules","_destroyListeners","_destroyed","bootstrapModuleFactory","moduleFactory","ngZone","getNgZone","ngZoneOption","ngZoneInjector","exceptionHandler","onDestroy","_callAndReportToErrorHandler","errorHandler","initStatus","_moduleDoBootstrap","bootstrapModule","compilerOptions","compilerFactory","optionsReducer","createCompiler","appRef","ApplicationRef","_bootstrapComponents","ngDoBootstrap","destroy","dst","_zone","_exceptionHandler","_componentFactoryResolver","_initStatus","_bootstrapListeners","_views","_runningTick","_enforceNoNewChanges","_stable","componentTypes","tick","isCurrentlyStable","stableSub","unstableSub","mergeAll","mergeMap","isObservable","fromObservable","fromPromise","isIterable","fromIterable","mapOperation","share","multicast","subjectOrSubjectFactory","multicastOperatorFunction","componentOrFactory","compRef","_unloadComponent","nativeElement","_loadComponent","_tickScope","view","detectChanges","checkNoChanges","attachView","viewRef","attachToAppRef","detachView","detachFromAppRef","componentRef","ngOnDestroy","RendererStyleFlags2","RendererFactory2","Renderer2","dirty","_results","changes","init","toArray","reset","flatten$2","notifyOnChanges","setDirty","EventListener","EmbeddedViewRef","ViewRef","DebugNode","nativeNode","_debugContext","DebugElement","addChild","listeners","providerTokens","classes","removeChild","childIndex","insertChildrenAfter","newChildren","siblingIndex","insertBefore","refChild","newChild","refIndex","queryAll","_queryElementChildren","queryAllNodes","_queryNodeChildren","triggerEventHandler","eventObj","parentNode","_nativeNodeToDebugNode","getDebugNode","indexDebugNode","devModeEqual","isListLikeIterableA","isListLikeIterable","isListLikeIterableB","areIterablesEqual","comparator","iterator1","iterator2","item1","item2","WrappedValue","wrapped","wrap","unwrap","isWrapped","SimpleChange","previousValue","currentValue","firstChange","isFirstChange","isJsObject","DefaultIterableDifferFactory","supports","trackByFn","DefaultIterableDiffer","trackByIdentity","_linkedRecords","_unlinkedRecords","_previousItHead","_itHead","_itTail","_additionsHead","_additionsTail","_movesHead","_movesTail","_removalsHead","_removalsTail","_identityChangesHead","_identityChangesTail","_trackByFn","forEachItem","forEachOperation","nextIt","nextRemove","addRemoveOffset","moveOffsets","getPreviousIndex","adjPreviousIndex","_nextRemoved","previousIndex","localMovePreviousIndex","localCurrentIndex","forEachPreviousItem","_nextPrevious","forEachAddedItem","_nextAdded","forEachMovedItem","_nextMoved","forEachRemovedItem","forEachIdentityChange","_nextIdentityChange","diff","collection","_reset","itemTrackBy","mayBeDirty","index_1","trackById","_verifyReinsertion","_addIdentityChange","_mismatch","iterateListLike","_truncate","isDirty","nextRecord","previousRecord","_prev","_remove","_moveAfter","_reinsertAfter","_addAfter","IterableChangeRecord_","reinsertRecord","_addToMoves","_addToRemovals","_unlink","prevRecord","_prevRemoved","_insertAfter","_DuplicateMap","put","toIndex","_prevDup","_nextDup","_DuplicateItemRecordList","_head","_tail","atOrAfterIndex","duplicates","recordList","moveOffset","MissingTranslationStrategy$1","DefaultKeyValueDifferFactory","DefaultKeyValueDiffer","_mapHead","_appendAfter","_previousMapHead","_changesHead","_changesTail","forEachChangedItem","_nextChanged","_forEach","_maybeAddToChanges","_getOrCreateRecordForKey","_insertBeforeOrAppend","record_1","KeyValueChangeRecord_","_addToAdditions","newValue","_addToChanges","IterableDiffers","factories","copied","extend","getTypeNameForDebugging","KeyValueDiffers","kv","keyValDiff","iterableDiff","defaultIterableDiffers","defaultKeyValueDiffers","createPlatformFactory","parentPlatformFactory","_iterableDiffersFactory","_keyValueDiffersFactory","_localeFactory","tagSet","merge$2","sets","sets_1","sets_1_1","ApplicationModule","SecurityContext$1","VOID_ELEMENTS","OPTIONAL_END_TAG_BLOCK_ELEMENTS","OPTIONAL_END_TAG_INLINE_ELEMENTS","OPTIONAL_END_TAG_ELEMENTS","Sanitizer","shiftInitState","priorInitState","newInitState","initState","initIndex","shouldCallLifecycleInitHook","asTextData","asElementData","asProviderData","asPureExpressionData","asQueryList","Services","setCurrentNode","createRootView","createEmbeddedView","createComponentView","createNgModuleRef","overrideProvider","overrideComponentView","clearOverrides","checkAndUpdateView","checkNoChangesView","destroyView","resolveDep","createDebugContext","handleEvent","updateDirectives","updateRenderer","dirtyParentQueries","expressionChangedAfterItHasBeenCheckedError","currValue","isFirstCheck","viewDebugError","_addDebugContext","logError","viewDestroyedError","NOOP","_tokenKeyCache","tokenKey","checkBinding","bindingIdx","oldValues","bindingIndex","checkAndUpdateBinding","checkBindingNoChanges","bindingName","nodeIndex","markParentViewsForCheck","currView","viewContainerParent","markParentViewsForCheckProjectedViews","endView","dispatchEvent","componentView","root","declaredViewContainer","parentNodeDef","viewParentEl","renderNode","renderElement","renderText","isComponentView","isEmbeddedView","splitDepsDsl","sourceName","getParentRenderElement","renderHost","renderParent","componentRendererType","Native","DEFINITION_CACHE","WeakMap","resolveDefinition","visitRootRenderNodes","nextSibling","renderer","visitSiblingRenderNodes","endIndex","nodeDef","visitRenderNode","childCount","visitProjectedRenderNodes","compView","hostElDef","projectedNodes","execRenderNodeAction","ngContent","rn","bindingFlags","embeddedViews","viewContainer","_embeddedViews","appendChild","NS_PREFIX_RE","splitNamespace","elDef","selectorOrNode","ns","createComment","selectRootElement","setAttribute","listenToElementOutputs","handleEventClosure","renderEventHandlerClosure","listenTarget","listenerView","disposable","listen","disposables","outputIndex","checkAndUpdateElementValue","elData","renderNode$$1","setElementAttribute","renderValue","sanitizer","sanitize","removeAttribute","setElementClass","addClass","removeClass","setElementStyle","setStyle","removeStyle","setElementProperty","setProperty","UNDEFINED_VALUE","InjectorRefTokenKey$1","INJECTORRefTokenKey$1","NgModuleRefTokenKey","resolveNgModuleDep","depDef","tokenKey_1","_def","providersByKey","providerInstance","_createProviderInstance$1","targetsModule","moduleTransitivelyPresent","isRoot","_createClass","depValues","_callFactory","detachEmbeddedView","elementData","viewIndex","removeFromArray","renderDetachView","renderAttachEmbeddedView","prevView","prevRenderNode","addToArray","EMPTY_CONTEXT","ComponentFactory_","viewDefFactory","_inputs","_outputs","inputsArr","outputsArr","componentNodeIndex","componentProvider","ComponentRef_","ViewRef_","_view","_viewRef","_component","_elDef","changeDetectorRef","Injector_","createViewContainerData","ViewContainerRef_","_data","attachToViewContainerRef","templateRef","insert","ngModuleRef","contextInjector","parentInjector","destroyed","viewRef_","attachEmbeddedView","parentView","attachProjectedView","vcElementData","dvcElementData","projectedViews","_projectedViews","markNodeAsProjectedTemplate","nodeFlags","childFlags","move","moveEmbeddedView","oldViewIndex","newViewIndex","viewData","detach","createChangeDetectorRef","_viewContainerRef","_appRef","rootRenderNodes","renderNodes","markForCheck","fs$$1","rendererFactory","begin","reattach","vcRef","createTemplateData","TemplateRef_","_parentView","createInjector$1","createRendererV1","RendererAdapter","namespaceAndName","createViewRoot","hostElement","createTemplateAnchor","createText","projectNodes","attachViewAfter","viewRootNodes","viewAllNodes","destroyNode","listenGlobal","attributeValue","setBindingDebugInfo","isAdd","styleName","styleValue","invokeElementMethod","methodName","setText","setValue","animate","NgModuleRef_","_moduleType","initNgModule","provDef","injectFlags","callNgModuleLifecycle","lifecycles","RendererV1TokenKey","Renderer2TokenKey","ElementRefTokenKey","ViewContainerRefTokenKey","TemplateRefTokenKey","ChangeDetectorRefTokenKey","InjectorRefTokenKey","INJECTORRefTokenKey","createProviderInstance","_createProviderInstance","createPipeInstance","createClass","createDirectiveInstance","eventHandlerClosure","allowPrivateServices","callFactory","ViewAction","NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR","startView","tokenKey$$1","searchView","findCompView","providerDef_1","allProviders","publicProviders","providerData","updateProp","nonMinifiedName","callLifecycleHooksChildrenFirst","callProviderLifecycles","directChildFlags","callElementProvidersLifecycles","ngAfterContentInit","ngAfterContentChecked","ngAfterViewInit","ngAfterViewChecked","queryIds","nodeMatchedQueries","tplDef","filterId","checkAndUpdateQuery","queryList","directiveInstance","newValues","calcQueryValues","notify","boundValue","matchedQueries","getQueryValue","childMatchedQueries","embeddedView","dvc","projectedView","queryValueType","appendNgContent","_addInterpolationPart","anchorDef$$1","createView","initView","createViewNodes","compRenderer","createRenderer","outputCount","bindingCount","nodeData","compViewDef","execComponentViewsAction","CreateViewNodes","execQueriesAction","markProjectedViewsForCheck","execEmbeddedViewsAction","CheckNoChanges","CheckAndUpdate","callInit","checkAndUpdateNode","argStyle","v0","v1","v2","v3","v4","v5","v6","v7","v8","v9","checkAndUpdateNodeInline","checkAndUpdateElementInline","bindLen","changed","checkAndUpdateTextInline","checkAndUpdateDirectiveInline","ngOnChanges","ngOnInit","ngDoCheck","checkAndUpdatePureExpressionInline","checkAndUpdateNodeDynamic","checkAndUpdateElementDynamic","checkAndUpdateTextDynamic","checkAndUpdateDirectiveDynamic","checkAndUpdatePureExpressionDynamic","i_1","checkNoChangesNode","checkNoChangesNodeInline","checkNoChangesNodeDynamic","checkNoChangesQuery","Destroy","detachProjectedView","destroyViewNodes","callViewAction","viewState","execProjectedViewsAction","CheckNoChangesProjectedViews","CheckAndUpdateProjectedViews","queryFlags","staticDynamicQueryFlag","checkType","nodeCount","createProdRootView","elInjector","createRootData","debugCreateRootView","DebugRendererFactory2","defWithOverride","applyProviderOverridesToView","callWithDebugContext","DebugAction","debugCreateEmbeddedView","viewDef$$1","debugCreateComponentView","viewDefOverrides","debugCreateNgModuleRef","applyProviderOverridesToNgModule","calcHasOverrides","hasOverrides","hasDeprecatedOverrides","providerOverrides","override","deprecatedBehavior","providerOverridesWithScope","applyProviderOverrides","moduleSet_1","_currentAction","_currentView","_currentNodeIndex","debugOverrideProvider","debugOverrideComponentView","compFactory","getComponentViewDefinitionFactory","debugClearOverrides","elementIndicesWithOverwrittenProviders","findElementIndicesWithOverwrittenProviders","elIndicesWithOverwrittenProviders","lastElementDef","applyProviderOverridesToElement","elIndex","prodCheckAndUpdateNode","checkIndex","prodCheckNoChangesNode","debugCheckAndUpdateView","debugCheckNoChangesView","debugDestroyView","debugSetCurrentNode","debugHandleEvent","debugUpdateDirectives","nextDirectiveWithBinding","debugCheckDirectivesFn","debugCheckAndUpdateNode","debugCheckNoChangesNode","debugUpdateRenderer","nextRenderNodeWithBinding","debugCheckRenderNodeFn","givenValues","bindingValues","camelCaseToDashCase","CAMEL_CASE_REGEXP","normalizeDebugBindingValue","DebugContext_","elView","elOrCompView","childDef","collectReferences","findHostElement","logViewDef","logNodeIndex","renderNodeIndex","getRenderNodeIndex","currRenderNodeIndex","refName","oldAction","oldView","oldNodeIndex","isViewDebugError","viewWrappedDebugError","getCurrentDebugContext","RendererStyleFlags3","renderData","DebugRenderer2","whenRenderingDone","removeDebugNodeFromIndex","namespace","debugCtx","debugEl","debugChildEl","debugRefEl","oldChild","executeInitHooks","currentView","tView","creationMode","lifecycleStage","executeHooks","initHooks","checkHooks","allHooks","hooksToCall","callHooks","isProceduralRenderer","findNextRNodeSibling","stopNode","currentNode","pNextOrParent","tNode","findFirstRNode","currentSibling","getNextLNode","getParentLNode","lView","getChildLNode","getNextLNodeWithProjection","getNextOrParentSiblingNode","initialNode","nextNode","native","childContainerData","dynamicLContainerNode","views","addRemoveViewFromContainer","insertMode","beforeNode","getParentState","rootView","cleanUpView","removeListeners","cleanup","removeEventListener","executeOnDestroys","destroyHooks","executePipeOnDestroys","pipeDestroyHooks","NgModuleFactory_","_ngModuleDefFactory","initServicesIfNeeded","services","createDebugServices","createProdServices","previousOrParentNode","isParent","tData","currentQueries","NG_HOST_SYMBOL","_CLEAN_PROMISE","_ROOT_DIRECTIVE_INDICES","checkNoChangesMode","firstTemplatePass","enterView","newView","bindingStartIndex","leaveView","creationOnly","viewHooks","viewCheckHooks","refreshView","refreshDynamicChildren","dynamicViewCount","container_1","lViewNode","dynamicView","renderEmbeddedTemplate","contentHooks","contentCheckHooks","setHostBindings","hostBindings","refreshChildComponents","componentRefresh","defs","dirIndex","viewNode","_isParent","_previousOrParentNode","rf","createLNode","tParent","isState","createLNodeObject","nodeInjector","createTNode","previousTNode","dynamicContainerNode","createLView","viewId","getCurrentSanitizer","renderComponentOrTemplate","componentOrContext","getRenderFlags","executeInitAndContentHooks","tViews","localNames","initialInputs","elementIndex","viewAttached","detectChangesInternal","getDirectiveInstance","instanceOrArray","hostNode","_getComponentHostLElementNode","_lViewNode","_setComponentContext","markViewDirty","scheduleTick","rootContext","res_1","clean","getRootView","rootComponent","_lContainerNode","_viewRefs","lContainer","notImplemented","adjustedIdx","_adjustIndex","insertView","containerNextNativeNode","containerParent","newIndex","removeView","removeIndex","destroyViewTree","viewOrContainer","QueryList_","_valuesTree","flatten$3","ReflectorModuleModuleResolutionHost","getProgram","metadataCollector","directoryExists","directoryName","fileExists","getScriptSnapshot","readFile","snapshot","getLength","sf","cacheMetadata","ReflectorHost","serviceHost","metadataReaderCache","createMetadataReaderCache","hostAdapter","moduleResolutionCache","createModuleResolutionCache","getCurrentDirectory","modulePath","readMetadata","metadatas","readMetadataFile","metadataPath","metadataOrMetadatas","maxMetadata","basePath","resolveModuleName","resolvedFileName","DummyHtmlParser","DummyResourceLoader","TypeScriptServiceHost","tsService","_typeCache","modulesOutOfDate","fileVersions","setSite","service","validate","_resolver","moduleResolver","directiveResolver","pipeResolver","elementSchemaRegistry","resourceLoader","urlResolver","directiveNormalizer","collectError","ensureTemplateMap","templateReferences","getSourceFromNode","getScriptVersion","fileToComponent","getSourceFromType","updateAnalyzedModules","ensureAnalyzedModules","getScriptFileNames","files","analyzeNgModules","fileNames","staticSymbolResolver","mergeAnalyzedFiles","analyzedFiles","allNgModules","allPipesAndDirectives","af","symbolsMissingModule","_analyzeFilesIncludingNonProgramFiles","seenFiles","visitFile","analyzedFile","analyzeFile","injectables","exportsNonSourceFiles","isNgSymbol","isValueExportingNonSourceFile","Visitor","modMeta","getSourceFiles","version_1","visit_1","templateSource","visit_2","getDeclarationFromNode","_checker","getTypeChecker","lastProgram","_staticSymbolResolver","clearCaches","seen_1","collectedErrors","templateReference","getSourceFromDeclaration","queryCache","getClassMembersFromDeclaration","pipes_1","getSymbolQuery","getPipesTable","getTemplateClassDeclFromNode","stringOf","shrink$1","spanOf$4","getTemplateClassFromStaticSymbol","_reflectorHost","scriptFileNames","tsConfigPath","findTsConfig$1","existsSync","parentDir","genDir","getCompilationSettings","paths","errorMap","sourceFilePath","reflectorHost","currentToken","missingTemplate","callTarget","Decorator","getCollectedErrors","defaultSpan","spanAt$1","isFormattedError","errorToDiagnosticWithChain","convertChain","projectHostMap","VERSION$3","createLanguageServiceFromTypescript","ngHost","ngServer","VERSION","getExternalFiles","proxy","oldLS","languageService","tryCall","tryFilenameCall","ls","tryFilenameOneCall","tryFilenameTwoCall","p1","p2","tryFilenameThreeCall","p3","tryFilenameFourCall","p4","typescriptOnly","cleanupSemanticCache","getSyntacticDiagnostics","getSemanticDiagnostics","getCompilerOptionsDiagnostics","getSyntacticClassifications","getSemanticClassifications","getEncodedSyntacticClassifications","getEncodedSemanticClassifications","getCompletionsAtPosition","getCompletionEntryDetails","getCompletionEntrySymbol","getQuickInfoAtPosition","getNameOrDottedNameSpan","getBreakpointStatementAtPosition","getSignatureHelpItems","getRenameInfo","findRenameLocations","getDefinitionAtPosition","getTypeDefinitionAtPosition","getImplementationAtPosition","getReferencesAtPosition","findReferences","getDocumentHighlights","getOccurrencesAtPosition","getNavigateToItems","searchValue","maxResultCount","excludeDtsFiles","getNavigationBarItems","getNavigationTree","getOutliningSpans","getTodoComments","getBraceMatchingAtPosition","getIndentationAtPosition","getFormattingEditsForRange","getFormattingEditsForDocument","getFormattingEditsAfterKeystroke","getDocCommentTemplateAtPosition","isValidBraceCompletionAtPosition","getSpanOfEnclosingComment","getCodeFixesAtPosition","applyCodeActionCommand","getEmitOutput","dispose","getApplicableRefactors","getEditsForRefactor","getDefinitionAndBoundSpan","getCombinedCodeFix","fixId","formatOptions","getSuggestionDiagnostics","organizeImports","tryOperation","attempting","projectService","logger","languageServiceHost","isGlobalCompletion","isMemberCompletion","isNewIdentifierLocation","results_1","results_1_1","sortText","kindModifiers","ours","displayParts","documentation","textSpan","file_1","diagnosticToDiagnostic","messageText","diagnosticMessageToDiagnosticMessageText","diagnosticChainToDiagnosticChain","DiagnosticCategory","ours_1","ours_1_1","loc","containerName","containerKind"],"mappings":"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,SAuDTC,IACA,iYAGA,s1BACA,qgCACA,gOACA,2uBACA,uBACA,2CACA,uBACA,wCACA,uBACA,kCACA,yCACA,mLACA,8JACA,eACA,yBACA,iCACA,iQACA,yHACA,sCACA,+BACA,4BACA,0BACA,8BACA,yCACA,6BACA,0BACA,uDACA,wCACA,qCACA,uGACA,iGACA,sOACA,mDACA,sBACA,wCACA,6BACA,2JACA,oJACA,wbACA,+BACA,8BACA,6BACA,wIACA,yBACA,4HACA,8BACA,mDACA,2DACA,sCACA,kDACA,uIACA,yCACA,6EACA,wDACA,wBACA,gDACA,yBACA,2BACA,qCACA,mCACA,gGACA,wGACA,wBACA,0BACA,mDACA,sBACA,2CACA,8BACA,mHACA,+DACA,oHACA,iDACA,wDACA,0BACA,qNACA,2BACA,sDACA,iCACA,yBACA,oCACA,wBACA,+BACA,qCACA,wCACA,6BACA,+BACA,2BACA,mBACA,sBACA,8BACA,sBACA,4BACA,kCACA,0BACA,+BACA,gCACA,gCACA,6BACA,2BACA,sBACA,+CACA,+CACA,+CACA,+CACA,6BACA,sBACA,sBACA,0BACA,2BACA,uBACA,2BACA,iCACA,0BACA,qBACA,2BACA,qBACA,oCACA,wBACA,4BACA,2BACA,qCACA,oBACA,qBACA,mBACA,uBACA,2BACA,sBACA,8BACA,+BACA,qCACA,2BACA,mDACA,yBACA,2BACA,mBACA,8CACA,6BACA,qBACA,mCACA,kCACA,kCACA,oBACA,0BACA,8BACA,2BACA,wEACA,gFACA,yBACA,8BACA,sBAEAC,IACAC,MAAS,YACTC,IAAO,UACPC,WAAc,aACdC,UAAa,YACbC,SAAY,WACZC,SAAY,YAEZC,GAA0C,SAAU7zD,GAEpD,SAAS6zD,IACL,IAAIpnE,EAAQuT,EAAOnmB,KAAK1B,OAASA,KAqCjC,OApCAsU,EAAMqnE,WACNT,GAAO1mE,QAAQ,SAAUonE,GACrB,IAAIj5D,KACAnP,EAAKrR,EAAOy5E,EAAY74D,MAAM,KAAM,GAAI84D,EAAUroE,EAAG,GACrDsoE,EAD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AAG,GAAI,GAAI,GAAI,GAAI,IACpCC,KAAM,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,IAC/BzsE,OAAQ,EAAG,EAAG,EAAG,GAAI,GAAI,IACzBJ,OAAQ,EAAG,EAAG,EAAG,GAAI,GAAI,IACzBE,OAAQ,EAAG,EAAG,EAAG,GAAI,GAAI,IACzBG,IAAK,EAAG,EAAG,EAAG,GAAI,GAAI,IACtBF,IAAK,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,IAC1BF,IAAK,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,IAC1B6sE,MAAO,EAAG,IACVC,OAAQ,GACRC,MAAO,GACPC,MAAO,EAAG,IACV34F,OAAQ,EAAG,EAAG,EAAG,IACjBC,QAAS,EAAG,GAAI,GAAI,IACpB24F,UAAW,EAAG,EAAG,EAAG,GAAI,IACxBtyC,MAAO,IAEPuyC,IAAqB,EAAG,EAAG,EAAG,GAoC9BC,IACA,iYAGA,s1BACA,qgCACA,gOACA,2uBACA,uBACA,2CACA,uBACA,wCACA,uBACA,kCACA,yCACA,mLACA,8JACA,eACA,yBACA,iCACA,iQACA,yHACA,sCACA,+BACA,4BACA,0BACA,8BACA,yCACA,6BACA,0BACA,uDACA,wCACA,qCACA,uGACA,iGACA,sOACA,mDACA,sBACA,wCACA,6BACA,2JACA,oJACA,wbACA,+BACA,8BACA,6BACA,wIACA,yBACA,4HACA,8BACA,mDACA,2DACA,sCACA,kDACA,uIACA,yCACA,6EACA,wDACA,wBACA,gDACA,yBACA,2BACA,qCACA,mCACA,gGACA,wGACA,wBACA,0BACA,mDACA,sBACA,2CACA,8BACA,mHACA,+DACA,oHACA,iDACA,wDACA,0BACA,qNACA,2BACA,sDACA,iCACA,yBACA,oCACA,wBACA,+BACA,qCACA,wCACA,6BACA,+BACA,2BACA,mBACA,sBACA,8BACA,sBACA,4BACA,kCACA,0BACA,+BACA,gCACA,gCACA,6BACA,2BACA,sBACA,+CACA,+CACA,+CACA,+CACA,6BACA,sBACA,sBACA,0BACA,2BACA,uBACA,2BACA,iCACA,0BACA,qBACA,2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","sourcesContent":["/**\n * @license Angular v6.0.0-rc.5+252.sha-7c1bd71\n * (c) 2010-2018 Google, Inc. https://angular.io/\n * License: MIT\n */\n\nvar $reflect = {defineMetadata: function() {}, getOwnMetadata: function(){}};\n((typeof global !== 'undefined' && global)||{})['Reflect'] = $reflect;\nvar $deferred, $resolved, $provided;\nfunction $getModule(name) { return $provided[name] || require(name); }\nfunction define(modules, cb) { $deferred = { modules: modules, cb: cb }; }\nmodule.exports = function(provided) {\n  if ($resolved) return $resolved;\n  var result = {};\n  $provided = Object.assign({'reflect-metadata': $reflect}, provided || {}, { exports: result });\n  $deferred.cb.apply(this, $deferred.modules.map($getModule));\n  $resolved = result;\n  return result;\n}\n\ndefine(['exports', 'fs', 'path', 'typescript'], function (exports, fs, path, ts) { 'use strict';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TagContentType;\n(function (TagContentType) {\n    TagContentType[TagContentType[\"RAW_TEXT\"] = 0] = \"RAW_TEXT\";\n    TagContentType[TagContentType[\"ESCAPABLE_RAW_TEXT\"] = 1] = \"ESCAPABLE_RAW_TEXT\";\n    TagContentType[TagContentType[\"PARSABLE_DATA\"] = 2] = \"PARSABLE_DATA\";\n})(TagContentType || (TagContentType = {}));\nfunction splitNsName(elementName) {\n    if (elementName[0] != ':') {\n        return [null, elementName];\n    }\n    var colonIndex = elementName.indexOf(':', 1);\n    if (colonIndex == -1) {\n        throw new Error(\"Unsupported format \\\"\" + elementName + \"\\\" expecting \\\":namespace:name\\\"\");\n    }\n    return [elementName.slice(1, colonIndex), elementName.slice(colonIndex + 1)];\n}\n// `<ng-container>` tags work the same regardless the namespace\nfunction isNgContainer(tagName) {\n    return splitNsName(tagName)[1] === 'ng-container';\n}\n// `<ng-content>` tags work the same regardless the namespace\nfunction isNgContent(tagName) {\n    return splitNsName(tagName)[1] === 'ng-content';\n}\n// `<ng-template>` tags work the same regardless the namespace\nfunction isNgTemplate(tagName) {\n    return splitNsName(tagName)[1] === 'ng-template';\n}\nfunction getNsPrefix(fullName) {\n    return fullName === null ? null : splitNsName(fullName)[0];\n}\nfunction mergeNsAndName(prefix, localName) {\n    return prefix ? \":\" + prefix + \":\" + localName : localName;\n}\n// see http://www.w3.org/TR/html51/syntax.html#named-character-references\n// see https://html.spec.whatwg.org/multipage/entities.json\n// This list is not exhaustive to keep the compiler footprint low.\n// The `&#123;` / `&#x1ab;` syntax should be used when the named character reference does not\n// exist.\nvar NAMED_ENTITIES = {\n    'Aacute': '\\u00C1',\n    'aacute': '\\u00E1',\n    'Acirc': '\\u00C2',\n    'acirc': '\\u00E2',\n    'acute': '\\u00B4',\n    'AElig': '\\u00C6',\n    'aelig': '\\u00E6',\n    'Agrave': '\\u00C0',\n    'agrave': '\\u00E0',\n    'alefsym': '\\u2135',\n    'Alpha': '\\u0391',\n    'alpha': '\\u03B1',\n    'amp': '&',\n    'and': '\\u2227',\n    'ang': '\\u2220',\n    'apos': '\\u0027',\n    'Aring': '\\u00C5',\n    'aring': '\\u00E5',\n    'asymp': '\\u2248',\n    'Atilde': '\\u00C3',\n    'atilde': '\\u00E3',\n    'Auml': '\\u00C4',\n    'auml': '\\u00E4',\n    'bdquo': '\\u201E',\n    'Beta': '\\u0392',\n    'beta': '\\u03B2',\n    'brvbar': '\\u00A6',\n    'bull': '\\u2022',\n    'cap': '\\u2229',\n    'Ccedil': '\\u00C7',\n    'ccedil': '\\u00E7',\n    'cedil': '\\u00B8',\n    'cent': '\\u00A2',\n    'Chi': '\\u03A7',\n    'chi': '\\u03C7',\n    'circ': '\\u02C6',\n    'clubs': '\\u2663',\n    'cong': '\\u2245',\n    'copy': '\\u00A9',\n    'crarr': '\\u21B5',\n    'cup': '\\u222A',\n    'curren': '\\u00A4',\n    'dagger': '\\u2020',\n    'Dagger': '\\u2021',\n    'darr': '\\u2193',\n    'dArr': '\\u21D3',\n    'deg': '\\u00B0',\n    'Delta': '\\u0394',\n    'delta': '\\u03B4',\n    'diams': '\\u2666',\n    'divide': '\\u00F7',\n    'Eacute': '\\u00C9',\n    'eacute': '\\u00E9',\n    'Ecirc': '\\u00CA',\n    'ecirc': '\\u00EA',\n    'Egrave': '\\u00C8',\n    'egrave': '\\u00E8',\n    'empty': '\\u2205',\n    'emsp': '\\u2003',\n    'ensp': '\\u2002',\n    'Epsilon': '\\u0395',\n    'epsilon': '\\u03B5',\n    'equiv': '\\u2261',\n    'Eta': '\\u0397',\n    'eta': '\\u03B7',\n    'ETH': '\\u00D0',\n    'eth': '\\u00F0',\n    'Euml': '\\u00CB',\n    'euml': '\\u00EB',\n    'euro': '\\u20AC',\n    'exist': '\\u2203',\n    'fnof': '\\u0192',\n    'forall': '\\u2200',\n    'frac12': '\\u00BD',\n    'frac14': '\\u00BC',\n    'frac34': '\\u00BE',\n    'frasl': '\\u2044',\n    'Gamma': '\\u0393',\n    'gamma': '\\u03B3',\n    'ge': '\\u2265',\n    'gt': '>',\n    'harr': '\\u2194',\n    'hArr': '\\u21D4',\n    'hearts': '\\u2665',\n    'hellip': '\\u2026',\n    'Iacute': '\\u00CD',\n    'iacute': '\\u00ED',\n    'Icirc': '\\u00CE',\n    'icirc': '\\u00EE',\n    'iexcl': '\\u00A1',\n    'Igrave': '\\u00CC',\n    'igrave': '\\u00EC',\n    'image': '\\u2111',\n    'infin': '\\u221E',\n    'int': '\\u222B',\n    'Iota': '\\u0399',\n    'iota': '\\u03B9',\n    'iquest': '\\u00BF',\n    'isin': '\\u2208',\n    'Iuml': '\\u00CF',\n    'iuml': '\\u00EF',\n    'Kappa': '\\u039A',\n    'kappa': '\\u03BA',\n    'Lambda': '\\u039B',\n    'lambda': '\\u03BB',\n    'lang': '\\u27E8',\n    'laquo': '\\u00AB',\n    'larr': '\\u2190',\n    'lArr': '\\u21D0',\n    'lceil': '\\u2308',\n    'ldquo': '\\u201C',\n    'le': '\\u2264',\n    'lfloor': '\\u230A',\n    'lowast': '\\u2217',\n    'loz': '\\u25CA',\n    'lrm': '\\u200E',\n    'lsaquo': '\\u2039',\n    'lsquo': '\\u2018',\n    'lt': '<',\n    'macr': '\\u00AF',\n    'mdash': '\\u2014',\n    'micro': '\\u00B5',\n    'middot': '\\u00B7',\n    'minus': '\\u2212',\n    'Mu': '\\u039C',\n    'mu': '\\u03BC',\n    'nabla': '\\u2207',\n    'nbsp': '\\u00A0',\n    'ndash': '\\u2013',\n    'ne': '\\u2260',\n    'ni': '\\u220B',\n    'not': '\\u00AC',\n    'notin': '\\u2209',\n    'nsub': '\\u2284',\n    'Ntilde': '\\u00D1',\n    'ntilde': '\\u00F1',\n    'Nu': '\\u039D',\n    'nu': '\\u03BD',\n    'Oacute': '\\u00D3',\n    'oacute': '\\u00F3',\n    'Ocirc': '\\u00D4',\n    'ocirc': '\\u00F4',\n    'OElig': '\\u0152',\n    'oelig': '\\u0153',\n    'Ograve': '\\u00D2',\n    'ograve': '\\u00F2',\n    'oline': '\\u203E',\n    'Omega': '\\u03A9',\n    'omega': '\\u03C9',\n    'Omicron': '\\u039F',\n    'omicron': '\\u03BF',\n    'oplus': '\\u2295',\n    'or': '\\u2228',\n    'ordf': '\\u00AA',\n    'ordm': '\\u00BA',\n    'Oslash': '\\u00D8',\n    'oslash': '\\u00F8',\n    'Otilde': '\\u00D5',\n    'otilde': '\\u00F5',\n    'otimes': '\\u2297',\n    'Ouml': '\\u00D6',\n    'ouml': '\\u00F6',\n    'para': '\\u00B6',\n    'permil': '\\u2030',\n    'perp': '\\u22A5',\n    'Phi': '\\u03A6',\n    'phi': '\\u03C6',\n    'Pi': '\\u03A0',\n    'pi': '\\u03C0',\n    'piv': '\\u03D6',\n    'plusmn': '\\u00B1',\n    'pound': '\\u00A3',\n    'prime': '\\u2032',\n    'Prime': '\\u2033',\n    'prod': '\\u220F',\n    'prop': '\\u221D',\n    'Psi': '\\u03A8',\n    'psi': '\\u03C8',\n    'quot': '\\u0022',\n    'radic': '\\u221A',\n    'rang': '\\u27E9',\n    'raquo': '\\u00BB',\n    'rarr': '\\u2192',\n    'rArr': '\\u21D2',\n    'rceil': '\\u2309',\n    'rdquo': '\\u201D',\n    'real': '\\u211C',\n    'reg': '\\u00AE',\n    'rfloor': '\\u230B',\n    'Rho': '\\u03A1',\n    'rho': '\\u03C1',\n    'rlm': '\\u200F',\n    'rsaquo': '\\u203A',\n    'rsquo': '\\u2019',\n    'sbquo': '\\u201A',\n    'Scaron': '\\u0160',\n    'scaron': '\\u0161',\n    'sdot': '\\u22C5',\n    'sect': '\\u00A7',\n    'shy': '\\u00AD',\n    'Sigma': '\\u03A3',\n    'sigma': '\\u03C3',\n    'sigmaf': '\\u03C2',\n    'sim': '\\u223C',\n    'spades': '\\u2660',\n    'sub': '\\u2282',\n    'sube': '\\u2286',\n    'sum': '\\u2211',\n    'sup': '\\u2283',\n    'sup1': '\\u00B9',\n    'sup2': '\\u00B2',\n    'sup3': '\\u00B3',\n    'supe': '\\u2287',\n    'szlig': '\\u00DF',\n    'Tau': '\\u03A4',\n    'tau': '\\u03C4',\n    'there4': '\\u2234',\n    'Theta': '\\u0398',\n    'theta': '\\u03B8',\n    'thetasym': '\\u03D1',\n    'thinsp': '\\u2009',\n    'THORN': '\\u00DE',\n    'thorn': '\\u00FE',\n    'tilde': '\\u02DC',\n    'times': '\\u00D7',\n    'trade': '\\u2122',\n    'Uacute': '\\u00DA',\n    'uacute': '\\u00FA',\n    'uarr': '\\u2191',\n    'uArr': '\\u21D1',\n    'Ucirc': '\\u00DB',\n    'ucirc': '\\u00FB',\n    'Ugrave': '\\u00D9',\n    'ugrave': '\\u00F9',\n    'uml': '\\u00A8',\n    'upsih': '\\u03D2',\n    'Upsilon': '\\u03A5',\n    'upsilon': '\\u03C5',\n    'Uuml': '\\u00DC',\n    'uuml': '\\u00FC',\n    'weierp': '\\u2118',\n    'Xi': '\\u039E',\n    'xi': '\\u03BE',\n    'Yacute': '\\u00DD',\n    'yacute': '\\u00FD',\n    'yen': '\\u00A5',\n    'yuml': '\\u00FF',\n    'Yuml': '\\u0178',\n    'Zeta': '\\u0396',\n    'zeta': '\\u03B6',\n    'zwj': '\\u200D',\n    'zwnj': '\\u200C',\n};\n// The &ngsp; pseudo-entity is denoting a space. see:\n// https://github.com/dart-lang/angular/blob/0bb611387d29d65b5af7f9d2515ab571fd3fbee4/_tests/test/compiler/preserve_whitespace_test.dart\nvar NGSP_UNICODE = '\\uE500';\nNAMED_ENTITIES['ngsp'] = NGSP_UNICODE;\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar HtmlTagDefinition = /** @class */ (function () {\n    function HtmlTagDefinition(_a) {\n        var _b = _a === void 0 ? {} : _a, closedByChildren = _b.closedByChildren, requiredParents = _b.requiredParents, implicitNamespacePrefix = _b.implicitNamespacePrefix, _c = _b.contentType, contentType = _c === void 0 ? TagContentType.PARSABLE_DATA : _c, _d = _b.closedByParent, closedByParent = _d === void 0 ? false : _d, _e = _b.isVoid, isVoid = _e === void 0 ? false : _e, _f = _b.ignoreFirstLf, ignoreFirstLf = _f === void 0 ? false : _f;\n        var _this = this;\n        this.closedByChildren = {};\n        this.closedByParent = false;\n        this.canSelfClose = false;\n        if (closedByChildren && closedByChildren.length > 0) {\n            closedByChildren.forEach(function (tagName) { return _this.closedByChildren[tagName] = true; });\n        }\n        this.isVoid = isVoid;\n        this.closedByParent = closedByParent || isVoid;\n        if (requiredParents && requiredParents.length > 0) {\n            this.requiredParents = {};\n            // The first parent is the list is automatically when none of the listed parents are present\n            this.parentToAdd = requiredParents[0];\n            requiredParents.forEach(function (tagName) { return _this.requiredParents[tagName] = true; });\n        }\n        this.implicitNamespacePrefix = implicitNamespacePrefix || null;\n        this.contentType = contentType;\n        this.ignoreFirstLf = ignoreFirstLf;\n    }\n    HtmlTagDefinition.prototype.requireExtraParent = function (currentParent) {\n        if (!this.requiredParents) {\n            return false;\n        }\n        if (!currentParent) {\n            return true;\n        }\n        var lcParent = currentParent.toLowerCase();\n        var isParentTemplate = lcParent === 'template' || currentParent === 'ng-template';\n        return !isParentTemplate && this.requiredParents[lcParent] != true;\n    };\n    HtmlTagDefinition.prototype.isClosedByChild = function (name) {\n        return this.isVoid || name.toLowerCase() in this.closedByChildren;\n    };\n    return HtmlTagDefinition;\n}());\n// see http://www.w3.org/TR/html51/syntax.html#optional-tags\n// This implementation does not fully conform to the HTML5 spec.\nvar TAG_DEFINITIONS = {\n    'base': new HtmlTagDefinition({ isVoid: true }),\n    'meta': new HtmlTagDefinition({ isVoid: true }),\n    'area': new HtmlTagDefinition({ isVoid: true }),\n    'embed': new HtmlTagDefinition({ isVoid: true }),\n    'link': new HtmlTagDefinition({ isVoid: true }),\n    'img': new HtmlTagDefinition({ isVoid: true }),\n    'input': new HtmlTagDefinition({ isVoid: true }),\n    'param': new HtmlTagDefinition({ isVoid: true }),\n    'hr': new HtmlTagDefinition({ isVoid: true }),\n    'br': new HtmlTagDefinition({ isVoid: true }),\n    'source': new HtmlTagDefinition({ isVoid: true }),\n    'track': new HtmlTagDefinition({ isVoid: true }),\n    'wbr': new HtmlTagDefinition({ isVoid: true }),\n    'p': new HtmlTagDefinition({\n        closedByChildren: [\n            'address', 'article', 'aside', 'blockquote', 'div', 'dl', 'fieldset', 'footer', 'form',\n            'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr',\n            'main', 'nav', 'ol', 'p', 'pre', 'section', 'table', 'ul'\n        ],\n        closedByParent: true\n    }),\n    'thead': new HtmlTagDefinition({ closedByChildren: ['tbody', 'tfoot'] }),\n    'tbody': new HtmlTagDefinition({ closedByChildren: ['tbody', 'tfoot'], closedByParent: true }),\n    'tfoot': new HtmlTagDefinition({ closedByChildren: ['tbody'], closedByParent: true }),\n    'tr': new HtmlTagDefinition({\n        closedByChildren: ['tr'],\n        requiredParents: ['tbody', 'tfoot', 'thead'],\n        closedByParent: true\n    }),\n    'td': new HtmlTagDefinition({ closedByChildren: ['td', 'th'], closedByParent: true }),\n    'th': new HtmlTagDefinition({ closedByChildren: ['td', 'th'], closedByParent: true }),\n    'col': new HtmlTagDefinition({ requiredParents: ['colgroup'], isVoid: true }),\n    'svg': new HtmlTagDefinition({ implicitNamespacePrefix: 'svg' }),\n    'math': new HtmlTagDefinition({ implicitNamespacePrefix: 'math' }),\n    'li': new HtmlTagDefinition({ closedByChildren: ['li'], closedByParent: true }),\n    'dt': new HtmlTagDefinition({ closedByChildren: ['dt', 'dd'] }),\n    'dd': new HtmlTagDefinition({ closedByChildren: ['dt', 'dd'], closedByParent: true }),\n    'rb': new HtmlTagDefinition({ closedByChildren: ['rb', 'rt', 'rtc', 'rp'], closedByParent: true }),\n    'rt': new HtmlTagDefinition({ closedByChildren: ['rb', 'rt', 'rtc', 'rp'], closedByParent: true }),\n    'rtc': new HtmlTagDefinition({ closedByChildren: ['rb', 'rtc', 'rp'], closedByParent: true }),\n    'rp': new HtmlTagDefinition({ closedByChildren: ['rb', 'rt', 'rtc', 'rp'], closedByParent: true }),\n    'optgroup': new HtmlTagDefinition({ closedByChildren: ['optgroup'], closedByParent: true }),\n    'option': new HtmlTagDefinition({ closedByChildren: ['option', 'optgroup'], closedByParent: true }),\n    'pre': new HtmlTagDefinition({ ignoreFirstLf: true }),\n    'listing': new HtmlTagDefinition({ ignoreFirstLf: true }),\n    'style': new HtmlTagDefinition({ contentType: TagContentType.RAW_TEXT }),\n    'script': new HtmlTagDefinition({ contentType: TagContentType.RAW_TEXT }),\n    'title': new HtmlTagDefinition({ contentType: TagContentType.ESCAPABLE_RAW_TEXT }),\n    'textarea': new HtmlTagDefinition({ contentType: TagContentType.ESCAPABLE_RAW_TEXT, ignoreFirstLf: true }),\n};\nvar _DEFAULT_TAG_DEFINITION = new HtmlTagDefinition();\nfunction getHtmlTagDefinition(tagName) {\n    return TAG_DEFINITIONS[tagName.toLowerCase()] || _DEFAULT_TAG_DEFINITION;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _SELECTOR_REGEXP = new RegExp('(\\\\:not\\\\()|' + //\":not(\"\n    '([-\\\\w]+)|' + // \"tag\"\n    '(?:\\\\.([-\\\\w]+))|' + // \".class\"\n    // \"-\" should appear first in the regexp below as FF31 parses \"[.-\\w]\" as a range\n    '(?:\\\\[([-.\\\\w*]+)(?:=([\\\"\\']?)([^\\\\]\\\"\\']*)\\\\5)?\\\\])|' + // \"[name]\", \"[name=value]\",\n    // \"[name=\"value\"]\",\n    // \"[name='value']\"\n    '(\\\\))|' + // \")\"\n    '(\\\\s*,\\\\s*)', // \",\"\n'g');\n/**\n * A css selector contains an element name,\n * css classes and attribute/value pairs with the purpose\n * of selecting subsets out of them.\n */\nvar CssSelector = /** @class */ (function () {\n    function CssSelector() {\n        this.element = null;\n        this.classNames = [];\n        /**\n         * The selectors are encoded in pairs where:\n         * - even locations are attribute names\n         * - odd locations are attribute values.\n         *\n         * Example:\n         * Selector: `[key1=value1][key2]` would parse to:\n         * ```\n         * ['key1', 'value1', 'key2', '']\n         * ```\n         */\n        this.attrs = [];\n        this.notSelectors = [];\n    }\n    CssSelector.parse = function (selector) {\n        var results = [];\n        var _addResult = function (res, cssSel) {\n            if (cssSel.notSelectors.length > 0 && !cssSel.element && cssSel.classNames.length == 0 &&\n                cssSel.attrs.length == 0) {\n                cssSel.element = '*';\n            }\n            res.push(cssSel);\n        };\n        var cssSelector = new CssSelector();\n        var match;\n        var current = cssSelector;\n        var inNot = false;\n        _SELECTOR_REGEXP.lastIndex = 0;\n        while (match = _SELECTOR_REGEXP.exec(selector)) {\n            if (match[1]) {\n                if (inNot) {\n                    throw new Error('Nesting :not is not allowed in a selector');\n                }\n                inNot = true;\n                current = new CssSelector();\n                cssSelector.notSelectors.push(current);\n            }\n            if (match[2]) {\n                current.setElement(match[2]);\n            }\n            if (match[3]) {\n                current.addClassName(match[3]);\n            }\n            if (match[4]) {\n                current.addAttribute(match[4], match[6]);\n            }\n            if (match[7]) {\n                inNot = false;\n                current = cssSelector;\n            }\n            if (match[8]) {\n                if (inNot) {\n                    throw new Error('Multiple selectors in :not are not supported');\n                }\n                _addResult(results, cssSelector);\n                cssSelector = current = new CssSelector();\n            }\n        }\n        _addResult(results, cssSelector);\n        return results;\n    };\n    CssSelector.prototype.isElementSelector = function () {\n        return this.hasElementSelector() && this.classNames.length == 0 && this.attrs.length == 0 &&\n            this.notSelectors.length === 0;\n    };\n    CssSelector.prototype.hasElementSelector = function () { return !!this.element; };\n    CssSelector.prototype.setElement = function (element) {\n        if (element === void 0) { element = null; }\n        this.element = element;\n    };\n    /** Gets a template string for an element that matches the selector. */\n    CssSelector.prototype.getMatchingElementTemplate = function () {\n        var tagName = this.element || 'div';\n        var classAttr = this.classNames.length > 0 ? \" class=\\\"\" + this.classNames.join(' ') + \"\\\"\" : '';\n        var attrs = '';\n        for (var i = 0; i < this.attrs.length; i += 2) {\n            var attrName = this.attrs[i];\n            var attrValue = this.attrs[i + 1] !== '' ? \"=\\\"\" + this.attrs[i + 1] + \"\\\"\" : '';\n            attrs += \" \" + attrName + attrValue;\n        }\n        return getHtmlTagDefinition(tagName).isVoid ? \"<\" + tagName + classAttr + attrs + \"/>\" :\n            \"<\" + tagName + classAttr + attrs + \"></\" + tagName + \">\";\n    };\n    CssSelector.prototype.getAttrs = function () {\n        var result = [];\n        if (this.classNames.length > 0) {\n            result.push('class', this.classNames.join(' '));\n        }\n        return result.concat(this.attrs);\n    };\n    CssSelector.prototype.addAttribute = function (name, value) {\n        if (value === void 0) { value = ''; }\n        this.attrs.push(name, value && value.toLowerCase() || '');\n    };\n    CssSelector.prototype.addClassName = function (name) { this.classNames.push(name.toLowerCase()); };\n    CssSelector.prototype.toString = function () {\n        var res = this.element || '';\n        if (this.classNames) {\n            this.classNames.forEach(function (klass) { return res += \".\" + klass; });\n        }\n        if (this.attrs) {\n            for (var i = 0; i < this.attrs.length; i += 2) {\n                var name_1 = this.attrs[i];\n                var value = this.attrs[i + 1];\n                res += \"[\" + name_1 + (value ? '=' + value : '') + \"]\";\n            }\n        }\n        this.notSelectors.forEach(function (notSelector) { return res += \":not(\" + notSelector + \")\"; });\n        return res;\n    };\n    return CssSelector;\n}());\n/**\n * Reads a list of CssSelectors and allows to calculate which ones\n * are contained in a given CssSelector.\n */\nvar SelectorMatcher = /** @class */ (function () {\n    function SelectorMatcher() {\n        this._elementMap = new Map();\n        this._elementPartialMap = new Map();\n        this._classMap = new Map();\n        this._classPartialMap = new Map();\n        this._attrValueMap = new Map();\n        this._attrValuePartialMap = new Map();\n        this._listContexts = [];\n    }\n    SelectorMatcher.createNotMatcher = function (notSelectors) {\n        var notMatcher = new SelectorMatcher();\n        notMatcher.addSelectables(notSelectors, null);\n        return notMatcher;\n    };\n    SelectorMatcher.prototype.addSelectables = function (cssSelectors, callbackCtxt) {\n        var listContext = null;\n        if (cssSelectors.length > 1) {\n            listContext = new SelectorListContext(cssSelectors);\n            this._listContexts.push(listContext);\n        }\n        for (var i = 0; i < cssSelectors.length; i++) {\n            this._addSelectable(cssSelectors[i], callbackCtxt, listContext);\n        }\n    };\n    /**\n     * Add an object that can be found later on by calling `match`.\n     * @param cssSelector A css selector\n     * @param callbackCtxt An opaque object that will be given to the callback of the `match` function\n     */\n    SelectorMatcher.prototype._addSelectable = function (cssSelector, callbackCtxt, listContext) {\n        var matcher = this;\n        var element = cssSelector.element;\n        var classNames = cssSelector.classNames;\n        var attrs = cssSelector.attrs;\n        var selectable = new SelectorContext(cssSelector, callbackCtxt, listContext);\n        if (element) {\n            var isTerminal = attrs.length === 0 && classNames.length === 0;\n            if (isTerminal) {\n                this._addTerminal(matcher._elementMap, element, selectable);\n            }\n            else {\n                matcher = this._addPartial(matcher._elementPartialMap, element);\n            }\n        }\n        if (classNames) {\n            for (var i = 0; i < classNames.length; i++) {\n                var isTerminal = attrs.length === 0 && i === classNames.length - 1;\n                var className = classNames[i];\n                if (isTerminal) {\n                    this._addTerminal(matcher._classMap, className, selectable);\n                }\n                else {\n                    matcher = this._addPartial(matcher._classPartialMap, className);\n                }\n            }\n        }\n        if (attrs) {\n            for (var i = 0; i < attrs.length; i += 2) {\n                var isTerminal = i === attrs.length - 2;\n                var name_2 = attrs[i];\n                var value = attrs[i + 1];\n                if (isTerminal) {\n                    var terminalMap = matcher._attrValueMap;\n                    var terminalValuesMap = terminalMap.get(name_2);\n                    if (!terminalValuesMap) {\n                        terminalValuesMap = new Map();\n                        terminalMap.set(name_2, terminalValuesMap);\n                    }\n                    this._addTerminal(terminalValuesMap, value, selectable);\n                }\n                else {\n                    var partialMap = matcher._attrValuePartialMap;\n                    var partialValuesMap = partialMap.get(name_2);\n                    if (!partialValuesMap) {\n                        partialValuesMap = new Map();\n                        partialMap.set(name_2, partialValuesMap);\n                    }\n                    matcher = this._addPartial(partialValuesMap, value);\n                }\n            }\n        }\n    };\n    SelectorMatcher.prototype._addTerminal = function (map, name, selectable) {\n        var terminalList = map.get(name);\n        if (!terminalList) {\n            terminalList = [];\n            map.set(name, terminalList);\n        }\n        terminalList.push(selectable);\n    };\n    SelectorMatcher.prototype._addPartial = function (map, name) {\n        var matcher = map.get(name);\n        if (!matcher) {\n            matcher = new SelectorMatcher();\n            map.set(name, matcher);\n        }\n        return matcher;\n    };\n    /**\n     * Find the objects that have been added via `addSelectable`\n     * whose css selector is contained in the given css selector.\n     * @param cssSelector A css selector\n     * @param matchedCallback This callback will be called with the object handed into `addSelectable`\n     * @return boolean true if a match was found\n    */\n    SelectorMatcher.prototype.match = function (cssSelector, matchedCallback) {\n        var result = false;\n        var element = cssSelector.element;\n        var classNames = cssSelector.classNames;\n        var attrs = cssSelector.attrs;\n        for (var i = 0; i < this._listContexts.length; i++) {\n            this._listContexts[i].alreadyMatched = false;\n        }\n        result = this._matchTerminal(this._elementMap, element, cssSelector, matchedCallback) || result;\n        result = this._matchPartial(this._elementPartialMap, element, cssSelector, matchedCallback) ||\n            result;\n        if (classNames) {\n            for (var i = 0; i < classNames.length; i++) {\n                var className = classNames[i];\n                result =\n                    this._matchTerminal(this._classMap, className, cssSelector, matchedCallback) || result;\n                result =\n                    this._matchPartial(this._classPartialMap, className, cssSelector, matchedCallback) ||\n                        result;\n            }\n        }\n        if (attrs) {\n            for (var i = 0; i < attrs.length; i += 2) {\n                var name_3 = attrs[i];\n                var value = attrs[i + 1];\n                var terminalValuesMap = this._attrValueMap.get(name_3);\n                if (value) {\n                    result =\n                        this._matchTerminal(terminalValuesMap, '', cssSelector, matchedCallback) || result;\n                }\n                result =\n                    this._matchTerminal(terminalValuesMap, value, cssSelector, matchedCallback) || result;\n                var partialValuesMap = this._attrValuePartialMap.get(name_3);\n                if (value) {\n                    result = this._matchPartial(partialValuesMap, '', cssSelector, matchedCallback) || result;\n                }\n                result =\n                    this._matchPartial(partialValuesMap, value, cssSelector, matchedCallback) || result;\n            }\n        }\n        return result;\n    };\n    /** @internal */\n    SelectorMatcher.prototype._matchTerminal = function (map, name, cssSelector, matchedCallback) {\n        if (!map || typeof name !== 'string') {\n            return false;\n        }\n        var selectables = map.get(name) || [];\n        var starSelectables = map.get('*');\n        if (starSelectables) {\n            selectables = selectables.concat(starSelectables);\n        }\n        if (selectables.length === 0) {\n            return false;\n        }\n        var selectable;\n        var result = false;\n        for (var i = 0; i < selectables.length; i++) {\n            selectable = selectables[i];\n            result = selectable.finalize(cssSelector, matchedCallback) || result;\n        }\n        return result;\n    };\n    /** @internal */\n    SelectorMatcher.prototype._matchPartial = function (map, name, cssSelector, matchedCallback) {\n        if (!map || typeof name !== 'string') {\n            return false;\n        }\n        var nestedSelector = map.get(name);\n        if (!nestedSelector) {\n            return false;\n        }\n        // TODO(perf): get rid of recursion and measure again\n        // TODO(perf): don't pass the whole selector into the recursion,\n        // but only the not processed parts\n        return nestedSelector.match(cssSelector, matchedCallback);\n    };\n    return SelectorMatcher;\n}());\nvar SelectorListContext = /** @class */ (function () {\n    function SelectorListContext(selectors) {\n        this.selectors = selectors;\n        this.alreadyMatched = false;\n    }\n    return SelectorListContext;\n}());\n// Store context to pass back selector and context when a selector is matched\nvar SelectorContext = /** @class */ (function () {\n    function SelectorContext(selector, cbContext, listContext) {\n        this.selector = selector;\n        this.cbContext = cbContext;\n        this.listContext = listContext;\n        this.notSelectors = selector.notSelectors;\n    }\n    SelectorContext.prototype.finalize = function (cssSelector, callback) {\n        var result = true;\n        if (this.notSelectors.length > 0 && (!this.listContext || !this.listContext.alreadyMatched)) {\n            var notMatcher = SelectorMatcher.createNotMatcher(this.notSelectors);\n            result = !notMatcher.match(cssSelector, null);\n        }\n        if (result && callback && (!this.listContext || !this.listContext.alreadyMatched)) {\n            if (this.listContext) {\n                this.listContext.alreadyMatched = true;\n            }\n            callback(this.selector, this.cbContext);\n        }\n        return result;\n    };\n    return SelectorContext;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Attention:\n// This file duplicates types and values from @angular/core\n// so that we are able to make @angular/compiler independent of @angular/core.\n// This is important to prevent a build cycle, as @angular/core needs to\n// be compiled with the compiler.\nvar createInject = makeMetadataFactory('Inject', function (token) { return ({ token: token }); });\nvar createInjectionToken = makeMetadataFactory('InjectionToken', function (desc) { return ({ _desc: desc, ngInjectableDef: undefined }); });\nvar createAttribute = makeMetadataFactory('Attribute', function (attributeName) { return ({ attributeName: attributeName }); });\nvar createContentChildren = makeMetadataFactory('ContentChildren', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: false, isViewQuery: false, descendants: false }, data));\n});\nvar createContentChild = makeMetadataFactory('ContentChild', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: true, isViewQuery: false, descendants: true }, data));\n});\nvar createViewChildren = makeMetadataFactory('ViewChildren', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: false, isViewQuery: true, descendants: true }, data));\n});\nvar createViewChild = makeMetadataFactory('ViewChild', function (selector, data) {\n    return (__assign({ selector: selector, first: true, isViewQuery: true, descendants: true }, data));\n});\nvar createDirective = makeMetadataFactory('Directive', function (dir) {\n    if (dir === void 0) { dir = {}; }\n    return dir;\n});\nvar ViewEncapsulation;\n(function (ViewEncapsulation) {\n    ViewEncapsulation[ViewEncapsulation[\"Emulated\"] = 0] = \"Emulated\";\n    ViewEncapsulation[ViewEncapsulation[\"Native\"] = 1] = \"Native\";\n    ViewEncapsulation[ViewEncapsulation[\"None\"] = 2] = \"None\";\n})(ViewEncapsulation || (ViewEncapsulation = {}));\nvar ChangeDetectionStrategy;\n(function (ChangeDetectionStrategy) {\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"OnPush\"] = 0] = \"OnPush\";\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"Default\"] = 1] = \"Default\";\n})(ChangeDetectionStrategy || (ChangeDetectionStrategy = {}));\nvar createComponent = makeMetadataFactory('Component', function (c) {\n    if (c === void 0) { c = {}; }\n    return (__assign({ changeDetection: ChangeDetectionStrategy.Default }, c));\n});\nvar createPipe = makeMetadataFactory('Pipe', function (p) { return (__assign({ pure: true }, p)); });\nvar createInput = makeMetadataFactory('Input', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });\nvar createOutput = makeMetadataFactory('Output', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });\nvar createHostBinding = makeMetadataFactory('HostBinding', function (hostPropertyName) { return ({ hostPropertyName: hostPropertyName }); });\nvar createHostListener = makeMetadataFactory('HostListener', function (eventName, args) { return ({ eventName: eventName, args: args }); });\nvar createNgModule = makeMetadataFactory('NgModule', function (ngModule) { return ngModule; });\nvar createInjectable = makeMetadataFactory('Injectable', function (injectable) {\n    if (injectable === void 0) { injectable = {}; }\n    return injectable;\n});\nvar CUSTOM_ELEMENTS_SCHEMA = {\n    name: 'custom-elements'\n};\nvar NO_ERRORS_SCHEMA = {\n    name: 'no-errors-schema'\n};\nvar createOptional = makeMetadataFactory('Optional');\nvar createSelf = makeMetadataFactory('Self');\nvar createSkipSelf = makeMetadataFactory('SkipSelf');\nvar createHost = makeMetadataFactory('Host');\nvar Type = Function;\nvar SecurityContext;\n(function (SecurityContext) {\n    SecurityContext[SecurityContext[\"NONE\"] = 0] = \"NONE\";\n    SecurityContext[SecurityContext[\"HTML\"] = 1] = \"HTML\";\n    SecurityContext[SecurityContext[\"STYLE\"] = 2] = \"STYLE\";\n    SecurityContext[SecurityContext[\"SCRIPT\"] = 3] = \"SCRIPT\";\n    SecurityContext[SecurityContext[\"URL\"] = 4] = \"URL\";\n    SecurityContext[SecurityContext[\"RESOURCE_URL\"] = 5] = \"RESOURCE_URL\";\n})(SecurityContext || (SecurityContext = {}));\nvar MissingTranslationStrategy;\n(function (MissingTranslationStrategy) {\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Error\"] = 0] = \"Error\";\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Warning\"] = 1] = \"Warning\";\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Ignore\"] = 2] = \"Ignore\";\n})(MissingTranslationStrategy || (MissingTranslationStrategy = {}));\nfunction makeMetadataFactory(name, props) {\n    var factory = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var values = props ? props.apply(void 0, __spread(args)) : {};\n        return __assign({ ngMetadataName: name }, values);\n    };\n    factory.isTypeOf = function (obj) { return obj && obj.ngMetadataName === name; };\n    factory.ngMetadataName = name;\n    return factory;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DASH_CASE_REGEXP = /-+([a-z0-9])/g;\nfunction dashCaseToCamelCase(input) {\n    return input.replace(DASH_CASE_REGEXP, function () {\n        var m = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            m[_i] = arguments[_i];\n        }\n        return m[1].toUpperCase();\n    });\n}\nfunction splitAtColon(input, defaultValues) {\n    return _splitAt(input, ':', defaultValues);\n}\nfunction splitAtPeriod(input, defaultValues) {\n    return _splitAt(input, '.', defaultValues);\n}\nfunction _splitAt(input, character, defaultValues) {\n    var characterIndex = input.indexOf(character);\n    if (characterIndex == -1)\n        return defaultValues;\n    return [input.slice(0, characterIndex).trim(), input.slice(characterIndex + 1).trim()];\n}\nfunction visitValue(value, visitor, context) {\n    if (Array.isArray(value)) {\n        return visitor.visitArray(value, context);\n    }\n    if (isStrictStringMap(value)) {\n        return visitor.visitStringMap(value, context);\n    }\n    if (value == null || typeof value == 'string' || typeof value == 'number' ||\n        typeof value == 'boolean') {\n        return visitor.visitPrimitive(value, context);\n    }\n    return visitor.visitOther(value, context);\n}\nfunction isDefined(val) {\n    return val !== null && val !== undefined;\n}\nfunction noUndefined(val) {\n    return val === undefined ? null : val;\n}\nvar ValueTransformer = /** @class */ (function () {\n    function ValueTransformer() {\n    }\n    ValueTransformer.prototype.visitArray = function (arr, context) {\n        var _this = this;\n        return arr.map(function (value) { return visitValue(value, _this, context); });\n    };\n    ValueTransformer.prototype.visitStringMap = function (map, context) {\n        var _this = this;\n        var result = {};\n        Object.keys(map).forEach(function (key) { result[key] = visitValue(map[key], _this, context); });\n        return result;\n    };\n    ValueTransformer.prototype.visitPrimitive = function (value, context) { return value; };\n    ValueTransformer.prototype.visitOther = function (value, context) { return value; };\n    return ValueTransformer;\n}());\nvar SyncAsync = {\n    assertSync: function (value) {\n        if (isPromise(value)) {\n            throw new Error(\"Illegal state: value cannot be a promise\");\n        }\n        return value;\n    },\n    then: function (value, cb) { return isPromise(value) ? value.then(cb) : cb(value); },\n    all: function (syncAsyncValues) {\n        return syncAsyncValues.some(isPromise) ? Promise.all(syncAsyncValues) : syncAsyncValues;\n    }\n};\nfunction error(msg) {\n    throw new Error(\"Internal Error: \" + msg);\n}\nfunction syntaxError(msg, parseErrors) {\n    var error = Error(msg);\n    error[ERROR_SYNTAX_ERROR] = true;\n    if (parseErrors)\n        error[ERROR_PARSE_ERRORS] = parseErrors;\n    return error;\n}\nvar ERROR_SYNTAX_ERROR = 'ngSyntaxError';\nvar ERROR_PARSE_ERRORS = 'ngParseErrors';\n\n\n// Escape characters that have a special meaning in Regular Expressions\nfunction escapeRegExp(s) {\n    return s.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n}\nvar STRING_MAP_PROTO = Object.getPrototypeOf({});\nfunction isStrictStringMap(obj) {\n    return typeof obj === 'object' && obj !== null && Object.getPrototypeOf(obj) === STRING_MAP_PROTO;\n}\nfunction utf8Encode(str) {\n    var encoded = '';\n    for (var index = 0; index < str.length; index++) {\n        var codePoint = str.charCodeAt(index);\n        // decode surrogate\n        // see https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n        if (codePoint >= 0xd800 && codePoint <= 0xdbff && str.length > (index + 1)) {\n            var low = str.charCodeAt(index + 1);\n            if (low >= 0xdc00 && low <= 0xdfff) {\n                index++;\n                codePoint = ((codePoint - 0xd800) << 10) + low - 0xdc00 + 0x10000;\n            }\n        }\n        if (codePoint <= 0x7f) {\n            encoded += String.fromCharCode(codePoint);\n        }\n        else if (codePoint <= 0x7ff) {\n            encoded += String.fromCharCode(((codePoint >> 6) & 0x1F) | 0xc0, (codePoint & 0x3f) | 0x80);\n        }\n        else if (codePoint <= 0xffff) {\n            encoded += String.fromCharCode((codePoint >> 12) | 0xe0, ((codePoint >> 6) & 0x3f) | 0x80, (codePoint & 0x3f) | 0x80);\n        }\n        else if (codePoint <= 0x1fffff) {\n            encoded += String.fromCharCode(((codePoint >> 18) & 0x07) | 0xf0, ((codePoint >> 12) & 0x3f) | 0x80, ((codePoint >> 6) & 0x3f) | 0x80, (codePoint & 0x3f) | 0x80);\n        }\n    }\n    return encoded;\n}\nfunction stringify(token) {\n    if (typeof token === 'string') {\n        return token;\n    }\n    if (token instanceof Array) {\n        return '[' + token.map(stringify).join(', ') + ']';\n    }\n    if (token == null) {\n        return '' + token;\n    }\n    if (token.overriddenName) {\n        return \"\" + token.overriddenName;\n    }\n    if (token.name) {\n        return \"\" + token.name;\n    }\n    // WARNING: do not try to `JSON.stringify(token)` here\n    // see https://github.com/angular/angular/issues/23440\n    var res = token.toString();\n    if (res == null) {\n        return '' + res;\n    }\n    var newLineIndex = res.indexOf('\\n');\n    return newLineIndex === -1 ? res : res.substring(0, newLineIndex);\n}\n/**\n * Lazily retrieves the reference value from a forwardRef.\n */\nfunction resolveForwardRef(type) {\n    if (typeof type === 'function' && type.hasOwnProperty('__forward_ref__')) {\n        return type();\n    }\n    else {\n        return type;\n    }\n}\n/**\n * Determine if the argument is shaped like a Promise\n */\nfunction isPromise(obj) {\n    // allow any Promise/A+ compliant thenable.\n    // It's up to the caller to ensure that obj.then conforms to the spec\n    return !!obj && typeof obj.then === 'function';\n}\nvar Version = /** @class */ (function () {\n    function Version(full) {\n        this.full = full;\n        var splits = full.split('.');\n        this.major = splits[0];\n        this.minor = splits[1];\n        this.patch = splits.slice(2).join('.');\n    }\n    return Version;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of the common package.\n */\nvar VERSION = new Version('6.0.0-rc.5+252.sha-7c1bd71');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A segment of text within the template.\n */\nvar TextAst = /** @class */ (function () {\n    function TextAst(value, ngContentIndex, sourceSpan) {\n        this.value = value;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n    }\n    TextAst.prototype.visit = function (visitor, context) { return visitor.visitText(this, context); };\n    return TextAst;\n}());\n/**\n * A bound expression within the text of a template.\n */\nvar BoundTextAst = /** @class */ (function () {\n    function BoundTextAst(value, ngContentIndex, sourceSpan) {\n        this.value = value;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n    }\n    BoundTextAst.prototype.visit = function (visitor, context) {\n        return visitor.visitBoundText(this, context);\n    };\n    return BoundTextAst;\n}());\n/**\n * A plain attribute on an element.\n */\nvar AttrAst = /** @class */ (function () {\n    function AttrAst(name, value, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    AttrAst.prototype.visit = function (visitor, context) { return visitor.visitAttr(this, context); };\n    return AttrAst;\n}());\nvar PropertyBindingType;\n(function (PropertyBindingType) {\n    // A normal binding to a property (e.g. `[property]=\"expression\"`).\n    PropertyBindingType[PropertyBindingType[\"Property\"] = 0] = \"Property\";\n    // A binding to an element attribute (e.g. `[attr.name]=\"expression\"`).\n    PropertyBindingType[PropertyBindingType[\"Attribute\"] = 1] = \"Attribute\";\n    // A binding to a CSS class (e.g. `[class.name]=\"condition\"`).\n    PropertyBindingType[PropertyBindingType[\"Class\"] = 2] = \"Class\";\n    // A binding to a style rule (e.g. `[style.rule]=\"expression\"`).\n    PropertyBindingType[PropertyBindingType[\"Style\"] = 3] = \"Style\";\n    // A binding to an animation reference (e.g. `[animate.key]=\"expression\"`).\n    PropertyBindingType[PropertyBindingType[\"Animation\"] = 4] = \"Animation\";\n})(PropertyBindingType || (PropertyBindingType = {}));\nvar BoundPropertyMapping = (_a = {}, _a[4 /* Animation */] = PropertyBindingType.Animation, _a[1 /* Attribute */] = PropertyBindingType.Attribute, _a[2 /* Class */] = PropertyBindingType.Class, _a[0 /* Property */] = PropertyBindingType.Property, _a[3 /* Style */] = PropertyBindingType.Style, _a);\n/**\n * A binding for an element property (e.g. `[property]=\"expression\"`) or an animation trigger (e.g.\n * `[@trigger]=\"stateExp\"`)\n */\nvar BoundElementPropertyAst = /** @class */ (function () {\n    function BoundElementPropertyAst(name, type, securityContext, value, unit, sourceSpan) {\n        this.name = name;\n        this.type = type;\n        this.securityContext = securityContext;\n        this.value = value;\n        this.unit = unit;\n        this.sourceSpan = sourceSpan;\n        this.isAnimation = this.type === PropertyBindingType.Animation;\n    }\n    BoundElementPropertyAst.fromBoundProperty = function (prop) {\n        var type = BoundPropertyMapping[prop.type];\n        return new BoundElementPropertyAst(prop.name, type, prop.securityContext, prop.value, prop.unit, prop.sourceSpan);\n    };\n    BoundElementPropertyAst.prototype.visit = function (visitor, context) {\n        return visitor.visitElementProperty(this, context);\n    };\n    return BoundElementPropertyAst;\n}());\n/**\n * A binding for an element event (e.g. `(event)=\"handler()\"`) or an animation trigger event (e.g.\n * `(@trigger.phase)=\"callback($event)\"`).\n */\nvar BoundEventAst = /** @class */ (function () {\n    function BoundEventAst(name, target, phase, handler, sourceSpan) {\n        this.name = name;\n        this.target = target;\n        this.phase = phase;\n        this.handler = handler;\n        this.sourceSpan = sourceSpan;\n        this.fullName = BoundEventAst.calcFullName(this.name, this.target, this.phase);\n        this.isAnimation = !!this.phase;\n    }\n    BoundEventAst.calcFullName = function (name, target, phase) {\n        if (target) {\n            return target + \":\" + name;\n        }\n        if (phase) {\n            return \"@\" + name + \".\" + phase;\n        }\n        return name;\n    };\n    BoundEventAst.fromParsedEvent = function (event) {\n        var target = event.type === 0 /* Regular */ ? event.targetOrPhase : null;\n        var phase = event.type === 1 /* Animation */ ? event.targetOrPhase : null;\n        return new BoundEventAst(event.name, target, phase, event.handler, event.sourceSpan);\n    };\n    BoundEventAst.prototype.visit = function (visitor, context) {\n        return visitor.visitEvent(this, context);\n    };\n    return BoundEventAst;\n}());\n/**\n * A reference declaration on an element (e.g. `let someName=\"expression\"`).\n */\nvar ReferenceAst = /** @class */ (function () {\n    function ReferenceAst(name, value, originalValue, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.originalValue = originalValue;\n        this.sourceSpan = sourceSpan;\n    }\n    ReferenceAst.prototype.visit = function (visitor, context) {\n        return visitor.visitReference(this, context);\n    };\n    return ReferenceAst;\n}());\n/**\n * A variable declaration on a <ng-template> (e.g. `var-someName=\"someLocalName\"`).\n */\nvar VariableAst = /** @class */ (function () {\n    function VariableAst(name, value, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    VariableAst.fromParsedVariable = function (v) {\n        return new VariableAst(v.name, v.value, v.sourceSpan);\n    };\n    VariableAst.prototype.visit = function (visitor, context) {\n        return visitor.visitVariable(this, context);\n    };\n    return VariableAst;\n}());\n/**\n * An element declaration in a template.\n */\nvar ElementAst = /** @class */ (function () {\n    function ElementAst(name, attrs, inputs, outputs, references, directives, providers, hasViewContainer, queryMatches, children, ngContentIndex, sourceSpan, endSourceSpan) {\n        this.name = name;\n        this.attrs = attrs;\n        this.inputs = inputs;\n        this.outputs = outputs;\n        this.references = references;\n        this.directives = directives;\n        this.providers = providers;\n        this.hasViewContainer = hasViewContainer;\n        this.queryMatches = queryMatches;\n        this.children = children;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n        this.endSourceSpan = endSourceSpan;\n    }\n    ElementAst.prototype.visit = function (visitor, context) {\n        return visitor.visitElement(this, context);\n    };\n    return ElementAst;\n}());\n/**\n * A `<ng-template>` element included in an Angular template.\n */\nvar EmbeddedTemplateAst = /** @class */ (function () {\n    function EmbeddedTemplateAst(attrs, outputs, references, variables, directives, providers, hasViewContainer, queryMatches, children, ngContentIndex, sourceSpan) {\n        this.attrs = attrs;\n        this.outputs = outputs;\n        this.references = references;\n        this.variables = variables;\n        this.directives = directives;\n        this.providers = providers;\n        this.hasViewContainer = hasViewContainer;\n        this.queryMatches = queryMatches;\n        this.children = children;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n    }\n    EmbeddedTemplateAst.prototype.visit = function (visitor, context) {\n        return visitor.visitEmbeddedTemplate(this, context);\n    };\n    return EmbeddedTemplateAst;\n}());\n/**\n * A directive property with a bound value (e.g. `*ngIf=\"condition\").\n */\nvar BoundDirectivePropertyAst = /** @class */ (function () {\n    function BoundDirectivePropertyAst(directiveName, templateName, value, sourceSpan) {\n        this.directiveName = directiveName;\n        this.templateName = templateName;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    BoundDirectivePropertyAst.prototype.visit = function (visitor, context) {\n        return visitor.visitDirectiveProperty(this, context);\n    };\n    return BoundDirectivePropertyAst;\n}());\n/**\n * A directive declared on an element.\n */\nvar DirectiveAst = /** @class */ (function () {\n    function DirectiveAst(directive, inputs, hostProperties, hostEvents, contentQueryStartId, sourceSpan) {\n        this.directive = directive;\n        this.inputs = inputs;\n        this.hostProperties = hostProperties;\n        this.hostEvents = hostEvents;\n        this.contentQueryStartId = contentQueryStartId;\n        this.sourceSpan = sourceSpan;\n    }\n    DirectiveAst.prototype.visit = function (visitor, context) {\n        return visitor.visitDirective(this, context);\n    };\n    return DirectiveAst;\n}());\n/**\n * A provider declared on an element\n */\nvar ProviderAst = /** @class */ (function () {\n    function ProviderAst(token, multiProvider, eager, providers, providerType, lifecycleHooks, sourceSpan, isModule) {\n        this.token = token;\n        this.multiProvider = multiProvider;\n        this.eager = eager;\n        this.providers = providers;\n        this.providerType = providerType;\n        this.lifecycleHooks = lifecycleHooks;\n        this.sourceSpan = sourceSpan;\n        this.isModule = isModule;\n    }\n    ProviderAst.prototype.visit = function (visitor, context) {\n        // No visit method in the visitor for now...\n        return null;\n    };\n    return ProviderAst;\n}());\nvar ProviderAstType;\n(function (ProviderAstType) {\n    ProviderAstType[ProviderAstType[\"PublicService\"] = 0] = \"PublicService\";\n    ProviderAstType[ProviderAstType[\"PrivateService\"] = 1] = \"PrivateService\";\n    ProviderAstType[ProviderAstType[\"Component\"] = 2] = \"Component\";\n    ProviderAstType[ProviderAstType[\"Directive\"] = 3] = \"Directive\";\n    ProviderAstType[ProviderAstType[\"Builtin\"] = 4] = \"Builtin\";\n})(ProviderAstType || (ProviderAstType = {}));\n/**\n * Position where content is to be projected (instance of `<ng-content>` in a template).\n */\nvar NgContentAst = /** @class */ (function () {\n    function NgContentAst(index, ngContentIndex, sourceSpan) {\n        this.index = index;\n        this.ngContentIndex = ngContentIndex;\n        this.sourceSpan = sourceSpan;\n    }\n    NgContentAst.prototype.visit = function (visitor, context) {\n        return visitor.visitNgContent(this, context);\n    };\n    return NgContentAst;\n}());\n/**\n * A visitor that accepts each node but doesn't do anything. It is intended to be used\n * as the base class for a visitor that is only interested in a subset of the node types.\n */\nvar NullTemplateVisitor = /** @class */ (function () {\n    function NullTemplateVisitor() {\n    }\n    NullTemplateVisitor.prototype.visitNgContent = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitEmbeddedTemplate = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitElement = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitReference = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitVariable = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitEvent = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitElementProperty = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitAttr = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitBoundText = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitText = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitDirective = function (ast, context) { };\n    NullTemplateVisitor.prototype.visitDirectiveProperty = function (ast, context) { };\n    return NullTemplateVisitor;\n}());\n/**\n * Base class that can be used to build a visitor that visits each node\n * in an template ast recursively.\n */\nvar RecursiveTemplateAstVisitor = /** @class */ (function (_super) {\n    __extends(RecursiveTemplateAstVisitor, _super);\n    function RecursiveTemplateAstVisitor() {\n        return _super.call(this) || this;\n    }\n    // Nodes with children\n    RecursiveTemplateAstVisitor.prototype.visitEmbeddedTemplate = function (ast, context) {\n        return this.visitChildren(context, function (visit) {\n            visit(ast.attrs);\n            visit(ast.references);\n            visit(ast.variables);\n            visit(ast.directives);\n            visit(ast.providers);\n            visit(ast.children);\n        });\n    };\n    RecursiveTemplateAstVisitor.prototype.visitElement = function (ast, context) {\n        return this.visitChildren(context, function (visit) {\n            visit(ast.attrs);\n            visit(ast.inputs);\n            visit(ast.outputs);\n            visit(ast.references);\n            visit(ast.directives);\n            visit(ast.providers);\n            visit(ast.children);\n        });\n    };\n    RecursiveTemplateAstVisitor.prototype.visitDirective = function (ast, context) {\n        return this.visitChildren(context, function (visit) {\n            visit(ast.inputs);\n            visit(ast.hostProperties);\n            visit(ast.hostEvents);\n        });\n    };\n    RecursiveTemplateAstVisitor.prototype.visitChildren = function (context, cb) {\n        var results = [];\n        var t = this;\n        function visit(children) {\n            if (children && children.length)\n                results.push(templateVisitAll(t, children, context));\n        }\n        cb(visit);\n        return [].concat.apply([], results);\n    };\n    return RecursiveTemplateAstVisitor;\n}(NullTemplateVisitor));\n/**\n * Visit every node in a list of {@link TemplateAst}s with the given {@link TemplateAstVisitor}.\n */\nfunction templateVisitAll(visitor, asts, context) {\n    if (context === void 0) { context = null; }\n    var result = [];\n    var visit = visitor.visit ?\n        function (ast) { return visitor.visit(ast, context) || ast.visit(visitor, context); } :\n        function (ast) { return ast.visit(visitor, context); };\n    asts.forEach(function (ast) {\n        var astResult = visit(ast);\n        if (astResult) {\n            result.push(astResult);\n        }\n    });\n    return result;\n}\nvar _a;\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar CompilerConfig = /** @class */ (function () {\n    function CompilerConfig(_a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.defaultEncapsulation, defaultEncapsulation = _c === void 0 ? ViewEncapsulation.Emulated : _c, _d = _b.useJit, useJit = _d === void 0 ? true : _d, _e = _b.jitDevMode, jitDevMode = _e === void 0 ? false : _e, _f = _b.missingTranslation, missingTranslation = _f === void 0 ? null : _f, preserveWhitespaces = _b.preserveWhitespaces, strictInjectionParameters = _b.strictInjectionParameters;\n        this.defaultEncapsulation = defaultEncapsulation;\n        this.useJit = !!useJit;\n        this.jitDevMode = !!jitDevMode;\n        this.missingTranslation = missingTranslation;\n        this.preserveWhitespaces = preserveWhitespacesDefault(noUndefined(preserveWhitespaces));\n        this.strictInjectionParameters = strictInjectionParameters === true;\n    }\n    return CompilerConfig;\n}());\nfunction preserveWhitespacesDefault(preserveWhitespacesOption, defaultSetting) {\n    if (defaultSetting === void 0) { defaultSetting = false; }\n    return preserveWhitespacesOption === null ? defaultSetting : preserveWhitespacesOption;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A token representing the a reference to a static type.\n *\n * This token is unique for a filePath and name and can be used as a hash table key.\n */\nvar StaticSymbol = /** @class */ (function () {\n    function StaticSymbol(filePath, name, members) {\n        this.filePath = filePath;\n        this.name = name;\n        this.members = members;\n    }\n    StaticSymbol.prototype.assertNoMembers = function () {\n        if (this.members.length) {\n            throw new Error(\"Illegal state: symbol without members expected, but got \" + JSON.stringify(this) + \".\");\n        }\n    };\n    return StaticSymbol;\n}());\n/**\n * A cache of static symbol used by the StaticReflector to return the same symbol for the\n * same symbol values.\n */\nvar StaticSymbolCache = /** @class */ (function () {\n    function StaticSymbolCache() {\n        this.cache = new Map();\n    }\n    StaticSymbolCache.prototype.get = function (declarationFile, name, members) {\n        members = members || [];\n        var memberSuffix = members.length ? \".\" + members.join('.') : '';\n        var key = \"\\\"\" + declarationFile + \"\\\".\" + name + memberSuffix;\n        var result = this.cache.get(key);\n        if (!result) {\n            result = new StaticSymbol(declarationFile, name, members);\n            this.cache.set(key, result);\n        }\n        return result;\n    };\n    return StaticSymbolCache;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// group 0: \"[prop] or (event) or @trigger\"\n// group 1: \"prop\" from \"[prop]\"\n// group 2: \"event\" from \"(event)\"\n// group 3: \"@trigger\" from \"@trigger\"\nvar HOST_REG_EXP = /^(?:(?:\\[([^\\]]+)\\])|(?:\\(([^\\)]+)\\)))|(\\@[-\\w]+)$/;\nfunction sanitizeIdentifier(name) {\n    return name.replace(/\\W/g, '_');\n}\nvar _anonymousTypeIndex = 0;\nfunction identifierName(compileIdentifier) {\n    if (!compileIdentifier || !compileIdentifier.reference) {\n        return null;\n    }\n    var ref = compileIdentifier.reference;\n    if (ref instanceof StaticSymbol) {\n        return ref.name;\n    }\n    if (ref['__anonymousType']) {\n        return ref['__anonymousType'];\n    }\n    var identifier = stringify(ref);\n    if (identifier.indexOf('(') >= 0) {\n        // case: anonymous functions!\n        identifier = \"anonymous_\" + _anonymousTypeIndex++;\n        ref['__anonymousType'] = identifier;\n    }\n    else {\n        identifier = sanitizeIdentifier(identifier);\n    }\n    return identifier;\n}\n\nfunction viewClassName(compType, embeddedTemplateIndex) {\n    return \"View_\" + identifierName({ reference: compType }) + \"_\" + embeddedTemplateIndex;\n}\nfunction rendererTypeName(compType) {\n    return \"RenderType_\" + identifierName({ reference: compType });\n}\nfunction hostViewClassName(compType) {\n    return \"HostView_\" + identifierName({ reference: compType });\n}\nfunction componentFactoryName(compType) {\n    return identifierName({ reference: compType }) + \"NgFactory\";\n}\nvar CompileSummaryKind;\n(function (CompileSummaryKind) {\n    CompileSummaryKind[CompileSummaryKind[\"Pipe\"] = 0] = \"Pipe\";\n    CompileSummaryKind[CompileSummaryKind[\"Directive\"] = 1] = \"Directive\";\n    CompileSummaryKind[CompileSummaryKind[\"NgModule\"] = 2] = \"NgModule\";\n    CompileSummaryKind[CompileSummaryKind[\"Injectable\"] = 3] = \"Injectable\";\n})(CompileSummaryKind || (CompileSummaryKind = {}));\nfunction tokenName(token) {\n    return token.value != null ? sanitizeIdentifier(token.value) : identifierName(token.identifier);\n}\nfunction tokenReference(token) {\n    if (token.identifier != null) {\n        return token.identifier.reference;\n    }\n    else {\n        return token.value;\n    }\n}\n/**\n * Metadata about a stylesheet\n */\nvar CompileStylesheetMetadata = /** @class */ (function () {\n    function CompileStylesheetMetadata(_a) {\n        var _b = _a === void 0 ? {} : _a, moduleUrl = _b.moduleUrl, styles = _b.styles, styleUrls = _b.styleUrls;\n        this.moduleUrl = moduleUrl || null;\n        this.styles = _normalizeArray(styles);\n        this.styleUrls = _normalizeArray(styleUrls);\n    }\n    return CompileStylesheetMetadata;\n}());\n/**\n * Metadata regarding compilation of a template.\n */\nvar CompileTemplateMetadata = /** @class */ (function () {\n    function CompileTemplateMetadata(_a) {\n        var encapsulation = _a.encapsulation, template = _a.template, templateUrl = _a.templateUrl, htmlAst = _a.htmlAst, styles = _a.styles, styleUrls = _a.styleUrls, externalStylesheets = _a.externalStylesheets, animations = _a.animations, ngContentSelectors = _a.ngContentSelectors, interpolation = _a.interpolation, isInline = _a.isInline, preserveWhitespaces = _a.preserveWhitespaces;\n        this.encapsulation = encapsulation;\n        this.template = template;\n        this.templateUrl = templateUrl;\n        this.htmlAst = htmlAst;\n        this.styles = _normalizeArray(styles);\n        this.styleUrls = _normalizeArray(styleUrls);\n        this.externalStylesheets = _normalizeArray(externalStylesheets);\n        this.animations = animations ? flatten(animations) : [];\n        this.ngContentSelectors = ngContentSelectors || [];\n        if (interpolation && interpolation.length != 2) {\n            throw new Error(\"'interpolation' should have a start and an end symbol.\");\n        }\n        this.interpolation = interpolation;\n        this.isInline = isInline;\n        this.preserveWhitespaces = preserveWhitespaces;\n    }\n    CompileTemplateMetadata.prototype.toSummary = function () {\n        return {\n            ngContentSelectors: this.ngContentSelectors,\n            encapsulation: this.encapsulation,\n        };\n    };\n    return CompileTemplateMetadata;\n}());\n/**\n * Metadata regarding compilation of a directive.\n */\nvar CompileDirectiveMetadata = /** @class */ (function () {\n    function CompileDirectiveMetadata(_a) {\n        var isHost = _a.isHost, type = _a.type, isComponent = _a.isComponent, selector = _a.selector, exportAs = _a.exportAs, changeDetection = _a.changeDetection, inputs = _a.inputs, outputs = _a.outputs, hostListeners = _a.hostListeners, hostProperties = _a.hostProperties, hostAttributes = _a.hostAttributes, providers = _a.providers, viewProviders = _a.viewProviders, queries = _a.queries, guards = _a.guards, viewQueries = _a.viewQueries, entryComponents = _a.entryComponents, template = _a.template, componentViewType = _a.componentViewType, rendererType = _a.rendererType, componentFactory = _a.componentFactory;\n        this.isHost = !!isHost;\n        this.type = type;\n        this.isComponent = isComponent;\n        this.selector = selector;\n        this.exportAs = exportAs;\n        this.changeDetection = changeDetection;\n        this.inputs = inputs;\n        this.outputs = outputs;\n        this.hostListeners = hostListeners;\n        this.hostProperties = hostProperties;\n        this.hostAttributes = hostAttributes;\n        this.providers = _normalizeArray(providers);\n        this.viewProviders = _normalizeArray(viewProviders);\n        this.queries = _normalizeArray(queries);\n        this.guards = guards;\n        this.viewQueries = _normalizeArray(viewQueries);\n        this.entryComponents = _normalizeArray(entryComponents);\n        this.template = template;\n        this.componentViewType = componentViewType;\n        this.rendererType = rendererType;\n        this.componentFactory = componentFactory;\n    }\n    CompileDirectiveMetadata.create = function (_a) {\n        var isHost = _a.isHost, type = _a.type, isComponent = _a.isComponent, selector = _a.selector, exportAs = _a.exportAs, changeDetection = _a.changeDetection, inputs = _a.inputs, outputs = _a.outputs, host = _a.host, providers = _a.providers, viewProviders = _a.viewProviders, queries = _a.queries, guards = _a.guards, viewQueries = _a.viewQueries, entryComponents = _a.entryComponents, template = _a.template, componentViewType = _a.componentViewType, rendererType = _a.rendererType, componentFactory = _a.componentFactory;\n        var hostListeners = {};\n        var hostProperties = {};\n        var hostAttributes = {};\n        if (host != null) {\n            Object.keys(host).forEach(function (key) {\n                var value = host[key];\n                var matches = key.match(HOST_REG_EXP);\n                if (matches === null) {\n                    hostAttributes[key] = value;\n                }\n                else if (matches[1] != null) {\n                    hostProperties[matches[1]] = value;\n                }\n                else if (matches[2] != null) {\n                    hostListeners[matches[2]] = value;\n                }\n            });\n        }\n        var inputsMap = {};\n        if (inputs != null) {\n            inputs.forEach(function (bindConfig) {\n                // canonical syntax: `dirProp: elProp`\n                // if there is no `:`, use dirProp = elProp\n                var parts = splitAtColon(bindConfig, [bindConfig, bindConfig]);\n                inputsMap[parts[0]] = parts[1];\n            });\n        }\n        var outputsMap = {};\n        if (outputs != null) {\n            outputs.forEach(function (bindConfig) {\n                // canonical syntax: `dirProp: elProp`\n                // if there is no `:`, use dirProp = elProp\n                var parts = splitAtColon(bindConfig, [bindConfig, bindConfig]);\n                outputsMap[parts[0]] = parts[1];\n            });\n        }\n        return new CompileDirectiveMetadata({\n            isHost: isHost,\n            type: type,\n            isComponent: !!isComponent, selector: selector, exportAs: exportAs, changeDetection: changeDetection,\n            inputs: inputsMap,\n            outputs: outputsMap,\n            hostListeners: hostListeners,\n            hostProperties: hostProperties,\n            hostAttributes: hostAttributes,\n            providers: providers,\n            viewProviders: viewProviders,\n            queries: queries,\n            guards: guards,\n            viewQueries: viewQueries,\n            entryComponents: entryComponents,\n            template: template,\n            componentViewType: componentViewType,\n            rendererType: rendererType,\n            componentFactory: componentFactory,\n        });\n    };\n    CompileDirectiveMetadata.prototype.toSummary = function () {\n        return {\n            summaryKind: CompileSummaryKind.Directive,\n            type: this.type,\n            isComponent: this.isComponent,\n            selector: this.selector,\n            exportAs: this.exportAs,\n            inputs: this.inputs,\n            outputs: this.outputs,\n            hostListeners: this.hostListeners,\n            hostProperties: this.hostProperties,\n            hostAttributes: this.hostAttributes,\n            providers: this.providers,\n            viewProviders: this.viewProviders,\n            queries: this.queries,\n            guards: this.guards,\n            viewQueries: this.viewQueries,\n            entryComponents: this.entryComponents,\n            changeDetection: this.changeDetection,\n            template: this.template && this.template.toSummary(),\n            componentViewType: this.componentViewType,\n            rendererType: this.rendererType,\n            componentFactory: this.componentFactory\n        };\n    };\n    return CompileDirectiveMetadata;\n}());\nvar CompilePipeMetadata = /** @class */ (function () {\n    function CompilePipeMetadata(_a) {\n        var type = _a.type, name = _a.name, pure = _a.pure;\n        this.type = type;\n        this.name = name;\n        this.pure = !!pure;\n    }\n    CompilePipeMetadata.prototype.toSummary = function () {\n        return {\n            summaryKind: CompileSummaryKind.Pipe,\n            type: this.type,\n            name: this.name,\n            pure: this.pure\n        };\n    };\n    return CompilePipeMetadata;\n}());\n/**\n * Metadata regarding compilation of a module.\n */\nvar CompileNgModuleMetadata = /** @class */ (function () {\n    function CompileNgModuleMetadata(_a) {\n        var type = _a.type, providers = _a.providers, declaredDirectives = _a.declaredDirectives, exportedDirectives = _a.exportedDirectives, declaredPipes = _a.declaredPipes, exportedPipes = _a.exportedPipes, entryComponents = _a.entryComponents, bootstrapComponents = _a.bootstrapComponents, importedModules = _a.importedModules, exportedModules = _a.exportedModules, schemas = _a.schemas, transitiveModule = _a.transitiveModule, id = _a.id;\n        this.type = type || null;\n        this.declaredDirectives = _normalizeArray(declaredDirectives);\n        this.exportedDirectives = _normalizeArray(exportedDirectives);\n        this.declaredPipes = _normalizeArray(declaredPipes);\n        this.exportedPipes = _normalizeArray(exportedPipes);\n        this.providers = _normalizeArray(providers);\n        this.entryComponents = _normalizeArray(entryComponents);\n        this.bootstrapComponents = _normalizeArray(bootstrapComponents);\n        this.importedModules = _normalizeArray(importedModules);\n        this.exportedModules = _normalizeArray(exportedModules);\n        this.schemas = _normalizeArray(schemas);\n        this.id = id || null;\n        this.transitiveModule = transitiveModule || null;\n    }\n    CompileNgModuleMetadata.prototype.toSummary = function () {\n        var module = this.transitiveModule;\n        return {\n            summaryKind: CompileSummaryKind.NgModule,\n            type: this.type,\n            entryComponents: module.entryComponents,\n            providers: module.providers,\n            modules: module.modules,\n            exportedDirectives: module.exportedDirectives,\n            exportedPipes: module.exportedPipes\n        };\n    };\n    return CompileNgModuleMetadata;\n}());\nvar TransitiveCompileNgModuleMetadata = /** @class */ (function () {\n    function TransitiveCompileNgModuleMetadata() {\n        this.directivesSet = new Set();\n        this.directives = [];\n        this.exportedDirectivesSet = new Set();\n        this.exportedDirectives = [];\n        this.pipesSet = new Set();\n        this.pipes = [];\n        this.exportedPipesSet = new Set();\n        this.exportedPipes = [];\n        this.modulesSet = new Set();\n        this.modules = [];\n        this.entryComponentsSet = new Set();\n        this.entryComponents = [];\n        this.providers = [];\n    }\n    TransitiveCompileNgModuleMetadata.prototype.addProvider = function (provider, module) {\n        this.providers.push({ provider: provider, module: module });\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addDirective = function (id) {\n        if (!this.directivesSet.has(id.reference)) {\n            this.directivesSet.add(id.reference);\n            this.directives.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addExportedDirective = function (id) {\n        if (!this.exportedDirectivesSet.has(id.reference)) {\n            this.exportedDirectivesSet.add(id.reference);\n            this.exportedDirectives.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addPipe = function (id) {\n        if (!this.pipesSet.has(id.reference)) {\n            this.pipesSet.add(id.reference);\n            this.pipes.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addExportedPipe = function (id) {\n        if (!this.exportedPipesSet.has(id.reference)) {\n            this.exportedPipesSet.add(id.reference);\n            this.exportedPipes.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addModule = function (id) {\n        if (!this.modulesSet.has(id.reference)) {\n            this.modulesSet.add(id.reference);\n            this.modules.push(id);\n        }\n    };\n    TransitiveCompileNgModuleMetadata.prototype.addEntryComponent = function (ec) {\n        if (!this.entryComponentsSet.has(ec.componentType)) {\n            this.entryComponentsSet.add(ec.componentType);\n            this.entryComponents.push(ec);\n        }\n    };\n    return TransitiveCompileNgModuleMetadata;\n}());\nfunction _normalizeArray(obj) {\n    return obj || [];\n}\nvar ProviderMeta = /** @class */ (function () {\n    function ProviderMeta(token, _a) {\n        var useClass = _a.useClass, useValue = _a.useValue, useExisting = _a.useExisting, useFactory = _a.useFactory, deps = _a.deps, multi = _a.multi;\n        this.token = token;\n        this.useClass = useClass || null;\n        this.useValue = useValue;\n        this.useExisting = useExisting;\n        this.useFactory = useFactory || null;\n        this.dependencies = deps || null;\n        this.multi = !!multi;\n    }\n    return ProviderMeta;\n}());\nfunction flatten(list) {\n    return list.reduce(function (flat, item) {\n        var flatItem = Array.isArray(item) ? flatten(item) : item;\n        return flat.concat(flatItem);\n    }, []);\n}\nfunction jitSourceUrl(url) {\n    // Note: We need 3 \"/\" so that ng shows up as a separate domain\n    // in the chrome dev tools.\n    return url.replace(/(\\w+:\\/\\/[\\w:-]+)?(\\/+)?/, 'ng:///');\n}\nfunction templateSourceUrl(ngModuleType, compMeta, templateMeta) {\n    var url;\n    if (templateMeta.isInline) {\n        if (compMeta.type.reference instanceof StaticSymbol) {\n            // Note: a .ts file might contain multiple components with inline templates,\n            // so we need to give them unique urls, as these will be used for sourcemaps.\n            url = compMeta.type.reference.filePath + \".\" + compMeta.type.reference.name + \".html\";\n        }\n        else {\n            url = identifierName(ngModuleType) + \"/\" + identifierName(compMeta.type) + \".html\";\n        }\n    }\n    else {\n        url = templateMeta.templateUrl;\n    }\n    return compMeta.type.reference instanceof StaticSymbol ? url : jitSourceUrl(url);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A path is an ordered set of elements. Typically a path is to  a\n * particular offset in a source file. The head of the list is the top\n * most node. The tail is the node that contains the offset directly.\n *\n * For example, the expression `a + b + c` might have an ast that looks\n * like:\n *     +\n *    / \\\n *   a   +\n *      / \\\n *     b   c\n *\n * The path to the node at offset 9 would be `['+' at 1-10, '+' at 7-10,\n * 'c' at 9-10]` and the path the node at offset 1 would be\n * `['+' at 1-10, 'a' at 1-2]`.\n */\nvar AstPath = /** @class */ (function () {\n    function AstPath(path$$1, position) {\n        if (position === void 0) { position = -1; }\n        this.path = path$$1;\n        this.position = position;\n    }\n    Object.defineProperty(AstPath.prototype, \"empty\", {\n        get: function () { return !this.path || !this.path.length; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AstPath.prototype, \"head\", {\n        get: function () { return this.path[0]; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AstPath.prototype, \"tail\", {\n        get: function () { return this.path[this.path.length - 1]; },\n        enumerable: true,\n        configurable: true\n    });\n    AstPath.prototype.parentOf = function (node) {\n        return node && this.path[this.path.indexOf(node) - 1];\n    };\n    AstPath.prototype.childOf = function (node) { return this.path[this.path.indexOf(node) + 1]; };\n    AstPath.prototype.first = function (ctor) {\n        for (var i = this.path.length - 1; i >= 0; i--) {\n            var item = this.path[i];\n            if (item instanceof ctor)\n                return item;\n        }\n    };\n    AstPath.prototype.push = function (node) { this.path.push(node); };\n    AstPath.prototype.pop = function () { return this.path.pop(); };\n    return AstPath;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Text = /** @class */ (function () {\n    function Text(value, sourceSpan) {\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    Text.prototype.visit = function (visitor, context) { return visitor.visitText(this, context); };\n    return Text;\n}());\nvar Expansion = /** @class */ (function () {\n    function Expansion(switchValue, type, cases, sourceSpan, switchValueSourceSpan) {\n        this.switchValue = switchValue;\n        this.type = type;\n        this.cases = cases;\n        this.sourceSpan = sourceSpan;\n        this.switchValueSourceSpan = switchValueSourceSpan;\n    }\n    Expansion.prototype.visit = function (visitor, context) { return visitor.visitExpansion(this, context); };\n    return Expansion;\n}());\nvar ExpansionCase = /** @class */ (function () {\n    function ExpansionCase(value, expression, sourceSpan, valueSourceSpan, expSourceSpan) {\n        this.value = value;\n        this.expression = expression;\n        this.sourceSpan = sourceSpan;\n        this.valueSourceSpan = valueSourceSpan;\n        this.expSourceSpan = expSourceSpan;\n    }\n    ExpansionCase.prototype.visit = function (visitor, context) { return visitor.visitExpansionCase(this, context); };\n    return ExpansionCase;\n}());\nvar Attribute = /** @class */ (function () {\n    function Attribute(name, value, sourceSpan, valueSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n        this.valueSpan = valueSpan;\n    }\n    Attribute.prototype.visit = function (visitor, context) { return visitor.visitAttribute(this, context); };\n    return Attribute;\n}());\nvar Element = /** @class */ (function () {\n    function Element(name, attrs, children, sourceSpan, startSourceSpan, endSourceSpan) {\n        if (startSourceSpan === void 0) { startSourceSpan = null; }\n        if (endSourceSpan === void 0) { endSourceSpan = null; }\n        this.name = name;\n        this.attrs = attrs;\n        this.children = children;\n        this.sourceSpan = sourceSpan;\n        this.startSourceSpan = startSourceSpan;\n        this.endSourceSpan = endSourceSpan;\n    }\n    Element.prototype.visit = function (visitor, context) { return visitor.visitElement(this, context); };\n    return Element;\n}());\nvar Comment = /** @class */ (function () {\n    function Comment(value, sourceSpan) {\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    Comment.prototype.visit = function (visitor, context) { return visitor.visitComment(this, context); };\n    return Comment;\n}());\nfunction visitAll(visitor, nodes, context) {\n    if (context === void 0) { context = null; }\n    var result = [];\n    var visit = visitor.visit ?\n        function (ast) { return visitor.visit(ast, context) || ast.visit(visitor, context); } :\n        function (ast) { return ast.visit(visitor, context); };\n    nodes.forEach(function (ast) {\n        var astResult = visit(ast);\n        if (astResult) {\n            result.push(astResult);\n        }\n    });\n    return result;\n}\nvar RecursiveVisitor = /** @class */ (function () {\n    function RecursiveVisitor() {\n    }\n    RecursiveVisitor.prototype.visitElement = function (ast, context) {\n        this.visitChildren(context, function (visit) {\n            visit(ast.attrs);\n            visit(ast.children);\n        });\n    };\n    RecursiveVisitor.prototype.visitAttribute = function (ast, context) { };\n    RecursiveVisitor.prototype.visitText = function (ast, context) { };\n    RecursiveVisitor.prototype.visitComment = function (ast, context) { };\n    RecursiveVisitor.prototype.visitExpansion = function (ast, context) {\n        return this.visitChildren(context, function (visit) { visit(ast.cases); });\n    };\n    RecursiveVisitor.prototype.visitExpansionCase = function (ast, context) { };\n    RecursiveVisitor.prototype.visitChildren = function (context, cb) {\n        var results = [];\n        var t = this;\n        function visit(children) {\n            if (children)\n                results.push(visitAll(t, children, context));\n        }\n        cb(visit);\n        return [].concat.apply([], results);\n    };\n    return RecursiveVisitor;\n}());\nfunction spanOf(ast) {\n    var start = ast.sourceSpan.start.offset;\n    var end = ast.sourceSpan.end.offset;\n    if (ast instanceof Element) {\n        if (ast.endSourceSpan) {\n            end = ast.endSourceSpan.end.offset;\n        }\n        else if (ast.children && ast.children.length) {\n            end = spanOf(ast.children[ast.children.length - 1]).end;\n        }\n    }\n    return { start: start, end: end };\n}\nfunction findNode(nodes, position) {\n    var path$$1 = [];\n    var visitor = new /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.visit = function (ast, context) {\n            var span = spanOf(ast);\n            if (span.start <= position && position < span.end) {\n                path$$1.push(ast);\n            }\n            else {\n                // Returning a value here will result in the children being skipped.\n                return true;\n            }\n        };\n        return class_1;\n    }(RecursiveVisitor));\n    visitAll(visitor, nodes);\n    return new AstPath(path$$1, position);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction assertArrayOfStrings(identifier, value) {\n    if (value == null) {\n        return;\n    }\n    if (!Array.isArray(value)) {\n        throw new Error(\"Expected '\" + identifier + \"' to be an array of strings.\");\n    }\n    for (var i = 0; i < value.length; i += 1) {\n        if (typeof value[i] !== 'string') {\n            throw new Error(\"Expected '\" + identifier + \"' to be an array of strings.\");\n        }\n    }\n}\nvar INTERPOLATION_BLACKLIST_REGEXPS = [\n    /^\\s*$/,\n    /[<>]/,\n    /^[{}]$/,\n    /&(#|[a-z])/i,\n    /^\\/\\//,\n];\nfunction assertInterpolationSymbols(identifier, value) {\n    if (value != null && !(Array.isArray(value) && value.length == 2)) {\n        throw new Error(\"Expected '\" + identifier + \"' to be an array, [start, end].\");\n    }\n    else if (value != null) {\n        var start_1 = value[0];\n        var end_1 = value[1];\n        // black list checking\n        INTERPOLATION_BLACKLIST_REGEXPS.forEach(function (regexp) {\n            if (regexp.test(start_1) || regexp.test(end_1)) {\n                throw new Error(\"['\" + start_1 + \"', '\" + end_1 + \"'] contains unusable interpolation symbol.\");\n            }\n        });\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar InterpolationConfig = /** @class */ (function () {\n    function InterpolationConfig(start, end) {\n        this.start = start;\n        this.end = end;\n    }\n    InterpolationConfig.fromArray = function (markers) {\n        if (!markers) {\n            return DEFAULT_INTERPOLATION_CONFIG;\n        }\n        assertInterpolationSymbols('interpolation', markers);\n        return new InterpolationConfig(markers[0], markers[1]);\n    };\n    return InterpolationConfig;\n}());\nvar DEFAULT_INTERPOLATION_CONFIG = new InterpolationConfig('{{', '}}');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar StyleWithImports = /** @class */ (function () {\n    function StyleWithImports(style, styleUrls) {\n        this.style = style;\n        this.styleUrls = styleUrls;\n    }\n    return StyleWithImports;\n}());\nfunction isStyleUrlResolvable(url) {\n    if (url == null || url.length === 0 || url[0] == '/')\n        return false;\n    var schemeMatch = url.match(URL_WITH_SCHEMA_REGEXP);\n    return schemeMatch === null || schemeMatch[1] == 'package' || schemeMatch[1] == 'asset';\n}\n/**\n * Rewrites stylesheets by resolving and removing the @import urls that\n * are either relative or don't have a `package:` scheme\n */\nfunction extractStyleUrls(resolver, baseUrl, cssText) {\n    var foundUrls = [];\n    var modifiedCssText = cssText.replace(CSS_STRIPPABLE_COMMENT_REGEXP, '')\n        .replace(CSS_IMPORT_REGEXP, function () {\n        var m = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            m[_i] = arguments[_i];\n        }\n        var url = m[1] || m[2];\n        if (!isStyleUrlResolvable(url)) {\n            // Do not attempt to resolve non-package absolute URLs with URI\n            // scheme\n            return m[0];\n        }\n        foundUrls.push(resolver.resolve(baseUrl, url));\n        return '';\n    });\n    return new StyleWithImports(modifiedCssText, foundUrls);\n}\nvar CSS_IMPORT_REGEXP = /@import\\s+(?:url\\()?\\s*(?:(?:['\"]([^'\"]*))|([^;\\)\\s]*))[^;]*;?/g;\nvar CSS_STRIPPABLE_COMMENT_REGEXP = /\\/\\*(?!#\\s*(?:sourceURL|sourceMappingURL)=)[\\s\\S]+?\\*\\//g;\nvar URL_WITH_SCHEMA_REGEXP = /^([^:/?#]+):/;\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar NG_CONTENT_SELECT_ATTR = 'select';\nvar LINK_ELEMENT = 'link';\nvar LINK_STYLE_REL_ATTR = 'rel';\nvar LINK_STYLE_HREF_ATTR = 'href';\nvar LINK_STYLE_REL_VALUE = 'stylesheet';\nvar STYLE_ELEMENT = 'style';\nvar SCRIPT_ELEMENT = 'script';\nvar NG_NON_BINDABLE_ATTR = 'ngNonBindable';\nvar NG_PROJECT_AS = 'ngProjectAs';\nfunction preparseElement(ast) {\n    var selectAttr = null;\n    var hrefAttr = null;\n    var relAttr = null;\n    var nonBindable = false;\n    var projectAs = '';\n    ast.attrs.forEach(function (attr) {\n        var lcAttrName = attr.name.toLowerCase();\n        if (lcAttrName == NG_CONTENT_SELECT_ATTR) {\n            selectAttr = attr.value;\n        }\n        else if (lcAttrName == LINK_STYLE_HREF_ATTR) {\n            hrefAttr = attr.value;\n        }\n        else if (lcAttrName == LINK_STYLE_REL_ATTR) {\n            relAttr = attr.value;\n        }\n        else if (attr.name == NG_NON_BINDABLE_ATTR) {\n            nonBindable = true;\n        }\n        else if (attr.name == NG_PROJECT_AS) {\n            if (attr.value.length > 0) {\n                projectAs = attr.value;\n            }\n        }\n    });\n    selectAttr = normalizeNgContentSelect(selectAttr);\n    var nodeName = ast.name.toLowerCase();\n    var type = PreparsedElementType.OTHER;\n    if (isNgContent(nodeName)) {\n        type = PreparsedElementType.NG_CONTENT;\n    }\n    else if (nodeName == STYLE_ELEMENT) {\n        type = PreparsedElementType.STYLE;\n    }\n    else if (nodeName == SCRIPT_ELEMENT) {\n        type = PreparsedElementType.SCRIPT;\n    }\n    else if (nodeName == LINK_ELEMENT && relAttr == LINK_STYLE_REL_VALUE) {\n        type = PreparsedElementType.STYLESHEET;\n    }\n    return new PreparsedElement(type, selectAttr, hrefAttr, nonBindable, projectAs);\n}\nvar PreparsedElementType;\n(function (PreparsedElementType) {\n    PreparsedElementType[PreparsedElementType[\"NG_CONTENT\"] = 0] = \"NG_CONTENT\";\n    PreparsedElementType[PreparsedElementType[\"STYLE\"] = 1] = \"STYLE\";\n    PreparsedElementType[PreparsedElementType[\"STYLESHEET\"] = 2] = \"STYLESHEET\";\n    PreparsedElementType[PreparsedElementType[\"SCRIPT\"] = 3] = \"SCRIPT\";\n    PreparsedElementType[PreparsedElementType[\"OTHER\"] = 4] = \"OTHER\";\n})(PreparsedElementType || (PreparsedElementType = {}));\nvar PreparsedElement = /** @class */ (function () {\n    function PreparsedElement(type, selectAttr, hrefAttr, nonBindable, projectAs) {\n        this.type = type;\n        this.selectAttr = selectAttr;\n        this.hrefAttr = hrefAttr;\n        this.nonBindable = nonBindable;\n        this.projectAs = projectAs;\n    }\n    return PreparsedElement;\n}());\nfunction normalizeNgContentSelect(selectAttr) {\n    if (selectAttr === null || selectAttr.length === 0) {\n        return '*';\n    }\n    return selectAttr;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DirectiveNormalizer = /** @class */ (function () {\n    function DirectiveNormalizer(_resourceLoader, _urlResolver, _htmlParser, _config) {\n        this._resourceLoader = _resourceLoader;\n        this._urlResolver = _urlResolver;\n        this._htmlParser = _htmlParser;\n        this._config = _config;\n        this._resourceLoaderCache = new Map();\n    }\n    DirectiveNormalizer.prototype.clearCache = function () { this._resourceLoaderCache.clear(); };\n    DirectiveNormalizer.prototype.clearCacheFor = function (normalizedDirective) {\n        var _this = this;\n        if (!normalizedDirective.isComponent) {\n            return;\n        }\n        var template = normalizedDirective.template;\n        this._resourceLoaderCache.delete(template.templateUrl);\n        template.externalStylesheets.forEach(function (stylesheet) { _this._resourceLoaderCache.delete(stylesheet.moduleUrl); });\n    };\n    DirectiveNormalizer.prototype._fetch = function (url) {\n        var result = this._resourceLoaderCache.get(url);\n        if (!result) {\n            result = this._resourceLoader.get(url);\n            this._resourceLoaderCache.set(url, result);\n        }\n        return result;\n    };\n    DirectiveNormalizer.prototype.normalizeTemplate = function (prenormData) {\n        var _this = this;\n        if (isDefined(prenormData.template)) {\n            if (isDefined(prenormData.templateUrl)) {\n                throw syntaxError(\"'\" + stringify(prenormData.componentType) + \"' component cannot define both template and templateUrl\");\n            }\n            if (typeof prenormData.template !== 'string') {\n                throw syntaxError(\"The template specified for component \" + stringify(prenormData.componentType) + \" is not a string\");\n            }\n        }\n        else if (isDefined(prenormData.templateUrl)) {\n            if (typeof prenormData.templateUrl !== 'string') {\n                throw syntaxError(\"The templateUrl specified for component \" + stringify(prenormData.componentType) + \" is not a string\");\n            }\n        }\n        else {\n            throw syntaxError(\"No template specified for component \" + stringify(prenormData.componentType));\n        }\n        if (isDefined(prenormData.preserveWhitespaces) &&\n            typeof prenormData.preserveWhitespaces !== 'boolean') {\n            throw syntaxError(\"The preserveWhitespaces option for component \" + stringify(prenormData.componentType) + \" must be a boolean\");\n        }\n        return SyncAsync.then(this._preParseTemplate(prenormData), function (preparsedTemplate) { return _this._normalizeTemplateMetadata(prenormData, preparsedTemplate); });\n    };\n    DirectiveNormalizer.prototype._preParseTemplate = function (prenomData) {\n        var _this = this;\n        var template;\n        var templateUrl;\n        if (prenomData.template != null) {\n            template = prenomData.template;\n            templateUrl = prenomData.moduleUrl;\n        }\n        else {\n            templateUrl = this._urlResolver.resolve(prenomData.moduleUrl, prenomData.templateUrl);\n            template = this._fetch(templateUrl);\n        }\n        return SyncAsync.then(template, function (template) { return _this._preparseLoadedTemplate(prenomData, template, templateUrl); });\n    };\n    DirectiveNormalizer.prototype._preparseLoadedTemplate = function (prenormData, template, templateAbsUrl) {\n        var isInline = !!prenormData.template;\n        var interpolationConfig = InterpolationConfig.fromArray(prenormData.interpolation);\n        var rootNodesAndErrors = this._htmlParser.parse(template, templateSourceUrl({ reference: prenormData.ngModuleType }, { type: { reference: prenormData.componentType } }, { isInline: isInline, templateUrl: templateAbsUrl }), true, interpolationConfig);\n        if (rootNodesAndErrors.errors.length > 0) {\n            var errorString = rootNodesAndErrors.errors.join('\\n');\n            throw syntaxError(\"Template parse errors:\\n\" + errorString);\n        }\n        var templateMetadataStyles = this._normalizeStylesheet(new CompileStylesheetMetadata({ styles: prenormData.styles, moduleUrl: prenormData.moduleUrl }));\n        var visitor = new TemplatePreparseVisitor();\n        visitAll(visitor, rootNodesAndErrors.rootNodes);\n        var templateStyles = this._normalizeStylesheet(new CompileStylesheetMetadata({ styles: visitor.styles, styleUrls: visitor.styleUrls, moduleUrl: templateAbsUrl }));\n        var styles = templateMetadataStyles.styles.concat(templateStyles.styles);\n        var inlineStyleUrls = templateMetadataStyles.styleUrls.concat(templateStyles.styleUrls);\n        var styleUrls = this\n            ._normalizeStylesheet(new CompileStylesheetMetadata({ styleUrls: prenormData.styleUrls, moduleUrl: prenormData.moduleUrl }))\n            .styleUrls;\n        return {\n            template: template,\n            templateUrl: templateAbsUrl, isInline: isInline,\n            htmlAst: rootNodesAndErrors, styles: styles, inlineStyleUrls: inlineStyleUrls, styleUrls: styleUrls,\n            ngContentSelectors: visitor.ngContentSelectors,\n        };\n    };\n    DirectiveNormalizer.prototype._normalizeTemplateMetadata = function (prenormData, preparsedTemplate) {\n        var _this = this;\n        return SyncAsync.then(this._loadMissingExternalStylesheets(preparsedTemplate.styleUrls.concat(preparsedTemplate.inlineStyleUrls)), function (externalStylesheets) { return _this._normalizeLoadedTemplateMetadata(prenormData, preparsedTemplate, externalStylesheets); });\n    };\n    DirectiveNormalizer.prototype._normalizeLoadedTemplateMetadata = function (prenormData, preparsedTemplate, stylesheets) {\n        // Algorithm:\n        // - produce exactly 1 entry per original styleUrl in\n        // CompileTemplateMetadata.externalStylesheets with all styles inlined\n        // - inline all styles that are referenced by the template into CompileTemplateMetadata.styles.\n        // Reason: be able to determine how many stylesheets there are even without loading\n        // the template nor the stylesheets, so we can create a stub for TypeScript always synchronously\n        // (as resource loading may be async)\n        var _this = this;\n        var styles = __spread(preparsedTemplate.styles);\n        this._inlineStyles(preparsedTemplate.inlineStyleUrls, stylesheets, styles);\n        var styleUrls = preparsedTemplate.styleUrls;\n        var externalStylesheets = styleUrls.map(function (styleUrl) {\n            var stylesheet = stylesheets.get(styleUrl);\n            var styles = __spread(stylesheet.styles);\n            _this._inlineStyles(stylesheet.styleUrls, stylesheets, styles);\n            return new CompileStylesheetMetadata({ moduleUrl: styleUrl, styles: styles });\n        });\n        var encapsulation = prenormData.encapsulation;\n        if (encapsulation == null) {\n            encapsulation = this._config.defaultEncapsulation;\n        }\n        if (encapsulation === ViewEncapsulation.Emulated && styles.length === 0 &&\n            styleUrls.length === 0) {\n            encapsulation = ViewEncapsulation.None;\n        }\n        return new CompileTemplateMetadata({\n            encapsulation: encapsulation,\n            template: preparsedTemplate.template,\n            templateUrl: preparsedTemplate.templateUrl,\n            htmlAst: preparsedTemplate.htmlAst, styles: styles, styleUrls: styleUrls,\n            ngContentSelectors: preparsedTemplate.ngContentSelectors,\n            animations: prenormData.animations,\n            interpolation: prenormData.interpolation,\n            isInline: preparsedTemplate.isInline, externalStylesheets: externalStylesheets,\n            preserveWhitespaces: preserveWhitespacesDefault(prenormData.preserveWhitespaces, this._config.preserveWhitespaces),\n        });\n    };\n    DirectiveNormalizer.prototype._inlineStyles = function (styleUrls, stylesheets, targetStyles) {\n        var _this = this;\n        styleUrls.forEach(function (styleUrl) {\n            var stylesheet = stylesheets.get(styleUrl);\n            stylesheet.styles.forEach(function (style) { return targetStyles.push(style); });\n            _this._inlineStyles(stylesheet.styleUrls, stylesheets, targetStyles);\n        });\n    };\n    DirectiveNormalizer.prototype._loadMissingExternalStylesheets = function (styleUrls, loadedStylesheets) {\n        var _this = this;\n        if (loadedStylesheets === void 0) { loadedStylesheets = new Map(); }\n        return SyncAsync.then(SyncAsync.all(styleUrls.filter(function (styleUrl) { return !loadedStylesheets.has(styleUrl); })\n            .map(function (styleUrl) { return SyncAsync.then(_this._fetch(styleUrl), function (loadedStyle) {\n            var stylesheet = _this._normalizeStylesheet(new CompileStylesheetMetadata({ styles: [loadedStyle], moduleUrl: styleUrl }));\n            loadedStylesheets.set(styleUrl, stylesheet);\n            return _this._loadMissingExternalStylesheets(stylesheet.styleUrls, loadedStylesheets);\n        }); })), function (_) { return loadedStylesheets; });\n    };\n    DirectiveNormalizer.prototype._normalizeStylesheet = function (stylesheet) {\n        var _this = this;\n        var moduleUrl = stylesheet.moduleUrl;\n        var allStyleUrls = stylesheet.styleUrls.filter(isStyleUrlResolvable)\n            .map(function (url) { return _this._urlResolver.resolve(moduleUrl, url); });\n        var allStyles = stylesheet.styles.map(function (style) {\n            var styleWithImports = extractStyleUrls(_this._urlResolver, moduleUrl, style);\n            allStyleUrls.push.apply(allStyleUrls, __spread(styleWithImports.styleUrls));\n            return styleWithImports.style;\n        });\n        return new CompileStylesheetMetadata({ styles: allStyles, styleUrls: allStyleUrls, moduleUrl: moduleUrl });\n    };\n    return DirectiveNormalizer;\n}());\nvar TemplatePreparseVisitor = /** @class */ (function () {\n    function TemplatePreparseVisitor() {\n        this.ngContentSelectors = [];\n        this.styles = [];\n        this.styleUrls = [];\n        this.ngNonBindableStackCount = 0;\n    }\n    TemplatePreparseVisitor.prototype.visitElement = function (ast, context) {\n        var preparsedElement = preparseElement(ast);\n        switch (preparsedElement.type) {\n            case PreparsedElementType.NG_CONTENT:\n                if (this.ngNonBindableStackCount === 0) {\n                    this.ngContentSelectors.push(preparsedElement.selectAttr);\n                }\n                break;\n            case PreparsedElementType.STYLE:\n                var textContent_1 = '';\n                ast.children.forEach(function (child) {\n                    if (child instanceof Text) {\n                        textContent_1 += child.value;\n                    }\n                });\n                this.styles.push(textContent_1);\n                break;\n            case PreparsedElementType.STYLESHEET:\n                this.styleUrls.push(preparsedElement.hrefAttr);\n                break;\n            default:\n                break;\n        }\n        if (preparsedElement.nonBindable) {\n            this.ngNonBindableStackCount++;\n        }\n        visitAll(this, ast.children);\n        if (preparsedElement.nonBindable) {\n            this.ngNonBindableStackCount--;\n        }\n        return null;\n    };\n    TemplatePreparseVisitor.prototype.visitExpansion = function (ast, context) { visitAll(this, ast.cases); };\n    TemplatePreparseVisitor.prototype.visitExpansionCase = function (ast, context) {\n        visitAll(this, ast.expression);\n    };\n    TemplatePreparseVisitor.prototype.visitComment = function (ast, context) { return null; };\n    TemplatePreparseVisitor.prototype.visitAttribute = function (ast, context) { return null; };\n    TemplatePreparseVisitor.prototype.visitText = function (ast, context) { return null; };\n    return TemplatePreparseVisitor;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar QUERY_METADATA_IDENTIFIERS = [\n    createViewChild,\n    createViewChildren,\n    createContentChild,\n    createContentChildren,\n];\n/*\n * Resolve a `Type` for {@link Directive}.\n *\n * This interface can be overridden by the application developer to create custom behavior.\n *\n * See {@link Compiler}\n */\nvar DirectiveResolver = /** @class */ (function () {\n    function DirectiveResolver(_reflector) {\n        this._reflector = _reflector;\n    }\n    DirectiveResolver.prototype.isDirective = function (type) {\n        var typeMetadata = this._reflector.annotations(resolveForwardRef(type));\n        return typeMetadata && typeMetadata.some(isDirectiveMetadata);\n    };\n    DirectiveResolver.prototype.resolve = function (type, throwIfNotFound) {\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var typeMetadata = this._reflector.annotations(resolveForwardRef(type));\n        if (typeMetadata) {\n            var metadata = findLast(typeMetadata, isDirectiveMetadata);\n            if (metadata) {\n                var propertyMetadata = this._reflector.propMetadata(type);\n                var guards = this._reflector.guards(type);\n                return this._mergeWithPropertyMetadata(metadata, propertyMetadata, guards, type);\n            }\n        }\n        if (throwIfNotFound) {\n            throw new Error(\"No Directive annotation found on \" + stringify(type));\n        }\n        return null;\n    };\n    DirectiveResolver.prototype._mergeWithPropertyMetadata = function (dm, propertyMetadata, guards, directiveType) {\n        var inputs = [];\n        var outputs = [];\n        var host = {};\n        var queries = {};\n        Object.keys(propertyMetadata).forEach(function (propName) {\n            var input = findLast(propertyMetadata[propName], function (a) { return createInput.isTypeOf(a); });\n            if (input) {\n                if (input.bindingPropertyName) {\n                    inputs.push(propName + \": \" + input.bindingPropertyName);\n                }\n                else {\n                    inputs.push(propName);\n                }\n            }\n            var output = findLast(propertyMetadata[propName], function (a) { return createOutput.isTypeOf(a); });\n            if (output) {\n                if (output.bindingPropertyName) {\n                    outputs.push(propName + \": \" + output.bindingPropertyName);\n                }\n                else {\n                    outputs.push(propName);\n                }\n            }\n            var hostBindings = propertyMetadata[propName].filter(function (a) { return createHostBinding.isTypeOf(a); });\n            hostBindings.forEach(function (hostBinding) {\n                if (hostBinding.hostPropertyName) {\n                    var startWith = hostBinding.hostPropertyName[0];\n                    if (startWith === '(') {\n                        throw new Error(\"@HostBinding can not bind to events. Use @HostListener instead.\");\n                    }\n                    else if (startWith === '[') {\n                        throw new Error(\"@HostBinding parameter should be a property name, 'class.<name>', or 'attr.<name>'.\");\n                    }\n                    host[\"[\" + hostBinding.hostPropertyName + \"]\"] = propName;\n                }\n                else {\n                    host[\"[\" + propName + \"]\"] = propName;\n                }\n            });\n            var hostListeners = propertyMetadata[propName].filter(function (a) { return createHostListener.isTypeOf(a); });\n            hostListeners.forEach(function (hostListener) {\n                var args = hostListener.args || [];\n                host[\"(\" + hostListener.eventName + \")\"] = propName + \"(\" + args.join(',') + \")\";\n            });\n            var query = findLast(propertyMetadata[propName], function (a) { return QUERY_METADATA_IDENTIFIERS.some(function (i) { return i.isTypeOf(a); }); });\n            if (query) {\n                queries[propName] = query;\n            }\n        });\n        return this._merge(dm, inputs, outputs, host, queries, guards, directiveType);\n    };\n    DirectiveResolver.prototype._extractPublicName = function (def) { return splitAtColon(def, [null, def])[1].trim(); };\n    DirectiveResolver.prototype._dedupeBindings = function (bindings) {\n        var names = new Set();\n        var publicNames = new Set();\n        var reversedResult = [];\n        // go last to first to allow later entries to overwrite previous entries\n        for (var i = bindings.length - 1; i >= 0; i--) {\n            var binding = bindings[i];\n            var name_1 = this._extractPublicName(binding);\n            publicNames.add(name_1);\n            if (!names.has(name_1)) {\n                names.add(name_1);\n                reversedResult.push(binding);\n            }\n        }\n        return reversedResult.reverse();\n    };\n    DirectiveResolver.prototype._merge = function (directive, inputs, outputs, host, queries, guards, directiveType) {\n        var mergedInputs = this._dedupeBindings(directive.inputs ? directive.inputs.concat(inputs) : inputs);\n        var mergedOutputs = this._dedupeBindings(directive.outputs ? directive.outputs.concat(outputs) : outputs);\n        var mergedHost = directive.host ? __assign({}, directive.host, host) : host;\n        var mergedQueries = directive.queries ? __assign({}, directive.queries, queries) : queries;\n        if (createComponent.isTypeOf(directive)) {\n            var comp = directive;\n            return createComponent({\n                selector: comp.selector,\n                inputs: mergedInputs,\n                outputs: mergedOutputs,\n                host: mergedHost,\n                exportAs: comp.exportAs,\n                moduleId: comp.moduleId,\n                queries: mergedQueries,\n                changeDetection: comp.changeDetection,\n                providers: comp.providers,\n                viewProviders: comp.viewProviders,\n                entryComponents: comp.entryComponents,\n                template: comp.template,\n                templateUrl: comp.templateUrl,\n                styles: comp.styles,\n                styleUrls: comp.styleUrls,\n                encapsulation: comp.encapsulation,\n                animations: comp.animations,\n                interpolation: comp.interpolation,\n                preserveWhitespaces: directive.preserveWhitespaces,\n            });\n        }\n        else {\n            return createDirective({\n                selector: directive.selector,\n                inputs: mergedInputs,\n                outputs: mergedOutputs,\n                host: mergedHost,\n                exportAs: directive.exportAs,\n                queries: mergedQueries,\n                providers: directive.providers, guards: guards\n            });\n        }\n    };\n    return DirectiveResolver;\n}());\nfunction isDirectiveMetadata(type) {\n    return createDirective.isTypeOf(type) || createComponent.isTypeOf(type);\n}\nfunction findLast(arr, condition) {\n    for (var i = arr.length - 1; i >= 0; i--) {\n        if (condition(arr[i])) {\n            return arr[i];\n        }\n    }\n    return null;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar $EOF = 0;\nvar $TAB = 9;\nvar $LF = 10;\nvar $VTAB = 11;\nvar $FF = 12;\nvar $CR = 13;\nvar $SPACE = 32;\nvar $BANG = 33;\nvar $DQ = 34;\nvar $HASH = 35;\nvar $$ = 36;\nvar $PERCENT = 37;\nvar $AMPERSAND = 38;\nvar $SQ = 39;\nvar $LPAREN = 40;\nvar $RPAREN = 41;\nvar $STAR = 42;\nvar $PLUS = 43;\nvar $COMMA = 44;\nvar $MINUS = 45;\nvar $PERIOD = 46;\nvar $SLASH = 47;\nvar $COLON = 58;\nvar $SEMICOLON = 59;\nvar $LT = 60;\nvar $EQ = 61;\nvar $GT = 62;\nvar $QUESTION = 63;\nvar $0 = 48;\nvar $9 = 57;\nvar $A = 65;\nvar $E = 69;\nvar $F = 70;\nvar $X = 88;\nvar $Z = 90;\nvar $LBRACKET = 91;\nvar $BACKSLASH = 92;\nvar $RBRACKET = 93;\nvar $CARET = 94;\nvar $_ = 95;\nvar $a = 97;\nvar $e = 101;\nvar $f = 102;\nvar $n = 110;\nvar $r = 114;\nvar $t = 116;\nvar $u = 117;\nvar $v = 118;\nvar $x = 120;\nvar $z = 122;\nvar $LBRACE = 123;\nvar $BAR = 124;\nvar $RBRACE = 125;\nvar $NBSP = 160;\n\n\n\nvar $BT = 96;\nfunction isWhitespace(code) {\n    return (code >= $TAB && code <= $SPACE) || (code == $NBSP);\n}\nfunction isDigit(code) {\n    return $0 <= code && code <= $9;\n}\nfunction isAsciiLetter(code) {\n    return code >= $a && code <= $z || code >= $A && code <= $Z;\n}\nfunction isAsciiHexDigit(code) {\n    return code >= $a && code <= $f || code >= $A && code <= $F || isDigit(code);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TokenType;\n(function (TokenType) {\n    TokenType[TokenType[\"Character\"] = 0] = \"Character\";\n    TokenType[TokenType[\"Identifier\"] = 1] = \"Identifier\";\n    TokenType[TokenType[\"Keyword\"] = 2] = \"Keyword\";\n    TokenType[TokenType[\"String\"] = 3] = \"String\";\n    TokenType[TokenType[\"Operator\"] = 4] = \"Operator\";\n    TokenType[TokenType[\"Number\"] = 5] = \"Number\";\n    TokenType[TokenType[\"Error\"] = 6] = \"Error\";\n})(TokenType || (TokenType = {}));\nvar KEYWORDS = ['var', 'let', 'as', 'null', 'undefined', 'true', 'false', 'if', 'else', 'this'];\nvar Lexer = /** @class */ (function () {\n    function Lexer() {\n    }\n    Lexer.prototype.tokenize = function (text) {\n        var scanner = new _Scanner(text);\n        var tokens = [];\n        var token = scanner.scanToken();\n        while (token != null) {\n            tokens.push(token);\n            token = scanner.scanToken();\n        }\n        return tokens;\n    };\n    return Lexer;\n}());\nvar Token = /** @class */ (function () {\n    function Token(index, type, numValue, strValue) {\n        this.index = index;\n        this.type = type;\n        this.numValue = numValue;\n        this.strValue = strValue;\n    }\n    Token.prototype.isCharacter = function (code) {\n        return this.type == TokenType.Character && this.numValue == code;\n    };\n    Token.prototype.isNumber = function () { return this.type == TokenType.Number; };\n    Token.prototype.isString = function () { return this.type == TokenType.String; };\n    Token.prototype.isOperator = function (operater) {\n        return this.type == TokenType.Operator && this.strValue == operater;\n    };\n    Token.prototype.isIdentifier = function () { return this.type == TokenType.Identifier; };\n    Token.prototype.isKeyword = function () { return this.type == TokenType.Keyword; };\n    Token.prototype.isKeywordLet = function () { return this.type == TokenType.Keyword && this.strValue == 'let'; };\n    Token.prototype.isKeywordAs = function () { return this.type == TokenType.Keyword && this.strValue == 'as'; };\n    Token.prototype.isKeywordNull = function () { return this.type == TokenType.Keyword && this.strValue == 'null'; };\n    Token.prototype.isKeywordUndefined = function () {\n        return this.type == TokenType.Keyword && this.strValue == 'undefined';\n    };\n    Token.prototype.isKeywordTrue = function () { return this.type == TokenType.Keyword && this.strValue == 'true'; };\n    Token.prototype.isKeywordFalse = function () { return this.type == TokenType.Keyword && this.strValue == 'false'; };\n    Token.prototype.isKeywordThis = function () { return this.type == TokenType.Keyword && this.strValue == 'this'; };\n    Token.prototype.isError = function () { return this.type == TokenType.Error; };\n    Token.prototype.toNumber = function () { return this.type == TokenType.Number ? this.numValue : -1; };\n    Token.prototype.toString = function () {\n        switch (this.type) {\n            case TokenType.Character:\n            case TokenType.Identifier:\n            case TokenType.Keyword:\n            case TokenType.Operator:\n            case TokenType.String:\n            case TokenType.Error:\n                return this.strValue;\n            case TokenType.Number:\n                return this.numValue.toString();\n            default:\n                return null;\n        }\n    };\n    return Token;\n}());\nfunction newCharacterToken(index, code) {\n    return new Token(index, TokenType.Character, code, String.fromCharCode(code));\n}\nfunction newIdentifierToken(index, text) {\n    return new Token(index, TokenType.Identifier, 0, text);\n}\nfunction newKeywordToken(index, text) {\n    return new Token(index, TokenType.Keyword, 0, text);\n}\nfunction newOperatorToken(index, text) {\n    return new Token(index, TokenType.Operator, 0, text);\n}\nfunction newStringToken(index, text) {\n    return new Token(index, TokenType.String, 0, text);\n}\nfunction newNumberToken(index, n) {\n    return new Token(index, TokenType.Number, n, '');\n}\nfunction newErrorToken(index, message) {\n    return new Token(index, TokenType.Error, 0, message);\n}\nvar EOF = new Token(-1, TokenType.Character, 0, '');\nvar _Scanner = /** @class */ (function () {\n    function _Scanner(input) {\n        this.input = input;\n        this.peek = 0;\n        this.index = -1;\n        this.length = input.length;\n        this.advance();\n    }\n    _Scanner.prototype.advance = function () {\n        this.peek = ++this.index >= this.length ? $EOF : this.input.charCodeAt(this.index);\n    };\n    _Scanner.prototype.scanToken = function () {\n        var input = this.input, length = this.length;\n        var peek = this.peek, index = this.index;\n        // Skip whitespace.\n        while (peek <= $SPACE) {\n            if (++index >= length) {\n                peek = $EOF;\n                break;\n            }\n            else {\n                peek = input.charCodeAt(index);\n            }\n        }\n        this.peek = peek;\n        this.index = index;\n        if (index >= length) {\n            return null;\n        }\n        // Handle identifiers and numbers.\n        if (isIdentifierStart(peek))\n            return this.scanIdentifier();\n        if (isDigit(peek))\n            return this.scanNumber(index);\n        var start = index;\n        switch (peek) {\n            case $PERIOD:\n                this.advance();\n                return isDigit(this.peek) ? this.scanNumber(start) :\n                    newCharacterToken(start, $PERIOD);\n            case $LPAREN:\n            case $RPAREN:\n            case $LBRACE:\n            case $RBRACE:\n            case $LBRACKET:\n            case $RBRACKET:\n            case $COMMA:\n            case $COLON:\n            case $SEMICOLON:\n                return this.scanCharacter(start, peek);\n            case $SQ:\n            case $DQ:\n                return this.scanString();\n            case $HASH:\n            case $PLUS:\n            case $MINUS:\n            case $STAR:\n            case $SLASH:\n            case $PERCENT:\n            case $CARET:\n                return this.scanOperator(start, String.fromCharCode(peek));\n            case $QUESTION:\n                return this.scanComplexOperator(start, '?', $PERIOD, '.');\n            case $LT:\n            case $GT:\n                return this.scanComplexOperator(start, String.fromCharCode(peek), $EQ, '=');\n            case $BANG:\n            case $EQ:\n                return this.scanComplexOperator(start, String.fromCharCode(peek), $EQ, '=', $EQ, '=');\n            case $AMPERSAND:\n                return this.scanComplexOperator(start, '&', $AMPERSAND, '&');\n            case $BAR:\n                return this.scanComplexOperator(start, '|', $BAR, '|');\n            case $NBSP:\n                while (isWhitespace(this.peek))\n                    this.advance();\n                return this.scanToken();\n        }\n        this.advance();\n        return this.error(\"Unexpected character [\" + String.fromCharCode(peek) + \"]\", 0);\n    };\n    _Scanner.prototype.scanCharacter = function (start, code) {\n        this.advance();\n        return newCharacterToken(start, code);\n    };\n    _Scanner.prototype.scanOperator = function (start, str) {\n        this.advance();\n        return newOperatorToken(start, str);\n    };\n    /**\n     * Tokenize a 2/3 char long operator\n     *\n     * @param start start index in the expression\n     * @param one first symbol (always part of the operator)\n     * @param twoCode code point for the second symbol\n     * @param two second symbol (part of the operator when the second code point matches)\n     * @param threeCode code point for the third symbol\n     * @param three third symbol (part of the operator when provided and matches source expression)\n     */\n    _Scanner.prototype.scanComplexOperator = function (start, one, twoCode, two, threeCode, three) {\n        this.advance();\n        var str = one;\n        if (this.peek == twoCode) {\n            this.advance();\n            str += two;\n        }\n        if (threeCode != null && this.peek == threeCode) {\n            this.advance();\n            str += three;\n        }\n        return newOperatorToken(start, str);\n    };\n    _Scanner.prototype.scanIdentifier = function () {\n        var start = this.index;\n        this.advance();\n        while (isIdentifierPart(this.peek))\n            this.advance();\n        var str = this.input.substring(start, this.index);\n        return KEYWORDS.indexOf(str) > -1 ? newKeywordToken(start, str) :\n            newIdentifierToken(start, str);\n    };\n    _Scanner.prototype.scanNumber = function (start) {\n        var simple = (this.index === start);\n        this.advance(); // Skip initial digit.\n        while (true) {\n            if (isDigit(this.peek)) {\n                // Do nothing.\n            }\n            else if (this.peek == $PERIOD) {\n                simple = false;\n            }\n            else if (isExponentStart(this.peek)) {\n                this.advance();\n                if (isExponentSign(this.peek))\n                    this.advance();\n                if (!isDigit(this.peek))\n                    return this.error('Invalid exponent', -1);\n                simple = false;\n            }\n            else {\n                break;\n            }\n            this.advance();\n        }\n        var str = this.input.substring(start, this.index);\n        var value = simple ? parseIntAutoRadix(str) : parseFloat(str);\n        return newNumberToken(start, value);\n    };\n    _Scanner.prototype.scanString = function () {\n        var start = this.index;\n        var quote = this.peek;\n        this.advance(); // Skip initial quote.\n        var buffer = '';\n        var marker = this.index;\n        var input = this.input;\n        while (this.peek != quote) {\n            if (this.peek == $BACKSLASH) {\n                buffer += input.substring(marker, this.index);\n                this.advance();\n                var unescapedCode = void 0;\n                // Workaround for TS2.1-introduced type strictness\n                this.peek = this.peek;\n                if (this.peek == $u) {\n                    // 4 character hex code for unicode character.\n                    var hex = input.substring(this.index + 1, this.index + 5);\n                    if (/^[0-9a-f]+$/i.test(hex)) {\n                        unescapedCode = parseInt(hex, 16);\n                    }\n                    else {\n                        return this.error(\"Invalid unicode escape [\\\\u\" + hex + \"]\", 0);\n                    }\n                    for (var i = 0; i < 5; i++) {\n                        this.advance();\n                    }\n                }\n                else {\n                    unescapedCode = unescape(this.peek);\n                    this.advance();\n                }\n                buffer += String.fromCharCode(unescapedCode);\n                marker = this.index;\n            }\n            else if (this.peek == $EOF) {\n                return this.error('Unterminated quote', 0);\n            }\n            else {\n                this.advance();\n            }\n        }\n        var last = input.substring(marker, this.index);\n        this.advance(); // Skip terminating quote.\n        return newStringToken(start, buffer + last);\n    };\n    _Scanner.prototype.error = function (message, offset) {\n        var position = this.index + offset;\n        return newErrorToken(position, \"Lexer Error: \" + message + \" at column \" + position + \" in expression [\" + this.input + \"]\");\n    };\n    return _Scanner;\n}());\nfunction isIdentifierStart(code) {\n    return ($a <= code && code <= $z) || ($A <= code && code <= $Z) ||\n        (code == $_) || (code == $$);\n}\nfunction isIdentifier(input) {\n    if (input.length == 0)\n        return false;\n    var scanner = new _Scanner(input);\n    if (!isIdentifierStart(scanner.peek))\n        return false;\n    scanner.advance();\n    while (scanner.peek !== $EOF) {\n        if (!isIdentifierPart(scanner.peek))\n            return false;\n        scanner.advance();\n    }\n    return true;\n}\nfunction isIdentifierPart(code) {\n    return isAsciiLetter(code) || isDigit(code) || (code == $_) ||\n        (code == $$);\n}\nfunction isExponentStart(code) {\n    return code == $e || code == $E;\n}\nfunction isExponentSign(code) {\n    return code == $MINUS || code == $PLUS;\n}\nfunction isQuote(code) {\n    return code === $SQ || code === $DQ || code === $BT;\n}\nfunction unescape(code) {\n    switch (code) {\n        case $n:\n            return $LF;\n        case $f:\n            return $FF;\n        case $r:\n            return $CR;\n        case $t:\n            return $TAB;\n        case $v:\n            return $VTAB;\n        default:\n            return code;\n    }\n}\nfunction parseIntAutoRadix(text) {\n    var result = parseInt(text);\n    if (isNaN(result)) {\n        throw new Error('Invalid integer literal when parsing ' + text);\n    }\n    return result;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ParserError = /** @class */ (function () {\n    function ParserError(message, input, errLocation, ctxLocation) {\n        this.input = input;\n        this.errLocation = errLocation;\n        this.ctxLocation = ctxLocation;\n        this.message = \"Parser Error: \" + message + \" \" + errLocation + \" [\" + input + \"] in \" + ctxLocation;\n    }\n    return ParserError;\n}());\nvar ParseSpan = /** @class */ (function () {\n    function ParseSpan(start, end) {\n        this.start = start;\n        this.end = end;\n    }\n    return ParseSpan;\n}());\nvar AST = /** @class */ (function () {\n    function AST(span) {\n        this.span = span;\n    }\n    AST.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return null;\n    };\n    AST.prototype.toString = function () { return 'AST'; };\n    return AST;\n}());\n/**\n * Represents a quoted expression of the form:\n *\n * quote = prefix `:` uninterpretedExpression\n * prefix = identifier\n * uninterpretedExpression = arbitrary string\n *\n * A quoted expression is meant to be pre-processed by an AST transformer that\n * converts it into another AST that no longer contains quoted expressions.\n * It is meant to allow third-party developers to extend Angular template\n * expression language. The `uninterpretedExpression` part of the quote is\n * therefore not interpreted by the Angular's own expression parser.\n */\nvar Quote = /** @class */ (function (_super) {\n    __extends(Quote, _super);\n    function Quote(span, prefix, uninterpretedExpression, location) {\n        var _this = _super.call(this, span) || this;\n        _this.prefix = prefix;\n        _this.uninterpretedExpression = uninterpretedExpression;\n        _this.location = location;\n        return _this;\n    }\n    Quote.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitQuote(this, context);\n    };\n    Quote.prototype.toString = function () { return 'Quote'; };\n    return Quote;\n}(AST));\nvar EmptyExpr = /** @class */ (function (_super) {\n    __extends(EmptyExpr, _super);\n    function EmptyExpr() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmptyExpr.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        // do nothing\n    };\n    return EmptyExpr;\n}(AST));\nvar ImplicitReceiver = /** @class */ (function (_super) {\n    __extends(ImplicitReceiver, _super);\n    function ImplicitReceiver() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ImplicitReceiver.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitImplicitReceiver(this, context);\n    };\n    return ImplicitReceiver;\n}(AST));\n/**\n * Multiple expressions separated by a semicolon.\n */\nvar Chain = /** @class */ (function (_super) {\n    __extends(Chain, _super);\n    function Chain(span, expressions) {\n        var _this = _super.call(this, span) || this;\n        _this.expressions = expressions;\n        return _this;\n    }\n    Chain.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitChain(this, context);\n    };\n    return Chain;\n}(AST));\nvar Conditional = /** @class */ (function (_super) {\n    __extends(Conditional, _super);\n    function Conditional(span, condition, trueExp, falseExp) {\n        var _this = _super.call(this, span) || this;\n        _this.condition = condition;\n        _this.trueExp = trueExp;\n        _this.falseExp = falseExp;\n        return _this;\n    }\n    Conditional.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitConditional(this, context);\n    };\n    return Conditional;\n}(AST));\nvar PropertyRead = /** @class */ (function (_super) {\n    __extends(PropertyRead, _super);\n    function PropertyRead(span, receiver, name) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        return _this;\n    }\n    PropertyRead.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitPropertyRead(this, context);\n    };\n    return PropertyRead;\n}(AST));\nvar PropertyWrite = /** @class */ (function (_super) {\n    __extends(PropertyWrite, _super);\n    function PropertyWrite(span, receiver, name, value) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        _this.value = value;\n        return _this;\n    }\n    PropertyWrite.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitPropertyWrite(this, context);\n    };\n    return PropertyWrite;\n}(AST));\nvar SafePropertyRead = /** @class */ (function (_super) {\n    __extends(SafePropertyRead, _super);\n    function SafePropertyRead(span, receiver, name) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        return _this;\n    }\n    SafePropertyRead.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitSafePropertyRead(this, context);\n    };\n    return SafePropertyRead;\n}(AST));\nvar KeyedRead = /** @class */ (function (_super) {\n    __extends(KeyedRead, _super);\n    function KeyedRead(span, obj, key) {\n        var _this = _super.call(this, span) || this;\n        _this.obj = obj;\n        _this.key = key;\n        return _this;\n    }\n    KeyedRead.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitKeyedRead(this, context);\n    };\n    return KeyedRead;\n}(AST));\nvar KeyedWrite = /** @class */ (function (_super) {\n    __extends(KeyedWrite, _super);\n    function KeyedWrite(span, obj, key, value) {\n        var _this = _super.call(this, span) || this;\n        _this.obj = obj;\n        _this.key = key;\n        _this.value = value;\n        return _this;\n    }\n    KeyedWrite.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitKeyedWrite(this, context);\n    };\n    return KeyedWrite;\n}(AST));\nvar BindingPipe = /** @class */ (function (_super) {\n    __extends(BindingPipe, _super);\n    function BindingPipe(span, exp, name, args) {\n        var _this = _super.call(this, span) || this;\n        _this.exp = exp;\n        _this.name = name;\n        _this.args = args;\n        return _this;\n    }\n    BindingPipe.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitPipe(this, context);\n    };\n    return BindingPipe;\n}(AST));\nvar LiteralPrimitive = /** @class */ (function (_super) {\n    __extends(LiteralPrimitive, _super);\n    function LiteralPrimitive(span, value) {\n        var _this = _super.call(this, span) || this;\n        _this.value = value;\n        return _this;\n    }\n    LiteralPrimitive.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitLiteralPrimitive(this, context);\n    };\n    return LiteralPrimitive;\n}(AST));\nvar LiteralArray = /** @class */ (function (_super) {\n    __extends(LiteralArray, _super);\n    function LiteralArray(span, expressions) {\n        var _this = _super.call(this, span) || this;\n        _this.expressions = expressions;\n        return _this;\n    }\n    LiteralArray.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitLiteralArray(this, context);\n    };\n    return LiteralArray;\n}(AST));\nvar LiteralMap = /** @class */ (function (_super) {\n    __extends(LiteralMap, _super);\n    function LiteralMap(span, keys, values) {\n        var _this = _super.call(this, span) || this;\n        _this.keys = keys;\n        _this.values = values;\n        return _this;\n    }\n    LiteralMap.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitLiteralMap(this, context);\n    };\n    return LiteralMap;\n}(AST));\nvar Interpolation = /** @class */ (function (_super) {\n    __extends(Interpolation, _super);\n    function Interpolation(span, strings, expressions) {\n        var _this = _super.call(this, span) || this;\n        _this.strings = strings;\n        _this.expressions = expressions;\n        return _this;\n    }\n    Interpolation.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitInterpolation(this, context);\n    };\n    return Interpolation;\n}(AST));\nvar Binary = /** @class */ (function (_super) {\n    __extends(Binary, _super);\n    function Binary(span, operation, left, right) {\n        var _this = _super.call(this, span) || this;\n        _this.operation = operation;\n        _this.left = left;\n        _this.right = right;\n        return _this;\n    }\n    Binary.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitBinary(this, context);\n    };\n    return Binary;\n}(AST));\nvar PrefixNot = /** @class */ (function (_super) {\n    __extends(PrefixNot, _super);\n    function PrefixNot(span, expression) {\n        var _this = _super.call(this, span) || this;\n        _this.expression = expression;\n        return _this;\n    }\n    PrefixNot.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitPrefixNot(this, context);\n    };\n    return PrefixNot;\n}(AST));\nvar NonNullAssert = /** @class */ (function (_super) {\n    __extends(NonNullAssert, _super);\n    function NonNullAssert(span, expression) {\n        var _this = _super.call(this, span) || this;\n        _this.expression = expression;\n        return _this;\n    }\n    NonNullAssert.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitNonNullAssert(this, context);\n    };\n    return NonNullAssert;\n}(AST));\nvar MethodCall = /** @class */ (function (_super) {\n    __extends(MethodCall, _super);\n    function MethodCall(span, receiver, name, args) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        _this.args = args;\n        return _this;\n    }\n    MethodCall.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitMethodCall(this, context);\n    };\n    return MethodCall;\n}(AST));\nvar SafeMethodCall = /** @class */ (function (_super) {\n    __extends(SafeMethodCall, _super);\n    function SafeMethodCall(span, receiver, name, args) {\n        var _this = _super.call(this, span) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        _this.args = args;\n        return _this;\n    }\n    SafeMethodCall.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitSafeMethodCall(this, context);\n    };\n    return SafeMethodCall;\n}(AST));\nvar FunctionCall = /** @class */ (function (_super) {\n    __extends(FunctionCall, _super);\n    function FunctionCall(span, target, args) {\n        var _this = _super.call(this, span) || this;\n        _this.target = target;\n        _this.args = args;\n        return _this;\n    }\n    FunctionCall.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return visitor.visitFunctionCall(this, context);\n    };\n    return FunctionCall;\n}(AST));\nvar ASTWithSource = /** @class */ (function (_super) {\n    __extends(ASTWithSource, _super);\n    function ASTWithSource(ast, source, location, errors) {\n        var _this = _super.call(this, new ParseSpan(0, source == null ? 0 : source.length)) || this;\n        _this.ast = ast;\n        _this.source = source;\n        _this.location = location;\n        _this.errors = errors;\n        return _this;\n    }\n    ASTWithSource.prototype.visit = function (visitor, context) {\n        if (context === void 0) { context = null; }\n        return this.ast.visit(visitor, context);\n    };\n    ASTWithSource.prototype.toString = function () { return this.source + \" in \" + this.location; };\n    return ASTWithSource;\n}(AST));\nvar TemplateBinding = /** @class */ (function () {\n    function TemplateBinding(span, key, keyIsVar, name, expression) {\n        this.span = span;\n        this.key = key;\n        this.keyIsVar = keyIsVar;\n        this.name = name;\n        this.expression = expression;\n    }\n    return TemplateBinding;\n}());\nvar NullAstVisitor = /** @class */ (function () {\n    function NullAstVisitor() {\n    }\n    NullAstVisitor.prototype.visitBinary = function (ast, context) { };\n    NullAstVisitor.prototype.visitChain = function (ast, context) { };\n    NullAstVisitor.prototype.visitConditional = function (ast, context) { };\n    NullAstVisitor.prototype.visitFunctionCall = function (ast, context) { };\n    NullAstVisitor.prototype.visitImplicitReceiver = function (ast, context) { };\n    NullAstVisitor.prototype.visitInterpolation = function (ast, context) { };\n    NullAstVisitor.prototype.visitKeyedRead = function (ast, context) { };\n    NullAstVisitor.prototype.visitKeyedWrite = function (ast, context) { };\n    NullAstVisitor.prototype.visitLiteralArray = function (ast, context) { };\n    NullAstVisitor.prototype.visitLiteralMap = function (ast, context) { };\n    NullAstVisitor.prototype.visitLiteralPrimitive = function (ast, context) { };\n    NullAstVisitor.prototype.visitMethodCall = function (ast, context) { };\n    NullAstVisitor.prototype.visitPipe = function (ast, context) { };\n    NullAstVisitor.prototype.visitPrefixNot = function (ast, context) { };\n    NullAstVisitor.prototype.visitNonNullAssert = function (ast, context) { };\n    NullAstVisitor.prototype.visitPropertyRead = function (ast, context) { };\n    NullAstVisitor.prototype.visitPropertyWrite = function (ast, context) { };\n    NullAstVisitor.prototype.visitQuote = function (ast, context) { };\n    NullAstVisitor.prototype.visitSafeMethodCall = function (ast, context) { };\n    NullAstVisitor.prototype.visitSafePropertyRead = function (ast, context) { };\n    return NullAstVisitor;\n}());\nvar RecursiveAstVisitor = /** @class */ (function () {\n    function RecursiveAstVisitor() {\n    }\n    RecursiveAstVisitor.prototype.visitBinary = function (ast, context) {\n        ast.left.visit(this);\n        ast.right.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitChain = function (ast, context) { return this.visitAll(ast.expressions, context); };\n    RecursiveAstVisitor.prototype.visitConditional = function (ast, context) {\n        ast.condition.visit(this);\n        ast.trueExp.visit(this);\n        ast.falseExp.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitPipe = function (ast, context) {\n        ast.exp.visit(this);\n        this.visitAll(ast.args, context);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitFunctionCall = function (ast, context) {\n        ast.target.visit(this);\n        this.visitAll(ast.args, context);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitImplicitReceiver = function (ast, context) { return null; };\n    RecursiveAstVisitor.prototype.visitInterpolation = function (ast, context) {\n        return this.visitAll(ast.expressions, context);\n    };\n    RecursiveAstVisitor.prototype.visitKeyedRead = function (ast, context) {\n        ast.obj.visit(this);\n        ast.key.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitKeyedWrite = function (ast, context) {\n        ast.obj.visit(this);\n        ast.key.visit(this);\n        ast.value.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitLiteralArray = function (ast, context) {\n        return this.visitAll(ast.expressions, context);\n    };\n    RecursiveAstVisitor.prototype.visitLiteralMap = function (ast, context) { return this.visitAll(ast.values, context); };\n    RecursiveAstVisitor.prototype.visitLiteralPrimitive = function (ast, context) { return null; };\n    RecursiveAstVisitor.prototype.visitMethodCall = function (ast, context) {\n        ast.receiver.visit(this);\n        return this.visitAll(ast.args, context);\n    };\n    RecursiveAstVisitor.prototype.visitPrefixNot = function (ast, context) {\n        ast.expression.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitNonNullAssert = function (ast, context) {\n        ast.expression.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitPropertyRead = function (ast, context) {\n        ast.receiver.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitPropertyWrite = function (ast, context) {\n        ast.receiver.visit(this);\n        ast.value.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitSafePropertyRead = function (ast, context) {\n        ast.receiver.visit(this);\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitSafeMethodCall = function (ast, context) {\n        ast.receiver.visit(this);\n        return this.visitAll(ast.args, context);\n    };\n    RecursiveAstVisitor.prototype.visitAll = function (asts, context) {\n        var _this = this;\n        asts.forEach(function (ast) { return ast.visit(_this, context); });\n        return null;\n    };\n    RecursiveAstVisitor.prototype.visitQuote = function (ast, context) { return null; };\n    return RecursiveAstVisitor;\n}());\nvar AstTransformer = /** @class */ (function () {\n    function AstTransformer() {\n    }\n    AstTransformer.prototype.visitImplicitReceiver = function (ast, context) { return ast; };\n    AstTransformer.prototype.visitInterpolation = function (ast, context) {\n        return new Interpolation(ast.span, ast.strings, this.visitAll(ast.expressions));\n    };\n    AstTransformer.prototype.visitLiteralPrimitive = function (ast, context) {\n        return new LiteralPrimitive(ast.span, ast.value);\n    };\n    AstTransformer.prototype.visitPropertyRead = function (ast, context) {\n        return new PropertyRead(ast.span, ast.receiver.visit(this), ast.name);\n    };\n    AstTransformer.prototype.visitPropertyWrite = function (ast, context) {\n        return new PropertyWrite(ast.span, ast.receiver.visit(this), ast.name, ast.value.visit(this));\n    };\n    AstTransformer.prototype.visitSafePropertyRead = function (ast, context) {\n        return new SafePropertyRead(ast.span, ast.receiver.visit(this), ast.name);\n    };\n    AstTransformer.prototype.visitMethodCall = function (ast, context) {\n        return new MethodCall(ast.span, ast.receiver.visit(this), ast.name, this.visitAll(ast.args));\n    };\n    AstTransformer.prototype.visitSafeMethodCall = function (ast, context) {\n        return new SafeMethodCall(ast.span, ast.receiver.visit(this), ast.name, this.visitAll(ast.args));\n    };\n    AstTransformer.prototype.visitFunctionCall = function (ast, context) {\n        return new FunctionCall(ast.span, ast.target.visit(this), this.visitAll(ast.args));\n    };\n    AstTransformer.prototype.visitLiteralArray = function (ast, context) {\n        return new LiteralArray(ast.span, this.visitAll(ast.expressions));\n    };\n    AstTransformer.prototype.visitLiteralMap = function (ast, context) {\n        return new LiteralMap(ast.span, ast.keys, this.visitAll(ast.values));\n    };\n    AstTransformer.prototype.visitBinary = function (ast, context) {\n        return new Binary(ast.span, ast.operation, ast.left.visit(this), ast.right.visit(this));\n    };\n    AstTransformer.prototype.visitPrefixNot = function (ast, context) {\n        return new PrefixNot(ast.span, ast.expression.visit(this));\n    };\n    AstTransformer.prototype.visitNonNullAssert = function (ast, context) {\n        return new NonNullAssert(ast.span, ast.expression.visit(this));\n    };\n    AstTransformer.prototype.visitConditional = function (ast, context) {\n        return new Conditional(ast.span, ast.condition.visit(this), ast.trueExp.visit(this), ast.falseExp.visit(this));\n    };\n    AstTransformer.prototype.visitPipe = function (ast, context) {\n        return new BindingPipe(ast.span, ast.exp.visit(this), ast.name, this.visitAll(ast.args));\n    };\n    AstTransformer.prototype.visitKeyedRead = function (ast, context) {\n        return new KeyedRead(ast.span, ast.obj.visit(this), ast.key.visit(this));\n    };\n    AstTransformer.prototype.visitKeyedWrite = function (ast, context) {\n        return new KeyedWrite(ast.span, ast.obj.visit(this), ast.key.visit(this), ast.value.visit(this));\n    };\n    AstTransformer.prototype.visitAll = function (asts) {\n        var res = new Array(asts.length);\n        for (var i = 0; i < asts.length; ++i) {\n            res[i] = asts[i].visit(this);\n        }\n        return res;\n    };\n    AstTransformer.prototype.visitChain = function (ast, context) {\n        return new Chain(ast.span, this.visitAll(ast.expressions));\n    };\n    AstTransformer.prototype.visitQuote = function (ast, context) {\n        return new Quote(ast.span, ast.prefix, ast.uninterpretedExpression, ast.location);\n    };\n    return AstTransformer;\n}());\n// A transformer that only creates new nodes if the transformer makes a change or\n// a change is made a child node.\nvar AstMemoryEfficientTransformer = /** @class */ (function () {\n    function AstMemoryEfficientTransformer() {\n    }\n    AstMemoryEfficientTransformer.prototype.visitImplicitReceiver = function (ast, context) { return ast; };\n    AstMemoryEfficientTransformer.prototype.visitInterpolation = function (ast, context) {\n        var expressions = this.visitAll(ast.expressions);\n        if (expressions !== ast.expressions)\n            return new Interpolation(ast.span, ast.strings, expressions);\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitLiteralPrimitive = function (ast, context) { return ast; };\n    AstMemoryEfficientTransformer.prototype.visitPropertyRead = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        if (receiver !== ast.receiver) {\n            return new PropertyRead(ast.span, receiver, ast.name);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitPropertyWrite = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        var value = ast.value.visit(this);\n        if (receiver !== ast.receiver || value !== ast.value) {\n            return new PropertyWrite(ast.span, receiver, ast.name, value);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitSafePropertyRead = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        if (receiver !== ast.receiver) {\n            return new SafePropertyRead(ast.span, receiver, ast.name);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitMethodCall = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        if (receiver !== ast.receiver) {\n            return new MethodCall(ast.span, receiver, ast.name, this.visitAll(ast.args));\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitSafeMethodCall = function (ast, context) {\n        var receiver = ast.receiver.visit(this);\n        var args = this.visitAll(ast.args);\n        if (receiver !== ast.receiver || args !== ast.args) {\n            return new SafeMethodCall(ast.span, receiver, ast.name, args);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitFunctionCall = function (ast, context) {\n        var target = ast.target && ast.target.visit(this);\n        var args = this.visitAll(ast.args);\n        if (target !== ast.target || args !== ast.args) {\n            return new FunctionCall(ast.span, target, args);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitLiteralArray = function (ast, context) {\n        var expressions = this.visitAll(ast.expressions);\n        if (expressions !== ast.expressions) {\n            return new LiteralArray(ast.span, expressions);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitLiteralMap = function (ast, context) {\n        var values = this.visitAll(ast.values);\n        if (values !== ast.values) {\n            return new LiteralMap(ast.span, ast.keys, values);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitBinary = function (ast, context) {\n        var left = ast.left.visit(this);\n        var right = ast.right.visit(this);\n        if (left !== ast.left || right !== ast.right) {\n            return new Binary(ast.span, ast.operation, left, right);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitPrefixNot = function (ast, context) {\n        var expression = ast.expression.visit(this);\n        if (expression !== ast.expression) {\n            return new PrefixNot(ast.span, expression);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitNonNullAssert = function (ast, context) {\n        var expression = ast.expression.visit(this);\n        if (expression !== ast.expression) {\n            return new NonNullAssert(ast.span, expression);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitConditional = function (ast, context) {\n        var condition = ast.condition.visit(this);\n        var trueExp = ast.trueExp.visit(this);\n        var falseExp = ast.falseExp.visit(this);\n        if (condition !== ast.condition || trueExp !== ast.trueExp || falseExp !== falseExp) {\n            return new Conditional(ast.span, condition, trueExp, falseExp);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitPipe = function (ast, context) {\n        var exp = ast.exp.visit(this);\n        var args = this.visitAll(ast.args);\n        if (exp !== ast.exp || args !== ast.args) {\n            return new BindingPipe(ast.span, exp, ast.name, args);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitKeyedRead = function (ast, context) {\n        var obj = ast.obj.visit(this);\n        var key = ast.key.visit(this);\n        if (obj !== ast.obj || key !== ast.key) {\n            return new KeyedRead(ast.span, obj, key);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitKeyedWrite = function (ast, context) {\n        var obj = ast.obj.visit(this);\n        var key = ast.key.visit(this);\n        var value = ast.value.visit(this);\n        if (obj !== ast.obj || key !== ast.key || value !== ast.value) {\n            return new KeyedWrite(ast.span, obj, key, value);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitAll = function (asts) {\n        var res = new Array(asts.length);\n        var modified = false;\n        for (var i = 0; i < asts.length; ++i) {\n            var original = asts[i];\n            var value = original.visit(this);\n            res[i] = value;\n            modified = modified || value !== original;\n        }\n        return modified ? res : asts;\n    };\n    AstMemoryEfficientTransformer.prototype.visitChain = function (ast, context) {\n        var expressions = this.visitAll(ast.expressions);\n        if (expressions !== ast.expressions) {\n            return new Chain(ast.span, expressions);\n        }\n        return ast;\n    };\n    AstMemoryEfficientTransformer.prototype.visitQuote = function (ast, context) { return ast; };\n    return AstMemoryEfficientTransformer;\n}());\nfunction visitAstChildren(ast, visitor, context) {\n    function visit(ast) {\n        visitor.visit && visitor.visit(ast, context) || ast.visit(visitor, context);\n    }\n    function visitAll(asts) { asts.forEach(visit); }\n    ast.visit({\n        visitBinary: function (ast) {\n            visit(ast.left);\n            visit(ast.right);\n        },\n        visitChain: function (ast) { visitAll(ast.expressions); },\n        visitConditional: function (ast) {\n            visit(ast.condition);\n            visit(ast.trueExp);\n            visit(ast.falseExp);\n        },\n        visitFunctionCall: function (ast) {\n            if (ast.target) {\n                visit(ast.target);\n            }\n            visitAll(ast.args);\n        },\n        visitImplicitReceiver: function (ast) { },\n        visitInterpolation: function (ast) { visitAll(ast.expressions); },\n        visitKeyedRead: function (ast) {\n            visit(ast.obj);\n            visit(ast.key);\n        },\n        visitKeyedWrite: function (ast) {\n            visit(ast.obj);\n            visit(ast.key);\n            visit(ast.obj);\n        },\n        visitLiteralArray: function (ast) { visitAll(ast.expressions); },\n        visitLiteralMap: function (ast) { },\n        visitLiteralPrimitive: function (ast) { },\n        visitMethodCall: function (ast) {\n            visit(ast.receiver);\n            visitAll(ast.args);\n        },\n        visitPipe: function (ast) {\n            visit(ast.exp);\n            visitAll(ast.args);\n        },\n        visitPrefixNot: function (ast) { visit(ast.expression); },\n        visitNonNullAssert: function (ast) { visit(ast.expression); },\n        visitPropertyRead: function (ast) { visit(ast.receiver); },\n        visitPropertyWrite: function (ast) {\n            visit(ast.receiver);\n            visit(ast.value);\n        },\n        visitQuote: function (ast) { },\n        visitSafeMethodCall: function (ast) {\n            visit(ast.receiver);\n            visitAll(ast.args);\n        },\n        visitSafePropertyRead: function (ast) { visit(ast.receiver); },\n    });\n}\n// Bindings\nvar ParsedProperty = /** @class */ (function () {\n    function ParsedProperty(name, expression, type, sourceSpan) {\n        this.name = name;\n        this.expression = expression;\n        this.type = type;\n        this.sourceSpan = sourceSpan;\n        this.isLiteral = this.type === ParsedPropertyType.LITERAL_ATTR;\n        this.isAnimation = this.type === ParsedPropertyType.ANIMATION;\n    }\n    return ParsedProperty;\n}());\nvar ParsedPropertyType;\n(function (ParsedPropertyType) {\n    ParsedPropertyType[ParsedPropertyType[\"DEFAULT\"] = 0] = \"DEFAULT\";\n    ParsedPropertyType[ParsedPropertyType[\"LITERAL_ATTR\"] = 1] = \"LITERAL_ATTR\";\n    ParsedPropertyType[ParsedPropertyType[\"ANIMATION\"] = 2] = \"ANIMATION\";\n})(ParsedPropertyType || (ParsedPropertyType = {}));\nvar ParsedEvent = /** @class */ (function () {\n    // Regular events have a target\n    // Animation events have a phase\n    function ParsedEvent(name, targetOrPhase, type, handler, sourceSpan) {\n        this.name = name;\n        this.targetOrPhase = targetOrPhase;\n        this.type = type;\n        this.handler = handler;\n        this.sourceSpan = sourceSpan;\n    }\n    return ParsedEvent;\n}());\nvar ParsedVariable = /** @class */ (function () {\n    function ParsedVariable(name, value, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    return ParsedVariable;\n}());\nvar BoundElementProperty = /** @class */ (function () {\n    function BoundElementProperty(name, type, securityContext, value, unit, sourceSpan) {\n        this.name = name;\n        this.type = type;\n        this.securityContext = securityContext;\n        this.value = value;\n        this.unit = unit;\n        this.sourceSpan = sourceSpan;\n    }\n    return BoundElementProperty;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar SplitInterpolation = /** @class */ (function () {\n    function SplitInterpolation(strings, expressions, offsets) {\n        this.strings = strings;\n        this.expressions = expressions;\n        this.offsets = offsets;\n    }\n    return SplitInterpolation;\n}());\nvar TemplateBindingParseResult = /** @class */ (function () {\n    function TemplateBindingParseResult(templateBindings, warnings, errors) {\n        this.templateBindings = templateBindings;\n        this.warnings = warnings;\n        this.errors = errors;\n    }\n    return TemplateBindingParseResult;\n}());\nfunction _createInterpolateRegExp(config) {\n    var pattern = escapeRegExp(config.start) + '([\\\\s\\\\S]*?)' + escapeRegExp(config.end);\n    return new RegExp(pattern, 'g');\n}\nvar Parser = /** @class */ (function () {\n    function Parser(_lexer) {\n        this._lexer = _lexer;\n        this.errors = [];\n    }\n    Parser.prototype.parseAction = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        this._checkNoInterpolation(input, location, interpolationConfig);\n        var sourceToLex = this._stripComments(input);\n        var tokens = this._lexer.tokenize(this._stripComments(input));\n        var ast = new _ParseAST(input, location, tokens, sourceToLex.length, true, this.errors, input.length - sourceToLex.length)\n            .parseChain();\n        return new ASTWithSource(ast, input, location, this.errors);\n    };\n    Parser.prototype.parseBinding = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var ast = this._parseBindingAst(input, location, interpolationConfig);\n        return new ASTWithSource(ast, input, location, this.errors);\n    };\n    Parser.prototype.parseSimpleBinding = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var ast = this._parseBindingAst(input, location, interpolationConfig);\n        var errors = SimpleExpressionChecker.check(ast);\n        if (errors.length > 0) {\n            this._reportError(\"Host binding expression cannot contain \" + errors.join(' '), input, location);\n        }\n        return new ASTWithSource(ast, input, location, this.errors);\n    };\n    Parser.prototype._reportError = function (message, input, errLocation, ctxLocation) {\n        this.errors.push(new ParserError(message, input, errLocation, ctxLocation));\n    };\n    Parser.prototype._parseBindingAst = function (input, location, interpolationConfig) {\n        // Quotes expressions use 3rd-party expression language. We don't want to use\n        // our lexer or parser for that, so we check for that ahead of time.\n        var quote = this._parseQuote(input, location);\n        if (quote != null) {\n            return quote;\n        }\n        this._checkNoInterpolation(input, location, interpolationConfig);\n        var sourceToLex = this._stripComments(input);\n        var tokens = this._lexer.tokenize(sourceToLex);\n        return new _ParseAST(input, location, tokens, sourceToLex.length, false, this.errors, input.length - sourceToLex.length)\n            .parseChain();\n    };\n    Parser.prototype._parseQuote = function (input, location) {\n        if (input == null)\n            return null;\n        var prefixSeparatorIndex = input.indexOf(':');\n        if (prefixSeparatorIndex == -1)\n            return null;\n        var prefix = input.substring(0, prefixSeparatorIndex).trim();\n        if (!isIdentifier(prefix))\n            return null;\n        var uninterpretedExpression = input.substring(prefixSeparatorIndex + 1);\n        return new Quote(new ParseSpan(0, input.length), prefix, uninterpretedExpression, location);\n    };\n    Parser.prototype.parseTemplateBindings = function (tplKey, tplValue, location) {\n        var tokens = this._lexer.tokenize(tplValue);\n        return new _ParseAST(tplValue, location, tokens, tplValue.length, false, this.errors, 0)\n            .parseTemplateBindings(tplKey);\n    };\n    Parser.prototype.parseInterpolation = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var split = this.splitInterpolation(input, location, interpolationConfig);\n        if (split == null)\n            return null;\n        var expressions = [];\n        for (var i = 0; i < split.expressions.length; ++i) {\n            var expressionText = split.expressions[i];\n            var sourceToLex = this._stripComments(expressionText);\n            var tokens = this._lexer.tokenize(sourceToLex);\n            var ast = new _ParseAST(input, location, tokens, sourceToLex.length, false, this.errors, split.offsets[i] + (expressionText.length - sourceToLex.length))\n                .parseChain();\n            expressions.push(ast);\n        }\n        return new ASTWithSource(new Interpolation(new ParseSpan(0, input == null ? 0 : input.length), split.strings, expressions), input, location, this.errors);\n    };\n    Parser.prototype.splitInterpolation = function (input, location, interpolationConfig) {\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var regexp = _createInterpolateRegExp(interpolationConfig);\n        var parts = input.split(regexp);\n        if (parts.length <= 1) {\n            return null;\n        }\n        var strings = [];\n        var expressions = [];\n        var offsets = [];\n        var offset = 0;\n        for (var i = 0; i < parts.length; i++) {\n            var part = parts[i];\n            if (i % 2 === 0) {\n                // fixed string\n                strings.push(part);\n                offset += part.length;\n            }\n            else if (part.trim().length > 0) {\n                offset += interpolationConfig.start.length;\n                expressions.push(part);\n                offsets.push(offset);\n                offset += part.length + interpolationConfig.end.length;\n            }\n            else {\n                this._reportError('Blank expressions are not allowed in interpolated strings', input, \"at column \" + this._findInterpolationErrorColumn(parts, i, interpolationConfig) + \" in\", location);\n                expressions.push('$implict');\n                offsets.push(offset);\n            }\n        }\n        return new SplitInterpolation(strings, expressions, offsets);\n    };\n    Parser.prototype.wrapLiteralPrimitive = function (input, location) {\n        return new ASTWithSource(new LiteralPrimitive(new ParseSpan(0, input == null ? 0 : input.length), input), input, location, this.errors);\n    };\n    Parser.prototype._stripComments = function (input) {\n        var i = this._commentStart(input);\n        return i != null ? input.substring(0, i).trim() : input;\n    };\n    Parser.prototype._commentStart = function (input) {\n        var outerQuote = null;\n        for (var i = 0; i < input.length - 1; i++) {\n            var char = input.charCodeAt(i);\n            var nextChar = input.charCodeAt(i + 1);\n            if (char === $SLASH && nextChar == $SLASH && outerQuote == null)\n                return i;\n            if (outerQuote === char) {\n                outerQuote = null;\n            }\n            else if (outerQuote == null && isQuote(char)) {\n                outerQuote = char;\n            }\n        }\n        return null;\n    };\n    Parser.prototype._checkNoInterpolation = function (input, location, interpolationConfig) {\n        var regexp = _createInterpolateRegExp(interpolationConfig);\n        var parts = input.split(regexp);\n        if (parts.length > 1) {\n            this._reportError(\"Got interpolation (\" + interpolationConfig.start + interpolationConfig.end + \") where expression was expected\", input, \"at column \" + this._findInterpolationErrorColumn(parts, 1, interpolationConfig) + \" in\", location);\n        }\n    };\n    Parser.prototype._findInterpolationErrorColumn = function (parts, partInErrIdx, interpolationConfig) {\n        var errLocation = '';\n        for (var j = 0; j < partInErrIdx; j++) {\n            errLocation += j % 2 === 0 ?\n                parts[j] :\n                \"\" + interpolationConfig.start + parts[j] + interpolationConfig.end;\n        }\n        return errLocation.length;\n    };\n    return Parser;\n}());\nvar _ParseAST = /** @class */ (function () {\n    function _ParseAST(input, location, tokens, inputLength, parseAction, errors, offset) {\n        this.input = input;\n        this.location = location;\n        this.tokens = tokens;\n        this.inputLength = inputLength;\n        this.parseAction = parseAction;\n        this.errors = errors;\n        this.offset = offset;\n        this.rparensExpected = 0;\n        this.rbracketsExpected = 0;\n        this.rbracesExpected = 0;\n        this.index = 0;\n    }\n    _ParseAST.prototype.peek = function (offset) {\n        var i = this.index + offset;\n        return i < this.tokens.length ? this.tokens[i] : EOF;\n    };\n    Object.defineProperty(_ParseAST.prototype, \"next\", {\n        get: function () { return this.peek(0); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(_ParseAST.prototype, \"inputIndex\", {\n        get: function () {\n            return (this.index < this.tokens.length) ? this.next.index + this.offset :\n                this.inputLength + this.offset;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _ParseAST.prototype.span = function (start) { return new ParseSpan(start, this.inputIndex); };\n    _ParseAST.prototype.advance = function () { this.index++; };\n    _ParseAST.prototype.optionalCharacter = function (code) {\n        if (this.next.isCharacter(code)) {\n            this.advance();\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    _ParseAST.prototype.peekKeywordLet = function () { return this.next.isKeywordLet(); };\n    _ParseAST.prototype.peekKeywordAs = function () { return this.next.isKeywordAs(); };\n    _ParseAST.prototype.expectCharacter = function (code) {\n        if (this.optionalCharacter(code))\n            return;\n        this.error(\"Missing expected \" + String.fromCharCode(code));\n    };\n    _ParseAST.prototype.optionalOperator = function (op) {\n        if (this.next.isOperator(op)) {\n            this.advance();\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    _ParseAST.prototype.expectOperator = function (operator) {\n        if (this.optionalOperator(operator))\n            return;\n        this.error(\"Missing expected operator \" + operator);\n    };\n    _ParseAST.prototype.expectIdentifierOrKeyword = function () {\n        var n = this.next;\n        if (!n.isIdentifier() && !n.isKeyword()) {\n            this.error(\"Unexpected token \" + n + \", expected identifier or keyword\");\n            return '';\n        }\n        this.advance();\n        return n.toString();\n    };\n    _ParseAST.prototype.expectIdentifierOrKeywordOrString = function () {\n        var n = this.next;\n        if (!n.isIdentifier() && !n.isKeyword() && !n.isString()) {\n            this.error(\"Unexpected token \" + n + \", expected identifier, keyword, or string\");\n            return '';\n        }\n        this.advance();\n        return n.toString();\n    };\n    _ParseAST.prototype.parseChain = function () {\n        var exprs = [];\n        var start = this.inputIndex;\n        while (this.index < this.tokens.length) {\n            var expr = this.parsePipe();\n            exprs.push(expr);\n            if (this.optionalCharacter($SEMICOLON)) {\n                if (!this.parseAction) {\n                    this.error('Binding expression cannot contain chained expression');\n                }\n                while (this.optionalCharacter($SEMICOLON)) {\n                } // read all semicolons\n            }\n            else if (this.index < this.tokens.length) {\n                this.error(\"Unexpected token '\" + this.next + \"'\");\n            }\n        }\n        if (exprs.length == 0)\n            return new EmptyExpr(this.span(start));\n        if (exprs.length == 1)\n            return exprs[0];\n        return new Chain(this.span(start), exprs);\n    };\n    _ParseAST.prototype.parsePipe = function () {\n        var result = this.parseExpression();\n        if (this.optionalOperator('|')) {\n            if (this.parseAction) {\n                this.error('Cannot have a pipe in an action expression');\n            }\n            do {\n                var name_1 = this.expectIdentifierOrKeyword();\n                var args = [];\n                while (this.optionalCharacter($COLON)) {\n                    args.push(this.parseExpression());\n                }\n                result = new BindingPipe(this.span(result.span.start), result, name_1, args);\n            } while (this.optionalOperator('|'));\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseExpression = function () { return this.parseConditional(); };\n    _ParseAST.prototype.parseConditional = function () {\n        var start = this.inputIndex;\n        var result = this.parseLogicalOr();\n        if (this.optionalOperator('?')) {\n            var yes = this.parsePipe();\n            var no = void 0;\n            if (!this.optionalCharacter($COLON)) {\n                var end = this.inputIndex;\n                var expression = this.input.substring(start, end);\n                this.error(\"Conditional expression \" + expression + \" requires all 3 expressions\");\n                no = new EmptyExpr(this.span(start));\n            }\n            else {\n                no = this.parsePipe();\n            }\n            return new Conditional(this.span(start), result, yes, no);\n        }\n        else {\n            return result;\n        }\n    };\n    _ParseAST.prototype.parseLogicalOr = function () {\n        // '||'\n        var result = this.parseLogicalAnd();\n        while (this.optionalOperator('||')) {\n            var right = this.parseLogicalAnd();\n            result = new Binary(this.span(result.span.start), '||', result, right);\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseLogicalAnd = function () {\n        // '&&'\n        var result = this.parseEquality();\n        while (this.optionalOperator('&&')) {\n            var right = this.parseEquality();\n            result = new Binary(this.span(result.span.start), '&&', result, right);\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseEquality = function () {\n        // '==','!=','===','!=='\n        var result = this.parseRelational();\n        while (this.next.type == TokenType.Operator) {\n            var operator = this.next.strValue;\n            switch (operator) {\n                case '==':\n                case '===':\n                case '!=':\n                case '!==':\n                    this.advance();\n                    var right = this.parseRelational();\n                    result = new Binary(this.span(result.span.start), operator, result, right);\n                    continue;\n            }\n            break;\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseRelational = function () {\n        // '<', '>', '<=', '>='\n        var result = this.parseAdditive();\n        while (this.next.type == TokenType.Operator) {\n            var operator = this.next.strValue;\n            switch (operator) {\n                case '<':\n                case '>':\n                case '<=':\n                case '>=':\n                    this.advance();\n                    var right = this.parseAdditive();\n                    result = new Binary(this.span(result.span.start), operator, result, right);\n                    continue;\n            }\n            break;\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseAdditive = function () {\n        // '+', '-'\n        var result = this.parseMultiplicative();\n        while (this.next.type == TokenType.Operator) {\n            var operator = this.next.strValue;\n            switch (operator) {\n                case '+':\n                case '-':\n                    this.advance();\n                    var right = this.parseMultiplicative();\n                    result = new Binary(this.span(result.span.start), operator, result, right);\n                    continue;\n            }\n            break;\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseMultiplicative = function () {\n        // '*', '%', '/'\n        var result = this.parsePrefix();\n        while (this.next.type == TokenType.Operator) {\n            var operator = this.next.strValue;\n            switch (operator) {\n                case '*':\n                case '%':\n                case '/':\n                    this.advance();\n                    var right = this.parsePrefix();\n                    result = new Binary(this.span(result.span.start), operator, result, right);\n                    continue;\n            }\n            break;\n        }\n        return result;\n    };\n    _ParseAST.prototype.parsePrefix = function () {\n        if (this.next.type == TokenType.Operator) {\n            var start = this.inputIndex;\n            var operator = this.next.strValue;\n            var result = void 0;\n            switch (operator) {\n                case '+':\n                    this.advance();\n                    result = this.parsePrefix();\n                    return new Binary(this.span(start), '-', result, new LiteralPrimitive(new ParseSpan(start, start), 0));\n                case '-':\n                    this.advance();\n                    result = this.parsePrefix();\n                    return new Binary(this.span(start), operator, new LiteralPrimitive(new ParseSpan(start, start), 0), result);\n                case '!':\n                    this.advance();\n                    result = this.parsePrefix();\n                    return new PrefixNot(this.span(start), result);\n            }\n        }\n        return this.parseCallChain();\n    };\n    _ParseAST.prototype.parseCallChain = function () {\n        var result = this.parsePrimary();\n        while (true) {\n            if (this.optionalCharacter($PERIOD)) {\n                result = this.parseAccessMemberOrMethodCall(result, false);\n            }\n            else if (this.optionalOperator('?.')) {\n                result = this.parseAccessMemberOrMethodCall(result, true);\n            }\n            else if (this.optionalCharacter($LBRACKET)) {\n                this.rbracketsExpected++;\n                var key = this.parsePipe();\n                this.rbracketsExpected--;\n                this.expectCharacter($RBRACKET);\n                if (this.optionalOperator('=')) {\n                    var value = this.parseConditional();\n                    result = new KeyedWrite(this.span(result.span.start), result, key, value);\n                }\n                else {\n                    result = new KeyedRead(this.span(result.span.start), result, key);\n                }\n            }\n            else if (this.optionalCharacter($LPAREN)) {\n                this.rparensExpected++;\n                var args = this.parseCallArguments();\n                this.rparensExpected--;\n                this.expectCharacter($RPAREN);\n                result = new FunctionCall(this.span(result.span.start), result, args);\n            }\n            else if (this.optionalOperator('!')) {\n                result = new NonNullAssert(this.span(result.span.start), result);\n            }\n            else {\n                return result;\n            }\n        }\n    };\n    _ParseAST.prototype.parsePrimary = function () {\n        var start = this.inputIndex;\n        if (this.optionalCharacter($LPAREN)) {\n            this.rparensExpected++;\n            var result = this.parsePipe();\n            this.rparensExpected--;\n            this.expectCharacter($RPAREN);\n            return result;\n        }\n        else if (this.next.isKeywordNull()) {\n            this.advance();\n            return new LiteralPrimitive(this.span(start), null);\n        }\n        else if (this.next.isKeywordUndefined()) {\n            this.advance();\n            return new LiteralPrimitive(this.span(start), void 0);\n        }\n        else if (this.next.isKeywordTrue()) {\n            this.advance();\n            return new LiteralPrimitive(this.span(start), true);\n        }\n        else if (this.next.isKeywordFalse()) {\n            this.advance();\n            return new LiteralPrimitive(this.span(start), false);\n        }\n        else if (this.next.isKeywordThis()) {\n            this.advance();\n            return new ImplicitReceiver(this.span(start));\n        }\n        else if (this.optionalCharacter($LBRACKET)) {\n            this.rbracketsExpected++;\n            var elements = this.parseExpressionList($RBRACKET);\n            this.rbracketsExpected--;\n            this.expectCharacter($RBRACKET);\n            return new LiteralArray(this.span(start), elements);\n        }\n        else if (this.next.isCharacter($LBRACE)) {\n            return this.parseLiteralMap();\n        }\n        else if (this.next.isIdentifier()) {\n            return this.parseAccessMemberOrMethodCall(new ImplicitReceiver(this.span(start)), false);\n        }\n        else if (this.next.isNumber()) {\n            var value = this.next.toNumber();\n            this.advance();\n            return new LiteralPrimitive(this.span(start), value);\n        }\n        else if (this.next.isString()) {\n            var literalValue = this.next.toString();\n            this.advance();\n            return new LiteralPrimitive(this.span(start), literalValue);\n        }\n        else if (this.index >= this.tokens.length) {\n            this.error(\"Unexpected end of expression: \" + this.input);\n            return new EmptyExpr(this.span(start));\n        }\n        else {\n            this.error(\"Unexpected token \" + this.next);\n            return new EmptyExpr(this.span(start));\n        }\n    };\n    _ParseAST.prototype.parseExpressionList = function (terminator) {\n        var result = [];\n        if (!this.next.isCharacter(terminator)) {\n            do {\n                result.push(this.parsePipe());\n            } while (this.optionalCharacter($COMMA));\n        }\n        return result;\n    };\n    _ParseAST.prototype.parseLiteralMap = function () {\n        var keys = [];\n        var values = [];\n        var start = this.inputIndex;\n        this.expectCharacter($LBRACE);\n        if (!this.optionalCharacter($RBRACE)) {\n            this.rbracesExpected++;\n            do {\n                var quoted = this.next.isString();\n                var key = this.expectIdentifierOrKeywordOrString();\n                keys.push({ key: key, quoted: quoted });\n                this.expectCharacter($COLON);\n                values.push(this.parsePipe());\n            } while (this.optionalCharacter($COMMA));\n            this.rbracesExpected--;\n            this.expectCharacter($RBRACE);\n        }\n        return new LiteralMap(this.span(start), keys, values);\n    };\n    _ParseAST.prototype.parseAccessMemberOrMethodCall = function (receiver, isSafe) {\n        if (isSafe === void 0) { isSafe = false; }\n        var start = receiver.span.start;\n        var id = this.expectIdentifierOrKeyword();\n        if (this.optionalCharacter($LPAREN)) {\n            this.rparensExpected++;\n            var args = this.parseCallArguments();\n            this.expectCharacter($RPAREN);\n            this.rparensExpected--;\n            var span = this.span(start);\n            return isSafe ? new SafeMethodCall(span, receiver, id, args) :\n                new MethodCall(span, receiver, id, args);\n        }\n        else {\n            if (isSafe) {\n                if (this.optionalOperator('=')) {\n                    this.error('The \\'?.\\' operator cannot be used in the assignment');\n                    return new EmptyExpr(this.span(start));\n                }\n                else {\n                    return new SafePropertyRead(this.span(start), receiver, id);\n                }\n            }\n            else {\n                if (this.optionalOperator('=')) {\n                    if (!this.parseAction) {\n                        this.error('Bindings cannot contain assignments');\n                        return new EmptyExpr(this.span(start));\n                    }\n                    var value = this.parseConditional();\n                    return new PropertyWrite(this.span(start), receiver, id, value);\n                }\n                else {\n                    return new PropertyRead(this.span(start), receiver, id);\n                }\n            }\n        }\n    };\n    _ParseAST.prototype.parseCallArguments = function () {\n        if (this.next.isCharacter($RPAREN))\n            return [];\n        var positionals = [];\n        do {\n            positionals.push(this.parsePipe());\n        } while (this.optionalCharacter($COMMA));\n        return positionals;\n    };\n    /**\n     * An identifier, a keyword, a string with an optional `-` in between.\n     */\n    _ParseAST.prototype.expectTemplateBindingKey = function () {\n        var result = '';\n        var operatorFound = false;\n        do {\n            result += this.expectIdentifierOrKeywordOrString();\n            operatorFound = this.optionalOperator('-');\n            if (operatorFound) {\n                result += '-';\n            }\n        } while (operatorFound);\n        return result.toString();\n    };\n    // Parses the AST for `<some-tag *tplKey=AST>`\n    _ParseAST.prototype.parseTemplateBindings = function (tplKey) {\n        var firstBinding = true;\n        var bindings = [];\n        var warnings = [];\n        do {\n            var start = this.inputIndex;\n            var rawKey = void 0;\n            var key = void 0;\n            var isVar = false;\n            if (firstBinding) {\n                rawKey = key = tplKey;\n                firstBinding = false;\n            }\n            else {\n                isVar = this.peekKeywordLet();\n                if (isVar)\n                    this.advance();\n                rawKey = this.expectTemplateBindingKey();\n                key = isVar ? rawKey : tplKey + rawKey[0].toUpperCase() + rawKey.substring(1);\n                this.optionalCharacter($COLON);\n            }\n            var name_2 = null;\n            var expression = null;\n            if (isVar) {\n                if (this.optionalOperator('=')) {\n                    name_2 = this.expectTemplateBindingKey();\n                }\n                else {\n                    name_2 = '\\$implicit';\n                }\n            }\n            else if (this.peekKeywordAs()) {\n                this.advance(); // consume `as`\n                name_2 = rawKey;\n                key = this.expectTemplateBindingKey(); // read local var name\n                isVar = true;\n            }\n            else if (this.next !== EOF && !this.peekKeywordLet()) {\n                var start_1 = this.inputIndex;\n                var ast = this.parsePipe();\n                var source = this.input.substring(start_1 - this.offset, this.inputIndex - this.offset);\n                expression = new ASTWithSource(ast, source, this.location, this.errors);\n            }\n            bindings.push(new TemplateBinding(this.span(start), key, isVar, name_2, expression));\n            if (this.peekKeywordAs() && !isVar) {\n                var letStart = this.inputIndex;\n                this.advance(); // consume `as`\n                var letName = this.expectTemplateBindingKey(); // read local var name\n                bindings.push(new TemplateBinding(this.span(letStart), letName, true, key, null));\n            }\n            if (!this.optionalCharacter($SEMICOLON)) {\n                this.optionalCharacter($COMMA);\n            }\n        } while (this.index < this.tokens.length);\n        return new TemplateBindingParseResult(bindings, warnings, this.errors);\n    };\n    _ParseAST.prototype.error = function (message, index) {\n        if (index === void 0) { index = null; }\n        this.errors.push(new ParserError(message, this.input, this.locationText(index), this.location));\n        this.skip();\n    };\n    _ParseAST.prototype.locationText = function (index) {\n        if (index === void 0) { index = null; }\n        if (index == null)\n            index = this.index;\n        return (index < this.tokens.length) ? \"at column \" + (this.tokens[index].index + 1) + \" in\" :\n            \"at the end of the expression\";\n    };\n    // Error recovery should skip tokens until it encounters a recovery point. skip() treats\n    // the end of input and a ';' as unconditionally a recovery point. It also treats ')',\n    // '}' and ']' as conditional recovery points if one of calling productions is expecting\n    // one of these symbols. This allows skip() to recover from errors such as '(a.) + 1' allowing\n    // more of the AST to be retained (it doesn't skip any tokens as the ')' is retained because\n    // of the '(' begins an '(' <expr> ')' production). The recovery points of grouping symbols\n    // must be conditional as they must be skipped if none of the calling productions are not\n    // expecting the closing token else we will never make progress in the case of an\n    // extraneous group closing symbol (such as a stray ')'). This is not the case for ';' because\n    // parseChain() is always the root production and it expects a ';'.\n    // If a production expects one of these token it increments the corresponding nesting count,\n    // and then decrements it just prior to checking if the token is in the input.\n    _ParseAST.prototype.skip = function () {\n        var n = this.next;\n        while (this.index < this.tokens.length && !n.isCharacter($SEMICOLON) &&\n            (this.rparensExpected <= 0 || !n.isCharacter($RPAREN)) &&\n            (this.rbracesExpected <= 0 || !n.isCharacter($RBRACE)) &&\n            (this.rbracketsExpected <= 0 || !n.isCharacter($RBRACKET))) {\n            if (this.next.isError()) {\n                this.errors.push(new ParserError(this.next.toString(), this.input, this.locationText(), this.location));\n            }\n            this.advance();\n            n = this.next;\n        }\n    };\n    return _ParseAST;\n}());\nvar SimpleExpressionChecker = /** @class */ (function () {\n    function SimpleExpressionChecker() {\n        this.errors = [];\n    }\n    SimpleExpressionChecker.check = function (ast) {\n        var s = new SimpleExpressionChecker();\n        ast.visit(s);\n        return s.errors;\n    };\n    SimpleExpressionChecker.prototype.visitImplicitReceiver = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitInterpolation = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitLiteralPrimitive = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitPropertyRead = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitPropertyWrite = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitSafePropertyRead = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitMethodCall = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitSafeMethodCall = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitFunctionCall = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitLiteralArray = function (ast, context) { this.visitAll(ast.expressions); };\n    SimpleExpressionChecker.prototype.visitLiteralMap = function (ast, context) { this.visitAll(ast.values); };\n    SimpleExpressionChecker.prototype.visitBinary = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitPrefixNot = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitNonNullAssert = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitConditional = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitPipe = function (ast, context) { this.errors.push('pipes'); };\n    SimpleExpressionChecker.prototype.visitKeyedRead = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitKeyedWrite = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitAll = function (asts) {\n        var _this = this;\n        return asts.map(function (node) { return node.visit(_this); });\n    };\n    SimpleExpressionChecker.prototype.visitChain = function (ast, context) { };\n    SimpleExpressionChecker.prototype.visitQuote = function (ast, context) { };\n    return SimpleExpressionChecker;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ParseLocation = /** @class */ (function () {\n    function ParseLocation(file, offset, line, col) {\n        this.file = file;\n        this.offset = offset;\n        this.line = line;\n        this.col = col;\n    }\n    ParseLocation.prototype.toString = function () {\n        return this.offset != null ? this.file.url + \"@\" + this.line + \":\" + this.col : this.file.url;\n    };\n    ParseLocation.prototype.moveBy = function (delta) {\n        var source = this.file.content;\n        var len = source.length;\n        var offset = this.offset;\n        var line = this.line;\n        var col = this.col;\n        while (offset > 0 && delta < 0) {\n            offset--;\n            delta++;\n            var ch = source.charCodeAt(offset);\n            if (ch == $LF) {\n                line--;\n                var priorLine = source.substr(0, offset - 1).lastIndexOf(String.fromCharCode($LF));\n                col = priorLine > 0 ? offset - priorLine : offset;\n            }\n            else {\n                col--;\n            }\n        }\n        while (offset < len && delta > 0) {\n            var ch = source.charCodeAt(offset);\n            offset++;\n            delta--;\n            if (ch == $LF) {\n                line++;\n                col = 0;\n            }\n            else {\n                col++;\n            }\n        }\n        return new ParseLocation(this.file, offset, line, col);\n    };\n    // Return the source around the location\n    // Up to `maxChars` or `maxLines` on each side of the location\n    ParseLocation.prototype.getContext = function (maxChars, maxLines) {\n        var content = this.file.content;\n        var startOffset = this.offset;\n        if (startOffset != null) {\n            if (startOffset > content.length - 1) {\n                startOffset = content.length - 1;\n            }\n            var endOffset = startOffset;\n            var ctxChars = 0;\n            var ctxLines = 0;\n            while (ctxChars < maxChars && startOffset > 0) {\n                startOffset--;\n                ctxChars++;\n                if (content[startOffset] == '\\n') {\n                    if (++ctxLines == maxLines) {\n                        break;\n                    }\n                }\n            }\n            ctxChars = 0;\n            ctxLines = 0;\n            while (ctxChars < maxChars && endOffset < content.length - 1) {\n                endOffset++;\n                ctxChars++;\n                if (content[endOffset] == '\\n') {\n                    if (++ctxLines == maxLines) {\n                        break;\n                    }\n                }\n            }\n            return {\n                before: content.substring(startOffset, this.offset),\n                after: content.substring(this.offset, endOffset + 1),\n            };\n        }\n        return null;\n    };\n    return ParseLocation;\n}());\nvar ParseSourceFile = /** @class */ (function () {\n    function ParseSourceFile(content, url) {\n        this.content = content;\n        this.url = url;\n    }\n    return ParseSourceFile;\n}());\nvar ParseSourceSpan = /** @class */ (function () {\n    function ParseSourceSpan(start, end, details) {\n        if (details === void 0) { details = null; }\n        this.start = start;\n        this.end = end;\n        this.details = details;\n    }\n    ParseSourceSpan.prototype.toString = function () {\n        return this.start.file.content.substring(this.start.offset, this.end.offset);\n    };\n    return ParseSourceSpan;\n}());\nvar ParseErrorLevel;\n(function (ParseErrorLevel) {\n    ParseErrorLevel[ParseErrorLevel[\"WARNING\"] = 0] = \"WARNING\";\n    ParseErrorLevel[ParseErrorLevel[\"ERROR\"] = 1] = \"ERROR\";\n})(ParseErrorLevel || (ParseErrorLevel = {}));\nvar ParseError = /** @class */ (function () {\n    function ParseError(span, msg, level) {\n        if (level === void 0) { level = ParseErrorLevel.ERROR; }\n        this.span = span;\n        this.msg = msg;\n        this.level = level;\n    }\n    ParseError.prototype.contextualMessage = function () {\n        var ctx = this.span.start.getContext(100, 3);\n        return ctx ? this.msg + \" (\\\"\" + ctx.before + \"[\" + ParseErrorLevel[this.level] + \" ->]\" + ctx.after + \"\\\")\" :\n            this.msg;\n    };\n    ParseError.prototype.toString = function () {\n        var details = this.span.details ? \", \" + this.span.details : '';\n        return this.contextualMessage() + \": \" + this.span.start + details;\n    };\n    return ParseError;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TokenType$1;\n(function (TokenType) {\n    TokenType[TokenType[\"TAG_OPEN_START\"] = 0] = \"TAG_OPEN_START\";\n    TokenType[TokenType[\"TAG_OPEN_END\"] = 1] = \"TAG_OPEN_END\";\n    TokenType[TokenType[\"TAG_OPEN_END_VOID\"] = 2] = \"TAG_OPEN_END_VOID\";\n    TokenType[TokenType[\"TAG_CLOSE\"] = 3] = \"TAG_CLOSE\";\n    TokenType[TokenType[\"TEXT\"] = 4] = \"TEXT\";\n    TokenType[TokenType[\"ESCAPABLE_RAW_TEXT\"] = 5] = \"ESCAPABLE_RAW_TEXT\";\n    TokenType[TokenType[\"RAW_TEXT\"] = 6] = \"RAW_TEXT\";\n    TokenType[TokenType[\"COMMENT_START\"] = 7] = \"COMMENT_START\";\n    TokenType[TokenType[\"COMMENT_END\"] = 8] = \"COMMENT_END\";\n    TokenType[TokenType[\"CDATA_START\"] = 9] = \"CDATA_START\";\n    TokenType[TokenType[\"CDATA_END\"] = 10] = \"CDATA_END\";\n    TokenType[TokenType[\"ATTR_NAME\"] = 11] = \"ATTR_NAME\";\n    TokenType[TokenType[\"ATTR_VALUE\"] = 12] = \"ATTR_VALUE\";\n    TokenType[TokenType[\"DOC_TYPE\"] = 13] = \"DOC_TYPE\";\n    TokenType[TokenType[\"EXPANSION_FORM_START\"] = 14] = \"EXPANSION_FORM_START\";\n    TokenType[TokenType[\"EXPANSION_CASE_VALUE\"] = 15] = \"EXPANSION_CASE_VALUE\";\n    TokenType[TokenType[\"EXPANSION_CASE_EXP_START\"] = 16] = \"EXPANSION_CASE_EXP_START\";\n    TokenType[TokenType[\"EXPANSION_CASE_EXP_END\"] = 17] = \"EXPANSION_CASE_EXP_END\";\n    TokenType[TokenType[\"EXPANSION_FORM_END\"] = 18] = \"EXPANSION_FORM_END\";\n    TokenType[TokenType[\"EOF\"] = 19] = \"EOF\";\n})(TokenType$1 || (TokenType$1 = {}));\nvar Token$1 = /** @class */ (function () {\n    function Token(type, parts, sourceSpan) {\n        this.type = type;\n        this.parts = parts;\n        this.sourceSpan = sourceSpan;\n    }\n    return Token;\n}());\nvar TokenError = /** @class */ (function (_super) {\n    __extends(TokenError, _super);\n    function TokenError(errorMsg, tokenType, span) {\n        var _this = _super.call(this, span, errorMsg) || this;\n        _this.tokenType = tokenType;\n        return _this;\n    }\n    return TokenError;\n}(ParseError));\nvar TokenizeResult = /** @class */ (function () {\n    function TokenizeResult(tokens, errors) {\n        this.tokens = tokens;\n        this.errors = errors;\n    }\n    return TokenizeResult;\n}());\nfunction tokenize(source, url, getTagDefinition, tokenizeExpansionForms, interpolationConfig) {\n    if (tokenizeExpansionForms === void 0) { tokenizeExpansionForms = false; }\n    if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n    return new _Tokenizer(new ParseSourceFile(source, url), getTagDefinition, tokenizeExpansionForms, interpolationConfig)\n        .tokenize();\n}\nvar _CR_OR_CRLF_REGEXP = /\\r\\n?/g;\nfunction _unexpectedCharacterErrorMsg(charCode) {\n    var char = charCode === $EOF ? 'EOF' : String.fromCharCode(charCode);\n    return \"Unexpected character \\\"\" + char + \"\\\"\";\n}\nfunction _unknownEntityErrorMsg(entitySrc) {\n    return \"Unknown entity \\\"\" + entitySrc + \"\\\" - use the \\\"&#<decimal>;\\\" or  \\\"&#x<hex>;\\\" syntax\";\n}\nvar _ControlFlowError = /** @class */ (function () {\n    function _ControlFlowError(error) {\n        this.error = error;\n    }\n    return _ControlFlowError;\n}());\n// See http://www.w3.org/TR/html51/syntax.html#writing\nvar _Tokenizer = /** @class */ (function () {\n    /**\n     * @param _file The html source\n     * @param _getTagDefinition\n     * @param _tokenizeIcu Whether to tokenize ICU messages (considered as text nodes when false)\n     * @param _interpolationConfig\n     */\n    function _Tokenizer(_file, _getTagDefinition, _tokenizeIcu, _interpolationConfig) {\n        if (_interpolationConfig === void 0) { _interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        this._file = _file;\n        this._getTagDefinition = _getTagDefinition;\n        this._tokenizeIcu = _tokenizeIcu;\n        this._interpolationConfig = _interpolationConfig;\n        // Note: this is always lowercase!\n        this._peek = -1;\n        this._nextPeek = -1;\n        this._index = -1;\n        this._line = 0;\n        this._column = -1;\n        this._expansionCaseStack = [];\n        this._inInterpolation = false;\n        this.tokens = [];\n        this.errors = [];\n        this._input = _file.content;\n        this._length = _file.content.length;\n        this._advance();\n    }\n    _Tokenizer.prototype._processCarriageReturns = function (content) {\n        // http://www.w3.org/TR/html5/syntax.html#preprocessing-the-input-stream\n        // In order to keep the original position in the source, we can not\n        // pre-process it.\n        // Instead CRs are processed right before instantiating the tokens.\n        return content.replace(_CR_OR_CRLF_REGEXP, '\\n');\n    };\n    _Tokenizer.prototype.tokenize = function () {\n        while (this._peek !== $EOF) {\n            var start = this._getLocation();\n            try {\n                if (this._attemptCharCode($LT)) {\n                    if (this._attemptCharCode($BANG)) {\n                        if (this._attemptCharCode($LBRACKET)) {\n                            this._consumeCdata(start);\n                        }\n                        else if (this._attemptCharCode($MINUS)) {\n                            this._consumeComment(start);\n                        }\n                        else {\n                            this._consumeDocType(start);\n                        }\n                    }\n                    else if (this._attemptCharCode($SLASH)) {\n                        this._consumeTagClose(start);\n                    }\n                    else {\n                        this._consumeTagOpen(start);\n                    }\n                }\n                else if (!(this._tokenizeIcu && this._tokenizeExpansionForm())) {\n                    this._consumeText();\n                }\n            }\n            catch (e) {\n                if (e instanceof _ControlFlowError) {\n                    this.errors.push(e.error);\n                }\n                else {\n                    throw e;\n                }\n            }\n        }\n        this._beginToken(TokenType$1.EOF);\n        this._endToken([]);\n        return new TokenizeResult(mergeTextTokens(this.tokens), this.errors);\n    };\n    /**\n     * @returns whether an ICU token has been created\n     * @internal\n     */\n    _Tokenizer.prototype._tokenizeExpansionForm = function () {\n        if (isExpansionFormStart(this._input, this._index, this._interpolationConfig)) {\n            this._consumeExpansionFormStart();\n            return true;\n        }\n        if (isExpansionCaseStart(this._peek) && this._isInExpansionForm()) {\n            this._consumeExpansionCaseStart();\n            return true;\n        }\n        if (this._peek === $RBRACE) {\n            if (this._isInExpansionCase()) {\n                this._consumeExpansionCaseEnd();\n                return true;\n            }\n            if (this._isInExpansionForm()) {\n                this._consumeExpansionFormEnd();\n                return true;\n            }\n        }\n        return false;\n    };\n    _Tokenizer.prototype._getLocation = function () {\n        return new ParseLocation(this._file, this._index, this._line, this._column);\n    };\n    _Tokenizer.prototype._getSpan = function (start, end) {\n        if (start === void 0) { start = this._getLocation(); }\n        if (end === void 0) { end = this._getLocation(); }\n        return new ParseSourceSpan(start, end);\n    };\n    _Tokenizer.prototype._beginToken = function (type, start) {\n        if (start === void 0) { start = this._getLocation(); }\n        this._currentTokenStart = start;\n        this._currentTokenType = type;\n    };\n    _Tokenizer.prototype._endToken = function (parts, end) {\n        if (end === void 0) { end = this._getLocation(); }\n        var token = new Token$1(this._currentTokenType, parts, new ParseSourceSpan(this._currentTokenStart, end));\n        this.tokens.push(token);\n        this._currentTokenStart = null;\n        this._currentTokenType = null;\n        return token;\n    };\n    _Tokenizer.prototype._createError = function (msg, span) {\n        if (this._isInExpansionForm()) {\n            msg += \" (Do you have an unescaped \\\"{\\\" in your template? Use \\\"{{ '{' }}\\\") to escape it.)\";\n        }\n        var error = new TokenError(msg, this._currentTokenType, span);\n        this._currentTokenStart = null;\n        this._currentTokenType = null;\n        return new _ControlFlowError(error);\n    };\n    _Tokenizer.prototype._advance = function () {\n        if (this._index >= this._length) {\n            throw this._createError(_unexpectedCharacterErrorMsg($EOF), this._getSpan());\n        }\n        if (this._peek === $LF) {\n            this._line++;\n            this._column = 0;\n        }\n        else if (this._peek !== $LF && this._peek !== $CR) {\n            this._column++;\n        }\n        this._index++;\n        this._peek = this._index >= this._length ? $EOF : this._input.charCodeAt(this._index);\n        this._nextPeek =\n            this._index + 1 >= this._length ? $EOF : this._input.charCodeAt(this._index + 1);\n    };\n    _Tokenizer.prototype._attemptCharCode = function (charCode) {\n        if (this._peek === charCode) {\n            this._advance();\n            return true;\n        }\n        return false;\n    };\n    _Tokenizer.prototype._attemptCharCodeCaseInsensitive = function (charCode) {\n        if (compareCharCodeCaseInsensitive(this._peek, charCode)) {\n            this._advance();\n            return true;\n        }\n        return false;\n    };\n    _Tokenizer.prototype._requireCharCode = function (charCode) {\n        var location = this._getLocation();\n        if (!this._attemptCharCode(charCode)) {\n            throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan(location, location));\n        }\n    };\n    _Tokenizer.prototype._attemptStr = function (chars) {\n        var len = chars.length;\n        if (this._index + len > this._length) {\n            return false;\n        }\n        var initialPosition = this._savePosition();\n        for (var i = 0; i < len; i++) {\n            if (!this._attemptCharCode(chars.charCodeAt(i))) {\n                // If attempting to parse the string fails, we want to reset the parser\n                // to where it was before the attempt\n                this._restorePosition(initialPosition);\n                return false;\n            }\n        }\n        return true;\n    };\n    _Tokenizer.prototype._attemptStrCaseInsensitive = function (chars) {\n        for (var i = 0; i < chars.length; i++) {\n            if (!this._attemptCharCodeCaseInsensitive(chars.charCodeAt(i))) {\n                return false;\n            }\n        }\n        return true;\n    };\n    _Tokenizer.prototype._requireStr = function (chars) {\n        var location = this._getLocation();\n        if (!this._attemptStr(chars)) {\n            throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan(location));\n        }\n    };\n    _Tokenizer.prototype._attemptCharCodeUntilFn = function (predicate) {\n        while (!predicate(this._peek)) {\n            this._advance();\n        }\n    };\n    _Tokenizer.prototype._requireCharCodeUntilFn = function (predicate, len) {\n        var start = this._getLocation();\n        this._attemptCharCodeUntilFn(predicate);\n        if (this._index - start.offset < len) {\n            throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan(start, start));\n        }\n    };\n    _Tokenizer.prototype._attemptUntilChar = function (char) {\n        while (this._peek !== char) {\n            this._advance();\n        }\n    };\n    _Tokenizer.prototype._readChar = function (decodeEntities) {\n        if (decodeEntities && this._peek === $AMPERSAND) {\n            return this._decodeEntity();\n        }\n        else {\n            var index = this._index;\n            this._advance();\n            return this._input[index];\n        }\n    };\n    _Tokenizer.prototype._decodeEntity = function () {\n        var start = this._getLocation();\n        this._advance();\n        if (this._attemptCharCode($HASH)) {\n            var isHex = this._attemptCharCode($x) || this._attemptCharCode($X);\n            var numberStart = this._getLocation().offset;\n            this._attemptCharCodeUntilFn(isDigitEntityEnd);\n            if (this._peek != $SEMICOLON) {\n                throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan());\n            }\n            this._advance();\n            var strNum = this._input.substring(numberStart, this._index - 1);\n            try {\n                var charCode = parseInt(strNum, isHex ? 16 : 10);\n                return String.fromCharCode(charCode);\n            }\n            catch (e) {\n                var entity = this._input.substring(start.offset + 1, this._index - 1);\n                throw this._createError(_unknownEntityErrorMsg(entity), this._getSpan(start));\n            }\n        }\n        else {\n            var startPosition = this._savePosition();\n            this._attemptCharCodeUntilFn(isNamedEntityEnd);\n            if (this._peek != $SEMICOLON) {\n                this._restorePosition(startPosition);\n                return '&';\n            }\n            this._advance();\n            var name_1 = this._input.substring(start.offset + 1, this._index - 1);\n            var char = NAMED_ENTITIES[name_1];\n            if (!char) {\n                throw this._createError(_unknownEntityErrorMsg(name_1), this._getSpan(start));\n            }\n            return char;\n        }\n    };\n    _Tokenizer.prototype._consumeRawText = function (decodeEntities, firstCharOfEnd, attemptEndRest) {\n        var tagCloseStart;\n        var textStart = this._getLocation();\n        this._beginToken(decodeEntities ? TokenType$1.ESCAPABLE_RAW_TEXT : TokenType$1.RAW_TEXT, textStart);\n        var parts = [];\n        while (true) {\n            tagCloseStart = this._getLocation();\n            if (this._attemptCharCode(firstCharOfEnd) && attemptEndRest()) {\n                break;\n            }\n            if (this._index > tagCloseStart.offset) {\n                // add the characters consumed by the previous if statement to the output\n                parts.push(this._input.substring(tagCloseStart.offset, this._index));\n            }\n            while (this._peek !== firstCharOfEnd) {\n                parts.push(this._readChar(decodeEntities));\n            }\n        }\n        return this._endToken([this._processCarriageReturns(parts.join(''))], tagCloseStart);\n    };\n    _Tokenizer.prototype._consumeComment = function (start) {\n        var _this = this;\n        this._beginToken(TokenType$1.COMMENT_START, start);\n        this._requireCharCode($MINUS);\n        this._endToken([]);\n        var textToken = this._consumeRawText(false, $MINUS, function () { return _this._attemptStr('->'); });\n        this._beginToken(TokenType$1.COMMENT_END, textToken.sourceSpan.end);\n        this._endToken([]);\n    };\n    _Tokenizer.prototype._consumeCdata = function (start) {\n        var _this = this;\n        this._beginToken(TokenType$1.CDATA_START, start);\n        this._requireStr('CDATA[');\n        this._endToken([]);\n        var textToken = this._consumeRawText(false, $RBRACKET, function () { return _this._attemptStr(']>'); });\n        this._beginToken(TokenType$1.CDATA_END, textToken.sourceSpan.end);\n        this._endToken([]);\n    };\n    _Tokenizer.prototype._consumeDocType = function (start) {\n        this._beginToken(TokenType$1.DOC_TYPE, start);\n        this._attemptUntilChar($GT);\n        this._advance();\n        this._endToken([this._input.substring(start.offset + 2, this._index - 1)]);\n    };\n    _Tokenizer.prototype._consumePrefixAndName = function () {\n        var nameOrPrefixStart = this._index;\n        var prefix = null;\n        while (this._peek !== $COLON && !isPrefixEnd(this._peek)) {\n            this._advance();\n        }\n        var nameStart;\n        if (this._peek === $COLON) {\n            this._advance();\n            prefix = this._input.substring(nameOrPrefixStart, this._index - 1);\n            nameStart = this._index;\n        }\n        else {\n            nameStart = nameOrPrefixStart;\n        }\n        this._requireCharCodeUntilFn(isNameEnd, this._index === nameStart ? 1 : 0);\n        var name = this._input.substring(nameStart, this._index);\n        return [prefix, name];\n    };\n    _Tokenizer.prototype._consumeTagOpen = function (start) {\n        var savedPos = this._savePosition();\n        var tagName;\n        var lowercaseTagName;\n        try {\n            if (!isAsciiLetter(this._peek)) {\n                throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan());\n            }\n            var nameStart = this._index;\n            this._consumeTagOpenStart(start);\n            tagName = this._input.substring(nameStart, this._index);\n            lowercaseTagName = tagName.toLowerCase();\n            this._attemptCharCodeUntilFn(isNotWhitespace);\n            while (this._peek !== $SLASH && this._peek !== $GT) {\n                this._consumeAttributeName();\n                this._attemptCharCodeUntilFn(isNotWhitespace);\n                if (this._attemptCharCode($EQ)) {\n                    this._attemptCharCodeUntilFn(isNotWhitespace);\n                    this._consumeAttributeValue();\n                }\n                this._attemptCharCodeUntilFn(isNotWhitespace);\n            }\n            this._consumeTagOpenEnd();\n        }\n        catch (e) {\n            if (e instanceof _ControlFlowError) {\n                // When the start tag is invalid, assume we want a \"<\"\n                this._restorePosition(savedPos);\n                // Back to back text tokens are merged at the end\n                this._beginToken(TokenType$1.TEXT, start);\n                this._endToken(['<']);\n                return;\n            }\n            throw e;\n        }\n        var contentTokenType = this._getTagDefinition(tagName).contentType;\n        if (contentTokenType === TagContentType.RAW_TEXT) {\n            this._consumeRawTextWithTagClose(lowercaseTagName, false);\n        }\n        else if (contentTokenType === TagContentType.ESCAPABLE_RAW_TEXT) {\n            this._consumeRawTextWithTagClose(lowercaseTagName, true);\n        }\n    };\n    _Tokenizer.prototype._consumeRawTextWithTagClose = function (lowercaseTagName, decodeEntities) {\n        var _this = this;\n        var textToken = this._consumeRawText(decodeEntities, $LT, function () {\n            if (!_this._attemptCharCode($SLASH))\n                return false;\n            _this._attemptCharCodeUntilFn(isNotWhitespace);\n            if (!_this._attemptStrCaseInsensitive(lowercaseTagName))\n                return false;\n            _this._attemptCharCodeUntilFn(isNotWhitespace);\n            return _this._attemptCharCode($GT);\n        });\n        this._beginToken(TokenType$1.TAG_CLOSE, textToken.sourceSpan.end);\n        this._endToken([null, lowercaseTagName]);\n    };\n    _Tokenizer.prototype._consumeTagOpenStart = function (start) {\n        this._beginToken(TokenType$1.TAG_OPEN_START, start);\n        var parts = this._consumePrefixAndName();\n        this._endToken(parts);\n    };\n    _Tokenizer.prototype._consumeAttributeName = function () {\n        this._beginToken(TokenType$1.ATTR_NAME);\n        var prefixAndName = this._consumePrefixAndName();\n        this._endToken(prefixAndName);\n    };\n    _Tokenizer.prototype._consumeAttributeValue = function () {\n        this._beginToken(TokenType$1.ATTR_VALUE);\n        var value;\n        if (this._peek === $SQ || this._peek === $DQ) {\n            var quoteChar = this._peek;\n            this._advance();\n            var parts = [];\n            while (this._peek !== quoteChar) {\n                parts.push(this._readChar(true));\n            }\n            value = parts.join('');\n            this._advance();\n        }\n        else {\n            var valueStart = this._index;\n            this._requireCharCodeUntilFn(isNameEnd, 1);\n            value = this._input.substring(valueStart, this._index);\n        }\n        this._endToken([this._processCarriageReturns(value)]);\n    };\n    _Tokenizer.prototype._consumeTagOpenEnd = function () {\n        var tokenType = this._attemptCharCode($SLASH) ? TokenType$1.TAG_OPEN_END_VOID : TokenType$1.TAG_OPEN_END;\n        this._beginToken(tokenType);\n        this._requireCharCode($GT);\n        this._endToken([]);\n    };\n    _Tokenizer.prototype._consumeTagClose = function (start) {\n        this._beginToken(TokenType$1.TAG_CLOSE, start);\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        var prefixAndName = this._consumePrefixAndName();\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._requireCharCode($GT);\n        this._endToken(prefixAndName);\n    };\n    _Tokenizer.prototype._consumeExpansionFormStart = function () {\n        this._beginToken(TokenType$1.EXPANSION_FORM_START, this._getLocation());\n        this._requireCharCode($LBRACE);\n        this._endToken([]);\n        this._expansionCaseStack.push(TokenType$1.EXPANSION_FORM_START);\n        this._beginToken(TokenType$1.RAW_TEXT, this._getLocation());\n        var condition = this._readUntil($COMMA);\n        this._endToken([condition], this._getLocation());\n        this._requireCharCode($COMMA);\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._beginToken(TokenType$1.RAW_TEXT, this._getLocation());\n        var type = this._readUntil($COMMA);\n        this._endToken([type], this._getLocation());\n        this._requireCharCode($COMMA);\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n    };\n    _Tokenizer.prototype._consumeExpansionCaseStart = function () {\n        this._beginToken(TokenType$1.EXPANSION_CASE_VALUE, this._getLocation());\n        var value = this._readUntil($LBRACE).trim();\n        this._endToken([value], this._getLocation());\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._beginToken(TokenType$1.EXPANSION_CASE_EXP_START, this._getLocation());\n        this._requireCharCode($LBRACE);\n        this._endToken([], this._getLocation());\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._expansionCaseStack.push(TokenType$1.EXPANSION_CASE_EXP_START);\n    };\n    _Tokenizer.prototype._consumeExpansionCaseEnd = function () {\n        this._beginToken(TokenType$1.EXPANSION_CASE_EXP_END, this._getLocation());\n        this._requireCharCode($RBRACE);\n        this._endToken([], this._getLocation());\n        this._attemptCharCodeUntilFn(isNotWhitespace);\n        this._expansionCaseStack.pop();\n    };\n    _Tokenizer.prototype._consumeExpansionFormEnd = function () {\n        this._beginToken(TokenType$1.EXPANSION_FORM_END, this._getLocation());\n        this._requireCharCode($RBRACE);\n        this._endToken([]);\n        this._expansionCaseStack.pop();\n    };\n    _Tokenizer.prototype._consumeText = function () {\n        var start = this._getLocation();\n        this._beginToken(TokenType$1.TEXT, start);\n        var parts = [];\n        do {\n            if (this._interpolationConfig && this._attemptStr(this._interpolationConfig.start)) {\n                parts.push(this._interpolationConfig.start);\n                this._inInterpolation = true;\n            }\n            else if (this._interpolationConfig && this._inInterpolation &&\n                this._attemptStr(this._interpolationConfig.end)) {\n                parts.push(this._interpolationConfig.end);\n                this._inInterpolation = false;\n            }\n            else {\n                parts.push(this._readChar(true));\n            }\n        } while (!this._isTextEnd());\n        this._endToken([this._processCarriageReturns(parts.join(''))]);\n    };\n    _Tokenizer.prototype._isTextEnd = function () {\n        if (this._peek === $LT || this._peek === $EOF) {\n            return true;\n        }\n        if (this._tokenizeIcu && !this._inInterpolation) {\n            if (isExpansionFormStart(this._input, this._index, this._interpolationConfig)) {\n                // start of an expansion form\n                return true;\n            }\n            if (this._peek === $RBRACE && this._isInExpansionCase()) {\n                // end of and expansion case\n                return true;\n            }\n        }\n        return false;\n    };\n    _Tokenizer.prototype._savePosition = function () {\n        return [this._peek, this._index, this._column, this._line, this.tokens.length];\n    };\n    _Tokenizer.prototype._readUntil = function (char) {\n        var start = this._index;\n        this._attemptUntilChar(char);\n        return this._input.substring(start, this._index);\n    };\n    _Tokenizer.prototype._restorePosition = function (position) {\n        this._peek = position[0];\n        this._index = position[1];\n        this._column = position[2];\n        this._line = position[3];\n        var nbTokens = position[4];\n        if (nbTokens < this.tokens.length) {\n            // remove any extra tokens\n            this.tokens = this.tokens.slice(0, nbTokens);\n        }\n    };\n    _Tokenizer.prototype._isInExpansionCase = function () {\n        return this._expansionCaseStack.length > 0 &&\n            this._expansionCaseStack[this._expansionCaseStack.length - 1] ===\n                TokenType$1.EXPANSION_CASE_EXP_START;\n    };\n    _Tokenizer.prototype._isInExpansionForm = function () {\n        return this._expansionCaseStack.length > 0 &&\n            this._expansionCaseStack[this._expansionCaseStack.length - 1] ===\n                TokenType$1.EXPANSION_FORM_START;\n    };\n    return _Tokenizer;\n}());\nfunction isNotWhitespace(code) {\n    return !isWhitespace(code) || code === $EOF;\n}\nfunction isNameEnd(code) {\n    return isWhitespace(code) || code === $GT || code === $SLASH ||\n        code === $SQ || code === $DQ || code === $EQ;\n}\nfunction isPrefixEnd(code) {\n    return (code < $a || $z < code) && (code < $A || $Z < code) &&\n        (code < $0 || code > $9);\n}\nfunction isDigitEntityEnd(code) {\n    return code == $SEMICOLON || code == $EOF || !isAsciiHexDigit(code);\n}\nfunction isNamedEntityEnd(code) {\n    return code == $SEMICOLON || code == $EOF || !isAsciiLetter(code);\n}\nfunction isExpansionFormStart(input, offset, interpolationConfig) {\n    var isInterpolationStart = interpolationConfig ? input.indexOf(interpolationConfig.start, offset) == offset : false;\n    return input.charCodeAt(offset) == $LBRACE && !isInterpolationStart;\n}\nfunction isExpansionCaseStart(peek) {\n    return peek === $EQ || isAsciiLetter(peek) || isDigit(peek);\n}\nfunction compareCharCodeCaseInsensitive(code1, code2) {\n    return toUpperCaseCharCode(code1) == toUpperCaseCharCode(code2);\n}\nfunction toUpperCaseCharCode(code) {\n    return code >= $a && code <= $z ? code - $a + $A : code;\n}\nfunction mergeTextTokens(srcTokens) {\n    var dstTokens = [];\n    var lastDstToken = undefined;\n    for (var i = 0; i < srcTokens.length; i++) {\n        var token = srcTokens[i];\n        if (lastDstToken && lastDstToken.type == TokenType$1.TEXT && token.type == TokenType$1.TEXT) {\n            lastDstToken.parts[0] += token.parts[0];\n            lastDstToken.sourceSpan.end = token.sourceSpan.end;\n        }\n        else {\n            lastDstToken = token;\n            dstTokens.push(lastDstToken);\n        }\n    }\n    return dstTokens;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TreeError = /** @class */ (function (_super) {\n    __extends(TreeError, _super);\n    function TreeError(elementName, span, msg) {\n        var _this = _super.call(this, span, msg) || this;\n        _this.elementName = elementName;\n        return _this;\n    }\n    TreeError.create = function (elementName, span, msg) {\n        return new TreeError(elementName, span, msg);\n    };\n    return TreeError;\n}(ParseError));\nvar ParseTreeResult = /** @class */ (function () {\n    function ParseTreeResult(rootNodes, errors) {\n        this.rootNodes = rootNodes;\n        this.errors = errors;\n    }\n    return ParseTreeResult;\n}());\nvar Parser$1 = /** @class */ (function () {\n    function Parser(getTagDefinition) {\n        this.getTagDefinition = getTagDefinition;\n    }\n    Parser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var tokensAndErrors = tokenize(source, url, this.getTagDefinition, parseExpansionForms, interpolationConfig);\n        var treeAndErrors = new _TreeBuilder(tokensAndErrors.tokens, this.getTagDefinition).build();\n        return new ParseTreeResult(treeAndErrors.rootNodes, tokensAndErrors.errors.concat(treeAndErrors.errors));\n    };\n    return Parser;\n}());\nvar _TreeBuilder = /** @class */ (function () {\n    function _TreeBuilder(tokens, getTagDefinition) {\n        this.tokens = tokens;\n        this.getTagDefinition = getTagDefinition;\n        this._index = -1;\n        this._rootNodes = [];\n        this._errors = [];\n        this._elementStack = [];\n        this._advance();\n    }\n    _TreeBuilder.prototype.build = function () {\n        while (this._peek.type !== TokenType$1.EOF) {\n            if (this._peek.type === TokenType$1.TAG_OPEN_START) {\n                this._consumeStartTag(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.TAG_CLOSE) {\n                this._consumeEndTag(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.CDATA_START) {\n                this._closeVoidElement();\n                this._consumeCdata(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.COMMENT_START) {\n                this._closeVoidElement();\n                this._consumeComment(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.TEXT || this._peek.type === TokenType$1.RAW_TEXT ||\n                this._peek.type === TokenType$1.ESCAPABLE_RAW_TEXT) {\n                this._closeVoidElement();\n                this._consumeText(this._advance());\n            }\n            else if (this._peek.type === TokenType$1.EXPANSION_FORM_START) {\n                this._consumeExpansion(this._advance());\n            }\n            else {\n                // Skip all other tokens...\n                this._advance();\n            }\n        }\n        return new ParseTreeResult(this._rootNodes, this._errors);\n    };\n    _TreeBuilder.prototype._advance = function () {\n        var prev = this._peek;\n        if (this._index < this.tokens.length - 1) {\n            // Note: there is always an EOF token at the end\n            this._index++;\n        }\n        this._peek = this.tokens[this._index];\n        return prev;\n    };\n    _TreeBuilder.prototype._advanceIf = function (type) {\n        if (this._peek.type === type) {\n            return this._advance();\n        }\n        return null;\n    };\n    _TreeBuilder.prototype._consumeCdata = function (startToken) {\n        this._consumeText(this._advance());\n        this._advanceIf(TokenType$1.CDATA_END);\n    };\n    _TreeBuilder.prototype._consumeComment = function (token) {\n        var text = this._advanceIf(TokenType$1.RAW_TEXT);\n        this._advanceIf(TokenType$1.COMMENT_END);\n        var value = text != null ? text.parts[0].trim() : null;\n        this._addToParent(new Comment(value, token.sourceSpan));\n    };\n    _TreeBuilder.prototype._consumeExpansion = function (token) {\n        var switchValue = this._advance();\n        var type = this._advance();\n        var cases = [];\n        // read =\n        while (this._peek.type === TokenType$1.EXPANSION_CASE_VALUE) {\n            var expCase = this._parseExpansionCase();\n            if (!expCase)\n                return; // error\n            cases.push(expCase);\n        }\n        // read the final }\n        if (this._peek.type !== TokenType$1.EXPANSION_FORM_END) {\n            this._errors.push(TreeError.create(null, this._peek.sourceSpan, \"Invalid ICU message. Missing '}'.\"));\n            return;\n        }\n        var sourceSpan = new ParseSourceSpan(token.sourceSpan.start, this._peek.sourceSpan.end);\n        this._addToParent(new Expansion(switchValue.parts[0], type.parts[0], cases, sourceSpan, switchValue.sourceSpan));\n        this._advance();\n    };\n    _TreeBuilder.prototype._parseExpansionCase = function () {\n        var value = this._advance();\n        // read {\n        if (this._peek.type !== TokenType$1.EXPANSION_CASE_EXP_START) {\n            this._errors.push(TreeError.create(null, this._peek.sourceSpan, \"Invalid ICU message. Missing '{'.\"));\n            return null;\n        }\n        // read until }\n        var start = this._advance();\n        var exp = this._collectExpansionExpTokens(start);\n        if (!exp)\n            return null;\n        var end = this._advance();\n        exp.push(new Token$1(TokenType$1.EOF, [], end.sourceSpan));\n        // parse everything in between { and }\n        var parsedExp = new _TreeBuilder(exp, this.getTagDefinition).build();\n        if (parsedExp.errors.length > 0) {\n            this._errors = this._errors.concat(parsedExp.errors);\n            return null;\n        }\n        var sourceSpan = new ParseSourceSpan(value.sourceSpan.start, end.sourceSpan.end);\n        var expSourceSpan = new ParseSourceSpan(start.sourceSpan.start, end.sourceSpan.end);\n        return new ExpansionCase(value.parts[0], parsedExp.rootNodes, sourceSpan, value.sourceSpan, expSourceSpan);\n    };\n    _TreeBuilder.prototype._collectExpansionExpTokens = function (start) {\n        var exp = [];\n        var expansionFormStack = [TokenType$1.EXPANSION_CASE_EXP_START];\n        while (true) {\n            if (this._peek.type === TokenType$1.EXPANSION_FORM_START ||\n                this._peek.type === TokenType$1.EXPANSION_CASE_EXP_START) {\n                expansionFormStack.push(this._peek.type);\n            }\n            if (this._peek.type === TokenType$1.EXPANSION_CASE_EXP_END) {\n                if (lastOnStack(expansionFormStack, TokenType$1.EXPANSION_CASE_EXP_START)) {\n                    expansionFormStack.pop();\n                    if (expansionFormStack.length == 0)\n                        return exp;\n                }\n                else {\n                    this._errors.push(TreeError.create(null, start.sourceSpan, \"Invalid ICU message. Missing '}'.\"));\n                    return null;\n                }\n            }\n            if (this._peek.type === TokenType$1.EXPANSION_FORM_END) {\n                if (lastOnStack(expansionFormStack, TokenType$1.EXPANSION_FORM_START)) {\n                    expansionFormStack.pop();\n                }\n                else {\n                    this._errors.push(TreeError.create(null, start.sourceSpan, \"Invalid ICU message. Missing '}'.\"));\n                    return null;\n                }\n            }\n            if (this._peek.type === TokenType$1.EOF) {\n                this._errors.push(TreeError.create(null, start.sourceSpan, \"Invalid ICU message. Missing '}'.\"));\n                return null;\n            }\n            exp.push(this._advance());\n        }\n    };\n    _TreeBuilder.prototype._consumeText = function (token) {\n        var text = token.parts[0];\n        if (text.length > 0 && text[0] == '\\n') {\n            var parent_1 = this._getParentElement();\n            if (parent_1 != null && parent_1.children.length == 0 &&\n                this.getTagDefinition(parent_1.name).ignoreFirstLf) {\n                text = text.substring(1);\n            }\n        }\n        if (text.length > 0) {\n            this._addToParent(new Text(text, token.sourceSpan));\n        }\n    };\n    _TreeBuilder.prototype._closeVoidElement = function () {\n        var el = this._getParentElement();\n        if (el && this.getTagDefinition(el.name).isVoid) {\n            this._elementStack.pop();\n        }\n    };\n    _TreeBuilder.prototype._consumeStartTag = function (startTagToken) {\n        var prefix = startTagToken.parts[0];\n        var name = startTagToken.parts[1];\n        var attrs = [];\n        while (this._peek.type === TokenType$1.ATTR_NAME) {\n            attrs.push(this._consumeAttr(this._advance()));\n        }\n        var fullName = this._getElementFullName(prefix, name, this._getParentElement());\n        var selfClosing = false;\n        // Note: There could have been a tokenizer error\n        // so that we don't get a token for the end tag...\n        if (this._peek.type === TokenType$1.TAG_OPEN_END_VOID) {\n            this._advance();\n            selfClosing = true;\n            var tagDef = this.getTagDefinition(fullName);\n            if (!(tagDef.canSelfClose || getNsPrefix(fullName) !== null || tagDef.isVoid)) {\n                this._errors.push(TreeError.create(fullName, startTagToken.sourceSpan, \"Only void and foreign elements can be self closed \\\"\" + startTagToken.parts[1] + \"\\\"\"));\n            }\n        }\n        else if (this._peek.type === TokenType$1.TAG_OPEN_END) {\n            this._advance();\n            selfClosing = false;\n        }\n        var end = this._peek.sourceSpan.start;\n        var span = new ParseSourceSpan(startTagToken.sourceSpan.start, end);\n        var el = new Element(fullName, attrs, [], span, span, undefined);\n        this._pushElement(el);\n        if (selfClosing) {\n            this._popElement(fullName);\n            el.endSourceSpan = span;\n        }\n    };\n    _TreeBuilder.prototype._pushElement = function (el) {\n        var parentEl = this._getParentElement();\n        if (parentEl && this.getTagDefinition(parentEl.name).isClosedByChild(el.name)) {\n            this._elementStack.pop();\n        }\n        var tagDef = this.getTagDefinition(el.name);\n        var _a = this._getParentElementSkippingContainers(), parent = _a.parent, container = _a.container;\n        if (parent && tagDef.requireExtraParent(parent.name)) {\n            var newParent = new Element(tagDef.parentToAdd, [], [], el.sourceSpan, el.startSourceSpan, el.endSourceSpan);\n            this._insertBeforeContainer(parent, container, newParent);\n        }\n        this._addToParent(el);\n        this._elementStack.push(el);\n    };\n    _TreeBuilder.prototype._consumeEndTag = function (endTagToken) {\n        var fullName = this._getElementFullName(endTagToken.parts[0], endTagToken.parts[1], this._getParentElement());\n        if (this._getParentElement()) {\n            this._getParentElement().endSourceSpan = endTagToken.sourceSpan;\n        }\n        if (this.getTagDefinition(fullName).isVoid) {\n            this._errors.push(TreeError.create(fullName, endTagToken.sourceSpan, \"Void elements do not have end tags \\\"\" + endTagToken.parts[1] + \"\\\"\"));\n        }\n        else if (!this._popElement(fullName)) {\n            var errMsg = \"Unexpected closing tag \\\"\" + fullName + \"\\\". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags\";\n            this._errors.push(TreeError.create(fullName, endTagToken.sourceSpan, errMsg));\n        }\n    };\n    _TreeBuilder.prototype._popElement = function (fullName) {\n        for (var stackIndex = this._elementStack.length - 1; stackIndex >= 0; stackIndex--) {\n            var el = this._elementStack[stackIndex];\n            if (el.name == fullName) {\n                this._elementStack.splice(stackIndex, this._elementStack.length - stackIndex);\n                return true;\n            }\n            if (!this.getTagDefinition(el.name).closedByParent) {\n                return false;\n            }\n        }\n        return false;\n    };\n    _TreeBuilder.prototype._consumeAttr = function (attrName) {\n        var fullName = mergeNsAndName(attrName.parts[0], attrName.parts[1]);\n        var end = attrName.sourceSpan.end;\n        var value = '';\n        var valueSpan = undefined;\n        if (this._peek.type === TokenType$1.ATTR_VALUE) {\n            var valueToken = this._advance();\n            value = valueToken.parts[0];\n            end = valueToken.sourceSpan.end;\n            valueSpan = valueToken.sourceSpan;\n        }\n        return new Attribute(fullName, value, new ParseSourceSpan(attrName.sourceSpan.start, end), valueSpan);\n    };\n    _TreeBuilder.prototype._getParentElement = function () {\n        return this._elementStack.length > 0 ? this._elementStack[this._elementStack.length - 1] : null;\n    };\n    /**\n     * Returns the parent in the DOM and the container.\n     *\n     * `<ng-container>` elements are skipped as they are not rendered as DOM element.\n     */\n    _TreeBuilder.prototype._getParentElementSkippingContainers = function () {\n        var container = null;\n        for (var i = this._elementStack.length - 1; i >= 0; i--) {\n            if (!isNgContainer(this._elementStack[i].name)) {\n                return { parent: this._elementStack[i], container: container };\n            }\n            container = this._elementStack[i];\n        }\n        return { parent: null, container: container };\n    };\n    _TreeBuilder.prototype._addToParent = function (node) {\n        var parent = this._getParentElement();\n        if (parent != null) {\n            parent.children.push(node);\n        }\n        else {\n            this._rootNodes.push(node);\n        }\n    };\n    /**\n     * Insert a node between the parent and the container.\n     * When no container is given, the node is appended as a child of the parent.\n     * Also updates the element stack accordingly.\n     *\n     * @internal\n     */\n    _TreeBuilder.prototype._insertBeforeContainer = function (parent, container, node) {\n        if (!container) {\n            this._addToParent(node);\n            this._elementStack.push(node);\n        }\n        else {\n            if (parent) {\n                // replace the container with the new node in the children\n                var index = parent.children.indexOf(container);\n                parent.children[index] = node;\n            }\n            else {\n                this._rootNodes.push(node);\n            }\n            node.children.push(container);\n            this._elementStack.splice(this._elementStack.indexOf(container), 0, node);\n        }\n    };\n    _TreeBuilder.prototype._getElementFullName = function (prefix, localName, parentElement) {\n        if (prefix == null) {\n            prefix = this.getTagDefinition(localName).implicitNamespacePrefix;\n            if (prefix == null && parentElement != null) {\n                prefix = getNsPrefix(parentElement.name);\n            }\n        }\n        return mergeNsAndName(prefix, localName);\n    };\n    return _TreeBuilder;\n}());\nfunction lastOnStack(stack, element) {\n    return stack.length > 0 && stack[stack.length - 1] === element;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction digest(message) {\n    return message.id || sha1(serializeNodes(message.nodes).join('') + (\"[\" + message.meaning + \"]\"));\n}\nfunction decimalDigest(message) {\n    if (message.id) {\n        return message.id;\n    }\n    var visitor = new _SerializerIgnoreIcuExpVisitor();\n    var parts = message.nodes.map(function (a) { return a.visit(visitor, null); });\n    return computeMsgId(parts.join(''), message.meaning);\n}\n/**\n * Serialize the i18n ast to something xml-like in order to generate an UID.\n *\n * The visitor is also used in the i18n parser tests\n *\n * @internal\n */\nvar _SerializerVisitor = /** @class */ (function () {\n    function _SerializerVisitor() {\n    }\n    _SerializerVisitor.prototype.visitText = function (text, context) { return text.value; };\n    _SerializerVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        return \"[\" + container.children.map(function (child) { return child.visit(_this); }).join(', ') + \"]\";\n    };\n    _SerializerVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var strCases = Object.keys(icu.cases).map(function (k) { return k + \" {\" + icu.cases[k].visit(_this) + \"}\"; });\n        return \"{\" + icu.expression + \", \" + icu.type + \", \" + strCases.join(', ') + \"}\";\n    };\n    _SerializerVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        return ph.isVoid ?\n            \"<ph tag name=\\\"\" + ph.startName + \"\\\"/>\" :\n            \"<ph tag name=\\\"\" + ph.startName + \"\\\">\" + ph.children.map(function (child) { return child.visit(_this); }).join(', ') + \"</ph name=\\\"\" + ph.closeName + \"\\\">\";\n    };\n    _SerializerVisitor.prototype.visitPlaceholder = function (ph, context) {\n        return ph.value ? \"<ph name=\\\"\" + ph.name + \"\\\">\" + ph.value + \"</ph>\" : \"<ph name=\\\"\" + ph.name + \"\\\"/>\";\n    };\n    _SerializerVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        return \"<ph icu name=\\\"\" + ph.name + \"\\\">\" + ph.value.visit(this) + \"</ph>\";\n    };\n    return _SerializerVisitor;\n}());\nvar serializerVisitor = new _SerializerVisitor();\nfunction serializeNodes(nodes) {\n    return nodes.map(function (a) { return a.visit(serializerVisitor, null); });\n}\n/**\n * Serialize the i18n ast to something xml-like in order to generate an UID.\n *\n * Ignore the ICU expressions so that message IDs stays identical if only the expression changes.\n *\n * @internal\n */\nvar _SerializerIgnoreIcuExpVisitor = /** @class */ (function (_super) {\n    __extends(_SerializerIgnoreIcuExpVisitor, _super);\n    function _SerializerIgnoreIcuExpVisitor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    _SerializerIgnoreIcuExpVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var strCases = Object.keys(icu.cases).map(function (k) { return k + \" {\" + icu.cases[k].visit(_this) + \"}\"; });\n        // Do not take the expression into account\n        return \"{\" + icu.type + \", \" + strCases.join(', ') + \"}\";\n    };\n    return _SerializerIgnoreIcuExpVisitor;\n}(_SerializerVisitor));\n/**\n * Compute the SHA1 of the given string\n *\n * see http://csrc.nist.gov/publications/fips/fips180-4/fips-180-4.pdf\n *\n * WARNING: this function has not been designed not tested with security in mind.\n *          DO NOT USE IT IN A SECURITY SENSITIVE CONTEXT.\n */\nfunction sha1(str) {\n    var utf8 = utf8Encode(str);\n    var words32 = stringToWords32(utf8, Endian.Big);\n    var len = utf8.length * 8;\n    var w = new Array(80);\n    var _a = __read([0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0], 5), a = _a[0], b = _a[1], c = _a[2], d = _a[3], e = _a[4];\n    words32[len >> 5] |= 0x80 << (24 - len % 32);\n    words32[((len + 64 >> 9) << 4) + 15] = len;\n    for (var i = 0; i < words32.length; i += 16) {\n        var _b = __read([a, b, c, d, e], 5), h0 = _b[0], h1 = _b[1], h2 = _b[2], h3 = _b[3], h4 = _b[4];\n        for (var j = 0; j < 80; j++) {\n            if (j < 16) {\n                w[j] = words32[i + j];\n            }\n            else {\n                w[j] = rol32(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);\n            }\n            var _c = __read(fk(j, b, c, d), 2), f = _c[0], k = _c[1];\n            var temp = [rol32(a, 5), f, e, k, w[j]].reduce(add32);\n            _d = __read([d, c, rol32(b, 30), a, temp], 5), e = _d[0], d = _d[1], c = _d[2], b = _d[3], a = _d[4];\n        }\n        _e = __read([add32(a, h0), add32(b, h1), add32(c, h2), add32(d, h3), add32(e, h4)], 5), a = _e[0], b = _e[1], c = _e[2], d = _e[3], e = _e[4];\n    }\n    return byteStringToHexString(words32ToByteString([a, b, c, d, e]));\n    var _d, _e;\n}\nfunction fk(index, b, c, d) {\n    if (index < 20) {\n        return [(b & c) | (~b & d), 0x5a827999];\n    }\n    if (index < 40) {\n        return [b ^ c ^ d, 0x6ed9eba1];\n    }\n    if (index < 60) {\n        return [(b & c) | (b & d) | (c & d), 0x8f1bbcdc];\n    }\n    return [b ^ c ^ d, 0xca62c1d6];\n}\n/**\n * Compute the fingerprint of the given string\n *\n * The output is 64 bit number encoded as a decimal string\n *\n * based on:\n * https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/GoogleJsMessageIdGenerator.java\n */\nfunction fingerprint(str) {\n    var utf8 = utf8Encode(str);\n    var _a = __read([hash32(utf8, 0), hash32(utf8, 102072)], 2), hi = _a[0], lo = _a[1];\n    if (hi == 0 && (lo == 0 || lo == 1)) {\n        hi = hi ^ 0x130f9bef;\n        lo = lo ^ -0x6b5f56d8;\n    }\n    return [hi, lo];\n}\nfunction computeMsgId(msg, meaning) {\n    var _a = __read(fingerprint(msg), 2), hi = _a[0], lo = _a[1];\n    if (meaning) {\n        var _b = __read(fingerprint(meaning), 2), him = _b[0], lom = _b[1];\n        _c = __read(add64(rol64([hi, lo], 1), [him, lom]), 2), hi = _c[0], lo = _c[1];\n    }\n    return byteStringToDecString(words32ToByteString([hi & 0x7fffffff, lo]));\n    var _c;\n}\nfunction hash32(str, c) {\n    var _a = __read([0x9e3779b9, 0x9e3779b9], 2), a = _a[0], b = _a[1];\n    var i;\n    var len = str.length;\n    for (i = 0; i + 12 <= len; i += 12) {\n        a = add32(a, wordAt(str, i, Endian.Little));\n        b = add32(b, wordAt(str, i + 4, Endian.Little));\n        c = add32(c, wordAt(str, i + 8, Endian.Little));\n        _b = __read(mix([a, b, c]), 3), a = _b[0], b = _b[1], c = _b[2];\n    }\n    a = add32(a, wordAt(str, i, Endian.Little));\n    b = add32(b, wordAt(str, i + 4, Endian.Little));\n    // the first byte of c is reserved for the length\n    c = add32(c, len);\n    c = add32(c, wordAt(str, i + 8, Endian.Little) << 8);\n    return mix([a, b, c])[2];\n    var _b;\n}\n// clang-format off\nfunction mix(_a) {\n    var _b = __read(_a, 3), a = _b[0], b = _b[1], c = _b[2];\n    a = sub32(a, b);\n    a = sub32(a, c);\n    a ^= c >>> 13;\n    b = sub32(b, c);\n    b = sub32(b, a);\n    b ^= a << 8;\n    c = sub32(c, a);\n    c = sub32(c, b);\n    c ^= b >>> 13;\n    a = sub32(a, b);\n    a = sub32(a, c);\n    a ^= c >>> 12;\n    b = sub32(b, c);\n    b = sub32(b, a);\n    b ^= a << 16;\n    c = sub32(c, a);\n    c = sub32(c, b);\n    c ^= b >>> 5;\n    a = sub32(a, b);\n    a = sub32(a, c);\n    a ^= c >>> 3;\n    b = sub32(b, c);\n    b = sub32(b, a);\n    b ^= a << 10;\n    c = sub32(c, a);\n    c = sub32(c, b);\n    c ^= b >>> 15;\n    return [a, b, c];\n}\n// clang-format on\n// Utils\nvar Endian;\n(function (Endian) {\n    Endian[Endian[\"Little\"] = 0] = \"Little\";\n    Endian[Endian[\"Big\"] = 1] = \"Big\";\n})(Endian || (Endian = {}));\nfunction add32(a, b) {\n    return add32to64(a, b)[1];\n}\nfunction add32to64(a, b) {\n    var low = (a & 0xffff) + (b & 0xffff);\n    var high = (a >>> 16) + (b >>> 16) + (low >>> 16);\n    return [high >>> 16, (high << 16) | (low & 0xffff)];\n}\nfunction add64(_a, _b) {\n    var _c = __read(_a, 2), ah = _c[0], al = _c[1];\n    var _d = __read(_b, 2), bh = _d[0], bl = _d[1];\n    var _e = __read(add32to64(al, bl), 2), carry = _e[0], l = _e[1];\n    var h = add32(add32(ah, bh), carry);\n    return [h, l];\n}\nfunction sub32(a, b) {\n    var low = (a & 0xffff) - (b & 0xffff);\n    var high = (a >> 16) - (b >> 16) + (low >> 16);\n    return (high << 16) | (low & 0xffff);\n}\n// Rotate a 32b number left `count` position\nfunction rol32(a, count) {\n    return (a << count) | (a >>> (32 - count));\n}\n// Rotate a 64b number left `count` position\nfunction rol64(_a, count) {\n    var _b = __read(_a, 2), hi = _b[0], lo = _b[1];\n    var h = (hi << count) | (lo >>> (32 - count));\n    var l = (lo << count) | (hi >>> (32 - count));\n    return [h, l];\n}\nfunction stringToWords32(str, endian) {\n    var words32 = Array((str.length + 3) >>> 2);\n    for (var i = 0; i < words32.length; i++) {\n        words32[i] = wordAt(str, i * 4, endian);\n    }\n    return words32;\n}\nfunction byteAt(str, index) {\n    return index >= str.length ? 0 : str.charCodeAt(index) & 0xff;\n}\nfunction wordAt(str, index, endian) {\n    var word = 0;\n    if (endian === Endian.Big) {\n        for (var i = 0; i < 4; i++) {\n            word += byteAt(str, index + i) << (24 - 8 * i);\n        }\n    }\n    else {\n        for (var i = 0; i < 4; i++) {\n            word += byteAt(str, index + i) << 8 * i;\n        }\n    }\n    return word;\n}\nfunction words32ToByteString(words32) {\n    return words32.reduce(function (str, word) { return str + word32ToByteString(word); }, '');\n}\nfunction word32ToByteString(word) {\n    var str = '';\n    for (var i = 0; i < 4; i++) {\n        str += String.fromCharCode((word >>> 8 * (3 - i)) & 0xff);\n    }\n    return str;\n}\nfunction byteStringToHexString(str) {\n    var hex = '';\n    for (var i = 0; i < str.length; i++) {\n        var b = byteAt(str, i);\n        hex += (b >>> 4).toString(16) + (b & 0x0f).toString(16);\n    }\n    return hex.toLowerCase();\n}\n// based on http://www.danvk.org/hex2dec.html (JS can not handle more than 56b)\nfunction byteStringToDecString(str) {\n    var decimal = '';\n    var toThePower = '1';\n    for (var i = str.length - 1; i >= 0; i--) {\n        decimal = addBigInt(decimal, numberTimesBigInt(byteAt(str, i), toThePower));\n        toThePower = numberTimesBigInt(256, toThePower);\n    }\n    return decimal.split('').reverse().join('');\n}\n// x and y decimal, lowest significant digit first\nfunction addBigInt(x, y) {\n    var sum = '';\n    var len = Math.max(x.length, y.length);\n    for (var i = 0, carry = 0; i < len || carry; i++) {\n        var tmpSum = carry + +(x[i] || 0) + +(y[i] || 0);\n        if (tmpSum >= 10) {\n            carry = 1;\n            sum += tmpSum - 10;\n        }\n        else {\n            carry = 0;\n            sum += tmpSum;\n        }\n    }\n    return sum;\n}\nfunction numberTimesBigInt(num, b) {\n    var product = '';\n    var bToThePower = b;\n    for (; num !== 0; num = num >>> 1) {\n        if (num & 1)\n            product = addBigInt(product, bToThePower);\n        bToThePower = addBigInt(bToThePower, bToThePower);\n    }\n    return product;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Message = /** @class */ (function () {\n    /**\n     * @param nodes message AST\n     * @param placeholders maps placeholder names to static content\n     * @param placeholderToMessage maps placeholder names to messages (used for nested ICU messages)\n     * @param meaning\n     * @param description\n     * @param id\n     */\n    function Message(nodes, placeholders, placeholderToMessage, meaning, description, id) {\n        this.nodes = nodes;\n        this.placeholders = placeholders;\n        this.placeholderToMessage = placeholderToMessage;\n        this.meaning = meaning;\n        this.description = description;\n        this.id = id;\n        if (nodes.length) {\n            this.sources = [{\n                    filePath: nodes[0].sourceSpan.start.file.url,\n                    startLine: nodes[0].sourceSpan.start.line + 1,\n                    startCol: nodes[0].sourceSpan.start.col + 1,\n                    endLine: nodes[nodes.length - 1].sourceSpan.end.line + 1,\n                    endCol: nodes[0].sourceSpan.start.col + 1\n                }];\n        }\n        else {\n            this.sources = [];\n        }\n    }\n    return Message;\n}());\nvar Text$1 = /** @class */ (function () {\n    function Text(value, sourceSpan) {\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    Text.prototype.visit = function (visitor, context) { return visitor.visitText(this, context); };\n    return Text;\n}());\n// TODO(vicb): do we really need this node (vs an array) ?\nvar Container = /** @class */ (function () {\n    function Container(children, sourceSpan) {\n        this.children = children;\n        this.sourceSpan = sourceSpan;\n    }\n    Container.prototype.visit = function (visitor, context) { return visitor.visitContainer(this, context); };\n    return Container;\n}());\nvar Icu = /** @class */ (function () {\n    function Icu(expression, type, cases, sourceSpan) {\n        this.expression = expression;\n        this.type = type;\n        this.cases = cases;\n        this.sourceSpan = sourceSpan;\n    }\n    Icu.prototype.visit = function (visitor, context) { return visitor.visitIcu(this, context); };\n    return Icu;\n}());\nvar TagPlaceholder = /** @class */ (function () {\n    function TagPlaceholder(tag, attrs, startName, closeName, children, isVoid, sourceSpan) {\n        this.tag = tag;\n        this.attrs = attrs;\n        this.startName = startName;\n        this.closeName = closeName;\n        this.children = children;\n        this.isVoid = isVoid;\n        this.sourceSpan = sourceSpan;\n    }\n    TagPlaceholder.prototype.visit = function (visitor, context) { return visitor.visitTagPlaceholder(this, context); };\n    return TagPlaceholder;\n}());\nvar Placeholder = /** @class */ (function () {\n    function Placeholder(value, name, sourceSpan) {\n        this.value = value;\n        this.name = name;\n        this.sourceSpan = sourceSpan;\n    }\n    Placeholder.prototype.visit = function (visitor, context) { return visitor.visitPlaceholder(this, context); };\n    return Placeholder;\n}());\nvar IcuPlaceholder = /** @class */ (function () {\n    function IcuPlaceholder(value, name, sourceSpan) {\n        this.value = value;\n        this.name = name;\n        this.sourceSpan = sourceSpan;\n    }\n    IcuPlaceholder.prototype.visit = function (visitor, context) { return visitor.visitIcuPlaceholder(this, context); };\n    return IcuPlaceholder;\n}());\n// Clone the AST\nvar CloneVisitor = /** @class */ (function () {\n    function CloneVisitor() {\n    }\n    CloneVisitor.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };\n    CloneVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        var children = container.children.map(function (n) { return n.visit(_this, context); });\n        return new Container(children, container.sourceSpan);\n    };\n    CloneVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var cases = {};\n        Object.keys(icu.cases).forEach(function (key) { return cases[key] = icu.cases[key].visit(_this, context); });\n        var msg = new Icu(icu.expression, icu.type, cases, icu.sourceSpan);\n        msg.expressionPlaceholder = icu.expressionPlaceholder;\n        return msg;\n    };\n    CloneVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        var children = ph.children.map(function (n) { return n.visit(_this, context); });\n        return new TagPlaceholder(ph.tag, ph.attrs, ph.startName, ph.closeName, children, ph.isVoid, ph.sourceSpan);\n    };\n    CloneVisitor.prototype.visitPlaceholder = function (ph, context) {\n        return new Placeholder(ph.value, ph.name, ph.sourceSpan);\n    };\n    CloneVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        return new IcuPlaceholder(ph.value, ph.name, ph.sourceSpan);\n    };\n    return CloneVisitor;\n}());\n// Visit all the nodes recursively\nvar RecurseVisitor = /** @class */ (function () {\n    function RecurseVisitor() {\n    }\n    RecurseVisitor.prototype.visitText = function (text, context) { };\n    RecurseVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        container.children.forEach(function (child) { return child.visit(_this); });\n    };\n    RecurseVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        Object.keys(icu.cases).forEach(function (k) { icu.cases[k].visit(_this); });\n    };\n    RecurseVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        ph.children.forEach(function (child) { return child.visit(_this); });\n    };\n    RecurseVisitor.prototype.visitPlaceholder = function (ph, context) { };\n    RecurseVisitor.prototype.visitIcuPlaceholder = function (ph, context) { };\n    return RecurseVisitor;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TAG_TO_PLACEHOLDER_NAMES = {\n    'A': 'LINK',\n    'B': 'BOLD_TEXT',\n    'BR': 'LINE_BREAK',\n    'EM': 'EMPHASISED_TEXT',\n    'H1': 'HEADING_LEVEL1',\n    'H2': 'HEADING_LEVEL2',\n    'H3': 'HEADING_LEVEL3',\n    'H4': 'HEADING_LEVEL4',\n    'H5': 'HEADING_LEVEL5',\n    'H6': 'HEADING_LEVEL6',\n    'HR': 'HORIZONTAL_RULE',\n    'I': 'ITALIC_TEXT',\n    'LI': 'LIST_ITEM',\n    'LINK': 'MEDIA_LINK',\n    'OL': 'ORDERED_LIST',\n    'P': 'PARAGRAPH',\n    'Q': 'QUOTATION',\n    'S': 'STRIKETHROUGH_TEXT',\n    'SMALL': 'SMALL_TEXT',\n    'SUB': 'SUBSTRIPT',\n    'SUP': 'SUPERSCRIPT',\n    'TBODY': 'TABLE_BODY',\n    'TD': 'TABLE_CELL',\n    'TFOOT': 'TABLE_FOOTER',\n    'TH': 'TABLE_HEADER_CELL',\n    'THEAD': 'TABLE_HEADER',\n    'TR': 'TABLE_ROW',\n    'TT': 'MONOSPACED_TEXT',\n    'U': 'UNDERLINED_TEXT',\n    'UL': 'UNORDERED_LIST',\n};\n/**\n * Creates unique names for placeholder with different content.\n *\n * Returns the same placeholder name when the content is identical.\n */\nvar PlaceholderRegistry = /** @class */ (function () {\n    function PlaceholderRegistry() {\n        // Count the occurrence of the base name top generate a unique name\n        this._placeHolderNameCounts = {};\n        // Maps signature to placeholder names\n        this._signatureToName = {};\n    }\n    PlaceholderRegistry.prototype.getStartTagPlaceholderName = function (tag, attrs, isVoid) {\n        var signature = this._hashTag(tag, attrs, isVoid);\n        if (this._signatureToName[signature]) {\n            return this._signatureToName[signature];\n        }\n        var upperTag = tag.toUpperCase();\n        var baseName = TAG_TO_PLACEHOLDER_NAMES[upperTag] || \"TAG_\" + upperTag;\n        var name = this._generateUniqueName(isVoid ? baseName : \"START_\" + baseName);\n        this._signatureToName[signature] = name;\n        return name;\n    };\n    PlaceholderRegistry.prototype.getCloseTagPlaceholderName = function (tag) {\n        var signature = this._hashClosingTag(tag);\n        if (this._signatureToName[signature]) {\n            return this._signatureToName[signature];\n        }\n        var upperTag = tag.toUpperCase();\n        var baseName = TAG_TO_PLACEHOLDER_NAMES[upperTag] || \"TAG_\" + upperTag;\n        var name = this._generateUniqueName(\"CLOSE_\" + baseName);\n        this._signatureToName[signature] = name;\n        return name;\n    };\n    PlaceholderRegistry.prototype.getPlaceholderName = function (name, content) {\n        var upperName = name.toUpperCase();\n        var signature = \"PH: \" + upperName + \"=\" + content;\n        if (this._signatureToName[signature]) {\n            return this._signatureToName[signature];\n        }\n        var uniqueName = this._generateUniqueName(upperName);\n        this._signatureToName[signature] = uniqueName;\n        return uniqueName;\n    };\n    PlaceholderRegistry.prototype.getUniquePlaceholder = function (name) {\n        return this._generateUniqueName(name.toUpperCase());\n    };\n    // Generate a hash for a tag - does not take attribute order into account\n    PlaceholderRegistry.prototype._hashTag = function (tag, attrs, isVoid) {\n        var start = \"<\" + tag;\n        var strAttrs = Object.keys(attrs).sort().map(function (name) { return \" \" + name + \"=\" + attrs[name]; }).join('');\n        var end = isVoid ? '/>' : \"></\" + tag + \">\";\n        return start + strAttrs + end;\n    };\n    PlaceholderRegistry.prototype._hashClosingTag = function (tag) { return this._hashTag(\"/\" + tag, {}, false); };\n    PlaceholderRegistry.prototype._generateUniqueName = function (base) {\n        var seen = this._placeHolderNameCounts.hasOwnProperty(base);\n        if (!seen) {\n            this._placeHolderNameCounts[base] = 1;\n            return base;\n        }\n        var id = this._placeHolderNameCounts[base];\n        this._placeHolderNameCounts[base] = id + 1;\n        return base + \"_\" + id;\n    };\n    return PlaceholderRegistry;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _expParser = new Parser(new Lexer());\n/**\n * Returns a function converting html nodes to an i18n Message given an interpolationConfig\n */\nfunction createI18nMessageFactory(interpolationConfig) {\n    var visitor = new _I18nVisitor(_expParser, interpolationConfig);\n    return function (nodes, meaning, description, id) {\n        return visitor.toI18nMessage(nodes, meaning, description, id);\n    };\n}\nvar _I18nVisitor = /** @class */ (function () {\n    function _I18nVisitor(_expressionParser, _interpolationConfig) {\n        this._expressionParser = _expressionParser;\n        this._interpolationConfig = _interpolationConfig;\n    }\n    _I18nVisitor.prototype.toI18nMessage = function (nodes, meaning, description, id) {\n        this._isIcu = nodes.length == 1 && nodes[0] instanceof Expansion;\n        this._icuDepth = 0;\n        this._placeholderRegistry = new PlaceholderRegistry();\n        this._placeholderToContent = {};\n        this._placeholderToMessage = {};\n        var i18nodes = visitAll(this, nodes, {});\n        return new Message(i18nodes, this._placeholderToContent, this._placeholderToMessage, meaning, description, id);\n    };\n    _I18nVisitor.prototype.visitElement = function (el, context) {\n        var children = visitAll(this, el.children);\n        var attrs = {};\n        el.attrs.forEach(function (attr) {\n            // Do not visit the attributes, translatable ones are top-level ASTs\n            attrs[attr.name] = attr.value;\n        });\n        var isVoid = getHtmlTagDefinition(el.name).isVoid;\n        var startPhName = this._placeholderRegistry.getStartTagPlaceholderName(el.name, attrs, isVoid);\n        this._placeholderToContent[startPhName] = el.sourceSpan.toString();\n        var closePhName = '';\n        if (!isVoid) {\n            closePhName = this._placeholderRegistry.getCloseTagPlaceholderName(el.name);\n            this._placeholderToContent[closePhName] = \"</\" + el.name + \">\";\n        }\n        return new TagPlaceholder(el.name, attrs, startPhName, closePhName, children, isVoid, el.sourceSpan);\n    };\n    _I18nVisitor.prototype.visitAttribute = function (attribute, context) {\n        return this._visitTextWithInterpolation(attribute.value, attribute.sourceSpan);\n    };\n    _I18nVisitor.prototype.visitText = function (text, context) {\n        return this._visitTextWithInterpolation(text.value, text.sourceSpan);\n    };\n    _I18nVisitor.prototype.visitComment = function (comment, context) { return null; };\n    _I18nVisitor.prototype.visitExpansion = function (icu, context) {\n        var _this = this;\n        this._icuDepth++;\n        var i18nIcuCases = {};\n        var i18nIcu = new Icu(icu.switchValue, icu.type, i18nIcuCases, icu.sourceSpan);\n        icu.cases.forEach(function (caze) {\n            i18nIcuCases[caze.value] = new Container(caze.expression.map(function (node) { return node.visit(_this, {}); }), caze.expSourceSpan);\n        });\n        this._icuDepth--;\n        if (this._isIcu || this._icuDepth > 0) {\n            // Returns an ICU node when:\n            // - the message (vs a part of the message) is an ICU message, or\n            // - the ICU message is nested.\n            var expPh = this._placeholderRegistry.getUniquePlaceholder(\"VAR_\" + icu.type);\n            i18nIcu.expressionPlaceholder = expPh;\n            this._placeholderToContent[expPh] = icu.switchValue;\n            return i18nIcu;\n        }\n        // Else returns a placeholder\n        // ICU placeholders should not be replaced with their original content but with the their\n        // translations. We need to create a new visitor (they are not re-entrant) to compute the\n        // message id.\n        // TODO(vicb): add a html.Node -> i18n.Message cache to avoid having to re-create the msg\n        var phName = this._placeholderRegistry.getPlaceholderName('ICU', icu.sourceSpan.toString());\n        var visitor = new _I18nVisitor(this._expressionParser, this._interpolationConfig);\n        this._placeholderToMessage[phName] = visitor.toI18nMessage([icu], '', '', '');\n        return new IcuPlaceholder(i18nIcu, phName, icu.sourceSpan);\n    };\n    _I18nVisitor.prototype.visitExpansionCase = function (icuCase, context) {\n        throw new Error('Unreachable code');\n    };\n    _I18nVisitor.prototype._visitTextWithInterpolation = function (text, sourceSpan) {\n        var splitInterpolation = this._expressionParser.splitInterpolation(text, sourceSpan.start.toString(), this._interpolationConfig);\n        if (!splitInterpolation) {\n            // No expression, return a single text\n            return new Text$1(text, sourceSpan);\n        }\n        // Return a group of text + expressions\n        var nodes = [];\n        var container = new Container(nodes, sourceSpan);\n        var _a = this._interpolationConfig, sDelimiter = _a.start, eDelimiter = _a.end;\n        for (var i = 0; i < splitInterpolation.strings.length - 1; i++) {\n            var expression = splitInterpolation.expressions[i];\n            var baseName = _extractPlaceholderName(expression) || 'INTERPOLATION';\n            var phName = this._placeholderRegistry.getPlaceholderName(baseName, expression);\n            if (splitInterpolation.strings[i].length) {\n                // No need to add empty strings\n                nodes.push(new Text$1(splitInterpolation.strings[i], sourceSpan));\n            }\n            nodes.push(new Placeholder(expression, phName, sourceSpan));\n            this._placeholderToContent[phName] = sDelimiter + expression + eDelimiter;\n        }\n        // The last index contains no expression\n        var lastStringIdx = splitInterpolation.strings.length - 1;\n        if (splitInterpolation.strings[lastStringIdx].length) {\n            nodes.push(new Text$1(splitInterpolation.strings[lastStringIdx], sourceSpan));\n        }\n        return container;\n    };\n    return _I18nVisitor;\n}());\nvar _CUSTOM_PH_EXP = /\\/\\/[\\s\\S]*i18n[\\s\\S]*\\([\\s\\S]*ph[\\s\\S]*=[\\s\\S]*(\"|')([\\s\\S]*?)\\1[\\s\\S]*\\)/g;\nfunction _extractPlaceholderName(input) {\n    return input.split(_CUSTOM_PH_EXP)[2];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An i18n error.\n */\nvar I18nError = /** @class */ (function (_super) {\n    __extends(I18nError, _super);\n    function I18nError(span, msg) {\n        return _super.call(this, span, msg) || this;\n    }\n    return I18nError;\n}(ParseError));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _I18N_ATTR = 'i18n';\nvar _I18N_ATTR_PREFIX = 'i18n-';\nvar _I18N_COMMENT_PREFIX_REGEXP = /^i18n:?/;\nvar MEANING_SEPARATOR = '|';\nvar ID_SEPARATOR = '@@';\nvar i18nCommentsWarned = false;\n/**\n * Extract translatable messages from an html AST\n */\n\nfunction mergeTranslations(nodes, translations, interpolationConfig, implicitTags, implicitAttrs) {\n    var visitor = new _Visitor(implicitTags, implicitAttrs);\n    return visitor.merge(nodes, translations, interpolationConfig);\n}\nvar ExtractionResult = /** @class */ (function () {\n    function ExtractionResult(messages, errors) {\n        this.messages = messages;\n        this.errors = errors;\n    }\n    return ExtractionResult;\n}());\nvar _VisitorMode;\n(function (_VisitorMode) {\n    _VisitorMode[_VisitorMode[\"Extract\"] = 0] = \"Extract\";\n    _VisitorMode[_VisitorMode[\"Merge\"] = 1] = \"Merge\";\n})(_VisitorMode || (_VisitorMode = {}));\n/**\n * This Visitor is used:\n * 1. to extract all the translatable strings from an html AST (see `extract()`),\n * 2. to replace the translatable strings with the actual translations (see `merge()`)\n *\n * @internal\n */\nvar _Visitor = /** @class */ (function () {\n    function _Visitor(_implicitTags, _implicitAttrs) {\n        this._implicitTags = _implicitTags;\n        this._implicitAttrs = _implicitAttrs;\n    }\n    /**\n     * Extracts the messages from the tree\n     */\n    _Visitor.prototype.extract = function (nodes, interpolationConfig) {\n        var _this = this;\n        this._init(_VisitorMode.Extract, interpolationConfig);\n        nodes.forEach(function (node) { return node.visit(_this, null); });\n        if (this._inI18nBlock) {\n            this._reportError(nodes[nodes.length - 1], 'Unclosed block');\n        }\n        return new ExtractionResult(this._messages, this._errors);\n    };\n    /**\n     * Returns a tree where all translatable nodes are translated\n     */\n    _Visitor.prototype.merge = function (nodes, translations, interpolationConfig) {\n        this._init(_VisitorMode.Merge, interpolationConfig);\n        this._translations = translations;\n        // Construct a single fake root element\n        var wrapper = new Element('wrapper', [], nodes, undefined, undefined, undefined);\n        var translatedNode = wrapper.visit(this, null);\n        if (this._inI18nBlock) {\n            this._reportError(nodes[nodes.length - 1], 'Unclosed block');\n        }\n        return new ParseTreeResult(translatedNode.children, this._errors);\n    };\n    _Visitor.prototype.visitExpansionCase = function (icuCase, context) {\n        // Parse cases for translatable html attributes\n        var expression = visitAll(this, icuCase.expression, context);\n        if (this._mode === _VisitorMode.Merge) {\n            return new ExpansionCase(icuCase.value, expression, icuCase.sourceSpan, icuCase.valueSourceSpan, icuCase.expSourceSpan);\n        }\n    };\n    _Visitor.prototype.visitExpansion = function (icu, context) {\n        this._mayBeAddBlockChildren(icu);\n        var wasInIcu = this._inIcu;\n        if (!this._inIcu) {\n            // nested ICU messages should not be extracted but top-level translated as a whole\n            if (this._isInTranslatableSection) {\n                this._addMessage([icu]);\n            }\n            this._inIcu = true;\n        }\n        var cases = visitAll(this, icu.cases, context);\n        if (this._mode === _VisitorMode.Merge) {\n            icu = new Expansion(icu.switchValue, icu.type, cases, icu.sourceSpan, icu.switchValueSourceSpan);\n        }\n        this._inIcu = wasInIcu;\n        return icu;\n    };\n    _Visitor.prototype.visitComment = function (comment, context) {\n        var isOpening = _isOpeningComment(comment);\n        if (isOpening && this._isInTranslatableSection) {\n            this._reportError(comment, 'Could not start a block inside a translatable section');\n            return;\n        }\n        var isClosing = _isClosingComment(comment);\n        if (isClosing && !this._inI18nBlock) {\n            this._reportError(comment, 'Trying to close an unopened block');\n            return;\n        }\n        if (!this._inI18nNode && !this._inIcu) {\n            if (!this._inI18nBlock) {\n                if (isOpening) {\n                    // deprecated from v5 you should use <ng-container i18n> instead of i18n comments\n                    if (!i18nCommentsWarned && console && console.warn) {\n                        i18nCommentsWarned = true;\n                        var details = comment.sourceSpan.details ? \", \" + comment.sourceSpan.details : '';\n                        // TODO(ocombe): use a log service once there is a public one available\n                        console.warn(\"I18n comments are deprecated, use an <ng-container> element instead (\" + comment.sourceSpan.start + details + \")\");\n                    }\n                    this._inI18nBlock = true;\n                    this._blockStartDepth = this._depth;\n                    this._blockChildren = [];\n                    this._blockMeaningAndDesc =\n                        comment.value.replace(_I18N_COMMENT_PREFIX_REGEXP, '').trim();\n                    this._openTranslatableSection(comment);\n                }\n            }\n            else {\n                if (isClosing) {\n                    if (this._depth == this._blockStartDepth) {\n                        this._closeTranslatableSection(comment, this._blockChildren);\n                        this._inI18nBlock = false;\n                        var message = this._addMessage(this._blockChildren, this._blockMeaningAndDesc);\n                        // merge attributes in sections\n                        var nodes = this._translateMessage(comment, message);\n                        return visitAll(this, nodes);\n                    }\n                    else {\n                        this._reportError(comment, 'I18N blocks should not cross element boundaries');\n                        return;\n                    }\n                }\n            }\n        }\n    };\n    _Visitor.prototype.visitText = function (text, context) {\n        if (this._isInTranslatableSection) {\n            this._mayBeAddBlockChildren(text);\n        }\n        return text;\n    };\n    _Visitor.prototype.visitElement = function (el, context) {\n        var _this = this;\n        this._mayBeAddBlockChildren(el);\n        this._depth++;\n        var wasInI18nNode = this._inI18nNode;\n        var wasInImplicitNode = this._inImplicitNode;\n        var childNodes = [];\n        var translatedChildNodes = undefined;\n        // Extract:\n        // - top level nodes with the (implicit) \"i18n\" attribute if not already in a section\n        // - ICU messages\n        var i18nAttr = _getI18nAttr(el);\n        var i18nMeta = i18nAttr ? i18nAttr.value : '';\n        var isImplicit = this._implicitTags.some(function (tag) { return el.name === tag; }) && !this._inIcu &&\n            !this._isInTranslatableSection;\n        var isTopLevelImplicit = !wasInImplicitNode && isImplicit;\n        this._inImplicitNode = wasInImplicitNode || isImplicit;\n        if (!this._isInTranslatableSection && !this._inIcu) {\n            if (i18nAttr || isTopLevelImplicit) {\n                this._inI18nNode = true;\n                var message = this._addMessage(el.children, i18nMeta);\n                translatedChildNodes = this._translateMessage(el, message);\n            }\n            if (this._mode == _VisitorMode.Extract) {\n                var isTranslatable = i18nAttr || isTopLevelImplicit;\n                if (isTranslatable)\n                    this._openTranslatableSection(el);\n                visitAll(this, el.children);\n                if (isTranslatable)\n                    this._closeTranslatableSection(el, el.children);\n            }\n        }\n        else {\n            if (i18nAttr || isTopLevelImplicit) {\n                this._reportError(el, 'Could not mark an element as translatable inside a translatable section');\n            }\n            if (this._mode == _VisitorMode.Extract) {\n                // Descend into child nodes for extraction\n                visitAll(this, el.children);\n            }\n        }\n        if (this._mode === _VisitorMode.Merge) {\n            var visitNodes = translatedChildNodes || el.children;\n            visitNodes.forEach(function (child) {\n                var visited = child.visit(_this, context);\n                if (visited && !_this._isInTranslatableSection) {\n                    // Do not add the children from translatable sections (= i18n blocks here)\n                    // They will be added later in this loop when the block closes (i.e. on `<!-- /i18n -->`)\n                    childNodes = childNodes.concat(visited);\n                }\n            });\n        }\n        this._visitAttributesOf(el);\n        this._depth--;\n        this._inI18nNode = wasInI18nNode;\n        this._inImplicitNode = wasInImplicitNode;\n        if (this._mode === _VisitorMode.Merge) {\n            var translatedAttrs = this._translateAttributes(el);\n            return new Element(el.name, translatedAttrs, childNodes, el.sourceSpan, el.startSourceSpan, el.endSourceSpan);\n        }\n        return null;\n    };\n    _Visitor.prototype.visitAttribute = function (attribute, context) {\n        throw new Error('unreachable code');\n    };\n    _Visitor.prototype._init = function (mode, interpolationConfig) {\n        this._mode = mode;\n        this._inI18nBlock = false;\n        this._inI18nNode = false;\n        this._depth = 0;\n        this._inIcu = false;\n        this._msgCountAtSectionStart = undefined;\n        this._errors = [];\n        this._messages = [];\n        this._inImplicitNode = false;\n        this._createI18nMessage = createI18nMessageFactory(interpolationConfig);\n    };\n    // looks for translatable attributes\n    _Visitor.prototype._visitAttributesOf = function (el) {\n        var _this = this;\n        var explicitAttrNameToValue = {};\n        var implicitAttrNames = this._implicitAttrs[el.name] || [];\n        el.attrs.filter(function (attr) { return attr.name.startsWith(_I18N_ATTR_PREFIX); })\n            .forEach(function (attr) { return explicitAttrNameToValue[attr.name.slice(_I18N_ATTR_PREFIX.length)] =\n            attr.value; });\n        el.attrs.forEach(function (attr) {\n            if (attr.name in explicitAttrNameToValue) {\n                _this._addMessage([attr], explicitAttrNameToValue[attr.name]);\n            }\n            else if (implicitAttrNames.some(function (name) { return attr.name === name; })) {\n                _this._addMessage([attr]);\n            }\n        });\n    };\n    // add a translatable message\n    _Visitor.prototype._addMessage = function (ast, msgMeta) {\n        if (ast.length == 0 ||\n            ast.length == 1 && ast[0] instanceof Attribute && !ast[0].value) {\n            // Do not create empty messages\n            return null;\n        }\n        var _a = _parseMessageMeta(msgMeta), meaning = _a.meaning, description = _a.description, id = _a.id;\n        var message = this._createI18nMessage(ast, meaning, description, id);\n        this._messages.push(message);\n        return message;\n    };\n    // Translates the given message given the `TranslationBundle`\n    // This is used for translating elements / blocks - see `_translateAttributes` for attributes\n    // no-op when called in extraction mode (returns [])\n    _Visitor.prototype._translateMessage = function (el, message) {\n        if (message && this._mode === _VisitorMode.Merge) {\n            var nodes = this._translations.get(message);\n            if (nodes) {\n                return nodes;\n            }\n            this._reportError(el, \"Translation unavailable for message id=\\\"\" + this._translations.digest(message) + \"\\\"\");\n        }\n        return [];\n    };\n    // translate the attributes of an element and remove i18n specific attributes\n    _Visitor.prototype._translateAttributes = function (el) {\n        var _this = this;\n        var attributes = el.attrs;\n        var i18nParsedMessageMeta = {};\n        attributes.forEach(function (attr) {\n            if (attr.name.startsWith(_I18N_ATTR_PREFIX)) {\n                i18nParsedMessageMeta[attr.name.slice(_I18N_ATTR_PREFIX.length)] =\n                    _parseMessageMeta(attr.value);\n            }\n        });\n        var translatedAttributes = [];\n        attributes.forEach(function (attr) {\n            if (attr.name === _I18N_ATTR || attr.name.startsWith(_I18N_ATTR_PREFIX)) {\n                // strip i18n specific attributes\n                return;\n            }\n            if (attr.value && attr.value != '' && i18nParsedMessageMeta.hasOwnProperty(attr.name)) {\n                var _a = i18nParsedMessageMeta[attr.name], meaning = _a.meaning, description = _a.description, id = _a.id;\n                var message = _this._createI18nMessage([attr], meaning, description, id);\n                var nodes = _this._translations.get(message);\n                if (nodes) {\n                    if (nodes.length == 0) {\n                        translatedAttributes.push(new Attribute(attr.name, '', attr.sourceSpan));\n                    }\n                    else if (nodes[0] instanceof Text) {\n                        var value = nodes[0].value;\n                        translatedAttributes.push(new Attribute(attr.name, value, attr.sourceSpan));\n                    }\n                    else {\n                        _this._reportError(el, \"Unexpected translation for attribute \\\"\" + attr.name + \"\\\" (id=\\\"\" + (id || _this._translations.digest(message)) + \"\\\")\");\n                    }\n                }\n                else {\n                    _this._reportError(el, \"Translation unavailable for attribute \\\"\" + attr.name + \"\\\" (id=\\\"\" + (id || _this._translations.digest(message)) + \"\\\")\");\n                }\n            }\n            else {\n                translatedAttributes.push(attr);\n            }\n        });\n        return translatedAttributes;\n    };\n    /**\n     * Add the node as a child of the block when:\n     * - we are in a block,\n     * - we are not inside a ICU message (those are handled separately),\n     * - the node is a \"direct child\" of the block\n     */\n    _Visitor.prototype._mayBeAddBlockChildren = function (node) {\n        if (this._inI18nBlock && !this._inIcu && this._depth == this._blockStartDepth) {\n            this._blockChildren.push(node);\n        }\n    };\n    /**\n     * Marks the start of a section, see `_closeTranslatableSection`\n     */\n    _Visitor.prototype._openTranslatableSection = function (node) {\n        if (this._isInTranslatableSection) {\n            this._reportError(node, 'Unexpected section start');\n        }\n        else {\n            this._msgCountAtSectionStart = this._messages.length;\n        }\n    };\n    Object.defineProperty(_Visitor.prototype, \"_isInTranslatableSection\", {\n        /**\n         * A translatable section could be:\n         * - the content of translatable element,\n         * - nodes between `<!-- i18n -->` and `<!-- /i18n -->` comments\n         */\n        get: function () {\n            return this._msgCountAtSectionStart !== void 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Terminates a section.\n     *\n     * If a section has only one significant children (comments not significant) then we should not\n     * keep the message from this children:\n     *\n     * `<p i18n=\"meaning|description\">{ICU message}</p>` would produce two messages:\n     * - one for the <p> content with meaning and description,\n     * - another one for the ICU message.\n     *\n     * In this case the last message is discarded as it contains less information (the AST is\n     * otherwise identical).\n     *\n     * Note that we should still keep messages extracted from attributes inside the section (ie in the\n     * ICU message here)\n     */\n    _Visitor.prototype._closeTranslatableSection = function (node, directChildren) {\n        if (!this._isInTranslatableSection) {\n            this._reportError(node, 'Unexpected section end');\n            return;\n        }\n        var startIndex = this._msgCountAtSectionStart;\n        var significantChildren = directChildren.reduce(function (count, node) { return count + (node instanceof Comment ? 0 : 1); }, 0);\n        if (significantChildren == 1) {\n            for (var i = this._messages.length - 1; i >= startIndex; i--) {\n                var ast = this._messages[i].nodes;\n                if (!(ast.length == 1 && ast[0] instanceof Text$1)) {\n                    this._messages.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this._msgCountAtSectionStart = undefined;\n    };\n    _Visitor.prototype._reportError = function (node, msg) {\n        this._errors.push(new I18nError(node.sourceSpan, msg));\n    };\n    return _Visitor;\n}());\nfunction _isOpeningComment(n) {\n    return !!(n instanceof Comment && n.value && n.value.startsWith('i18n'));\n}\nfunction _isClosingComment(n) {\n    return !!(n instanceof Comment && n.value && n.value === '/i18n');\n}\nfunction _getI18nAttr(p) {\n    return p.attrs.find(function (attr) { return attr.name === _I18N_ATTR; }) || null;\n}\nfunction _parseMessageMeta(i18n) {\n    if (!i18n)\n        return { meaning: '', description: '', id: '' };\n    var idIndex = i18n.indexOf(ID_SEPARATOR);\n    var descIndex = i18n.indexOf(MEANING_SEPARATOR);\n    var _a = __read((idIndex > -1) ? [i18n.slice(0, idIndex), i18n.slice(idIndex + 2)] : [i18n, ''], 2), meaningAndDesc = _a[0], id = _a[1];\n    var _b = __read((descIndex > -1) ?\n        [meaningAndDesc.slice(0, descIndex), meaningAndDesc.slice(descIndex + 1)] :\n        ['', meaningAndDesc], 2), meaning = _b[0], description = _b[1];\n    return { meaning: meaning, description: description, id: id };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar XmlTagDefinition = /** @class */ (function () {\n    function XmlTagDefinition() {\n        this.closedByParent = false;\n        this.contentType = TagContentType.PARSABLE_DATA;\n        this.isVoid = false;\n        this.ignoreFirstLf = false;\n        this.canSelfClose = true;\n    }\n    XmlTagDefinition.prototype.requireExtraParent = function (currentParent) { return false; };\n    XmlTagDefinition.prototype.isClosedByChild = function (name) { return false; };\n    return XmlTagDefinition;\n}());\nvar _TAG_DEFINITION = new XmlTagDefinition();\nfunction getXmlTagDefinition(tagName) {\n    return _TAG_DEFINITION;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar XmlParser = /** @class */ (function (_super) {\n    __extends(XmlParser, _super);\n    function XmlParser() {\n        return _super.call(this, getXmlTagDefinition) || this;\n    }\n    XmlParser.prototype.parse = function (source, url, parseExpansionForms) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        return _super.prototype.parse.call(this, source, url, parseExpansionForms);\n    };\n    return XmlParser;\n}(Parser$1));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Serializer = /** @class */ (function () {\n    function Serializer() {\n    }\n    // Creates a name mapper, see `PlaceholderMapper`\n    // Returning `null` means that no name mapping is used.\n    Serializer.prototype.createNameMapper = function (message) { return null; };\n    return Serializer;\n}());\n/**\n * A simple mapper that take a function to transform an internal name to a public name\n */\nvar SimplePlaceholderMapper = /** @class */ (function (_super) {\n    __extends(SimplePlaceholderMapper, _super);\n    // create a mapping from the message\n    function SimplePlaceholderMapper(message, mapName) {\n        var _this = _super.call(this) || this;\n        _this.mapName = mapName;\n        _this.internalToPublic = {};\n        _this.publicToNextId = {};\n        _this.publicToInternal = {};\n        message.nodes.forEach(function (node) { return node.visit(_this); });\n        return _this;\n    }\n    SimplePlaceholderMapper.prototype.toPublicName = function (internalName) {\n        return this.internalToPublic.hasOwnProperty(internalName) ?\n            this.internalToPublic[internalName] :\n            null;\n    };\n    SimplePlaceholderMapper.prototype.toInternalName = function (publicName) {\n        return this.publicToInternal.hasOwnProperty(publicName) ? this.publicToInternal[publicName] :\n            null;\n    };\n    SimplePlaceholderMapper.prototype.visitText = function (text, context) { return null; };\n    SimplePlaceholderMapper.prototype.visitTagPlaceholder = function (ph, context) {\n        this.visitPlaceholderName(ph.startName);\n        _super.prototype.visitTagPlaceholder.call(this, ph, context);\n        this.visitPlaceholderName(ph.closeName);\n    };\n    SimplePlaceholderMapper.prototype.visitPlaceholder = function (ph, context) { this.visitPlaceholderName(ph.name); };\n    SimplePlaceholderMapper.prototype.visitIcuPlaceholder = function (ph, context) {\n        this.visitPlaceholderName(ph.name);\n    };\n    // XMB placeholders could only contains A-Z, 0-9 and _\n    SimplePlaceholderMapper.prototype.visitPlaceholderName = function (internalName) {\n        if (!internalName || this.internalToPublic.hasOwnProperty(internalName)) {\n            return;\n        }\n        var publicName = this.mapName(internalName);\n        if (this.publicToInternal.hasOwnProperty(publicName)) {\n            // Create a new XMB when it has already been used\n            var nextId = this.publicToNextId[publicName];\n            this.publicToNextId[publicName] = nextId + 1;\n            publicName = publicName + \"_\" + nextId;\n        }\n        else {\n            this.publicToNextId[publicName] = 1;\n        }\n        this.internalToPublic[internalName] = publicName;\n        this.publicToInternal[publicName] = internalName;\n    };\n    return SimplePlaceholderMapper;\n}(RecurseVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _Visitor$1 = /** @class */ (function () {\n    function _Visitor() {\n    }\n    _Visitor.prototype.visitTag = function (tag) {\n        var _this = this;\n        var strAttrs = this._serializeAttributes(tag.attrs);\n        if (tag.children.length == 0) {\n            return \"<\" + tag.name + strAttrs + \"/>\";\n        }\n        var strChildren = tag.children.map(function (node) { return node.visit(_this); });\n        return \"<\" + tag.name + strAttrs + \">\" + strChildren.join('') + \"</\" + tag.name + \">\";\n    };\n    _Visitor.prototype.visitText = function (text) { return text.value; };\n    _Visitor.prototype.visitDeclaration = function (decl) {\n        return \"<?xml\" + this._serializeAttributes(decl.attrs) + \" ?>\";\n    };\n    _Visitor.prototype._serializeAttributes = function (attrs) {\n        var strAttrs = Object.keys(attrs).map(function (name) { return name + \"=\\\"\" + attrs[name] + \"\\\"\"; }).join(' ');\n        return strAttrs.length > 0 ? ' ' + strAttrs : '';\n    };\n    _Visitor.prototype.visitDoctype = function (doctype) {\n        return \"<!DOCTYPE \" + doctype.rootTag + \" [\\n\" + doctype.dtd + \"\\n]>\";\n    };\n    return _Visitor;\n}());\nvar _visitor = new _Visitor$1();\nfunction serialize(nodes) {\n    return nodes.map(function (node) { return node.visit(_visitor); }).join('');\n}\nvar Declaration = /** @class */ (function () {\n    function Declaration(unescapedAttrs) {\n        var _this = this;\n        this.attrs = {};\n        Object.keys(unescapedAttrs).forEach(function (k) {\n            _this.attrs[k] = escapeXml(unescapedAttrs[k]);\n        });\n    }\n    Declaration.prototype.visit = function (visitor) { return visitor.visitDeclaration(this); };\n    return Declaration;\n}());\nvar Doctype = /** @class */ (function () {\n    function Doctype(rootTag, dtd) {\n        this.rootTag = rootTag;\n        this.dtd = dtd;\n    }\n    Doctype.prototype.visit = function (visitor) { return visitor.visitDoctype(this); };\n    return Doctype;\n}());\nvar Tag = /** @class */ (function () {\n    function Tag(name, unescapedAttrs, children) {\n        if (unescapedAttrs === void 0) { unescapedAttrs = {}; }\n        if (children === void 0) { children = []; }\n        var _this = this;\n        this.name = name;\n        this.children = children;\n        this.attrs = {};\n        Object.keys(unescapedAttrs).forEach(function (k) {\n            _this.attrs[k] = escapeXml(unescapedAttrs[k]);\n        });\n    }\n    Tag.prototype.visit = function (visitor) { return visitor.visitTag(this); };\n    return Tag;\n}());\nvar Text$2 = /** @class */ (function () {\n    function Text(unescapedValue) {\n        this.value = escapeXml(unescapedValue);\n    }\n    Text.prototype.visit = function (visitor) { return visitor.visitText(this); };\n    return Text;\n}());\nvar CR = /** @class */ (function (_super) {\n    __extends(CR, _super);\n    function CR(ws) {\n        if (ws === void 0) { ws = 0; }\n        return _super.call(this, \"\\n\" + new Array(ws + 1).join(' ')) || this;\n    }\n    return CR;\n}(Text$2));\nvar _ESCAPED_CHARS = [\n    [/&/g, '&amp;'],\n    [/\"/g, '&quot;'],\n    [/'/g, '&apos;'],\n    [/</g, '&lt;'],\n    [/>/g, '&gt;'],\n];\n// Escape `_ESCAPED_CHARS` characters in the given text with encoded entities\nfunction escapeXml(text) {\n    return _ESCAPED_CHARS.reduce(function (text, entry) { return text.replace(entry[0], entry[1]); }, text);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _VERSION = '1.2';\nvar _XMLNS = 'urn:oasis:names:tc:xliff:document:1.2';\n// TODO(vicb): make this a param (s/_/-/)\nvar _DEFAULT_SOURCE_LANG = 'en';\nvar _PLACEHOLDER_TAG = 'x';\nvar _MARKER_TAG = 'mrk';\nvar _FILE_TAG = 'file';\nvar _SOURCE_TAG = 'source';\nvar _SEGMENT_SOURCE_TAG = 'seg-source';\nvar _TARGET_TAG = 'target';\nvar _UNIT_TAG = 'trans-unit';\nvar _CONTEXT_GROUP_TAG = 'context-group';\nvar _CONTEXT_TAG = 'context';\n// http://docs.oasis-open.org/xliff/v1.2/os/xliff-core.html\n// http://docs.oasis-open.org/xliff/v1.2/xliff-profile-html/xliff-profile-html-1.2.html\nvar Xliff = /** @class */ (function (_super) {\n    __extends(Xliff, _super);\n    function Xliff() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Xliff.prototype.write = function (messages, locale) {\n        var visitor = new _WriteVisitor();\n        var transUnits = [];\n        messages.forEach(function (message) {\n            var contextTags = [];\n            message.sources.forEach(function (source) {\n                var contextGroupTag = new Tag(_CONTEXT_GROUP_TAG, { purpose: 'location' });\n                contextGroupTag.children.push(new CR(10), new Tag(_CONTEXT_TAG, { 'context-type': 'sourcefile' }, [new Text$2(source.filePath)]), new CR(10), new Tag(_CONTEXT_TAG, { 'context-type': 'linenumber' }, [new Text$2(\"\" + source.startLine)]), new CR(8));\n                contextTags.push(new CR(8), contextGroupTag);\n            });\n            var transUnit = new Tag(_UNIT_TAG, { id: message.id, datatype: 'html' });\n            (_a = transUnit.children).push.apply(_a, __spread([new CR(8), new Tag(_SOURCE_TAG, {}, visitor.serialize(message.nodes))], contextTags));\n            if (message.description) {\n                transUnit.children.push(new CR(8), new Tag('note', { priority: '1', from: 'description' }, [new Text$2(message.description)]));\n            }\n            if (message.meaning) {\n                transUnit.children.push(new CR(8), new Tag('note', { priority: '1', from: 'meaning' }, [new Text$2(message.meaning)]));\n            }\n            transUnit.children.push(new CR(6));\n            transUnits.push(new CR(6), transUnit);\n            var _a;\n        });\n        var body = new Tag('body', {}, __spread(transUnits, [new CR(4)]));\n        var file = new Tag('file', {\n            'source-language': locale || _DEFAULT_SOURCE_LANG,\n            datatype: 'plaintext',\n            original: 'ng2.template',\n        }, [new CR(4), body, new CR(2)]);\n        var xliff = new Tag('xliff', { version: _VERSION, xmlns: _XMLNS }, [new CR(2), file, new CR()]);\n        return serialize([\n            new Declaration({ version: '1.0', encoding: 'UTF-8' }), new CR(), xliff, new CR()\n        ]);\n    };\n    Xliff.prototype.load = function (content, url) {\n        // xliff to xml nodes\n        var xliffParser = new XliffParser();\n        var _a = xliffParser.parse(content, url), locale = _a.locale, msgIdToHtml = _a.msgIdToHtml, errors = _a.errors;\n        // xml nodes to i18n nodes\n        var i18nNodesByMsgId = {};\n        var converter = new XmlToI18n();\n        Object.keys(msgIdToHtml).forEach(function (msgId) {\n            var _a = converter.convert(msgIdToHtml[msgId], url), i18nNodes = _a.i18nNodes, e = _a.errors;\n            errors.push.apply(errors, __spread(e));\n            i18nNodesByMsgId[msgId] = i18nNodes;\n        });\n        if (errors.length) {\n            throw new Error(\"xliff parse errors:\\n\" + errors.join('\\n'));\n        }\n        return { locale: locale, i18nNodesByMsgId: i18nNodesByMsgId };\n    };\n    Xliff.prototype.digest = function (message) { return digest(message); };\n    return Xliff;\n}(Serializer));\nvar _WriteVisitor = /** @class */ (function () {\n    function _WriteVisitor() {\n    }\n    _WriteVisitor.prototype.visitText = function (text, context) { return [new Text$2(text.value)]; };\n    _WriteVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        var nodes = [];\n        container.children.forEach(function (node) { return nodes.push.apply(nodes, __spread(node.visit(_this))); });\n        return nodes;\n    };\n    _WriteVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var nodes = [new Text$2(\"{\" + icu.expressionPlaceholder + \", \" + icu.type + \", \")];\n        Object.keys(icu.cases).forEach(function (c) {\n            nodes.push.apply(nodes, __spread([new Text$2(c + \" {\")], icu.cases[c].visit(_this), [new Text$2(\"} \")]));\n        });\n        nodes.push(new Text$2(\"}\"));\n        return nodes;\n    };\n    _WriteVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var ctype = getCtypeForTag(ph.tag);\n        if (ph.isVoid) {\n            // void tags have no children nor closing tags\n            return [new Tag(_PLACEHOLDER_TAG, { id: ph.startName, ctype: ctype, 'equiv-text': \"<\" + ph.tag + \"/>\" })];\n        }\n        var startTagPh = new Tag(_PLACEHOLDER_TAG, { id: ph.startName, ctype: ctype, 'equiv-text': \"<\" + ph.tag + \">\" });\n        var closeTagPh = new Tag(_PLACEHOLDER_TAG, { id: ph.closeName, ctype: ctype, 'equiv-text': \"</\" + ph.tag + \">\" });\n        return __spread([startTagPh], this.serialize(ph.children), [closeTagPh]);\n    };\n    _WriteVisitor.prototype.visitPlaceholder = function (ph, context) {\n        return [new Tag(_PLACEHOLDER_TAG, { id: ph.name, 'equiv-text': \"{{\" + ph.value + \"}}\" })];\n    };\n    _WriteVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        var equivText = \"{\" + ph.value.expression + \", \" + ph.value.type + \", \" + Object.keys(ph.value.cases).map(function (value) { return value + ' {...}'; }).join(' ') + \"}\";\n        return [new Tag(_PLACEHOLDER_TAG, { id: ph.name, 'equiv-text': equivText })];\n    };\n    _WriteVisitor.prototype.serialize = function (nodes) {\n        var _this = this;\n        return [].concat.apply([], __spread(nodes.map(function (node) { return node.visit(_this); })));\n    };\n    return _WriteVisitor;\n}());\n// TODO(vicb): add error management (structure)\n// Extract messages as xml nodes from the xliff file\nvar XliffParser = /** @class */ (function () {\n    function XliffParser() {\n        this._locale = null;\n    }\n    XliffParser.prototype.parse = function (xliff, url) {\n        this._unitMlString = null;\n        this._msgIdToHtml = {};\n        var xml = new XmlParser().parse(xliff, url, false);\n        this._errors = xml.errors;\n        visitAll(this, xml.rootNodes, null);\n        return {\n            msgIdToHtml: this._msgIdToHtml,\n            errors: this._errors,\n            locale: this._locale,\n        };\n    };\n    XliffParser.prototype.visitElement = function (element, context) {\n        switch (element.name) {\n            case _UNIT_TAG:\n                this._unitMlString = null;\n                var idAttr = element.attrs.find(function (attr) { return attr.name === 'id'; });\n                if (!idAttr) {\n                    this._addError(element, \"<\" + _UNIT_TAG + \"> misses the \\\"id\\\" attribute\");\n                }\n                else {\n                    var id = idAttr.value;\n                    if (this._msgIdToHtml.hasOwnProperty(id)) {\n                        this._addError(element, \"Duplicated translations for msg \" + id);\n                    }\n                    else {\n                        visitAll(this, element.children, null);\n                        if (typeof this._unitMlString === 'string') {\n                            this._msgIdToHtml[id] = this._unitMlString;\n                        }\n                        else {\n                            this._addError(element, \"Message \" + id + \" misses a translation\");\n                        }\n                    }\n                }\n                break;\n            // ignore those tags\n            case _SOURCE_TAG:\n            case _SEGMENT_SOURCE_TAG:\n                break;\n            case _TARGET_TAG:\n                var innerTextStart = element.startSourceSpan.end.offset;\n                var innerTextEnd = element.endSourceSpan.start.offset;\n                var content = element.startSourceSpan.start.file.content;\n                var innerText = content.slice(innerTextStart, innerTextEnd);\n                this._unitMlString = innerText;\n                break;\n            case _FILE_TAG:\n                var localeAttr = element.attrs.find(function (attr) { return attr.name === 'target-language'; });\n                if (localeAttr) {\n                    this._locale = localeAttr.value;\n                }\n                visitAll(this, element.children, null);\n                break;\n            default:\n                // TODO(vicb): assert file structure, xliff version\n                // For now only recurse on unhandled nodes\n                visitAll(this, element.children, null);\n        }\n    };\n    XliffParser.prototype.visitAttribute = function (attribute, context) { };\n    XliffParser.prototype.visitText = function (text, context) { };\n    XliffParser.prototype.visitComment = function (comment, context) { };\n    XliffParser.prototype.visitExpansion = function (expansion, context) { };\n    XliffParser.prototype.visitExpansionCase = function (expansionCase, context) { };\n    XliffParser.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XliffParser;\n}());\n// Convert ml nodes (xliff syntax) to i18n nodes\nvar XmlToI18n = /** @class */ (function () {\n    function XmlToI18n() {\n    }\n    XmlToI18n.prototype.convert = function (message, url) {\n        var xmlIcu = new XmlParser().parse(message, url, true);\n        this._errors = xmlIcu.errors;\n        var i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ?\n            [] : [].concat.apply([], __spread(visitAll(this, xmlIcu.rootNodes)));\n        return {\n            i18nNodes: i18nNodes,\n            errors: this._errors,\n        };\n    };\n    XmlToI18n.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };\n    XmlToI18n.prototype.visitElement = function (el, context) {\n        if (el.name === _PLACEHOLDER_TAG) {\n            var nameAttr = el.attrs.find(function (attr) { return attr.name === 'id'; });\n            if (nameAttr) {\n                return new Placeholder('', nameAttr.value, el.sourceSpan);\n            }\n            this._addError(el, \"<\" + _PLACEHOLDER_TAG + \"> misses the \\\"id\\\" attribute\");\n            return null;\n        }\n        if (el.name === _MARKER_TAG) {\n            return [].concat.apply([], __spread(visitAll(this, el.children)));\n        }\n        this._addError(el, \"Unexpected tag\");\n        return null;\n    };\n    XmlToI18n.prototype.visitExpansion = function (icu, context) {\n        var caseMap = {};\n        visitAll(this, icu.cases).forEach(function (c) {\n            caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);\n        });\n        return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);\n    };\n    XmlToI18n.prototype.visitExpansionCase = function (icuCase, context) {\n        return {\n            value: icuCase.value,\n            nodes: visitAll(this, icuCase.expression),\n        };\n    };\n    XmlToI18n.prototype.visitComment = function (comment, context) { };\n    XmlToI18n.prototype.visitAttribute = function (attribute, context) { };\n    XmlToI18n.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XmlToI18n;\n}());\nfunction getCtypeForTag(tag) {\n    switch (tag.toLowerCase()) {\n        case 'br':\n            return 'lb';\n        case 'img':\n            return 'image';\n        default:\n            return \"x-\" + tag;\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _VERSION$1 = '2.0';\nvar _XMLNS$1 = 'urn:oasis:names:tc:xliff:document:2.0';\n// TODO(vicb): make this a param (s/_/-/)\nvar _DEFAULT_SOURCE_LANG$1 = 'en';\nvar _PLACEHOLDER_TAG$1 = 'ph';\nvar _PLACEHOLDER_SPANNING_TAG = 'pc';\nvar _MARKER_TAG$1 = 'mrk';\nvar _XLIFF_TAG = 'xliff';\nvar _SOURCE_TAG$1 = 'source';\nvar _TARGET_TAG$1 = 'target';\nvar _UNIT_TAG$1 = 'unit';\n// http://docs.oasis-open.org/xliff/xliff-core/v2.0/os/xliff-core-v2.0-os.html\nvar Xliff2 = /** @class */ (function (_super) {\n    __extends(Xliff2, _super);\n    function Xliff2() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Xliff2.prototype.write = function (messages, locale) {\n        var visitor = new _WriteVisitor$1();\n        var units = [];\n        messages.forEach(function (message) {\n            var unit = new Tag(_UNIT_TAG$1, { id: message.id });\n            var notes = new Tag('notes');\n            if (message.description || message.meaning) {\n                if (message.description) {\n                    notes.children.push(new CR(8), new Tag('note', { category: 'description' }, [new Text$2(message.description)]));\n                }\n                if (message.meaning) {\n                    notes.children.push(new CR(8), new Tag('note', { category: 'meaning' }, [new Text$2(message.meaning)]));\n                }\n            }\n            message.sources.forEach(function (source) {\n                notes.children.push(new CR(8), new Tag('note', { category: 'location' }, [\n                    new Text$2(source.filePath + \":\" + source.startLine + (source.endLine !== source.startLine ? ',' + source.endLine : ''))\n                ]));\n            });\n            notes.children.push(new CR(6));\n            unit.children.push(new CR(6), notes);\n            var segment = new Tag('segment');\n            segment.children.push(new CR(8), new Tag(_SOURCE_TAG$1, {}, visitor.serialize(message.nodes)), new CR(6));\n            unit.children.push(new CR(6), segment, new CR(4));\n            units.push(new CR(4), unit);\n        });\n        var file = new Tag('file', { 'original': 'ng.template', id: 'ngi18n' }, __spread(units, [new CR(2)]));\n        var xliff = new Tag(_XLIFF_TAG, { version: _VERSION$1, xmlns: _XMLNS$1, srcLang: locale || _DEFAULT_SOURCE_LANG$1 }, [new CR(2), file, new CR()]);\n        return serialize([\n            new Declaration({ version: '1.0', encoding: 'UTF-8' }), new CR(), xliff, new CR()\n        ]);\n    };\n    Xliff2.prototype.load = function (content, url) {\n        // xliff to xml nodes\n        var xliff2Parser = new Xliff2Parser();\n        var _a = xliff2Parser.parse(content, url), locale = _a.locale, msgIdToHtml = _a.msgIdToHtml, errors = _a.errors;\n        // xml nodes to i18n nodes\n        var i18nNodesByMsgId = {};\n        var converter = new XmlToI18n$1();\n        Object.keys(msgIdToHtml).forEach(function (msgId) {\n            var _a = converter.convert(msgIdToHtml[msgId], url), i18nNodes = _a.i18nNodes, e = _a.errors;\n            errors.push.apply(errors, __spread(e));\n            i18nNodesByMsgId[msgId] = i18nNodes;\n        });\n        if (errors.length) {\n            throw new Error(\"xliff2 parse errors:\\n\" + errors.join('\\n'));\n        }\n        return { locale: locale, i18nNodesByMsgId: i18nNodesByMsgId };\n    };\n    Xliff2.prototype.digest = function (message) { return decimalDigest(message); };\n    return Xliff2;\n}(Serializer));\nvar _WriteVisitor$1 = /** @class */ (function () {\n    function _WriteVisitor() {\n    }\n    _WriteVisitor.prototype.visitText = function (text, context) { return [new Text$2(text.value)]; };\n    _WriteVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        var nodes = [];\n        container.children.forEach(function (node) { return nodes.push.apply(nodes, __spread(node.visit(_this))); });\n        return nodes;\n    };\n    _WriteVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var nodes = [new Text$2(\"{\" + icu.expressionPlaceholder + \", \" + icu.type + \", \")];\n        Object.keys(icu.cases).forEach(function (c) {\n            nodes.push.apply(nodes, __spread([new Text$2(c + \" {\")], icu.cases[c].visit(_this), [new Text$2(\"} \")]));\n        });\n        nodes.push(new Text$2(\"}\"));\n        return nodes;\n    };\n    _WriteVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        var type = getTypeForTag(ph.tag);\n        if (ph.isVoid) {\n            var tagPh = new Tag(_PLACEHOLDER_TAG$1, {\n                id: (this._nextPlaceholderId++).toString(),\n                equiv: ph.startName,\n                type: type,\n                disp: \"<\" + ph.tag + \"/>\",\n            });\n            return [tagPh];\n        }\n        var tagPc = new Tag(_PLACEHOLDER_SPANNING_TAG, {\n            id: (this._nextPlaceholderId++).toString(),\n            equivStart: ph.startName,\n            equivEnd: ph.closeName,\n            type: type,\n            dispStart: \"<\" + ph.tag + \">\",\n            dispEnd: \"</\" + ph.tag + \">\",\n        });\n        var nodes = [].concat.apply([], __spread(ph.children.map(function (node) { return node.visit(_this); })));\n        if (nodes.length) {\n            nodes.forEach(function (node) { return tagPc.children.push(node); });\n        }\n        else {\n            tagPc.children.push(new Text$2(''));\n        }\n        return [tagPc];\n    };\n    _WriteVisitor.prototype.visitPlaceholder = function (ph, context) {\n        var idStr = (this._nextPlaceholderId++).toString();\n        return [new Tag(_PLACEHOLDER_TAG$1, {\n                id: idStr,\n                equiv: ph.name,\n                disp: \"{{\" + ph.value + \"}}\",\n            })];\n    };\n    _WriteVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        var cases = Object.keys(ph.value.cases).map(function (value) { return value + ' {...}'; }).join(' ');\n        var idStr = (this._nextPlaceholderId++).toString();\n        return [new Tag(_PLACEHOLDER_TAG$1, { id: idStr, equiv: ph.name, disp: \"{\" + ph.value.expression + \", \" + ph.value.type + \", \" + cases + \"}\" })];\n    };\n    _WriteVisitor.prototype.serialize = function (nodes) {\n        var _this = this;\n        this._nextPlaceholderId = 0;\n        return [].concat.apply([], __spread(nodes.map(function (node) { return node.visit(_this); })));\n    };\n    return _WriteVisitor;\n}());\n// Extract messages as xml nodes from the xliff file\nvar Xliff2Parser = /** @class */ (function () {\n    function Xliff2Parser() {\n        this._locale = null;\n    }\n    Xliff2Parser.prototype.parse = function (xliff, url) {\n        this._unitMlString = null;\n        this._msgIdToHtml = {};\n        var xml = new XmlParser().parse(xliff, url, false);\n        this._errors = xml.errors;\n        visitAll(this, xml.rootNodes, null);\n        return {\n            msgIdToHtml: this._msgIdToHtml,\n            errors: this._errors,\n            locale: this._locale,\n        };\n    };\n    Xliff2Parser.prototype.visitElement = function (element, context) {\n        switch (element.name) {\n            case _UNIT_TAG$1:\n                this._unitMlString = null;\n                var idAttr = element.attrs.find(function (attr) { return attr.name === 'id'; });\n                if (!idAttr) {\n                    this._addError(element, \"<\" + _UNIT_TAG$1 + \"> misses the \\\"id\\\" attribute\");\n                }\n                else {\n                    var id = idAttr.value;\n                    if (this._msgIdToHtml.hasOwnProperty(id)) {\n                        this._addError(element, \"Duplicated translations for msg \" + id);\n                    }\n                    else {\n                        visitAll(this, element.children, null);\n                        if (typeof this._unitMlString === 'string') {\n                            this._msgIdToHtml[id] = this._unitMlString;\n                        }\n                        else {\n                            this._addError(element, \"Message \" + id + \" misses a translation\");\n                        }\n                    }\n                }\n                break;\n            case _SOURCE_TAG$1:\n                // ignore source message\n                break;\n            case _TARGET_TAG$1:\n                var innerTextStart = element.startSourceSpan.end.offset;\n                var innerTextEnd = element.endSourceSpan.start.offset;\n                var content = element.startSourceSpan.start.file.content;\n                var innerText = content.slice(innerTextStart, innerTextEnd);\n                this._unitMlString = innerText;\n                break;\n            case _XLIFF_TAG:\n                var localeAttr = element.attrs.find(function (attr) { return attr.name === 'trgLang'; });\n                if (localeAttr) {\n                    this._locale = localeAttr.value;\n                }\n                var versionAttr = element.attrs.find(function (attr) { return attr.name === 'version'; });\n                if (versionAttr) {\n                    var version$$1 = versionAttr.value;\n                    if (version$$1 !== '2.0') {\n                        this._addError(element, \"The XLIFF file version \" + version$$1 + \" is not compatible with XLIFF 2.0 serializer\");\n                    }\n                    else {\n                        visitAll(this, element.children, null);\n                    }\n                }\n                break;\n            default:\n                visitAll(this, element.children, null);\n        }\n    };\n    Xliff2Parser.prototype.visitAttribute = function (attribute, context) { };\n    Xliff2Parser.prototype.visitText = function (text, context) { };\n    Xliff2Parser.prototype.visitComment = function (comment, context) { };\n    Xliff2Parser.prototype.visitExpansion = function (expansion, context) { };\n    Xliff2Parser.prototype.visitExpansionCase = function (expansionCase, context) { };\n    Xliff2Parser.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return Xliff2Parser;\n}());\n// Convert ml nodes (xliff syntax) to i18n nodes\nvar XmlToI18n$1 = /** @class */ (function () {\n    function XmlToI18n() {\n    }\n    XmlToI18n.prototype.convert = function (message, url) {\n        var xmlIcu = new XmlParser().parse(message, url, true);\n        this._errors = xmlIcu.errors;\n        var i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ?\n            [] : [].concat.apply([], __spread(visitAll(this, xmlIcu.rootNodes)));\n        return {\n            i18nNodes: i18nNodes,\n            errors: this._errors,\n        };\n    };\n    XmlToI18n.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };\n    XmlToI18n.prototype.visitElement = function (el, context) {\n        var _this = this;\n        switch (el.name) {\n            case _PLACEHOLDER_TAG$1:\n                var nameAttr = el.attrs.find(function (attr) { return attr.name === 'equiv'; });\n                if (nameAttr) {\n                    return [new Placeholder('', nameAttr.value, el.sourceSpan)];\n                }\n                this._addError(el, \"<\" + _PLACEHOLDER_TAG$1 + \"> misses the \\\"equiv\\\" attribute\");\n                break;\n            case _PLACEHOLDER_SPANNING_TAG:\n                var startAttr = el.attrs.find(function (attr) { return attr.name === 'equivStart'; });\n                var endAttr = el.attrs.find(function (attr) { return attr.name === 'equivEnd'; });\n                if (!startAttr) {\n                    this._addError(el, \"<\" + _PLACEHOLDER_TAG$1 + \"> misses the \\\"equivStart\\\" attribute\");\n                }\n                else if (!endAttr) {\n                    this._addError(el, \"<\" + _PLACEHOLDER_TAG$1 + \"> misses the \\\"equivEnd\\\" attribute\");\n                }\n                else {\n                    var startId = startAttr.value;\n                    var endId = endAttr.value;\n                    var nodes = [];\n                    return nodes.concat.apply(nodes, __spread([new Placeholder('', startId, el.sourceSpan)], el.children.map(function (node) { return node.visit(_this, null); }), [new Placeholder('', endId, el.sourceSpan)]));\n                }\n                break;\n            case _MARKER_TAG$1:\n                return [].concat.apply([], __spread(visitAll(this, el.children)));\n            default:\n                this._addError(el, \"Unexpected tag\");\n        }\n        return null;\n    };\n    XmlToI18n.prototype.visitExpansion = function (icu, context) {\n        var caseMap = {};\n        visitAll(this, icu.cases).forEach(function (c) {\n            caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);\n        });\n        return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);\n    };\n    XmlToI18n.prototype.visitExpansionCase = function (icuCase, context) {\n        return {\n            value: icuCase.value,\n            nodes: [].concat.apply([], __spread(visitAll(this, icuCase.expression))),\n        };\n    };\n    XmlToI18n.prototype.visitComment = function (comment, context) { };\n    XmlToI18n.prototype.visitAttribute = function (attribute, context) { };\n    XmlToI18n.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XmlToI18n;\n}());\nfunction getTypeForTag(tag) {\n    switch (tag.toLowerCase()) {\n        case 'br':\n        case 'b':\n        case 'i':\n        case 'u':\n            return 'fmt';\n        case 'img':\n            return 'image';\n        case 'a':\n            return 'link';\n        default:\n            return 'other';\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _MESSAGES_TAG = 'messagebundle';\nvar _MESSAGE_TAG = 'msg';\nvar _PLACEHOLDER_TAG$2 = 'ph';\nvar _EXEMPLE_TAG = 'ex';\nvar _SOURCE_TAG$2 = 'source';\nvar _DOCTYPE = \"<!ELEMENT messagebundle (msg)*>\\n<!ATTLIST messagebundle class CDATA #IMPLIED>\\n\\n<!ELEMENT msg (#PCDATA|ph|source)*>\\n<!ATTLIST msg id CDATA #IMPLIED>\\n<!ATTLIST msg seq CDATA #IMPLIED>\\n<!ATTLIST msg name CDATA #IMPLIED>\\n<!ATTLIST msg desc CDATA #IMPLIED>\\n<!ATTLIST msg meaning CDATA #IMPLIED>\\n<!ATTLIST msg obsolete (obsolete) #IMPLIED>\\n<!ATTLIST msg xml:space (default|preserve) \\\"default\\\">\\n<!ATTLIST msg is_hidden CDATA #IMPLIED>\\n\\n<!ELEMENT source (#PCDATA)>\\n\\n<!ELEMENT ph (#PCDATA|ex)*>\\n<!ATTLIST ph name CDATA #REQUIRED>\\n\\n<!ELEMENT ex (#PCDATA)>\";\nvar Xmb = /** @class */ (function (_super) {\n    __extends(Xmb, _super);\n    function Xmb() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Xmb.prototype.write = function (messages, locale) {\n        var exampleVisitor = new ExampleVisitor();\n        var visitor = new _Visitor$2();\n        var rootNode = new Tag(_MESSAGES_TAG);\n        messages.forEach(function (message) {\n            var attrs = { id: message.id };\n            if (message.description) {\n                attrs['desc'] = message.description;\n            }\n            if (message.meaning) {\n                attrs['meaning'] = message.meaning;\n            }\n            var sourceTags = [];\n            message.sources.forEach(function (source) {\n                sourceTags.push(new Tag(_SOURCE_TAG$2, {}, [\n                    new Text$2(source.filePath + \":\" + source.startLine + (source.endLine !== source.startLine ? ',' + source.endLine : ''))\n                ]));\n            });\n            rootNode.children.push(new CR(2), new Tag(_MESSAGE_TAG, attrs, __spread(sourceTags, visitor.serialize(message.nodes))));\n        });\n        rootNode.children.push(new CR());\n        return serialize([\n            new Declaration({ version: '1.0', encoding: 'UTF-8' }),\n            new CR(),\n            new Doctype(_MESSAGES_TAG, _DOCTYPE),\n            new CR(),\n            exampleVisitor.addDefaultExamples(rootNode),\n            new CR(),\n        ]);\n    };\n    Xmb.prototype.load = function (content, url) {\n        throw new Error('Unsupported');\n    };\n    Xmb.prototype.digest = function (message) { return digest$1(message); };\n    Xmb.prototype.createNameMapper = function (message) {\n        return new SimplePlaceholderMapper(message, toPublicName);\n    };\n    return Xmb;\n}(Serializer));\nvar _Visitor$2 = /** @class */ (function () {\n    function _Visitor() {\n    }\n    _Visitor.prototype.visitText = function (text, context) { return [new Text$2(text.value)]; };\n    _Visitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        var nodes = [];\n        container.children.forEach(function (node) { return nodes.push.apply(nodes, __spread(node.visit(_this))); });\n        return nodes;\n    };\n    _Visitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var nodes = [new Text$2(\"{\" + icu.expressionPlaceholder + \", \" + icu.type + \", \")];\n        Object.keys(icu.cases).forEach(function (c) {\n            nodes.push.apply(nodes, __spread([new Text$2(c + \" {\")], icu.cases[c].visit(_this), [new Text$2(\"} \")]));\n        });\n        nodes.push(new Text$2(\"}\"));\n        return nodes;\n    };\n    _Visitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var startEx = new Tag(_EXEMPLE_TAG, {}, [new Text$2(\"<\" + ph.tag + \">\")]);\n        var startTagPh = new Tag(_PLACEHOLDER_TAG$2, { name: ph.startName }, [startEx]);\n        if (ph.isVoid) {\n            // void tags have no children nor closing tags\n            return [startTagPh];\n        }\n        var closeEx = new Tag(_EXEMPLE_TAG, {}, [new Text$2(\"</\" + ph.tag + \">\")]);\n        var closeTagPh = new Tag(_PLACEHOLDER_TAG$2, { name: ph.closeName }, [closeEx]);\n        return __spread([startTagPh], this.serialize(ph.children), [closeTagPh]);\n    };\n    _Visitor.prototype.visitPlaceholder = function (ph, context) {\n        var exTag = new Tag(_EXEMPLE_TAG, {}, [new Text$2(\"{{\" + ph.value + \"}}\")]);\n        return [new Tag(_PLACEHOLDER_TAG$2, { name: ph.name }, [exTag])];\n    };\n    _Visitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        var exTag = new Tag(_EXEMPLE_TAG, {}, [\n            new Text$2(\"{\" + ph.value.expression + \", \" + ph.value.type + \", \" + Object.keys(ph.value.cases).map(function (value) { return value + ' {...}'; }).join(' ') + \"}\")\n        ]);\n        return [new Tag(_PLACEHOLDER_TAG$2, { name: ph.name }, [exTag])];\n    };\n    _Visitor.prototype.serialize = function (nodes) {\n        var _this = this;\n        return [].concat.apply([], __spread(nodes.map(function (node) { return node.visit(_this); })));\n    };\n    return _Visitor;\n}());\nfunction digest$1(message) {\n    return decimalDigest(message);\n}\n// TC requires at least one non-empty example on placeholders\nvar ExampleVisitor = /** @class */ (function () {\n    function ExampleVisitor() {\n    }\n    ExampleVisitor.prototype.addDefaultExamples = function (node) {\n        node.visit(this);\n        return node;\n    };\n    ExampleVisitor.prototype.visitTag = function (tag) {\n        var _this = this;\n        if (tag.name === _PLACEHOLDER_TAG$2) {\n            if (!tag.children || tag.children.length == 0) {\n                var exText = new Text$2(tag.attrs['name'] || '...');\n                tag.children = [new Tag(_EXEMPLE_TAG, {}, [exText])];\n            }\n        }\n        else if (tag.children) {\n            tag.children.forEach(function (node) { return node.visit(_this); });\n        }\n    };\n    ExampleVisitor.prototype.visitText = function (text) { };\n    ExampleVisitor.prototype.visitDeclaration = function (decl) { };\n    ExampleVisitor.prototype.visitDoctype = function (doctype) { };\n    return ExampleVisitor;\n}());\n// XMB/XTB placeholders can only contain A-Z, 0-9 and _\nfunction toPublicName(internalName) {\n    return internalName.toUpperCase().replace(/[^A-Z0-9_]/g, '_');\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _TRANSLATIONS_TAG = 'translationbundle';\nvar _TRANSLATION_TAG = 'translation';\nvar _PLACEHOLDER_TAG$3 = 'ph';\nvar Xtb = /** @class */ (function (_super) {\n    __extends(Xtb, _super);\n    function Xtb() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Xtb.prototype.write = function (messages, locale) { throw new Error('Unsupported'); };\n    Xtb.prototype.load = function (content, url) {\n        // xtb to xml nodes\n        var xtbParser = new XtbParser();\n        var _a = xtbParser.parse(content, url), locale = _a.locale, msgIdToHtml = _a.msgIdToHtml, errors = _a.errors;\n        // xml nodes to i18n nodes\n        var i18nNodesByMsgId = {};\n        var converter = new XmlToI18n$2();\n        // Because we should be able to load xtb files that rely on features not supported by angular,\n        // we need to delay the conversion of html to i18n nodes so that non angular messages are not\n        // converted\n        Object.keys(msgIdToHtml).forEach(function (msgId) {\n            var valueFn = function () {\n                var _a = converter.convert(msgIdToHtml[msgId], url), i18nNodes = _a.i18nNodes, errors = _a.errors;\n                if (errors.length) {\n                    throw new Error(\"xtb parse errors:\\n\" + errors.join('\\n'));\n                }\n                return i18nNodes;\n            };\n            createLazyProperty(i18nNodesByMsgId, msgId, valueFn);\n        });\n        if (errors.length) {\n            throw new Error(\"xtb parse errors:\\n\" + errors.join('\\n'));\n        }\n        return { locale: locale, i18nNodesByMsgId: i18nNodesByMsgId };\n    };\n    Xtb.prototype.digest = function (message) { return digest$1(message); };\n    Xtb.prototype.createNameMapper = function (message) {\n        return new SimplePlaceholderMapper(message, toPublicName);\n    };\n    return Xtb;\n}(Serializer));\nfunction createLazyProperty(messages, id, valueFn) {\n    Object.defineProperty(messages, id, {\n        configurable: true,\n        enumerable: true,\n        get: function () {\n            var value = valueFn();\n            Object.defineProperty(messages, id, { enumerable: true, value: value });\n            return value;\n        },\n        set: function (_) { throw new Error('Could not overwrite an XTB translation'); },\n    });\n}\n// Extract messages as xml nodes from the xtb file\nvar XtbParser = /** @class */ (function () {\n    function XtbParser() {\n        this._locale = null;\n    }\n    XtbParser.prototype.parse = function (xtb, url) {\n        this._bundleDepth = 0;\n        this._msgIdToHtml = {};\n        // We can not parse the ICU messages at this point as some messages might not originate\n        // from Angular that could not be lex'd.\n        var xml = new XmlParser().parse(xtb, url, false);\n        this._errors = xml.errors;\n        visitAll(this, xml.rootNodes);\n        return {\n            msgIdToHtml: this._msgIdToHtml,\n            errors: this._errors,\n            locale: this._locale,\n        };\n    };\n    XtbParser.prototype.visitElement = function (element, context) {\n        switch (element.name) {\n            case _TRANSLATIONS_TAG:\n                this._bundleDepth++;\n                if (this._bundleDepth > 1) {\n                    this._addError(element, \"<\" + _TRANSLATIONS_TAG + \"> elements can not be nested\");\n                }\n                var langAttr = element.attrs.find(function (attr) { return attr.name === 'lang'; });\n                if (langAttr) {\n                    this._locale = langAttr.value;\n                }\n                visitAll(this, element.children, null);\n                this._bundleDepth--;\n                break;\n            case _TRANSLATION_TAG:\n                var idAttr = element.attrs.find(function (attr) { return attr.name === 'id'; });\n                if (!idAttr) {\n                    this._addError(element, \"<\" + _TRANSLATION_TAG + \"> misses the \\\"id\\\" attribute\");\n                }\n                else {\n                    var id = idAttr.value;\n                    if (this._msgIdToHtml.hasOwnProperty(id)) {\n                        this._addError(element, \"Duplicated translations for msg \" + id);\n                    }\n                    else {\n                        var innerTextStart = element.startSourceSpan.end.offset;\n                        var innerTextEnd = element.endSourceSpan.start.offset;\n                        var content = element.startSourceSpan.start.file.content;\n                        var innerText = content.slice(innerTextStart, innerTextEnd);\n                        this._msgIdToHtml[id] = innerText;\n                    }\n                }\n                break;\n            default:\n                this._addError(element, 'Unexpected tag');\n        }\n    };\n    XtbParser.prototype.visitAttribute = function (attribute, context) { };\n    XtbParser.prototype.visitText = function (text, context) { };\n    XtbParser.prototype.visitComment = function (comment, context) { };\n    XtbParser.prototype.visitExpansion = function (expansion, context) { };\n    XtbParser.prototype.visitExpansionCase = function (expansionCase, context) { };\n    XtbParser.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XtbParser;\n}());\n// Convert ml nodes (xtb syntax) to i18n nodes\nvar XmlToI18n$2 = /** @class */ (function () {\n    function XmlToI18n() {\n    }\n    XmlToI18n.prototype.convert = function (message, url) {\n        var xmlIcu = new XmlParser().parse(message, url, true);\n        this._errors = xmlIcu.errors;\n        var i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ?\n            [] :\n            visitAll(this, xmlIcu.rootNodes);\n        return {\n            i18nNodes: i18nNodes,\n            errors: this._errors,\n        };\n    };\n    XmlToI18n.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };\n    XmlToI18n.prototype.visitExpansion = function (icu, context) {\n        var caseMap = {};\n        visitAll(this, icu.cases).forEach(function (c) {\n            caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);\n        });\n        return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);\n    };\n    XmlToI18n.prototype.visitExpansionCase = function (icuCase, context) {\n        return {\n            value: icuCase.value,\n            nodes: visitAll(this, icuCase.expression),\n        };\n    };\n    XmlToI18n.prototype.visitElement = function (el, context) {\n        if (el.name === _PLACEHOLDER_TAG$3) {\n            var nameAttr = el.attrs.find(function (attr) { return attr.name === 'name'; });\n            if (nameAttr) {\n                return new Placeholder('', nameAttr.value, el.sourceSpan);\n            }\n            this._addError(el, \"<\" + _PLACEHOLDER_TAG$3 + \"> misses the \\\"name\\\" attribute\");\n        }\n        else {\n            this._addError(el, \"Unexpected tag\");\n        }\n        return null;\n    };\n    XmlToI18n.prototype.visitComment = function (comment, context) { };\n    XmlToI18n.prototype.visitAttribute = function (attribute, context) { };\n    XmlToI18n.prototype._addError = function (node, message) {\n        this._errors.push(new I18nError(node.sourceSpan, message));\n    };\n    return XmlToI18n;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar HtmlParser = /** @class */ (function (_super) {\n    __extends(HtmlParser, _super);\n    function HtmlParser() {\n        return _super.call(this, getHtmlTagDefinition) || this;\n    }\n    HtmlParser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        return _super.prototype.parse.call(this, source, url, parseExpansionForms, interpolationConfig);\n    };\n    return HtmlParser;\n}(Parser$1));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A container for translated messages\n */\nvar TranslationBundle = /** @class */ (function () {\n    function TranslationBundle(_i18nNodesByMsgId, locale, digest, mapperFactory, missingTranslationStrategy, console) {\n        if (_i18nNodesByMsgId === void 0) { _i18nNodesByMsgId = {}; }\n        if (missingTranslationStrategy === void 0) { missingTranslationStrategy = MissingTranslationStrategy.Warning; }\n        this._i18nNodesByMsgId = _i18nNodesByMsgId;\n        this.digest = digest;\n        this.mapperFactory = mapperFactory;\n        this._i18nToHtml = new I18nToHtmlVisitor(_i18nNodesByMsgId, locale, digest, mapperFactory, missingTranslationStrategy, console);\n    }\n    // Creates a `TranslationBundle` by parsing the given `content` with the `serializer`.\n    TranslationBundle.load = function (content, url, serializer, missingTranslationStrategy, console) {\n        var _a = serializer.load(content, url), locale = _a.locale, i18nNodesByMsgId = _a.i18nNodesByMsgId;\n        var digestFn = function (m) { return serializer.digest(m); };\n        var mapperFactory = function (m) { return serializer.createNameMapper(m); };\n        return new TranslationBundle(i18nNodesByMsgId, locale, digestFn, mapperFactory, missingTranslationStrategy, console);\n    };\n    // Returns the translation as HTML nodes from the given source message.\n    TranslationBundle.prototype.get = function (srcMsg) {\n        var html = this._i18nToHtml.convert(srcMsg);\n        if (html.errors.length) {\n            throw new Error(html.errors.join('\\n'));\n        }\n        return html.nodes;\n    };\n    TranslationBundle.prototype.has = function (srcMsg) { return this.digest(srcMsg) in this._i18nNodesByMsgId; };\n    return TranslationBundle;\n}());\nvar I18nToHtmlVisitor = /** @class */ (function () {\n    function I18nToHtmlVisitor(_i18nNodesByMsgId, _locale, _digest, _mapperFactory, _missingTranslationStrategy, _console) {\n        if (_i18nNodesByMsgId === void 0) { _i18nNodesByMsgId = {}; }\n        this._i18nNodesByMsgId = _i18nNodesByMsgId;\n        this._locale = _locale;\n        this._digest = _digest;\n        this._mapperFactory = _mapperFactory;\n        this._missingTranslationStrategy = _missingTranslationStrategy;\n        this._console = _console;\n        this._contextStack = [];\n        this._errors = [];\n    }\n    I18nToHtmlVisitor.prototype.convert = function (srcMsg) {\n        this._contextStack.length = 0;\n        this._errors.length = 0;\n        // i18n to text\n        var text = this._convertToText(srcMsg);\n        // text to html\n        var url = srcMsg.nodes[0].sourceSpan.start.file.url;\n        var html = new HtmlParser().parse(text, url, true);\n        return {\n            nodes: html.rootNodes,\n            errors: __spread(this._errors, html.errors),\n        };\n    };\n    I18nToHtmlVisitor.prototype.visitText = function (text, context) {\n        // `convert()` uses an `HtmlParser` to return `html.Node`s\n        // we should then make sure that any special characters are escaped\n        return escapeXml(text.value);\n    };\n    I18nToHtmlVisitor.prototype.visitContainer = function (container, context) {\n        var _this = this;\n        return container.children.map(function (n) { return n.visit(_this); }).join('');\n    };\n    I18nToHtmlVisitor.prototype.visitIcu = function (icu, context) {\n        var _this = this;\n        var cases = Object.keys(icu.cases).map(function (k) { return k + \" {\" + icu.cases[k].visit(_this) + \"}\"; });\n        // TODO(vicb): Once all format switch to using expression placeholders\n        // we should throw when the placeholder is not in the source message\n        var exp = this._srcMsg.placeholders.hasOwnProperty(icu.expression) ?\n            this._srcMsg.placeholders[icu.expression] :\n            icu.expression;\n        return \"{\" + exp + \", \" + icu.type + \", \" + cases.join(' ') + \"}\";\n    };\n    I18nToHtmlVisitor.prototype.visitPlaceholder = function (ph, context) {\n        var phName = this._mapper(ph.name);\n        if (this._srcMsg.placeholders.hasOwnProperty(phName)) {\n            return this._srcMsg.placeholders[phName];\n        }\n        if (this._srcMsg.placeholderToMessage.hasOwnProperty(phName)) {\n            return this._convertToText(this._srcMsg.placeholderToMessage[phName]);\n        }\n        this._addError(ph, \"Unknown placeholder \\\"\" + ph.name + \"\\\"\");\n        return '';\n    };\n    // Loaded message contains only placeholders (vs tag and icu placeholders).\n    // However when a translation can not be found, we need to serialize the source message\n    // which can contain tag placeholders\n    I18nToHtmlVisitor.prototype.visitTagPlaceholder = function (ph, context) {\n        var _this = this;\n        var tag = \"\" + ph.tag;\n        var attrs = Object.keys(ph.attrs).map(function (name) { return name + \"=\\\"\" + ph.attrs[name] + \"\\\"\"; }).join(' ');\n        if (ph.isVoid) {\n            return \"<\" + tag + \" \" + attrs + \"/>\";\n        }\n        var children = ph.children.map(function (c) { return c.visit(_this); }).join('');\n        return \"<\" + tag + \" \" + attrs + \">\" + children + \"</\" + tag + \">\";\n    };\n    // Loaded message contains only placeholders (vs tag and icu placeholders).\n    // However when a translation can not be found, we need to serialize the source message\n    // which can contain tag placeholders\n    I18nToHtmlVisitor.prototype.visitIcuPlaceholder = function (ph, context) {\n        // An ICU placeholder references the source message to be serialized\n        return this._convertToText(this._srcMsg.placeholderToMessage[ph.name]);\n    };\n    /**\n     * Convert a source message to a translated text string:\n     * - text nodes are replaced with their translation,\n     * - placeholders are replaced with their content,\n     * - ICU nodes are converted to ICU expressions.\n     */\n    I18nToHtmlVisitor.prototype._convertToText = function (srcMsg) {\n        var _this = this;\n        var id = this._digest(srcMsg);\n        var mapper = this._mapperFactory ? this._mapperFactory(srcMsg) : null;\n        var nodes;\n        this._contextStack.push({ msg: this._srcMsg, mapper: this._mapper });\n        this._srcMsg = srcMsg;\n        if (this._i18nNodesByMsgId.hasOwnProperty(id)) {\n            // When there is a translation use its nodes as the source\n            // And create a mapper to convert serialized placeholder names to internal names\n            nodes = this._i18nNodesByMsgId[id];\n            this._mapper = function (name) { return mapper ? mapper.toInternalName(name) : name; };\n        }\n        else {\n            // When no translation has been found\n            // - report an error / a warning / nothing,\n            // - use the nodes from the original message\n            // - placeholders are already internal and need no mapper\n            if (this._missingTranslationStrategy === MissingTranslationStrategy.Error) {\n                var ctx = this._locale ? \" for locale \\\"\" + this._locale + \"\\\"\" : '';\n                this._addError(srcMsg.nodes[0], \"Missing translation for message \\\"\" + id + \"\\\"\" + ctx);\n            }\n            else if (this._console &&\n                this._missingTranslationStrategy === MissingTranslationStrategy.Warning) {\n                var ctx = this._locale ? \" for locale \\\"\" + this._locale + \"\\\"\" : '';\n                this._console.warn(\"Missing translation for message \\\"\" + id + \"\\\"\" + ctx);\n            }\n            nodes = srcMsg.nodes;\n            this._mapper = function (name) { return name; };\n        }\n        var text = nodes.map(function (node) { return node.visit(_this); }).join('');\n        var context = this._contextStack.pop();\n        this._srcMsg = context.msg;\n        this._mapper = context.mapper;\n        return text;\n    };\n    I18nToHtmlVisitor.prototype._addError = function (el, msg) {\n        this._errors.push(new I18nError(el.sourceSpan, msg));\n    };\n    return I18nToHtmlVisitor;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar I18NHtmlParser = /** @class */ (function () {\n    function I18NHtmlParser(_htmlParser, translations, translationsFormat, missingTranslation, console) {\n        if (missingTranslation === void 0) { missingTranslation = MissingTranslationStrategy.Warning; }\n        this._htmlParser = _htmlParser;\n        if (translations) {\n            var serializer = createSerializer(translationsFormat);\n            this._translationBundle =\n                TranslationBundle.load(translations, 'i18n', serializer, missingTranslation, console);\n        }\n        else {\n            this._translationBundle =\n                new TranslationBundle({}, null, digest, undefined, missingTranslation, console);\n        }\n    }\n    I18NHtmlParser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        var parseResult = this._htmlParser.parse(source, url, parseExpansionForms, interpolationConfig);\n        if (parseResult.errors.length) {\n            return new ParseTreeResult(parseResult.rootNodes, parseResult.errors);\n        }\n        return mergeTranslations(parseResult.rootNodes, this._translationBundle, interpolationConfig, [], {});\n    };\n    return I18NHtmlParser;\n}());\nfunction createSerializer(format) {\n    format = (format || 'xlf').toLowerCase();\n    switch (format) {\n        case 'xmb':\n            return new Xmb();\n        case 'xtb':\n            return new Xtb();\n        case 'xliff2':\n        case 'xlf2':\n            return new Xliff2();\n        case 'xliff':\n        case 'xlf':\n        default:\n            return new Xliff();\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar CORE = '@angular/core';\nvar Identifiers = /** @class */ (function () {\n    function Identifiers() {\n    }\n    Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS = {\n        name: 'ANALYZE_FOR_ENTRY_COMPONENTS',\n        moduleName: CORE,\n    };\n    Identifiers.ElementRef = { name: 'ElementRef', moduleName: CORE };\n    Identifiers.NgModuleRef = { name: 'NgModuleRef', moduleName: CORE };\n    Identifiers.ViewContainerRef = { name: 'ViewContainerRef', moduleName: CORE };\n    Identifiers.ChangeDetectorRef = {\n        name: 'ChangeDetectorRef',\n        moduleName: CORE,\n    };\n    Identifiers.QueryList = { name: 'QueryList', moduleName: CORE };\n    Identifiers.TemplateRef = { name: 'TemplateRef', moduleName: CORE };\n    Identifiers.CodegenComponentFactoryResolver = {\n        name: 'CodegenComponentFactoryResolver',\n        moduleName: CORE,\n    };\n    Identifiers.ComponentFactoryResolver = {\n        name: 'ComponentFactoryResolver',\n        moduleName: CORE,\n    };\n    Identifiers.ComponentFactory = { name: 'ComponentFactory', moduleName: CORE };\n    Identifiers.ComponentRef = { name: 'ComponentRef', moduleName: CORE };\n    Identifiers.NgModuleFactory = { name: 'NgModuleFactory', moduleName: CORE };\n    Identifiers.createModuleFactory = {\n        name: 'cmf',\n        moduleName: CORE,\n    };\n    Identifiers.moduleDef = {\n        name: 'mod',\n        moduleName: CORE,\n    };\n    Identifiers.moduleProviderDef = {\n        name: 'mpd',\n        moduleName: CORE,\n    };\n    Identifiers.RegisterModuleFactoryFn = {\n        name: 'registerModuleFactory',\n        moduleName: CORE,\n    };\n    Identifiers.inject = { name: 'inject', moduleName: CORE };\n    Identifiers.INJECTOR = { name: 'INJECTOR', moduleName: CORE };\n    Identifiers.Injector = { name: 'Injector', moduleName: CORE };\n    Identifiers.defineInjectable = { name: 'defineInjectable', moduleName: CORE };\n    Identifiers.InjectableDef = { name: 'InjectableDef', moduleName: CORE };\n    Identifiers.ViewEncapsulation = {\n        name: 'ViewEncapsulation',\n        moduleName: CORE,\n    };\n    Identifiers.ChangeDetectionStrategy = {\n        name: 'ChangeDetectionStrategy',\n        moduleName: CORE,\n    };\n    Identifiers.SecurityContext = {\n        name: 'SecurityContext',\n        moduleName: CORE,\n    };\n    Identifiers.LOCALE_ID = { name: 'LOCALE_ID', moduleName: CORE };\n    Identifiers.TRANSLATIONS_FORMAT = {\n        name: 'TRANSLATIONS_FORMAT',\n        moduleName: CORE,\n    };\n    Identifiers.inlineInterpolate = {\n        name: 'inlineInterpolate',\n        moduleName: CORE,\n    };\n    Identifiers.interpolate = { name: 'interpolate', moduleName: CORE };\n    Identifiers.EMPTY_ARRAY = { name: 'EMPTY_ARRAY', moduleName: CORE };\n    Identifiers.EMPTY_MAP = { name: 'EMPTY_MAP', moduleName: CORE };\n    Identifiers.Renderer = { name: 'Renderer', moduleName: CORE };\n    Identifiers.viewDef = { name: 'vid', moduleName: CORE };\n    Identifiers.elementDef = { name: 'eld', moduleName: CORE };\n    Identifiers.anchorDef = { name: 'and', moduleName: CORE };\n    Identifiers.textDef = { name: 'ted', moduleName: CORE };\n    Identifiers.directiveDef = { name: 'did', moduleName: CORE };\n    Identifiers.providerDef = { name: 'prd', moduleName: CORE };\n    Identifiers.queryDef = { name: 'qud', moduleName: CORE };\n    Identifiers.pureArrayDef = { name: 'pad', moduleName: CORE };\n    Identifiers.pureObjectDef = { name: 'pod', moduleName: CORE };\n    Identifiers.purePipeDef = { name: 'ppd', moduleName: CORE };\n    Identifiers.pipeDef = { name: 'pid', moduleName: CORE };\n    Identifiers.nodeValue = { name: 'nov', moduleName: CORE };\n    Identifiers.ngContentDef = { name: 'ncd', moduleName: CORE };\n    Identifiers.unwrapValue = { name: 'unv', moduleName: CORE };\n    Identifiers.createRendererType2 = { name: 'crt', moduleName: CORE };\n    // type only\n    Identifiers.RendererType2 = {\n        name: 'RendererType2',\n        moduleName: CORE,\n    };\n    // type only\n    Identifiers.ViewDefinition = {\n        name: 'ViewDefinition',\n        moduleName: CORE,\n    };\n    Identifiers.createComponentFactory = { name: 'ccf', moduleName: CORE };\n    return Identifiers;\n}());\nfunction createTokenForReference(reference) {\n    return { identifier: { reference: reference } };\n}\nfunction createTokenForExternalReference(reflector, reference) {\n    return createTokenForReference(reflector.resolveExternalReference(reference));\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n//// Types\nvar TypeModifier;\n(function (TypeModifier) {\n    TypeModifier[TypeModifier[\"Const\"] = 0] = \"Const\";\n})(TypeModifier || (TypeModifier = {}));\nvar Type$1 = /** @class */ (function () {\n    function Type(modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        this.modifiers = modifiers;\n        if (!modifiers) {\n            this.modifiers = [];\n        }\n    }\n    Type.prototype.hasModifier = function (modifier) { return this.modifiers.indexOf(modifier) !== -1; };\n    return Type;\n}());\nvar BuiltinTypeName;\n(function (BuiltinTypeName) {\n    BuiltinTypeName[BuiltinTypeName[\"Dynamic\"] = 0] = \"Dynamic\";\n    BuiltinTypeName[BuiltinTypeName[\"Bool\"] = 1] = \"Bool\";\n    BuiltinTypeName[BuiltinTypeName[\"String\"] = 2] = \"String\";\n    BuiltinTypeName[BuiltinTypeName[\"Int\"] = 3] = \"Int\";\n    BuiltinTypeName[BuiltinTypeName[\"Number\"] = 4] = \"Number\";\n    BuiltinTypeName[BuiltinTypeName[\"Function\"] = 5] = \"Function\";\n    BuiltinTypeName[BuiltinTypeName[\"Inferred\"] = 6] = \"Inferred\";\n})(BuiltinTypeName || (BuiltinTypeName = {}));\nvar BuiltinType = /** @class */ (function (_super) {\n    __extends(BuiltinType, _super);\n    function BuiltinType(name, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers) || this;\n        _this.name = name;\n        return _this;\n    }\n    BuiltinType.prototype.visitType = function (visitor, context) {\n        return visitor.visitBuiltinType(this, context);\n    };\n    return BuiltinType;\n}(Type$1));\nvar ExpressionType = /** @class */ (function (_super) {\n    __extends(ExpressionType, _super);\n    function ExpressionType(value, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers) || this;\n        _this.value = value;\n        return _this;\n    }\n    ExpressionType.prototype.visitType = function (visitor, context) {\n        return visitor.visitExpressionType(this, context);\n    };\n    return ExpressionType;\n}(Type$1));\nvar ArrayType = /** @class */ (function (_super) {\n    __extends(ArrayType, _super);\n    function ArrayType(of, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers) || this;\n        _this.of = of;\n        return _this;\n    }\n    ArrayType.prototype.visitType = function (visitor, context) {\n        return visitor.visitArrayType(this, context);\n    };\n    return ArrayType;\n}(Type$1));\nvar MapType = /** @class */ (function (_super) {\n    __extends(MapType, _super);\n    function MapType(valueType, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers) || this;\n        _this.valueType = valueType || null;\n        return _this;\n    }\n    MapType.prototype.visitType = function (visitor, context) { return visitor.visitMapType(this, context); };\n    return MapType;\n}(Type$1));\nvar DYNAMIC_TYPE = new BuiltinType(BuiltinTypeName.Dynamic);\nvar INFERRED_TYPE = new BuiltinType(BuiltinTypeName.Inferred);\nvar BOOL_TYPE = new BuiltinType(BuiltinTypeName.Bool);\nvar INT_TYPE = new BuiltinType(BuiltinTypeName.Int);\nvar NUMBER_TYPE = new BuiltinType(BuiltinTypeName.Number);\nvar STRING_TYPE = new BuiltinType(BuiltinTypeName.String);\nvar FUNCTION_TYPE = new BuiltinType(BuiltinTypeName.Function);\n///// Expressions\nvar BinaryOperator;\n(function (BinaryOperator) {\n    BinaryOperator[BinaryOperator[\"Equals\"] = 0] = \"Equals\";\n    BinaryOperator[BinaryOperator[\"NotEquals\"] = 1] = \"NotEquals\";\n    BinaryOperator[BinaryOperator[\"Identical\"] = 2] = \"Identical\";\n    BinaryOperator[BinaryOperator[\"NotIdentical\"] = 3] = \"NotIdentical\";\n    BinaryOperator[BinaryOperator[\"Minus\"] = 4] = \"Minus\";\n    BinaryOperator[BinaryOperator[\"Plus\"] = 5] = \"Plus\";\n    BinaryOperator[BinaryOperator[\"Divide\"] = 6] = \"Divide\";\n    BinaryOperator[BinaryOperator[\"Multiply\"] = 7] = \"Multiply\";\n    BinaryOperator[BinaryOperator[\"Modulo\"] = 8] = \"Modulo\";\n    BinaryOperator[BinaryOperator[\"And\"] = 9] = \"And\";\n    BinaryOperator[BinaryOperator[\"Or\"] = 10] = \"Or\";\n    BinaryOperator[BinaryOperator[\"BitwiseAnd\"] = 11] = \"BitwiseAnd\";\n    BinaryOperator[BinaryOperator[\"Lower\"] = 12] = \"Lower\";\n    BinaryOperator[BinaryOperator[\"LowerEquals\"] = 13] = \"LowerEquals\";\n    BinaryOperator[BinaryOperator[\"Bigger\"] = 14] = \"Bigger\";\n    BinaryOperator[BinaryOperator[\"BiggerEquals\"] = 15] = \"BiggerEquals\";\n})(BinaryOperator || (BinaryOperator = {}));\nfunction nullSafeIsEquivalent(base, other) {\n    if (base == null || other == null) {\n        return base == other;\n    }\n    return base.isEquivalent(other);\n}\nfunction areAllEquivalent(base, other) {\n    var len = base.length;\n    if (len !== other.length) {\n        return false;\n    }\n    for (var i = 0; i < len; i++) {\n        if (!base[i].isEquivalent(other[i])) {\n            return false;\n        }\n    }\n    return true;\n}\nvar Expression = /** @class */ (function () {\n    function Expression(type, sourceSpan) {\n        this.type = type || null;\n        this.sourceSpan = sourceSpan || null;\n    }\n    Expression.prototype.prop = function (name, sourceSpan) {\n        return new ReadPropExpr(this, name, null, sourceSpan);\n    };\n    Expression.prototype.key = function (index, type, sourceSpan) {\n        return new ReadKeyExpr(this, index, type, sourceSpan);\n    };\n    Expression.prototype.callMethod = function (name, params, sourceSpan) {\n        return new InvokeMethodExpr(this, name, params, null, sourceSpan);\n    };\n    Expression.prototype.callFn = function (params, sourceSpan) {\n        return new InvokeFunctionExpr(this, params, null, sourceSpan);\n    };\n    Expression.prototype.instantiate = function (params, type, sourceSpan) {\n        return new InstantiateExpr(this, params, type, sourceSpan);\n    };\n    Expression.prototype.conditional = function (trueCase, falseCase, sourceSpan) {\n        if (falseCase === void 0) { falseCase = null; }\n        return new ConditionalExpr(this, trueCase, falseCase, null, sourceSpan);\n    };\n    Expression.prototype.equals = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Equals, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.notEquals = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.NotEquals, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.identical = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Identical, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.notIdentical = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.NotIdentical, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.minus = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Minus, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.plus = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Plus, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.divide = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Divide, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.multiply = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Multiply, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.modulo = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Modulo, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.and = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.And, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.bitwiseAnd = function (rhs, sourceSpan, parens) {\n        if (parens === void 0) { parens = true; }\n        return new BinaryOperatorExpr(BinaryOperator.BitwiseAnd, this, rhs, null, sourceSpan, parens);\n    };\n    Expression.prototype.or = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Or, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.lower = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Lower, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.lowerEquals = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.LowerEquals, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.bigger = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.Bigger, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.biggerEquals = function (rhs, sourceSpan) {\n        return new BinaryOperatorExpr(BinaryOperator.BiggerEquals, this, rhs, null, sourceSpan);\n    };\n    Expression.prototype.isBlank = function (sourceSpan) {\n        // Note: We use equals by purpose here to compare to null and undefined in JS.\n        // We use the typed null to allow strictNullChecks to narrow types.\n        return this.equals(TYPED_NULL_EXPR, sourceSpan);\n    };\n    Expression.prototype.cast = function (type, sourceSpan) {\n        return new CastExpr(this, type, sourceSpan);\n    };\n    Expression.prototype.toStmt = function () { return new ExpressionStatement(this, null); };\n    return Expression;\n}());\nvar BuiltinVar;\n(function (BuiltinVar) {\n    BuiltinVar[BuiltinVar[\"This\"] = 0] = \"This\";\n    BuiltinVar[BuiltinVar[\"Super\"] = 1] = \"Super\";\n    BuiltinVar[BuiltinVar[\"CatchError\"] = 2] = \"CatchError\";\n    BuiltinVar[BuiltinVar[\"CatchStack\"] = 3] = \"CatchStack\";\n})(BuiltinVar || (BuiltinVar = {}));\nvar ReadVarExpr = /** @class */ (function (_super) {\n    __extends(ReadVarExpr, _super);\n    function ReadVarExpr(name, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        if (typeof name === 'string') {\n            _this.name = name;\n            _this.builtin = null;\n        }\n        else {\n            _this.name = null;\n            _this.builtin = name;\n        }\n        return _this;\n    }\n    ReadVarExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ReadVarExpr && this.name === e.name && this.builtin === e.builtin;\n    };\n    ReadVarExpr.prototype.isConstant = function () { return false; };\n    ReadVarExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitReadVarExpr(this, context);\n    };\n    ReadVarExpr.prototype.set = function (value) {\n        if (!this.name) {\n            throw new Error(\"Built in variable \" + this.builtin + \" can not be assigned to.\");\n        }\n        return new WriteVarExpr(this.name, value, null, this.sourceSpan);\n    };\n    return ReadVarExpr;\n}(Expression));\nvar WrappedNodeExpr = /** @class */ (function (_super) {\n    __extends(WrappedNodeExpr, _super);\n    function WrappedNodeExpr(node, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.node = node;\n        return _this;\n    }\n    WrappedNodeExpr.prototype.isEquivalent = function (e) {\n        return e instanceof WrappedNodeExpr && this.node === e.node;\n    };\n    WrappedNodeExpr.prototype.isConstant = function () { return false; };\n    WrappedNodeExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitWrappedNodeExpr(this, context);\n    };\n    return WrappedNodeExpr;\n}(Expression));\nvar WriteVarExpr = /** @class */ (function (_super) {\n    __extends(WriteVarExpr, _super);\n    function WriteVarExpr(name, value, type, sourceSpan) {\n        var _this = _super.call(this, type || value.type, sourceSpan) || this;\n        _this.name = name;\n        _this.value = value;\n        return _this;\n    }\n    WriteVarExpr.prototype.isEquivalent = function (e) {\n        return e instanceof WriteVarExpr && this.name === e.name && this.value.isEquivalent(e.value);\n    };\n    WriteVarExpr.prototype.isConstant = function () { return false; };\n    WriteVarExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitWriteVarExpr(this, context);\n    };\n    WriteVarExpr.prototype.toDeclStmt = function (type, modifiers) {\n        return new DeclareVarStmt(this.name, this.value, type, modifiers, this.sourceSpan);\n    };\n    return WriteVarExpr;\n}(Expression));\nvar WriteKeyExpr = /** @class */ (function (_super) {\n    __extends(WriteKeyExpr, _super);\n    function WriteKeyExpr(receiver, index, value, type, sourceSpan) {\n        var _this = _super.call(this, type || value.type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.index = index;\n        _this.value = value;\n        return _this;\n    }\n    WriteKeyExpr.prototype.isEquivalent = function (e) {\n        return e instanceof WriteKeyExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.index.isEquivalent(e.index) && this.value.isEquivalent(e.value);\n    };\n    WriteKeyExpr.prototype.isConstant = function () { return false; };\n    WriteKeyExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitWriteKeyExpr(this, context);\n    };\n    return WriteKeyExpr;\n}(Expression));\nvar WritePropExpr = /** @class */ (function (_super) {\n    __extends(WritePropExpr, _super);\n    function WritePropExpr(receiver, name, value, type, sourceSpan) {\n        var _this = _super.call(this, type || value.type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        _this.value = value;\n        return _this;\n    }\n    WritePropExpr.prototype.isEquivalent = function (e) {\n        return e instanceof WritePropExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.name === e.name && this.value.isEquivalent(e.value);\n    };\n    WritePropExpr.prototype.isConstant = function () { return false; };\n    WritePropExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitWritePropExpr(this, context);\n    };\n    return WritePropExpr;\n}(Expression));\nvar BuiltinMethod;\n(function (BuiltinMethod) {\n    BuiltinMethod[BuiltinMethod[\"ConcatArray\"] = 0] = \"ConcatArray\";\n    BuiltinMethod[BuiltinMethod[\"SubscribeObservable\"] = 1] = \"SubscribeObservable\";\n    BuiltinMethod[BuiltinMethod[\"Bind\"] = 2] = \"Bind\";\n})(BuiltinMethod || (BuiltinMethod = {}));\nvar InvokeMethodExpr = /** @class */ (function (_super) {\n    __extends(InvokeMethodExpr, _super);\n    function InvokeMethodExpr(receiver, method, args, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.args = args;\n        if (typeof method === 'string') {\n            _this.name = method;\n            _this.builtin = null;\n        }\n        else {\n            _this.name = null;\n            _this.builtin = method;\n        }\n        return _this;\n    }\n    InvokeMethodExpr.prototype.isEquivalent = function (e) {\n        return e instanceof InvokeMethodExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.name === e.name && this.builtin === e.builtin && areAllEquivalent(this.args, e.args);\n    };\n    InvokeMethodExpr.prototype.isConstant = function () { return false; };\n    InvokeMethodExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitInvokeMethodExpr(this, context);\n    };\n    return InvokeMethodExpr;\n}(Expression));\nvar InvokeFunctionExpr = /** @class */ (function (_super) {\n    __extends(InvokeFunctionExpr, _super);\n    function InvokeFunctionExpr(fn, args, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.fn = fn;\n        _this.args = args;\n        return _this;\n    }\n    InvokeFunctionExpr.prototype.isEquivalent = function (e) {\n        return e instanceof InvokeFunctionExpr && this.fn.isEquivalent(e.fn) &&\n            areAllEquivalent(this.args, e.args);\n    };\n    InvokeFunctionExpr.prototype.isConstant = function () { return false; };\n    InvokeFunctionExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitInvokeFunctionExpr(this, context);\n    };\n    return InvokeFunctionExpr;\n}(Expression));\nvar InstantiateExpr = /** @class */ (function (_super) {\n    __extends(InstantiateExpr, _super);\n    function InstantiateExpr(classExpr, args, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.classExpr = classExpr;\n        _this.args = args;\n        return _this;\n    }\n    InstantiateExpr.prototype.isEquivalent = function (e) {\n        return e instanceof InstantiateExpr && this.classExpr.isEquivalent(e.classExpr) &&\n            areAllEquivalent(this.args, e.args);\n    };\n    InstantiateExpr.prototype.isConstant = function () { return false; };\n    InstantiateExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitInstantiateExpr(this, context);\n    };\n    return InstantiateExpr;\n}(Expression));\nvar LiteralExpr = /** @class */ (function (_super) {\n    __extends(LiteralExpr, _super);\n    function LiteralExpr(value, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.value = value;\n        return _this;\n    }\n    LiteralExpr.prototype.isEquivalent = function (e) {\n        return e instanceof LiteralExpr && this.value === e.value;\n    };\n    LiteralExpr.prototype.isConstant = function () { return true; };\n    LiteralExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitLiteralExpr(this, context);\n    };\n    return LiteralExpr;\n}(Expression));\nvar ExternalExpr = /** @class */ (function (_super) {\n    __extends(ExternalExpr, _super);\n    function ExternalExpr(value, type, typeParams, sourceSpan) {\n        if (typeParams === void 0) { typeParams = null; }\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.value = value;\n        _this.typeParams = typeParams;\n        return _this;\n    }\n    ExternalExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ExternalExpr && this.value.name === e.value.name &&\n            this.value.moduleName === e.value.moduleName && this.value.runtime === e.value.runtime;\n    };\n    ExternalExpr.prototype.isConstant = function () { return false; };\n    ExternalExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitExternalExpr(this, context);\n    };\n    return ExternalExpr;\n}(Expression));\nvar ConditionalExpr = /** @class */ (function (_super) {\n    __extends(ConditionalExpr, _super);\n    function ConditionalExpr(condition, trueCase, falseCase, type, sourceSpan) {\n        if (falseCase === void 0) { falseCase = null; }\n        var _this = _super.call(this, type || trueCase.type, sourceSpan) || this;\n        _this.condition = condition;\n        _this.falseCase = falseCase;\n        _this.trueCase = trueCase;\n        return _this;\n    }\n    ConditionalExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ConditionalExpr && this.condition.isEquivalent(e.condition) &&\n            this.trueCase.isEquivalent(e.trueCase) && nullSafeIsEquivalent(this.falseCase, e.falseCase);\n    };\n    ConditionalExpr.prototype.isConstant = function () { return false; };\n    ConditionalExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitConditionalExpr(this, context);\n    };\n    return ConditionalExpr;\n}(Expression));\nvar NotExpr = /** @class */ (function (_super) {\n    __extends(NotExpr, _super);\n    function NotExpr(condition, sourceSpan) {\n        var _this = _super.call(this, BOOL_TYPE, sourceSpan) || this;\n        _this.condition = condition;\n        return _this;\n    }\n    NotExpr.prototype.isEquivalent = function (e) {\n        return e instanceof NotExpr && this.condition.isEquivalent(e.condition);\n    };\n    NotExpr.prototype.isConstant = function () { return false; };\n    NotExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitNotExpr(this, context);\n    };\n    return NotExpr;\n}(Expression));\nvar AssertNotNull = /** @class */ (function (_super) {\n    __extends(AssertNotNull, _super);\n    function AssertNotNull(condition, sourceSpan) {\n        var _this = _super.call(this, condition.type, sourceSpan) || this;\n        _this.condition = condition;\n        return _this;\n    }\n    AssertNotNull.prototype.isEquivalent = function (e) {\n        return e instanceof AssertNotNull && this.condition.isEquivalent(e.condition);\n    };\n    AssertNotNull.prototype.isConstant = function () { return false; };\n    AssertNotNull.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitAssertNotNullExpr(this, context);\n    };\n    return AssertNotNull;\n}(Expression));\nvar CastExpr = /** @class */ (function (_super) {\n    __extends(CastExpr, _super);\n    function CastExpr(value, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.value = value;\n        return _this;\n    }\n    CastExpr.prototype.isEquivalent = function (e) {\n        return e instanceof CastExpr && this.value.isEquivalent(e.value);\n    };\n    CastExpr.prototype.isConstant = function () { return false; };\n    CastExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitCastExpr(this, context);\n    };\n    return CastExpr;\n}(Expression));\nvar FunctionExpr = /** @class */ (function (_super) {\n    __extends(FunctionExpr, _super);\n    function FunctionExpr(params, statements, type, sourceSpan, name) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.params = params;\n        _this.statements = statements;\n        _this.name = name;\n        return _this;\n    }\n    FunctionExpr.prototype.isEquivalent = function (e) {\n        return e instanceof FunctionExpr && areAllEquivalent(this.params, e.params) &&\n            areAllEquivalent(this.statements, e.statements);\n    };\n    FunctionExpr.prototype.isConstant = function () { return false; };\n    FunctionExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitFunctionExpr(this, context);\n    };\n    FunctionExpr.prototype.toDeclStmt = function (name, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        return new DeclareFunctionStmt(name, this.params, this.statements, this.type, modifiers, this.sourceSpan);\n    };\n    return FunctionExpr;\n}(Expression));\nvar BinaryOperatorExpr = /** @class */ (function (_super) {\n    __extends(BinaryOperatorExpr, _super);\n    function BinaryOperatorExpr(operator, lhs, rhs, type, sourceSpan, parens) {\n        if (parens === void 0) { parens = true; }\n        var _this = _super.call(this, type || lhs.type, sourceSpan) || this;\n        _this.operator = operator;\n        _this.rhs = rhs;\n        _this.parens = parens;\n        _this.lhs = lhs;\n        return _this;\n    }\n    BinaryOperatorExpr.prototype.isEquivalent = function (e) {\n        return e instanceof BinaryOperatorExpr && this.operator === e.operator &&\n            this.lhs.isEquivalent(e.lhs) && this.rhs.isEquivalent(e.rhs);\n    };\n    BinaryOperatorExpr.prototype.isConstant = function () { return false; };\n    BinaryOperatorExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitBinaryOperatorExpr(this, context);\n    };\n    return BinaryOperatorExpr;\n}(Expression));\nvar ReadPropExpr = /** @class */ (function (_super) {\n    __extends(ReadPropExpr, _super);\n    function ReadPropExpr(receiver, name, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.name = name;\n        return _this;\n    }\n    ReadPropExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ReadPropExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.name === e.name;\n    };\n    ReadPropExpr.prototype.isConstant = function () { return false; };\n    ReadPropExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitReadPropExpr(this, context);\n    };\n    ReadPropExpr.prototype.set = function (value) {\n        return new WritePropExpr(this.receiver, this.name, value, null, this.sourceSpan);\n    };\n    return ReadPropExpr;\n}(Expression));\nvar ReadKeyExpr = /** @class */ (function (_super) {\n    __extends(ReadKeyExpr, _super);\n    function ReadKeyExpr(receiver, index, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.receiver = receiver;\n        _this.index = index;\n        return _this;\n    }\n    ReadKeyExpr.prototype.isEquivalent = function (e) {\n        return e instanceof ReadKeyExpr && this.receiver.isEquivalent(e.receiver) &&\n            this.index.isEquivalent(e.index);\n    };\n    ReadKeyExpr.prototype.isConstant = function () { return false; };\n    ReadKeyExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitReadKeyExpr(this, context);\n    };\n    ReadKeyExpr.prototype.set = function (value) {\n        return new WriteKeyExpr(this.receiver, this.index, value, null, this.sourceSpan);\n    };\n    return ReadKeyExpr;\n}(Expression));\nvar LiteralArrayExpr = /** @class */ (function (_super) {\n    __extends(LiteralArrayExpr, _super);\n    function LiteralArrayExpr(entries, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.entries = entries;\n        return _this;\n    }\n    LiteralArrayExpr.prototype.isConstant = function () { return this.entries.every(function (e) { return e.isConstant(); }); };\n    LiteralArrayExpr.prototype.isEquivalent = function (e) {\n        return e instanceof LiteralArrayExpr && areAllEquivalent(this.entries, e.entries);\n    };\n    LiteralArrayExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitLiteralArrayExpr(this, context);\n    };\n    return LiteralArrayExpr;\n}(Expression));\nvar LiteralMapEntry = /** @class */ (function () {\n    function LiteralMapEntry(key, value, quoted) {\n        this.key = key;\n        this.value = value;\n        this.quoted = quoted;\n    }\n    LiteralMapEntry.prototype.isEquivalent = function (e) {\n        return this.key === e.key && this.value.isEquivalent(e.value);\n    };\n    return LiteralMapEntry;\n}());\nvar LiteralMapExpr = /** @class */ (function (_super) {\n    __extends(LiteralMapExpr, _super);\n    function LiteralMapExpr(entries, type, sourceSpan) {\n        var _this = _super.call(this, type, sourceSpan) || this;\n        _this.entries = entries;\n        _this.valueType = null;\n        if (type) {\n            _this.valueType = type.valueType;\n        }\n        return _this;\n    }\n    LiteralMapExpr.prototype.isEquivalent = function (e) {\n        return e instanceof LiteralMapExpr && areAllEquivalent(this.entries, e.entries);\n    };\n    LiteralMapExpr.prototype.isConstant = function () { return this.entries.every(function (e) { return e.value.isConstant(); }); };\n    LiteralMapExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitLiteralMapExpr(this, context);\n    };\n    return LiteralMapExpr;\n}(Expression));\nvar CommaExpr = /** @class */ (function (_super) {\n    __extends(CommaExpr, _super);\n    function CommaExpr(parts, sourceSpan) {\n        var _this = _super.call(this, parts[parts.length - 1].type, sourceSpan) || this;\n        _this.parts = parts;\n        return _this;\n    }\n    CommaExpr.prototype.isEquivalent = function (e) {\n        return e instanceof CommaExpr && areAllEquivalent(this.parts, e.parts);\n    };\n    CommaExpr.prototype.isConstant = function () { return false; };\n    CommaExpr.prototype.visitExpression = function (visitor, context) {\n        return visitor.visitCommaExpr(this, context);\n    };\n    return CommaExpr;\n}(Expression));\nvar THIS_EXPR = new ReadVarExpr(BuiltinVar.This, null, null);\nvar SUPER_EXPR = new ReadVarExpr(BuiltinVar.Super, null, null);\nvar CATCH_ERROR_VAR = new ReadVarExpr(BuiltinVar.CatchError, null, null);\nvar CATCH_STACK_VAR = new ReadVarExpr(BuiltinVar.CatchStack, null, null);\nvar NULL_EXPR = new LiteralExpr(null, null, null);\nvar TYPED_NULL_EXPR = new LiteralExpr(null, INFERRED_TYPE, null);\n//// Statements\nvar StmtModifier;\n(function (StmtModifier) {\n    StmtModifier[StmtModifier[\"Final\"] = 0] = \"Final\";\n    StmtModifier[StmtModifier[\"Private\"] = 1] = \"Private\";\n    StmtModifier[StmtModifier[\"Exported\"] = 2] = \"Exported\";\n    StmtModifier[StmtModifier[\"Static\"] = 3] = \"Static\";\n})(StmtModifier || (StmtModifier = {}));\nvar Statement = /** @class */ (function () {\n    function Statement(modifiers, sourceSpan) {\n        this.modifiers = modifiers || [];\n        this.sourceSpan = sourceSpan || null;\n    }\n    Statement.prototype.hasModifier = function (modifier) { return this.modifiers.indexOf(modifier) !== -1; };\n    return Statement;\n}());\nvar DeclareVarStmt = /** @class */ (function (_super) {\n    __extends(DeclareVarStmt, _super);\n    function DeclareVarStmt(name, value, type, modifiers, sourceSpan) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers, sourceSpan) || this;\n        _this.name = name;\n        _this.value = value;\n        _this.type = type || (value && value.type) || null;\n        return _this;\n    }\n    DeclareVarStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof DeclareVarStmt && this.name === stmt.name &&\n            (this.value ? !!stmt.value && this.value.isEquivalent(stmt.value) : !stmt.value);\n    };\n    DeclareVarStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitDeclareVarStmt(this, context);\n    };\n    return DeclareVarStmt;\n}(Statement));\nvar DeclareFunctionStmt = /** @class */ (function (_super) {\n    __extends(DeclareFunctionStmt, _super);\n    function DeclareFunctionStmt(name, params, statements, type, modifiers, sourceSpan) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers, sourceSpan) || this;\n        _this.name = name;\n        _this.params = params;\n        _this.statements = statements;\n        _this.type = type || null;\n        return _this;\n    }\n    DeclareFunctionStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof DeclareFunctionStmt && areAllEquivalent(this.params, stmt.params) &&\n            areAllEquivalent(this.statements, stmt.statements);\n    };\n    DeclareFunctionStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitDeclareFunctionStmt(this, context);\n    };\n    return DeclareFunctionStmt;\n}(Statement));\nvar ExpressionStatement = /** @class */ (function (_super) {\n    __extends(ExpressionStatement, _super);\n    function ExpressionStatement(expr, sourceSpan) {\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.expr = expr;\n        return _this;\n    }\n    ExpressionStatement.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof ExpressionStatement && this.expr.isEquivalent(stmt.expr);\n    };\n    ExpressionStatement.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitExpressionStmt(this, context);\n    };\n    return ExpressionStatement;\n}(Statement));\nvar ReturnStatement = /** @class */ (function (_super) {\n    __extends(ReturnStatement, _super);\n    function ReturnStatement(value, sourceSpan) {\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.value = value;\n        return _this;\n    }\n    ReturnStatement.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof ReturnStatement && this.value.isEquivalent(stmt.value);\n    };\n    ReturnStatement.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitReturnStmt(this, context);\n    };\n    return ReturnStatement;\n}(Statement));\nvar AbstractClassPart = /** @class */ (function () {\n    function AbstractClassPart(type, modifiers) {\n        this.modifiers = modifiers;\n        if (!modifiers) {\n            this.modifiers = [];\n        }\n        this.type = type || null;\n    }\n    AbstractClassPart.prototype.hasModifier = function (modifier) { return this.modifiers.indexOf(modifier) !== -1; };\n    return AbstractClassPart;\n}());\nvar ClassField = /** @class */ (function (_super) {\n    __extends(ClassField, _super);\n    function ClassField(name, type, modifiers, initializer) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, type, modifiers) || this;\n        _this.name = name;\n        _this.initializer = initializer;\n        return _this;\n    }\n    ClassField.prototype.isEquivalent = function (f) { return this.name === f.name; };\n    return ClassField;\n}(AbstractClassPart));\nvar ClassMethod = /** @class */ (function (_super) {\n    __extends(ClassMethod, _super);\n    function ClassMethod(name, params, body, type, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, type, modifiers) || this;\n        _this.name = name;\n        _this.params = params;\n        _this.body = body;\n        return _this;\n    }\n    ClassMethod.prototype.isEquivalent = function (m) {\n        return this.name === m.name && areAllEquivalent(this.body, m.body);\n    };\n    return ClassMethod;\n}(AbstractClassPart));\nvar ClassGetter = /** @class */ (function (_super) {\n    __extends(ClassGetter, _super);\n    function ClassGetter(name, body, type, modifiers) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, type, modifiers) || this;\n        _this.name = name;\n        _this.body = body;\n        return _this;\n    }\n    ClassGetter.prototype.isEquivalent = function (m) {\n        return this.name === m.name && areAllEquivalent(this.body, m.body);\n    };\n    return ClassGetter;\n}(AbstractClassPart));\nvar ClassStmt = /** @class */ (function (_super) {\n    __extends(ClassStmt, _super);\n    function ClassStmt(name, parent, fields, getters, constructorMethod, methods, modifiers, sourceSpan) {\n        if (modifiers === void 0) { modifiers = null; }\n        var _this = _super.call(this, modifiers, sourceSpan) || this;\n        _this.name = name;\n        _this.parent = parent;\n        _this.fields = fields;\n        _this.getters = getters;\n        _this.constructorMethod = constructorMethod;\n        _this.methods = methods;\n        return _this;\n    }\n    ClassStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof ClassStmt && this.name === stmt.name &&\n            nullSafeIsEquivalent(this.parent, stmt.parent) &&\n            areAllEquivalent(this.fields, stmt.fields) &&\n            areAllEquivalent(this.getters, stmt.getters) &&\n            this.constructorMethod.isEquivalent(stmt.constructorMethod) &&\n            areAllEquivalent(this.methods, stmt.methods);\n    };\n    ClassStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitDeclareClassStmt(this, context);\n    };\n    return ClassStmt;\n}(Statement));\nvar IfStmt = /** @class */ (function (_super) {\n    __extends(IfStmt, _super);\n    function IfStmt(condition, trueCase, falseCase, sourceSpan) {\n        if (falseCase === void 0) { falseCase = []; }\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.condition = condition;\n        _this.trueCase = trueCase;\n        _this.falseCase = falseCase;\n        return _this;\n    }\n    IfStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof IfStmt && this.condition.isEquivalent(stmt.condition) &&\n            areAllEquivalent(this.trueCase, stmt.trueCase) &&\n            areAllEquivalent(this.falseCase, stmt.falseCase);\n    };\n    IfStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitIfStmt(this, context);\n    };\n    return IfStmt;\n}(Statement));\nvar CommentStmt = /** @class */ (function (_super) {\n    __extends(CommentStmt, _super);\n    function CommentStmt(comment, multiline, sourceSpan) {\n        if (multiline === void 0) { multiline = false; }\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.comment = comment;\n        _this.multiline = multiline;\n        return _this;\n    }\n    CommentStmt.prototype.isEquivalent = function (stmt) { return stmt instanceof CommentStmt; };\n    CommentStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitCommentStmt(this, context);\n    };\n    return CommentStmt;\n}(Statement));\nvar JSDocCommentStmt = /** @class */ (function (_super) {\n    __extends(JSDocCommentStmt, _super);\n    function JSDocCommentStmt(tags, sourceSpan) {\n        if (tags === void 0) { tags = []; }\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.tags = tags;\n        return _this;\n    }\n    JSDocCommentStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof JSDocCommentStmt && this.toString() === stmt.toString();\n    };\n    JSDocCommentStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitJSDocCommentStmt(this, context);\n    };\n    JSDocCommentStmt.prototype.toString = function () { return serializeTags(this.tags); };\n    return JSDocCommentStmt;\n}(Statement));\nvar TryCatchStmt = /** @class */ (function (_super) {\n    __extends(TryCatchStmt, _super);\n    function TryCatchStmt(bodyStmts, catchStmts, sourceSpan) {\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.bodyStmts = bodyStmts;\n        _this.catchStmts = catchStmts;\n        return _this;\n    }\n    TryCatchStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof TryCatchStmt && areAllEquivalent(this.bodyStmts, stmt.bodyStmts) &&\n            areAllEquivalent(this.catchStmts, stmt.catchStmts);\n    };\n    TryCatchStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitTryCatchStmt(this, context);\n    };\n    return TryCatchStmt;\n}(Statement));\nvar ThrowStmt = /** @class */ (function (_super) {\n    __extends(ThrowStmt, _super);\n    function ThrowStmt(error, sourceSpan) {\n        var _this = _super.call(this, null, sourceSpan) || this;\n        _this.error = error;\n        return _this;\n    }\n    ThrowStmt.prototype.isEquivalent = function (stmt) {\n        return stmt instanceof TryCatchStmt && this.error.isEquivalent(stmt.error);\n    };\n    ThrowStmt.prototype.visitStatement = function (visitor, context) {\n        return visitor.visitThrowStmt(this, context);\n    };\n    return ThrowStmt;\n}(Statement));\nvar AstTransformer$1 = /** @class */ (function () {\n    function AstTransformer() {\n    }\n    AstTransformer.prototype.transformExpr = function (expr, context) { return expr; };\n    AstTransformer.prototype.transformStmt = function (stmt, context) { return stmt; };\n    AstTransformer.prototype.visitReadVarExpr = function (ast, context) { return this.transformExpr(ast, context); };\n    AstTransformer.prototype.visitWrappedNodeExpr = function (ast, context) {\n        return this.transformExpr(ast, context);\n    };\n    AstTransformer.prototype.visitWriteVarExpr = function (expr, context) {\n        return this.transformExpr(new WriteVarExpr(expr.name, expr.value.visitExpression(this, context), expr.type, expr.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitWriteKeyExpr = function (expr, context) {\n        return this.transformExpr(new WriteKeyExpr(expr.receiver.visitExpression(this, context), expr.index.visitExpression(this, context), expr.value.visitExpression(this, context), expr.type, expr.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitWritePropExpr = function (expr, context) {\n        return this.transformExpr(new WritePropExpr(expr.receiver.visitExpression(this, context), expr.name, expr.value.visitExpression(this, context), expr.type, expr.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitInvokeMethodExpr = function (ast, context) {\n        var method = ast.builtin || ast.name;\n        return this.transformExpr(new InvokeMethodExpr(ast.receiver.visitExpression(this, context), method, this.visitAllExpressions(ast.args, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitInvokeFunctionExpr = function (ast, context) {\n        return this.transformExpr(new InvokeFunctionExpr(ast.fn.visitExpression(this, context), this.visitAllExpressions(ast.args, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitInstantiateExpr = function (ast, context) {\n        return this.transformExpr(new InstantiateExpr(ast.classExpr.visitExpression(this, context), this.visitAllExpressions(ast.args, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitLiteralExpr = function (ast, context) { return this.transformExpr(ast, context); };\n    AstTransformer.prototype.visitExternalExpr = function (ast, context) {\n        return this.transformExpr(ast, context);\n    };\n    AstTransformer.prototype.visitConditionalExpr = function (ast, context) {\n        return this.transformExpr(new ConditionalExpr(ast.condition.visitExpression(this, context), ast.trueCase.visitExpression(this, context), ast.falseCase.visitExpression(this, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitNotExpr = function (ast, context) {\n        return this.transformExpr(new NotExpr(ast.condition.visitExpression(this, context), ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitAssertNotNullExpr = function (ast, context) {\n        return this.transformExpr(new AssertNotNull(ast.condition.visitExpression(this, context), ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitCastExpr = function (ast, context) {\n        return this.transformExpr(new CastExpr(ast.value.visitExpression(this, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitFunctionExpr = function (ast, context) {\n        return this.transformExpr(new FunctionExpr(ast.params, this.visitAllStatements(ast.statements, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitBinaryOperatorExpr = function (ast, context) {\n        return this.transformExpr(new BinaryOperatorExpr(ast.operator, ast.lhs.visitExpression(this, context), ast.rhs.visitExpression(this, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitReadPropExpr = function (ast, context) {\n        return this.transformExpr(new ReadPropExpr(ast.receiver.visitExpression(this, context), ast.name, ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitReadKeyExpr = function (ast, context) {\n        return this.transformExpr(new ReadKeyExpr(ast.receiver.visitExpression(this, context), ast.index.visitExpression(this, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitLiteralArrayExpr = function (ast, context) {\n        return this.transformExpr(new LiteralArrayExpr(this.visitAllExpressions(ast.entries, context), ast.type, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitLiteralMapExpr = function (ast, context) {\n        var _this = this;\n        var entries = ast.entries.map(function (entry) { return new LiteralMapEntry(entry.key, entry.value.visitExpression(_this, context), entry.quoted); });\n        var mapType = new MapType(ast.valueType, null);\n        return this.transformExpr(new LiteralMapExpr(entries, mapType, ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitCommaExpr = function (ast, context) {\n        return this.transformExpr(new CommaExpr(this.visitAllExpressions(ast.parts, context), ast.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitAllExpressions = function (exprs, context) {\n        var _this = this;\n        return exprs.map(function (expr) { return expr.visitExpression(_this, context); });\n    };\n    AstTransformer.prototype.visitDeclareVarStmt = function (stmt, context) {\n        var value = stmt.value && stmt.value.visitExpression(this, context);\n        return this.transformStmt(new DeclareVarStmt(stmt.name, value, stmt.type, stmt.modifiers, stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitDeclareFunctionStmt = function (stmt, context) {\n        return this.transformStmt(new DeclareFunctionStmt(stmt.name, stmt.params, this.visitAllStatements(stmt.statements, context), stmt.type, stmt.modifiers, stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitExpressionStmt = function (stmt, context) {\n        return this.transformStmt(new ExpressionStatement(stmt.expr.visitExpression(this, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitReturnStmt = function (stmt, context) {\n        return this.transformStmt(new ReturnStatement(stmt.value.visitExpression(this, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitDeclareClassStmt = function (stmt, context) {\n        var _this = this;\n        var parent = stmt.parent.visitExpression(this, context);\n        var getters = stmt.getters.map(function (getter) { return new ClassGetter(getter.name, _this.visitAllStatements(getter.body, context), getter.type, getter.modifiers); });\n        var ctorMethod = stmt.constructorMethod &&\n            new ClassMethod(stmt.constructorMethod.name, stmt.constructorMethod.params, this.visitAllStatements(stmt.constructorMethod.body, context), stmt.constructorMethod.type, stmt.constructorMethod.modifiers);\n        var methods = stmt.methods.map(function (method) { return new ClassMethod(method.name, method.params, _this.visitAllStatements(method.body, context), method.type, method.modifiers); });\n        return this.transformStmt(new ClassStmt(stmt.name, parent, stmt.fields, getters, ctorMethod, methods, stmt.modifiers, stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitIfStmt = function (stmt, context) {\n        return this.transformStmt(new IfStmt(stmt.condition.visitExpression(this, context), this.visitAllStatements(stmt.trueCase, context), this.visitAllStatements(stmt.falseCase, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitTryCatchStmt = function (stmt, context) {\n        return this.transformStmt(new TryCatchStmt(this.visitAllStatements(stmt.bodyStmts, context), this.visitAllStatements(stmt.catchStmts, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitThrowStmt = function (stmt, context) {\n        return this.transformStmt(new ThrowStmt(stmt.error.visitExpression(this, context), stmt.sourceSpan), context);\n    };\n    AstTransformer.prototype.visitCommentStmt = function (stmt, context) {\n        return this.transformStmt(stmt, context);\n    };\n    AstTransformer.prototype.visitJSDocCommentStmt = function (stmt, context) {\n        return this.transformStmt(stmt, context);\n    };\n    AstTransformer.prototype.visitAllStatements = function (stmts, context) {\n        var _this = this;\n        return stmts.map(function (stmt) { return stmt.visitStatement(_this, context); });\n    };\n    return AstTransformer;\n}());\nvar RecursiveAstVisitor$1 = /** @class */ (function () {\n    function RecursiveAstVisitor() {\n    }\n    RecursiveAstVisitor.prototype.visitType = function (ast, context) { return ast; };\n    RecursiveAstVisitor.prototype.visitExpression = function (ast, context) {\n        if (ast.type) {\n            ast.type.visitType(this, context);\n        }\n        return ast;\n    };\n    RecursiveAstVisitor.prototype.visitBuiltinType = function (type, context) { return this.visitType(type, context); };\n    RecursiveAstVisitor.prototype.visitExpressionType = function (type, context) {\n        type.value.visitExpression(this, context);\n        return this.visitType(type, context);\n    };\n    RecursiveAstVisitor.prototype.visitArrayType = function (type, context) { return this.visitType(type, context); };\n    RecursiveAstVisitor.prototype.visitMapType = function (type, context) { return this.visitType(type, context); };\n    RecursiveAstVisitor.prototype.visitWrappedNodeExpr = function (ast, context) { return ast; };\n    RecursiveAstVisitor.prototype.visitReadVarExpr = function (ast, context) {\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitWriteVarExpr = function (ast, context) {\n        ast.value.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitWriteKeyExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        ast.index.visitExpression(this, context);\n        ast.value.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitWritePropExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        ast.value.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitInvokeMethodExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        this.visitAllExpressions(ast.args, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitInvokeFunctionExpr = function (ast, context) {\n        ast.fn.visitExpression(this, context);\n        this.visitAllExpressions(ast.args, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitInstantiateExpr = function (ast, context) {\n        ast.classExpr.visitExpression(this, context);\n        this.visitAllExpressions(ast.args, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitLiteralExpr = function (ast, context) {\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitExternalExpr = function (ast, context) {\n        var _this = this;\n        if (ast.typeParams) {\n            ast.typeParams.forEach(function (type) { return type.visitType(_this, context); });\n        }\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitConditionalExpr = function (ast, context) {\n        ast.condition.visitExpression(this, context);\n        ast.trueCase.visitExpression(this, context);\n        ast.falseCase.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitNotExpr = function (ast, context) {\n        ast.condition.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitAssertNotNullExpr = function (ast, context) {\n        ast.condition.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitCastExpr = function (ast, context) {\n        ast.value.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitFunctionExpr = function (ast, context) {\n        this.visitAllStatements(ast.statements, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitBinaryOperatorExpr = function (ast, context) {\n        ast.lhs.visitExpression(this, context);\n        ast.rhs.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitReadPropExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitReadKeyExpr = function (ast, context) {\n        ast.receiver.visitExpression(this, context);\n        ast.index.visitExpression(this, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitLiteralArrayExpr = function (ast, context) {\n        this.visitAllExpressions(ast.entries, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitLiteralMapExpr = function (ast, context) {\n        var _this = this;\n        ast.entries.forEach(function (entry) { return entry.value.visitExpression(_this, context); });\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitCommaExpr = function (ast, context) {\n        this.visitAllExpressions(ast.parts, context);\n        return this.visitExpression(ast, context);\n    };\n    RecursiveAstVisitor.prototype.visitAllExpressions = function (exprs, context) {\n        var _this = this;\n        exprs.forEach(function (expr) { return expr.visitExpression(_this, context); });\n    };\n    RecursiveAstVisitor.prototype.visitDeclareVarStmt = function (stmt, context) {\n        if (stmt.value) {\n            stmt.value.visitExpression(this, context);\n        }\n        if (stmt.type) {\n            stmt.type.visitType(this, context);\n        }\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitDeclareFunctionStmt = function (stmt, context) {\n        this.visitAllStatements(stmt.statements, context);\n        if (stmt.type) {\n            stmt.type.visitType(this, context);\n        }\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitExpressionStmt = function (stmt, context) {\n        stmt.expr.visitExpression(this, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitReturnStmt = function (stmt, context) {\n        stmt.value.visitExpression(this, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitDeclareClassStmt = function (stmt, context) {\n        var _this = this;\n        stmt.parent.visitExpression(this, context);\n        stmt.getters.forEach(function (getter) { return _this.visitAllStatements(getter.body, context); });\n        if (stmt.constructorMethod) {\n            this.visitAllStatements(stmt.constructorMethod.body, context);\n        }\n        stmt.methods.forEach(function (method) { return _this.visitAllStatements(method.body, context); });\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitIfStmt = function (stmt, context) {\n        stmt.condition.visitExpression(this, context);\n        this.visitAllStatements(stmt.trueCase, context);\n        this.visitAllStatements(stmt.falseCase, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitTryCatchStmt = function (stmt, context) {\n        this.visitAllStatements(stmt.bodyStmts, context);\n        this.visitAllStatements(stmt.catchStmts, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitThrowStmt = function (stmt, context) {\n        stmt.error.visitExpression(this, context);\n        return stmt;\n    };\n    RecursiveAstVisitor.prototype.visitCommentStmt = function (stmt, context) { return stmt; };\n    RecursiveAstVisitor.prototype.visitJSDocCommentStmt = function (stmt, context) { return stmt; };\n    RecursiveAstVisitor.prototype.visitAllStatements = function (stmts, context) {\n        var _this = this;\n        stmts.forEach(function (stmt) { return stmt.visitStatement(_this, context); });\n    };\n    return RecursiveAstVisitor;\n}());\n\nvar _ReadVarVisitor = /** @class */ (function (_super) {\n    __extends(_ReadVarVisitor, _super);\n    function _ReadVarVisitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.varNames = new Set();\n        return _this;\n    }\n    _ReadVarVisitor.prototype.visitDeclareFunctionStmt = function (stmt, context) {\n        // Don't descend into nested functions\n        return stmt;\n    };\n    _ReadVarVisitor.prototype.visitDeclareClassStmt = function (stmt, context) {\n        // Don't descend into nested classes\n        return stmt;\n    };\n    _ReadVarVisitor.prototype.visitReadVarExpr = function (ast, context) {\n        if (ast.name) {\n            this.varNames.add(ast.name);\n        }\n        return null;\n    };\n    return _ReadVarVisitor;\n}(RecursiveAstVisitor$1));\n\nvar _FindExternalReferencesVisitor = /** @class */ (function (_super) {\n    __extends(_FindExternalReferencesVisitor, _super);\n    function _FindExternalReferencesVisitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.externalReferences = [];\n        return _this;\n    }\n    _FindExternalReferencesVisitor.prototype.visitExternalExpr = function (e, context) {\n        this.externalReferences.push(e.value);\n        return _super.prototype.visitExternalExpr.call(this, e, context);\n    };\n    return _FindExternalReferencesVisitor;\n}(RecursiveAstVisitor$1));\n\n\nvar _ApplySourceSpanTransformer = /** @class */ (function (_super) {\n    __extends(_ApplySourceSpanTransformer, _super);\n    function _ApplySourceSpanTransformer(sourceSpan) {\n        var _this = _super.call(this) || this;\n        _this.sourceSpan = sourceSpan;\n        return _this;\n    }\n    _ApplySourceSpanTransformer.prototype._clone = function (obj) {\n        var clone = Object.create(obj.constructor.prototype);\n        for (var prop in obj) {\n            clone[prop] = obj[prop];\n        }\n        return clone;\n    };\n    _ApplySourceSpanTransformer.prototype.transformExpr = function (expr, context) {\n        if (!expr.sourceSpan) {\n            expr = this._clone(expr);\n            expr.sourceSpan = this.sourceSpan;\n        }\n        return expr;\n    };\n    _ApplySourceSpanTransformer.prototype.transformStmt = function (stmt, context) {\n        if (!stmt.sourceSpan) {\n            stmt = this._clone(stmt);\n            stmt.sourceSpan = this.sourceSpan;\n        }\n        return stmt;\n    };\n    return _ApplySourceSpanTransformer;\n}(AstTransformer$1));\nfunction variable(name, type, sourceSpan) {\n    return new ReadVarExpr(name, type, sourceSpan);\n}\nfunction importExpr(id, typeParams, sourceSpan) {\n    if (typeParams === void 0) { typeParams = null; }\n    return new ExternalExpr(id, null, typeParams, sourceSpan);\n}\n\n\nfunction literalArr(values, type, sourceSpan) {\n    return new LiteralArrayExpr(values, type, sourceSpan);\n}\nfunction literalMap(values, type) {\n    if (type === void 0) { type = null; }\n    return new LiteralMapExpr(values.map(function (e) { return new LiteralMapEntry(e.key, e.value, e.quoted); }), type, null);\n}\n\n\n\n\nfunction literal(value, type, sourceSpan) {\n    return new LiteralExpr(value, type, sourceSpan);\n}\n\n/*\n * Serializes a `Tag` into a string.\n * Returns a string like \" @foo {bar} baz\" (note the leading whitespace before `@foo`).\n */\nfunction tagToString(tag) {\n    var out = '';\n    if (tag.tagName) {\n        out += \" @\" + tag.tagName;\n    }\n    if (tag.text) {\n        if (tag.text.match(/\\/\\*|\\*\\//)) {\n            throw new Error('JSDoc text cannot contain \"/*\" and \"*/\"');\n        }\n        out += ' ' + tag.text.replace(/@/g, '\\\\@');\n    }\n    return out;\n}\nfunction serializeTags(tags) {\n    if (tags.length === 0)\n        return '';\n    var out = '*\\n';\n    try {\n        for (var tags_1 = __values(tags), tags_1_1 = tags_1.next(); !tags_1_1.done; tags_1_1 = tags_1.next()) {\n            var tag = tags_1_1.value;\n            out += ' *';\n            // If the tagToString is multi-line, insert \" * \" prefixes on subsequent lines.\n            out += tagToString(tag).replace(/\\n/g, '\\n * ');\n            out += '\\n';\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (tags_1_1 && !tags_1_1.done && (_a = tags_1.return)) _a.call(tags_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    out += ' ';\n    return out;\n    var e_1, _a;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar STRIP_SRC_FILE_SUFFIXES = /(\\.ts|\\.d\\.ts|\\.js|\\.jsx|\\.tsx)$/;\nvar GENERATED_FILE = /\\.ngfactory\\.|\\.ngsummary\\./;\nvar JIT_SUMMARY_FILE = /\\.ngsummary\\./;\nvar JIT_SUMMARY_NAME = /NgSummary$/;\nfunction ngfactoryFilePath(filePath, forceSourceFile) {\n    if (forceSourceFile === void 0) { forceSourceFile = false; }\n    var urlWithSuffix = splitTypescriptSuffix(filePath, forceSourceFile);\n    return urlWithSuffix[0] + \".ngfactory\" + normalizeGenFileSuffix(urlWithSuffix[1]);\n}\nfunction stripGeneratedFileSuffix(filePath) {\n    return filePath.replace(GENERATED_FILE, '.');\n}\nfunction isGeneratedFile(filePath) {\n    return GENERATED_FILE.test(filePath);\n}\nfunction splitTypescriptSuffix(path$$1, forceSourceFile) {\n    if (forceSourceFile === void 0) { forceSourceFile = false; }\n    if (path$$1.endsWith('.d.ts')) {\n        return [path$$1.slice(0, -5), forceSourceFile ? '.ts' : '.d.ts'];\n    }\n    var lastDot = path$$1.lastIndexOf('.');\n    if (lastDot !== -1) {\n        return [path$$1.substring(0, lastDot), path$$1.substring(lastDot)];\n    }\n    return [path$$1, ''];\n}\nfunction normalizeGenFileSuffix(srcFileSuffix) {\n    return srcFileSuffix === '.tsx' ? '.ts' : srcFileSuffix;\n}\nfunction summaryFileName(fileName) {\n    var fileNameWithoutSuffix = fileName.replace(STRIP_SRC_FILE_SUFFIXES, '');\n    return fileNameWithoutSuffix + \".ngsummary.json\";\n}\nfunction summaryForJitFileName(fileName, forceSourceFile) {\n    if (forceSourceFile === void 0) { forceSourceFile = false; }\n    var urlWithSuffix = splitTypescriptSuffix(stripGeneratedFileSuffix(fileName), forceSourceFile);\n    return urlWithSuffix[0] + \".ngsummary\" + urlWithSuffix[1];\n}\nfunction stripSummaryForJitFileSuffix(filePath) {\n    return filePath.replace(JIT_SUMMARY_FILE, '.');\n}\nfunction summaryForJitName(symbolName) {\n    return symbolName + \"NgSummary\";\n}\nfunction stripSummaryForJitNameSuffix(symbolName) {\n    return symbolName.replace(JIT_SUMMARY_NAME, '');\n}\nvar LOWERED_SYMBOL = /\\u0275\\d+/;\nfunction isLoweredSymbol(name) {\n    return LOWERED_SYMBOL.test(name);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar LifecycleHooks;\n(function (LifecycleHooks) {\n    LifecycleHooks[LifecycleHooks[\"OnInit\"] = 0] = \"OnInit\";\n    LifecycleHooks[LifecycleHooks[\"OnDestroy\"] = 1] = \"OnDestroy\";\n    LifecycleHooks[LifecycleHooks[\"DoCheck\"] = 2] = \"DoCheck\";\n    LifecycleHooks[LifecycleHooks[\"OnChanges\"] = 3] = \"OnChanges\";\n    LifecycleHooks[LifecycleHooks[\"AfterContentInit\"] = 4] = \"AfterContentInit\";\n    LifecycleHooks[LifecycleHooks[\"AfterContentChecked\"] = 5] = \"AfterContentChecked\";\n    LifecycleHooks[LifecycleHooks[\"AfterViewInit\"] = 6] = \"AfterViewInit\";\n    LifecycleHooks[LifecycleHooks[\"AfterViewChecked\"] = 7] = \"AfterViewChecked\";\n})(LifecycleHooks || (LifecycleHooks = {}));\nvar LIFECYCLE_HOOKS_VALUES = [\n    LifecycleHooks.OnInit, LifecycleHooks.OnDestroy, LifecycleHooks.DoCheck, LifecycleHooks.OnChanges,\n    LifecycleHooks.AfterContentInit, LifecycleHooks.AfterContentChecked, LifecycleHooks.AfterViewInit,\n    LifecycleHooks.AfterViewChecked\n];\nfunction hasLifecycleHook(reflector, hook, token) {\n    return reflector.hasLifecycleHook(token, getHookName(hook));\n}\nfunction getAllLifecycleHooks(reflector, token) {\n    return LIFECYCLE_HOOKS_VALUES.filter(function (hook) { return hasLifecycleHook(reflector, hook, token); });\n}\nfunction getHookName(hook) {\n    switch (hook) {\n        case LifecycleHooks.OnInit:\n            return 'ngOnInit';\n        case LifecycleHooks.OnDestroy:\n            return 'ngOnDestroy';\n        case LifecycleHooks.DoCheck:\n            return 'ngDoCheck';\n        case LifecycleHooks.OnChanges:\n            return 'ngOnChanges';\n        case LifecycleHooks.AfterContentInit:\n            return 'ngAfterContentInit';\n        case LifecycleHooks.AfterContentChecked:\n            return 'ngAfterContentChecked';\n        case LifecycleHooks.AfterViewInit:\n            return 'ngAfterViewInit';\n        case LifecycleHooks.AfterViewChecked:\n            return 'ngAfterViewChecked';\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ERROR_COMPONENT_TYPE = 'ngComponentType';\n// Design notes:\n// - don't lazily create metadata:\n//   For some metadata, we need to do async work sometimes,\n//   so the user has to kick off this loading.\n//   But we want to report errors even when the async work is\n//   not required to check that the user would have been able\n//   to wait correctly.\nvar CompileMetadataResolver = /** @class */ (function () {\n    function CompileMetadataResolver(_config, _htmlParser, _ngModuleResolver, _directiveResolver, _pipeResolver, _summaryResolver, _schemaRegistry, _directiveNormalizer, _console, _staticSymbolCache, _reflector, _errorCollector) {\n        this._config = _config;\n        this._htmlParser = _htmlParser;\n        this._ngModuleResolver = _ngModuleResolver;\n        this._directiveResolver = _directiveResolver;\n        this._pipeResolver = _pipeResolver;\n        this._summaryResolver = _summaryResolver;\n        this._schemaRegistry = _schemaRegistry;\n        this._directiveNormalizer = _directiveNormalizer;\n        this._console = _console;\n        this._staticSymbolCache = _staticSymbolCache;\n        this._reflector = _reflector;\n        this._errorCollector = _errorCollector;\n        this._nonNormalizedDirectiveCache = new Map();\n        this._directiveCache = new Map();\n        this._summaryCache = new Map();\n        this._pipeCache = new Map();\n        this._ngModuleCache = new Map();\n        this._ngModuleOfTypes = new Map();\n        this._shallowModuleCache = new Map();\n    }\n    CompileMetadataResolver.prototype.getReflector = function () { return this._reflector; };\n    CompileMetadataResolver.prototype.clearCacheFor = function (type) {\n        var dirMeta = this._directiveCache.get(type);\n        this._directiveCache.delete(type);\n        this._nonNormalizedDirectiveCache.delete(type);\n        this._summaryCache.delete(type);\n        this._pipeCache.delete(type);\n        this._ngModuleOfTypes.delete(type);\n        // Clear all of the NgModule as they contain transitive information!\n        this._ngModuleCache.clear();\n        if (dirMeta) {\n            this._directiveNormalizer.clearCacheFor(dirMeta);\n        }\n    };\n    CompileMetadataResolver.prototype.clearCache = function () {\n        this._directiveCache.clear();\n        this._nonNormalizedDirectiveCache.clear();\n        this._summaryCache.clear();\n        this._pipeCache.clear();\n        this._ngModuleCache.clear();\n        this._ngModuleOfTypes.clear();\n        this._directiveNormalizer.clearCache();\n    };\n    CompileMetadataResolver.prototype._createProxyClass = function (baseType, name) {\n        var delegate = null;\n        var proxyClass = function () {\n            if (!delegate) {\n                throw new Error(\"Illegal state: Class \" + name + \" for type \" + stringify(baseType) + \" is not compiled yet!\");\n            }\n            return delegate.apply(this, arguments);\n        };\n        proxyClass.setDelegate = function (d) {\n            delegate = d;\n            proxyClass.prototype = d.prototype;\n        };\n        // Make stringify work correctly\n        proxyClass.overriddenName = name;\n        return proxyClass;\n    };\n    CompileMetadataResolver.prototype.getGeneratedClass = function (dirType, name) {\n        if (dirType instanceof StaticSymbol) {\n            return this._staticSymbolCache.get(ngfactoryFilePath(dirType.filePath), name);\n        }\n        else {\n            return this._createProxyClass(dirType, name);\n        }\n    };\n    CompileMetadataResolver.prototype.getComponentViewClass = function (dirType) {\n        return this.getGeneratedClass(dirType, viewClassName(dirType, 0));\n    };\n    CompileMetadataResolver.prototype.getHostComponentViewClass = function (dirType) {\n        return this.getGeneratedClass(dirType, hostViewClassName(dirType));\n    };\n    CompileMetadataResolver.prototype.getHostComponentType = function (dirType) {\n        var name = identifierName({ reference: dirType }) + \"_Host\";\n        if (dirType instanceof StaticSymbol) {\n            return this._staticSymbolCache.get(dirType.filePath, name);\n        }\n        else {\n            var HostClass = function HostClass() { };\n            HostClass.overriddenName = name;\n            return HostClass;\n        }\n    };\n    CompileMetadataResolver.prototype.getRendererType = function (dirType) {\n        if (dirType instanceof StaticSymbol) {\n            return this._staticSymbolCache.get(ngfactoryFilePath(dirType.filePath), rendererTypeName(dirType));\n        }\n        else {\n            // returning an object as proxy,\n            // that we fill later during runtime compilation.\n            return {};\n        }\n    };\n    CompileMetadataResolver.prototype.getComponentFactory = function (selector, dirType, inputs, outputs) {\n        if (dirType instanceof StaticSymbol) {\n            return this._staticSymbolCache.get(ngfactoryFilePath(dirType.filePath), componentFactoryName(dirType));\n        }\n        else {\n            var hostView = this.getHostComponentViewClass(dirType);\n            // Note: ngContentSelectors will be filled later once the template is\n            // loaded.\n            var createComponentFactory = this._reflector.resolveExternalReference(Identifiers.createComponentFactory);\n            return createComponentFactory(selector, dirType, hostView, inputs, outputs, []);\n        }\n    };\n    CompileMetadataResolver.prototype.initComponentFactory = function (factory, ngContentSelectors) {\n        if (!(factory instanceof StaticSymbol)) {\n            (_a = factory.ngContentSelectors).push.apply(_a, __spread(ngContentSelectors));\n        }\n        var _a;\n    };\n    CompileMetadataResolver.prototype._loadSummary = function (type, kind) {\n        var typeSummary = this._summaryCache.get(type);\n        if (!typeSummary) {\n            var summary = this._summaryResolver.resolveSummary(type);\n            typeSummary = summary ? summary.type : null;\n            this._summaryCache.set(type, typeSummary || null);\n        }\n        return typeSummary && typeSummary.summaryKind === kind ? typeSummary : null;\n    };\n    CompileMetadataResolver.prototype.getHostComponentMetadata = function (compMeta, hostViewType) {\n        var hostType = this.getHostComponentType(compMeta.type.reference);\n        if (!hostViewType) {\n            hostViewType = this.getHostComponentViewClass(hostType);\n        }\n        // Note: ! is ok here as this method should only be called with normalized directive\n        // metadata, which always fills in the selector.\n        var template = CssSelector.parse(compMeta.selector)[0].getMatchingElementTemplate();\n        var templateUrl = '';\n        var htmlAst = this._htmlParser.parse(template, templateUrl);\n        return CompileDirectiveMetadata.create({\n            isHost: true,\n            type: { reference: hostType, diDeps: [], lifecycleHooks: [] },\n            template: new CompileTemplateMetadata({\n                encapsulation: ViewEncapsulation.None,\n                template: template,\n                templateUrl: templateUrl,\n                htmlAst: htmlAst,\n                styles: [],\n                styleUrls: [],\n                ngContentSelectors: [],\n                animations: [],\n                isInline: true,\n                externalStylesheets: [],\n                interpolation: null,\n                preserveWhitespaces: false,\n            }),\n            exportAs: null,\n            changeDetection: ChangeDetectionStrategy.Default,\n            inputs: [],\n            outputs: [],\n            host: {},\n            isComponent: true,\n            selector: '*',\n            providers: [],\n            viewProviders: [],\n            queries: [],\n            guards: {},\n            viewQueries: [],\n            componentViewType: hostViewType,\n            rendererType: { id: '__Host__', encapsulation: ViewEncapsulation.None, styles: [], data: {} },\n            entryComponents: [],\n            componentFactory: null\n        });\n    };\n    CompileMetadataResolver.prototype.loadDirectiveMetadata = function (ngModuleType, directiveType, isSync) {\n        var _this = this;\n        if (this._directiveCache.has(directiveType)) {\n            return null;\n        }\n        directiveType = resolveForwardRef(directiveType);\n        var _a = this.getNonNormalizedDirectiveMetadata(directiveType), annotation = _a.annotation, metadata = _a.metadata;\n        var createDirectiveMetadata = function (templateMetadata) {\n            var normalizedDirMeta = new CompileDirectiveMetadata({\n                isHost: false,\n                type: metadata.type,\n                isComponent: metadata.isComponent,\n                selector: metadata.selector,\n                exportAs: metadata.exportAs,\n                changeDetection: metadata.changeDetection,\n                inputs: metadata.inputs,\n                outputs: metadata.outputs,\n                hostListeners: metadata.hostListeners,\n                hostProperties: metadata.hostProperties,\n                hostAttributes: metadata.hostAttributes,\n                providers: metadata.providers,\n                viewProviders: metadata.viewProviders,\n                queries: metadata.queries,\n                guards: metadata.guards,\n                viewQueries: metadata.viewQueries,\n                entryComponents: metadata.entryComponents,\n                componentViewType: metadata.componentViewType,\n                rendererType: metadata.rendererType,\n                componentFactory: metadata.componentFactory,\n                template: templateMetadata\n            });\n            if (templateMetadata) {\n                _this.initComponentFactory(metadata.componentFactory, templateMetadata.ngContentSelectors);\n            }\n            _this._directiveCache.set(directiveType, normalizedDirMeta);\n            _this._summaryCache.set(directiveType, normalizedDirMeta.toSummary());\n            return null;\n        };\n        if (metadata.isComponent) {\n            var template = metadata.template;\n            var templateMeta = this._directiveNormalizer.normalizeTemplate({\n                ngModuleType: ngModuleType,\n                componentType: directiveType,\n                moduleUrl: this._reflector.componentModuleUrl(directiveType, annotation),\n                encapsulation: template.encapsulation,\n                template: template.template,\n                templateUrl: template.templateUrl,\n                styles: template.styles,\n                styleUrls: template.styleUrls,\n                animations: template.animations,\n                interpolation: template.interpolation,\n                preserveWhitespaces: template.preserveWhitespaces\n            });\n            if (isPromise(templateMeta) && isSync) {\n                this._reportError(componentStillLoadingError(directiveType), directiveType);\n                return null;\n            }\n            return SyncAsync.then(templateMeta, createDirectiveMetadata);\n        }\n        else {\n            // directive\n            createDirectiveMetadata(null);\n            return null;\n        }\n    };\n    CompileMetadataResolver.prototype.getNonNormalizedDirectiveMetadata = function (directiveType) {\n        var _this = this;\n        directiveType = resolveForwardRef(directiveType);\n        if (!directiveType) {\n            return null;\n        }\n        var cacheEntry = this._nonNormalizedDirectiveCache.get(directiveType);\n        if (cacheEntry) {\n            return cacheEntry;\n        }\n        var dirMeta = this._directiveResolver.resolve(directiveType, false);\n        if (!dirMeta) {\n            return null;\n        }\n        var nonNormalizedTemplateMetadata = undefined;\n        if (createComponent.isTypeOf(dirMeta)) {\n            // component\n            var compMeta = dirMeta;\n            assertArrayOfStrings('styles', compMeta.styles);\n            assertArrayOfStrings('styleUrls', compMeta.styleUrls);\n            assertInterpolationSymbols('interpolation', compMeta.interpolation);\n            var animations = compMeta.animations;\n            nonNormalizedTemplateMetadata = new CompileTemplateMetadata({\n                encapsulation: noUndefined(compMeta.encapsulation),\n                template: noUndefined(compMeta.template),\n                templateUrl: noUndefined(compMeta.templateUrl),\n                htmlAst: null,\n                styles: compMeta.styles || [],\n                styleUrls: compMeta.styleUrls || [],\n                animations: animations || [],\n                interpolation: noUndefined(compMeta.interpolation),\n                isInline: !!compMeta.template,\n                externalStylesheets: [],\n                ngContentSelectors: [],\n                preserveWhitespaces: noUndefined(dirMeta.preserveWhitespaces),\n            });\n        }\n        var changeDetectionStrategy = null;\n        var viewProviders = [];\n        var entryComponentMetadata = [];\n        var selector = dirMeta.selector;\n        if (createComponent.isTypeOf(dirMeta)) {\n            // Component\n            var compMeta = dirMeta;\n            changeDetectionStrategy = compMeta.changeDetection;\n            if (compMeta.viewProviders) {\n                viewProviders = this._getProvidersMetadata(compMeta.viewProviders, entryComponentMetadata, \"viewProviders for \\\"\" + stringifyType(directiveType) + \"\\\"\", [], directiveType);\n            }\n            if (compMeta.entryComponents) {\n                entryComponentMetadata = flattenAndDedupeArray(compMeta.entryComponents)\n                    .map(function (type) { return _this._getEntryComponentMetadata(type); })\n                    .concat(entryComponentMetadata);\n            }\n            if (!selector) {\n                selector = this._schemaRegistry.getDefaultComponentElementName();\n            }\n        }\n        else {\n            // Directive\n            if (!selector) {\n                this._reportError(syntaxError(\"Directive \" + stringifyType(directiveType) + \" has no selector, please add it!\"), directiveType);\n                selector = 'error';\n            }\n        }\n        var providers = [];\n        if (dirMeta.providers != null) {\n            providers = this._getProvidersMetadata(dirMeta.providers, entryComponentMetadata, \"providers for \\\"\" + stringifyType(directiveType) + \"\\\"\", [], directiveType);\n        }\n        var queries = [];\n        var viewQueries = [];\n        if (dirMeta.queries != null) {\n            queries = this._getQueriesMetadata(dirMeta.queries, false, directiveType);\n            viewQueries = this._getQueriesMetadata(dirMeta.queries, true, directiveType);\n        }\n        var metadata = CompileDirectiveMetadata.create({\n            isHost: false,\n            selector: selector,\n            exportAs: noUndefined(dirMeta.exportAs),\n            isComponent: !!nonNormalizedTemplateMetadata,\n            type: this._getTypeMetadata(directiveType),\n            template: nonNormalizedTemplateMetadata,\n            changeDetection: changeDetectionStrategy,\n            inputs: dirMeta.inputs || [],\n            outputs: dirMeta.outputs || [],\n            host: dirMeta.host || {},\n            providers: providers || [],\n            viewProviders: viewProviders || [],\n            queries: queries || [],\n            guards: dirMeta.guards || {},\n            viewQueries: viewQueries || [],\n            entryComponents: entryComponentMetadata,\n            componentViewType: nonNormalizedTemplateMetadata ? this.getComponentViewClass(directiveType) :\n                null,\n            rendererType: nonNormalizedTemplateMetadata ? this.getRendererType(directiveType) : null,\n            componentFactory: null\n        });\n        if (nonNormalizedTemplateMetadata) {\n            metadata.componentFactory =\n                this.getComponentFactory(selector, directiveType, metadata.inputs, metadata.outputs);\n        }\n        cacheEntry = { metadata: metadata, annotation: dirMeta };\n        this._nonNormalizedDirectiveCache.set(directiveType, cacheEntry);\n        return cacheEntry;\n    };\n    /**\n     * Gets the metadata for the given directive.\n     * This assumes `loadNgModuleDirectiveAndPipeMetadata` has been called first.\n     */\n    CompileMetadataResolver.prototype.getDirectiveMetadata = function (directiveType) {\n        var dirMeta = this._directiveCache.get(directiveType);\n        if (!dirMeta) {\n            this._reportError(syntaxError(\"Illegal state: getDirectiveMetadata can only be called after loadNgModuleDirectiveAndPipeMetadata for a module that declares it. Directive \" + stringifyType(directiveType) + \".\"), directiveType);\n        }\n        return dirMeta;\n    };\n    CompileMetadataResolver.prototype.getDirectiveSummary = function (dirType) {\n        var dirSummary = this._loadSummary(dirType, CompileSummaryKind.Directive);\n        if (!dirSummary) {\n            this._reportError(syntaxError(\"Illegal state: Could not load the summary for directive \" + stringifyType(dirType) + \".\"), dirType);\n        }\n        return dirSummary;\n    };\n    CompileMetadataResolver.prototype.isDirective = function (type) {\n        return !!this._loadSummary(type, CompileSummaryKind.Directive) ||\n            this._directiveResolver.isDirective(type);\n    };\n    CompileMetadataResolver.prototype.isPipe = function (type) {\n        return !!this._loadSummary(type, CompileSummaryKind.Pipe) ||\n            this._pipeResolver.isPipe(type);\n    };\n    CompileMetadataResolver.prototype.isNgModule = function (type) {\n        return !!this._loadSummary(type, CompileSummaryKind.NgModule) ||\n            this._ngModuleResolver.isNgModule(type);\n    };\n    CompileMetadataResolver.prototype.getNgModuleSummary = function (moduleType, alreadyCollecting) {\n        if (alreadyCollecting === void 0) { alreadyCollecting = null; }\n        var moduleSummary = this._loadSummary(moduleType, CompileSummaryKind.NgModule);\n        if (!moduleSummary) {\n            var moduleMeta = this.getNgModuleMetadata(moduleType, false, alreadyCollecting);\n            moduleSummary = moduleMeta ? moduleMeta.toSummary() : null;\n            if (moduleSummary) {\n                this._summaryCache.set(moduleType, moduleSummary);\n            }\n        }\n        return moduleSummary;\n    };\n    /**\n     * Loads the declared directives and pipes of an NgModule.\n     */\n    CompileMetadataResolver.prototype.loadNgModuleDirectiveAndPipeMetadata = function (moduleType, isSync, throwIfNotFound) {\n        var _this = this;\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var ngModule = this.getNgModuleMetadata(moduleType, throwIfNotFound);\n        var loading = [];\n        if (ngModule) {\n            ngModule.declaredDirectives.forEach(function (id) {\n                var promise = _this.loadDirectiveMetadata(moduleType, id.reference, isSync);\n                if (promise) {\n                    loading.push(promise);\n                }\n            });\n            ngModule.declaredPipes.forEach(function (id) { return _this._loadPipeMetadata(id.reference); });\n        }\n        return Promise.all(loading);\n    };\n    CompileMetadataResolver.prototype.getShallowModuleMetadata = function (moduleType) {\n        var compileMeta = this._shallowModuleCache.get(moduleType);\n        if (compileMeta) {\n            return compileMeta;\n        }\n        var ngModuleMeta = findLast(this._reflector.shallowAnnotations(moduleType), createNgModule.isTypeOf);\n        compileMeta = {\n            type: this._getTypeMetadata(moduleType),\n            rawExports: ngModuleMeta.exports,\n            rawImports: ngModuleMeta.imports,\n            rawProviders: ngModuleMeta.providers,\n        };\n        this._shallowModuleCache.set(moduleType, compileMeta);\n        return compileMeta;\n    };\n    CompileMetadataResolver.prototype.getNgModuleMetadata = function (moduleType, throwIfNotFound, alreadyCollecting) {\n        var _this = this;\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        if (alreadyCollecting === void 0) { alreadyCollecting = null; }\n        moduleType = resolveForwardRef(moduleType);\n        var compileMeta = this._ngModuleCache.get(moduleType);\n        if (compileMeta) {\n            return compileMeta;\n        }\n        var meta = this._ngModuleResolver.resolve(moduleType, throwIfNotFound);\n        if (!meta) {\n            return null;\n        }\n        var declaredDirectives = [];\n        var exportedNonModuleIdentifiers = [];\n        var declaredPipes = [];\n        var importedModules = [];\n        var exportedModules = [];\n        var providers = [];\n        var entryComponents = [];\n        var bootstrapComponents = [];\n        var schemas = [];\n        if (meta.imports) {\n            flattenAndDedupeArray(meta.imports).forEach(function (importedType) {\n                var importedModuleType = undefined;\n                if (isValidType(importedType)) {\n                    importedModuleType = importedType;\n                }\n                else if (importedType && importedType.ngModule) {\n                    var moduleWithProviders = importedType;\n                    importedModuleType = moduleWithProviders.ngModule;\n                    if (moduleWithProviders.providers) {\n                        providers.push.apply(providers, __spread(_this._getProvidersMetadata(moduleWithProviders.providers, entryComponents, \"provider for the NgModule '\" + stringifyType(importedModuleType) + \"'\", [], importedType)));\n                    }\n                }\n                if (importedModuleType) {\n                    if (_this._checkSelfImport(moduleType, importedModuleType))\n                        return;\n                    if (!alreadyCollecting)\n                        alreadyCollecting = new Set();\n                    if (alreadyCollecting.has(importedModuleType)) {\n                        _this._reportError(syntaxError(_this._getTypeDescriptor(importedModuleType) + \" '\" + stringifyType(importedType) + \"' is imported recursively by the module '\" + stringifyType(moduleType) + \"'.\"), moduleType);\n                        return;\n                    }\n                    alreadyCollecting.add(importedModuleType);\n                    var importedModuleSummary = _this.getNgModuleSummary(importedModuleType, alreadyCollecting);\n                    alreadyCollecting.delete(importedModuleType);\n                    if (!importedModuleSummary) {\n                        _this._reportError(syntaxError(\"Unexpected \" + _this._getTypeDescriptor(importedType) + \" '\" + stringifyType(importedType) + \"' imported by the module '\" + stringifyType(moduleType) + \"'. Please add a @NgModule annotation.\"), moduleType);\n                        return;\n                    }\n                    importedModules.push(importedModuleSummary);\n                }\n                else {\n                    _this._reportError(syntaxError(\"Unexpected value '\" + stringifyType(importedType) + \"' imported by the module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n            });\n        }\n        if (meta.exports) {\n            flattenAndDedupeArray(meta.exports).forEach(function (exportedType) {\n                if (!isValidType(exportedType)) {\n                    _this._reportError(syntaxError(\"Unexpected value '\" + stringifyType(exportedType) + \"' exported by the module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n                if (!alreadyCollecting)\n                    alreadyCollecting = new Set();\n                if (alreadyCollecting.has(exportedType)) {\n                    _this._reportError(syntaxError(_this._getTypeDescriptor(exportedType) + \" '\" + stringify(exportedType) + \"' is exported recursively by the module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n                alreadyCollecting.add(exportedType);\n                var exportedModuleSummary = _this.getNgModuleSummary(exportedType, alreadyCollecting);\n                alreadyCollecting.delete(exportedType);\n                if (exportedModuleSummary) {\n                    exportedModules.push(exportedModuleSummary);\n                }\n                else {\n                    exportedNonModuleIdentifiers.push(_this._getIdentifierMetadata(exportedType));\n                }\n            });\n        }\n        // Note: This will be modified later, so we rely on\n        // getting a new instance every time!\n        var transitiveModule = this._getTransitiveNgModuleMetadata(importedModules, exportedModules);\n        if (meta.declarations) {\n            flattenAndDedupeArray(meta.declarations).forEach(function (declaredType) {\n                if (!isValidType(declaredType)) {\n                    _this._reportError(syntaxError(\"Unexpected value '\" + stringifyType(declaredType) + \"' declared by the module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n                var declaredIdentifier = _this._getIdentifierMetadata(declaredType);\n                if (_this.isDirective(declaredType)) {\n                    transitiveModule.addDirective(declaredIdentifier);\n                    declaredDirectives.push(declaredIdentifier);\n                    _this._addTypeToModule(declaredType, moduleType);\n                }\n                else if (_this.isPipe(declaredType)) {\n                    transitiveModule.addPipe(declaredIdentifier);\n                    transitiveModule.pipes.push(declaredIdentifier);\n                    declaredPipes.push(declaredIdentifier);\n                    _this._addTypeToModule(declaredType, moduleType);\n                }\n                else {\n                    _this._reportError(syntaxError(\"Unexpected \" + _this._getTypeDescriptor(declaredType) + \" '\" + stringifyType(declaredType) + \"' declared by the module '\" + stringifyType(moduleType) + \"'. Please add a @Pipe/@Directive/@Component annotation.\"), moduleType);\n                    return;\n                }\n            });\n        }\n        var exportedDirectives = [];\n        var exportedPipes = [];\n        exportedNonModuleIdentifiers.forEach(function (exportedId) {\n            if (transitiveModule.directivesSet.has(exportedId.reference)) {\n                exportedDirectives.push(exportedId);\n                transitiveModule.addExportedDirective(exportedId);\n            }\n            else if (transitiveModule.pipesSet.has(exportedId.reference)) {\n                exportedPipes.push(exportedId);\n                transitiveModule.addExportedPipe(exportedId);\n            }\n            else {\n                _this._reportError(syntaxError(\"Can't export \" + _this._getTypeDescriptor(exportedId.reference) + \" \" + stringifyType(exportedId.reference) + \" from \" + stringifyType(moduleType) + \" as it was neither declared nor imported!\"), moduleType);\n                return;\n            }\n        });\n        // The providers of the module have to go last\n        // so that they overwrite any other provider we already added.\n        if (meta.providers) {\n            providers.push.apply(providers, __spread(this._getProvidersMetadata(meta.providers, entryComponents, \"provider for the NgModule '\" + stringifyType(moduleType) + \"'\", [], moduleType)));\n        }\n        if (meta.entryComponents) {\n            entryComponents.push.apply(entryComponents, __spread(flattenAndDedupeArray(meta.entryComponents)\n                .map(function (type) { return _this._getEntryComponentMetadata(type); })));\n        }\n        if (meta.bootstrap) {\n            flattenAndDedupeArray(meta.bootstrap).forEach(function (type) {\n                if (!isValidType(type)) {\n                    _this._reportError(syntaxError(\"Unexpected value '\" + stringifyType(type) + \"' used in the bootstrap property of module '\" + stringifyType(moduleType) + \"'\"), moduleType);\n                    return;\n                }\n                bootstrapComponents.push(_this._getIdentifierMetadata(type));\n            });\n        }\n        entryComponents.push.apply(entryComponents, __spread(bootstrapComponents.map(function (type) { return _this._getEntryComponentMetadata(type.reference); })));\n        if (meta.schemas) {\n            schemas.push.apply(schemas, __spread(flattenAndDedupeArray(meta.schemas)));\n        }\n        compileMeta = new CompileNgModuleMetadata({\n            type: this._getTypeMetadata(moduleType),\n            providers: providers,\n            entryComponents: entryComponents,\n            bootstrapComponents: bootstrapComponents,\n            schemas: schemas,\n            declaredDirectives: declaredDirectives,\n            exportedDirectives: exportedDirectives,\n            declaredPipes: declaredPipes,\n            exportedPipes: exportedPipes,\n            importedModules: importedModules,\n            exportedModules: exportedModules,\n            transitiveModule: transitiveModule,\n            id: meta.id || null,\n        });\n        entryComponents.forEach(function (id) { return transitiveModule.addEntryComponent(id); });\n        providers.forEach(function (provider) { return transitiveModule.addProvider(provider, compileMeta.type); });\n        transitiveModule.addModule(compileMeta.type);\n        this._ngModuleCache.set(moduleType, compileMeta);\n        return compileMeta;\n    };\n    CompileMetadataResolver.prototype._checkSelfImport = function (moduleType, importedModuleType) {\n        if (moduleType === importedModuleType) {\n            this._reportError(syntaxError(\"'\" + stringifyType(moduleType) + \"' module can't import itself\"), moduleType);\n            return true;\n        }\n        return false;\n    };\n    CompileMetadataResolver.prototype._getTypeDescriptor = function (type) {\n        if (isValidType(type)) {\n            if (this.isDirective(type)) {\n                return 'directive';\n            }\n            if (this.isPipe(type)) {\n                return 'pipe';\n            }\n            if (this.isNgModule(type)) {\n                return 'module';\n            }\n        }\n        if (type.provide) {\n            return 'provider';\n        }\n        return 'value';\n    };\n    CompileMetadataResolver.prototype._addTypeToModule = function (type, moduleType) {\n        var oldModule = this._ngModuleOfTypes.get(type);\n        if (oldModule && oldModule !== moduleType) {\n            this._reportError(syntaxError(\"Type \" + stringifyType(type) + \" is part of the declarations of 2 modules: \" + stringifyType(oldModule) + \" and \" + stringifyType(moduleType) + \"! \" +\n                (\"Please consider moving \" + stringifyType(type) + \" to a higher module that imports \" + stringifyType(oldModule) + \" and \" + stringifyType(moduleType) + \". \") +\n                (\"You can also create a new NgModule that exports and includes \" + stringifyType(type) + \" then import that NgModule in \" + stringifyType(oldModule) + \" and \" + stringifyType(moduleType) + \".\")), moduleType);\n            return;\n        }\n        this._ngModuleOfTypes.set(type, moduleType);\n    };\n    CompileMetadataResolver.prototype._getTransitiveNgModuleMetadata = function (importedModules, exportedModules) {\n        // collect `providers` / `entryComponents` from all imported and all exported modules\n        var result = new TransitiveCompileNgModuleMetadata();\n        var modulesByToken = new Map();\n        importedModules.concat(exportedModules).forEach(function (modSummary) {\n            modSummary.modules.forEach(function (mod) { return result.addModule(mod); });\n            modSummary.entryComponents.forEach(function (comp) { return result.addEntryComponent(comp); });\n            var addedTokens = new Set();\n            modSummary.providers.forEach(function (entry) {\n                var tokenRef = tokenReference(entry.provider.token);\n                var prevModules = modulesByToken.get(tokenRef);\n                if (!prevModules) {\n                    prevModules = new Set();\n                    modulesByToken.set(tokenRef, prevModules);\n                }\n                var moduleRef = entry.module.reference;\n                // Note: the providers of one module may still contain multiple providers\n                // per token (e.g. for multi providers), and we need to preserve these.\n                if (addedTokens.has(tokenRef) || !prevModules.has(moduleRef)) {\n                    prevModules.add(moduleRef);\n                    addedTokens.add(tokenRef);\n                    result.addProvider(entry.provider, entry.module);\n                }\n            });\n        });\n        exportedModules.forEach(function (modSummary) {\n            modSummary.exportedDirectives.forEach(function (id) { return result.addExportedDirective(id); });\n            modSummary.exportedPipes.forEach(function (id) { return result.addExportedPipe(id); });\n        });\n        importedModules.forEach(function (modSummary) {\n            modSummary.exportedDirectives.forEach(function (id) { return result.addDirective(id); });\n            modSummary.exportedPipes.forEach(function (id) { return result.addPipe(id); });\n        });\n        return result;\n    };\n    CompileMetadataResolver.prototype._getIdentifierMetadata = function (type) {\n        type = resolveForwardRef(type);\n        return { reference: type };\n    };\n    CompileMetadataResolver.prototype.isInjectable = function (type) {\n        var annotations = this._reflector.tryAnnotations(type);\n        return annotations.some(function (ann) { return createInjectable.isTypeOf(ann); });\n    };\n    CompileMetadataResolver.prototype.getInjectableSummary = function (type) {\n        return {\n            summaryKind: CompileSummaryKind.Injectable,\n            type: this._getTypeMetadata(type, null, false)\n        };\n    };\n    CompileMetadataResolver.prototype.getInjectableMetadata = function (type, dependencies, throwOnUnknownDeps) {\n        if (dependencies === void 0) { dependencies = null; }\n        if (throwOnUnknownDeps === void 0) { throwOnUnknownDeps = true; }\n        var typeSummary = this._loadSummary(type, CompileSummaryKind.Injectable);\n        var typeMetadata = typeSummary ?\n            typeSummary.type :\n            this._getTypeMetadata(type, dependencies, throwOnUnknownDeps);\n        var annotations = this._reflector.annotations(type).filter(function (ann) { return createInjectable.isTypeOf(ann); });\n        if (annotations.length === 0) {\n            return null;\n        }\n        var meta = annotations[annotations.length - 1];\n        return {\n            symbol: type,\n            type: typeMetadata,\n            providedIn: meta.providedIn,\n            useValue: meta.useValue,\n            useClass: meta.useClass,\n            useExisting: meta.useExisting,\n            useFactory: meta.useFactory,\n            deps: meta.deps,\n        };\n    };\n    CompileMetadataResolver.prototype._getTypeMetadata = function (type, dependencies, throwOnUnknownDeps) {\n        if (dependencies === void 0) { dependencies = null; }\n        if (throwOnUnknownDeps === void 0) { throwOnUnknownDeps = true; }\n        var identifier = this._getIdentifierMetadata(type);\n        return {\n            reference: identifier.reference,\n            diDeps: this._getDependenciesMetadata(identifier.reference, dependencies, throwOnUnknownDeps),\n            lifecycleHooks: getAllLifecycleHooks(this._reflector, identifier.reference),\n        };\n    };\n    CompileMetadataResolver.prototype._getFactoryMetadata = function (factory, dependencies) {\n        if (dependencies === void 0) { dependencies = null; }\n        factory = resolveForwardRef(factory);\n        return { reference: factory, diDeps: this._getDependenciesMetadata(factory, dependencies) };\n    };\n    /**\n     * Gets the metadata for the given pipe.\n     * This assumes `loadNgModuleDirectiveAndPipeMetadata` has been called first.\n     */\n    CompileMetadataResolver.prototype.getPipeMetadata = function (pipeType) {\n        var pipeMeta = this._pipeCache.get(pipeType);\n        if (!pipeMeta) {\n            this._reportError(syntaxError(\"Illegal state: getPipeMetadata can only be called after loadNgModuleDirectiveAndPipeMetadata for a module that declares it. Pipe \" + stringifyType(pipeType) + \".\"), pipeType);\n        }\n        return pipeMeta || null;\n    };\n    CompileMetadataResolver.prototype.getPipeSummary = function (pipeType) {\n        var pipeSummary = this._loadSummary(pipeType, CompileSummaryKind.Pipe);\n        if (!pipeSummary) {\n            this._reportError(syntaxError(\"Illegal state: Could not load the summary for pipe \" + stringifyType(pipeType) + \".\"), pipeType);\n        }\n        return pipeSummary;\n    };\n    CompileMetadataResolver.prototype.getOrLoadPipeMetadata = function (pipeType) {\n        var pipeMeta = this._pipeCache.get(pipeType);\n        if (!pipeMeta) {\n            pipeMeta = this._loadPipeMetadata(pipeType);\n        }\n        return pipeMeta;\n    };\n    CompileMetadataResolver.prototype._loadPipeMetadata = function (pipeType) {\n        pipeType = resolveForwardRef(pipeType);\n        var pipeAnnotation = this._pipeResolver.resolve(pipeType);\n        var pipeMeta = new CompilePipeMetadata({\n            type: this._getTypeMetadata(pipeType),\n            name: pipeAnnotation.name,\n            pure: !!pipeAnnotation.pure\n        });\n        this._pipeCache.set(pipeType, pipeMeta);\n        this._summaryCache.set(pipeType, pipeMeta.toSummary());\n        return pipeMeta;\n    };\n    CompileMetadataResolver.prototype._getDependenciesMetadata = function (typeOrFunc, dependencies, throwOnUnknownDeps) {\n        var _this = this;\n        if (throwOnUnknownDeps === void 0) { throwOnUnknownDeps = true; }\n        var hasUnknownDeps = false;\n        var params = dependencies || this._reflector.parameters(typeOrFunc) || [];\n        var dependenciesMetadata = params.map(function (param) {\n            var isAttribute = false;\n            var isHost = false;\n            var isSelf = false;\n            var isSkipSelf = false;\n            var isOptional = false;\n            var token = null;\n            if (Array.isArray(param)) {\n                param.forEach(function (paramEntry) {\n                    if (createHost.isTypeOf(paramEntry)) {\n                        isHost = true;\n                    }\n                    else if (createSelf.isTypeOf(paramEntry)) {\n                        isSelf = true;\n                    }\n                    else if (createSkipSelf.isTypeOf(paramEntry)) {\n                        isSkipSelf = true;\n                    }\n                    else if (createOptional.isTypeOf(paramEntry)) {\n                        isOptional = true;\n                    }\n                    else if (createAttribute.isTypeOf(paramEntry)) {\n                        isAttribute = true;\n                        token = paramEntry.attributeName;\n                    }\n                    else if (createInject.isTypeOf(paramEntry)) {\n                        token = paramEntry.token;\n                    }\n                    else if (createInjectionToken.isTypeOf(paramEntry) || paramEntry instanceof StaticSymbol) {\n                        token = paramEntry;\n                    }\n                    else if (isValidType(paramEntry) && token == null) {\n                        token = paramEntry;\n                    }\n                });\n            }\n            else {\n                token = param;\n            }\n            if (token == null) {\n                hasUnknownDeps = true;\n                return null;\n            }\n            return {\n                isAttribute: isAttribute,\n                isHost: isHost,\n                isSelf: isSelf,\n                isSkipSelf: isSkipSelf,\n                isOptional: isOptional,\n                token: _this._getTokenMetadata(token)\n            };\n        });\n        if (hasUnknownDeps) {\n            var depsTokens = dependenciesMetadata.map(function (dep) { return dep ? stringifyType(dep.token) : '?'; }).join(', ');\n            var message = \"Can't resolve all parameters for \" + stringifyType(typeOrFunc) + \": (\" + depsTokens + \").\";\n            if (throwOnUnknownDeps || this._config.strictInjectionParameters) {\n                this._reportError(syntaxError(message), typeOrFunc);\n            }\n            else {\n                this._console.warn(\"Warning: \" + message + \" This will become an error in Angular v6.x\");\n            }\n        }\n        return dependenciesMetadata;\n    };\n    CompileMetadataResolver.prototype._getTokenMetadata = function (token) {\n        token = resolveForwardRef(token);\n        var compileToken;\n        if (typeof token === 'string') {\n            compileToken = { value: token };\n        }\n        else {\n            compileToken = { identifier: { reference: token } };\n        }\n        return compileToken;\n    };\n    CompileMetadataResolver.prototype._getProvidersMetadata = function (providers, targetEntryComponents, debugInfo, compileProviders, type) {\n        var _this = this;\n        if (compileProviders === void 0) { compileProviders = []; }\n        providers.forEach(function (provider, providerIdx) {\n            if (Array.isArray(provider)) {\n                _this._getProvidersMetadata(provider, targetEntryComponents, debugInfo, compileProviders);\n            }\n            else {\n                provider = resolveForwardRef(provider);\n                var providerMeta = undefined;\n                if (provider && typeof provider === 'object' && provider.hasOwnProperty('provide')) {\n                    _this._validateProvider(provider);\n                    providerMeta = new ProviderMeta(provider.provide, provider);\n                }\n                else if (isValidType(provider)) {\n                    providerMeta = new ProviderMeta(provider, { useClass: provider });\n                }\n                else if (provider === void 0) {\n                    _this._reportError(syntaxError(\"Encountered undefined provider! Usually this means you have a circular dependencies (might be caused by using 'barrel' index.ts files.\"));\n                    return;\n                }\n                else {\n                    var providersInfo = providers.reduce(function (soFar, seenProvider, seenProviderIdx) {\n                        if (seenProviderIdx < providerIdx) {\n                            soFar.push(\"\" + stringifyType(seenProvider));\n                        }\n                        else if (seenProviderIdx == providerIdx) {\n                            soFar.push(\"?\" + stringifyType(seenProvider) + \"?\");\n                        }\n                        else if (seenProviderIdx == providerIdx + 1) {\n                            soFar.push('...');\n                        }\n                        return soFar;\n                    }, [])\n                        .join(', ');\n                    _this._reportError(syntaxError(\"Invalid \" + (debugInfo ? debugInfo : 'provider') + \" - only instances of Provider and Type are allowed, got: [\" + providersInfo + \"]\"), type);\n                    return;\n                }\n                if (providerMeta.token ===\n                    _this._reflector.resolveExternalReference(Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS)) {\n                    targetEntryComponents.push.apply(targetEntryComponents, __spread(_this._getEntryComponentsFromProvider(providerMeta, type)));\n                }\n                else {\n                    compileProviders.push(_this.getProviderMetadata(providerMeta));\n                }\n            }\n        });\n        return compileProviders;\n    };\n    CompileMetadataResolver.prototype._validateProvider = function (provider) {\n        if (provider.hasOwnProperty('useClass') && provider.useClass == null) {\n            this._reportError(syntaxError(\"Invalid provider for \" + stringifyType(provider.provide) + \". useClass cannot be \" + provider.useClass + \".\\n           Usually it happens when:\\n           1. There's a circular dependency (might be caused by using index.ts (barrel) files).\\n           2. Class was used before it was declared. Use forwardRef in this case.\"));\n        }\n    };\n    CompileMetadataResolver.prototype._getEntryComponentsFromProvider = function (provider, type) {\n        var _this = this;\n        var components = [];\n        var collectedIdentifiers = [];\n        if (provider.useFactory || provider.useExisting || provider.useClass) {\n            this._reportError(syntaxError(\"The ANALYZE_FOR_ENTRY_COMPONENTS token only supports useValue!\"), type);\n            return [];\n        }\n        if (!provider.multi) {\n            this._reportError(syntaxError(\"The ANALYZE_FOR_ENTRY_COMPONENTS token only supports 'multi = true'!\"), type);\n            return [];\n        }\n        extractIdentifiers(provider.useValue, collectedIdentifiers);\n        collectedIdentifiers.forEach(function (identifier) {\n            var entry = _this._getEntryComponentMetadata(identifier.reference, false);\n            if (entry) {\n                components.push(entry);\n            }\n        });\n        return components;\n    };\n    CompileMetadataResolver.prototype._getEntryComponentMetadata = function (dirType, throwIfNotFound) {\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var dirMeta = this.getNonNormalizedDirectiveMetadata(dirType);\n        if (dirMeta && dirMeta.metadata.isComponent) {\n            return { componentType: dirType, componentFactory: dirMeta.metadata.componentFactory };\n        }\n        var dirSummary = this._loadSummary(dirType, CompileSummaryKind.Directive);\n        if (dirSummary && dirSummary.isComponent) {\n            return { componentType: dirType, componentFactory: dirSummary.componentFactory };\n        }\n        if (throwIfNotFound) {\n            throw syntaxError(dirType.name + \" cannot be used as an entry component.\");\n        }\n        return null;\n    };\n    CompileMetadataResolver.prototype._getInjectableTypeMetadata = function (type, dependencies) {\n        if (dependencies === void 0) { dependencies = null; }\n        var typeSummary = this._loadSummary(type, CompileSummaryKind.Injectable);\n        if (typeSummary) {\n            return typeSummary.type;\n        }\n        return this._getTypeMetadata(type, dependencies);\n    };\n    CompileMetadataResolver.prototype.getProviderMetadata = function (provider) {\n        var compileDeps = undefined;\n        var compileTypeMetadata = null;\n        var compileFactoryMetadata = null;\n        var token = this._getTokenMetadata(provider.token);\n        if (provider.useClass) {\n            compileTypeMetadata =\n                this._getInjectableTypeMetadata(provider.useClass, provider.dependencies);\n            compileDeps = compileTypeMetadata.diDeps;\n            if (provider.token === provider.useClass) {\n                // use the compileTypeMetadata as it contains information about lifecycleHooks...\n                token = { identifier: compileTypeMetadata };\n            }\n        }\n        else if (provider.useFactory) {\n            compileFactoryMetadata = this._getFactoryMetadata(provider.useFactory, provider.dependencies);\n            compileDeps = compileFactoryMetadata.diDeps;\n        }\n        return {\n            token: token,\n            useClass: compileTypeMetadata,\n            useValue: provider.useValue,\n            useFactory: compileFactoryMetadata,\n            useExisting: provider.useExisting ? this._getTokenMetadata(provider.useExisting) : undefined,\n            deps: compileDeps,\n            multi: provider.multi\n        };\n    };\n    CompileMetadataResolver.prototype._getQueriesMetadata = function (queries, isViewQuery, directiveType) {\n        var _this = this;\n        var res = [];\n        Object.keys(queries).forEach(function (propertyName) {\n            var query = queries[propertyName];\n            if (query.isViewQuery === isViewQuery) {\n                res.push(_this._getQueryMetadata(query, propertyName, directiveType));\n            }\n        });\n        return res;\n    };\n    CompileMetadataResolver.prototype._queryVarBindings = function (selector) { return selector.split(/\\s*,\\s*/); };\n    CompileMetadataResolver.prototype._getQueryMetadata = function (q, propertyName, typeOrFunc) {\n        var _this = this;\n        var selectors;\n        if (typeof q.selector === 'string') {\n            selectors =\n                this._queryVarBindings(q.selector).map(function (varName) { return _this._getTokenMetadata(varName); });\n        }\n        else {\n            if (!q.selector) {\n                this._reportError(syntaxError(\"Can't construct a query for the property \\\"\" + propertyName + \"\\\" of \\\"\" + stringifyType(typeOrFunc) + \"\\\" since the query selector wasn't defined.\"), typeOrFunc);\n                selectors = [];\n            }\n            else {\n                selectors = [this._getTokenMetadata(q.selector)];\n            }\n        }\n        return {\n            selectors: selectors,\n            first: q.first,\n            descendants: q.descendants, propertyName: propertyName,\n            read: q.read ? this._getTokenMetadata(q.read) : null\n        };\n    };\n    CompileMetadataResolver.prototype._reportError = function (error$$1, type, otherType) {\n        if (this._errorCollector) {\n            this._errorCollector(error$$1, type);\n            if (otherType) {\n                this._errorCollector(error$$1, otherType);\n            }\n        }\n        else {\n            throw error$$1;\n        }\n    };\n    return CompileMetadataResolver;\n}());\nfunction flattenArray(tree, out) {\n    if (out === void 0) { out = []; }\n    if (tree) {\n        for (var i = 0; i < tree.length; i++) {\n            var item = resolveForwardRef(tree[i]);\n            if (Array.isArray(item)) {\n                flattenArray(item, out);\n            }\n            else {\n                out.push(item);\n            }\n        }\n    }\n    return out;\n}\nfunction dedupeArray(array) {\n    if (array) {\n        return Array.from(new Set(array));\n    }\n    return [];\n}\nfunction flattenAndDedupeArray(tree) {\n    return dedupeArray(flattenArray(tree));\n}\nfunction isValidType(value) {\n    return (value instanceof StaticSymbol) || (value instanceof Type);\n}\nfunction extractIdentifiers(value, targetIdentifiers) {\n    visitValue(value, new _CompileValueConverter(), targetIdentifiers);\n}\nvar _CompileValueConverter = /** @class */ (function (_super) {\n    __extends(_CompileValueConverter, _super);\n    function _CompileValueConverter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    _CompileValueConverter.prototype.visitOther = function (value, targetIdentifiers) {\n        targetIdentifiers.push({ reference: value });\n    };\n    return _CompileValueConverter;\n}(ValueTransformer));\nfunction stringifyType(type) {\n    if (type instanceof StaticSymbol) {\n        return type.name + \" in \" + type.filePath;\n    }\n    else {\n        return stringify(type);\n    }\n}\n/**\n * Indicates that a component is still being loaded in a synchronous compile.\n */\nfunction componentStillLoadingError(compType) {\n    var error$$1 = Error(\"Can't compile synchronously as \" + stringify(compType) + \" is still being loaded!\");\n    error$$1[ERROR_COMPONENT_TYPE] = compType;\n    return error$$1;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ProviderError = /** @class */ (function (_super) {\n    __extends(ProviderError, _super);\n    function ProviderError(message, span) {\n        return _super.call(this, span, message) || this;\n    }\n    return ProviderError;\n}(ParseError));\nvar ProviderViewContext = /** @class */ (function () {\n    function ProviderViewContext(reflector, component) {\n        var _this = this;\n        this.reflector = reflector;\n        this.component = component;\n        this.errors = [];\n        this.viewQueries = _getViewQueries(component);\n        this.viewProviders = new Map();\n        component.viewProviders.forEach(function (provider) {\n            if (_this.viewProviders.get(tokenReference(provider.token)) == null) {\n                _this.viewProviders.set(tokenReference(provider.token), true);\n            }\n        });\n    }\n    return ProviderViewContext;\n}());\nvar ProviderElementContext = /** @class */ (function () {\n    function ProviderElementContext(viewContext, _parent, _isViewRoot, _directiveAsts, attrs, refs, isTemplate, contentQueryStartId, _sourceSpan) {\n        var _this = this;\n        this.viewContext = viewContext;\n        this._parent = _parent;\n        this._isViewRoot = _isViewRoot;\n        this._directiveAsts = _directiveAsts;\n        this._sourceSpan = _sourceSpan;\n        this._transformedProviders = new Map();\n        this._seenProviders = new Map();\n        this._queriedTokens = new Map();\n        this.transformedHasViewContainer = false;\n        this._attrs = {};\n        attrs.forEach(function (attrAst) { return _this._attrs[attrAst.name] = attrAst.value; });\n        var directivesMeta = _directiveAsts.map(function (directiveAst) { return directiveAst.directive; });\n        this._allProviders =\n            _resolveProvidersFromDirectives(directivesMeta, _sourceSpan, viewContext.errors);\n        this._contentQueries = _getContentQueries(contentQueryStartId, directivesMeta);\n        Array.from(this._allProviders.values()).forEach(function (provider) {\n            _this._addQueryReadsTo(provider.token, provider.token, _this._queriedTokens);\n        });\n        if (isTemplate) {\n            var templateRefId = createTokenForExternalReference(this.viewContext.reflector, Identifiers.TemplateRef);\n            this._addQueryReadsTo(templateRefId, templateRefId, this._queriedTokens);\n        }\n        refs.forEach(function (refAst) {\n            var defaultQueryValue = refAst.value ||\n                createTokenForExternalReference(_this.viewContext.reflector, Identifiers.ElementRef);\n            _this._addQueryReadsTo({ value: refAst.name }, defaultQueryValue, _this._queriedTokens);\n        });\n        if (this._queriedTokens.get(this.viewContext.reflector.resolveExternalReference(Identifiers.ViewContainerRef))) {\n            this.transformedHasViewContainer = true;\n        }\n        // create the providers that we know are eager first\n        Array.from(this._allProviders.values()).forEach(function (provider) {\n            var eager = provider.eager || _this._queriedTokens.get(tokenReference(provider.token));\n            if (eager) {\n                _this._getOrCreateLocalProvider(provider.providerType, provider.token, true);\n            }\n        });\n    }\n    ProviderElementContext.prototype.afterElement = function () {\n        var _this = this;\n        // collect lazy providers\n        Array.from(this._allProviders.values()).forEach(function (provider) {\n            _this._getOrCreateLocalProvider(provider.providerType, provider.token, false);\n        });\n    };\n    Object.defineProperty(ProviderElementContext.prototype, \"transformProviders\", {\n        get: function () {\n            // Note: Maps keep their insertion order.\n            var lazyProviders = [];\n            var eagerProviders = [];\n            this._transformedProviders.forEach(function (provider) {\n                if (provider.eager) {\n                    eagerProviders.push(provider);\n                }\n                else {\n                    lazyProviders.push(provider);\n                }\n            });\n            return lazyProviders.concat(eagerProviders);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ProviderElementContext.prototype, \"transformedDirectiveAsts\", {\n        get: function () {\n            var sortedProviderTypes = this.transformProviders.map(function (provider) { return provider.token.identifier; });\n            var sortedDirectives = this._directiveAsts.slice();\n            sortedDirectives.sort(function (dir1, dir2) { return sortedProviderTypes.indexOf(dir1.directive.type) -\n                sortedProviderTypes.indexOf(dir2.directive.type); });\n            return sortedDirectives;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ProviderElementContext.prototype, \"queryMatches\", {\n        get: function () {\n            var allMatches = [];\n            this._queriedTokens.forEach(function (matches) { allMatches.push.apply(allMatches, __spread(matches)); });\n            return allMatches;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ProviderElementContext.prototype._addQueryReadsTo = function (token, defaultValue, queryReadTokens) {\n        this._getQueriesFor(token).forEach(function (query) {\n            var queryValue = query.meta.read || defaultValue;\n            var tokenRef = tokenReference(queryValue);\n            var queryMatches = queryReadTokens.get(tokenRef);\n            if (!queryMatches) {\n                queryMatches = [];\n                queryReadTokens.set(tokenRef, queryMatches);\n            }\n            queryMatches.push({ queryId: query.queryId, value: queryValue });\n        });\n    };\n    ProviderElementContext.prototype._getQueriesFor = function (token) {\n        var result = [];\n        var currentEl = this;\n        var distance = 0;\n        var queries;\n        while (currentEl !== null) {\n            queries = currentEl._contentQueries.get(tokenReference(token));\n            if (queries) {\n                result.push.apply(result, __spread(queries.filter(function (query) { return query.meta.descendants || distance <= 1; })));\n            }\n            if (currentEl._directiveAsts.length > 0) {\n                distance++;\n            }\n            currentEl = currentEl._parent;\n        }\n        queries = this.viewContext.viewQueries.get(tokenReference(token));\n        if (queries) {\n            result.push.apply(result, __spread(queries));\n        }\n        return result;\n    };\n    ProviderElementContext.prototype._getOrCreateLocalProvider = function (requestingProviderType, token, eager) {\n        var _this = this;\n        var resolvedProvider = this._allProviders.get(tokenReference(token));\n        if (!resolvedProvider || ((requestingProviderType === ProviderAstType.Directive ||\n            requestingProviderType === ProviderAstType.PublicService) &&\n            resolvedProvider.providerType === ProviderAstType.PrivateService) ||\n            ((requestingProviderType === ProviderAstType.PrivateService ||\n                requestingProviderType === ProviderAstType.PublicService) &&\n                resolvedProvider.providerType === ProviderAstType.Builtin)) {\n            return null;\n        }\n        var transformedProviderAst = this._transformedProviders.get(tokenReference(token));\n        if (transformedProviderAst) {\n            return transformedProviderAst;\n        }\n        if (this._seenProviders.get(tokenReference(token)) != null) {\n            this.viewContext.errors.push(new ProviderError(\"Cannot instantiate cyclic dependency! \" + tokenName(token), this._sourceSpan));\n            return null;\n        }\n        this._seenProviders.set(tokenReference(token), true);\n        var transformedProviders = resolvedProvider.providers.map(function (provider) {\n            var transformedUseValue = provider.useValue;\n            var transformedUseExisting = provider.useExisting;\n            var transformedDeps = undefined;\n            if (provider.useExisting != null) {\n                var existingDiDep = _this._getDependency(resolvedProvider.providerType, { token: provider.useExisting }, eager);\n                if (existingDiDep.token != null) {\n                    transformedUseExisting = existingDiDep.token;\n                }\n                else {\n                    transformedUseExisting = null;\n                    transformedUseValue = existingDiDep.value;\n                }\n            }\n            else if (provider.useFactory) {\n                var deps = provider.deps || provider.useFactory.diDeps;\n                transformedDeps =\n                    deps.map(function (dep) { return _this._getDependency(resolvedProvider.providerType, dep, eager); });\n            }\n            else if (provider.useClass) {\n                var deps = provider.deps || provider.useClass.diDeps;\n                transformedDeps =\n                    deps.map(function (dep) { return _this._getDependency(resolvedProvider.providerType, dep, eager); });\n            }\n            return _transformProvider(provider, {\n                useExisting: transformedUseExisting,\n                useValue: transformedUseValue,\n                deps: transformedDeps\n            });\n        });\n        transformedProviderAst =\n            _transformProviderAst(resolvedProvider, { eager: eager, providers: transformedProviders });\n        this._transformedProviders.set(tokenReference(token), transformedProviderAst);\n        return transformedProviderAst;\n    };\n    ProviderElementContext.prototype._getLocalDependency = function (requestingProviderType, dep, eager) {\n        if (eager === void 0) { eager = false; }\n        if (dep.isAttribute) {\n            var attrValue = this._attrs[dep.token.value];\n            return { isValue: true, value: attrValue == null ? null : attrValue };\n        }\n        if (dep.token != null) {\n            // access builtints\n            if ((requestingProviderType === ProviderAstType.Directive ||\n                requestingProviderType === ProviderAstType.Component)) {\n                if (tokenReference(dep.token) ===\n                    this.viewContext.reflector.resolveExternalReference(Identifiers.Renderer) ||\n                    tokenReference(dep.token) ===\n                        this.viewContext.reflector.resolveExternalReference(Identifiers.ElementRef) ||\n                    tokenReference(dep.token) ===\n                        this.viewContext.reflector.resolveExternalReference(Identifiers.ChangeDetectorRef) ||\n                    tokenReference(dep.token) ===\n                        this.viewContext.reflector.resolveExternalReference(Identifiers.TemplateRef)) {\n                    return dep;\n                }\n                if (tokenReference(dep.token) ===\n                    this.viewContext.reflector.resolveExternalReference(Identifiers.ViewContainerRef)) {\n                    this.transformedHasViewContainer = true;\n                }\n            }\n            // access the injector\n            if (tokenReference(dep.token) ===\n                this.viewContext.reflector.resolveExternalReference(Identifiers.Injector)) {\n                return dep;\n            }\n            // access providers\n            if (this._getOrCreateLocalProvider(requestingProviderType, dep.token, eager) != null) {\n                return dep;\n            }\n        }\n        return null;\n    };\n    ProviderElementContext.prototype._getDependency = function (requestingProviderType, dep, eager) {\n        if (eager === void 0) { eager = false; }\n        var currElement = this;\n        var currEager = eager;\n        var result = null;\n        if (!dep.isSkipSelf) {\n            result = this._getLocalDependency(requestingProviderType, dep, eager);\n        }\n        if (dep.isSelf) {\n            if (!result && dep.isOptional) {\n                result = { isValue: true, value: null };\n            }\n        }\n        else {\n            // check parent elements\n            while (!result && currElement._parent) {\n                var prevElement = currElement;\n                currElement = currElement._parent;\n                if (prevElement._isViewRoot) {\n                    currEager = false;\n                }\n                result = currElement._getLocalDependency(ProviderAstType.PublicService, dep, currEager);\n            }\n            // check @Host restriction\n            if (!result) {\n                if (!dep.isHost || this.viewContext.component.isHost ||\n                    this.viewContext.component.type.reference === tokenReference(dep.token) ||\n                    this.viewContext.viewProviders.get(tokenReference(dep.token)) != null) {\n                    result = dep;\n                }\n                else {\n                    result = dep.isOptional ? { isValue: true, value: null } : null;\n                }\n            }\n        }\n        if (!result) {\n            this.viewContext.errors.push(new ProviderError(\"No provider for \" + tokenName(dep.token), this._sourceSpan));\n        }\n        return result;\n    };\n    return ProviderElementContext;\n}());\nfunction _transformProvider(provider, _a) {\n    var useExisting = _a.useExisting, useValue = _a.useValue, deps = _a.deps;\n    return {\n        token: provider.token,\n        useClass: provider.useClass,\n        useExisting: useExisting,\n        useFactory: provider.useFactory,\n        useValue: useValue,\n        deps: deps,\n        multi: provider.multi\n    };\n}\nfunction _transformProviderAst(provider, _a) {\n    var eager = _a.eager, providers = _a.providers;\n    return new ProviderAst(provider.token, provider.multiProvider, provider.eager || eager, providers, provider.providerType, provider.lifecycleHooks, provider.sourceSpan, provider.isModule);\n}\nfunction _resolveProvidersFromDirectives(directives, sourceSpan, targetErrors) {\n    var providersByToken = new Map();\n    directives.forEach(function (directive) {\n        var dirProvider = { token: { identifier: directive.type }, useClass: directive.type };\n        _resolveProviders([dirProvider], directive.isComponent ? ProviderAstType.Component : ProviderAstType.Directive, true, sourceSpan, targetErrors, providersByToken, /* isModule */ false);\n    });\n    // Note: directives need to be able to overwrite providers of a component!\n    var directivesWithComponentFirst = directives.filter(function (dir) { return dir.isComponent; }).concat(directives.filter(function (dir) { return !dir.isComponent; }));\n    directivesWithComponentFirst.forEach(function (directive) {\n        _resolveProviders(directive.providers, ProviderAstType.PublicService, false, sourceSpan, targetErrors, providersByToken, /* isModule */ false);\n        _resolveProviders(directive.viewProviders, ProviderAstType.PrivateService, false, sourceSpan, targetErrors, providersByToken, /* isModule */ false);\n    });\n    return providersByToken;\n}\nfunction _resolveProviders(providers, providerType, eager, sourceSpan, targetErrors, targetProvidersByToken, isModule) {\n    providers.forEach(function (provider) {\n        var resolvedProvider = targetProvidersByToken.get(tokenReference(provider.token));\n        if (resolvedProvider != null && !!resolvedProvider.multiProvider !== !!provider.multi) {\n            targetErrors.push(new ProviderError(\"Mixing multi and non multi provider is not possible for token \" + tokenName(resolvedProvider.token), sourceSpan));\n        }\n        if (!resolvedProvider) {\n            var lifecycleHooks = provider.token.identifier &&\n                provider.token.identifier.lifecycleHooks ?\n                provider.token.identifier.lifecycleHooks :\n                [];\n            var isUseValue = !(provider.useClass || provider.useExisting || provider.useFactory);\n            resolvedProvider = new ProviderAst(provider.token, !!provider.multi, eager || isUseValue, [provider], providerType, lifecycleHooks, sourceSpan, isModule);\n            targetProvidersByToken.set(tokenReference(provider.token), resolvedProvider);\n        }\n        else {\n            if (!provider.multi) {\n                resolvedProvider.providers.length = 0;\n            }\n            resolvedProvider.providers.push(provider);\n        }\n    });\n}\nfunction _getViewQueries(component) {\n    // Note: queries start with id 1 so we can use the number in a Bloom filter!\n    var viewQueryId = 1;\n    var viewQueries = new Map();\n    if (component.viewQueries) {\n        component.viewQueries.forEach(function (query) { return _addQueryToTokenMap(viewQueries, { meta: query, queryId: viewQueryId++ }); });\n    }\n    return viewQueries;\n}\nfunction _getContentQueries(contentQueryStartId, directives) {\n    var contentQueryId = contentQueryStartId;\n    var contentQueries = new Map();\n    directives.forEach(function (directive, directiveIndex) {\n        if (directive.queries) {\n            directive.queries.forEach(function (query) { return _addQueryToTokenMap(contentQueries, { meta: query, queryId: contentQueryId++ }); });\n        }\n    });\n    return contentQueries;\n}\nfunction _addQueryToTokenMap(map, query) {\n    query.meta.selectors.forEach(function (token) {\n        var entry = map.get(tokenReference(token));\n        if (!entry) {\n            entry = [];\n            map.set(tokenReference(token), entry);\n        }\n        entry.push(query);\n    });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar LOG_VAR = variable('_l');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Resolves types to {@link NgModule}.\n */\nvar NgModuleResolver = /** @class */ (function () {\n    function NgModuleResolver(_reflector) {\n        this._reflector = _reflector;\n    }\n    NgModuleResolver.prototype.isNgModule = function (type) { return this._reflector.annotations(type).some(createNgModule.isTypeOf); };\n    NgModuleResolver.prototype.resolve = function (type, throwIfNotFound) {\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var ngModuleMeta = findLast(this._reflector.annotations(type), createNgModule.isTypeOf);\n        if (ngModuleMeta) {\n            return ngModuleMeta;\n        }\n        else {\n            if (throwIfNotFound) {\n                throw new Error(\"No NgModule metadata found for '\" + stringify(type) + \"'.\");\n            }\n            return null;\n        }\n    };\n    return NgModuleResolver;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit\nvar VERSION$1 = 3;\nvar JS_B64_PREFIX = '# sourceMappingURL=data:application/json;base64,';\nvar SourceMapGenerator = /** @class */ (function () {\n    function SourceMapGenerator(file) {\n        if (file === void 0) { file = null; }\n        this.file = file;\n        this.sourcesContent = new Map();\n        this.lines = [];\n        this.lastCol0 = 0;\n        this.hasMappings = false;\n    }\n    // The content is `null` when the content is expected to be loaded using the URL\n    SourceMapGenerator.prototype.addSource = function (url, content) {\n        if (content === void 0) { content = null; }\n        if (!this.sourcesContent.has(url)) {\n            this.sourcesContent.set(url, content);\n        }\n        return this;\n    };\n    SourceMapGenerator.prototype.addLine = function () {\n        this.lines.push([]);\n        this.lastCol0 = 0;\n        return this;\n    };\n    SourceMapGenerator.prototype.addMapping = function (col0, sourceUrl, sourceLine0, sourceCol0) {\n        if (!this.currentLine) {\n            throw new Error(\"A line must be added before mappings can be added\");\n        }\n        if (sourceUrl != null && !this.sourcesContent.has(sourceUrl)) {\n            throw new Error(\"Unknown source file \\\"\" + sourceUrl + \"\\\"\");\n        }\n        if (col0 == null) {\n            throw new Error(\"The column in the generated code must be provided\");\n        }\n        if (col0 < this.lastCol0) {\n            throw new Error(\"Mapping should be added in output order\");\n        }\n        if (sourceUrl && (sourceLine0 == null || sourceCol0 == null)) {\n            throw new Error(\"The source location must be provided when a source url is provided\");\n        }\n        this.hasMappings = true;\n        this.lastCol0 = col0;\n        this.currentLine.push({ col0: col0, sourceUrl: sourceUrl, sourceLine0: sourceLine0, sourceCol0: sourceCol0 });\n        return this;\n    };\n    Object.defineProperty(SourceMapGenerator.prototype, \"currentLine\", {\n        get: function () { return this.lines.slice(-1)[0]; },\n        enumerable: true,\n        configurable: true\n    });\n    SourceMapGenerator.prototype.toJSON = function () {\n        var _this = this;\n        if (!this.hasMappings) {\n            return null;\n        }\n        var sourcesIndex = new Map();\n        var sources = [];\n        var sourcesContent = [];\n        Array.from(this.sourcesContent.keys()).forEach(function (url, i) {\n            sourcesIndex.set(url, i);\n            sources.push(url);\n            sourcesContent.push(_this.sourcesContent.get(url) || null);\n        });\n        var mappings = '';\n        var lastCol0 = 0;\n        var lastSourceIndex = 0;\n        var lastSourceLine0 = 0;\n        var lastSourceCol0 = 0;\n        this.lines.forEach(function (segments) {\n            lastCol0 = 0;\n            mappings += segments\n                .map(function (segment) {\n                // zero-based starting column of the line in the generated code\n                var segAsStr = toBase64VLQ(segment.col0 - lastCol0);\n                lastCol0 = segment.col0;\n                if (segment.sourceUrl != null) {\n                    // zero-based index into the sources list\n                    segAsStr +=\n                        toBase64VLQ(sourcesIndex.get(segment.sourceUrl) - lastSourceIndex);\n                    lastSourceIndex = sourcesIndex.get(segment.sourceUrl);\n                    // the zero-based starting line in the original source\n                    segAsStr += toBase64VLQ(segment.sourceLine0 - lastSourceLine0);\n                    lastSourceLine0 = segment.sourceLine0;\n                    // the zero-based starting column in the original source\n                    segAsStr += toBase64VLQ(segment.sourceCol0 - lastSourceCol0);\n                    lastSourceCol0 = segment.sourceCol0;\n                }\n                return segAsStr;\n            })\n                .join(',');\n            mappings += ';';\n        });\n        mappings = mappings.slice(0, -1);\n        return {\n            'file': this.file || '',\n            'version': VERSION$1,\n            'sourceRoot': '',\n            'sources': sources,\n            'sourcesContent': sourcesContent,\n            'mappings': mappings,\n        };\n    };\n    SourceMapGenerator.prototype.toJsComment = function () {\n        return this.hasMappings ? '//' + JS_B64_PREFIX + toBase64String(JSON.stringify(this, null, 0)) :\n            '';\n    };\n    return SourceMapGenerator;\n}());\nfunction toBase64String(value) {\n    var b64 = '';\n    value = utf8Encode(value);\n    for (var i = 0; i < value.length;) {\n        var i1 = value.charCodeAt(i++);\n        var i2 = value.charCodeAt(i++);\n        var i3 = value.charCodeAt(i++);\n        b64 += toBase64Digit(i1 >> 2);\n        b64 += toBase64Digit(((i1 & 3) << 4) | (isNaN(i2) ? 0 : i2 >> 4));\n        b64 += isNaN(i2) ? '=' : toBase64Digit(((i2 & 15) << 2) | (i3 >> 6));\n        b64 += isNaN(i2) || isNaN(i3) ? '=' : toBase64Digit(i3 & 63);\n    }\n    return b64;\n}\nfunction toBase64VLQ(value) {\n    value = value < 0 ? ((-value) << 1) + 1 : value << 1;\n    var out = '';\n    do {\n        var digit = value & 31;\n        value = value >> 5;\n        if (value > 0) {\n            digit = digit | 32;\n        }\n        out += toBase64Digit(digit);\n    } while (value > 0);\n    return out;\n}\nvar B64_DIGITS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nfunction toBase64Digit(value) {\n    if (value < 0 || value >= 64) {\n        throw new Error(\"Can only encode value in the range [0, 63]\");\n    }\n    return B64_DIGITS[value];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _SINGLE_QUOTE_ESCAPE_STRING_RE = /'|\\\\|\\n|\\r|\\$/g;\nvar _LEGAL_IDENTIFIER_RE = /^[$A-Z_][0-9A-Z_$]*$/i;\nvar _INDENT_WITH = '  ';\nvar CATCH_ERROR_VAR$1 = variable('error', null, null);\nvar CATCH_STACK_VAR$1 = variable('stack', null, null);\nvar _EmittedLine = /** @class */ (function () {\n    function _EmittedLine(indent) {\n        this.indent = indent;\n        this.partsLength = 0;\n        this.parts = [];\n        this.srcSpans = [];\n    }\n    return _EmittedLine;\n}());\nvar EmitterVisitorContext = /** @class */ (function () {\n    function EmitterVisitorContext(_indent) {\n        this._indent = _indent;\n        this._classes = [];\n        this._preambleLineCount = 0;\n        this._lines = [new _EmittedLine(_indent)];\n    }\n    EmitterVisitorContext.createRoot = function () { return new EmitterVisitorContext(0); };\n    Object.defineProperty(EmitterVisitorContext.prototype, \"_currentLine\", {\n        get: function () { return this._lines[this._lines.length - 1]; },\n        enumerable: true,\n        configurable: true\n    });\n    EmitterVisitorContext.prototype.println = function (from, lastPart) {\n        if (lastPart === void 0) { lastPart = ''; }\n        this.print(from || null, lastPart, true);\n    };\n    EmitterVisitorContext.prototype.lineIsEmpty = function () { return this._currentLine.parts.length === 0; };\n    EmitterVisitorContext.prototype.lineLength = function () {\n        return this._currentLine.indent * _INDENT_WITH.length + this._currentLine.partsLength;\n    };\n    EmitterVisitorContext.prototype.print = function (from, part, newLine) {\n        if (newLine === void 0) { newLine = false; }\n        if (part.length > 0) {\n            this._currentLine.parts.push(part);\n            this._currentLine.partsLength += part.length;\n            this._currentLine.srcSpans.push(from && from.sourceSpan || null);\n        }\n        if (newLine) {\n            this._lines.push(new _EmittedLine(this._indent));\n        }\n    };\n    EmitterVisitorContext.prototype.removeEmptyLastLine = function () {\n        if (this.lineIsEmpty()) {\n            this._lines.pop();\n        }\n    };\n    EmitterVisitorContext.prototype.incIndent = function () {\n        this._indent++;\n        if (this.lineIsEmpty()) {\n            this._currentLine.indent = this._indent;\n        }\n    };\n    EmitterVisitorContext.prototype.decIndent = function () {\n        this._indent--;\n        if (this.lineIsEmpty()) {\n            this._currentLine.indent = this._indent;\n        }\n    };\n    EmitterVisitorContext.prototype.pushClass = function (clazz) { this._classes.push(clazz); };\n    EmitterVisitorContext.prototype.popClass = function () { return this._classes.pop(); };\n    Object.defineProperty(EmitterVisitorContext.prototype, \"currentClass\", {\n        get: function () {\n            return this._classes.length > 0 ? this._classes[this._classes.length - 1] : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EmitterVisitorContext.prototype.toSource = function () {\n        return this.sourceLines\n            .map(function (l) { return l.parts.length > 0 ? _createIndent(l.indent) + l.parts.join('') : ''; })\n            .join('\\n');\n    };\n    EmitterVisitorContext.prototype.toSourceMapGenerator = function (genFilePath, startsAtLine) {\n        if (startsAtLine === void 0) { startsAtLine = 0; }\n        var map = new SourceMapGenerator(genFilePath);\n        var firstOffsetMapped = false;\n        var mapFirstOffsetIfNeeded = function () {\n            if (!firstOffsetMapped) {\n                // Add a single space so that tools won't try to load the file from disk.\n                // Note: We are using virtual urls like `ng:///`, so we have to\n                // provide a content here.\n                map.addSource(genFilePath, ' ').addMapping(0, genFilePath, 0, 0);\n                firstOffsetMapped = true;\n            }\n        };\n        for (var i = 0; i < startsAtLine; i++) {\n            map.addLine();\n            mapFirstOffsetIfNeeded();\n        }\n        this.sourceLines.forEach(function (line, lineIdx) {\n            map.addLine();\n            var spans = line.srcSpans;\n            var parts = line.parts;\n            var col0 = line.indent * _INDENT_WITH.length;\n            var spanIdx = 0;\n            // skip leading parts without source spans\n            while (spanIdx < spans.length && !spans[spanIdx]) {\n                col0 += parts[spanIdx].length;\n                spanIdx++;\n            }\n            if (spanIdx < spans.length && lineIdx === 0 && col0 === 0) {\n                firstOffsetMapped = true;\n            }\n            else {\n                mapFirstOffsetIfNeeded();\n            }\n            while (spanIdx < spans.length) {\n                var span = spans[spanIdx];\n                var source = span.start.file;\n                var sourceLine = span.start.line;\n                var sourceCol = span.start.col;\n                map.addSource(source.url, source.content)\n                    .addMapping(col0, source.url, sourceLine, sourceCol);\n                col0 += parts[spanIdx].length;\n                spanIdx++;\n                // assign parts without span or the same span to the previous segment\n                while (spanIdx < spans.length && (span === spans[spanIdx] || !spans[spanIdx])) {\n                    col0 += parts[spanIdx].length;\n                    spanIdx++;\n                }\n            }\n        });\n        return map;\n    };\n    EmitterVisitorContext.prototype.setPreambleLineCount = function (count) { return this._preambleLineCount = count; };\n    EmitterVisitorContext.prototype.spanOf = function (line, column) {\n        var emittedLine = this._lines[line - this._preambleLineCount];\n        if (emittedLine) {\n            var columnsLeft = column - _createIndent(emittedLine.indent).length;\n            for (var partIndex = 0; partIndex < emittedLine.parts.length; partIndex++) {\n                var part = emittedLine.parts[partIndex];\n                if (part.length > columnsLeft) {\n                    return emittedLine.srcSpans[partIndex];\n                }\n                columnsLeft -= part.length;\n            }\n        }\n        return null;\n    };\n    Object.defineProperty(EmitterVisitorContext.prototype, \"sourceLines\", {\n        get: function () {\n            if (this._lines.length && this._lines[this._lines.length - 1].parts.length === 0) {\n                return this._lines.slice(0, -1);\n            }\n            return this._lines;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EmitterVisitorContext;\n}());\nvar AbstractEmitterVisitor = /** @class */ (function () {\n    function AbstractEmitterVisitor(_escapeDollarInStrings) {\n        this._escapeDollarInStrings = _escapeDollarInStrings;\n    }\n    AbstractEmitterVisitor.prototype.visitExpressionStmt = function (stmt, ctx) {\n        stmt.expr.visitExpression(this, ctx);\n        ctx.println(stmt, ';');\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitReturnStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"return \");\n        stmt.value.visitExpression(this, ctx);\n        ctx.println(stmt, ';');\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitIfStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"if (\");\n        stmt.condition.visitExpression(this, ctx);\n        ctx.print(stmt, \") {\");\n        var hasElseCase = stmt.falseCase != null && stmt.falseCase.length > 0;\n        if (stmt.trueCase.length <= 1 && !hasElseCase) {\n            ctx.print(stmt, \" \");\n            this.visitAllStatements(stmt.trueCase, ctx);\n            ctx.removeEmptyLastLine();\n            ctx.print(stmt, \" \");\n        }\n        else {\n            ctx.println();\n            ctx.incIndent();\n            this.visitAllStatements(stmt.trueCase, ctx);\n            ctx.decIndent();\n            if (hasElseCase) {\n                ctx.println(stmt, \"} else {\");\n                ctx.incIndent();\n                this.visitAllStatements(stmt.falseCase, ctx);\n                ctx.decIndent();\n            }\n        }\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitThrowStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"throw \");\n        stmt.error.visitExpression(this, ctx);\n        ctx.println(stmt, \";\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitCommentStmt = function (stmt, ctx) {\n        if (stmt.multiline) {\n            ctx.println(stmt, \"/* \" + stmt.comment + \" */\");\n        }\n        else {\n            stmt.comment.split('\\n').forEach(function (line) { ctx.println(stmt, \"// \" + line); });\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitJSDocCommentStmt = function (stmt, ctx) {\n        ctx.println(stmt, \"/*\" + stmt.toString() + \"*/\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitWriteVarExpr = function (expr, ctx) {\n        var lineWasEmpty = ctx.lineIsEmpty();\n        if (!lineWasEmpty) {\n            ctx.print(expr, '(');\n        }\n        ctx.print(expr, expr.name + \" = \");\n        expr.value.visitExpression(this, ctx);\n        if (!lineWasEmpty) {\n            ctx.print(expr, ')');\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitWriteKeyExpr = function (expr, ctx) {\n        var lineWasEmpty = ctx.lineIsEmpty();\n        if (!lineWasEmpty) {\n            ctx.print(expr, '(');\n        }\n        expr.receiver.visitExpression(this, ctx);\n        ctx.print(expr, \"[\");\n        expr.index.visitExpression(this, ctx);\n        ctx.print(expr, \"] = \");\n        expr.value.visitExpression(this, ctx);\n        if (!lineWasEmpty) {\n            ctx.print(expr, ')');\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitWritePropExpr = function (expr, ctx) {\n        var lineWasEmpty = ctx.lineIsEmpty();\n        if (!lineWasEmpty) {\n            ctx.print(expr, '(');\n        }\n        expr.receiver.visitExpression(this, ctx);\n        ctx.print(expr, \".\" + expr.name + \" = \");\n        expr.value.visitExpression(this, ctx);\n        if (!lineWasEmpty) {\n            ctx.print(expr, ')');\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitInvokeMethodExpr = function (expr, ctx) {\n        expr.receiver.visitExpression(this, ctx);\n        var name = expr.name;\n        if (expr.builtin != null) {\n            name = this.getBuiltinMethodName(expr.builtin);\n            if (name == null) {\n                // some builtins just mean to skip the call.\n                return null;\n            }\n        }\n        ctx.print(expr, \".\" + name + \"(\");\n        this.visitAllExpressions(expr.args, ctx, \",\");\n        ctx.print(expr, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitInvokeFunctionExpr = function (expr, ctx) {\n        expr.fn.visitExpression(this, ctx);\n        ctx.print(expr, \"(\");\n        this.visitAllExpressions(expr.args, ctx, ',');\n        ctx.print(expr, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitWrappedNodeExpr = function (ast, ctx) {\n        throw new Error('Abstract emitter cannot visit WrappedNodeExpr.');\n    };\n    AbstractEmitterVisitor.prototype.visitReadVarExpr = function (ast, ctx) {\n        var varName = ast.name;\n        if (ast.builtin != null) {\n            switch (ast.builtin) {\n                case BuiltinVar.Super:\n                    varName = 'super';\n                    break;\n                case BuiltinVar.This:\n                    varName = 'this';\n                    break;\n                case BuiltinVar.CatchError:\n                    varName = CATCH_ERROR_VAR$1.name;\n                    break;\n                case BuiltinVar.CatchStack:\n                    varName = CATCH_STACK_VAR$1.name;\n                    break;\n                default:\n                    throw new Error(\"Unknown builtin variable \" + ast.builtin);\n            }\n        }\n        ctx.print(ast, varName);\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitInstantiateExpr = function (ast, ctx) {\n        ctx.print(ast, \"new \");\n        ast.classExpr.visitExpression(this, ctx);\n        ctx.print(ast, \"(\");\n        this.visitAllExpressions(ast.args, ctx, ',');\n        ctx.print(ast, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitLiteralExpr = function (ast, ctx) {\n        var value = ast.value;\n        if (typeof value === 'string') {\n            ctx.print(ast, escapeIdentifier(value, this._escapeDollarInStrings));\n        }\n        else {\n            ctx.print(ast, \"\" + value);\n        }\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitConditionalExpr = function (ast, ctx) {\n        ctx.print(ast, \"(\");\n        ast.condition.visitExpression(this, ctx);\n        ctx.print(ast, '? ');\n        ast.trueCase.visitExpression(this, ctx);\n        ctx.print(ast, ': ');\n        ast.falseCase.visitExpression(this, ctx);\n        ctx.print(ast, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitNotExpr = function (ast, ctx) {\n        ctx.print(ast, '!');\n        ast.condition.visitExpression(this, ctx);\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitAssertNotNullExpr = function (ast, ctx) {\n        ast.condition.visitExpression(this, ctx);\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitBinaryOperatorExpr = function (ast, ctx) {\n        var opStr;\n        switch (ast.operator) {\n            case BinaryOperator.Equals:\n                opStr = '==';\n                break;\n            case BinaryOperator.Identical:\n                opStr = '===';\n                break;\n            case BinaryOperator.NotEquals:\n                opStr = '!=';\n                break;\n            case BinaryOperator.NotIdentical:\n                opStr = '!==';\n                break;\n            case BinaryOperator.And:\n                opStr = '&&';\n                break;\n            case BinaryOperator.BitwiseAnd:\n                opStr = '&';\n                break;\n            case BinaryOperator.Or:\n                opStr = '||';\n                break;\n            case BinaryOperator.Plus:\n                opStr = '+';\n                break;\n            case BinaryOperator.Minus:\n                opStr = '-';\n                break;\n            case BinaryOperator.Divide:\n                opStr = '/';\n                break;\n            case BinaryOperator.Multiply:\n                opStr = '*';\n                break;\n            case BinaryOperator.Modulo:\n                opStr = '%';\n                break;\n            case BinaryOperator.Lower:\n                opStr = '<';\n                break;\n            case BinaryOperator.LowerEquals:\n                opStr = '<=';\n                break;\n            case BinaryOperator.Bigger:\n                opStr = '>';\n                break;\n            case BinaryOperator.BiggerEquals:\n                opStr = '>=';\n                break;\n            default:\n                throw new Error(\"Unknown operator \" + ast.operator);\n        }\n        if (ast.parens)\n            ctx.print(ast, \"(\");\n        ast.lhs.visitExpression(this, ctx);\n        ctx.print(ast, \" \" + opStr + \" \");\n        ast.rhs.visitExpression(this, ctx);\n        if (ast.parens)\n            ctx.print(ast, \")\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitReadPropExpr = function (ast, ctx) {\n        ast.receiver.visitExpression(this, ctx);\n        ctx.print(ast, \".\");\n        ctx.print(ast, ast.name);\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitReadKeyExpr = function (ast, ctx) {\n        ast.receiver.visitExpression(this, ctx);\n        ctx.print(ast, \"[\");\n        ast.index.visitExpression(this, ctx);\n        ctx.print(ast, \"]\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitLiteralArrayExpr = function (ast, ctx) {\n        ctx.print(ast, \"[\");\n        this.visitAllExpressions(ast.entries, ctx, ',');\n        ctx.print(ast, \"]\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitLiteralMapExpr = function (ast, ctx) {\n        var _this = this;\n        ctx.print(ast, \"{\");\n        this.visitAllObjects(function (entry) {\n            ctx.print(ast, escapeIdentifier(entry.key, _this._escapeDollarInStrings, entry.quoted) + \":\");\n            entry.value.visitExpression(_this, ctx);\n        }, ast.entries, ctx, ',');\n        ctx.print(ast, \"}\");\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitCommaExpr = function (ast, ctx) {\n        ctx.print(ast, '(');\n        this.visitAllExpressions(ast.parts, ctx, ',');\n        ctx.print(ast, ')');\n        return null;\n    };\n    AbstractEmitterVisitor.prototype.visitAllExpressions = function (expressions, ctx, separator) {\n        var _this = this;\n        this.visitAllObjects(function (expr) { return expr.visitExpression(_this, ctx); }, expressions, ctx, separator);\n    };\n    AbstractEmitterVisitor.prototype.visitAllObjects = function (handler, expressions, ctx, separator) {\n        var incrementedIndent = false;\n        for (var i = 0; i < expressions.length; i++) {\n            if (i > 0) {\n                if (ctx.lineLength() > 80) {\n                    ctx.print(null, separator, true);\n                    if (!incrementedIndent) {\n                        // continuation are marked with double indent.\n                        ctx.incIndent();\n                        ctx.incIndent();\n                        incrementedIndent = true;\n                    }\n                }\n                else {\n                    ctx.print(null, separator, false);\n                }\n            }\n            handler(expressions[i]);\n        }\n        if (incrementedIndent) {\n            // continuation are marked with double indent.\n            ctx.decIndent();\n            ctx.decIndent();\n        }\n    };\n    AbstractEmitterVisitor.prototype.visitAllStatements = function (statements, ctx) {\n        var _this = this;\n        statements.forEach(function (stmt) { return stmt.visitStatement(_this, ctx); });\n    };\n    return AbstractEmitterVisitor;\n}());\nfunction escapeIdentifier(input, escapeDollar, alwaysQuote) {\n    if (alwaysQuote === void 0) { alwaysQuote = true; }\n    if (input == null) {\n        return null;\n    }\n    var body = input.replace(_SINGLE_QUOTE_ESCAPE_STRING_RE, function () {\n        var match = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            match[_i] = arguments[_i];\n        }\n        if (match[0] == '$') {\n            return escapeDollar ? '\\\\$' : '$';\n        }\n        else if (match[0] == '\\n') {\n            return '\\\\n';\n        }\n        else if (match[0] == '\\r') {\n            return '\\\\r';\n        }\n        else {\n            return \"\\\\\" + match[0];\n        }\n    });\n    var requiresQuotes = alwaysQuote || !_LEGAL_IDENTIFIER_RE.test(body);\n    return requiresQuotes ? \"'\" + body + \"'\" : body;\n}\nfunction _createIndent(count) {\n    var res = '';\n    for (var i = 0; i < count; i++) {\n        res += _INDENT_WITH;\n    }\n    return res;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar _TsEmitterVisitor = /** @class */ (function (_super) {\n    __extends(_TsEmitterVisitor, _super);\n    function _TsEmitterVisitor(referenceFilter, importFilter) {\n        var _this = _super.call(this, false) || this;\n        _this.referenceFilter = referenceFilter;\n        _this.importFilter = importFilter;\n        _this.typeExpression = 0;\n        _this.importsWithPrefixes = new Map();\n        _this.reexports = new Map();\n        return _this;\n    }\n    _TsEmitterVisitor.prototype.visitType = function (t, ctx, defaultType) {\n        if (defaultType === void 0) { defaultType = 'any'; }\n        if (t) {\n            this.typeExpression++;\n            t.visitType(this, ctx);\n            this.typeExpression--;\n        }\n        else {\n            ctx.print(null, defaultType);\n        }\n    };\n    _TsEmitterVisitor.prototype.visitLiteralExpr = function (ast, ctx) {\n        var value = ast.value;\n        if (value == null && ast.type != INFERRED_TYPE) {\n            ctx.print(ast, \"(\" + value + \" as any)\");\n            return null;\n        }\n        return _super.prototype.visitLiteralExpr.call(this, ast, ctx);\n    };\n    // Temporary workaround to support strictNullCheck enabled consumers of ngc emit.\n    // In SNC mode, [] have the type never[], so we cast here to any[].\n    // TODO: narrow the cast to a more explicit type, or use a pattern that does not\n    // start with [].concat. see https://github.com/angular/angular/pull/11846\n    _TsEmitterVisitor.prototype.visitLiteralArrayExpr = function (ast, ctx) {\n        if (ast.entries.length === 0) {\n            ctx.print(ast, '(');\n        }\n        var result = _super.prototype.visitLiteralArrayExpr.call(this, ast, ctx);\n        if (ast.entries.length === 0) {\n            ctx.print(ast, ' as any[])');\n        }\n        return result;\n    };\n    _TsEmitterVisitor.prototype.visitExternalExpr = function (ast, ctx) {\n        this._visitIdentifier(ast.value, ast.typeParams, ctx);\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitAssertNotNullExpr = function (ast, ctx) {\n        var result = _super.prototype.visitAssertNotNullExpr.call(this, ast, ctx);\n        ctx.print(ast, '!');\n        return result;\n    };\n    _TsEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported) && stmt.value instanceof ExternalExpr &&\n            !stmt.type) {\n            // check for a reexport\n            var _a = stmt.value.value, name_1 = _a.name, moduleName = _a.moduleName;\n            if (moduleName) {\n                var reexports = this.reexports.get(moduleName);\n                if (!reexports) {\n                    reexports = [];\n                    this.reexports.set(moduleName, reexports);\n                }\n                reexports.push({ name: name_1, as: stmt.name });\n                return null;\n            }\n        }\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            ctx.print(stmt, \"export \");\n        }\n        if (stmt.hasModifier(StmtModifier.Final)) {\n            ctx.print(stmt, \"const\");\n        }\n        else {\n            ctx.print(stmt, \"var\");\n        }\n        ctx.print(stmt, \" \" + stmt.name);\n        this._printColonType(stmt.type, ctx);\n        if (stmt.value) {\n            ctx.print(stmt, \" = \");\n            stmt.value.visitExpression(this, ctx);\n        }\n        ctx.println(stmt, \";\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitWrappedNodeExpr = function (ast, ctx) {\n        throw new Error('Cannot visit a WrappedNodeExpr when outputting Typescript.');\n    };\n    _TsEmitterVisitor.prototype.visitCastExpr = function (ast, ctx) {\n        ctx.print(ast, \"(<\");\n        ast.type.visitType(this, ctx);\n        ctx.print(ast, \">\");\n        ast.value.visitExpression(this, ctx);\n        ctx.print(ast, \")\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitInstantiateExpr = function (ast, ctx) {\n        ctx.print(ast, \"new \");\n        this.typeExpression++;\n        ast.classExpr.visitExpression(this, ctx);\n        this.typeExpression--;\n        ctx.print(ast, \"(\");\n        this.visitAllExpressions(ast.args, ctx, ',');\n        ctx.print(ast, \")\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) {\n        var _this = this;\n        ctx.pushClass(stmt);\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            ctx.print(stmt, \"export \");\n        }\n        ctx.print(stmt, \"class \" + stmt.name);\n        if (stmt.parent != null) {\n            ctx.print(stmt, \" extends \");\n            this.typeExpression++;\n            stmt.parent.visitExpression(this, ctx);\n            this.typeExpression--;\n        }\n        ctx.println(stmt, \" {\");\n        ctx.incIndent();\n        stmt.fields.forEach(function (field) { return _this._visitClassField(field, ctx); });\n        if (stmt.constructorMethod != null) {\n            this._visitClassConstructor(stmt, ctx);\n        }\n        stmt.getters.forEach(function (getter) { return _this._visitClassGetter(getter, ctx); });\n        stmt.methods.forEach(function (method) { return _this._visitClassMethod(method, ctx); });\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        ctx.popClass();\n        return null;\n    };\n    _TsEmitterVisitor.prototype._visitClassField = function (field, ctx) {\n        if (field.hasModifier(StmtModifier.Private)) {\n            // comment out as a workaround for #10967\n            ctx.print(null, \"/*private*/ \");\n        }\n        if (field.hasModifier(StmtModifier.Static)) {\n            ctx.print(null, 'static ');\n        }\n        ctx.print(null, field.name);\n        this._printColonType(field.type, ctx);\n        if (field.initializer) {\n            ctx.print(null, ' = ');\n            field.initializer.visitExpression(this, ctx);\n        }\n        ctx.println(null, \";\");\n    };\n    _TsEmitterVisitor.prototype._visitClassGetter = function (getter, ctx) {\n        if (getter.hasModifier(StmtModifier.Private)) {\n            ctx.print(null, \"private \");\n        }\n        ctx.print(null, \"get \" + getter.name + \"()\");\n        this._printColonType(getter.type, ctx);\n        ctx.println(null, \" {\");\n        ctx.incIndent();\n        this.visitAllStatements(getter.body, ctx);\n        ctx.decIndent();\n        ctx.println(null, \"}\");\n    };\n    _TsEmitterVisitor.prototype._visitClassConstructor = function (stmt, ctx) {\n        ctx.print(stmt, \"constructor(\");\n        this._visitParams(stmt.constructorMethod.params, ctx);\n        ctx.println(stmt, \") {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.constructorMethod.body, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n    };\n    _TsEmitterVisitor.prototype._visitClassMethod = function (method, ctx) {\n        if (method.hasModifier(StmtModifier.Private)) {\n            ctx.print(null, \"private \");\n        }\n        ctx.print(null, method.name + \"(\");\n        this._visitParams(method.params, ctx);\n        ctx.print(null, \")\");\n        this._printColonType(method.type, ctx, 'void');\n        ctx.println(null, \" {\");\n        ctx.incIndent();\n        this.visitAllStatements(method.body, ctx);\n        ctx.decIndent();\n        ctx.println(null, \"}\");\n    };\n    _TsEmitterVisitor.prototype.visitFunctionExpr = function (ast, ctx) {\n        if (ast.name) {\n            ctx.print(ast, 'function ');\n            ctx.print(ast, ast.name);\n        }\n        ctx.print(ast, \"(\");\n        this._visitParams(ast.params, ctx);\n        ctx.print(ast, \")\");\n        this._printColonType(ast.type, ctx, 'void');\n        if (!ast.name) {\n            ctx.print(ast, \" => \");\n        }\n        ctx.println(ast, '{');\n        ctx.incIndent();\n        this.visitAllStatements(ast.statements, ctx);\n        ctx.decIndent();\n        ctx.print(ast, \"}\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            ctx.print(stmt, \"export \");\n        }\n        ctx.print(stmt, \"function \" + stmt.name + \"(\");\n        this._visitParams(stmt.params, ctx);\n        ctx.print(stmt, \")\");\n        this._printColonType(stmt.type, ctx, 'void');\n        ctx.println(stmt, \" {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.statements, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitTryCatchStmt = function (stmt, ctx) {\n        ctx.println(stmt, \"try {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.bodyStmts, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"} catch (\" + CATCH_ERROR_VAR$1.name + \") {\");\n        ctx.incIndent();\n        var catchStmts = [CATCH_STACK_VAR$1.set(CATCH_ERROR_VAR$1.prop('stack', null)).toDeclStmt(null, [\n                StmtModifier.Final\n            ])].concat(stmt.catchStmts);\n        this.visitAllStatements(catchStmts, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitBuiltinType = function (type, ctx) {\n        var typeStr;\n        switch (type.name) {\n            case BuiltinTypeName.Bool:\n                typeStr = 'boolean';\n                break;\n            case BuiltinTypeName.Dynamic:\n                typeStr = 'any';\n                break;\n            case BuiltinTypeName.Function:\n                typeStr = 'Function';\n                break;\n            case BuiltinTypeName.Number:\n                typeStr = 'number';\n                break;\n            case BuiltinTypeName.Int:\n                typeStr = 'number';\n                break;\n            case BuiltinTypeName.String:\n                typeStr = 'string';\n                break;\n            default:\n                throw new Error(\"Unsupported builtin type \" + type.name);\n        }\n        ctx.print(null, typeStr);\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitExpressionType = function (ast, ctx) {\n        ast.value.visitExpression(this, ctx);\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitArrayType = function (type, ctx) {\n        this.visitType(type.of, ctx);\n        ctx.print(null, \"[]\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.visitMapType = function (type, ctx) {\n        ctx.print(null, \"{[key: string]:\");\n        this.visitType(type.valueType, ctx);\n        ctx.print(null, \"}\");\n        return null;\n    };\n    _TsEmitterVisitor.prototype.getBuiltinMethodName = function (method) {\n        var name;\n        switch (method) {\n            case BuiltinMethod.ConcatArray:\n                name = 'concat';\n                break;\n            case BuiltinMethod.SubscribeObservable:\n                name = 'subscribe';\n                break;\n            case BuiltinMethod.Bind:\n                name = 'bind';\n                break;\n            default:\n                throw new Error(\"Unknown builtin method: \" + method);\n        }\n        return name;\n    };\n    _TsEmitterVisitor.prototype._visitParams = function (params, ctx) {\n        var _this = this;\n        this.visitAllObjects(function (param) {\n            ctx.print(null, param.name);\n            _this._printColonType(param.type, ctx);\n        }, params, ctx, ',');\n    };\n    _TsEmitterVisitor.prototype._visitIdentifier = function (value, typeParams, ctx) {\n        var _this = this;\n        var name = value.name, moduleName = value.moduleName;\n        if (this.referenceFilter && this.referenceFilter(value)) {\n            ctx.print(null, '(null as any)');\n            return;\n        }\n        if (moduleName && (!this.importFilter || !this.importFilter(value))) {\n            var prefix = this.importsWithPrefixes.get(moduleName);\n            if (prefix == null) {\n                prefix = \"i\" + this.importsWithPrefixes.size;\n                this.importsWithPrefixes.set(moduleName, prefix);\n            }\n            ctx.print(null, prefix + \".\");\n        }\n        ctx.print(null, name);\n        if (this.typeExpression > 0) {\n            // If we are in a type expression that refers to a generic type then supply\n            // the required type parameters. If there were not enough type parameters\n            // supplied, supply any as the type. Outside a type expression the reference\n            // should not supply type parameters and be treated as a simple value reference\n            // to the constructor function itself.\n            var suppliedParameters = typeParams || [];\n            if (suppliedParameters.length > 0) {\n                ctx.print(null, \"<\");\n                this.visitAllObjects(function (type) { return type.visitType(_this, ctx); }, typeParams, ctx, ',');\n                ctx.print(null, \">\");\n            }\n        }\n    };\n    _TsEmitterVisitor.prototype._printColonType = function (type, ctx, defaultType) {\n        if (type !== INFERRED_TYPE) {\n            ctx.print(null, ':');\n            this.visitType(type, ctx, defaultType);\n        }\n    };\n    return _TsEmitterVisitor;\n}(AbstractEmitterVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Resolve a `Type` for {@link Pipe}.\n *\n * This interface can be overridden by the application developer to create custom behavior.\n *\n * See {@link Compiler}\n */\nvar PipeResolver = /** @class */ (function () {\n    function PipeResolver(_reflector) {\n        this._reflector = _reflector;\n    }\n    PipeResolver.prototype.isPipe = function (type) {\n        var typeMetadata = this._reflector.annotations(resolveForwardRef(type));\n        return typeMetadata && typeMetadata.some(createPipe.isTypeOf);\n    };\n    /**\n     * Return {@link Pipe} for a given `Type`.\n     */\n    PipeResolver.prototype.resolve = function (type, throwIfNotFound) {\n        if (throwIfNotFound === void 0) { throwIfNotFound = true; }\n        var metas = this._reflector.annotations(resolveForwardRef(type));\n        if (metas) {\n            var annotation = findLast(metas, createPipe.isTypeOf);\n            if (annotation) {\n                return annotation;\n            }\n        }\n        if (throwIfNotFound) {\n            throw new Error(\"No Pipe decorator found on \" + stringify(type));\n        }\n        return null;\n    };\n    return PipeResolver;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// =================================================================================================\n// =================================================================================================\n// =========== S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P  ===========\n// =================================================================================================\n// =================================================================================================\n//\n//        DO NOT EDIT THIS LIST OF SECURITY SENSITIVE PROPERTIES WITHOUT A SECURITY REVIEW!\n//                               Reach out to mprobst for details.\n//\n// =================================================================================================\n/** Map from tagName|propertyName SecurityContext. Properties applying to all tags use '*'. */\nvar SECURITY_SCHEMA = {};\nfunction registerContext(ctx, specs) {\n    try {\n        for (var specs_1 = __values(specs), specs_1_1 = specs_1.next(); !specs_1_1.done; specs_1_1 = specs_1.next()) {\n            var spec = specs_1_1.value;\n            SECURITY_SCHEMA[spec.toLowerCase()] = ctx;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (specs_1_1 && !specs_1_1.done && (_a = specs_1.return)) _a.call(specs_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    var e_1, _a;\n}\n// Case is insignificant below, all element and attribute names are lower-cased for lookup.\nregisterContext(SecurityContext.HTML, [\n    'iframe|srcdoc',\n    '*|innerHTML',\n    '*|outerHTML',\n]);\nregisterContext(SecurityContext.STYLE, ['*|style']);\n// NB: no SCRIPT contexts here, they are never allowed due to the parser stripping them.\nregisterContext(SecurityContext.URL, [\n    '*|formAction', 'area|href', 'area|ping', 'audio|src', 'a|href',\n    'a|ping', 'blockquote|cite', 'body|background', 'del|cite', 'form|action',\n    'img|src', 'img|srcset', 'input|src', 'ins|cite', 'q|cite',\n    'source|src', 'source|srcset', 'track|src', 'video|poster', 'video|src',\n]);\nregisterContext(SecurityContext.RESOURCE_URL, [\n    'applet|code',\n    'applet|codebase',\n    'base|href',\n    'embed|src',\n    'frame|src',\n    'head|profile',\n    'html|manifest',\n    'iframe|src',\n    'link|href',\n    'media|src',\n    'object|codebase',\n    'object|data',\n    'script|src',\n]);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ElementSchemaRegistry = /** @class */ (function () {\n    function ElementSchemaRegistry() {\n    }\n    return ElementSchemaRegistry;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar BOOLEAN = 'boolean';\nvar NUMBER = 'number';\nvar STRING = 'string';\nvar OBJECT = 'object';\n/**\n * This array represents the DOM schema. It encodes inheritance, properties, and events.\n *\n * ## Overview\n *\n * Each line represents one kind of element. The `element_inheritance` and properties are joined\n * using `element_inheritance|properties` syntax.\n *\n * ## Element Inheritance\n *\n * The `element_inheritance` can be further subdivided as `element1,element2,...^parentElement`.\n * Here the individual elements are separated by `,` (commas). Every element in the list\n * has identical properties.\n *\n * An `element` may inherit additional properties from `parentElement` If no `^parentElement` is\n * specified then `\"\"` (blank) element is assumed.\n *\n * NOTE: The blank element inherits from root `[Element]` element, the super element of all\n * elements.\n *\n * NOTE an element prefix such as `:svg:` has no special meaning to the schema.\n *\n * ## Properties\n *\n * Each element has a set of properties separated by `,` (commas). Each property can be prefixed\n * by a special character designating its type:\n *\n * - (no prefix): property is a string.\n * - `*`: property represents an event.\n * - `!`: property is a boolean.\n * - `#`: property is a number.\n * - `%`: property is an object.\n *\n * ## Query\n *\n * The class creates an internal squas representation which allows to easily answer the query of\n * if a given property exist on a given element.\n *\n * NOTE: We don't yet support querying for types or events.\n * NOTE: This schema is auto extracted from `schema_extractor.ts` located in the test folder,\n *       see dom_element_schema_registry_spec.ts\n */\n// =================================================================================================\n// =================================================================================================\n// =========== S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P  ===========\n// =================================================================================================\n// =================================================================================================\n//\n//                       DO NOT EDIT THIS DOM SCHEMA WITHOUT A SECURITY REVIEW!\n//\n// Newly added properties must be security reviewed and assigned an appropriate SecurityContext in\n// dom_security_schema.ts. Reach out to mprobst & rjamet for details.\n//\n// =================================================================================================\nvar SCHEMA = [\n    '[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop,slot' +\n        /* added manually to avoid breaking changes */\n        ',*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored',\n    '[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',\n    'abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',\n    'media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,src,%srcObject,#volume',\n    ':svg:^[HTMLElement]|*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex',\n    ':svg:graphics^:svg:|',\n    ':svg:animation^:svg:|*begin,*end,*repeat',\n    ':svg:geometry^:svg:|',\n    ':svg:componentTransferFunction^:svg:|',\n    ':svg:gradient^:svg:|',\n    ':svg:textContent^:svg:graphics|',\n    ':svg:textPositioning^:svg:textContent|',\n    'a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username',\n    'area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,search,shape,target,username',\n    'audio^media|',\n    'br^[HTMLElement]|clear',\n    'base^[HTMLElement]|href,target',\n    'body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink',\n    'button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value',\n    'canvas^[HTMLElement]|#height,#width',\n    'content^[HTMLElement]|select',\n    'dl^[HTMLElement]|!compact',\n    'datalist^[HTMLElement]|',\n    'details^[HTMLElement]|!open',\n    'dialog^[HTMLElement]|!open,returnValue',\n    'dir^[HTMLElement]|!compact',\n    'div^[HTMLElement]|align',\n    'embed^[HTMLElement]|align,height,name,src,type,width',\n    'fieldset^[HTMLElement]|!disabled,name',\n    'font^[HTMLElement]|color,face,size',\n    'form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target',\n    'frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src',\n    'frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows',\n    'hr^[HTMLElement]|align,color,!noShade,size,width',\n    'head^[HTMLElement]|',\n    'h1,h2,h3,h4,h5,h6^[HTMLElement]|align',\n    'html^[HTMLElement]|version',\n    'iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width',\n    'img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width',\n    'input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width',\n    'li^[HTMLElement]|type,#value',\n    'label^[HTMLElement]|htmlFor',\n    'legend^[HTMLElement]|align',\n    'link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type',\n    'map^[HTMLElement]|name',\n    'marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width',\n    'menu^[HTMLElement]|!compact',\n    'meta^[HTMLElement]|content,httpEquiv,name,scheme',\n    'meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value',\n    'ins,del^[HTMLElement]|cite,dateTime',\n    'ol^[HTMLElement]|!compact,!reversed,#start,type',\n    'object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width',\n    'optgroup^[HTMLElement]|!disabled,label',\n    'option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value',\n    'output^[HTMLElement]|defaultValue,%htmlFor,name,value',\n    'p^[HTMLElement]|align',\n    'param^[HTMLElement]|name,type,value,valueType',\n    'picture^[HTMLElement]|',\n    'pre^[HTMLElement]|#width',\n    'progress^[HTMLElement]|#max,#value',\n    'q,blockquote,cite^[HTMLElement]|',\n    'script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type',\n    'select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value',\n    'shadow^[HTMLElement]|',\n    'slot^[HTMLElement]|name',\n    'source^[HTMLElement]|media,sizes,src,srcset,type',\n    'span^[HTMLElement]|',\n    'style^[HTMLElement]|!disabled,media,type',\n    'caption^[HTMLElement]|align',\n    'th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width',\n    'col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width',\n    'table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width',\n    'tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign',\n    'tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign',\n    'template^[HTMLElement]|',\n    'textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap',\n    'title^[HTMLElement]|text',\n    'track^[HTMLElement]|!default,kind,label,src,srclang',\n    'ul^[HTMLElement]|!compact,type',\n    'unknown^[HTMLElement]|',\n    'video^media|#height,poster,#width',\n    ':svg:a^:svg:graphics|',\n    ':svg:animate^:svg:animation|',\n    ':svg:animateMotion^:svg:animation|',\n    ':svg:animateTransform^:svg:animation|',\n    ':svg:circle^:svg:geometry|',\n    ':svg:clipPath^:svg:graphics|',\n    ':svg:defs^:svg:graphics|',\n    ':svg:desc^:svg:|',\n    ':svg:discard^:svg:|',\n    ':svg:ellipse^:svg:geometry|',\n    ':svg:feBlend^:svg:|',\n    ':svg:feColorMatrix^:svg:|',\n    ':svg:feComponentTransfer^:svg:|',\n    ':svg:feComposite^:svg:|',\n    ':svg:feConvolveMatrix^:svg:|',\n    ':svg:feDiffuseLighting^:svg:|',\n    ':svg:feDisplacementMap^:svg:|',\n    ':svg:feDistantLight^:svg:|',\n    ':svg:feDropShadow^:svg:|',\n    ':svg:feFlood^:svg:|',\n    ':svg:feFuncA^:svg:componentTransferFunction|',\n    ':svg:feFuncB^:svg:componentTransferFunction|',\n    ':svg:feFuncG^:svg:componentTransferFunction|',\n    ':svg:feFuncR^:svg:componentTransferFunction|',\n    ':svg:feGaussianBlur^:svg:|',\n    ':svg:feImage^:svg:|',\n    ':svg:feMerge^:svg:|',\n    ':svg:feMergeNode^:svg:|',\n    ':svg:feMorphology^:svg:|',\n    ':svg:feOffset^:svg:|',\n    ':svg:fePointLight^:svg:|',\n    ':svg:feSpecularLighting^:svg:|',\n    ':svg:feSpotLight^:svg:|',\n    ':svg:feTile^:svg:|',\n    ':svg:feTurbulence^:svg:|',\n    ':svg:filter^:svg:|',\n    ':svg:foreignObject^:svg:graphics|',\n    ':svg:g^:svg:graphics|',\n    ':svg:image^:svg:graphics|',\n    ':svg:line^:svg:geometry|',\n    ':svg:linearGradient^:svg:gradient|',\n    ':svg:mpath^:svg:|',\n    ':svg:marker^:svg:|',\n    ':svg:mask^:svg:|',\n    ':svg:metadata^:svg:|',\n    ':svg:path^:svg:geometry|',\n    ':svg:pattern^:svg:|',\n    ':svg:polygon^:svg:geometry|',\n    ':svg:polyline^:svg:geometry|',\n    ':svg:radialGradient^:svg:gradient|',\n    ':svg:rect^:svg:geometry|',\n    ':svg:svg^:svg:graphics|#currentScale,#zoomAndPan',\n    ':svg:script^:svg:|type',\n    ':svg:set^:svg:animation|',\n    ':svg:stop^:svg:|',\n    ':svg:style^:svg:|!disabled,media,title,type',\n    ':svg:switch^:svg:graphics|',\n    ':svg:symbol^:svg:|',\n    ':svg:tspan^:svg:textPositioning|',\n    ':svg:text^:svg:textPositioning|',\n    ':svg:textPath^:svg:textContent|',\n    ':svg:title^:svg:|',\n    ':svg:use^:svg:graphics|',\n    ':svg:view^:svg:|#zoomAndPan',\n    'data^[HTMLElement]|value',\n    'keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name',\n    'menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default',\n    'summary^[HTMLElement]|',\n    'time^[HTMLElement]|dateTime',\n    ':svg:cursor^:svg:|',\n];\nvar _ATTR_TO_PROP = {\n    'class': 'className',\n    'for': 'htmlFor',\n    'formaction': 'formAction',\n    'innerHtml': 'innerHTML',\n    'readonly': 'readOnly',\n    'tabindex': 'tabIndex',\n};\nvar DomElementSchemaRegistry = /** @class */ (function (_super) {\n    __extends(DomElementSchemaRegistry, _super);\n    function DomElementSchemaRegistry() {\n        var _this = _super.call(this) || this;\n        _this._schema = {};\n        SCHEMA.forEach(function (encodedType) {\n            var type = {};\n            var _a = __read(encodedType.split('|'), 2), strType = _a[0], strProperties = _a[1];\n            var properties = strProperties.split(',');\n            var _b = __read(strType.split('^'), 2), typeNames = _b[0], superName = _b[1];\n            typeNames.split(',').forEach(function (tag) { return _this._schema[tag.toLowerCase()] = type; });\n            var superType = superName && _this._schema[superName.toLowerCase()];\n            if (superType) {\n                Object.keys(superType).forEach(function (prop) { type[prop] = superType[prop]; });\n            }\n            properties.forEach(function (property) {\n                if (property.length > 0) {\n                    switch (property[0]) {\n                        case '*':\n                            // We don't yet support events.\n                            // If ever allowing to bind to events, GO THROUGH A SECURITY REVIEW, allowing events\n                            // will\n                            // almost certainly introduce bad XSS vulnerabilities.\n                            // type[property.substring(1)] = EVENT;\n                            break;\n                        case '!':\n                            type[property.substring(1)] = BOOLEAN;\n                            break;\n                        case '#':\n                            type[property.substring(1)] = NUMBER;\n                            break;\n                        case '%':\n                            type[property.substring(1)] = OBJECT;\n                            break;\n                        default:\n                            type[property] = STRING;\n                    }\n                }\n            });\n        });\n        return _this;\n    }\n    DomElementSchemaRegistry.prototype.hasProperty = function (tagName, propName, schemaMetas) {\n        if (schemaMetas.some(function (schema) { return schema.name === NO_ERRORS_SCHEMA.name; })) {\n            return true;\n        }\n        if (tagName.indexOf('-') > -1) {\n            if (isNgContainer(tagName) || isNgContent(tagName)) {\n                return false;\n            }\n            if (schemaMetas.some(function (schema) { return schema.name === CUSTOM_ELEMENTS_SCHEMA.name; })) {\n                // Can't tell now as we don't know which properties a custom element will get\n                // once it is instantiated\n                return true;\n            }\n        }\n        var elementProperties = this._schema[tagName.toLowerCase()] || this._schema['unknown'];\n        return !!elementProperties[propName];\n    };\n    DomElementSchemaRegistry.prototype.hasElement = function (tagName, schemaMetas) {\n        if (schemaMetas.some(function (schema) { return schema.name === NO_ERRORS_SCHEMA.name; })) {\n            return true;\n        }\n        if (tagName.indexOf('-') > -1) {\n            if (isNgContainer(tagName) || isNgContent(tagName)) {\n                return true;\n            }\n            if (schemaMetas.some(function (schema) { return schema.name === CUSTOM_ELEMENTS_SCHEMA.name; })) {\n                // Allow any custom elements\n                return true;\n            }\n        }\n        return !!this._schema[tagName.toLowerCase()];\n    };\n    /**\n     * securityContext returns the security context for the given property on the given DOM tag.\n     *\n     * Tag and property name are statically known and cannot change at runtime, i.e. it is not\n     * possible to bind a value into a changing attribute or tag name.\n     *\n     * The filtering is white list based. All attributes in the schema above are assumed to have the\n     * 'NONE' security context, i.e. that they are safe inert string values. Only specific well known\n     * attack vectors are assigned their appropriate context.\n     */\n    DomElementSchemaRegistry.prototype.securityContext = function (tagName, propName, isAttribute) {\n        if (isAttribute) {\n            // NB: For security purposes, use the mapped property name, not the attribute name.\n            propName = this.getMappedPropName(propName);\n        }\n        // Make sure comparisons are case insensitive, so that case differences between attribute and\n        // property names do not have a security impact.\n        tagName = tagName.toLowerCase();\n        propName = propName.toLowerCase();\n        var ctx = SECURITY_SCHEMA[tagName + '|' + propName];\n        if (ctx) {\n            return ctx;\n        }\n        ctx = SECURITY_SCHEMA['*|' + propName];\n        return ctx ? ctx : SecurityContext.NONE;\n    };\n    DomElementSchemaRegistry.prototype.getMappedPropName = function (propName) { return _ATTR_TO_PROP[propName] || propName; };\n    DomElementSchemaRegistry.prototype.getDefaultComponentElementName = function () { return 'ng-component'; };\n    DomElementSchemaRegistry.prototype.validateProperty = function (name) {\n        if (name.toLowerCase().startsWith('on')) {\n            var msg = \"Binding to event property '\" + name + \"' is disallowed for security reasons, \" +\n                (\"please use (\" + name.slice(2) + \")=...\") +\n                (\"\\nIf '\" + name + \"' is a directive input, make sure the directive is imported by the\") +\n                \" current module.\";\n            return { error: true, msg: msg };\n        }\n        else {\n            return { error: false };\n        }\n    };\n    DomElementSchemaRegistry.prototype.validateAttribute = function (name) {\n        if (name.toLowerCase().startsWith('on')) {\n            var msg = \"Binding to event attribute '\" + name + \"' is disallowed for security reasons, \" +\n                (\"please use (\" + name.slice(2) + \")=...\");\n            return { error: true, msg: msg };\n        }\n        else {\n            return { error: false };\n        }\n    };\n    DomElementSchemaRegistry.prototype.allKnownElementNames = function () { return Object.keys(this._schema); };\n    DomElementSchemaRegistry.prototype.normalizeAnimationStyleProperty = function (propName) {\n        return dashCaseToCamelCase(propName);\n    };\n    DomElementSchemaRegistry.prototype.normalizeAnimationStyleValue = function (camelCaseProp, userProvidedProp, val) {\n        var unit = '';\n        var strVal = val.toString().trim();\n        var errorMsg = null;\n        if (_isPixelDimensionStyle(camelCaseProp) && val !== 0 && val !== '0') {\n            if (typeof val === 'number') {\n                unit = 'px';\n            }\n            else {\n                var valAndSuffixMatch = val.match(/^[+-]?[\\d\\.]+([a-z]*)$/);\n                if (valAndSuffixMatch && valAndSuffixMatch[1].length == 0) {\n                    errorMsg = \"Please provide a CSS unit value for \" + userProvidedProp + \":\" + val;\n                }\n            }\n        }\n        return { error: errorMsg, value: strVal + unit };\n    };\n    return DomElementSchemaRegistry;\n}(ElementSchemaRegistry));\nfunction _isPixelDimensionStyle(prop) {\n    switch (prop) {\n        case 'width':\n        case 'height':\n        case 'minWidth':\n        case 'minHeight':\n        case 'maxWidth':\n        case 'maxHeight':\n        case 'left':\n        case 'top':\n        case 'bottom':\n        case 'right':\n        case 'fontSize':\n        case 'outlineWidth':\n        case 'outlineOffset':\n        case 'paddingTop':\n        case 'paddingLeft':\n        case 'paddingBottom':\n        case 'paddingRight':\n        case 'marginTop':\n        case 'marginLeft':\n        case 'marginBottom':\n        case 'marginRight':\n        case 'borderRadius':\n        case 'borderWidth':\n        case 'borderTopWidth':\n        case 'borderLeftWidth':\n        case 'borderRightWidth':\n        case 'borderBottomWidth':\n        case 'textIndent':\n            return true;\n        default:\n            return false;\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar PRESERVE_WS_ATTR_NAME = 'ngPreserveWhitespaces';\nvar SKIP_WS_TRIM_TAGS = new Set(['pre', 'template', 'textarea', 'script', 'style']);\n// Equivalent to \\s with \\u00a0 (non-breaking space) excluded.\n// Based on https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\nvar WS_CHARS = ' \\f\\n\\r\\t\\v\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff';\nvar NO_WS_REGEXP = new RegExp(\"[^\" + WS_CHARS + \"]\");\nvar WS_REPLACE_REGEXP = new RegExp(\"[\" + WS_CHARS + \"]{2,}\", 'g');\nfunction hasPreserveWhitespacesAttr(attrs) {\n    return attrs.some(function (attr) { return attr.name === PRESERVE_WS_ATTR_NAME; });\n}\n/**\n * Angular Dart introduced &ngsp; as a placeholder for non-removable space, see:\n * https://github.com/dart-lang/angular/blob/0bb611387d29d65b5af7f9d2515ab571fd3fbee4/_tests/test/compiler/preserve_whitespace_test.dart#L25-L32\n * In Angular Dart &ngsp; is converted to the 0xE500 PUA (Private Use Areas) unicode character\n * and later on replaced by a space. We are re-implementing the same idea here.\n */\nfunction replaceNgsp(value) {\n    // lexer is replacing the &ngsp; pseudo-entity with NGSP_UNICODE\n    return value.replace(new RegExp(NGSP_UNICODE, 'g'), ' ');\n}\n/**\n * This visitor can walk HTML parse tree and remove / trim text nodes using the following rules:\n * - consider spaces, tabs and new lines as whitespace characters;\n * - drop text nodes consisting of whitespace characters only;\n * - for all other text nodes replace consecutive whitespace characters with one space;\n * - convert &ngsp; pseudo-entity to a single space;\n *\n * Removal and trimming of whitespaces have positive performance impact (less code to generate\n * while compiling templates, faster view creation). At the same time it can be \"destructive\"\n * in some cases (whitespaces can influence layout). Because of the potential of breaking layout\n * this visitor is not activated by default in Angular 5 and people need to explicitly opt-in for\n * whitespace removal. The default option for whitespace removal will be revisited in Angular 6\n * and might be changed to \"on\" by default.\n */\nvar WhitespaceVisitor = /** @class */ (function () {\n    function WhitespaceVisitor() {\n    }\n    WhitespaceVisitor.prototype.visitElement = function (element, context) {\n        if (SKIP_WS_TRIM_TAGS.has(element.name) || hasPreserveWhitespacesAttr(element.attrs)) {\n            // don't descent into elements where we need to preserve whitespaces\n            // but still visit all attributes to eliminate one used as a market to preserve WS\n            return new Element(element.name, visitAll(this, element.attrs), element.children, element.sourceSpan, element.startSourceSpan, element.endSourceSpan);\n        }\n        return new Element(element.name, element.attrs, visitAll(this, element.children), element.sourceSpan, element.startSourceSpan, element.endSourceSpan);\n    };\n    WhitespaceVisitor.prototype.visitAttribute = function (attribute, context) {\n        return attribute.name !== PRESERVE_WS_ATTR_NAME ? attribute : null;\n    };\n    WhitespaceVisitor.prototype.visitText = function (text, context) {\n        var isNotBlank = text.value.match(NO_WS_REGEXP);\n        if (isNotBlank) {\n            return new Text(replaceNgsp(text.value).replace(WS_REPLACE_REGEXP, ' '), text.sourceSpan);\n        }\n        return null;\n    };\n    WhitespaceVisitor.prototype.visitComment = function (comment, context) { return comment; };\n    WhitespaceVisitor.prototype.visitExpansion = function (expansion, context) { return expansion; };\n    WhitespaceVisitor.prototype.visitExpansionCase = function (expansionCase, context) { return expansionCase; };\n    return WhitespaceVisitor;\n}());\nfunction removeWhitespaces(htmlAstWithErrors) {\n    return new ParseTreeResult(visitAll(new WhitespaceVisitor(), htmlAstWithErrors.rootNodes), htmlAstWithErrors.errors);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// http://cldr.unicode.org/index/cldr-spec/plural-rules\nvar PLURAL_CASES = ['zero', 'one', 'two', 'few', 'many', 'other'];\n/**\n * Expands special forms into elements.\n *\n * For example,\n *\n * ```\n * { messages.length, plural,\n *   =0 {zero}\n *   =1 {one}\n *   other {more than one}\n * }\n * ```\n *\n * will be expanded into\n *\n * ```\n * <ng-container [ngPlural]=\"messages.length\">\n *   <ng-template ngPluralCase=\"=0\">zero</ng-template>\n *   <ng-template ngPluralCase=\"=1\">one</ng-template>\n *   <ng-template ngPluralCase=\"other\">more than one</ng-template>\n * </ng-container>\n * ```\n */\nfunction expandNodes(nodes) {\n    var expander = new _Expander();\n    return new ExpansionResult(visitAll(expander, nodes), expander.isExpanded, expander.errors);\n}\nvar ExpansionResult = /** @class */ (function () {\n    function ExpansionResult(nodes, expanded, errors) {\n        this.nodes = nodes;\n        this.expanded = expanded;\n        this.errors = errors;\n    }\n    return ExpansionResult;\n}());\nvar ExpansionError = /** @class */ (function (_super) {\n    __extends(ExpansionError, _super);\n    function ExpansionError(span, errorMsg) {\n        return _super.call(this, span, errorMsg) || this;\n    }\n    return ExpansionError;\n}(ParseError));\n/**\n * Expand expansion forms (plural, select) to directives\n *\n * @internal\n */\nvar _Expander = /** @class */ (function () {\n    function _Expander() {\n        this.isExpanded = false;\n        this.errors = [];\n    }\n    _Expander.prototype.visitElement = function (element, context) {\n        return new Element(element.name, element.attrs, visitAll(this, element.children), element.sourceSpan, element.startSourceSpan, element.endSourceSpan);\n    };\n    _Expander.prototype.visitAttribute = function (attribute, context) { return attribute; };\n    _Expander.prototype.visitText = function (text, context) { return text; };\n    _Expander.prototype.visitComment = function (comment, context) { return comment; };\n    _Expander.prototype.visitExpansion = function (icu, context) {\n        this.isExpanded = true;\n        return icu.type == 'plural' ? _expandPluralForm(icu, this.errors) :\n            _expandDefaultForm(icu, this.errors);\n    };\n    _Expander.prototype.visitExpansionCase = function (icuCase, context) {\n        throw new Error('Should not be reached');\n    };\n    return _Expander;\n}());\n// Plural forms are expanded to `NgPlural` and `NgPluralCase`s\nfunction _expandPluralForm(ast, errors) {\n    var children = ast.cases.map(function (c) {\n        if (PLURAL_CASES.indexOf(c.value) == -1 && !c.value.match(/^=\\d+$/)) {\n            errors.push(new ExpansionError(c.valueSourceSpan, \"Plural cases should be \\\"=<number>\\\" or one of \" + PLURAL_CASES.join(\", \")));\n        }\n        var expansionResult = expandNodes(c.expression);\n        errors.push.apply(errors, __spread(expansionResult.errors));\n        return new Element(\"ng-template\", [new Attribute('ngPluralCase', \"\" + c.value, c.valueSourceSpan)], expansionResult.nodes, c.sourceSpan, c.sourceSpan, c.sourceSpan);\n    });\n    var switchAttr = new Attribute('[ngPlural]', ast.switchValue, ast.switchValueSourceSpan);\n    return new Element('ng-container', [switchAttr], children, ast.sourceSpan, ast.sourceSpan, ast.sourceSpan);\n}\n// ICU messages (excluding plural form) are expanded to `NgSwitch`  and `NgSwitchCase`s\nfunction _expandDefaultForm(ast, errors) {\n    var children = ast.cases.map(function (c) {\n        var expansionResult = expandNodes(c.expression);\n        errors.push.apply(errors, __spread(expansionResult.errors));\n        if (c.value === 'other') {\n            // other is the default case when no values match\n            return new Element(\"ng-template\", [new Attribute('ngSwitchDefault', '', c.valueSourceSpan)], expansionResult.nodes, c.sourceSpan, c.sourceSpan, c.sourceSpan);\n        }\n        return new Element(\"ng-template\", [new Attribute('ngSwitchCase', \"\" + c.value, c.valueSourceSpan)], expansionResult.nodes, c.sourceSpan, c.sourceSpan, c.sourceSpan);\n    });\n    var switchAttr = new Attribute('[ngSwitch]', ast.switchValue, ast.switchValueSourceSpan);\n    return new Element('ng-container', [switchAttr], children, ast.sourceSpan, ast.sourceSpan, ast.sourceSpan);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar PROPERTY_PARTS_SEPARATOR = '.';\nvar ATTRIBUTE_PREFIX = 'attr';\nvar CLASS_PREFIX = 'class';\nvar STYLE_PREFIX = 'style';\nvar ANIMATE_PROP_PREFIX = 'animate-';\n/**\n * Parses bindings in templates and in the directive host area.\n */\nvar BindingParser = /** @class */ (function () {\n    function BindingParser(_exprParser, _interpolationConfig, _schemaRegistry, pipes, errors) {\n        this._exprParser = _exprParser;\n        this._interpolationConfig = _interpolationConfig;\n        this._schemaRegistry = _schemaRegistry;\n        this.errors = errors;\n        this.pipesByName = null;\n        this._usedPipes = new Map();\n        // When the `pipes` parameter is `null`, do not check for used pipes\n        // This is used in IVY when we might not know the available pipes at compile time\n        if (pipes) {\n            var pipesByName_1 = new Map();\n            pipes.forEach(function (pipe) { return pipesByName_1.set(pipe.name, pipe); });\n            this.pipesByName = pipesByName_1;\n        }\n    }\n    BindingParser.prototype.getUsedPipes = function () { return Array.from(this._usedPipes.values()); };\n    BindingParser.prototype.createBoundHostProperties = function (dirMeta, sourceSpan) {\n        var _this = this;\n        if (dirMeta.hostProperties) {\n            var boundProps_1 = [];\n            Object.keys(dirMeta.hostProperties).forEach(function (propName) {\n                var expression = dirMeta.hostProperties[propName];\n                if (typeof expression === 'string') {\n                    _this.parsePropertyBinding(propName, expression, true, sourceSpan, [], boundProps_1);\n                }\n                else {\n                    _this._reportError(\"Value of the host property binding \\\"\" + propName + \"\\\" needs to be a string representing an expression but got \\\"\" + expression + \"\\\" (\" + typeof expression + \")\", sourceSpan);\n                }\n            });\n            return boundProps_1;\n        }\n        return null;\n    };\n    BindingParser.prototype.createDirectiveHostPropertyAsts = function (dirMeta, elementSelector, sourceSpan) {\n        var _this = this;\n        var boundProps = this.createBoundHostProperties(dirMeta, sourceSpan);\n        return boundProps &&\n            boundProps.map(function (prop) { return _this.createBoundElementProperty(elementSelector, prop); });\n    };\n    BindingParser.prototype.createDirectiveHostEventAsts = function (dirMeta, sourceSpan) {\n        var _this = this;\n        if (dirMeta.hostListeners) {\n            var targetEvents_1 = [];\n            Object.keys(dirMeta.hostListeners).forEach(function (propName) {\n                var expression = dirMeta.hostListeners[propName];\n                if (typeof expression === 'string') {\n                    _this.parseEvent(propName, expression, sourceSpan, [], targetEvents_1);\n                }\n                else {\n                    _this._reportError(\"Value of the host listener \\\"\" + propName + \"\\\" needs to be a string representing an expression but got \\\"\" + expression + \"\\\" (\" + typeof expression + \")\", sourceSpan);\n                }\n            });\n            return targetEvents_1;\n        }\n        return null;\n    };\n    BindingParser.prototype.parseInterpolation = function (value, sourceSpan) {\n        var sourceInfo = sourceSpan.start.toString();\n        try {\n            var ast = this._exprParser.parseInterpolation(value, sourceInfo, this._interpolationConfig);\n            if (ast)\n                this._reportExpressionParserErrors(ast.errors, sourceSpan);\n            this._checkPipes(ast, sourceSpan);\n            return ast;\n        }\n        catch (e) {\n            this._reportError(\"\" + e, sourceSpan);\n            return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);\n        }\n    };\n    // Parse an inline template binding. ie `<tag *tplKey=\"<tplValue>\">`\n    BindingParser.prototype.parseInlineTemplateBinding = function (tplKey, tplValue, sourceSpan, targetMatchableAttrs, targetProps, targetVars) {\n        var bindings = this._parseTemplateBindings(tplKey, tplValue, sourceSpan);\n        for (var i = 0; i < bindings.length; i++) {\n            var binding = bindings[i];\n            if (binding.keyIsVar) {\n                targetVars.push(new ParsedVariable(binding.key, binding.name, sourceSpan));\n            }\n            else if (binding.expression) {\n                this._parsePropertyAst(binding.key, binding.expression, sourceSpan, targetMatchableAttrs, targetProps);\n            }\n            else {\n                targetMatchableAttrs.push([binding.key, '']);\n                this.parseLiteralAttr(binding.key, null, sourceSpan, targetMatchableAttrs, targetProps);\n            }\n        }\n    };\n    BindingParser.prototype._parseTemplateBindings = function (tplKey, tplValue, sourceSpan) {\n        var _this = this;\n        var sourceInfo = sourceSpan.start.toString();\n        try {\n            var bindingsResult = this._exprParser.parseTemplateBindings(tplKey, tplValue, sourceInfo);\n            this._reportExpressionParserErrors(bindingsResult.errors, sourceSpan);\n            bindingsResult.templateBindings.forEach(function (binding) {\n                if (binding.expression) {\n                    _this._checkPipes(binding.expression, sourceSpan);\n                }\n            });\n            bindingsResult.warnings.forEach(function (warning) { _this._reportError(warning, sourceSpan, ParseErrorLevel.WARNING); });\n            return bindingsResult.templateBindings;\n        }\n        catch (e) {\n            this._reportError(\"\" + e, sourceSpan);\n            return [];\n        }\n    };\n    BindingParser.prototype.parseLiteralAttr = function (name, value, sourceSpan, targetMatchableAttrs, targetProps) {\n        if (isAnimationLabel(name)) {\n            name = name.substring(1);\n            if (value) {\n                this._reportError(\"Assigning animation triggers via @prop=\\\"exp\\\" attributes with an expression is invalid.\" +\n                    \" Use property bindings (e.g. [@prop]=\\\"exp\\\") or use an attribute without a value (e.g. @prop) instead.\", sourceSpan, ParseErrorLevel.ERROR);\n            }\n            this._parseAnimation(name, value, sourceSpan, targetMatchableAttrs, targetProps);\n        }\n        else {\n            targetProps.push(new ParsedProperty(name, this._exprParser.wrapLiteralPrimitive(value, ''), ParsedPropertyType.LITERAL_ATTR, sourceSpan));\n        }\n    };\n    BindingParser.prototype.parsePropertyBinding = function (name, expression, isHost, sourceSpan, targetMatchableAttrs, targetProps) {\n        var isAnimationProp = false;\n        if (name.startsWith(ANIMATE_PROP_PREFIX)) {\n            isAnimationProp = true;\n            name = name.substring(ANIMATE_PROP_PREFIX.length);\n        }\n        else if (isAnimationLabel(name)) {\n            isAnimationProp = true;\n            name = name.substring(1);\n        }\n        if (isAnimationProp) {\n            this._parseAnimation(name, expression, sourceSpan, targetMatchableAttrs, targetProps);\n        }\n        else {\n            this._parsePropertyAst(name, this._parseBinding(expression, isHost, sourceSpan), sourceSpan, targetMatchableAttrs, targetProps);\n        }\n    };\n    BindingParser.prototype.parsePropertyInterpolation = function (name, value, sourceSpan, targetMatchableAttrs, targetProps) {\n        var expr = this.parseInterpolation(value, sourceSpan);\n        if (expr) {\n            this._parsePropertyAst(name, expr, sourceSpan, targetMatchableAttrs, targetProps);\n            return true;\n        }\n        return false;\n    };\n    BindingParser.prototype._parsePropertyAst = function (name, ast, sourceSpan, targetMatchableAttrs, targetProps) {\n        targetMatchableAttrs.push([name, ast.source]);\n        targetProps.push(new ParsedProperty(name, ast, ParsedPropertyType.DEFAULT, sourceSpan));\n    };\n    BindingParser.prototype._parseAnimation = function (name, expression, sourceSpan, targetMatchableAttrs, targetProps) {\n        // This will occur when a @trigger is not paired with an expression.\n        // For animations it is valid to not have an expression since */void\n        // states will be applied by angular when the element is attached/detached\n        var ast = this._parseBinding(expression || 'undefined', false, sourceSpan);\n        targetMatchableAttrs.push([name, ast.source]);\n        targetProps.push(new ParsedProperty(name, ast, ParsedPropertyType.ANIMATION, sourceSpan));\n    };\n    BindingParser.prototype._parseBinding = function (value, isHostBinding, sourceSpan) {\n        var sourceInfo = sourceSpan.start.toString();\n        try {\n            var ast = isHostBinding ?\n                this._exprParser.parseSimpleBinding(value, sourceInfo, this._interpolationConfig) :\n                this._exprParser.parseBinding(value, sourceInfo, this._interpolationConfig);\n            if (ast)\n                this._reportExpressionParserErrors(ast.errors, sourceSpan);\n            this._checkPipes(ast, sourceSpan);\n            return ast;\n        }\n        catch (e) {\n            this._reportError(\"\" + e, sourceSpan);\n            return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);\n        }\n    };\n    BindingParser.prototype.createBoundElementProperty = function (elementSelector, boundProp) {\n        if (boundProp.isAnimation) {\n            return new BoundElementProperty(boundProp.name, 4 /* Animation */, SecurityContext.NONE, boundProp.expression, null, boundProp.sourceSpan);\n        }\n        var unit = null;\n        var bindingType = undefined;\n        var boundPropertyName = null;\n        var parts = boundProp.name.split(PROPERTY_PARTS_SEPARATOR);\n        var securityContexts = undefined;\n        // Check check for special cases (prefix style, attr, class)\n        if (parts.length > 1) {\n            if (parts[0] == ATTRIBUTE_PREFIX) {\n                boundPropertyName = parts[1];\n                this._validatePropertyOrAttributeName(boundPropertyName, boundProp.sourceSpan, true);\n                securityContexts = calcPossibleSecurityContexts(this._schemaRegistry, elementSelector, boundPropertyName, true);\n                var nsSeparatorIdx = boundPropertyName.indexOf(':');\n                if (nsSeparatorIdx > -1) {\n                    var ns = boundPropertyName.substring(0, nsSeparatorIdx);\n                    var name_1 = boundPropertyName.substring(nsSeparatorIdx + 1);\n                    boundPropertyName = mergeNsAndName(ns, name_1);\n                }\n                bindingType = 1 /* Attribute */;\n            }\n            else if (parts[0] == CLASS_PREFIX) {\n                boundPropertyName = parts[1];\n                bindingType = 2 /* Class */;\n                securityContexts = [SecurityContext.NONE];\n            }\n            else if (parts[0] == STYLE_PREFIX) {\n                unit = parts.length > 2 ? parts[2] : null;\n                boundPropertyName = parts[1];\n                bindingType = 3 /* Style */;\n                securityContexts = [SecurityContext.STYLE];\n            }\n        }\n        // If not a special case, use the full property name\n        if (boundPropertyName === null) {\n            boundPropertyName = this._schemaRegistry.getMappedPropName(boundProp.name);\n            securityContexts = calcPossibleSecurityContexts(this._schemaRegistry, elementSelector, boundPropertyName, false);\n            bindingType = 0 /* Property */;\n            this._validatePropertyOrAttributeName(boundPropertyName, boundProp.sourceSpan, false);\n        }\n        return new BoundElementProperty(boundPropertyName, bindingType, securityContexts[0], boundProp.expression, unit, boundProp.sourceSpan);\n    };\n    BindingParser.prototype.parseEvent = function (name, expression, sourceSpan, targetMatchableAttrs, targetEvents) {\n        if (isAnimationLabel(name)) {\n            name = name.substr(1);\n            this._parseAnimationEvent(name, expression, sourceSpan, targetEvents);\n        }\n        else {\n            this._parseRegularEvent(name, expression, sourceSpan, targetMatchableAttrs, targetEvents);\n        }\n    };\n    BindingParser.prototype._parseAnimationEvent = function (name, expression, sourceSpan, targetEvents) {\n        var matches = splitAtPeriod(name, [name, '']);\n        var eventName = matches[0];\n        var phase = matches[1].toLowerCase();\n        if (phase) {\n            switch (phase) {\n                case 'start':\n                case 'done':\n                    var ast = this._parseAction(expression, sourceSpan);\n                    targetEvents.push(new ParsedEvent(eventName, phase, 1 /* Animation */, ast, sourceSpan));\n                    break;\n                default:\n                    this._reportError(\"The provided animation output phase value \\\"\" + phase + \"\\\" for \\\"@\" + eventName + \"\\\" is not supported (use start or done)\", sourceSpan);\n                    break;\n            }\n        }\n        else {\n            this._reportError(\"The animation trigger output event (@\" + eventName + \") is missing its phase value name (start or done are currently supported)\", sourceSpan);\n        }\n    };\n    BindingParser.prototype._parseRegularEvent = function (name, expression, sourceSpan, targetMatchableAttrs, targetEvents) {\n        // long format: 'target: eventName'\n        var _a = __read(splitAtColon(name, [null, name]), 2), target = _a[0], eventName = _a[1];\n        var ast = this._parseAction(expression, sourceSpan);\n        targetMatchableAttrs.push([name, ast.source]);\n        targetEvents.push(new ParsedEvent(eventName, target, 0 /* Regular */, ast, sourceSpan));\n        // Don't detect directives for event names for now,\n        // so don't add the event name to the matchableAttrs\n    };\n    BindingParser.prototype._parseAction = function (value, sourceSpan) {\n        var sourceInfo = sourceSpan.start.toString();\n        try {\n            var ast = this._exprParser.parseAction(value, sourceInfo, this._interpolationConfig);\n            if (ast) {\n                this._reportExpressionParserErrors(ast.errors, sourceSpan);\n            }\n            if (!ast || ast.ast instanceof EmptyExpr) {\n                this._reportError(\"Empty expressions are not allowed\", sourceSpan);\n                return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);\n            }\n            this._checkPipes(ast, sourceSpan);\n            return ast;\n        }\n        catch (e) {\n            this._reportError(\"\" + e, sourceSpan);\n            return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);\n        }\n    };\n    BindingParser.prototype._reportError = function (message, sourceSpan, level) {\n        if (level === void 0) { level = ParseErrorLevel.ERROR; }\n        this.errors.push(new ParseError(sourceSpan, message, level));\n    };\n    BindingParser.prototype._reportExpressionParserErrors = function (errors, sourceSpan) {\n        try {\n            for (var errors_1 = __values(errors), errors_1_1 = errors_1.next(); !errors_1_1.done; errors_1_1 = errors_1.next()) {\n                var error$$1 = errors_1_1.value;\n                this._reportError(error$$1.message, sourceSpan);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (errors_1_1 && !errors_1_1.done && (_a = errors_1.return)) _a.call(errors_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var e_1, _a;\n    };\n    // Make sure all the used pipes are known in `this.pipesByName`\n    BindingParser.prototype._checkPipes = function (ast, sourceSpan) {\n        var _this = this;\n        if (ast && this.pipesByName) {\n            var collector = new PipeCollector();\n            ast.visit(collector);\n            collector.pipes.forEach(function (ast, pipeName) {\n                var pipeMeta = _this.pipesByName.get(pipeName);\n                if (!pipeMeta) {\n                    _this._reportError(\"The pipe '\" + pipeName + \"' could not be found\", new ParseSourceSpan(sourceSpan.start.moveBy(ast.span.start), sourceSpan.start.moveBy(ast.span.end)));\n                }\n                else {\n                    _this._usedPipes.set(pipeName, pipeMeta);\n                }\n            });\n        }\n    };\n    /**\n     * @param propName the name of the property / attribute\n     * @param sourceSpan\n     * @param isAttr true when binding to an attribute\n     */\n    BindingParser.prototype._validatePropertyOrAttributeName = function (propName, sourceSpan, isAttr) {\n        var report = isAttr ? this._schemaRegistry.validateAttribute(propName) :\n            this._schemaRegistry.validateProperty(propName);\n        if (report.error) {\n            this._reportError(report.msg, sourceSpan, ParseErrorLevel.ERROR);\n        }\n    };\n    return BindingParser;\n}());\nvar PipeCollector = /** @class */ (function (_super) {\n    __extends(PipeCollector, _super);\n    function PipeCollector() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.pipes = new Map();\n        return _this;\n    }\n    PipeCollector.prototype.visitPipe = function (ast, context) {\n        this.pipes.set(ast.name, ast);\n        ast.exp.visit(this);\n        this.visitAll(ast.args, context);\n        return null;\n    };\n    return PipeCollector;\n}(RecursiveAstVisitor));\nfunction isAnimationLabel(name) {\n    return name[0] == '@';\n}\nfunction calcPossibleSecurityContexts(registry, selector, propName, isAttribute) {\n    var ctxs = [];\n    CssSelector.parse(selector).forEach(function (selector) {\n        var elementNames = selector.element ? [selector.element] : registry.allKnownElementNames();\n        var notElementNames = new Set(selector.notSelectors.filter(function (selector) { return selector.isElementSelector(); })\n            .map(function (selector) { return selector.element; }));\n        var possibleElementNames = elementNames.filter(function (elementName) { return !notElementNames.has(elementName); });\n        ctxs.push.apply(ctxs, __spread(possibleElementNames.map(function (elementName) { return registry.securityContext(elementName, propName, isAttribute); })));\n    });\n    return ctxs.length === 0 ? [SecurityContext.NONE] : Array.from(new Set(ctxs)).sort();\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar BIND_NAME_REGEXP = /^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.+))|\\[\\(([^\\)]+)\\)\\]|\\[([^\\]]+)\\]|\\(([^\\)]+)\\))$/;\n// Group 1 = \"bind-\"\nvar KW_BIND_IDX = 1;\n// Group 2 = \"let-\"\nvar KW_LET_IDX = 2;\n// Group 3 = \"ref-/#\"\nvar KW_REF_IDX = 3;\n// Group 4 = \"on-\"\nvar KW_ON_IDX = 4;\n// Group 5 = \"bindon-\"\nvar KW_BINDON_IDX = 5;\n// Group 6 = \"@\"\nvar KW_AT_IDX = 6;\n// Group 7 = the identifier after \"bind-\", \"let-\", \"ref-/#\", \"on-\", \"bindon-\" or \"@\"\nvar IDENT_KW_IDX = 7;\n// Group 8 = identifier inside [()]\nvar IDENT_BANANA_BOX_IDX = 8;\n// Group 9 = identifier inside []\nvar IDENT_PROPERTY_IDX = 9;\n// Group 10 = identifier inside ()\nvar IDENT_EVENT_IDX = 10;\nvar TEMPLATE_ATTR_PREFIX = '*';\nvar CLASS_ATTR = 'class';\nvar TEXT_CSS_SELECTOR = CssSelector.parse('*')[0];\nvar TemplateParseError = /** @class */ (function (_super) {\n    __extends(TemplateParseError, _super);\n    function TemplateParseError(message, span, level) {\n        return _super.call(this, span, message, level) || this;\n    }\n    return TemplateParseError;\n}(ParseError));\nvar TemplateParseResult = /** @class */ (function () {\n    function TemplateParseResult(templateAst, usedPipes, errors) {\n        this.templateAst = templateAst;\n        this.usedPipes = usedPipes;\n        this.errors = errors;\n    }\n    return TemplateParseResult;\n}());\nvar TemplateParser = /** @class */ (function () {\n    function TemplateParser(_config, _reflector, _exprParser, _schemaRegistry, _htmlParser, _console, transforms) {\n        this._config = _config;\n        this._reflector = _reflector;\n        this._exprParser = _exprParser;\n        this._schemaRegistry = _schemaRegistry;\n        this._htmlParser = _htmlParser;\n        this._console = _console;\n        this.transforms = transforms;\n    }\n    Object.defineProperty(TemplateParser.prototype, \"expressionParser\", {\n        get: function () { return this._exprParser; },\n        enumerable: true,\n        configurable: true\n    });\n    TemplateParser.prototype.parse = function (component, template, directives, pipes, schemas, templateUrl, preserveWhitespaces) {\n        var result = this.tryParse(component, template, directives, pipes, schemas, templateUrl, preserveWhitespaces);\n        var warnings = result.errors.filter(function (error$$1) { return error$$1.level === ParseErrorLevel.WARNING; });\n        var errors = result.errors.filter(function (error$$1) { return error$$1.level === ParseErrorLevel.ERROR; });\n        if (warnings.length > 0) {\n            this._console.warn(\"Template parse warnings:\\n\" + warnings.join('\\n'));\n        }\n        if (errors.length > 0) {\n            var errorString = errors.join('\\n');\n            throw syntaxError(\"Template parse errors:\\n\" + errorString, errors);\n        }\n        return { template: result.templateAst, pipes: result.usedPipes };\n    };\n    TemplateParser.prototype.tryParse = function (component, template, directives, pipes, schemas, templateUrl, preserveWhitespaces) {\n        var htmlParseResult = typeof template === 'string' ?\n            this._htmlParser.parse(template, templateUrl, true, this.getInterpolationConfig(component)) :\n            template;\n        if (!preserveWhitespaces) {\n            htmlParseResult = removeWhitespaces(htmlParseResult);\n        }\n        return this.tryParseHtml(this.expandHtml(htmlParseResult), component, directives, pipes, schemas);\n    };\n    TemplateParser.prototype.tryParseHtml = function (htmlAstWithErrors, component, directives, pipes, schemas) {\n        var result;\n        var errors = htmlAstWithErrors.errors;\n        var usedPipes = [];\n        if (htmlAstWithErrors.rootNodes.length > 0) {\n            var uniqDirectives = removeSummaryDuplicates(directives);\n            var uniqPipes = removeSummaryDuplicates(pipes);\n            var providerViewContext = new ProviderViewContext(this._reflector, component);\n            var interpolationConfig = undefined;\n            if (component.template && component.template.interpolation) {\n                interpolationConfig = {\n                    start: component.template.interpolation[0],\n                    end: component.template.interpolation[1]\n                };\n            }\n            var bindingParser = new BindingParser(this._exprParser, interpolationConfig, this._schemaRegistry, uniqPipes, errors);\n            var parseVisitor = new TemplateParseVisitor(this._reflector, this._config, providerViewContext, uniqDirectives, bindingParser, this._schemaRegistry, schemas, errors);\n            result = visitAll(parseVisitor, htmlAstWithErrors.rootNodes, EMPTY_ELEMENT_CONTEXT);\n            errors.push.apply(errors, __spread(providerViewContext.errors));\n            usedPipes.push.apply(usedPipes, __spread(bindingParser.getUsedPipes()));\n        }\n        else {\n            result = [];\n        }\n        this._assertNoReferenceDuplicationOnTemplate(result, errors);\n        if (errors.length > 0) {\n            return new TemplateParseResult(result, usedPipes, errors);\n        }\n        if (this.transforms) {\n            this.transforms.forEach(function (transform) { result = templateVisitAll(transform, result); });\n        }\n        return new TemplateParseResult(result, usedPipes, errors);\n    };\n    TemplateParser.prototype.expandHtml = function (htmlAstWithErrors, forced) {\n        if (forced === void 0) { forced = false; }\n        var errors = htmlAstWithErrors.errors;\n        if (errors.length == 0 || forced) {\n            // Transform ICU messages to angular directives\n            var expandedHtmlAst = expandNodes(htmlAstWithErrors.rootNodes);\n            errors.push.apply(errors, __spread(expandedHtmlAst.errors));\n            htmlAstWithErrors = new ParseTreeResult(expandedHtmlAst.nodes, errors);\n        }\n        return htmlAstWithErrors;\n    };\n    TemplateParser.prototype.getInterpolationConfig = function (component) {\n        if (component.template) {\n            return InterpolationConfig.fromArray(component.template.interpolation);\n        }\n        return undefined;\n    };\n    /** @internal */\n    TemplateParser.prototype._assertNoReferenceDuplicationOnTemplate = function (result, errors) {\n        var existingReferences = [];\n        result.filter(function (element) { return !!element.references; })\n            .forEach(function (element) { return element.references.forEach(function (reference) {\n            var name = reference.name;\n            if (existingReferences.indexOf(name) < 0) {\n                existingReferences.push(name);\n            }\n            else {\n                var error$$1 = new TemplateParseError(\"Reference \\\"#\" + name + \"\\\" is defined several times\", reference.sourceSpan, ParseErrorLevel.ERROR);\n                errors.push(error$$1);\n            }\n        }); });\n    };\n    return TemplateParser;\n}());\nvar TemplateParseVisitor = /** @class */ (function () {\n    function TemplateParseVisitor(reflector, config, providerViewContext, directives, _bindingParser, _schemaRegistry, _schemas, _targetErrors) {\n        var _this = this;\n        this.reflector = reflector;\n        this.config = config;\n        this.providerViewContext = providerViewContext;\n        this._bindingParser = _bindingParser;\n        this._schemaRegistry = _schemaRegistry;\n        this._schemas = _schemas;\n        this._targetErrors = _targetErrors;\n        this.selectorMatcher = new SelectorMatcher();\n        this.directivesIndex = new Map();\n        this.ngContentCount = 0;\n        // Note: queries start with id 1 so we can use the number in a Bloom filter!\n        this.contentQueryStartId = providerViewContext.component.viewQueries.length + 1;\n        directives.forEach(function (directive, index) {\n            var selector = CssSelector.parse(directive.selector);\n            _this.selectorMatcher.addSelectables(selector, directive);\n            _this.directivesIndex.set(directive, index);\n        });\n    }\n    TemplateParseVisitor.prototype.visitExpansion = function (expansion, context) { return null; };\n    TemplateParseVisitor.prototype.visitExpansionCase = function (expansionCase, context) { return null; };\n    TemplateParseVisitor.prototype.visitText = function (text, parent) {\n        var ngContentIndex = parent.findNgContentIndex(TEXT_CSS_SELECTOR);\n        var valueNoNgsp = replaceNgsp(text.value);\n        var expr = this._bindingParser.parseInterpolation(valueNoNgsp, text.sourceSpan);\n        return expr ? new BoundTextAst(expr, ngContentIndex, text.sourceSpan) :\n            new TextAst(valueNoNgsp, ngContentIndex, text.sourceSpan);\n    };\n    TemplateParseVisitor.prototype.visitAttribute = function (attribute, context) {\n        return new AttrAst(attribute.name, attribute.value, attribute.sourceSpan);\n    };\n    TemplateParseVisitor.prototype.visitComment = function (comment, context) { return null; };\n    TemplateParseVisitor.prototype.visitElement = function (element, parent) {\n        var _this = this;\n        var queryStartIndex = this.contentQueryStartId;\n        var elName = element.name;\n        var preparsedElement = preparseElement(element);\n        if (preparsedElement.type === PreparsedElementType.SCRIPT ||\n            preparsedElement.type === PreparsedElementType.STYLE) {\n            // Skipping <script> for security reasons\n            // Skipping <style> as we already processed them\n            // in the StyleCompiler\n            return null;\n        }\n        if (preparsedElement.type === PreparsedElementType.STYLESHEET &&\n            isStyleUrlResolvable(preparsedElement.hrefAttr)) {\n            // Skipping stylesheets with either relative urls or package scheme as we already processed\n            // them in the StyleCompiler\n            return null;\n        }\n        var matchableAttrs = [];\n        var elementOrDirectiveProps = [];\n        var elementOrDirectiveRefs = [];\n        var elementVars = [];\n        var events = [];\n        var templateElementOrDirectiveProps = [];\n        var templateMatchableAttrs = [];\n        var templateElementVars = [];\n        var hasInlineTemplates = false;\n        var attrs = [];\n        var isTemplateElement = isNgTemplate(element.name);\n        element.attrs.forEach(function (attr) {\n            var parsedVariables = [];\n            var hasBinding = _this._parseAttr(isTemplateElement, attr, matchableAttrs, elementOrDirectiveProps, events, elementOrDirectiveRefs, elementVars);\n            elementVars.push.apply(elementVars, __spread(parsedVariables.map(function (v) { return VariableAst.fromParsedVariable(v); })));\n            var templateValue;\n            var templateKey;\n            var normalizedName = _this._normalizeAttributeName(attr.name);\n            if (normalizedName.startsWith(TEMPLATE_ATTR_PREFIX)) {\n                templateValue = attr.value;\n                templateKey = normalizedName.substring(TEMPLATE_ATTR_PREFIX.length);\n            }\n            var hasTemplateBinding = templateValue != null;\n            if (hasTemplateBinding) {\n                if (hasInlineTemplates) {\n                    _this._reportError(\"Can't have multiple template bindings on one element. Use only one attribute prefixed with *\", attr.sourceSpan);\n                }\n                hasInlineTemplates = true;\n                var parsedVariables_1 = [];\n                _this._bindingParser.parseInlineTemplateBinding(templateKey, templateValue, attr.sourceSpan, templateMatchableAttrs, templateElementOrDirectiveProps, parsedVariables_1);\n                templateElementVars.push.apply(templateElementVars, __spread(parsedVariables_1.map(function (v) { return VariableAst.fromParsedVariable(v); })));\n            }\n            if (!hasBinding && !hasTemplateBinding) {\n                // don't include the bindings as attributes as well in the AST\n                attrs.push(_this.visitAttribute(attr, null));\n                matchableAttrs.push([attr.name, attr.value]);\n            }\n        });\n        var elementCssSelector = createElementCssSelector(elName, matchableAttrs);\n        var _a = this._parseDirectives(this.selectorMatcher, elementCssSelector), directiveMetas = _a.directives, matchElement = _a.matchElement;\n        var references = [];\n        var boundDirectivePropNames = new Set();\n        var directiveAsts = this._createDirectiveAsts(isTemplateElement, element.name, directiveMetas, elementOrDirectiveProps, elementOrDirectiveRefs, element.sourceSpan, references, boundDirectivePropNames);\n        var elementProps = this._createElementPropertyAsts(element.name, elementOrDirectiveProps, boundDirectivePropNames);\n        var isViewRoot = parent.isTemplateElement || hasInlineTemplates;\n        var providerContext = new ProviderElementContext(this.providerViewContext, parent.providerContext, isViewRoot, directiveAsts, attrs, references, isTemplateElement, queryStartIndex, element.sourceSpan);\n        var children = visitAll(preparsedElement.nonBindable ? NON_BINDABLE_VISITOR : this, element.children, ElementContext.create(isTemplateElement, directiveAsts, isTemplateElement ? parent.providerContext : providerContext));\n        providerContext.afterElement();\n        // Override the actual selector when the `ngProjectAs` attribute is provided\n        var projectionSelector = preparsedElement.projectAs != '' ?\n            CssSelector.parse(preparsedElement.projectAs)[0] :\n            elementCssSelector;\n        var ngContentIndex = parent.findNgContentIndex(projectionSelector);\n        var parsedElement;\n        if (preparsedElement.type === PreparsedElementType.NG_CONTENT) {\n            // `<ng-content>` element\n            if (element.children && !element.children.every(_isEmptyTextNode)) {\n                this._reportError(\"<ng-content> element cannot have content.\", element.sourceSpan);\n            }\n            parsedElement = new NgContentAst(this.ngContentCount++, hasInlineTemplates ? null : ngContentIndex, element.sourceSpan);\n        }\n        else if (isTemplateElement) {\n            // `<ng-template>` element\n            this._assertAllEventsPublishedByDirectives(directiveAsts, events);\n            this._assertNoComponentsNorElementBindingsOnTemplate(directiveAsts, elementProps, element.sourceSpan);\n            parsedElement = new EmbeddedTemplateAst(attrs, events, references, elementVars, providerContext.transformedDirectiveAsts, providerContext.transformProviders, providerContext.transformedHasViewContainer, providerContext.queryMatches, children, hasInlineTemplates ? null : ngContentIndex, element.sourceSpan);\n        }\n        else {\n            // element other than `<ng-content>` and `<ng-template>`\n            this._assertElementExists(matchElement, element);\n            this._assertOnlyOneComponent(directiveAsts, element.sourceSpan);\n            var ngContentIndex_1 = hasInlineTemplates ? null : parent.findNgContentIndex(projectionSelector);\n            parsedElement = new ElementAst(elName, attrs, elementProps, events, references, providerContext.transformedDirectiveAsts, providerContext.transformProviders, providerContext.transformedHasViewContainer, providerContext.queryMatches, children, hasInlineTemplates ? null : ngContentIndex_1, element.sourceSpan, element.endSourceSpan || null);\n        }\n        if (hasInlineTemplates) {\n            // The element as a *-attribute\n            var templateQueryStartIndex = this.contentQueryStartId;\n            var templateSelector = createElementCssSelector('ng-template', templateMatchableAttrs);\n            var directives = this._parseDirectives(this.selectorMatcher, templateSelector).directives;\n            var templateBoundDirectivePropNames = new Set();\n            var templateDirectiveAsts = this._createDirectiveAsts(true, elName, directives, templateElementOrDirectiveProps, [], element.sourceSpan, [], templateBoundDirectivePropNames);\n            var templateElementProps = this._createElementPropertyAsts(elName, templateElementOrDirectiveProps, templateBoundDirectivePropNames);\n            this._assertNoComponentsNorElementBindingsOnTemplate(templateDirectiveAsts, templateElementProps, element.sourceSpan);\n            var templateProviderContext = new ProviderElementContext(this.providerViewContext, parent.providerContext, parent.isTemplateElement, templateDirectiveAsts, [], [], true, templateQueryStartIndex, element.sourceSpan);\n            templateProviderContext.afterElement();\n            parsedElement = new EmbeddedTemplateAst([], [], [], templateElementVars, templateProviderContext.transformedDirectiveAsts, templateProviderContext.transformProviders, templateProviderContext.transformedHasViewContainer, templateProviderContext.queryMatches, [parsedElement], ngContentIndex, element.sourceSpan);\n        }\n        return parsedElement;\n    };\n    TemplateParseVisitor.prototype._parseAttr = function (isTemplateElement, attr, targetMatchableAttrs, targetProps, targetEvents, targetRefs, targetVars) {\n        var name = this._normalizeAttributeName(attr.name);\n        var value = attr.value;\n        var srcSpan = attr.sourceSpan;\n        var boundEvents = [];\n        var bindParts = name.match(BIND_NAME_REGEXP);\n        var hasBinding = false;\n        if (bindParts !== null) {\n            hasBinding = true;\n            if (bindParts[KW_BIND_IDX] != null) {\n                this._bindingParser.parsePropertyBinding(bindParts[IDENT_KW_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);\n            }\n            else if (bindParts[KW_LET_IDX]) {\n                if (isTemplateElement) {\n                    var identifier = bindParts[IDENT_KW_IDX];\n                    this._parseVariable(identifier, value, srcSpan, targetVars);\n                }\n                else {\n                    this._reportError(\"\\\"let-\\\" is only supported on ng-template elements.\", srcSpan);\n                }\n            }\n            else if (bindParts[KW_REF_IDX]) {\n                var identifier = bindParts[IDENT_KW_IDX];\n                this._parseReference(identifier, value, srcSpan, targetRefs);\n            }\n            else if (bindParts[KW_ON_IDX]) {\n                this._bindingParser.parseEvent(bindParts[IDENT_KW_IDX], value, srcSpan, targetMatchableAttrs, boundEvents);\n            }\n            else if (bindParts[KW_BINDON_IDX]) {\n                this._bindingParser.parsePropertyBinding(bindParts[IDENT_KW_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);\n                this._parseAssignmentEvent(bindParts[IDENT_KW_IDX], value, srcSpan, targetMatchableAttrs, boundEvents);\n            }\n            else if (bindParts[KW_AT_IDX]) {\n                this._bindingParser.parseLiteralAttr(name, value, srcSpan, targetMatchableAttrs, targetProps);\n            }\n            else if (bindParts[IDENT_BANANA_BOX_IDX]) {\n                this._bindingParser.parsePropertyBinding(bindParts[IDENT_BANANA_BOX_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);\n                this._parseAssignmentEvent(bindParts[IDENT_BANANA_BOX_IDX], value, srcSpan, targetMatchableAttrs, boundEvents);\n            }\n            else if (bindParts[IDENT_PROPERTY_IDX]) {\n                this._bindingParser.parsePropertyBinding(bindParts[IDENT_PROPERTY_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);\n            }\n            else if (bindParts[IDENT_EVENT_IDX]) {\n                this._bindingParser.parseEvent(bindParts[IDENT_EVENT_IDX], value, srcSpan, targetMatchableAttrs, boundEvents);\n            }\n        }\n        else {\n            hasBinding = this._bindingParser.parsePropertyInterpolation(name, value, srcSpan, targetMatchableAttrs, targetProps);\n        }\n        if (!hasBinding) {\n            this._bindingParser.parseLiteralAttr(name, value, srcSpan, targetMatchableAttrs, targetProps);\n        }\n        targetEvents.push.apply(targetEvents, __spread(boundEvents.map(function (e) { return BoundEventAst.fromParsedEvent(e); })));\n        return hasBinding;\n    };\n    TemplateParseVisitor.prototype._normalizeAttributeName = function (attrName) {\n        return /^data-/i.test(attrName) ? attrName.substring(5) : attrName;\n    };\n    TemplateParseVisitor.prototype._parseVariable = function (identifier, value, sourceSpan, targetVars) {\n        if (identifier.indexOf('-') > -1) {\n            this._reportError(\"\\\"-\\\" is not allowed in variable names\", sourceSpan);\n        }\n        targetVars.push(new VariableAst(identifier, value, sourceSpan));\n    };\n    TemplateParseVisitor.prototype._parseReference = function (identifier, value, sourceSpan, targetRefs) {\n        if (identifier.indexOf('-') > -1) {\n            this._reportError(\"\\\"-\\\" is not allowed in reference names\", sourceSpan);\n        }\n        targetRefs.push(new ElementOrDirectiveRef(identifier, value, sourceSpan));\n    };\n    TemplateParseVisitor.prototype._parseAssignmentEvent = function (name, expression, sourceSpan, targetMatchableAttrs, targetEvents) {\n        this._bindingParser.parseEvent(name + \"Change\", expression + \"=$event\", sourceSpan, targetMatchableAttrs, targetEvents);\n    };\n    TemplateParseVisitor.prototype._parseDirectives = function (selectorMatcher, elementCssSelector) {\n        var _this = this;\n        // Need to sort the directives so that we get consistent results throughout,\n        // as selectorMatcher uses Maps inside.\n        // Also deduplicate directives as they might match more than one time!\n        var directives = new Array(this.directivesIndex.size);\n        // Whether any directive selector matches on the element name\n        var matchElement = false;\n        selectorMatcher.match(elementCssSelector, function (selector, directive) {\n            directives[_this.directivesIndex.get(directive)] = directive;\n            matchElement = matchElement || selector.hasElementSelector();\n        });\n        return {\n            directives: directives.filter(function (dir) { return !!dir; }),\n            matchElement: matchElement,\n        };\n    };\n    TemplateParseVisitor.prototype._createDirectiveAsts = function (isTemplateElement, elementName, directives, props, elementOrDirectiveRefs, elementSourceSpan, targetReferences, targetBoundDirectivePropNames) {\n        var _this = this;\n        var matchedReferences = new Set();\n        var component = null;\n        var directiveAsts = directives.map(function (directive) {\n            var sourceSpan = new ParseSourceSpan(elementSourceSpan.start, elementSourceSpan.end, \"Directive \" + identifierName(directive.type));\n            if (directive.isComponent) {\n                component = directive;\n            }\n            var directiveProperties = [];\n            var boundProperties = _this._bindingParser.createDirectiveHostPropertyAsts(directive, elementName, sourceSpan);\n            var hostProperties = boundProperties.map(function (prop) { return BoundElementPropertyAst.fromBoundProperty(prop); });\n            // Note: We need to check the host properties here as well,\n            // as we don't know the element name in the DirectiveWrapperCompiler yet.\n            hostProperties = _this._checkPropertiesInSchema(elementName, hostProperties);\n            var parsedEvents = _this._bindingParser.createDirectiveHostEventAsts(directive, sourceSpan);\n            _this._createDirectivePropertyAsts(directive.inputs, props, directiveProperties, targetBoundDirectivePropNames);\n            elementOrDirectiveRefs.forEach(function (elOrDirRef) {\n                if ((elOrDirRef.value.length === 0 && directive.isComponent) ||\n                    (elOrDirRef.isReferenceToDirective(directive))) {\n                    targetReferences.push(new ReferenceAst(elOrDirRef.name, createTokenForReference(directive.type.reference), elOrDirRef.value, elOrDirRef.sourceSpan));\n                    matchedReferences.add(elOrDirRef.name);\n                }\n            });\n            var hostEvents = parsedEvents.map(function (e) { return BoundEventAst.fromParsedEvent(e); });\n            var contentQueryStartId = _this.contentQueryStartId;\n            _this.contentQueryStartId += directive.queries.length;\n            return new DirectiveAst(directive, directiveProperties, hostProperties, hostEvents, contentQueryStartId, sourceSpan);\n        });\n        elementOrDirectiveRefs.forEach(function (elOrDirRef) {\n            if (elOrDirRef.value.length > 0) {\n                if (!matchedReferences.has(elOrDirRef.name)) {\n                    _this._reportError(\"There is no directive with \\\"exportAs\\\" set to \\\"\" + elOrDirRef.value + \"\\\"\", elOrDirRef.sourceSpan);\n                }\n            }\n            else if (!component) {\n                var refToken = null;\n                if (isTemplateElement) {\n                    refToken = createTokenForExternalReference(_this.reflector, Identifiers.TemplateRef);\n                }\n                targetReferences.push(new ReferenceAst(elOrDirRef.name, refToken, elOrDirRef.value, elOrDirRef.sourceSpan));\n            }\n        });\n        return directiveAsts;\n    };\n    TemplateParseVisitor.prototype._createDirectivePropertyAsts = function (directiveProperties, boundProps, targetBoundDirectiveProps, targetBoundDirectivePropNames) {\n        if (directiveProperties) {\n            var boundPropsByName_1 = new Map();\n            boundProps.forEach(function (boundProp) {\n                var prevValue = boundPropsByName_1.get(boundProp.name);\n                if (!prevValue || prevValue.isLiteral) {\n                    // give [a]=\"b\" a higher precedence than a=\"b\" on the same element\n                    boundPropsByName_1.set(boundProp.name, boundProp);\n                }\n            });\n            Object.keys(directiveProperties).forEach(function (dirProp) {\n                var elProp = directiveProperties[dirProp];\n                var boundProp = boundPropsByName_1.get(elProp);\n                // Bindings are optional, so this binding only needs to be set up if an expression is given.\n                if (boundProp) {\n                    targetBoundDirectivePropNames.add(boundProp.name);\n                    if (!isEmptyExpression(boundProp.expression)) {\n                        targetBoundDirectiveProps.push(new BoundDirectivePropertyAst(dirProp, boundProp.name, boundProp.expression, boundProp.sourceSpan));\n                    }\n                }\n            });\n        }\n    };\n    TemplateParseVisitor.prototype._createElementPropertyAsts = function (elementName, props, boundDirectivePropNames) {\n        var _this = this;\n        var boundElementProps = [];\n        props.forEach(function (prop) {\n            if (!prop.isLiteral && !boundDirectivePropNames.has(prop.name)) {\n                var boundProp = _this._bindingParser.createBoundElementProperty(elementName, prop);\n                boundElementProps.push(BoundElementPropertyAst.fromBoundProperty(boundProp));\n            }\n        });\n        return this._checkPropertiesInSchema(elementName, boundElementProps);\n    };\n    TemplateParseVisitor.prototype._findComponentDirectives = function (directives) {\n        return directives.filter(function (directive) { return directive.directive.isComponent; });\n    };\n    TemplateParseVisitor.prototype._findComponentDirectiveNames = function (directives) {\n        return this._findComponentDirectives(directives)\n            .map(function (directive) { return identifierName(directive.directive.type); });\n    };\n    TemplateParseVisitor.prototype._assertOnlyOneComponent = function (directives, sourceSpan) {\n        var componentTypeNames = this._findComponentDirectiveNames(directives);\n        if (componentTypeNames.length > 1) {\n            this._reportError(\"More than one component matched on this element.\\n\" +\n                \"Make sure that only one component's selector can match a given element.\\n\" +\n                (\"Conflicting components: \" + componentTypeNames.join(',')), sourceSpan);\n        }\n    };\n    /**\n     * Make sure that non-angular tags conform to the schemas.\n     *\n     * Note: An element is considered an angular tag when at least one directive selector matches the\n     * tag name.\n     *\n     * @param matchElement Whether any directive has matched on the tag name\n     * @param element the html element\n     */\n    TemplateParseVisitor.prototype._assertElementExists = function (matchElement, element) {\n        var elName = element.name.replace(/^:xhtml:/, '');\n        if (!matchElement && !this._schemaRegistry.hasElement(elName, this._schemas)) {\n            var errorMsg = \"'\" + elName + \"' is not a known element:\\n\";\n            errorMsg +=\n                \"1. If '\" + elName + \"' is an Angular component, then verify that it is part of this module.\\n\";\n            if (elName.indexOf('-') > -1) {\n                errorMsg +=\n                    \"2. If '\" + elName + \"' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.\";\n            }\n            else {\n                errorMsg +=\n                    \"2. To allow any element add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.\";\n            }\n            this._reportError(errorMsg, element.sourceSpan);\n        }\n    };\n    TemplateParseVisitor.prototype._assertNoComponentsNorElementBindingsOnTemplate = function (directives, elementProps, sourceSpan) {\n        var _this = this;\n        var componentTypeNames = this._findComponentDirectiveNames(directives);\n        if (componentTypeNames.length > 0) {\n            this._reportError(\"Components on an embedded template: \" + componentTypeNames.join(','), sourceSpan);\n        }\n        elementProps.forEach(function (prop) {\n            _this._reportError(\"Property binding \" + prop.name + \" not used by any directive on an embedded template. Make sure that the property name is spelled correctly and all directives are listed in the \\\"@NgModule.declarations\\\".\", sourceSpan);\n        });\n    };\n    TemplateParseVisitor.prototype._assertAllEventsPublishedByDirectives = function (directives, events) {\n        var _this = this;\n        var allDirectiveEvents = new Set();\n        directives.forEach(function (directive) {\n            Object.keys(directive.directive.outputs).forEach(function (k) {\n                var eventName = directive.directive.outputs[k];\n                allDirectiveEvents.add(eventName);\n            });\n        });\n        events.forEach(function (event) {\n            if (event.target != null || !allDirectiveEvents.has(event.name)) {\n                _this._reportError(\"Event binding \" + event.fullName + \" not emitted by any directive on an embedded template. Make sure that the event name is spelled correctly and all directives are listed in the \\\"@NgModule.declarations\\\".\", event.sourceSpan);\n            }\n        });\n    };\n    TemplateParseVisitor.prototype._checkPropertiesInSchema = function (elementName, boundProps) {\n        var _this = this;\n        // Note: We can't filter out empty expressions before this method,\n        // as we still want to validate them!\n        return boundProps.filter(function (boundProp) {\n            if (boundProp.type === PropertyBindingType.Property &&\n                !_this._schemaRegistry.hasProperty(elementName, boundProp.name, _this._schemas)) {\n                var errorMsg = \"Can't bind to '\" + boundProp.name + \"' since it isn't a known property of '\" + elementName + \"'.\";\n                if (elementName.startsWith('ng-')) {\n                    errorMsg +=\n                        \"\\n1. If '\" + boundProp.name + \"' is an Angular directive, then add 'CommonModule' to the '@NgModule.imports' of this component.\" +\n                            \"\\n2. To allow any property add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.\";\n                }\n                else if (elementName.indexOf('-') > -1) {\n                    errorMsg +=\n                        \"\\n1. If '\" + elementName + \"' is an Angular component and it has '\" + boundProp.name + \"' input, then verify that it is part of this module.\" +\n                            (\"\\n2. If '\" + elementName + \"' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.\") +\n                            \"\\n3. To allow any property add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.\";\n                }\n                _this._reportError(errorMsg, boundProp.sourceSpan);\n            }\n            return !isEmptyExpression(boundProp.value);\n        });\n    };\n    TemplateParseVisitor.prototype._reportError = function (message, sourceSpan, level) {\n        if (level === void 0) { level = ParseErrorLevel.ERROR; }\n        this._targetErrors.push(new ParseError(sourceSpan, message, level));\n    };\n    return TemplateParseVisitor;\n}());\nvar NonBindableVisitor = /** @class */ (function () {\n    function NonBindableVisitor() {\n    }\n    NonBindableVisitor.prototype.visitElement = function (ast, parent) {\n        var preparsedElement = preparseElement(ast);\n        if (preparsedElement.type === PreparsedElementType.SCRIPT ||\n            preparsedElement.type === PreparsedElementType.STYLE ||\n            preparsedElement.type === PreparsedElementType.STYLESHEET) {\n            // Skipping <script> for security reasons\n            // Skipping <style> and stylesheets as we already processed them\n            // in the StyleCompiler\n            return null;\n        }\n        var attrNameAndValues = ast.attrs.map(function (attr) { return [attr.name, attr.value]; });\n        var selector = createElementCssSelector(ast.name, attrNameAndValues);\n        var ngContentIndex = parent.findNgContentIndex(selector);\n        var children = visitAll(this, ast.children, EMPTY_ELEMENT_CONTEXT);\n        return new ElementAst(ast.name, visitAll(this, ast.attrs), [], [], [], [], [], false, [], children, ngContentIndex, ast.sourceSpan, ast.endSourceSpan);\n    };\n    NonBindableVisitor.prototype.visitComment = function (comment, context) { return null; };\n    NonBindableVisitor.prototype.visitAttribute = function (attribute, context) {\n        return new AttrAst(attribute.name, attribute.value, attribute.sourceSpan);\n    };\n    NonBindableVisitor.prototype.visitText = function (text, parent) {\n        var ngContentIndex = parent.findNgContentIndex(TEXT_CSS_SELECTOR);\n        return new TextAst(text.value, ngContentIndex, text.sourceSpan);\n    };\n    NonBindableVisitor.prototype.visitExpansion = function (expansion, context) { return expansion; };\n    NonBindableVisitor.prototype.visitExpansionCase = function (expansionCase, context) { return expansionCase; };\n    return NonBindableVisitor;\n}());\n/**\n * A reference to an element or directive in a template. E.g., the reference in this template:\n *\n * <div #myMenu=\"coolMenu\">\n *\n * would be {name: 'myMenu', value: 'coolMenu', sourceSpan: ...}\n */\nvar ElementOrDirectiveRef = /** @class */ (function () {\n    function ElementOrDirectiveRef(name, value, sourceSpan) {\n        this.name = name;\n        this.value = value;\n        this.sourceSpan = sourceSpan;\n    }\n    /** Gets whether this is a reference to the given directive. */\n    ElementOrDirectiveRef.prototype.isReferenceToDirective = function (directive) {\n        return splitExportAs(directive.exportAs).indexOf(this.value) !== -1;\n    };\n    return ElementOrDirectiveRef;\n}());\n/** Splits a raw, potentially comma-delimited `exportAs` value into an array of names. */\nfunction splitExportAs(exportAs) {\n    return exportAs ? exportAs.split(',').map(function (e) { return e.trim(); }) : [];\n}\nfunction splitClasses(classAttrValue) {\n    return classAttrValue.trim().split(/\\s+/g);\n}\nvar ElementContext = /** @class */ (function () {\n    function ElementContext(isTemplateElement, _ngContentIndexMatcher, _wildcardNgContentIndex, providerContext) {\n        this.isTemplateElement = isTemplateElement;\n        this._ngContentIndexMatcher = _ngContentIndexMatcher;\n        this._wildcardNgContentIndex = _wildcardNgContentIndex;\n        this.providerContext = providerContext;\n    }\n    ElementContext.create = function (isTemplateElement, directives, providerContext) {\n        var matcher = new SelectorMatcher();\n        var wildcardNgContentIndex = null;\n        var component = directives.find(function (directive) { return directive.directive.isComponent; });\n        if (component) {\n            var ngContentSelectors = component.directive.template.ngContentSelectors;\n            for (var i = 0; i < ngContentSelectors.length; i++) {\n                var selector = ngContentSelectors[i];\n                if (selector === '*') {\n                    wildcardNgContentIndex = i;\n                }\n                else {\n                    matcher.addSelectables(CssSelector.parse(ngContentSelectors[i]), i);\n                }\n            }\n        }\n        return new ElementContext(isTemplateElement, matcher, wildcardNgContentIndex, providerContext);\n    };\n    ElementContext.prototype.findNgContentIndex = function (selector) {\n        var ngContentIndices = [];\n        this._ngContentIndexMatcher.match(selector, function (selector, ngContentIndex) { ngContentIndices.push(ngContentIndex); });\n        ngContentIndices.sort();\n        if (this._wildcardNgContentIndex != null) {\n            ngContentIndices.push(this._wildcardNgContentIndex);\n        }\n        return ngContentIndices.length > 0 ? ngContentIndices[0] : null;\n    };\n    return ElementContext;\n}());\nfunction createElementCssSelector(elementName, attributes) {\n    var cssSelector = new CssSelector();\n    var elNameNoNs = splitNsName(elementName)[1];\n    cssSelector.setElement(elNameNoNs);\n    for (var i = 0; i < attributes.length; i++) {\n        var attrName = attributes[i][0];\n        var attrNameNoNs = splitNsName(attrName)[1];\n        var attrValue = attributes[i][1];\n        cssSelector.addAttribute(attrNameNoNs, attrValue);\n        if (attrName.toLowerCase() == CLASS_ATTR) {\n            var classes = splitClasses(attrValue);\n            classes.forEach(function (className) { return cssSelector.addClassName(className); });\n        }\n    }\n    return cssSelector;\n}\nvar EMPTY_ELEMENT_CONTEXT = new ElementContext(true, new SelectorMatcher(), null, null);\nvar NON_BINDABLE_VISITOR = new NonBindableVisitor();\nfunction _isEmptyTextNode(node) {\n    return node instanceof Text && node.value.trim().length == 0;\n}\nfunction removeSummaryDuplicates(items) {\n    var map = new Map();\n    items.forEach(function (item) {\n        if (!map.get(item.type.reference)) {\n            map.set(item.type.reference, item);\n        }\n    });\n    return Array.from(map.values());\n}\nfunction isEmptyExpression(ast) {\n    if (ast instanceof ASTWithSource) {\n        ast = ast.ast;\n    }\n    return ast instanceof EmptyExpr;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar EventHandlerVars = /** @class */ (function () {\n    function EventHandlerVars() {\n    }\n    EventHandlerVars.event = variable('$event');\n    return EventHandlerVars;\n}());\n/**\n * Converts the given expression AST into an executable output AST, assuming the expression is\n * used in an action binding (e.g. an event handler).\n */\n\n\nvar BindingForm;\n(function (BindingForm) {\n    // The general form of binding expression, supports all expressions.\n    BindingForm[BindingForm[\"General\"] = 0] = \"General\";\n    // Try to generate a simple binding (no temporaries or statements)\n    // otherwise generate a general binding\n    BindingForm[BindingForm[\"TrySimple\"] = 1] = \"TrySimple\";\n})(BindingForm || (BindingForm = {}));\n/**\n * Converts the given expression AST into an executable output AST, assuming the expression\n * is used in property binding. The expression has to be preprocessed via\n * `convertPropertyBindingBuiltins`.\n */\n\n\nvar _Mode;\n(function (_Mode) {\n    _Mode[_Mode[\"Statement\"] = 0] = \"Statement\";\n    _Mode[_Mode[\"Expression\"] = 1] = \"Expression\";\n})(_Mode || (_Mode = {}));\nvar _BuiltinAstConverter = /** @class */ (function (_super) {\n    __extends(_BuiltinAstConverter, _super);\n    function _BuiltinAstConverter(_converterFactory) {\n        var _this = _super.call(this) || this;\n        _this._converterFactory = _converterFactory;\n        return _this;\n    }\n    _BuiltinAstConverter.prototype.visitPipe = function (ast, context) {\n        var _this = this;\n        var args = __spread([ast.exp], ast.args).map(function (ast) { return ast.visit(_this, context); });\n        return new BuiltinFunctionCall(ast.span, args, this._converterFactory.createPipeConverter(ast.name, args.length));\n    };\n    _BuiltinAstConverter.prototype.visitLiteralArray = function (ast, context) {\n        var _this = this;\n        var args = ast.expressions.map(function (ast) { return ast.visit(_this, context); });\n        return new BuiltinFunctionCall(ast.span, args, this._converterFactory.createLiteralArrayConverter(ast.expressions.length));\n    };\n    _BuiltinAstConverter.prototype.visitLiteralMap = function (ast, context) {\n        var _this = this;\n        var args = ast.values.map(function (ast) { return ast.visit(_this, context); });\n        return new BuiltinFunctionCall(ast.span, args, this._converterFactory.createLiteralMapConverter(ast.keys));\n    };\n    return _BuiltinAstConverter;\n}(AstTransformer));\nvar BuiltinFunctionCall = /** @class */ (function (_super) {\n    __extends(BuiltinFunctionCall, _super);\n    function BuiltinFunctionCall(span, args, converter) {\n        var _this = _super.call(this, span, null, args) || this;\n        _this.args = args;\n        _this.converter = converter;\n        return _this;\n    }\n    return BuiltinFunctionCall;\n}(FunctionCall));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar LOG_VAR$1 = variable('_l');\nvar VIEW_VAR = variable('_v');\nvar CHECK_VAR = variable('_ck');\nvar COMP_VAR = variable('_co');\nvar EVENT_NAME_VAR = variable('en');\nvar ALLOW_DEFAULT_VAR = variable(\"ad\");\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Context to use when producing a key.\n *\n * This ensures we see the constant not the reference variable when producing\n * a key.\n */\nvar KEY_CONTEXT = {};\n/**\n * A node that is a place-holder that allows the node to be replaced when the actual\n * node is known.\n *\n * This allows the constant pool to change an expression from a direct reference to\n * a constant to a shared constant. It returns a fix-up node that is later allowed to\n * change the referenced expression.\n */\nvar FixupExpression = /** @class */ (function (_super) {\n    __extends(FixupExpression, _super);\n    function FixupExpression(resolved) {\n        var _this = _super.call(this, resolved.type) || this;\n        _this.resolved = resolved;\n        _this.original = resolved;\n        return _this;\n    }\n    FixupExpression.prototype.visitExpression = function (visitor, context) {\n        if (context === KEY_CONTEXT) {\n            // When producing a key we want to traverse the constant not the\n            // variable used to refer to it.\n            return this.original.visitExpression(visitor, context);\n        }\n        else {\n            return this.resolved.visitExpression(visitor, context);\n        }\n    };\n    FixupExpression.prototype.isEquivalent = function (e) {\n        return e instanceof FixupExpression && this.resolved.isEquivalent(e.resolved);\n    };\n    FixupExpression.prototype.isConstant = function () { return true; };\n    FixupExpression.prototype.fixup = function (expression) {\n        this.resolved = expression;\n        this.shared = true;\n    };\n    return FixupExpression;\n}(Expression));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Transform an i18n AST by renaming the placeholder nodes with the given mapper\nvar MapPlaceholderNames = /** @class */ (function (_super) {\n    __extends(MapPlaceholderNames, _super);\n    function MapPlaceholderNames() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MapPlaceholderNames.prototype.convert = function (nodes, mapper) {\n        var _this = this;\n        return mapper ? nodes.map(function (n) { return n.visit(_this, mapper); }) : nodes;\n    };\n    MapPlaceholderNames.prototype.visitTagPlaceholder = function (ph, mapper) {\n        var _this = this;\n        var startName = mapper.toPublicName(ph.startName);\n        var closeName = ph.closeName ? mapper.toPublicName(ph.closeName) : ph.closeName;\n        var children = ph.children.map(function (n) { return n.visit(_this, mapper); });\n        return new TagPlaceholder(ph.tag, ph.attrs, startName, closeName, children, ph.isVoid, ph.sourceSpan);\n    };\n    MapPlaceholderNames.prototype.visitPlaceholder = function (ph, mapper) {\n        return new Placeholder(ph.value, mapper.toPublicName(ph.name), ph.sourceSpan);\n    };\n    MapPlaceholderNames.prototype.visitIcuPlaceholder = function (ph, mapper) {\n        return new IcuPlaceholder(ph.value, mapper.toPublicName(ph.name), ph.sourceSpan);\n    };\n    return MapPlaceholderNames;\n}(CloneVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar CORE$1 = '@angular/core';\nvar Identifiers$1 = /** @class */ (function () {\n    function Identifiers() {\n    }\n    /* Methods */\n    Identifiers.NEW_METHOD = 'factory';\n    Identifiers.TRANSFORM_METHOD = 'transform';\n    Identifiers.PATCH_DEPS = 'patchedDeps';\n    /* Instructions */\n    Identifiers.createElement = { name: 'E', moduleName: CORE$1 };\n    Identifiers.elementEnd = { name: 'e', moduleName: CORE$1 };\n    Identifiers.elementProperty = { name: 'p', moduleName: CORE$1 };\n    Identifiers.elementAttribute = { name: 'a', moduleName: CORE$1 };\n    Identifiers.elementClassNamed = { name: 'kn', moduleName: CORE$1 };\n    Identifiers.elementStyleNamed = { name: 'sn', moduleName: CORE$1 };\n    Identifiers.containerCreate = { name: 'C', moduleName: CORE$1 };\n    Identifiers.text = { name: 'T', moduleName: CORE$1 };\n    Identifiers.textBinding = { name: 't', moduleName: CORE$1 };\n    Identifiers.bind = { name: 'b', moduleName: CORE$1 };\n    Identifiers.interpolation1 = { name: 'i1', moduleName: CORE$1 };\n    Identifiers.interpolation2 = { name: 'i2', moduleName: CORE$1 };\n    Identifiers.interpolation3 = { name: 'i3', moduleName: CORE$1 };\n    Identifiers.interpolation4 = { name: 'i4', moduleName: CORE$1 };\n    Identifiers.interpolation5 = { name: 'i5', moduleName: CORE$1 };\n    Identifiers.interpolation6 = { name: 'i6', moduleName: CORE$1 };\n    Identifiers.interpolation7 = { name: 'i7', moduleName: CORE$1 };\n    Identifiers.interpolation8 = { name: 'i8', moduleName: CORE$1 };\n    Identifiers.interpolationV = { name: 'iV', moduleName: CORE$1 };\n    Identifiers.pureFunction0 = { name: 'f0', moduleName: CORE$1 };\n    Identifiers.pureFunction1 = { name: 'f1', moduleName: CORE$1 };\n    Identifiers.pureFunction2 = { name: 'f2', moduleName: CORE$1 };\n    Identifiers.pureFunction3 = { name: 'f3', moduleName: CORE$1 };\n    Identifiers.pureFunction4 = { name: 'f4', moduleName: CORE$1 };\n    Identifiers.pureFunction5 = { name: 'f5', moduleName: CORE$1 };\n    Identifiers.pureFunction6 = { name: 'f6', moduleName: CORE$1 };\n    Identifiers.pureFunction7 = { name: 'f7', moduleName: CORE$1 };\n    Identifiers.pureFunction8 = { name: 'f8', moduleName: CORE$1 };\n    Identifiers.pureFunctionV = { name: 'fV', moduleName: CORE$1 };\n    Identifiers.pipeBind1 = { name: 'pb1', moduleName: CORE$1 };\n    Identifiers.pipeBind2 = { name: 'pb2', moduleName: CORE$1 };\n    Identifiers.pipeBind3 = { name: 'pb3', moduleName: CORE$1 };\n    Identifiers.pipeBind4 = { name: 'pb4', moduleName: CORE$1 };\n    Identifiers.pipeBindV = { name: 'pbV', moduleName: CORE$1 };\n    Identifiers.load = { name: 'ld', moduleName: CORE$1 };\n    Identifiers.loadDirective = { name: 'd', moduleName: CORE$1 };\n    Identifiers.pipe = { name: 'Pp', moduleName: CORE$1 };\n    Identifiers.projection = { name: 'P', moduleName: CORE$1 };\n    Identifiers.projectionDef = { name: 'pD', moduleName: CORE$1 };\n    Identifiers.refreshComponent = { name: 'r', moduleName: CORE$1 };\n    Identifiers.directiveLifeCycle = { name: 'l', moduleName: CORE$1 };\n    Identifiers.inject = { name: 'inject', moduleName: CORE$1 };\n    Identifiers.injectAttribute = { name: 'injectAttribute', moduleName: CORE$1 };\n    Identifiers.injectElementRef = { name: 'injectElementRef', moduleName: CORE$1 };\n    Identifiers.injectTemplateRef = { name: 'injectTemplateRef', moduleName: CORE$1 };\n    Identifiers.injectViewContainerRef = { name: 'injectViewContainerRef', moduleName: CORE$1 };\n    Identifiers.directiveInject = { name: 'directiveInject', moduleName: CORE$1 };\n    Identifiers.defineComponent = { name: 'defineComponent', moduleName: CORE$1 };\n    Identifiers.ComponentDef = {\n        name: 'ComponentDef',\n        moduleName: CORE$1,\n    };\n    Identifiers.defineDirective = {\n        name: 'defineDirective',\n        moduleName: CORE$1,\n    };\n    Identifiers.DirectiveDef = {\n        name: 'DirectiveDef',\n        moduleName: CORE$1,\n    };\n    Identifiers.defineInjector = {\n        name: 'defineInjector',\n        moduleName: CORE$1,\n    };\n    Identifiers.defineNgModule = { name: 'defineNgModule', moduleName: CORE$1 };\n    Identifiers.definePipe = { name: 'definePipe', moduleName: CORE$1 };\n    Identifiers.query = { name: 'Q', moduleName: CORE$1 };\n    Identifiers.queryRefresh = { name: 'qR', moduleName: CORE$1 };\n    Identifiers.NgOnChangesFeature = { name: 'NgOnChangesFeature', moduleName: CORE$1 };\n    Identifiers.listener = { name: 'L', moduleName: CORE$1 };\n    // Reserve slots for pure functions\n    Identifiers.reserveSlots = { name: 'rS', moduleName: CORE$1 };\n    return Identifiers;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Convert an object map with `Expression` values into a `LiteralMapExpr`.\n */\n\n/**\n * Convert metadata into an `Expression` in the given `OutputContext`.\n *\n * This operation will handle arrays, references to symbols, or literal `null` or `undefined`.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Construct an `R3NgModuleDef` for the given `R3NgModuleMetadata`.\n */\n\n// TODO(alxhub): integrate this with `compileNgModule`. Currently the two are separate operations.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Name of the temporary to use during data binding */\n\n/** Name of the context parameter passed into a template function */\n\n/** Name of the RenderFlag passed into a template function */\n\n/** The prefix reference variables */\nvar REFERENCE_PREFIX = '_r';\n/** The name of the implicit context reference */\n\n/** Name of the i18n attributes **/\n\n\n/** I18n separators for metadata **/\n\n\n/**\n * Creates an allocator for a temporary variable.\n *\n * A variable declaration is added to the statements the first time the allocator is invoked.\n */\n\n\n\n\n\n\n/**\n *  Remove trailing null nodes as they are implied.\n */\n\n\nfunction noop() { }\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Resolved type of a dependency.\n *\n * Occasionally, dependencies will have special significance which is known statically. In that\n * case the `R3ResolvedDependencyType` informs the factory generator that a particular dependency\n * should be generated specially (usually by calling a special injection function instead of the\n * standard one).\n */\nvar R3ResolvedDependencyType;\n(function (R3ResolvedDependencyType) {\n    /**\n     * A normal token dependency.\n     */\n    R3ResolvedDependencyType[R3ResolvedDependencyType[\"Token\"] = 0] = \"Token\";\n    /**\n     * The dependency is for an attribute.\n     *\n     * The token expression is a string representing the attribute name.\n     */\n    R3ResolvedDependencyType[R3ResolvedDependencyType[\"Attribute\"] = 1] = \"Attribute\";\n    /**\n     * The dependency is for the `Injector` type itself.\n     */\n    R3ResolvedDependencyType[R3ResolvedDependencyType[\"Injector\"] = 2] = \"Injector\";\n    /**\n     * The dependency is for `ElementRef`.\n     */\n    R3ResolvedDependencyType[R3ResolvedDependencyType[\"ElementRef\"] = 3] = \"ElementRef\";\n    /**\n     * The dependency is for `TemplateRef`.\n     */\n    R3ResolvedDependencyType[R3ResolvedDependencyType[\"TemplateRef\"] = 4] = \"TemplateRef\";\n    /**\n     * The dependency is for `ViewContainerRef`.\n     */\n    R3ResolvedDependencyType[R3ResolvedDependencyType[\"ViewContainerRef\"] = 5] = \"ViewContainerRef\";\n})(R3ResolvedDependencyType || (R3ResolvedDependencyType = {}));\n/**\n * Construct a factory function expression for the given `R3FactoryMetadata`.\n */\n\n/**\n * A helper function useful for extracting `R3DependencyMetadata` from a Render2\n * `CompileTypeMetadata` instance.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Write a pipe definition to the output context.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar BINDING_INSTRUCTION_MAP = (_a$1 = {}, _a$1[0 /* Property */] = Identifiers$1.elementProperty, _a$1[1 /* Attribute */] = Identifiers$1.elementAttribute, _a$1[2 /* Class */] = Identifiers$1.elementClassNamed, _a$1[3 /* Style */] = Identifiers$1.elementStyleNamed, _a$1);\nvar ValueConverter = /** @class */ (function (_super) {\n    __extends(ValueConverter, _super);\n    function ValueConverter(constantPool, allocateSlot, allocatePureFunctionSlots, definePipe) {\n        var _this = _super.call(this) || this;\n        _this.constantPool = constantPool;\n        _this.allocateSlot = allocateSlot;\n        _this.allocatePureFunctionSlots = allocatePureFunctionSlots;\n        _this.definePipe = definePipe;\n        return _this;\n    }\n    // AstMemoryEfficientTransformer\n    ValueConverter.prototype.visitPipe = function (pipe, context) {\n        // Allocate a slot to create the pipe\n        var slot = this.allocateSlot();\n        var slotPseudoLocal = \"PIPE:\" + slot;\n        // Allocate one slot for the result plus one slot per pipe argument\n        var pureFunctionSlot = this.allocatePureFunctionSlots(2 + pipe.args.length);\n        var target = new PropertyRead(pipe.span, new ImplicitReceiver(pipe.span), slotPseudoLocal);\n        var _a = pipeBindingCallInfo(pipe.args), identifier = _a.identifier, isVarLength = _a.isVarLength;\n        this.definePipe(pipe.name, slotPseudoLocal, slot, importExpr(identifier));\n        var args = __spread([pipe.exp], pipe.args);\n        var convertedArgs = isVarLength ? this.visitAll([new LiteralArray(pipe.span, args)]) : this.visitAll(args);\n        return new FunctionCall(pipe.span, target, __spread([\n            new LiteralPrimitive(pipe.span, slot),\n            new LiteralPrimitive(pipe.span, pureFunctionSlot)\n        ], convertedArgs));\n    };\n    ValueConverter.prototype.visitLiteralArray = function (array, context) {\n        var _this = this;\n        return new BuiltinFunctionCall(array.span, this.visitAll(array.expressions), function (values) {\n            // If the literal has calculated (non-literal) elements transform it into\n            // calls to literal factories that compose the literal and will cache intermediate\n            // values. Otherwise, just return an literal array that contains the values.\n            var literal$$1 = literalArr(values);\n            return values.every(function (a) { return a.isConstant(); }) ?\n                _this.constantPool.getConstLiteral(literal$$1, true) :\n                getLiteralFactory(_this.constantPool, literal$$1, _this.allocatePureFunctionSlots);\n        });\n    };\n    ValueConverter.prototype.visitLiteralMap = function (map, context) {\n        var _this = this;\n        return new BuiltinFunctionCall(map.span, this.visitAll(map.values), function (values) {\n            // If the literal has calculated (non-literal) elements  transform it into\n            // calls to literal factories that compose the literal and will cache intermediate\n            // values. Otherwise, just return an literal array that contains the values.\n            var literal$$1 = literalMap(values.map(function (value, index) { return ({ key: map.keys[index].key, value: value, quoted: map.keys[index].quoted }); }));\n            return values.every(function (a) { return a.isConstant(); }) ?\n                _this.constantPool.getConstLiteral(literal$$1, true) :\n                getLiteralFactory(_this.constantPool, literal$$1, _this.allocatePureFunctionSlots);\n        });\n    };\n    return ValueConverter;\n}(AstMemoryEfficientTransformer));\n// Pipes always have at least one parameter, the value they operate on\nvar pipeBindingIdentifiers = [Identifiers$1.pipeBind1, Identifiers$1.pipeBind2, Identifiers$1.pipeBind3, Identifiers$1.pipeBind4];\nfunction pipeBindingCallInfo(args) {\n    var identifier = pipeBindingIdentifiers[args.length];\n    return {\n        identifier: identifier || Identifiers$1.pipeBindV,\n        isVarLength: !identifier,\n    };\n}\nvar pureFunctionIdentifiers = [\n    Identifiers$1.pureFunction0, Identifiers$1.pureFunction1, Identifiers$1.pureFunction2, Identifiers$1.pureFunction3, Identifiers$1.pureFunction4,\n    Identifiers$1.pureFunction5, Identifiers$1.pureFunction6, Identifiers$1.pureFunction7, Identifiers$1.pureFunction8\n];\nfunction pureFunctionCallInfo(args) {\n    var identifier = pureFunctionIdentifiers[args.length];\n    return {\n        identifier: identifier || Identifiers$1.pureFunctionV,\n        isVarLength: !identifier,\n    };\n}\nfunction getLiteralFactory(constantPool, literal$$1, allocateSlots) {\n    var _a = constantPool.getLiteralFactory(literal$$1), literalFactory = _a.literalFactory, literalFactoryArguments = _a.literalFactoryArguments;\n    // Allocate 1 slot for the result plus 1 per argument\n    var startSlot = allocateSlots(1 + literalFactoryArguments.length);\n    literalFactoryArguments.length > 0 || error(\"Expected arguments to a literal factory function\");\n    var _b = pureFunctionCallInfo(literalFactoryArguments), identifier = _b.identifier, isVarLength = _b.isVarLength;\n    // Literal factories are pure functions that only need to be re-invoked when the parameters\n    // change.\n    var args = [\n        literal(startSlot),\n        literalFactory,\n    ];\n    if (isVarLength) {\n        args.push(literalArr(literalFactoryArguments));\n    }\n    else {\n        args.push.apply(args, __spread(literalFactoryArguments));\n    }\n    return importExpr(identifier).callFn(args);\n}\nvar BindingScope = /** @class */ (function () {\n    function BindingScope(parent, declareLocalVarCallback) {\n        if (parent === void 0) { parent = null; }\n        if (declareLocalVarCallback === void 0) { declareLocalVarCallback = noop; }\n        this.parent = parent;\n        this.declareLocalVarCallback = declareLocalVarCallback;\n        /**\n         * Keeps a map from local variables to their expressions.\n         *\n         * This is used when one refers to variable such as: 'let abc = a.b.c`.\n         * - key to the map is the string literal `\"abc\"`.\n         * - value `lhs` is the left hand side which is an AST representing `abc`.\n         * - value `rhs` is the right hand side which is an AST representing `a.b.c`.\n         * - value `declared` is true if the `declareLocalVarCallback` has been called for this scope\n         * already.\n         */\n        this.map = new Map();\n        this.referenceNameIndex = 0;\n    }\n    BindingScope.prototype.get = function (name) {\n        var current = this;\n        while (current) {\n            var value = current.map.get(name);\n            if (value != null) {\n                if (current !== this) {\n                    // make a local copy and reset the `declared` state.\n                    value = { lhs: value.lhs, rhs: value.rhs, declared: false };\n                    // Cache the value locally.\n                    this.map.set(name, value);\n                }\n                if (value.rhs && !value.declared) {\n                    // if it is first time we are referencing the variable in the scope\n                    // than invoke the callback to insert variable declaration.\n                    this.declareLocalVarCallback(value.lhs, value.rhs);\n                    value.declared = true;\n                }\n                return value.lhs;\n            }\n            current = current.parent;\n        }\n        return null;\n    };\n    /**\n     * Create a local variable for later reference.\n     *\n     * @param name Name of the variable.\n     * @param lhs AST representing the left hand side of the `let lhs = rhs;`.\n     * @param rhs AST representing the right hand side of the `let lhs = rhs;`. The `rhs` can be\n     * `undefined` for variable that are ambient such as `$event` and which don't have `rhs`\n     * declaration.\n     */\n    BindingScope.prototype.set = function (name, lhs, rhs) {\n        !this.map.has(name) ||\n            error(\"The name \" + name + \" is already defined in scope to be \" + this.map.get(name));\n        this.map.set(name, { lhs: lhs, rhs: rhs, declared: false });\n        return this;\n    };\n    BindingScope.prototype.getLocal = function (name) { return this.get(name); };\n    BindingScope.prototype.nestedScope = function (declareCallback) {\n        return new BindingScope(this, declareCallback);\n    };\n    BindingScope.prototype.freshReferenceName = function () {\n        var current = this;\n        // Find the top scope as it maintains the global reference count\n        while (current.parent)\n            current = current.parent;\n        var ref = \"\" + REFERENCE_PREFIX + current.referenceNameIndex++;\n        return ref;\n    };\n    BindingScope.ROOT_SCOPE = new BindingScope().set('$event', variable('$event'));\n    return BindingScope;\n}());\n/**\n * Parse a template into render3 `Node`s and additional metadata, with no other dependencies.\n *\n * @param template text of the template to parse\n * @param templateUrl URL to use for source mapping of the parsed template\n */\n\n/**\n * Construct a `BindingParser` with a default configuration.\n */\n\nvar _a$1;\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Compile a directive for the render3 runtime as defined by the `R3DirectiveMetadata`.\n */\n\n/**\n * Compile a component for the render3 runtime as defined by the `R3ComponentMetadata`.\n */\n\n/**\n * A wrapper around `compileDirective` which depends on render2 global analysis data as its input\n * instead of the `R3DirectiveMetadata`.\n *\n * `R3DirectiveMetadata` is computed from `CompileDirectiveMetadata` and other statically reflected\n * information.\n */\n\n/**\n * A wrapper around `compileComponent` which depends on render2 global analysis data as its input\n * instead of the `R3DirectiveMetadata`.\n *\n * `R3ComponentMetadata` is computed from `CompileDirectiveMetadata` and other statically reflected\n * information.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TS = /^(?!.*\\.d\\.ts$).*\\.ts$/;\nvar ResolvedStaticSymbol = /** @class */ (function () {\n    function ResolvedStaticSymbol(symbol, metadata) {\n        this.symbol = symbol;\n        this.metadata = metadata;\n    }\n    return ResolvedStaticSymbol;\n}());\nvar SUPPORTED_SCHEMA_VERSION = 4;\n/**\n * This class is responsible for loading metadata per symbol,\n * and normalizing references between symbols.\n *\n * Internally, it only uses symbols without members,\n * and deduces the values for symbols with members based\n * on these symbols.\n */\nvar StaticSymbolResolver = /** @class */ (function () {\n    function StaticSymbolResolver(host, staticSymbolCache, summaryResolver, errorRecorder) {\n        this.host = host;\n        this.staticSymbolCache = staticSymbolCache;\n        this.summaryResolver = summaryResolver;\n        this.errorRecorder = errorRecorder;\n        this.metadataCache = new Map();\n        // Note: this will only contain StaticSymbols without members!\n        this.resolvedSymbols = new Map();\n        this.resolvedFilePaths = new Set();\n        // Note: this will only contain StaticSymbols without members!\n        this.importAs = new Map();\n        this.symbolResourcePaths = new Map();\n        this.symbolFromFile = new Map();\n        this.knownFileNameToModuleNames = new Map();\n    }\n    StaticSymbolResolver.prototype.resolveSymbol = function (staticSymbol) {\n        if (staticSymbol.members.length > 0) {\n            return this._resolveSymbolMembers(staticSymbol);\n        }\n        // Note: always ask for a summary first,\n        // as we might have read shallow metadata via a .d.ts file\n        // for the symbol.\n        var resultFromSummary = this._resolveSymbolFromSummary(staticSymbol);\n        if (resultFromSummary) {\n            return resultFromSummary;\n        }\n        var resultFromCache = this.resolvedSymbols.get(staticSymbol);\n        if (resultFromCache) {\n            return resultFromCache;\n        }\n        // Note: Some users use libraries that were not compiled with ngc, i.e. they don't\n        // have summaries, only .d.ts files. So we always need to check both, the summary\n        // and metadata.\n        this._createSymbolsOf(staticSymbol.filePath);\n        return this.resolvedSymbols.get(staticSymbol);\n    };\n    /**\n     * getImportAs produces a symbol that can be used to import the given symbol.\n     * The import might be different than the symbol if the symbol is exported from\n     * a library with a summary; in which case we want to import the symbol from the\n     * ngfactory re-export instead of directly to avoid introducing a direct dependency\n     * on an otherwise indirect dependency.\n     *\n     * @param staticSymbol the symbol for which to generate a import symbol\n     */\n    StaticSymbolResolver.prototype.getImportAs = function (staticSymbol, useSummaries) {\n        if (useSummaries === void 0) { useSummaries = true; }\n        if (staticSymbol.members.length) {\n            var baseSymbol = this.getStaticSymbol(staticSymbol.filePath, staticSymbol.name);\n            var baseImportAs = this.getImportAs(baseSymbol, useSummaries);\n            return baseImportAs ?\n                this.getStaticSymbol(baseImportAs.filePath, baseImportAs.name, staticSymbol.members) :\n                null;\n        }\n        var summarizedFileName = stripSummaryForJitFileSuffix(staticSymbol.filePath);\n        if (summarizedFileName !== staticSymbol.filePath) {\n            var summarizedName = stripSummaryForJitNameSuffix(staticSymbol.name);\n            var baseSymbol = this.getStaticSymbol(summarizedFileName, summarizedName, staticSymbol.members);\n            var baseImportAs = this.getImportAs(baseSymbol, useSummaries);\n            return baseImportAs ?\n                this.getStaticSymbol(summaryForJitFileName(baseImportAs.filePath), summaryForJitName(baseImportAs.name), baseSymbol.members) :\n                null;\n        }\n        var result = (useSummaries && this.summaryResolver.getImportAs(staticSymbol)) || null;\n        if (!result) {\n            result = this.importAs.get(staticSymbol);\n        }\n        return result;\n    };\n    /**\n     * getResourcePath produces the path to the original location of the symbol and should\n     * be used to determine the relative location of resource references recorded in\n     * symbol metadata.\n     */\n    StaticSymbolResolver.prototype.getResourcePath = function (staticSymbol) {\n        return this.symbolResourcePaths.get(staticSymbol) || staticSymbol.filePath;\n    };\n    /**\n     * getTypeArity returns the number of generic type parameters the given symbol\n     * has. If the symbol is not a type the result is null.\n     */\n    StaticSymbolResolver.prototype.getTypeArity = function (staticSymbol) {\n        // If the file is a factory/ngsummary file, don't resolve the symbol as doing so would\n        // cause the metadata for an factory/ngsummary file to be loaded which doesn't exist.\n        // All references to generated classes must include the correct arity whenever\n        // generating code.\n        if (isGeneratedFile(staticSymbol.filePath)) {\n            return null;\n        }\n        var resolvedSymbol = unwrapResolvedMetadata(this.resolveSymbol(staticSymbol));\n        while (resolvedSymbol && resolvedSymbol.metadata instanceof StaticSymbol) {\n            resolvedSymbol = unwrapResolvedMetadata(this.resolveSymbol(resolvedSymbol.metadata));\n        }\n        return (resolvedSymbol && resolvedSymbol.metadata && resolvedSymbol.metadata.arity) || null;\n    };\n    StaticSymbolResolver.prototype.getKnownModuleName = function (filePath) {\n        return this.knownFileNameToModuleNames.get(filePath) || null;\n    };\n    StaticSymbolResolver.prototype.recordImportAs = function (sourceSymbol, targetSymbol) {\n        sourceSymbol.assertNoMembers();\n        targetSymbol.assertNoMembers();\n        this.importAs.set(sourceSymbol, targetSymbol);\n    };\n    StaticSymbolResolver.prototype.recordModuleNameForFileName = function (fileName, moduleName) {\n        this.knownFileNameToModuleNames.set(fileName, moduleName);\n    };\n    /**\n     * Invalidate all information derived from the given file.\n     *\n     * @param fileName the file to invalidate\n     */\n    StaticSymbolResolver.prototype.invalidateFile = function (fileName) {\n        this.metadataCache.delete(fileName);\n        this.resolvedFilePaths.delete(fileName);\n        var symbols = this.symbolFromFile.get(fileName);\n        if (symbols) {\n            this.symbolFromFile.delete(fileName);\n            try {\n                for (var symbols_1 = __values(symbols), symbols_1_1 = symbols_1.next(); !symbols_1_1.done; symbols_1_1 = symbols_1.next()) {\n                    var symbol = symbols_1_1.value;\n                    this.resolvedSymbols.delete(symbol);\n                    this.importAs.delete(symbol);\n                    this.symbolResourcePaths.delete(symbol);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (symbols_1_1 && !symbols_1_1.done && (_a = symbols_1.return)) _a.call(symbols_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        var e_1, _a;\n    };\n    /* @internal */\n    StaticSymbolResolver.prototype.ignoreErrorsFor = function (cb) {\n        var recorder = this.errorRecorder;\n        this.errorRecorder = function () { };\n        try {\n            return cb();\n        }\n        finally {\n            this.errorRecorder = recorder;\n        }\n    };\n    StaticSymbolResolver.prototype._resolveSymbolMembers = function (staticSymbol) {\n        var members = staticSymbol.members;\n        var baseResolvedSymbol = this.resolveSymbol(this.getStaticSymbol(staticSymbol.filePath, staticSymbol.name));\n        if (!baseResolvedSymbol) {\n            return null;\n        }\n        var baseMetadata = unwrapResolvedMetadata(baseResolvedSymbol.metadata);\n        if (baseMetadata instanceof StaticSymbol) {\n            return new ResolvedStaticSymbol(staticSymbol, this.getStaticSymbol(baseMetadata.filePath, baseMetadata.name, members));\n        }\n        else if (baseMetadata && baseMetadata.__symbolic === 'class') {\n            if (baseMetadata.statics && members.length === 1) {\n                return new ResolvedStaticSymbol(staticSymbol, baseMetadata.statics[members[0]]);\n            }\n        }\n        else {\n            var value = baseMetadata;\n            for (var i = 0; i < members.length && value; i++) {\n                value = value[members[i]];\n            }\n            return new ResolvedStaticSymbol(staticSymbol, value);\n        }\n        return null;\n    };\n    StaticSymbolResolver.prototype._resolveSymbolFromSummary = function (staticSymbol) {\n        var summary = this.summaryResolver.resolveSummary(staticSymbol);\n        return summary ? new ResolvedStaticSymbol(staticSymbol, summary.metadata) : null;\n    };\n    /**\n     * getStaticSymbol produces a Type whose metadata is known but whose implementation is not loaded.\n     * All types passed to the StaticResolver should be pseudo-types returned by this method.\n     *\n     * @param declarationFile the absolute path of the file where the symbol is declared\n     * @param name the name of the type.\n     * @param members a symbol for a static member of the named type\n     */\n    StaticSymbolResolver.prototype.getStaticSymbol = function (declarationFile, name, members) {\n        return this.staticSymbolCache.get(declarationFile, name, members);\n    };\n    /**\n     * hasDecorators checks a file's metadata for the presence of decorators without evaluating the\n     * metadata.\n     *\n     * @param filePath the absolute path to examine for decorators.\n     * @returns true if any class in the file has a decorator.\n     */\n    StaticSymbolResolver.prototype.hasDecorators = function (filePath) {\n        var metadata = this.getModuleMetadata(filePath);\n        if (metadata['metadata']) {\n            return Object.keys(metadata['metadata']).some(function (metadataKey) {\n                var entry = metadata['metadata'][metadataKey];\n                return entry && entry.__symbolic === 'class' && entry.decorators;\n            });\n        }\n        return false;\n    };\n    StaticSymbolResolver.prototype.getSymbolsOf = function (filePath) {\n        var summarySymbols = this.summaryResolver.getSymbolsOf(filePath);\n        if (summarySymbols) {\n            return summarySymbols;\n        }\n        // Note: Some users use libraries that were not compiled with ngc, i.e. they don't\n        // have summaries, only .d.ts files, but `summaryResolver.isLibraryFile` returns true.\n        this._createSymbolsOf(filePath);\n        var metadataSymbols = [];\n        this.resolvedSymbols.forEach(function (resolvedSymbol) {\n            if (resolvedSymbol.symbol.filePath === filePath) {\n                metadataSymbols.push(resolvedSymbol.symbol);\n            }\n        });\n        return metadataSymbols;\n    };\n    StaticSymbolResolver.prototype._createSymbolsOf = function (filePath) {\n        var _this = this;\n        if (this.resolvedFilePaths.has(filePath)) {\n            return;\n        }\n        this.resolvedFilePaths.add(filePath);\n        var resolvedSymbols = [];\n        var metadata = this.getModuleMetadata(filePath);\n        if (metadata['importAs']) {\n            // Index bundle indices should use the importAs module name defined\n            // in the bundle.\n            this.knownFileNameToModuleNames.set(filePath, metadata['importAs']);\n        }\n        // handle the symbols in one of the re-export location\n        if (metadata['exports']) {\n            var _loop_1 = function (moduleExport) {\n                // handle the symbols in the list of explicitly re-exported symbols.\n                if (moduleExport.export) {\n                    moduleExport.export.forEach(function (exportSymbol) {\n                        var symbolName;\n                        if (typeof exportSymbol === 'string') {\n                            symbolName = exportSymbol;\n                        }\n                        else {\n                            symbolName = exportSymbol.as;\n                        }\n                        symbolName = unescapeIdentifier(symbolName);\n                        var symName = symbolName;\n                        if (typeof exportSymbol !== 'string') {\n                            symName = unescapeIdentifier(exportSymbol.name);\n                        }\n                        var resolvedModule = _this.resolveModule(moduleExport.from, filePath);\n                        if (resolvedModule) {\n                            var targetSymbol = _this.getStaticSymbol(resolvedModule, symName);\n                            var sourceSymbol = _this.getStaticSymbol(filePath, symbolName);\n                            resolvedSymbols.push(_this.createExport(sourceSymbol, targetSymbol));\n                        }\n                    });\n                }\n                else {\n                    // handle the symbols via export * directives.\n                    var resolvedModule = this_1.resolveModule(moduleExport.from, filePath);\n                    if (resolvedModule) {\n                        var nestedExports = this_1.getSymbolsOf(resolvedModule);\n                        nestedExports.forEach(function (targetSymbol) {\n                            var sourceSymbol = _this.getStaticSymbol(filePath, targetSymbol.name);\n                            resolvedSymbols.push(_this.createExport(sourceSymbol, targetSymbol));\n                        });\n                    }\n                }\n            };\n            var this_1 = this;\n            try {\n                for (var _a = __values(metadata['exports']), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var moduleExport = _b.value;\n                    _loop_1(moduleExport);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n        // handle the actual metadata. Has to be after the exports\n        // as there might be collisions in the names, and we want the symbols\n        // of the current module to win ofter reexports.\n        if (metadata['metadata']) {\n            // handle direct declarations of the symbol\n            var topLevelSymbolNames_1 = new Set(Object.keys(metadata['metadata']).map(unescapeIdentifier));\n            var origins_1 = metadata['origins'] || {};\n            Object.keys(metadata['metadata']).forEach(function (metadataKey) {\n                var symbolMeta = metadata['metadata'][metadataKey];\n                var name = unescapeIdentifier(metadataKey);\n                var symbol = _this.getStaticSymbol(filePath, name);\n                var origin = origins_1.hasOwnProperty(metadataKey) && origins_1[metadataKey];\n                if (origin) {\n                    // If the symbol is from a bundled index, use the declaration location of the\n                    // symbol so relative references (such as './my.html') will be calculated\n                    // correctly.\n                    var originFilePath = _this.resolveModule(origin, filePath);\n                    if (!originFilePath) {\n                        _this.reportError(new Error(\"Couldn't resolve original symbol for \" + origin + \" from \" + filePath));\n                    }\n                    else {\n                        _this.symbolResourcePaths.set(symbol, originFilePath);\n                    }\n                }\n                resolvedSymbols.push(_this.createResolvedSymbol(symbol, filePath, topLevelSymbolNames_1, symbolMeta));\n            });\n        }\n        resolvedSymbols.forEach(function (resolvedSymbol) { return _this.resolvedSymbols.set(resolvedSymbol.symbol, resolvedSymbol); });\n        this.symbolFromFile.set(filePath, resolvedSymbols.map(function (resolvedSymbol) { return resolvedSymbol.symbol; }));\n        var e_2, _c;\n    };\n    StaticSymbolResolver.prototype.createResolvedSymbol = function (sourceSymbol, topLevelPath, topLevelSymbolNames, metadata) {\n        var _this = this;\n        // For classes that don't have Angular summaries / metadata,\n        // we only keep their arity, but nothing else\n        // (e.g. their constructor parameters).\n        // We do this to prevent introducing deep imports\n        // as we didn't generate .ngfactory.ts files with proper reexports.\n        var isTsFile = TS.test(sourceSymbol.filePath);\n        if (this.summaryResolver.isLibraryFile(sourceSymbol.filePath) && !isTsFile && metadata &&\n            metadata['__symbolic'] === 'class') {\n            var transformedMeta_1 = { __symbolic: 'class', arity: metadata.arity };\n            return new ResolvedStaticSymbol(sourceSymbol, transformedMeta_1);\n        }\n        var _originalFileMemo;\n        var getOriginalName = function () {\n            if (!_originalFileMemo) {\n                // Guess what the original file name is from the reference. If it has a `.d.ts` extension\n                // replace it with `.ts`. If it already has `.ts` just leave it in place. If it doesn't have\n                // .ts or .d.ts, append `.ts'. Also, if it is in `node_modules`, trim the `node_module`\n                // location as it is not important to finding the file.\n                _originalFileMemo =\n                    _this.host.getOutputName(topLevelPath.replace(/((\\.ts)|(\\.d\\.ts)|)$/, '.ts')\n                        .replace(/^.*node_modules[/\\\\]/, ''));\n            }\n            return _originalFileMemo;\n        };\n        var self = this;\n        var ReferenceTransformer = /** @class */ (function (_super) {\n            __extends(ReferenceTransformer, _super);\n            function ReferenceTransformer() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            ReferenceTransformer.prototype.visitStringMap = function (map, functionParams) {\n                var symbolic = map['__symbolic'];\n                if (symbolic === 'function') {\n                    var oldLen = functionParams.length;\n                    functionParams.push.apply(functionParams, __spread((map['parameters'] || [])));\n                    var result = _super.prototype.visitStringMap.call(this, map, functionParams);\n                    functionParams.length = oldLen;\n                    return result;\n                }\n                else if (symbolic === 'reference') {\n                    var module = map['module'];\n                    var name_1 = map['name'] ? unescapeIdentifier(map['name']) : map['name'];\n                    if (!name_1) {\n                        return null;\n                    }\n                    var filePath = void 0;\n                    if (module) {\n                        filePath = self.resolveModule(module, sourceSymbol.filePath);\n                        if (!filePath) {\n                            return {\n                                __symbolic: 'error',\n                                message: \"Could not resolve \" + module + \" relative to \" + sourceSymbol.filePath + \".\",\n                                line: map.line,\n                                character: map.character,\n                                fileName: getOriginalName()\n                            };\n                        }\n                        return {\n                            __symbolic: 'resolved',\n                            symbol: self.getStaticSymbol(filePath, name_1),\n                            line: map.line,\n                            character: map.character,\n                            fileName: getOriginalName()\n                        };\n                    }\n                    else if (functionParams.indexOf(name_1) >= 0) {\n                        // reference to a function parameter\n                        return { __symbolic: 'reference', name: name_1 };\n                    }\n                    else {\n                        if (topLevelSymbolNames.has(name_1)) {\n                            return self.getStaticSymbol(topLevelPath, name_1);\n                        }\n                        // ambient value\n                        \n                    }\n                }\n                else if (symbolic === 'error') {\n                    return __assign({}, map, { fileName: getOriginalName() });\n                }\n                else {\n                    return _super.prototype.visitStringMap.call(this, map, functionParams);\n                }\n            };\n            return ReferenceTransformer;\n        }(ValueTransformer));\n        var transformedMeta = visitValue(metadata, new ReferenceTransformer(), []);\n        var unwrappedTransformedMeta = unwrapResolvedMetadata(transformedMeta);\n        if (unwrappedTransformedMeta instanceof StaticSymbol) {\n            return this.createExport(sourceSymbol, unwrappedTransformedMeta);\n        }\n        return new ResolvedStaticSymbol(sourceSymbol, transformedMeta);\n    };\n    StaticSymbolResolver.prototype.createExport = function (sourceSymbol, targetSymbol) {\n        sourceSymbol.assertNoMembers();\n        targetSymbol.assertNoMembers();\n        if (this.summaryResolver.isLibraryFile(sourceSymbol.filePath) &&\n            this.summaryResolver.isLibraryFile(targetSymbol.filePath)) {\n            // This case is for an ng library importing symbols from a plain ts library\n            // transitively.\n            // Note: We rely on the fact that we discover symbols in the direction\n            // from source files to library files\n            this.importAs.set(targetSymbol, this.getImportAs(sourceSymbol) || sourceSymbol);\n        }\n        return new ResolvedStaticSymbol(sourceSymbol, targetSymbol);\n    };\n    StaticSymbolResolver.prototype.reportError = function (error$$1, context, path$$1) {\n        if (this.errorRecorder) {\n            this.errorRecorder(error$$1, (context && context.filePath) || path$$1);\n        }\n        else {\n            throw error$$1;\n        }\n    };\n    /**\n     * @param module an absolute path to a module file.\n     */\n    StaticSymbolResolver.prototype.getModuleMetadata = function (module) {\n        var moduleMetadata = this.metadataCache.get(module);\n        if (!moduleMetadata) {\n            var moduleMetadatas = this.host.getMetadataFor(module);\n            if (moduleMetadatas) {\n                var maxVersion_1 = -1;\n                moduleMetadatas.forEach(function (md) {\n                    if (md && md['version'] > maxVersion_1) {\n                        maxVersion_1 = md['version'];\n                        moduleMetadata = md;\n                    }\n                });\n            }\n            if (!moduleMetadata) {\n                moduleMetadata =\n                    { __symbolic: 'module', version: SUPPORTED_SCHEMA_VERSION, module: module, metadata: {} };\n            }\n            if (moduleMetadata['version'] != SUPPORTED_SCHEMA_VERSION) {\n                var errorMessage = moduleMetadata['version'] == 2 ?\n                    \"Unsupported metadata version \" + moduleMetadata['version'] + \" for module \" + module + \". This module should be compiled with a newer version of ngc\" :\n                    \"Metadata version mismatch for module \" + module + \", found version \" + moduleMetadata['version'] + \", expected \" + SUPPORTED_SCHEMA_VERSION;\n                this.reportError(new Error(errorMessage));\n            }\n            this.metadataCache.set(module, moduleMetadata);\n        }\n        return moduleMetadata;\n    };\n    StaticSymbolResolver.prototype.getSymbolByModule = function (module, symbolName, containingFile) {\n        var filePath = this.resolveModule(module, containingFile);\n        if (!filePath) {\n            this.reportError(new Error(\"Could not resolve module \" + module + (containingFile ? ' relative to ' +\n                containingFile : '')));\n            return this.getStaticSymbol(\"ERROR:\" + module, symbolName);\n        }\n        return this.getStaticSymbol(filePath, symbolName);\n    };\n    StaticSymbolResolver.prototype.resolveModule = function (module, containingFile) {\n        try {\n            return this.host.moduleNameToFileName(module, containingFile);\n        }\n        catch (e) {\n            console.error(\"Could not resolve module '\" + module + \"' relative to file \" + containingFile);\n            this.reportError(e, undefined, containingFile);\n        }\n        return null;\n    };\n    return StaticSymbolResolver;\n}());\n// Remove extra underscore from escaped identifier.\n// See https://github.com/Microsoft/TypeScript/blob/master/src/compiler/utilities.ts\nfunction unescapeIdentifier(identifier) {\n    return identifier.startsWith('___') ? identifier.substr(1) : identifier;\n}\nfunction unwrapResolvedMetadata(metadata) {\n    if (metadata && metadata.__symbolic === 'resolved') {\n        return metadata.symbol;\n    }\n    return metadata;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction deserializeSummaries(symbolCache, summaryResolver, libraryFileName, json) {\n    var deserializer = new FromJsonDeserializer(symbolCache, summaryResolver);\n    return deserializer.deserialize(libraryFileName, json);\n}\n\nvar ToJsonSerializer = /** @class */ (function (_super) {\n    __extends(ToJsonSerializer, _super);\n    function ToJsonSerializer(symbolResolver, summaryResolver, srcFileName) {\n        var _this = _super.call(this) || this;\n        _this.symbolResolver = symbolResolver;\n        _this.summaryResolver = summaryResolver;\n        _this.srcFileName = srcFileName;\n        // Note: This only contains symbols without members.\n        _this.symbols = [];\n        _this.indexBySymbol = new Map();\n        _this.reexportedBy = new Map();\n        // This now contains a `__symbol: number` in the place of\n        // StaticSymbols, but otherwise has the same shape as the original objects.\n        _this.processedSummaryBySymbol = new Map();\n        _this.processedSummaries = [];\n        _this.unprocessedSymbolSummariesBySymbol = new Map();\n        _this.moduleName = symbolResolver.getKnownModuleName(srcFileName);\n        return _this;\n    }\n    ToJsonSerializer.prototype.addSummary = function (summary) {\n        var _this = this;\n        var unprocessedSummary = this.unprocessedSymbolSummariesBySymbol.get(summary.symbol);\n        var processedSummary = this.processedSummaryBySymbol.get(summary.symbol);\n        if (!unprocessedSummary) {\n            unprocessedSummary = { symbol: summary.symbol, metadata: undefined };\n            this.unprocessedSymbolSummariesBySymbol.set(summary.symbol, unprocessedSummary);\n            processedSummary = { symbol: this.processValue(summary.symbol, 0 /* None */) };\n            this.processedSummaries.push(processedSummary);\n            this.processedSummaryBySymbol.set(summary.symbol, processedSummary);\n        }\n        if (!unprocessedSummary.metadata && summary.metadata) {\n            var metadata_1 = summary.metadata || {};\n            if (metadata_1.__symbolic === 'class') {\n                // For classes, we keep everything except their class decorators.\n                // We need to keep e.g. the ctor args, method names, method decorators\n                // so that the class can be extended in another compilation unit.\n                // We don't keep the class decorators as\n                // 1) they refer to data\n                //   that should not cause a rebuild of downstream compilation units\n                //   (e.g. inline templates of @Component, or @NgModule.declarations)\n                // 2) their data is already captured in TypeSummaries, e.g. DirectiveSummary.\n                var clone_1 = {};\n                Object.keys(metadata_1).forEach(function (propName) {\n                    if (propName !== 'decorators') {\n                        clone_1[propName] = metadata_1[propName];\n                    }\n                });\n                metadata_1 = clone_1;\n            }\n            else if (isCall(metadata_1)) {\n                if (!isFunctionCall(metadata_1) && !isMethodCallOnVariable(metadata_1)) {\n                    // Don't store complex calls as we won't be able to simplify them anyways later on.\n                    metadata_1 = {\n                        __symbolic: 'error',\n                        message: 'Complex function calls are not supported.',\n                    };\n                }\n            }\n            // Note: We need to keep storing ctor calls for e.g.\n            // `export const x = new InjectionToken(...)`\n            unprocessedSummary.metadata = metadata_1;\n            processedSummary.metadata = this.processValue(metadata_1, 1 /* ResolveValue */);\n            if (metadata_1 instanceof StaticSymbol &&\n                this.summaryResolver.isLibraryFile(metadata_1.filePath)) {\n                var declarationSymbol = this.symbols[this.indexBySymbol.get(metadata_1)];\n                if (!isLoweredSymbol(declarationSymbol.name)) {\n                    // Note: symbols that were introduced during codegen in the user file can have a reexport\n                    // if a user used `export *`. However, we can't rely on this as tsickle will change\n                    // `export *` into named exports, using only the information from the typechecker.\n                    // As we introduce the new symbols after typecheck, Tsickle does not know about them,\n                    // and omits them when expanding `export *`.\n                    // So we have to keep reexporting these symbols manually via .ngfactory files.\n                    this.reexportedBy.set(declarationSymbol, summary.symbol);\n                }\n            }\n        }\n        if (!unprocessedSummary.type && summary.type) {\n            unprocessedSummary.type = summary.type;\n            // Note: We don't add the summaries of all referenced symbols as for the ResolvedSymbols,\n            // as the type summaries already contain the transitive data that they require\n            // (in a minimal way).\n            processedSummary.type = this.processValue(summary.type, 0 /* None */);\n            // except for reexported directives / pipes, so we need to store\n            // their summaries explicitly.\n            if (summary.type.summaryKind === CompileSummaryKind.NgModule) {\n                var ngModuleSummary = summary.type;\n                ngModuleSummary.exportedDirectives.concat(ngModuleSummary.exportedPipes).forEach(function (id) {\n                    var symbol = id.reference;\n                    if (_this.summaryResolver.isLibraryFile(symbol.filePath) &&\n                        !_this.unprocessedSymbolSummariesBySymbol.has(symbol)) {\n                        var summary_1 = _this.summaryResolver.resolveSummary(symbol);\n                        if (summary_1) {\n                            _this.addSummary(summary_1);\n                        }\n                    }\n                });\n            }\n        }\n    };\n    ToJsonSerializer.prototype.serialize = function () {\n        var _this = this;\n        var exportAs = [];\n        var json = JSON.stringify({\n            moduleName: this.moduleName,\n            summaries: this.processedSummaries,\n            symbols: this.symbols.map(function (symbol, index) {\n                symbol.assertNoMembers();\n                var importAs = undefined;\n                if (_this.summaryResolver.isLibraryFile(symbol.filePath)) {\n                    var reexportSymbol = _this.reexportedBy.get(symbol);\n                    if (reexportSymbol) {\n                        importAs = _this.indexBySymbol.get(reexportSymbol);\n                    }\n                    else {\n                        var summary = _this.unprocessedSymbolSummariesBySymbol.get(symbol);\n                        if (!summary || !summary.metadata || summary.metadata.__symbolic !== 'interface') {\n                            importAs = symbol.name + \"_\" + index;\n                            exportAs.push({ symbol: symbol, exportAs: importAs });\n                        }\n                    }\n                }\n                return {\n                    __symbol: index,\n                    name: symbol.name,\n                    filePath: _this.summaryResolver.toSummaryFileName(symbol.filePath, _this.srcFileName),\n                    importAs: importAs\n                };\n            })\n        });\n        return { json: json, exportAs: exportAs };\n    };\n    ToJsonSerializer.prototype.processValue = function (value, flags) {\n        return visitValue(value, this, flags);\n    };\n    ToJsonSerializer.prototype.visitOther = function (value, context) {\n        if (value instanceof StaticSymbol) {\n            var baseSymbol = this.symbolResolver.getStaticSymbol(value.filePath, value.name);\n            var index = this.visitStaticSymbol(baseSymbol, context);\n            return { __symbol: index, members: value.members };\n        }\n    };\n    /**\n     * Strip line and character numbers from ngsummaries.\n     * Emitting them causes white spaces changes to retrigger upstream\n     * recompilations in bazel.\n     * TODO: find out a way to have line and character numbers in errors without\n     * excessive recompilation in bazel.\n     */\n    ToJsonSerializer.prototype.visitStringMap = function (map, context) {\n        if (map['__symbolic'] === 'resolved') {\n            return visitValue(map.symbol, this, context);\n        }\n        if (map['__symbolic'] === 'error') {\n            delete map['line'];\n            delete map['character'];\n        }\n        return _super.prototype.visitStringMap.call(this, map, context);\n    };\n    /**\n     * Returns null if the options.resolveValue is true, and the summary for the symbol\n     * resolved to a type or could not be resolved.\n     */\n    ToJsonSerializer.prototype.visitStaticSymbol = function (baseSymbol, flags) {\n        var index = this.indexBySymbol.get(baseSymbol);\n        var summary = null;\n        if (flags & 1 /* ResolveValue */ &&\n            this.summaryResolver.isLibraryFile(baseSymbol.filePath)) {\n            if (this.unprocessedSymbolSummariesBySymbol.has(baseSymbol)) {\n                // the summary for this symbol was already added\n                // -> nothing to do.\n                return index;\n            }\n            summary = this.loadSummary(baseSymbol);\n            if (summary && summary.metadata instanceof StaticSymbol) {\n                // The summary is a reexport\n                index = this.visitStaticSymbol(summary.metadata, flags);\n                // reset the summary as it is just a reexport, so we don't want to store it.\n                summary = null;\n            }\n        }\n        else if (index != null) {\n            // Note: == on purpose to compare with undefined!\n            // No summary and the symbol is already added -> nothing to do.\n            return index;\n        }\n        // Note: == on purpose to compare with undefined!\n        if (index == null) {\n            index = this.symbols.length;\n            this.symbols.push(baseSymbol);\n        }\n        this.indexBySymbol.set(baseSymbol, index);\n        if (summary) {\n            this.addSummary(summary);\n        }\n        return index;\n    };\n    ToJsonSerializer.prototype.loadSummary = function (symbol) {\n        var summary = this.summaryResolver.resolveSummary(symbol);\n        if (!summary) {\n            // some symbols might originate from a plain typescript library\n            // that just exported .d.ts and .metadata.json files, i.e. where no summary\n            // files were created.\n            var resolvedSymbol = this.symbolResolver.resolveSymbol(symbol);\n            if (resolvedSymbol) {\n                summary = { symbol: resolvedSymbol.symbol, metadata: resolvedSymbol.metadata };\n            }\n        }\n        return summary;\n    };\n    return ToJsonSerializer;\n}(ValueTransformer));\nvar FromJsonDeserializer = /** @class */ (function (_super) {\n    __extends(FromJsonDeserializer, _super);\n    function FromJsonDeserializer(symbolCache, summaryResolver) {\n        var _this = _super.call(this) || this;\n        _this.symbolCache = symbolCache;\n        _this.summaryResolver = summaryResolver;\n        return _this;\n    }\n    FromJsonDeserializer.prototype.deserialize = function (libraryFileName, json) {\n        var _this = this;\n        var data = JSON.parse(json);\n        var allImportAs = [];\n        this.symbols = data.symbols.map(function (serializedSymbol) { return _this.symbolCache.get(_this.summaryResolver.fromSummaryFileName(serializedSymbol.filePath, libraryFileName), serializedSymbol.name); });\n        data.symbols.forEach(function (serializedSymbol, index) {\n            var symbol = _this.symbols[index];\n            var importAs = serializedSymbol.importAs;\n            if (typeof importAs === 'number') {\n                allImportAs.push({ symbol: symbol, importAs: _this.symbols[importAs] });\n            }\n            else if (typeof importAs === 'string') {\n                allImportAs.push({ symbol: symbol, importAs: _this.symbolCache.get(ngfactoryFilePath(libraryFileName), importAs) });\n            }\n        });\n        var summaries = visitValue(data.summaries, this, null);\n        return { moduleName: data.moduleName, summaries: summaries, importAs: allImportAs };\n    };\n    FromJsonDeserializer.prototype.visitStringMap = function (map, context) {\n        if ('__symbol' in map) {\n            var baseSymbol = this.symbols[map['__symbol']];\n            var members = map['members'];\n            return members.length ? this.symbolCache.get(baseSymbol.filePath, baseSymbol.name, members) :\n                baseSymbol;\n        }\n        else {\n            return _super.prototype.visitStringMap.call(this, map, context);\n        }\n    };\n    return FromJsonDeserializer;\n}(ValueTransformer));\nfunction isCall(metadata) {\n    return metadata && metadata.__symbolic === 'call';\n}\nfunction isFunctionCall(metadata) {\n    return isCall(metadata) && unwrapResolvedMetadata(metadata.expression) instanceof StaticSymbol;\n}\nfunction isMethodCallOnVariable(metadata) {\n    return isCall(metadata) && metadata.expression && metadata.expression.__symbolic === 'select' &&\n        unwrapResolvedMetadata(metadata.expression.expression) instanceof StaticSymbol;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction analyzeNgModules(fileNames, host, staticSymbolResolver, metadataResolver) {\n    var files = _analyzeFilesIncludingNonProgramFiles(fileNames, host, staticSymbolResolver, metadataResolver);\n    return mergeAnalyzedFiles(files);\n}\n\n// Analyzes all of the program files,\n// including files that are not part of the program\n// but are referenced by an NgModule.\nfunction _analyzeFilesIncludingNonProgramFiles(fileNames, host, staticSymbolResolver, metadataResolver) {\n    var seenFiles = new Set();\n    var files = [];\n    var visitFile = function (fileName) {\n        if (seenFiles.has(fileName) || !host.isSourceFile(fileName)) {\n            return false;\n        }\n        seenFiles.add(fileName);\n        var analyzedFile = analyzeFile(host, staticSymbolResolver, metadataResolver, fileName);\n        files.push(analyzedFile);\n        analyzedFile.ngModules.forEach(function (ngModule) {\n            ngModule.transitiveModule.modules.forEach(function (modMeta) { return visitFile(modMeta.reference.filePath); });\n        });\n    };\n    fileNames.forEach(function (fileName) { return visitFile(fileName); });\n    return files;\n}\nfunction analyzeFile(host, staticSymbolResolver, metadataResolver, fileName) {\n    var directives = [];\n    var pipes = [];\n    var injectables = [];\n    var ngModules = [];\n    var hasDecorators = staticSymbolResolver.hasDecorators(fileName);\n    var exportsNonSourceFiles = false;\n    // Don't analyze .d.ts files that have no decorators as a shortcut\n    // to speed up the analysis. This prevents us from\n    // resolving the references in these files.\n    // Note: exportsNonSourceFiles is only needed when compiling with summaries,\n    // which is not the case when .d.ts files are treated as input files.\n    if (!fileName.endsWith('.d.ts') || hasDecorators) {\n        staticSymbolResolver.getSymbolsOf(fileName).forEach(function (symbol) {\n            var resolvedSymbol = staticSymbolResolver.resolveSymbol(symbol);\n            var symbolMeta = resolvedSymbol.metadata;\n            if (!symbolMeta || symbolMeta.__symbolic === 'error') {\n                return;\n            }\n            var isNgSymbol = false;\n            if (symbolMeta.__symbolic === 'class') {\n                if (metadataResolver.isDirective(symbol)) {\n                    isNgSymbol = true;\n                    directives.push(symbol);\n                }\n                else if (metadataResolver.isPipe(symbol)) {\n                    isNgSymbol = true;\n                    pipes.push(symbol);\n                }\n                else if (metadataResolver.isNgModule(symbol)) {\n                    var ngModule = metadataResolver.getNgModuleMetadata(symbol, false);\n                    if (ngModule) {\n                        isNgSymbol = true;\n                        ngModules.push(ngModule);\n                    }\n                }\n                else if (metadataResolver.isInjectable(symbol)) {\n                    isNgSymbol = true;\n                    var injectable = metadataResolver.getInjectableMetadata(symbol, null, false);\n                    if (injectable) {\n                        injectables.push(injectable);\n                    }\n                }\n            }\n            if (!isNgSymbol) {\n                exportsNonSourceFiles =\n                    exportsNonSourceFiles || isValueExportingNonSourceFile(host, symbolMeta);\n            }\n        });\n    }\n    return {\n        fileName: fileName, directives: directives, pipes: pipes, ngModules: ngModules, injectables: injectables, exportsNonSourceFiles: exportsNonSourceFiles,\n    };\n}\n\nfunction isValueExportingNonSourceFile(host, metadata) {\n    var exportsNonSourceFiles = false;\n    var Visitor = /** @class */ (function () {\n        function Visitor() {\n        }\n        Visitor.prototype.visitArray = function (arr, context) {\n            var _this = this;\n            arr.forEach(function (v) { return visitValue(v, _this, context); });\n        };\n        Visitor.prototype.visitStringMap = function (map, context) {\n            var _this = this;\n            Object.keys(map).forEach(function (key) { return visitValue(map[key], _this, context); });\n        };\n        Visitor.prototype.visitPrimitive = function (value, context) { };\n        Visitor.prototype.visitOther = function (value, context) {\n            if (value instanceof StaticSymbol && !host.isSourceFile(value.filePath)) {\n                exportsNonSourceFiles = true;\n            }\n        };\n        return Visitor;\n    }());\n    visitValue(metadata, new Visitor(), null);\n    return exportsNonSourceFiles;\n}\nfunction mergeAnalyzedFiles(analyzedFiles) {\n    var allNgModules = [];\n    var ngModuleByPipeOrDirective = new Map();\n    var allPipesAndDirectives = new Set();\n    analyzedFiles.forEach(function (af) {\n        af.ngModules.forEach(function (ngModule) {\n            allNgModules.push(ngModule);\n            ngModule.declaredDirectives.forEach(function (d) { return ngModuleByPipeOrDirective.set(d.reference, ngModule); });\n            ngModule.declaredPipes.forEach(function (p) { return ngModuleByPipeOrDirective.set(p.reference, ngModule); });\n        });\n        af.directives.forEach(function (d) { return allPipesAndDirectives.add(d); });\n        af.pipes.forEach(function (p) { return allPipesAndDirectives.add(p); });\n    });\n    var symbolsMissingModule = [];\n    allPipesAndDirectives.forEach(function (ref) {\n        if (!ngModuleByPipeOrDirective.has(ref)) {\n            symbolsMissingModule.push(ref);\n        }\n    });\n    return {\n        ngModules: allNgModules,\n        ngModuleByPipeOrDirective: ngModuleByPipeOrDirective,\n        symbolsMissingModule: symbolsMissingModule,\n        files: analyzedFiles\n    };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar FORMATTED_MESSAGE = 'ngFormattedMessage';\nfunction indentStr(level) {\n    if (level <= 0)\n        return '';\n    if (level < 6)\n        return ['', ' ', '  ', '   ', '    ', '     '][level];\n    var half = indentStr(Math.floor(level / 2));\n    return half + half + (level % 2 === 1 ? ' ' : '');\n}\nfunction formatChain(chain, indent) {\n    if (indent === void 0) { indent = 0; }\n    if (!chain)\n        return '';\n    var position = chain.position ?\n        chain.position.fileName + \"(\" + (chain.position.line + 1) + \",\" + (chain.position.column + 1) + \")\" :\n        '';\n    var prefix = position && indent === 0 ? position + \": \" : '';\n    var postfix = position && indent !== 0 ? \" at \" + position : '';\n    var message = \"\" + prefix + chain.message + postfix;\n    return \"\" + indentStr(indent) + message + ((chain.next && ('\\n' + formatChain(chain.next, indent + 2))) || '');\n}\nfunction formattedError(chain) {\n    var message = formatChain(chain) + '.';\n    var error$$1 = syntaxError(message);\n    error$$1[FORMATTED_MESSAGE] = true;\n    error$$1.chain = chain;\n    error$$1.position = chain.position;\n    return error$$1;\n}\nfunction isFormattedError(error$$1) {\n    return !!error$$1[FORMATTED_MESSAGE];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ANGULAR_CORE = '@angular/core';\nvar ANGULAR_ROUTER = '@angular/router';\nvar HIDDEN_KEY = /^\\$.*\\$$/;\nvar IGNORE = {\n    __symbolic: 'ignore'\n};\nvar USE_VALUE = 'useValue';\nvar PROVIDE = 'provide';\nvar REFERENCE_SET = new Set([USE_VALUE, 'useFactory', 'data', 'id', 'loadChildren']);\nvar TYPEGUARD_POSTFIX = 'TypeGuard';\nvar USE_IF = 'UseIf';\nfunction shouldIgnore(value) {\n    return value && value.__symbolic == 'ignore';\n}\n/**\n * A static reflector implements enough of the Reflector API that is necessary to compile\n * templates statically.\n */\nvar StaticReflector = /** @class */ (function () {\n    function StaticReflector(summaryResolver, symbolResolver, knownMetadataClasses, knownMetadataFunctions, errorRecorder) {\n        if (knownMetadataClasses === void 0) { knownMetadataClasses = []; }\n        if (knownMetadataFunctions === void 0) { knownMetadataFunctions = []; }\n        var _this = this;\n        this.summaryResolver = summaryResolver;\n        this.symbolResolver = symbolResolver;\n        this.errorRecorder = errorRecorder;\n        this.annotationCache = new Map();\n        this.shallowAnnotationCache = new Map();\n        this.propertyCache = new Map();\n        this.parameterCache = new Map();\n        this.methodCache = new Map();\n        this.staticCache = new Map();\n        this.conversionMap = new Map();\n        this.resolvedExternalReferences = new Map();\n        this.annotationForParentClassWithSummaryKind = new Map();\n        this.initializeConversionMap();\n        knownMetadataClasses.forEach(function (kc) { return _this._registerDecoratorOrConstructor(_this.getStaticSymbol(kc.filePath, kc.name), kc.ctor); });\n        knownMetadataFunctions.forEach(function (kf) { return _this._registerFunction(_this.getStaticSymbol(kf.filePath, kf.name), kf.fn); });\n        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.Directive, [createDirective, createComponent]);\n        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.Pipe, [createPipe]);\n        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.NgModule, [createNgModule]);\n        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.Injectable, [createInjectable, createPipe, createDirective, createComponent, createNgModule]);\n    }\n    StaticReflector.prototype.componentModuleUrl = function (typeOrFunc) {\n        var staticSymbol = this.findSymbolDeclaration(typeOrFunc);\n        return this.symbolResolver.getResourcePath(staticSymbol);\n    };\n    StaticReflector.prototype.resolveExternalReference = function (ref, containingFile) {\n        var key = undefined;\n        if (!containingFile) {\n            key = ref.moduleName + \":\" + ref.name;\n            var declarationSymbol_1 = this.resolvedExternalReferences.get(key);\n            if (declarationSymbol_1)\n                return declarationSymbol_1;\n        }\n        var refSymbol = this.symbolResolver.getSymbolByModule(ref.moduleName, ref.name, containingFile);\n        var declarationSymbol = this.findSymbolDeclaration(refSymbol);\n        if (!containingFile) {\n            this.symbolResolver.recordModuleNameForFileName(refSymbol.filePath, ref.moduleName);\n            this.symbolResolver.recordImportAs(declarationSymbol, refSymbol);\n        }\n        if (key) {\n            this.resolvedExternalReferences.set(key, declarationSymbol);\n        }\n        return declarationSymbol;\n    };\n    StaticReflector.prototype.findDeclaration = function (moduleUrl, name, containingFile) {\n        return this.findSymbolDeclaration(this.symbolResolver.getSymbolByModule(moduleUrl, name, containingFile));\n    };\n    StaticReflector.prototype.tryFindDeclaration = function (moduleUrl, name, containingFile) {\n        var _this = this;\n        return this.symbolResolver.ignoreErrorsFor(function () { return _this.findDeclaration(moduleUrl, name, containingFile); });\n    };\n    StaticReflector.prototype.findSymbolDeclaration = function (symbol) {\n        var resolvedSymbol = this.symbolResolver.resolveSymbol(symbol);\n        if (resolvedSymbol) {\n            var resolvedMetadata = resolvedSymbol.metadata;\n            if (resolvedMetadata && resolvedMetadata.__symbolic === 'resolved') {\n                resolvedMetadata = resolvedMetadata.symbol;\n            }\n            if (resolvedMetadata instanceof StaticSymbol) {\n                return this.findSymbolDeclaration(resolvedSymbol.metadata);\n            }\n        }\n        return symbol;\n    };\n    StaticReflector.prototype.tryAnnotations = function (type) {\n        var originalRecorder = this.errorRecorder;\n        this.errorRecorder = function (error$$1, fileName) { };\n        try {\n            return this.annotations(type);\n        }\n        finally {\n            this.errorRecorder = originalRecorder;\n        }\n    };\n    StaticReflector.prototype.annotations = function (type) {\n        var _this = this;\n        return this._annotations(type, function (type, decorators) { return _this.simplify(type, decorators); }, this.annotationCache);\n    };\n    StaticReflector.prototype.shallowAnnotations = function (type) {\n        var _this = this;\n        return this._annotations(type, function (type, decorators) { return _this.simplify(type, decorators, true); }, this.shallowAnnotationCache);\n    };\n    StaticReflector.prototype._annotations = function (type, simplify, annotationCache) {\n        var annotations = annotationCache.get(type);\n        if (!annotations) {\n            annotations = [];\n            var classMetadata = this.getTypeMetadata(type);\n            var parentType = this.findParentType(type, classMetadata);\n            if (parentType) {\n                var parentAnnotations = this.annotations(parentType);\n                annotations.push.apply(annotations, __spread(parentAnnotations));\n            }\n            var ownAnnotations_1 = [];\n            if (classMetadata['decorators']) {\n                ownAnnotations_1 = simplify(type, classMetadata['decorators']);\n                if (ownAnnotations_1) {\n                    annotations.push.apply(annotations, __spread(ownAnnotations_1));\n                }\n            }\n            if (parentType && !this.summaryResolver.isLibraryFile(type.filePath) &&\n                this.summaryResolver.isLibraryFile(parentType.filePath)) {\n                var summary = this.summaryResolver.resolveSummary(parentType);\n                if (summary && summary.type) {\n                    var requiredAnnotationTypes = this.annotationForParentClassWithSummaryKind.get(summary.type.summaryKind);\n                    var typeHasRequiredAnnotation = requiredAnnotationTypes.some(function (requiredType) { return ownAnnotations_1.some(function (ann) { return requiredType.isTypeOf(ann); }); });\n                    if (!typeHasRequiredAnnotation) {\n                        this.reportError(formatMetadataError(metadataError(\"Class \" + type.name + \" in \" + type.filePath + \" extends from a \" + CompileSummaryKind[summary.type.summaryKind] + \" in another compilation unit without duplicating the decorator\", \n                        /* summary */ undefined, \"Please add a \" + requiredAnnotationTypes.map(function (type) { return type.ngMetadataName; }).join(' or ') + \" decorator to the class\"), type), type);\n                    }\n                }\n            }\n            annotationCache.set(type, annotations.filter(function (ann) { return !!ann; }));\n        }\n        return annotations;\n    };\n    StaticReflector.prototype.propMetadata = function (type) {\n        var _this = this;\n        var propMetadata = this.propertyCache.get(type);\n        if (!propMetadata) {\n            var classMetadata = this.getTypeMetadata(type);\n            propMetadata = {};\n            var parentType = this.findParentType(type, classMetadata);\n            if (parentType) {\n                var parentPropMetadata_1 = this.propMetadata(parentType);\n                Object.keys(parentPropMetadata_1).forEach(function (parentProp) {\n                    propMetadata[parentProp] = parentPropMetadata_1[parentProp];\n                });\n            }\n            var members_1 = classMetadata['members'] || {};\n            Object.keys(members_1).forEach(function (propName) {\n                var propData = members_1[propName];\n                var prop = propData\n                    .find(function (a) { return a['__symbolic'] == 'property' || a['__symbolic'] == 'method'; });\n                var decorators = [];\n                if (propMetadata[propName]) {\n                    decorators.push.apply(decorators, __spread(propMetadata[propName]));\n                }\n                propMetadata[propName] = decorators;\n                if (prop && prop['decorators']) {\n                    decorators.push.apply(decorators, __spread(_this.simplify(type, prop['decorators'])));\n                }\n            });\n            this.propertyCache.set(type, propMetadata);\n        }\n        return propMetadata;\n    };\n    StaticReflector.prototype.parameters = function (type) {\n        var _this = this;\n        if (!(type instanceof StaticSymbol)) {\n            this.reportError(new Error(\"parameters received \" + JSON.stringify(type) + \" which is not a StaticSymbol\"), type);\n            return [];\n        }\n        try {\n            var parameters_1 = this.parameterCache.get(type);\n            if (!parameters_1) {\n                var classMetadata = this.getTypeMetadata(type);\n                var parentType = this.findParentType(type, classMetadata);\n                var members = classMetadata ? classMetadata['members'] : null;\n                var ctorData = members ? members['__ctor__'] : null;\n                if (ctorData) {\n                    var ctor = ctorData.find(function (a) { return a['__symbolic'] == 'constructor'; });\n                    var rawParameterTypes = ctor['parameters'] || [];\n                    var parameterDecorators_1 = this.simplify(type, ctor['parameterDecorators'] || []);\n                    parameters_1 = [];\n                    rawParameterTypes.forEach(function (rawParamType, index) {\n                        var nestedResult = [];\n                        var paramType = _this.trySimplify(type, rawParamType);\n                        if (paramType)\n                            nestedResult.push(paramType);\n                        var decorators = parameterDecorators_1 ? parameterDecorators_1[index] : null;\n                        if (decorators) {\n                            nestedResult.push.apply(nestedResult, __spread(decorators));\n                        }\n                        parameters_1.push(nestedResult);\n                    });\n                }\n                else if (parentType) {\n                    parameters_1 = this.parameters(parentType);\n                }\n                if (!parameters_1) {\n                    parameters_1 = [];\n                }\n                this.parameterCache.set(type, parameters_1);\n            }\n            return parameters_1;\n        }\n        catch (e) {\n            console.error(\"Failed on type \" + JSON.stringify(type) + \" with error \" + e);\n            throw e;\n        }\n    };\n    StaticReflector.prototype._methodNames = function (type) {\n        var methodNames = this.methodCache.get(type);\n        if (!methodNames) {\n            var classMetadata = this.getTypeMetadata(type);\n            methodNames = {};\n            var parentType = this.findParentType(type, classMetadata);\n            if (parentType) {\n                var parentMethodNames_1 = this._methodNames(parentType);\n                Object.keys(parentMethodNames_1).forEach(function (parentProp) {\n                    methodNames[parentProp] = parentMethodNames_1[parentProp];\n                });\n            }\n            var members_2 = classMetadata['members'] || {};\n            Object.keys(members_2).forEach(function (propName) {\n                var propData = members_2[propName];\n                var isMethod = propData.some(function (a) { return a['__symbolic'] == 'method'; });\n                methodNames[propName] = methodNames[propName] || isMethod;\n            });\n            this.methodCache.set(type, methodNames);\n        }\n        return methodNames;\n    };\n    StaticReflector.prototype._staticMembers = function (type) {\n        var staticMembers = this.staticCache.get(type);\n        if (!staticMembers) {\n            var classMetadata = this.getTypeMetadata(type);\n            var staticMemberData = classMetadata['statics'] || {};\n            staticMembers = Object.keys(staticMemberData);\n            this.staticCache.set(type, staticMembers);\n        }\n        return staticMembers;\n    };\n    StaticReflector.prototype.findParentType = function (type, classMetadata) {\n        var parentType = this.trySimplify(type, classMetadata['extends']);\n        if (parentType instanceof StaticSymbol) {\n            return parentType;\n        }\n    };\n    StaticReflector.prototype.hasLifecycleHook = function (type, lcProperty) {\n        if (!(type instanceof StaticSymbol)) {\n            this.reportError(new Error(\"hasLifecycleHook received \" + JSON.stringify(type) + \" which is not a StaticSymbol\"), type);\n        }\n        try {\n            return !!this._methodNames(type)[lcProperty];\n        }\n        catch (e) {\n            console.error(\"Failed on type \" + JSON.stringify(type) + \" with error \" + e);\n            throw e;\n        }\n    };\n    StaticReflector.prototype.guards = function (type) {\n        if (!(type instanceof StaticSymbol)) {\n            this.reportError(new Error(\"guards received \" + JSON.stringify(type) + \" which is not a StaticSymbol\"), type);\n            return {};\n        }\n        var staticMembers = this._staticMembers(type);\n        var result = {};\n        try {\n            for (var staticMembers_1 = __values(staticMembers), staticMembers_1_1 = staticMembers_1.next(); !staticMembers_1_1.done; staticMembers_1_1 = staticMembers_1.next()) {\n                var name_1 = staticMembers_1_1.value;\n                if (name_1.endsWith(TYPEGUARD_POSTFIX)) {\n                    var property = name_1.substr(0, name_1.length - TYPEGUARD_POSTFIX.length);\n                    var value = void 0;\n                    if (property.endsWith(USE_IF)) {\n                        property = name_1.substr(0, property.length - USE_IF.length);\n                        value = USE_IF;\n                    }\n                    else {\n                        value = this.getStaticSymbol(type.filePath, type.name, [name_1]);\n                    }\n                    result[property] = value;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (staticMembers_1_1 && !staticMembers_1_1.done && (_a = staticMembers_1.return)) _a.call(staticMembers_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return result;\n        var e_1, _a;\n    };\n    StaticReflector.prototype._registerDecoratorOrConstructor = function (type, ctor) {\n        this.conversionMap.set(type, function (context, args) { return new (ctor.bind.apply(ctor, __spread([void 0], args)))(); });\n    };\n    StaticReflector.prototype._registerFunction = function (type, fn) {\n        this.conversionMap.set(type, function (context, args) { return fn.apply(undefined, args); });\n    };\n    StaticReflector.prototype.initializeConversionMap = function () {\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Injectable'), createInjectable);\n        this.injectionToken = this.findDeclaration(ANGULAR_CORE, 'InjectionToken');\n        this.opaqueToken = this.findDeclaration(ANGULAR_CORE, 'OpaqueToken');\n        this.ROUTES = this.tryFindDeclaration(ANGULAR_ROUTER, 'ROUTES');\n        this.ANALYZE_FOR_ENTRY_COMPONENTS =\n            this.findDeclaration(ANGULAR_CORE, 'ANALYZE_FOR_ENTRY_COMPONENTS');\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Host'), createHost);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Self'), createSelf);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'SkipSelf'), createSkipSelf);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Inject'), createInject);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Optional'), createOptional);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Attribute'), createAttribute);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ContentChild'), createContentChild);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ContentChildren'), createContentChildren);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ViewChild'), createViewChild);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ViewChildren'), createViewChildren);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Input'), createInput);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Output'), createOutput);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Pipe'), createPipe);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'HostBinding'), createHostBinding);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'HostListener'), createHostListener);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Directive'), createDirective);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Component'), createComponent);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'NgModule'), createNgModule);\n        // Note: Some metadata classes can be used directly with Provider.deps.\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Host'), createHost);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Self'), createSelf);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'SkipSelf'), createSkipSelf);\n        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Optional'), createOptional);\n    };\n    /**\n     * getStaticSymbol produces a Type whose metadata is known but whose implementation is not loaded.\n     * All types passed to the StaticResolver should be pseudo-types returned by this method.\n     *\n     * @param declarationFile the absolute path of the file where the symbol is declared\n     * @param name the name of the type.\n     */\n    StaticReflector.prototype.getStaticSymbol = function (declarationFile, name, members) {\n        return this.symbolResolver.getStaticSymbol(declarationFile, name, members);\n    };\n    /**\n     * Simplify but discard any errors\n     */\n    StaticReflector.prototype.trySimplify = function (context, value) {\n        var originalRecorder = this.errorRecorder;\n        this.errorRecorder = function (error$$1, fileName) { };\n        var result = this.simplify(context, value);\n        this.errorRecorder = originalRecorder;\n        return result;\n    };\n    /** @internal */\n    StaticReflector.prototype.simplify = function (context, value, lazy) {\n        if (lazy === void 0) { lazy = false; }\n        var self = this;\n        var scope = BindingScope$1.empty;\n        var calling = new Map();\n        function simplifyInContext(context, value, depth, references) {\n            function resolveReferenceValue(staticSymbol) {\n                var resolvedSymbol = self.symbolResolver.resolveSymbol(staticSymbol);\n                return resolvedSymbol ? resolvedSymbol.metadata : null;\n            }\n            function simplifyEagerly(value) {\n                return simplifyInContext(context, value, depth, 0);\n            }\n            function simplifyLazily(value) {\n                return simplifyInContext(context, value, depth, references + 1);\n            }\n            function simplifyNested(nestedContext, value) {\n                if (nestedContext === context) {\n                    // If the context hasn't changed let the exception propagate unmodified.\n                    return simplifyInContext(nestedContext, value, depth + 1, references);\n                }\n                try {\n                    return simplifyInContext(nestedContext, value, depth + 1, references);\n                }\n                catch (e) {\n                    if (isMetadataError(e)) {\n                        // Propagate the message text up but add a message to the chain that explains how we got\n                        // here.\n                        // e.chain implies e.symbol\n                        var summaryMsg = e.chain ? 'references \\'' + e.symbol.name + '\\'' : errorSummary(e);\n                        var summary = \"'\" + nestedContext.name + \"' \" + summaryMsg;\n                        var chain = { message: summary, position: e.position, next: e.chain };\n                        // TODO(chuckj): retrieve the position information indirectly from the collectors node\n                        // map if the metadata is from a .ts file.\n                        self.error({\n                            message: e.message,\n                            advise: e.advise,\n                            context: e.context, chain: chain,\n                            symbol: nestedContext\n                        }, context);\n                    }\n                    else {\n                        // It is probably an internal error.\n                        throw e;\n                    }\n                }\n            }\n            function simplifyCall(functionSymbol, targetFunction, args, targetExpression) {\n                if (targetFunction && targetFunction['__symbolic'] == 'function') {\n                    if (calling.get(functionSymbol)) {\n                        self.error({\n                            message: 'Recursion is not supported',\n                            summary: \"called '\" + functionSymbol.name + \"' recursively\",\n                            value: targetFunction\n                        }, functionSymbol);\n                    }\n                    try {\n                        var value_1 = targetFunction['value'];\n                        if (value_1 && (depth != 0 || value_1.__symbolic != 'error')) {\n                            var parameters = targetFunction['parameters'];\n                            var defaults = targetFunction.defaults;\n                            args = args.map(function (arg) { return simplifyNested(context, arg); })\n                                .map(function (arg) { return shouldIgnore(arg) ? undefined : arg; });\n                            if (defaults && defaults.length > args.length) {\n                                args.push.apply(args, __spread(defaults.slice(args.length).map(function (value) { return simplify(value); })));\n                            }\n                            calling.set(functionSymbol, true);\n                            var functionScope = BindingScope$1.build();\n                            for (var i = 0; i < parameters.length; i++) {\n                                functionScope.define(parameters[i], args[i]);\n                            }\n                            var oldScope = scope;\n                            var result_1;\n                            try {\n                                scope = functionScope.done();\n                                result_1 = simplifyNested(functionSymbol, value_1);\n                            }\n                            finally {\n                                scope = oldScope;\n                            }\n                            return result_1;\n                        }\n                    }\n                    finally {\n                        calling.delete(functionSymbol);\n                    }\n                }\n                if (depth === 0) {\n                    // If depth is 0 we are evaluating the top level expression that is describing element\n                    // decorator. In this case, it is a decorator we don't understand, such as a custom\n                    // non-angular decorator, and we should just ignore it.\n                    return IGNORE;\n                }\n                var position = undefined;\n                if (targetExpression && targetExpression.__symbolic == 'resolved') {\n                    var line = targetExpression.line;\n                    var character = targetExpression.character;\n                    var fileName = targetExpression.fileName;\n                    if (fileName != null && line != null && character != null) {\n                        position = { fileName: fileName, line: line, column: character };\n                    }\n                }\n                self.error({\n                    message: FUNCTION_CALL_NOT_SUPPORTED,\n                    context: functionSymbol,\n                    value: targetFunction, position: position\n                }, context);\n            }\n            function simplify(expression) {\n                if (isPrimitive(expression)) {\n                    return expression;\n                }\n                if (expression instanceof Array) {\n                    var result_2 = [];\n                    try {\n                        for (var _a = __values(expression), _b = _a.next(); !_b.done; _b = _a.next()) {\n                            var item = _b.value;\n                            // Check for a spread expression\n                            if (item && item.__symbolic === 'spread') {\n                                // We call with references as 0 because we require the actual value and cannot\n                                // tolerate a reference here.\n                                var spreadArray = simplifyEagerly(item.expression);\n                                if (Array.isArray(spreadArray)) {\n                                    try {\n                                        for (var spreadArray_1 = __values(spreadArray), spreadArray_1_1 = spreadArray_1.next(); !spreadArray_1_1.done; spreadArray_1_1 = spreadArray_1.next()) {\n                                            var spreadItem = spreadArray_1_1.value;\n                                            result_2.push(spreadItem);\n                                        }\n                                    }\n                                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                                    finally {\n                                        try {\n                                            if (spreadArray_1_1 && !spreadArray_1_1.done && (_c = spreadArray_1.return)) _c.call(spreadArray_1);\n                                        }\n                                        finally { if (e_2) throw e_2.error; }\n                                    }\n                                    continue;\n                                }\n                            }\n                            var value_2 = simplify(item);\n                            if (shouldIgnore(value_2)) {\n                                continue;\n                            }\n                            result_2.push(value_2);\n                        }\n                    }\n                    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                    finally {\n                        try {\n                            if (_b && !_b.done && (_d = _a.return)) _d.call(_a);\n                        }\n                        finally { if (e_3) throw e_3.error; }\n                    }\n                    return result_2;\n                }\n                if (expression instanceof StaticSymbol) {\n                    // Stop simplification at builtin symbols or if we are in a reference context and\n                    // the symbol doesn't have members.\n                    if (expression === self.injectionToken || self.conversionMap.has(expression) ||\n                        (references > 0 && !expression.members.length)) {\n                        return expression;\n                    }\n                    else {\n                        var staticSymbol = expression;\n                        var declarationValue = resolveReferenceValue(staticSymbol);\n                        if (declarationValue != null) {\n                            return simplifyNested(staticSymbol, declarationValue);\n                        }\n                        else {\n                            return staticSymbol;\n                        }\n                    }\n                }\n                if (expression) {\n                    if (expression['__symbolic']) {\n                        var staticSymbol = void 0;\n                        switch (expression['__symbolic']) {\n                            case 'binop':\n                                var left = simplify(expression['left']);\n                                if (shouldIgnore(left))\n                                    return left;\n                                var right = simplify(expression['right']);\n                                if (shouldIgnore(right))\n                                    return right;\n                                switch (expression['operator']) {\n                                    case '&&':\n                                        return left && right;\n                                    case '||':\n                                        return left || right;\n                                    case '|':\n                                        return left | right;\n                                    case '^':\n                                        return left ^ right;\n                                    case '&':\n                                        return left & right;\n                                    case '==':\n                                        return left == right;\n                                    case '!=':\n                                        return left != right;\n                                    case '===':\n                                        return left === right;\n                                    case '!==':\n                                        return left !== right;\n                                    case '<':\n                                        return left < right;\n                                    case '>':\n                                        return left > right;\n                                    case '<=':\n                                        return left <= right;\n                                    case '>=':\n                                        return left >= right;\n                                    case '<<':\n                                        return left << right;\n                                    case '>>':\n                                        return left >> right;\n                                    case '+':\n                                        return left + right;\n                                    case '-':\n                                        return left - right;\n                                    case '*':\n                                        return left * right;\n                                    case '/':\n                                        return left / right;\n                                    case '%':\n                                        return left % right;\n                                }\n                                return null;\n                            case 'if':\n                                var condition = simplify(expression['condition']);\n                                return condition ? simplify(expression['thenExpression']) :\n                                    simplify(expression['elseExpression']);\n                            case 'pre':\n                                var operand = simplify(expression['operand']);\n                                if (shouldIgnore(operand))\n                                    return operand;\n                                switch (expression['operator']) {\n                                    case '+':\n                                        return operand;\n                                    case '-':\n                                        return -operand;\n                                    case '!':\n                                        return !operand;\n                                    case '~':\n                                        return ~operand;\n                                }\n                                return null;\n                            case 'index':\n                                var indexTarget = simplifyEagerly(expression['expression']);\n                                var index = simplifyEagerly(expression['index']);\n                                if (indexTarget && isPrimitive(index))\n                                    return indexTarget[index];\n                                return null;\n                            case 'select':\n                                var member = expression['member'];\n                                var selectContext = context;\n                                var selectTarget = simplify(expression['expression']);\n                                if (selectTarget instanceof StaticSymbol) {\n                                    var members = selectTarget.members.concat(member);\n                                    selectContext =\n                                        self.getStaticSymbol(selectTarget.filePath, selectTarget.name, members);\n                                    var declarationValue = resolveReferenceValue(selectContext);\n                                    if (declarationValue != null) {\n                                        return simplifyNested(selectContext, declarationValue);\n                                    }\n                                    else {\n                                        return selectContext;\n                                    }\n                                }\n                                if (selectTarget && isPrimitive(member))\n                                    return simplifyNested(selectContext, selectTarget[member]);\n                                return null;\n                            case 'reference':\n                                // Note: This only has to deal with variable references, as symbol references have\n                                // been converted into 'resolved'\n                                // in the StaticSymbolResolver.\n                                var name_2 = expression['name'];\n                                var localValue = scope.resolve(name_2);\n                                if (localValue != BindingScope$1.missing) {\n                                    return localValue;\n                                }\n                                break;\n                            case 'resolved':\n                                try {\n                                    return simplify(expression.symbol);\n                                }\n                                catch (e) {\n                                    // If an error is reported evaluating the symbol record the position of the\n                                    // reference in the error so it can\n                                    // be reported in the error message generated from the exception.\n                                    if (isMetadataError(e) && expression.fileName != null &&\n                                        expression.line != null && expression.character != null) {\n                                        e.position = {\n                                            fileName: expression.fileName,\n                                            line: expression.line,\n                                            column: expression.character\n                                        };\n                                    }\n                                    throw e;\n                                }\n                            case 'class':\n                                return context;\n                            case 'function':\n                                return context;\n                            case 'new':\n                            case 'call':\n                                // Determine if the function is a built-in conversion\n                                staticSymbol = simplifyInContext(context, expression['expression'], depth + 1, /* references */ 0);\n                                if (staticSymbol instanceof StaticSymbol) {\n                                    if (staticSymbol === self.injectionToken || staticSymbol === self.opaqueToken) {\n                                        // if somebody calls new InjectionToken, don't create an InjectionToken,\n                                        // but rather return the symbol to which the InjectionToken is assigned to.\n                                        // OpaqueToken is supported too as it is required by the language service to\n                                        // support v4 and prior versions of Angular.\n                                        return context;\n                                    }\n                                    var argExpressions = expression['arguments'] || [];\n                                    var converter = self.conversionMap.get(staticSymbol);\n                                    if (converter) {\n                                        var args = argExpressions.map(function (arg) { return simplifyNested(context, arg); })\n                                            .map(function (arg) { return shouldIgnore(arg) ? undefined : arg; });\n                                        return converter(context, args);\n                                    }\n                                    else {\n                                        // Determine if the function is one we can simplify.\n                                        var targetFunction = resolveReferenceValue(staticSymbol);\n                                        return simplifyCall(staticSymbol, targetFunction, argExpressions, expression['expression']);\n                                    }\n                                }\n                                return IGNORE;\n                            case 'error':\n                                var message = expression.message;\n                                if (expression['line'] != null) {\n                                    self.error({\n                                        message: message,\n                                        context: expression.context,\n                                        value: expression,\n                                        position: {\n                                            fileName: expression['fileName'],\n                                            line: expression['line'],\n                                            column: expression['character']\n                                        }\n                                    }, context);\n                                }\n                                else {\n                                    self.error({ message: message, context: expression.context }, context);\n                                }\n                                return IGNORE;\n                            case 'ignore':\n                                return expression;\n                        }\n                        return null;\n                    }\n                    return mapStringMap(expression, function (value, name) {\n                        if (REFERENCE_SET.has(name)) {\n                            if (name === USE_VALUE && PROVIDE in expression) {\n                                // If this is a provider expression, check for special tokens that need the value\n                                // during analysis.\n                                var provide = simplify(expression.provide);\n                                if (provide === self.ROUTES || provide == self.ANALYZE_FOR_ENTRY_COMPONENTS) {\n                                    return simplify(value);\n                                }\n                            }\n                            return simplifyLazily(value);\n                        }\n                        return simplify(value);\n                    });\n                }\n                return IGNORE;\n                var e_3, _d, e_2, _c;\n            }\n            return simplify(value);\n        }\n        var result;\n        try {\n            result = simplifyInContext(context, value, 0, lazy ? 1 : 0);\n        }\n        catch (e) {\n            if (this.errorRecorder) {\n                this.reportError(e, context);\n            }\n            else {\n                throw formatMetadataError(e, context);\n            }\n        }\n        if (shouldIgnore(result)) {\n            return undefined;\n        }\n        return result;\n    };\n    StaticReflector.prototype.getTypeMetadata = function (type) {\n        var resolvedSymbol = this.symbolResolver.resolveSymbol(type);\n        return resolvedSymbol && resolvedSymbol.metadata ? resolvedSymbol.metadata :\n            { __symbolic: 'class' };\n    };\n    StaticReflector.prototype.reportError = function (error$$1, context, path$$1) {\n        if (this.errorRecorder) {\n            this.errorRecorder(formatMetadataError(error$$1, context), (context && context.filePath) || path$$1);\n        }\n        else {\n            throw error$$1;\n        }\n    };\n    StaticReflector.prototype.error = function (_a, reportingContext) {\n        var message = _a.message, summary = _a.summary, advise = _a.advise, position = _a.position, context = _a.context, value = _a.value, symbol = _a.symbol, chain = _a.chain;\n        this.reportError(metadataError(message, summary, advise, position, symbol, context, chain), reportingContext);\n    };\n    return StaticReflector;\n}());\nvar METADATA_ERROR = 'ngMetadataError';\nfunction metadataError(message, summary, advise, position, symbol, context, chain) {\n    var error$$1 = syntaxError(message);\n    error$$1[METADATA_ERROR] = true;\n    if (advise)\n        error$$1.advise = advise;\n    if (position)\n        error$$1.position = position;\n    if (summary)\n        error$$1.summary = summary;\n    if (context)\n        error$$1.context = context;\n    if (chain)\n        error$$1.chain = chain;\n    if (symbol)\n        error$$1.symbol = symbol;\n    return error$$1;\n}\nfunction isMetadataError(error$$1) {\n    return !!error$$1[METADATA_ERROR];\n}\nvar REFERENCE_TO_NONEXPORTED_CLASS = 'Reference to non-exported class';\nvar VARIABLE_NOT_INITIALIZED = 'Variable not initialized';\nvar DESTRUCTURE_NOT_SUPPORTED = 'Destructuring not supported';\nvar COULD_NOT_RESOLVE_TYPE = 'Could not resolve type';\nvar FUNCTION_CALL_NOT_SUPPORTED = 'Function call not supported';\nvar REFERENCE_TO_LOCAL_SYMBOL = 'Reference to a local symbol';\nvar LAMBDA_NOT_SUPPORTED = 'Lambda not supported';\nfunction expandedMessage(message, context) {\n    switch (message) {\n        case REFERENCE_TO_NONEXPORTED_CLASS:\n            if (context && context.className) {\n                return \"References to a non-exported class are not supported in decorators but \" + context.className + \" was referenced.\";\n            }\n            break;\n        case VARIABLE_NOT_INITIALIZED:\n            return 'Only initialized variables and constants can be referenced in decorators because the value of this variable is needed by the template compiler';\n        case DESTRUCTURE_NOT_SUPPORTED:\n            return 'Referencing an exported destructured variable or constant is not supported in decorators and this value is needed by the template compiler';\n        case COULD_NOT_RESOLVE_TYPE:\n            if (context && context.typeName) {\n                return \"Could not resolve type \" + context.typeName;\n            }\n            break;\n        case FUNCTION_CALL_NOT_SUPPORTED:\n            if (context && context.name) {\n                return \"Function calls are not supported in decorators but '\" + context.name + \"' was called\";\n            }\n            return 'Function calls are not supported in decorators';\n        case REFERENCE_TO_LOCAL_SYMBOL:\n            if (context && context.name) {\n                return \"Reference to a local (non-exported) symbols are not supported in decorators but '\" + context.name + \"' was referenced\";\n            }\n            break;\n        case LAMBDA_NOT_SUPPORTED:\n            return \"Function expressions are not supported in decorators\";\n    }\n    return message;\n}\nfunction messageAdvise(message, context) {\n    switch (message) {\n        case REFERENCE_TO_NONEXPORTED_CLASS:\n            if (context && context.className) {\n                return \"Consider exporting '\" + context.className + \"'\";\n            }\n            break;\n        case DESTRUCTURE_NOT_SUPPORTED:\n            return 'Consider simplifying to avoid destructuring';\n        case REFERENCE_TO_LOCAL_SYMBOL:\n            if (context && context.name) {\n                return \"Consider exporting '\" + context.name + \"'\";\n            }\n            break;\n        case LAMBDA_NOT_SUPPORTED:\n            return \"Consider changing the function expression into an exported function\";\n    }\n    return undefined;\n}\nfunction errorSummary(error$$1) {\n    if (error$$1.summary) {\n        return error$$1.summary;\n    }\n    switch (error$$1.message) {\n        case REFERENCE_TO_NONEXPORTED_CLASS:\n            if (error$$1.context && error$$1.context.className) {\n                return \"references non-exported class \" + error$$1.context.className;\n            }\n            break;\n        case VARIABLE_NOT_INITIALIZED:\n            return 'is not initialized';\n        case DESTRUCTURE_NOT_SUPPORTED:\n            return 'is a destructured variable';\n        case COULD_NOT_RESOLVE_TYPE:\n            return 'could not be resolved';\n        case FUNCTION_CALL_NOT_SUPPORTED:\n            if (error$$1.context && error$$1.context.name) {\n                return \"calls '\" + error$$1.context.name + \"'\";\n            }\n            return \"calls a function\";\n        case REFERENCE_TO_LOCAL_SYMBOL:\n            if (error$$1.context && error$$1.context.name) {\n                return \"references local variable \" + error$$1.context.name;\n            }\n            return \"references a local variable\";\n    }\n    return 'contains the error';\n}\nfunction mapStringMap(input, transform) {\n    if (!input)\n        return {};\n    var result = {};\n    Object.keys(input).forEach(function (key) {\n        var value = transform(input[key], key);\n        if (!shouldIgnore(value)) {\n            if (HIDDEN_KEY.test(key)) {\n                Object.defineProperty(result, key, { enumerable: false, configurable: true, value: value });\n            }\n            else {\n                result[key] = value;\n            }\n        }\n    });\n    return result;\n}\nfunction isPrimitive(o) {\n    return o === null || (typeof o !== 'function' && typeof o !== 'object');\n}\nvar BindingScope$1 = /** @class */ (function () {\n    function BindingScope() {\n    }\n    BindingScope.build = function () {\n        var current = new Map();\n        return {\n            define: function (name, value) {\n                current.set(name, value);\n                return this;\n            },\n            done: function () {\n                return current.size > 0 ? new PopulatedScope(current) : BindingScope.empty;\n            }\n        };\n    };\n    BindingScope.missing = {};\n    BindingScope.empty = { resolve: function (name) { return BindingScope.missing; } };\n    return BindingScope;\n}());\nvar PopulatedScope = /** @class */ (function (_super) {\n    __extends(PopulatedScope, _super);\n    function PopulatedScope(bindings) {\n        var _this = _super.call(this) || this;\n        _this.bindings = bindings;\n        return _this;\n    }\n    PopulatedScope.prototype.resolve = function (name) {\n        return this.bindings.has(name) ? this.bindings.get(name) : BindingScope$1.missing;\n    };\n    return PopulatedScope;\n}(BindingScope$1));\nfunction formatMetadataMessageChain(chain, advise) {\n    var expanded = expandedMessage(chain.message, chain.context);\n    var nesting = chain.symbol ? \" in '\" + chain.symbol.name + \"'\" : '';\n    var message = \"\" + expanded + nesting;\n    var position = chain.position;\n    var next = chain.next ?\n        formatMetadataMessageChain(chain.next, advise) :\n        advise ? { message: advise } : undefined;\n    return { message: message, position: position, next: next };\n}\nfunction formatMetadataError(e, context) {\n    if (isMetadataError(e)) {\n        // Produce a formatted version of the and leaving enough information in the original error\n        // to recover the formatting information to eventually produce a diagnostic error message.\n        var position = e.position;\n        var chain = {\n            message: \"Error during template compile of '\" + context.name + \"'\",\n            position: position,\n            next: { message: e.message, next: e.chain, context: e.context, symbol: e.symbol }\n        };\n        var advise = e.advise || messageAdvise(e.message, e.context);\n        return formattedError(formatMetadataMessageChain(chain, advise));\n    }\n    return e;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar AotSummaryResolver = /** @class */ (function () {\n    function AotSummaryResolver(host, staticSymbolCache) {\n        this.host = host;\n        this.staticSymbolCache = staticSymbolCache;\n        // Note: this will only contain StaticSymbols without members!\n        this.summaryCache = new Map();\n        this.loadedFilePaths = new Map();\n        // Note: this will only contain StaticSymbols without members!\n        this.importAs = new Map();\n        this.knownFileNameToModuleNames = new Map();\n    }\n    AotSummaryResolver.prototype.isLibraryFile = function (filePath) {\n        // Note: We need to strip the .ngfactory. file path,\n        // so this method also works for generated files\n        // (for which host.isSourceFile will always return false).\n        return !this.host.isSourceFile(stripGeneratedFileSuffix(filePath));\n    };\n    AotSummaryResolver.prototype.toSummaryFileName = function (filePath, referringSrcFileName) {\n        return this.host.toSummaryFileName(filePath, referringSrcFileName);\n    };\n    AotSummaryResolver.prototype.fromSummaryFileName = function (fileName, referringLibFileName) {\n        return this.host.fromSummaryFileName(fileName, referringLibFileName);\n    };\n    AotSummaryResolver.prototype.resolveSummary = function (staticSymbol) {\n        var rootSymbol = staticSymbol.members.length ?\n            this.staticSymbolCache.get(staticSymbol.filePath, staticSymbol.name) :\n            staticSymbol;\n        var summary = this.summaryCache.get(rootSymbol);\n        if (!summary) {\n            this._loadSummaryFile(staticSymbol.filePath);\n            summary = this.summaryCache.get(staticSymbol);\n        }\n        return (rootSymbol === staticSymbol && summary) || null;\n    };\n    AotSummaryResolver.prototype.getSymbolsOf = function (filePath) {\n        if (this._loadSummaryFile(filePath)) {\n            return Array.from(this.summaryCache.keys()).filter(function (symbol) { return symbol.filePath === filePath; });\n        }\n        return null;\n    };\n    AotSummaryResolver.prototype.getImportAs = function (staticSymbol) {\n        staticSymbol.assertNoMembers();\n        return this.importAs.get(staticSymbol);\n    };\n    /**\n     * Converts a file path to a module name that can be used as an `import`.\n     */\n    AotSummaryResolver.prototype.getKnownModuleName = function (importedFilePath) {\n        return this.knownFileNameToModuleNames.get(importedFilePath) || null;\n    };\n    AotSummaryResolver.prototype.addSummary = function (summary) { this.summaryCache.set(summary.symbol, summary); };\n    AotSummaryResolver.prototype._loadSummaryFile = function (filePath) {\n        var _this = this;\n        var hasSummary = this.loadedFilePaths.get(filePath);\n        if (hasSummary != null) {\n            return hasSummary;\n        }\n        var json = null;\n        if (this.isLibraryFile(filePath)) {\n            var summaryFilePath = summaryFileName(filePath);\n            try {\n                json = this.host.loadSummary(summaryFilePath);\n            }\n            catch (e) {\n                console.error(\"Error loading summary file \" + summaryFilePath);\n                throw e;\n            }\n        }\n        hasSummary = json != null;\n        this.loadedFilePaths.set(filePath, hasSummary);\n        if (json) {\n            var _a = deserializeSummaries(this.staticSymbolCache, this, filePath, json), moduleName = _a.moduleName, summaries = _a.summaries, importAs = _a.importAs;\n            summaries.forEach(function (summary) { return _this.summaryCache.set(summary.symbol, summary); });\n            if (moduleName) {\n                this.knownFileNameToModuleNames.set(filePath, moduleName);\n            }\n            importAs.forEach(function (importAs) { _this.importAs.set(importAs.symbol, importAs.importAs); });\n        }\n        return hasSummary;\n    };\n    return AotSummaryResolver;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Creates a new AotCompiler based on options and a host.\n */\n\nvar JitSummaryResolver = /** @class */ (function () {\n    function JitSummaryResolver() {\n        this._summaries = new Map();\n    }\n    JitSummaryResolver.prototype.isLibraryFile = function () { return false; };\n    JitSummaryResolver.prototype.toSummaryFileName = function (fileName) { return fileName; };\n    JitSummaryResolver.prototype.fromSummaryFileName = function (fileName) { return fileName; };\n    JitSummaryResolver.prototype.resolveSummary = function (reference) {\n        return this._summaries.get(reference) || null;\n    };\n    JitSummaryResolver.prototype.getSymbolsOf = function () { return []; };\n    JitSummaryResolver.prototype.getImportAs = function (reference) { return reference; };\n    JitSummaryResolver.prototype.getKnownModuleName = function (fileName) { return null; };\n    JitSummaryResolver.prototype.addSummary = function (summary) { this._summaries.set(summary.symbol, summary); };\n    return JitSummaryResolver;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar AbstractJsEmitterVisitor = /** @class */ (function (_super) {\n    __extends(AbstractJsEmitterVisitor, _super);\n    function AbstractJsEmitterVisitor() {\n        return _super.call(this, false) || this;\n    }\n    AbstractJsEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) {\n        var _this = this;\n        ctx.pushClass(stmt);\n        this._visitClassConstructor(stmt, ctx);\n        if (stmt.parent != null) {\n            ctx.print(stmt, stmt.name + \".prototype = Object.create(\");\n            stmt.parent.visitExpression(this, ctx);\n            ctx.println(stmt, \".prototype);\");\n        }\n        stmt.getters.forEach(function (getter) { return _this._visitClassGetter(stmt, getter, ctx); });\n        stmt.methods.forEach(function (method) { return _this._visitClassMethod(stmt, method, ctx); });\n        ctx.popClass();\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype._visitClassConstructor = function (stmt, ctx) {\n        ctx.print(stmt, \"function \" + stmt.name + \"(\");\n        if (stmt.constructorMethod != null) {\n            this._visitParams(stmt.constructorMethod.params, ctx);\n        }\n        ctx.println(stmt, \") {\");\n        ctx.incIndent();\n        if (stmt.constructorMethod != null) {\n            if (stmt.constructorMethod.body.length > 0) {\n                ctx.println(stmt, \"var self = this;\");\n                this.visitAllStatements(stmt.constructorMethod.body, ctx);\n            }\n        }\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n    };\n    AbstractJsEmitterVisitor.prototype._visitClassGetter = function (stmt, getter, ctx) {\n        ctx.println(stmt, \"Object.defineProperty(\" + stmt.name + \".prototype, '\" + getter.name + \"', { get: function() {\");\n        ctx.incIndent();\n        if (getter.body.length > 0) {\n            ctx.println(stmt, \"var self = this;\");\n            this.visitAllStatements(getter.body, ctx);\n        }\n        ctx.decIndent();\n        ctx.println(stmt, \"}});\");\n    };\n    AbstractJsEmitterVisitor.prototype._visitClassMethod = function (stmt, method, ctx) {\n        ctx.print(stmt, stmt.name + \".prototype.\" + method.name + \" = function(\");\n        this._visitParams(method.params, ctx);\n        ctx.println(stmt, \") {\");\n        ctx.incIndent();\n        if (method.body.length > 0) {\n            ctx.println(stmt, \"var self = this;\");\n            this.visitAllStatements(method.body, ctx);\n        }\n        ctx.decIndent();\n        ctx.println(stmt, \"};\");\n    };\n    AbstractJsEmitterVisitor.prototype.visitWrappedNodeExpr = function (ast, ctx) {\n        throw new Error('Cannot emit a WrappedNodeExpr in Javascript.');\n    };\n    AbstractJsEmitterVisitor.prototype.visitReadVarExpr = function (ast, ctx) {\n        if (ast.builtin === BuiltinVar.This) {\n            ctx.print(ast, 'self');\n        }\n        else if (ast.builtin === BuiltinVar.Super) {\n            throw new Error(\"'super' needs to be handled at a parent ast node, not at the variable level!\");\n        }\n        else {\n            _super.prototype.visitReadVarExpr.call(this, ast, ctx);\n        }\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"var \" + stmt.name);\n        if (stmt.value) {\n            ctx.print(stmt, ' = ');\n            stmt.value.visitExpression(this, ctx);\n        }\n        ctx.println(stmt, \";\");\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitCastExpr = function (ast, ctx) {\n        ast.value.visitExpression(this, ctx);\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitInvokeFunctionExpr = function (expr, ctx) {\n        var fnExpr = expr.fn;\n        if (fnExpr instanceof ReadVarExpr && fnExpr.builtin === BuiltinVar.Super) {\n            ctx.currentClass.parent.visitExpression(this, ctx);\n            ctx.print(expr, \".call(this\");\n            if (expr.args.length > 0) {\n                ctx.print(expr, \", \");\n                this.visitAllExpressions(expr.args, ctx, ',');\n            }\n            ctx.print(expr, \")\");\n        }\n        else {\n            _super.prototype.visitInvokeFunctionExpr.call(this, expr, ctx);\n        }\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitFunctionExpr = function (ast, ctx) {\n        ctx.print(ast, \"function\" + (ast.name ? ' ' + ast.name : '') + \"(\");\n        this._visitParams(ast.params, ctx);\n        ctx.println(ast, \") {\");\n        ctx.incIndent();\n        this.visitAllStatements(ast.statements, ctx);\n        ctx.decIndent();\n        ctx.print(ast, \"}\");\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {\n        ctx.print(stmt, \"function \" + stmt.name + \"(\");\n        this._visitParams(stmt.params, ctx);\n        ctx.println(stmt, \") {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.statements, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype.visitTryCatchStmt = function (stmt, ctx) {\n        ctx.println(stmt, \"try {\");\n        ctx.incIndent();\n        this.visitAllStatements(stmt.bodyStmts, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"} catch (\" + CATCH_ERROR_VAR$1.name + \") {\");\n        ctx.incIndent();\n        var catchStmts = [CATCH_STACK_VAR$1.set(CATCH_ERROR_VAR$1.prop('stack')).toDeclStmt(null, [\n                StmtModifier.Final\n            ])].concat(stmt.catchStmts);\n        this.visitAllStatements(catchStmts, ctx);\n        ctx.decIndent();\n        ctx.println(stmt, \"}\");\n        return null;\n    };\n    AbstractJsEmitterVisitor.prototype._visitParams = function (params, ctx) {\n        this.visitAllObjects(function (param) { return ctx.print(null, param.name); }, params, ctx, ',');\n    };\n    AbstractJsEmitterVisitor.prototype.getBuiltinMethodName = function (method) {\n        var name;\n        switch (method) {\n            case BuiltinMethod.ConcatArray:\n                name = 'concat';\n                break;\n            case BuiltinMethod.SubscribeObservable:\n                name = 'subscribe';\n                break;\n            case BuiltinMethod.Bind:\n                name = 'bind';\n                break;\n            default:\n                throw new Error(\"Unknown builtin method: \" + method);\n        }\n        return name;\n    };\n    return AbstractJsEmitterVisitor;\n}(AbstractEmitterVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar JitEmitterVisitor = /** @class */ (function (_super) {\n    __extends(JitEmitterVisitor, _super);\n    function JitEmitterVisitor(reflector) {\n        var _this = _super.call(this) || this;\n        _this.reflector = reflector;\n        _this._evalArgNames = [];\n        _this._evalArgValues = [];\n        _this._evalExportedVars = [];\n        return _this;\n    }\n    JitEmitterVisitor.prototype.createReturnStmt = function (ctx) {\n        var stmt = new ReturnStatement(new LiteralMapExpr(this._evalExportedVars.map(function (resultVar) { return new LiteralMapEntry(resultVar, variable(resultVar), false); })));\n        stmt.visitStatement(this, ctx);\n    };\n    JitEmitterVisitor.prototype.getArgs = function () {\n        var result = {};\n        for (var i = 0; i < this._evalArgNames.length; i++) {\n            result[this._evalArgNames[i]] = this._evalArgValues[i];\n        }\n        return result;\n    };\n    JitEmitterVisitor.prototype.visitExternalExpr = function (ast, ctx) {\n        this._emitReferenceToExternal(ast, this.reflector.resolveExternalReference(ast.value), ctx);\n        return null;\n    };\n    JitEmitterVisitor.prototype.visitWrappedNodeExpr = function (ast, ctx) {\n        this._emitReferenceToExternal(ast, ast.node, ctx);\n        return null;\n    };\n    JitEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            this._evalExportedVars.push(stmt.name);\n        }\n        return _super.prototype.visitDeclareVarStmt.call(this, stmt, ctx);\n    };\n    JitEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            this._evalExportedVars.push(stmt.name);\n        }\n        return _super.prototype.visitDeclareFunctionStmt.call(this, stmt, ctx);\n    };\n    JitEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) {\n        if (stmt.hasModifier(StmtModifier.Exported)) {\n            this._evalExportedVars.push(stmt.name);\n        }\n        return _super.prototype.visitDeclareClassStmt.call(this, stmt, ctx);\n    };\n    JitEmitterVisitor.prototype._emitReferenceToExternal = function (ast, value, ctx) {\n        var id = this._evalArgValues.indexOf(value);\n        if (id === -1) {\n            id = this._evalArgValues.length;\n            this._evalArgValues.push(value);\n            var name_1 = identifierName({ reference: value }) || 'val';\n            this._evalArgNames.push(\"jit_\" + name_1 + \"_\" + id);\n        }\n        ctx.print(ast, this._evalArgNames[id]);\n    };\n    return JitEmitterVisitor;\n}(AbstractJsEmitterVisitor));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Provides access to reflection data about symbols that the compiler needs.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a {@link UrlResolver} with no package prefix.\n */\n\nfunction createOfflineCompileUrlResolver() {\n    return new UrlResolver('.');\n}\nvar UrlResolver = /** @class */ (function () {\n    function UrlResolverImpl(_packagePrefix) {\n        if (_packagePrefix === void 0) { _packagePrefix = null; }\n        this._packagePrefix = _packagePrefix;\n    }\n    /**\n     * Resolves the `url` given the `baseUrl`:\n     * - when the `url` is null, the `baseUrl` is returned,\n     * - if `url` is relative ('path/to/here', './path/to/here'), the resolved url is a combination of\n     * `baseUrl` and `url`,\n     * - if `url` is absolute (it has a scheme: 'http://', 'https://' or start with '/'), the `url` is\n     * returned as is (ignoring the `baseUrl`)\n     */\n    UrlResolverImpl.prototype.resolve = function (baseUrl, url) {\n        var resolvedUrl = url;\n        if (baseUrl != null && baseUrl.length > 0) {\n            resolvedUrl = _resolveUrl(baseUrl, resolvedUrl);\n        }\n        var resolvedParts = _split(resolvedUrl);\n        var prefix = this._packagePrefix;\n        if (prefix != null && resolvedParts != null &&\n            resolvedParts[_ComponentIndex.Scheme] == 'package') {\n            var path$$1 = resolvedParts[_ComponentIndex.Path];\n            prefix = prefix.replace(/\\/+$/, '');\n            path$$1 = path$$1.replace(/^\\/+/, '');\n            return prefix + \"/\" + path$$1;\n        }\n        return resolvedUrl;\n    };\n    return UrlResolverImpl;\n}());\n/**\n * Extract the scheme of a URL.\n */\n\n// The code below is adapted from Traceur:\n// https://github.com/google/traceur-compiler/blob/9511c1dafa972bf0de1202a8a863bad02f0f95a8/src/runtime/url.js\n/**\n * Builds a URI string from already-encoded parts.\n *\n * No encoding is performed.  Any component may be omitted as either null or\n * undefined.\n *\n * @param opt_scheme The scheme such as 'http'.\n * @param opt_userInfo The user name before the '@'.\n * @param opt_domain The domain such as 'www.google.com', already\n *     URI-encoded.\n * @param opt_port The port number.\n * @param opt_path The path, already URI-encoded.  If it is not\n *     empty, it must begin with a slash.\n * @param opt_queryData The URI-encoded query data.\n * @param opt_fragment The URI-encoded fragment identifier.\n * @return The fully combined URI.\n */\nfunction _buildFromEncodedParts(opt_scheme, opt_userInfo, opt_domain, opt_port, opt_path, opt_queryData, opt_fragment) {\n    var out = [];\n    if (opt_scheme != null) {\n        out.push(opt_scheme + ':');\n    }\n    if (opt_domain != null) {\n        out.push('//');\n        if (opt_userInfo != null) {\n            out.push(opt_userInfo + '@');\n        }\n        out.push(opt_domain);\n        if (opt_port != null) {\n            out.push(':' + opt_port);\n        }\n    }\n    if (opt_path != null) {\n        out.push(opt_path);\n    }\n    if (opt_queryData != null) {\n        out.push('?' + opt_queryData);\n    }\n    if (opt_fragment != null) {\n        out.push('#' + opt_fragment);\n    }\n    return out.join('');\n}\n/**\n * A regular expression for breaking a URI into its component parts.\n *\n * {@link http://www.gbiv.com/protocols/uri/rfc/rfc3986.html#RFC2234} says\n * As the \"first-match-wins\" algorithm is identical to the \"greedy\"\n * disambiguation method used by POSIX regular expressions, it is natural and\n * commonplace to use a regular expression for parsing the potential five\n * components of a URI reference.\n *\n * The following line is the regular expression for breaking-down a\n * well-formed URI reference into its components.\n *\n * <pre>\n * ^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?\n *  12            3  4          5       6  7        8 9\n * </pre>\n *\n * The numbers in the second line above are only to assist readability; they\n * indicate the reference points for each subexpression (i.e., each paired\n * parenthesis). We refer to the value matched for subexpression <n> as $<n>.\n * For example, matching the above expression to\n * <pre>\n *     http://www.ics.uci.edu/pub/ietf/uri/#Related\n * </pre>\n * results in the following subexpression matches:\n * <pre>\n *    $1 = http:\n *    $2 = http\n *    $3 = //www.ics.uci.edu\n *    $4 = www.ics.uci.edu\n *    $5 = /pub/ietf/uri/\n *    $6 = <undefined>\n *    $7 = <undefined>\n *    $8 = #Related\n *    $9 = Related\n * </pre>\n * where <undefined> indicates that the component is not present, as is the\n * case for the query component in the above example. Therefore, we can\n * determine the value of the five components as\n * <pre>\n *    scheme    = $2\n *    authority = $4\n *    path      = $5\n *    query     = $7\n *    fragment  = $9\n * </pre>\n *\n * The regular expression has been modified slightly to expose the\n * userInfo, domain, and port separately from the authority.\n * The modified version yields\n * <pre>\n *    $1 = http              scheme\n *    $2 = <undefined>       userInfo -\\\n *    $3 = www.ics.uci.edu   domain     | authority\n *    $4 = <undefined>       port     -/\n *    $5 = /pub/ietf/uri/    path\n *    $6 = <undefined>       query without ?\n *    $7 = Related           fragment without #\n * </pre>\n * @internal\n */\nvar _splitRe = new RegExp('^' +\n    '(?:' +\n    '([^:/?#.]+)' + // scheme - ignore special characters\n    // used by other URL parts such as :,\n    // ?, /, #, and .\n    ':)?' +\n    '(?://' +\n    '(?:([^/?#]*)@)?' + // userInfo\n    '([\\\\w\\\\d\\\\-\\\\u0100-\\\\uffff.%]*)' + // domain - restrict to letters,\n    // digits, dashes, dots, percent\n    // escapes, and unicode characters.\n    '(?::([0-9]+))?' + // port\n    ')?' +\n    '([^?#]+)?' + // path\n    '(?:\\\\?([^#]*))?' + // query\n    '(?:#(.*))?' + // fragment\n    '$');\n/**\n * The index of each URI component in the return value of goog.uri.utils.split.\n * @enum {number}\n */\nvar _ComponentIndex;\n(function (_ComponentIndex) {\n    _ComponentIndex[_ComponentIndex[\"Scheme\"] = 1] = \"Scheme\";\n    _ComponentIndex[_ComponentIndex[\"UserInfo\"] = 2] = \"UserInfo\";\n    _ComponentIndex[_ComponentIndex[\"Domain\"] = 3] = \"Domain\";\n    _ComponentIndex[_ComponentIndex[\"Port\"] = 4] = \"Port\";\n    _ComponentIndex[_ComponentIndex[\"Path\"] = 5] = \"Path\";\n    _ComponentIndex[_ComponentIndex[\"QueryData\"] = 6] = \"QueryData\";\n    _ComponentIndex[_ComponentIndex[\"Fragment\"] = 7] = \"Fragment\";\n})(_ComponentIndex || (_ComponentIndex = {}));\n/**\n * Splits a URI into its component parts.\n *\n * Each component can be accessed via the component indices; for example:\n * <pre>\n * goog.uri.utils.split(someStr)[goog.uri.utils.CompontentIndex.QUERY_DATA];\n * </pre>\n *\n * @param uri The URI string to examine.\n * @return Each component still URI-encoded.\n *     Each component that is present will contain the encoded value, whereas\n *     components that are not present will be undefined or empty, depending\n *     on the browser's regular expression implementation.  Never null, since\n *     arbitrary strings may still look like path names.\n */\nfunction _split(uri) {\n    return uri.match(_splitRe);\n}\n/**\n  * Removes dot segments in given path component, as described in\n  * RFC 3986, section 5.2.4.\n  *\n  * @param path A non-empty path component.\n  * @return Path component with removed dot segments.\n  */\nfunction _removeDotSegments(path$$1) {\n    if (path$$1 == '/')\n        return '/';\n    var leadingSlash = path$$1[0] == '/' ? '/' : '';\n    var trailingSlash = path$$1[path$$1.length - 1] === '/' ? '/' : '';\n    var segments = path$$1.split('/');\n    var out = [];\n    var up = 0;\n    for (var pos = 0; pos < segments.length; pos++) {\n        var segment = segments[pos];\n        switch (segment) {\n            case '':\n            case '.':\n                break;\n            case '..':\n                if (out.length > 0) {\n                    out.pop();\n                }\n                else {\n                    up++;\n                }\n                break;\n            default:\n                out.push(segment);\n        }\n    }\n    if (leadingSlash == '') {\n        while (up-- > 0) {\n            out.unshift('..');\n        }\n        if (out.length === 0)\n            out.push('.');\n    }\n    return leadingSlash + out.join('/') + trailingSlash;\n}\n/**\n * Takes an array of the parts from split and canonicalizes the path part\n * and then joins all the parts.\n */\nfunction _joinAndCanonicalizePath(parts) {\n    var path$$1 = parts[_ComponentIndex.Path];\n    path$$1 = path$$1 == null ? '' : _removeDotSegments(path$$1);\n    parts[_ComponentIndex.Path] = path$$1;\n    return _buildFromEncodedParts(parts[_ComponentIndex.Scheme], parts[_ComponentIndex.UserInfo], parts[_ComponentIndex.Domain], parts[_ComponentIndex.Port], path$$1, parts[_ComponentIndex.QueryData], parts[_ComponentIndex.Fragment]);\n}\n/**\n * Resolves a URL.\n * @param base The URL acting as the base URL.\n * @param to The URL to resolve.\n */\nfunction _resolveUrl(base, url) {\n    var parts = _split(encodeURI(url));\n    var baseParts = _split(base);\n    if (parts[_ComponentIndex.Scheme] != null) {\n        return _joinAndCanonicalizePath(parts);\n    }\n    else {\n        parts[_ComponentIndex.Scheme] = baseParts[_ComponentIndex.Scheme];\n    }\n    for (var i = _ComponentIndex.Scheme; i <= _ComponentIndex.Port; i++) {\n        if (parts[i] == null) {\n            parts[i] = baseParts[i];\n        }\n    }\n    if (parts[_ComponentIndex.Path][0] == '/') {\n        return _joinAndCanonicalizePath(parts);\n    }\n    var path$$1 = baseParts[_ComponentIndex.Path];\n    if (path$$1 == null)\n        path$$1 = '/';\n    var index = path$$1.lastIndexOf('/');\n    path$$1 = path$$1.substring(0, index + 1) + parts[_ComponentIndex.Path];\n    parts[_ComponentIndex.Path] = path$$1;\n    return _joinAndCanonicalizePath(parts);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An interface for retrieving documents by URL that the compiler uses\n * to load templates.\n */\nvar ResourceLoader = /** @class */ (function () {\n    function ResourceLoader() {\n    }\n    ResourceLoader.prototype.get = function (url) { return ''; };\n    return ResourceLoader;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Extract i18n messages from source code\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * JIT compiles an expression and monkey-patches the result of executing the expression onto a given\n * type.\n *\n * @param type the type which will receive the monkey-patched result\n * @param field name of the field on the type to monkey-patch\n * @param def the definition which will be compiled and executed to get the value to patch\n * @param context an object map of @angular/core symbol names to symbols which will be available in\n * the context of the compiled expression\n * @param constantPool an optional `ConstantPool` which contains constants used in the expression\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all APIs of the compiler package.\n *\n * <div class=\"callout is-critical\">\n *   <header>Unstable APIs</header>\n *   <p>\n *     All compiler apis are currently considered experimental and private!\n *   </p>\n *   <p>\n *     We expect the APIs in this package to keep on changing. Do not rely on them.\n *   </p>\n * </div>\n */\n\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\n\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// This file is not used to build this module. It is only used during editing\n// by the TypeScript language service and during build for verification. `ngc`\n// replaces this file with production index.ts when it rewrites private symbol\n// names.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// This file is not used to build this module. It is only used during editing\n// by the TypeScript language service and during build for verification. `ngc`\n// replaces this file with production index.ts when it rewrites private symbol\n// names.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An enumeration of basic types.\n *\n * @experimental\n */\nvar BuiltinType$1;\n(function (BuiltinType) {\n    /**\n     * The type is a type that can hold any other type.\n     */\n    BuiltinType[BuiltinType[\"Any\"] = 0] = \"Any\";\n    /**\n     * The type of a string literal.\n     */\n    BuiltinType[BuiltinType[\"String\"] = 1] = \"String\";\n    /**\n     * The type of a numeric literal.\n     */\n    BuiltinType[BuiltinType[\"Number\"] = 2] = \"Number\";\n    /**\n     * The type of the `true` and `false` literals.\n     */\n    BuiltinType[BuiltinType[\"Boolean\"] = 3] = \"Boolean\";\n    /**\n     * The type of the `undefined` literal.\n     */\n    BuiltinType[BuiltinType[\"Undefined\"] = 4] = \"Undefined\";\n    /**\n     * the type of the `null` literal.\n     */\n    BuiltinType[BuiltinType[\"Null\"] = 5] = \"Null\";\n    /**\n     * the type is an unbound type parameter.\n     */\n    BuiltinType[BuiltinType[\"Unbound\"] = 6] = \"Unbound\";\n    /**\n     * Not a built-in type.\n     */\n    BuiltinType[BuiltinType[\"Other\"] = 7] = \"Other\";\n})(BuiltinType$1 || (BuiltinType$1 = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DiagnosticKind;\n(function (DiagnosticKind) {\n    DiagnosticKind[DiagnosticKind[\"Error\"] = 0] = \"Error\";\n    DiagnosticKind[DiagnosticKind[\"Warning\"] = 1] = \"Warning\";\n})(DiagnosticKind || (DiagnosticKind = {}));\nvar TypeDiagnostic = /** @class */ (function () {\n    function TypeDiagnostic(kind, message, ast) {\n        this.kind = kind;\n        this.message = message;\n        this.ast = ast;\n    }\n    return TypeDiagnostic;\n}());\n// AstType calculatetype of the ast given AST element.\nvar AstType = /** @class */ (function () {\n    function AstType(scope, query, context) {\n        this.scope = scope;\n        this.query = query;\n        this.context = context;\n    }\n    AstType.prototype.getType = function (ast) { return ast.visit(this); };\n    AstType.prototype.getDiagnostics = function (ast) {\n        this.diagnostics = [];\n        var type = ast.visit(this);\n        if (this.context.event && type.callable) {\n            this.reportWarning('Unexpected callable expression. Expected a method call', ast);\n        }\n        return this.diagnostics;\n    };\n    AstType.prototype.visitBinary = function (ast) {\n        var _this = this;\n        // Treat undefined and null as other.\n        function normalize$$1(kind, other) {\n            switch (kind) {\n                case BuiltinType$1.Undefined:\n                case BuiltinType$1.Null:\n                    return normalize$$1(other, BuiltinType$1.Other);\n            }\n            return kind;\n        }\n        var getType = function (ast, operation) {\n            var type = _this.getType(ast);\n            if (type.nullable) {\n                switch (operation) {\n                    case '&&':\n                    case '||':\n                    case '==':\n                    case '!=':\n                    case '===':\n                    case '!==':\n                        // Nullable allowed.\n                        break;\n                    default:\n                        _this.reportError(\"The expression might be null\", ast);\n                        break;\n                }\n                return _this.query.getNonNullableType(type);\n            }\n            return type;\n        };\n        var leftType = getType(ast.left, ast.operation);\n        var rightType = getType(ast.right, ast.operation);\n        var leftRawKind = this.query.getTypeKind(leftType);\n        var rightRawKind = this.query.getTypeKind(rightType);\n        var leftKind = normalize$$1(leftRawKind, rightRawKind);\n        var rightKind = normalize$$1(rightRawKind, leftRawKind);\n        // The following swtich implements operator typing similar to the\n        // type production tables in the TypeScript specification.\n        // https://github.com/Microsoft/TypeScript/blob/v1.8.10/doc/spec.md#4.19\n        var operKind = leftKind << 8 | rightKind;\n        switch (ast.operation) {\n            case '*':\n            case '/':\n            case '%':\n            case '-':\n            case '<<':\n            case '>>':\n            case '>>>':\n            case '&':\n            case '^':\n            case '|':\n                switch (operKind) {\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Number:\n                        return this.query.getBuiltinType(BuiltinType$1.Number);\n                    default:\n                        var errorAst = ast.left;\n                        switch (leftKind) {\n                            case BuiltinType$1.Any:\n                            case BuiltinType$1.Number:\n                                errorAst = ast.right;\n                                break;\n                        }\n                        return this.reportError('Expected a numeric type', errorAst);\n                }\n            case '+':\n                switch (operKind) {\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Other:\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.Any:\n                        return this.anyType;\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Other:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.String:\n                        return this.query.getBuiltinType(BuiltinType$1.String);\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Number:\n                        return this.query.getBuiltinType(BuiltinType$1.Number);\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.Number:\n                        return this.reportError('Expected a number type', ast.left);\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Other:\n                        return this.reportError('Expected a number type', ast.right);\n                    default:\n                        return this.reportError('Expected operands to be a string or number type', ast);\n                }\n            case '>':\n            case '<':\n            case '<=':\n            case '>=':\n            case '==':\n            case '!=':\n            case '===':\n            case '!==':\n                switch (operKind) {\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.Any << 8 | BuiltinType$1.Other:\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Boolean << 8 | BuiltinType$1.Boolean:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Number << 8 | BuiltinType$1.Number:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.String << 8 | BuiltinType$1.String:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.Any:\n                    case BuiltinType$1.Other << 8 | BuiltinType$1.Other:\n                        return this.query.getBuiltinType(BuiltinType$1.Boolean);\n                    default:\n                        return this.reportError('Expected the operants to be of similar type or any', ast);\n                }\n            case '&&':\n                return rightType;\n            case '||':\n                return this.query.getTypeUnion(leftType, rightType);\n        }\n        return this.reportError(\"Unrecognized operator \" + ast.operation, ast);\n    };\n    AstType.prototype.visitChain = function (ast) {\n        if (this.diagnostics) {\n            // If we are producing diagnostics, visit the children\n            visitAstChildren(ast, this);\n        }\n        // The type of a chain is always undefined.\n        return this.query.getBuiltinType(BuiltinType$1.Undefined);\n    };\n    AstType.prototype.visitConditional = function (ast) {\n        // The type of a conditional is the union of the true and false conditions.\n        if (this.diagnostics) {\n            visitAstChildren(ast, this);\n        }\n        return this.query.getTypeUnion(this.getType(ast.trueExp), this.getType(ast.falseExp));\n    };\n    AstType.prototype.visitFunctionCall = function (ast) {\n        var _this = this;\n        // The type of a function call is the return type of the selected signature.\n        // The signature is selected based on the types of the arguments. Angular doesn't\n        // support contextual typing of arguments so this is simpler than TypeScript's\n        // version.\n        var args = ast.args.map(function (arg) { return _this.getType(arg); });\n        var target = this.getType(ast.target);\n        if (!target || !target.callable)\n            return this.reportError('Call target is not callable', ast);\n        var signature = target.selectSignature(args);\n        if (signature)\n            return signature.result;\n        // TODO: Consider a better error message here.\n        return this.reportError('Unable no compatible signature found for call', ast);\n    };\n    AstType.prototype.visitImplicitReceiver = function (ast) {\n        var _this = this;\n        // Return a pseudo-symbol for the implicit receiver.\n        // The members of the implicit receiver are what is defined by the\n        // scope passed into this class.\n        return {\n            name: '$implict',\n            kind: 'component',\n            language: 'ng-template',\n            type: undefined,\n            container: undefined,\n            callable: false,\n            nullable: false,\n            public: true,\n            definition: undefined,\n            members: function () { return _this.scope; },\n            signatures: function () { return []; },\n            selectSignature: function (types) { return undefined; },\n            indexed: function (argument) { return undefined; }\n        };\n    };\n    AstType.prototype.visitInterpolation = function (ast) {\n        // If we are producing diagnostics, visit the children.\n        if (this.diagnostics) {\n            visitAstChildren(ast, this);\n        }\n        return this.undefinedType;\n    };\n    AstType.prototype.visitKeyedRead = function (ast) {\n        var targetType = this.getType(ast.obj);\n        var keyType = this.getType(ast.key);\n        var result = targetType.indexed(keyType);\n        return result || this.anyType;\n    };\n    AstType.prototype.visitKeyedWrite = function (ast) {\n        // The write of a type is the type of the value being written.\n        return this.getType(ast.value);\n    };\n    AstType.prototype.visitLiteralArray = function (ast) {\n        var _this = this;\n        // A type literal is an array type of the union of the elements\n        return this.query.getArrayType((_a = this.query).getTypeUnion.apply(_a, __spread(ast.expressions.map(function (element) { return _this.getType(element); }))));\n        var _a;\n    };\n    AstType.prototype.visitLiteralMap = function (ast) {\n        // If we are producing diagnostics, visit the children\n        if (this.diagnostics) {\n            visitAstChildren(ast, this);\n        }\n        // TODO: Return a composite type.\n        return this.anyType;\n    };\n    AstType.prototype.visitLiteralPrimitive = function (ast) {\n        // The type of a literal primitive depends on the value of the literal.\n        switch (ast.value) {\n            case true:\n            case false:\n                return this.query.getBuiltinType(BuiltinType$1.Boolean);\n            case null:\n                return this.query.getBuiltinType(BuiltinType$1.Null);\n            case undefined:\n                return this.query.getBuiltinType(BuiltinType$1.Undefined);\n            default:\n                switch (typeof ast.value) {\n                    case 'string':\n                        return this.query.getBuiltinType(BuiltinType$1.String);\n                    case 'number':\n                        return this.query.getBuiltinType(BuiltinType$1.Number);\n                    default:\n                        return this.reportError('Unrecognized primitive', ast);\n                }\n        }\n    };\n    AstType.prototype.visitMethodCall = function (ast) {\n        return this.resolveMethodCall(this.getType(ast.receiver), ast);\n    };\n    AstType.prototype.visitPipe = function (ast) {\n        var _this = this;\n        // The type of a pipe node is the return type of the pipe's transform method. The table returned\n        // by getPipes() is expected to contain symbols with the corresponding transform method type.\n        var pipe = this.query.getPipes().get(ast.name);\n        if (!pipe)\n            return this.reportError(\"No pipe by the name \" + ast.name + \" found\", ast);\n        var expType = this.getType(ast.exp);\n        var signature = pipe.selectSignature([expType].concat(ast.args.map(function (arg) { return _this.getType(arg); })));\n        if (!signature)\n            return this.reportError('Unable to resolve signature for pipe invocation', ast);\n        return signature.result;\n    };\n    AstType.prototype.visitPrefixNot = function (ast) {\n        // The type of a prefix ! is always boolean.\n        return this.query.getBuiltinType(BuiltinType$1.Boolean);\n    };\n    AstType.prototype.visitNonNullAssert = function (ast) {\n        var expressionType = this.getType(ast.expression);\n        return this.query.getNonNullableType(expressionType);\n    };\n    AstType.prototype.visitPropertyRead = function (ast) {\n        return this.resolvePropertyRead(this.getType(ast.receiver), ast);\n    };\n    AstType.prototype.visitPropertyWrite = function (ast) {\n        // The type of a write is the type of the value being written.\n        return this.getType(ast.value);\n    };\n    AstType.prototype.visitQuote = function (ast) {\n        // The type of a quoted expression is any.\n        return this.query.getBuiltinType(BuiltinType$1.Any);\n    };\n    AstType.prototype.visitSafeMethodCall = function (ast) {\n        return this.resolveMethodCall(this.query.getNonNullableType(this.getType(ast.receiver)), ast);\n    };\n    AstType.prototype.visitSafePropertyRead = function (ast) {\n        return this.resolvePropertyRead(this.query.getNonNullableType(this.getType(ast.receiver)), ast);\n    };\n    Object.defineProperty(AstType.prototype, \"anyType\", {\n        get: function () {\n            var result = this._anyType;\n            if (!result) {\n                result = this._anyType = this.query.getBuiltinType(BuiltinType$1.Any);\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AstType.prototype, \"undefinedType\", {\n        get: function () {\n            var result = this._undefinedType;\n            if (!result) {\n                result = this._undefinedType = this.query.getBuiltinType(BuiltinType$1.Undefined);\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AstType.prototype.resolveMethodCall = function (receiverType, ast) {\n        var _this = this;\n        if (this.isAny(receiverType)) {\n            return this.anyType;\n        }\n        // The type of a method is the selected methods result type.\n        var method = receiverType.members().get(ast.name);\n        if (!method)\n            return this.reportError(\"Unknown method '\" + ast.name + \"'\", ast);\n        if (!method.type)\n            return this.reportError(\"Could not find a type for '\" + ast.name + \"'\", ast);\n        if (!method.type.callable)\n            return this.reportError(\"Member '\" + ast.name + \"' is not callable\", ast);\n        var signature = method.type.selectSignature(ast.args.map(function (arg) { return _this.getType(arg); }));\n        if (!signature)\n            return this.reportError(\"Unable to resolve signature for call of method \" + ast.name, ast);\n        return signature.result;\n    };\n    AstType.prototype.resolvePropertyRead = function (receiverType, ast) {\n        if (this.isAny(receiverType)) {\n            return this.anyType;\n        }\n        // The type of a property read is the seelcted member's type.\n        var member = receiverType.members().get(ast.name);\n        if (!member) {\n            var receiverInfo = receiverType.name;\n            if (receiverInfo == '$implict') {\n                receiverInfo =\n                    'The component declaration, template variable declarations, and element references do';\n            }\n            else if (receiverType.nullable) {\n                return this.reportError(\"The expression might be null\", ast.receiver);\n            }\n            else {\n                receiverInfo = \"'\" + receiverInfo + \"' does\";\n            }\n            return this.reportError(\"Identifier '\" + ast.name + \"' is not defined. \" + receiverInfo + \" not contain such a member\", ast);\n        }\n        if (!member.public) {\n            var receiverInfo = receiverType.name;\n            if (receiverInfo == '$implict') {\n                receiverInfo = 'the component';\n            }\n            else {\n                receiverInfo = \"'\" + receiverInfo + \"'\";\n            }\n            this.reportWarning(\"Identifier '\" + ast.name + \"' refers to a private member of \" + receiverInfo, ast);\n        }\n        return member.type;\n    };\n    AstType.prototype.reportError = function (message, ast) {\n        if (this.diagnostics) {\n            this.diagnostics.push(new TypeDiagnostic(DiagnosticKind.Error, message, ast));\n        }\n        return this.anyType;\n    };\n    AstType.prototype.reportWarning = function (message, ast) {\n        if (this.diagnostics) {\n            this.diagnostics.push(new TypeDiagnostic(DiagnosticKind.Warning, message, ast));\n        }\n        return this.anyType;\n    };\n    AstType.prototype.isAny = function (symbol) {\n        return !symbol || this.query.getTypeKind(symbol) == BuiltinType$1.Any ||\n            (!!symbol.type && this.isAny(symbol.type));\n    };\n    return AstType;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getTemplateExpressionDiagnostics(info) {\n    var visitor = new ExpressionDiagnosticsVisitor(info, function (path$$1, includeEvent) {\n        return getExpressionScope(info, path$$1, includeEvent);\n    });\n    templateVisitAll(visitor, info.templateAst);\n    return visitor.diagnostics;\n}\nfunction getExpressionDiagnostics(scope, ast, query, context) {\n    if (context === void 0) { context = {}; }\n    var analyzer = new AstType(scope, query, context);\n    analyzer.getDiagnostics(ast);\n    return analyzer.diagnostics;\n}\nfunction getReferences(info) {\n    var result = [];\n    function processReferences(references) {\n        var _loop_1 = function (reference) {\n            var type = undefined;\n            if (reference.value) {\n                type = info.query.getTypeSymbol(tokenReference(reference.value));\n            }\n            result.push({\n                name: reference.name,\n                kind: 'reference',\n                type: type || info.query.getBuiltinType(BuiltinType$1.Any),\n                get definition() { return getDefinitionOf(info, reference); }\n            });\n        };\n        try {\n            for (var references_1 = __values(references), references_1_1 = references_1.next(); !references_1_1.done; references_1_1 = references_1.next()) {\n                var reference = references_1_1.value;\n                _loop_1(reference);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (references_1_1 && !references_1_1.done && (_a = references_1.return)) _a.call(references_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var e_1, _a;\n    }\n    var visitor = new /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.visitEmbeddedTemplate = function (ast, context) {\n            _super.prototype.visitEmbeddedTemplate.call(this, ast, context);\n            processReferences(ast.references);\n        };\n        class_1.prototype.visitElement = function (ast, context) {\n            _super.prototype.visitElement.call(this, ast, context);\n            processReferences(ast.references);\n        };\n        return class_1;\n    }(RecursiveTemplateAstVisitor));\n    templateVisitAll(visitor, info.templateAst);\n    return result;\n}\nfunction getDefinitionOf(info, ast) {\n    if (info.fileName) {\n        var templateOffset = info.offset;\n        return [{\n                fileName: info.fileName,\n                span: {\n                    start: ast.sourceSpan.start.offset + templateOffset,\n                    end: ast.sourceSpan.end.offset + templateOffset\n                }\n            }];\n    }\n}\nfunction getVarDeclarations(info, path$$1) {\n    var result = [];\n    var current = path$$1.tail;\n    while (current) {\n        if (current instanceof EmbeddedTemplateAst) {\n            var _loop_2 = function (variable) {\n                var name = variable.name;\n                // Find the first directive with a context.\n                var context = current.directives.map(function (d) { return info.query.getTemplateContext(d.directive.type.reference); })\n                    .find(function (c) { return !!c; });\n                // Determine the type of the context field referenced by variable.value.\n                var type = undefined;\n                if (context) {\n                    var value = context.get(variable.value);\n                    if (value) {\n                        type = value.type;\n                        var kind = info.query.getTypeKind(type);\n                        if (kind === BuiltinType$1.Any || kind == BuiltinType$1.Unbound) {\n                            // The any type is not very useful here. For special cases, such as ngFor, we can do\n                            // better.\n                            type = refinedVariableType(type, info, current);\n                        }\n                    }\n                }\n                if (!type) {\n                    type = info.query.getBuiltinType(BuiltinType$1.Any);\n                }\n                result.push({\n                    name: name,\n                    kind: 'variable', type: type, get definition() { return getDefinitionOf(info, variable); }\n                });\n            };\n            try {\n                for (var _a = __values(current.variables), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var variable = _b.value;\n                    _loop_2(variable);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n        current = path$$1.parentOf(current);\n    }\n    return result;\n    var e_2, _c;\n}\nfunction refinedVariableType(type, info, templateElement) {\n    // Special case the ngFor directive\n    var ngForDirective = templateElement.directives.find(function (d) {\n        var name = identifierName(d.directive.type);\n        return name == 'NgFor' || name == 'NgForOf';\n    });\n    if (ngForDirective) {\n        var ngForOfBinding = ngForDirective.inputs.find(function (i) { return i.directiveName == 'ngForOf'; });\n        if (ngForOfBinding) {\n            var bindingType = new AstType(info.members, info.query, {}).getType(ngForOfBinding.value);\n            if (bindingType) {\n                var result = info.query.getElementType(bindingType);\n                if (result) {\n                    return result;\n                }\n            }\n        }\n    }\n    // We can't do better, return any\n    return info.query.getBuiltinType(BuiltinType$1.Any);\n}\nfunction getEventDeclaration(info, includeEvent) {\n    var result = [];\n    if (includeEvent) {\n        // TODO: Determine the type of the event parameter based on the Observable<T> or EventEmitter<T>\n        // of the event.\n        result = [{ name: '$event', kind: 'variable', type: info.query.getBuiltinType(BuiltinType$1.Any) }];\n    }\n    return result;\n}\nfunction getExpressionScope(info, path$$1, includeEvent) {\n    var result = info.members;\n    var references = getReferences(info);\n    var variables = getVarDeclarations(info, path$$1);\n    var events = getEventDeclaration(info, includeEvent);\n    if (references.length || variables.length || events.length) {\n        var referenceTable = info.query.createSymbolTable(references);\n        var variableTable = info.query.createSymbolTable(variables);\n        var eventsTable = info.query.createSymbolTable(events);\n        result = info.query.mergeSymbolTable([result, referenceTable, variableTable, eventsTable]);\n    }\n    return result;\n}\nvar ExpressionDiagnosticsVisitor = /** @class */ (function (_super) {\n    __extends(ExpressionDiagnosticsVisitor, _super);\n    function ExpressionDiagnosticsVisitor(info, getExpressionScope) {\n        var _this = _super.call(this) || this;\n        _this.info = info;\n        _this.getExpressionScope = getExpressionScope;\n        _this.diagnostics = [];\n        _this.path = new AstPath([]);\n        return _this;\n    }\n    ExpressionDiagnosticsVisitor.prototype.visitDirective = function (ast, context) {\n        // Override the default child visitor to ignore the host properties of a directive.\n        if (ast.inputs && ast.inputs.length) {\n            templateVisitAll(this, ast.inputs, context);\n        }\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitBoundText = function (ast) {\n        this.push(ast);\n        this.diagnoseExpression(ast.value, ast.sourceSpan.start.offset, false);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitDirectiveProperty = function (ast) {\n        this.push(ast);\n        this.diagnoseExpression(ast.value, this.attributeValueLocation(ast), false);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitElementProperty = function (ast) {\n        this.push(ast);\n        this.diagnoseExpression(ast.value, this.attributeValueLocation(ast), false);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitEvent = function (ast) {\n        this.push(ast);\n        this.diagnoseExpression(ast.handler, this.attributeValueLocation(ast), true);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitVariable = function (ast) {\n        var directive = this.directiveSummary;\n        if (directive && ast.value) {\n            var context = this.info.query.getTemplateContext(directive.type.reference);\n            if (context && !context.has(ast.value)) {\n                if (ast.value === '$implicit') {\n                    this.reportError('The template context does not have an implicit value', spanOf$1(ast.sourceSpan));\n                }\n                else {\n                    this.reportError(\"The template context does not defined a member called '\" + ast.value + \"'\", spanOf$1(ast.sourceSpan));\n                }\n            }\n        }\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitElement = function (ast, context) {\n        this.push(ast);\n        _super.prototype.visitElement.call(this, ast, context);\n        this.pop();\n    };\n    ExpressionDiagnosticsVisitor.prototype.visitEmbeddedTemplate = function (ast, context) {\n        var previousDirectiveSummary = this.directiveSummary;\n        this.push(ast);\n        // Find directive that references this template\n        this.directiveSummary =\n            ast.directives.map(function (d) { return d.directive; }).find(function (d) { return hasTemplateReference(d.type); });\n        // Process children\n        _super.prototype.visitEmbeddedTemplate.call(this, ast, context);\n        this.pop();\n        this.directiveSummary = previousDirectiveSummary;\n    };\n    ExpressionDiagnosticsVisitor.prototype.attributeValueLocation = function (ast) {\n        var path$$1 = findNode(this.info.htmlAst, ast.sourceSpan.start.offset);\n        var last = path$$1.tail;\n        if (last instanceof Attribute && last.valueSpan) {\n            // Add 1 for the quote.\n            return last.valueSpan.start.offset + 1;\n        }\n        return ast.sourceSpan.start.offset;\n    };\n    ExpressionDiagnosticsVisitor.prototype.diagnoseExpression = function (ast, offset, includeEvent) {\n        var _this = this;\n        var scope = this.getExpressionScope(this.path, includeEvent);\n        (_a = this.diagnostics).push.apply(_a, __spread(getExpressionDiagnostics(scope, ast, this.info.query, {\n            event: includeEvent\n        }).map(function (d) { return ({\n            span: offsetSpan(d.ast.span, offset + _this.info.offset),\n            kind: d.kind,\n            message: d.message\n        }); })));\n        var _a;\n    };\n    ExpressionDiagnosticsVisitor.prototype.push = function (ast) { this.path.push(ast); };\n    ExpressionDiagnosticsVisitor.prototype.pop = function () { this.path.pop(); };\n    ExpressionDiagnosticsVisitor.prototype.reportError = function (message, span) {\n        if (span) {\n            this.diagnostics.push({ span: offsetSpan(span, this.info.offset), kind: DiagnosticKind.Error, message: message });\n        }\n    };\n    ExpressionDiagnosticsVisitor.prototype.reportWarning = function (message, span) {\n        this.diagnostics.push({ span: offsetSpan(span, this.info.offset), kind: DiagnosticKind.Warning, message: message });\n    };\n    return ExpressionDiagnosticsVisitor;\n}(RecursiveTemplateAstVisitor));\nfunction hasTemplateReference(type) {\n    if (type.diDeps) {\n        try {\n            for (var _a = __values(type.diDeps), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var diDep = _b.value;\n                if (diDep.token && diDep.token.identifier &&\n                    identifierName(diDep.token.identifier) == 'TemplateRef')\n                    return true;\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    }\n    return false;\n    var e_3, _c;\n}\nfunction offsetSpan(span, amount) {\n    return { start: span.start + amount, end: span.end + amount };\n}\nfunction spanOf$1(sourceSpan) {\n    return { start: sourceSpan.start.offset, end: sourceSpan.end.offset };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Converts a `string` version into an array of numbers\n * @example\n * toNumbers('2.0.1'); // returns [2, 0, 1]\n */\nfunction toNumbers(value) {\n    return value.split('.').map(Number);\n}\n/**\n * Compares two arrays of positive numbers with lexicographical order in mind.\n *\n * However - unlike lexicographical order - for arrays of different length we consider:\n * [1, 2, 3] = [1, 2, 3, 0] instead of [1, 2, 3] < [1, 2, 3, 0]\n *\n * @param a The 'left hand' array in the comparison test\n * @param b The 'right hand' in the comparison test\n * @returns {-1|0|1} The comparison result: 1 if a is greater, -1 if b is greater, 0 is the two\n * arrays are equals\n */\nfunction compareNumbers(a, b) {\n    var max = Math.max(a.length, b.length);\n    var min = Math.min(a.length, b.length);\n    for (var i = 0; i < min; i++) {\n        if (a[i] > b[i])\n            return 1;\n        if (a[i] < b[i])\n            return -1;\n    }\n    if (min !== max) {\n        var longestArray = a.length === max ? a : b;\n        // The result to return in case the to arrays are considered different (1 if a is greater,\n        // -1 if b is greater)\n        var comparisonResult = a.length === max ? 1 : -1;\n        // Check that at least one of the remaining elements is greater than 0 to consider that the two\n        // arrays are different (e.g. [1, 0] and [1] are considered the same but not [1, 0, 1] and [1])\n        for (var i = min; i < max; i++) {\n            if (longestArray[i] > 0) {\n                return comparisonResult;\n            }\n        }\n    }\n    return 0;\n}\n/**\n * Checks if a TypeScript version is:\n * - greater or equal than the provided `low` version,\n * - lower or equal than an optional `high` version.\n *\n * @param version The TypeScript version\n * @param low The minimum version\n * @param high The maximum version\n */\nfunction isVersionBetween(version$$1, low, high) {\n    var tsNumbers = toNumbers(version$$1);\n    if (high !== undefined) {\n        return compareNumbers(toNumbers(low), tsNumbers) <= 0 &&\n            compareNumbers(toNumbers(high), tsNumbers) >= 0;\n    }\n    return compareNumbers(toNumbers(low), tsNumbers) <= 0;\n}\n/**\n * Compares two versions\n *\n * @param v1 The 'left hand' version in the comparison test\n * @param v2 The 'right hand' version in the comparison test\n * @returns {-1|0|1} The comparison result: 1 if v1 is greater, -1 if v2 is greater, 0 is the two\n * versions are equals\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// In TypeScript 2.1 these flags moved\n// These helpers work for both 2.0 and 2.1.\nvar isPrivate = ts.ModifierFlags ?\n    (function (node) {\n        return !!(ts.getCombinedModifierFlags(node) & ts.ModifierFlags.Private);\n    }) :\n    (function (node) { return !!(node.flags & ts.NodeFlags.Private); });\nvar isReferenceType = ts.ObjectFlags ?\n    (function (type) {\n        return !!(type.flags & ts.TypeFlags.Object &&\n            type.objectFlags & ts.ObjectFlags.Reference);\n    }) :\n    (function (type) { return !!(type.flags & ts.TypeFlags.Reference); });\nfunction getSymbolQuery(program, checker, source, fetchPipes) {\n    return new TypeScriptSymbolQuery(program, checker, source, fetchPipes);\n}\n\nfunction getClassMembersFromDeclaration(program, checker, source, declaration) {\n    var type = checker.getTypeAtLocation(declaration);\n    return new TypeWrapper(type, { node: source, program: program, checker: checker }).members();\n}\n\nfunction getPipesTable(source, program, checker, pipes) {\n    return new PipesTable(pipes, { program: program, checker: checker, node: source });\n}\nvar TypeScriptSymbolQuery = /** @class */ (function () {\n    function TypeScriptSymbolQuery(program, checker, source, fetchPipes) {\n        this.program = program;\n        this.checker = checker;\n        this.source = source;\n        this.fetchPipes = fetchPipes;\n        this.typeCache = new Map();\n    }\n    TypeScriptSymbolQuery.prototype.getTypeKind = function (symbol) { return typeKindOf(this.getTsTypeOf(symbol)); };\n    TypeScriptSymbolQuery.prototype.getBuiltinType = function (kind) {\n        var result = this.typeCache.get(kind);\n        if (!result) {\n            var type = getBuiltinTypeFromTs(kind, { checker: this.checker, node: this.source, program: this.program });\n            result =\n                new TypeWrapper(type, { program: this.program, checker: this.checker, node: this.source });\n            this.typeCache.set(kind, result);\n        }\n        return result;\n    };\n    TypeScriptSymbolQuery.prototype.getTypeUnion = function () {\n        var types = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            types[_i] = arguments[_i];\n        }\n        // No API exists so return any if the types are not all the same type.\n        var result = undefined;\n        if (types.length) {\n            result = types[0];\n            for (var i = 1; i < types.length; i++) {\n                if (types[i] != result) {\n                    result = undefined;\n                    break;\n                }\n            }\n        }\n        return result || this.getBuiltinType(BuiltinType$1.Any);\n    };\n    TypeScriptSymbolQuery.prototype.getArrayType = function (type) { return this.getBuiltinType(BuiltinType$1.Any); };\n    TypeScriptSymbolQuery.prototype.getElementType = function (type) {\n        if (type instanceof TypeWrapper) {\n            var elementType = getTypeParameterOf(type.tsType, 'Array');\n            if (elementType) {\n                return new TypeWrapper(elementType, type.context);\n            }\n        }\n    };\n    TypeScriptSymbolQuery.prototype.getNonNullableType = function (symbol) {\n        if (symbol instanceof TypeWrapper && (typeof this.checker.getNonNullableType == 'function')) {\n            var tsType = symbol.tsType;\n            var nonNullableType = this.checker.getNonNullableType(tsType);\n            if (nonNullableType != tsType) {\n                return new TypeWrapper(nonNullableType, symbol.context);\n            }\n            else if (nonNullableType == tsType) {\n                return symbol;\n            }\n        }\n        return this.getBuiltinType(BuiltinType$1.Any);\n    };\n    TypeScriptSymbolQuery.prototype.getPipes = function () {\n        var result = this.pipesCache;\n        if (!result) {\n            result = this.pipesCache = this.fetchPipes();\n        }\n        return result;\n    };\n    TypeScriptSymbolQuery.prototype.getTemplateContext = function (type) {\n        var context = { node: this.source, program: this.program, checker: this.checker };\n        var typeSymbol = findClassSymbolInContext(type, context);\n        if (typeSymbol) {\n            var contextType = this.getTemplateRefContextType(typeSymbol);\n            if (contextType)\n                return new SymbolWrapper(contextType, context).members();\n        }\n    };\n    TypeScriptSymbolQuery.prototype.getTypeSymbol = function (type) {\n        var context = { node: this.source, program: this.program, checker: this.checker };\n        var typeSymbol = findClassSymbolInContext(type, context);\n        return typeSymbol && new SymbolWrapper(typeSymbol, context);\n    };\n    TypeScriptSymbolQuery.prototype.createSymbolTable = function (symbols) {\n        var result = new MapSymbolTable();\n        result.addAll(symbols.map(function (s) { return new DeclaredSymbol(s); }));\n        return result;\n    };\n    TypeScriptSymbolQuery.prototype.mergeSymbolTable = function (symbolTables) {\n        var result = new MapSymbolTable();\n        try {\n            for (var symbolTables_1 = __values(symbolTables), symbolTables_1_1 = symbolTables_1.next(); !symbolTables_1_1.done; symbolTables_1_1 = symbolTables_1.next()) {\n                var symbolTable = symbolTables_1_1.value;\n                result.addAll(symbolTable.values());\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (symbolTables_1_1 && !symbolTables_1_1.done && (_a = symbolTables_1.return)) _a.call(symbolTables_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return result;\n        var e_1, _a;\n    };\n    TypeScriptSymbolQuery.prototype.getSpanAt = function (line, column) {\n        return spanAt(this.source, line, column);\n    };\n    TypeScriptSymbolQuery.prototype.getTemplateRefContextType = function (typeSymbol) {\n        var type = this.checker.getTypeOfSymbolAtLocation(typeSymbol, this.source);\n        var constructor = type.symbol && type.symbol.members &&\n            getFromSymbolTable(type.symbol.members, '__constructor');\n        if (constructor) {\n            var constructorDeclaration = constructor.declarations[0];\n            try {\n                for (var _a = __values(constructorDeclaration.parameters), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var parameter = _b.value;\n                    var type_1 = this.checker.getTypeAtLocation(parameter.type);\n                    if (type_1.symbol.name == 'TemplateRef' && isReferenceType(type_1)) {\n                        var typeReference = type_1;\n                        if (typeReference.typeArguments && typeReference.typeArguments.length === 1) {\n                            return typeReference.typeArguments[0].symbol;\n                        }\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n        var e_2, _c;\n    };\n    TypeScriptSymbolQuery.prototype.getTsTypeOf = function (symbol) {\n        var type = this.getTypeWrapper(symbol);\n        return type && type.tsType;\n    };\n    TypeScriptSymbolQuery.prototype.getTypeWrapper = function (symbol) {\n        var type = undefined;\n        if (symbol instanceof TypeWrapper) {\n            type = symbol;\n        }\n        else if (symbol.type instanceof TypeWrapper) {\n            type = symbol.type;\n        }\n        return type;\n    };\n    return TypeScriptSymbolQuery;\n}());\nfunction typeCallable(type) {\n    var signatures = type.getCallSignatures();\n    return signatures && signatures.length != 0;\n}\nfunction signaturesOf(type, context) {\n    return type.getCallSignatures().map(function (s) { return new SignatureWrapper(s, context); });\n}\nfunction selectSignature(type, context, types) {\n    // TODO: Do a better job of selecting the right signature.\n    var signatures = type.getCallSignatures();\n    return signatures.length ? new SignatureWrapper(signatures[0], context) : undefined;\n}\nvar TypeWrapper = /** @class */ (function () {\n    function TypeWrapper(tsType, context) {\n        this.tsType = tsType;\n        this.context = context;\n        this.kind = 'type';\n        this.language = 'typescript';\n        this.type = undefined;\n        this.container = undefined;\n        this.public = true;\n        if (!tsType) {\n            throw Error('Internal: null type');\n        }\n    }\n    Object.defineProperty(TypeWrapper.prototype, \"name\", {\n        get: function () {\n            var symbol = this.tsType.symbol;\n            return (symbol && symbol.name) || '<anonymous>';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeWrapper.prototype, \"callable\", {\n        get: function () { return typeCallable(this.tsType); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeWrapper.prototype, \"nullable\", {\n        get: function () {\n            return this.context.checker.getNonNullableType(this.tsType) != this.tsType;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeWrapper.prototype, \"definition\", {\n        get: function () {\n            var symbol = this.tsType.getSymbol();\n            return symbol ? definitionFromTsSymbol(symbol) : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeWrapper.prototype.members = function () {\n        return new SymbolTableWrapper(this.tsType.getProperties(), this.context);\n    };\n    TypeWrapper.prototype.signatures = function () { return signaturesOf(this.tsType, this.context); };\n    TypeWrapper.prototype.selectSignature = function (types) {\n        return selectSignature(this.tsType, this.context, types);\n    };\n    TypeWrapper.prototype.indexed = function (argument) { return undefined; };\n    return TypeWrapper;\n}());\nvar SymbolWrapper = /** @class */ (function () {\n    function SymbolWrapper(symbol, context) {\n        this.context = context;\n        this.nullable = false;\n        this.language = 'typescript';\n        this.symbol = symbol && context && (symbol.flags & ts.SymbolFlags.Alias) ?\n            context.checker.getAliasedSymbol(symbol) :\n            symbol;\n    }\n    Object.defineProperty(SymbolWrapper.prototype, \"name\", {\n        get: function () { return this.symbol.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"kind\", {\n        get: function () { return this.callable ? 'method' : 'property'; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"type\", {\n        get: function () { return new TypeWrapper(this.tsType, this.context); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"container\", {\n        get: function () { return getContainerOf(this.symbol, this.context); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"public\", {\n        get: function () {\n            // Symbols that are not explicitly made private are public.\n            return !isSymbolPrivate(this.symbol);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"callable\", {\n        get: function () { return typeCallable(this.tsType); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SymbolWrapper.prototype, \"definition\", {\n        get: function () { return definitionFromTsSymbol(this.symbol); },\n        enumerable: true,\n        configurable: true\n    });\n    SymbolWrapper.prototype.members = function () {\n        if (!this._members) {\n            if ((this.symbol.flags & (ts.SymbolFlags.Class | ts.SymbolFlags.Interface)) != 0) {\n                var declaredType = this.context.checker.getDeclaredTypeOfSymbol(this.symbol);\n                var typeWrapper = new TypeWrapper(declaredType, this.context);\n                this._members = typeWrapper.members();\n            }\n            else {\n                this._members = new SymbolTableWrapper(this.symbol.members, this.context);\n            }\n        }\n        return this._members;\n    };\n    SymbolWrapper.prototype.signatures = function () { return signaturesOf(this.tsType, this.context); };\n    SymbolWrapper.prototype.selectSignature = function (types) {\n        return selectSignature(this.tsType, this.context, types);\n    };\n    SymbolWrapper.prototype.indexed = function (argument) { return undefined; };\n    Object.defineProperty(SymbolWrapper.prototype, \"tsType\", {\n        get: function () {\n            var type = this._tsType;\n            if (!type) {\n                type = this._tsType =\n                    this.context.checker.getTypeOfSymbolAtLocation(this.symbol, this.context.node);\n            }\n            return type;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SymbolWrapper;\n}());\nvar DeclaredSymbol = /** @class */ (function () {\n    function DeclaredSymbol(declaration) {\n        this.declaration = declaration;\n        this.language = 'ng-template';\n        this.nullable = false;\n        this.public = true;\n    }\n    Object.defineProperty(DeclaredSymbol.prototype, \"name\", {\n        get: function () { return this.declaration.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"kind\", {\n        get: function () { return this.declaration.kind; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"container\", {\n        get: function () { return undefined; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"type\", {\n        get: function () { return this.declaration.type; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"callable\", {\n        get: function () { return this.declaration.type.callable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DeclaredSymbol.prototype, \"definition\", {\n        get: function () { return this.declaration.definition; },\n        enumerable: true,\n        configurable: true\n    });\n    DeclaredSymbol.prototype.members = function () { return this.declaration.type.members(); };\n    DeclaredSymbol.prototype.signatures = function () { return this.declaration.type.signatures(); };\n    DeclaredSymbol.prototype.selectSignature = function (types) {\n        return this.declaration.type.selectSignature(types);\n    };\n    DeclaredSymbol.prototype.indexed = function (argument) { return undefined; };\n    return DeclaredSymbol;\n}());\nvar SignatureWrapper = /** @class */ (function () {\n    function SignatureWrapper(signature, context) {\n        this.signature = signature;\n        this.context = context;\n    }\n    Object.defineProperty(SignatureWrapper.prototype, \"arguments\", {\n        get: function () {\n            return new SymbolTableWrapper(this.signature.getParameters(), this.context);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SignatureWrapper.prototype, \"result\", {\n        get: function () { return new TypeWrapper(this.signature.getReturnType(), this.context); },\n        enumerable: true,\n        configurable: true\n    });\n    return SignatureWrapper;\n}());\nvar SignatureResultOverride = /** @class */ (function () {\n    function SignatureResultOverride(signature, resultType) {\n        this.signature = signature;\n        this.resultType = resultType;\n    }\n    Object.defineProperty(SignatureResultOverride.prototype, \"arguments\", {\n        get: function () { return this.signature.arguments; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SignatureResultOverride.prototype, \"result\", {\n        get: function () { return this.resultType; },\n        enumerable: true,\n        configurable: true\n    });\n    return SignatureResultOverride;\n}());\n/**\n * Indicates the lower bound TypeScript version supporting `SymbolTable` as an ES6 `Map`.\n * For lower versions, `SymbolTable` is implemented as a dictionary\n */\nvar MIN_TS_VERSION_SUPPORTING_MAP = '2.2';\nvar toSymbolTableFactory = function (tsVersion) { return function (symbols) {\n    if (isVersionBetween(tsVersion, MIN_TS_VERSION_SUPPORTING_MAP)) {\n        //  Typescript version >= 2.2, `SymbolTable` is implemented as an ES6 `Map`\n        var result_1 = new Map();\n        try {\n            for (var symbols_1 = __values(symbols), symbols_1_1 = symbols_1.next(); !symbols_1_1.done; symbols_1_1 = symbols_1.next()) {\n                var symbol = symbols_1_1.value;\n                result_1.set(symbol.name, symbol);\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (symbols_1_1 && !symbols_1_1.done && (_a = symbols_1.return)) _a.call(symbols_1);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        // First, tell the compiler that `result` is of type `any`. Then, use a second type assertion\n        // to `ts.SymbolTable`.\n        // Otherwise, `Map<string, ts.Symbol>` and `ts.SymbolTable` will be considered as incompatible\n        // types by the compiler\n        return result_1;\n    }\n    //  Typescript version < 2.2, `SymbolTable` is implemented as a dictionary\n    var result = {};\n    try {\n        for (var symbols_2 = __values(symbols), symbols_2_1 = symbols_2.next(); !symbols_2_1.done; symbols_2_1 = symbols_2.next()) {\n            var symbol = symbols_2_1.value;\n            result[symbol.name] = symbol;\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (symbols_2_1 && !symbols_2_1.done && (_b = symbols_2.return)) _b.call(symbols_2);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    return result;\n    var e_3, _a, e_4, _b;\n}; };\nfunction toSymbols(symbolTable) {\n    if (!symbolTable)\n        return [];\n    var table = symbolTable;\n    if (typeof table.values === 'function') {\n        return Array.from(table.values());\n    }\n    var result = [];\n    var own = typeof table.hasOwnProperty === 'function' ?\n        function (name) { return table.hasOwnProperty(name); } :\n        function (name) { return !!table[name]; };\n    for (var name in table) {\n        if (own(name)) {\n            result.push(table[name]);\n        }\n    }\n    return result;\n}\nvar SymbolTableWrapper = /** @class */ (function () {\n    function SymbolTableWrapper(symbols, context) {\n        this.context = context;\n        symbols = symbols || [];\n        if (Array.isArray(symbols)) {\n            this.symbols = symbols;\n            var toSymbolTable = toSymbolTableFactory(ts.version);\n            this.symbolTable = toSymbolTable(symbols);\n        }\n        else {\n            this.symbols = toSymbols(symbols);\n            this.symbolTable = symbols;\n        }\n    }\n    Object.defineProperty(SymbolTableWrapper.prototype, \"size\", {\n        get: function () { return this.symbols.length; },\n        enumerable: true,\n        configurable: true\n    });\n    SymbolTableWrapper.prototype.get = function (key) {\n        var symbol = getFromSymbolTable(this.symbolTable, key);\n        return symbol ? new SymbolWrapper(symbol, this.context) : undefined;\n    };\n    SymbolTableWrapper.prototype.has = function (key) {\n        var table = this.symbolTable;\n        return (typeof table.has === 'function') ? table.has(key) : table[key] != null;\n    };\n    SymbolTableWrapper.prototype.values = function () {\n        var _this = this;\n        return this.symbols.map(function (s) { return new SymbolWrapper(s, _this.context); });\n    };\n    return SymbolTableWrapper;\n}());\nvar MapSymbolTable = /** @class */ (function () {\n    function MapSymbolTable() {\n        this.map = new Map();\n        this._values = [];\n    }\n    Object.defineProperty(MapSymbolTable.prototype, \"size\", {\n        get: function () { return this.map.size; },\n        enumerable: true,\n        configurable: true\n    });\n    MapSymbolTable.prototype.get = function (key) { return this.map.get(key); };\n    MapSymbolTable.prototype.add = function (symbol) {\n        if (this.map.has(symbol.name)) {\n            var previous = this.map.get(symbol.name);\n            this._values[this._values.indexOf(previous)] = symbol;\n        }\n        this.map.set(symbol.name, symbol);\n        this._values.push(symbol);\n    };\n    MapSymbolTable.prototype.addAll = function (symbols) {\n        try {\n            for (var symbols_3 = __values(symbols), symbols_3_1 = symbols_3.next(); !symbols_3_1.done; symbols_3_1 = symbols_3.next()) {\n                var symbol = symbols_3_1.value;\n                this.add(symbol);\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (symbols_3_1 && !symbols_3_1.done && (_a = symbols_3.return)) _a.call(symbols_3);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n        var e_5, _a;\n    };\n    MapSymbolTable.prototype.has = function (key) { return this.map.has(key); };\n    MapSymbolTable.prototype.values = function () {\n        // Switch to this.map.values once iterables are supported by the target language.\n        return this._values;\n    };\n    return MapSymbolTable;\n}());\nvar PipesTable = /** @class */ (function () {\n    function PipesTable(pipes, context) {\n        this.pipes = pipes;\n        this.context = context;\n    }\n    Object.defineProperty(PipesTable.prototype, \"size\", {\n        get: function () { return this.pipes.length; },\n        enumerable: true,\n        configurable: true\n    });\n    PipesTable.prototype.get = function (key) {\n        var pipe = this.pipes.find(function (pipe) { return pipe.name == key; });\n        if (pipe) {\n            return new PipeSymbol(pipe, this.context);\n        }\n    };\n    PipesTable.prototype.has = function (key) { return this.pipes.find(function (pipe) { return pipe.name == key; }) != null; };\n    PipesTable.prototype.values = function () {\n        var _this = this;\n        return this.pipes.map(function (pipe) { return new PipeSymbol(pipe, _this.context); });\n    };\n    return PipesTable;\n}());\n// This matches .d.ts files that look like \".../<package-name>/<package-name>.d.ts\",\nvar INDEX_PATTERN = /[\\\\/]([^\\\\/]+)[\\\\/]\\1\\.d\\.ts$/;\nvar PipeSymbol = /** @class */ (function () {\n    function PipeSymbol(pipe, context) {\n        this.pipe = pipe;\n        this.context = context;\n        this.kind = 'pipe';\n        this.language = 'typescript';\n        this.container = undefined;\n        this.callable = true;\n        this.nullable = false;\n        this.public = true;\n    }\n    Object.defineProperty(PipeSymbol.prototype, \"name\", {\n        get: function () { return this.pipe.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PipeSymbol.prototype, \"type\", {\n        get: function () { return new TypeWrapper(this.tsType, this.context); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PipeSymbol.prototype, \"definition\", {\n        get: function () {\n            var symbol = this.tsType.getSymbol();\n            return symbol ? definitionFromTsSymbol(symbol) : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PipeSymbol.prototype.members = function () { return EmptyTable.instance; };\n    PipeSymbol.prototype.signatures = function () { return signaturesOf(this.tsType, this.context); };\n    PipeSymbol.prototype.selectSignature = function (types) {\n        var signature = selectSignature(this.tsType, this.context, types);\n        if (types.length == 1) {\n            var parameterType = types[0];\n            if (parameterType instanceof TypeWrapper) {\n                var resultType = undefined;\n                switch (this.name) {\n                    case 'async':\n                        switch (parameterType.name) {\n                            case 'Observable':\n                            case 'Promise':\n                            case 'EventEmitter':\n                                resultType = getTypeParameterOf(parameterType.tsType, parameterType.name);\n                                break;\n                            default:\n                                resultType = getBuiltinTypeFromTs(BuiltinType$1.Any, this.context);\n                                break;\n                        }\n                        break;\n                    case 'slice':\n                        resultType = getTypeParameterOf(parameterType.tsType, 'Array');\n                        break;\n                }\n                if (resultType) {\n                    signature = new SignatureResultOverride(signature, new TypeWrapper(resultType, parameterType.context));\n                }\n            }\n        }\n        return signature;\n    };\n    PipeSymbol.prototype.indexed = function (argument) { return undefined; };\n    Object.defineProperty(PipeSymbol.prototype, \"tsType\", {\n        get: function () {\n            var type = this._tsType;\n            if (!type) {\n                var classSymbol = this.findClassSymbol(this.pipe.type.reference);\n                if (classSymbol) {\n                    type = this._tsType = this.findTransformMethodType(classSymbol);\n                }\n                if (!type) {\n                    type = this._tsType = getBuiltinTypeFromTs(BuiltinType$1.Any, this.context);\n                }\n            }\n            return type;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PipeSymbol.prototype.findClassSymbol = function (type) {\n        return findClassSymbolInContext(type, this.context);\n    };\n    PipeSymbol.prototype.findTransformMethodType = function (classSymbol) {\n        var classType = this.context.checker.getDeclaredTypeOfSymbol(classSymbol);\n        if (classType) {\n            var transform = classType.getProperty('transform');\n            if (transform) {\n                return this.context.checker.getTypeOfSymbolAtLocation(transform, this.context.node);\n            }\n        }\n    };\n    return PipeSymbol;\n}());\nfunction findClassSymbolInContext(type, context) {\n    var sourceFile = context.program.getSourceFile(type.filePath);\n    if (!sourceFile) {\n        // This handles a case where an <packageName>/index.d.ts and a <packageName>/<packageName>.d.ts\n        // are in the same directory. If we are looking for <packageName>/<packageName> and didn't\n        // find it, look for <packageName>/index.d.ts as the program might have found that instead.\n        var p = type.filePath;\n        var m = p.match(INDEX_PATTERN);\n        if (m) {\n            var indexVersion = path.join(path.dirname(p), 'index.d.ts');\n            sourceFile = context.program.getSourceFile(indexVersion);\n        }\n    }\n    if (sourceFile) {\n        var moduleSymbol = sourceFile.module || sourceFile.symbol;\n        var exports_1 = context.checker.getExportsOfModule(moduleSymbol);\n        return (exports_1 || []).find(function (symbol) { return symbol.name == type.name; });\n    }\n}\nvar EmptyTable = /** @class */ (function () {\n    function EmptyTable() {\n        this.size = 0;\n    }\n    EmptyTable.prototype.get = function (key) { return undefined; };\n    EmptyTable.prototype.has = function (key) { return false; };\n    EmptyTable.prototype.values = function () { return []; };\n    EmptyTable.instance = new EmptyTable();\n    return EmptyTable;\n}());\nfunction isSymbolPrivate(s) {\n    return !!s.valueDeclaration && isPrivate(s.valueDeclaration);\n}\nfunction getBuiltinTypeFromTs(kind, context) {\n    var type;\n    var checker = context.checker;\n    var node = context.node;\n    switch (kind) {\n        case BuiltinType$1.Any:\n            type = checker.getTypeAtLocation(setParents({\n                kind: ts.SyntaxKind.AsExpression,\n                expression: { kind: ts.SyntaxKind.TrueKeyword },\n                type: { kind: ts.SyntaxKind.AnyKeyword }\n            }, node));\n            break;\n        case BuiltinType$1.Boolean:\n            type =\n                checker.getTypeAtLocation(setParents({ kind: ts.SyntaxKind.TrueKeyword }, node));\n            break;\n        case BuiltinType$1.Null:\n            type =\n                checker.getTypeAtLocation(setParents({ kind: ts.SyntaxKind.NullKeyword }, node));\n            break;\n        case BuiltinType$1.Number:\n            var numeric = { kind: ts.SyntaxKind.NumericLiteral };\n            setParents({ kind: ts.SyntaxKind.ExpressionStatement, expression: numeric }, node);\n            type = checker.getTypeAtLocation(numeric);\n            break;\n        case BuiltinType$1.String:\n            type = checker.getTypeAtLocation(setParents({ kind: ts.SyntaxKind.NoSubstitutionTemplateLiteral }, node));\n            break;\n        case BuiltinType$1.Undefined:\n            type = checker.getTypeAtLocation(setParents({\n                kind: ts.SyntaxKind.VoidExpression,\n                expression: { kind: ts.SyntaxKind.NumericLiteral }\n            }, node));\n            break;\n        default:\n            throw new Error(\"Internal error, unhandled literal kind \" + kind + \":\" + BuiltinType$1[kind]);\n    }\n    return type;\n}\nfunction setParents(node, parent) {\n    node.parent = parent;\n    ts.forEachChild(node, function (child) { return setParents(child, node); });\n    return node;\n}\nfunction spanAt(sourceFile, line, column) {\n    if (line != null && column != null) {\n        var position_1 = ts.getPositionOfLineAndCharacter(sourceFile, line, column);\n        var findChild = function findChild(node) {\n            if (node.kind > ts.SyntaxKind.LastToken && node.pos <= position_1 && node.end > position_1) {\n                var betterNode = ts.forEachChild(node, findChild);\n                return betterNode || node;\n            }\n        };\n        var node = ts.forEachChild(sourceFile, findChild);\n        if (node) {\n            return { start: node.getStart(), end: node.getEnd() };\n        }\n    }\n}\nfunction definitionFromTsSymbol(symbol) {\n    var declarations = symbol.declarations;\n    if (declarations) {\n        return declarations.map(function (declaration) {\n            var sourceFile = declaration.getSourceFile();\n            return {\n                fileName: sourceFile.fileName,\n                span: { start: declaration.getStart(), end: declaration.getEnd() }\n            };\n        });\n    }\n}\nfunction parentDeclarationOf(node) {\n    while (node) {\n        switch (node.kind) {\n            case ts.SyntaxKind.ClassDeclaration:\n            case ts.SyntaxKind.InterfaceDeclaration:\n                return node;\n            case ts.SyntaxKind.SourceFile:\n                return undefined;\n        }\n        node = node.parent;\n    }\n}\nfunction getContainerOf(symbol, context) {\n    if (symbol.getFlags() & ts.SymbolFlags.ClassMember && symbol.declarations) {\n        try {\n            for (var _a = __values(symbol.declarations), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var declaration = _b.value;\n                var parent = parentDeclarationOf(declaration);\n                if (parent) {\n                    var type = context.checker.getTypeAtLocation(parent);\n                    if (type) {\n                        return new TypeWrapper(type, context);\n                    }\n                }\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n    }\n    var e_6, _c;\n}\nfunction getTypeParameterOf(type, name) {\n    if (type && type.symbol && type.symbol.name == name) {\n        var typeArguments = type.typeArguments;\n        if (typeArguments && typeArguments.length <= 1) {\n            return typeArguments[0];\n        }\n    }\n}\nfunction typeKindOf(type) {\n    if (type) {\n        if (type.flags & ts.TypeFlags.Any) {\n            return BuiltinType$1.Any;\n        }\n        else if (type.flags & (ts.TypeFlags.String | ts.TypeFlags.StringLike | ts.TypeFlags.StringLiteral)) {\n            return BuiltinType$1.String;\n        }\n        else if (type.flags & (ts.TypeFlags.Number | ts.TypeFlags.NumberLike)) {\n            return BuiltinType$1.Number;\n        }\n        else if (type.flags & (ts.TypeFlags.Undefined)) {\n            return BuiltinType$1.Undefined;\n        }\n        else if (type.flags & (ts.TypeFlags.Null)) {\n            return BuiltinType$1.Null;\n        }\n        else if (type.flags & ts.TypeFlags.Union) {\n            // If all the constituent types of a union are the same kind, it is also that kind.\n            var candidate = null;\n            var unionType = type;\n            if (unionType.types.length > 0) {\n                candidate = typeKindOf(unionType.types[0]);\n                try {\n                    for (var _a = __values(unionType.types), _b = _a.next(); !_b.done; _b = _a.next()) {\n                        var subType = _b.value;\n                        if (candidate != typeKindOf(subType)) {\n                            return BuiltinType$1.Other;\n                        }\n                    }\n                }\n                catch (e_7_1) { e_7 = { error: e_7_1 }; }\n                finally {\n                    try {\n                        if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                    }\n                    finally { if (e_7) throw e_7.error; }\n                }\n            }\n            if (candidate != null) {\n                return candidate;\n            }\n        }\n        else if (type.flags & ts.TypeFlags.TypeParameter) {\n            return BuiltinType$1.Unbound;\n        }\n    }\n    return BuiltinType$1.Other;\n    var e_7, _c;\n}\nfunction getFromSymbolTable(symbolTable, key) {\n    var table = symbolTable;\n    var symbol;\n    if (typeof table.get === 'function') {\n        // TS 2.2 uses a Map\n        symbol = table.get(key);\n    }\n    else {\n        // TS pre-2.2 uses an object\n        symbol = table[key];\n    }\n    return symbol;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Metadata Schema\n// If you make a backwards incompatible change to the schema, increment the METADTA_VERSION number.\n// If you make a backwards compatible change to the metadata (such as adding an option field) then\n// leave METADATA_VERSION the same. If possible, supply as many versions of the metadata that can\n// represent the semantics of the file in an array. For example, when generating a version 2 file,\n// if version 1 can accurately represent the metadata, generate both version 1 and version 2 in\n// an array.\nvar METADATA_VERSION = 4;\n\nfunction isClassMetadata(value) {\n    return value && value.__symbolic === 'class';\n}\n\n\nfunction isMethodMetadata(value) {\n    return value && (value.__symbolic === 'constructor' || value.__symbolic === 'method');\n}\nfunction isConstructorMetadata(value) {\n    return value && value.__symbolic === 'constructor';\n}\nfunction isFunctionMetadata(value) {\n    return value && value.__symbolic === 'function';\n}\nfunction isMetadataSymbolicExpression(value) {\n    if (value) {\n        switch (value.__symbolic) {\n            case 'binary':\n            case 'call':\n            case 'index':\n            case 'new':\n            case 'pre':\n            case 'reference':\n            case 'select':\n            case 'spread':\n            case 'if':\n                return true;\n        }\n    }\n    return false;\n}\n\n\n\n\n\nfunction isMetadataGlobalReferenceExpression(value) {\n    return value && value.name && !value.module && isMetadataSymbolicReferenceExpression(value);\n}\nfunction isMetadataModuleReferenceExpression(value) {\n    return value && value.module && !value.name && !value.default &&\n        isMetadataSymbolicReferenceExpression(value);\n}\nfunction isMetadataImportedSymbolReferenceExpression(value) {\n    return value && value.module && !!value.name && isMetadataSymbolicReferenceExpression(value);\n}\nfunction isMetadataImportDefaultReference(value) {\n    return value && value.module && value.default && isMetadataSymbolicReferenceExpression(value);\n}\nfunction isMetadataSymbolicReferenceExpression(value) {\n    return value && value.__symbolic === 'reference';\n}\nfunction isMetadataSymbolicSelectExpression(value) {\n    return value && value.__symbolic === 'select';\n}\nfunction isMetadataSymbolicSpreadExpression(value) {\n    return value && value.__symbolic === 'spread';\n}\nfunction isMetadataError$1(value) {\n    return value && value.__symbolic === 'error';\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// In TypeScript 2.1 the spread element kind was renamed.\nvar spreadElementSyntaxKind = ts.SyntaxKind.SpreadElement || ts.SyntaxKind.SpreadElementExpression;\nfunction isMethodCallOf(callExpression, memberName) {\n    var expression = callExpression.expression;\n    if (expression.kind === ts.SyntaxKind.PropertyAccessExpression) {\n        var propertyAccessExpression = expression;\n        var name = propertyAccessExpression.name;\n        if (name.kind == ts.SyntaxKind.Identifier) {\n            return name.text === memberName;\n        }\n    }\n    return false;\n}\nfunction isCallOf(callExpression, ident) {\n    var expression = callExpression.expression;\n    if (expression.kind === ts.SyntaxKind.Identifier) {\n        var identifier = expression;\n        return identifier.text === ident;\n    }\n    return false;\n}\n/* @internal */\nfunction recordMapEntry(entry, node, nodeMap, sourceFile) {\n    if (!nodeMap.has(entry)) {\n        nodeMap.set(entry, node);\n        if (node && (isMetadataImportedSymbolReferenceExpression(entry) ||\n            isMetadataImportDefaultReference(entry)) &&\n            entry.line == null) {\n            var info = sourceInfo(node, sourceFile);\n            if (info.line != null)\n                entry.line = info.line;\n            if (info.character != null)\n                entry.character = info.character;\n        }\n    }\n    return entry;\n}\n/**\n * ts.forEachChild stops iterating children when the callback return a truthy value.\n * This method inverts this to implement an `every` style iterator. It will return\n * true if every call to `cb` returns `true`.\n */\nfunction everyNodeChild(node, cb) {\n    return !ts.forEachChild(node, function (node) { return !cb(node); });\n}\nfunction isPrimitive$1(value) {\n    return Object(value) !== value;\n}\nfunction isDefined$1(obj) {\n    return obj !== undefined;\n}\nfunction getSourceFileOfNode(node) {\n    while (node && node.kind != ts.SyntaxKind.SourceFile) {\n        node = node.parent;\n    }\n    return node;\n}\n/* @internal */\nfunction sourceInfo(node, sourceFile) {\n    if (node) {\n        sourceFile = sourceFile || getSourceFileOfNode(node);\n        if (sourceFile) {\n            return ts.getLineAndCharacterOfPosition(sourceFile, node.getStart(sourceFile));\n        }\n    }\n    return {};\n}\n/* @internal */\nfunction errorSymbol(message, node, context, sourceFile) {\n    var result = __assign({ __symbolic: 'error', message: message }, sourceInfo(node, sourceFile));\n    if (context) {\n        result.context = context;\n    }\n    return result;\n}\n/**\n * Produce a symbolic representation of an expression folding values into their final value when\n * possible.\n */\nvar Evaluator = /** @class */ (function () {\n    function Evaluator(symbols, nodeMap, options, recordExport) {\n        if (options === void 0) { options = {}; }\n        this.symbols = symbols;\n        this.nodeMap = nodeMap;\n        this.options = options;\n        this.recordExport = recordExport;\n    }\n    Evaluator.prototype.nameOf = function (node) {\n        if (node && node.kind == ts.SyntaxKind.Identifier) {\n            return node.text;\n        }\n        var result = node && this.evaluateNode(node);\n        if (isMetadataError$1(result) || typeof result === 'string') {\n            return result;\n        }\n        else {\n            return errorSymbol('Name expected', node, { received: (node && node.getText()) || '<missing>' });\n        }\n    };\n    /**\n     * Returns true if the expression represented by `node` can be folded into a literal expression.\n     *\n     * For example, a literal is always foldable. This means that literal expressions such as `1.2`\n     * `\"Some value\"` `true` `false` are foldable.\n     *\n     * - An object literal is foldable if all the properties in the literal are foldable.\n     * - An array literal is foldable if all the elements are foldable.\n     * - A call is foldable if it is a call to a Array.prototype.concat or a call to CONST_EXPR.\n     * - A property access is foldable if the object is foldable.\n     * - A array index is foldable if index expression is foldable and the array is foldable.\n     * - Binary operator expressions are foldable if the left and right expressions are foldable and\n     *   it is one of '+', '-', '*', '/', '%', '||', and '&&'.\n     * - An identifier is foldable if a value can be found for its symbol in the evaluator symbol\n     *   table.\n     */\n    Evaluator.prototype.isFoldable = function (node) {\n        return this.isFoldableWorker(node, new Map());\n    };\n    Evaluator.prototype.isFoldableWorker = function (node, folding) {\n        var _this = this;\n        if (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ObjectLiteralExpression:\n                    return everyNodeChild(node, function (child) {\n                        if (child.kind === ts.SyntaxKind.PropertyAssignment) {\n                            var propertyAssignment = child;\n                            return _this.isFoldableWorker(propertyAssignment.initializer, folding);\n                        }\n                        return false;\n                    });\n                case ts.SyntaxKind.ArrayLiteralExpression:\n                    return everyNodeChild(node, function (child) { return _this.isFoldableWorker(child, folding); });\n                case ts.SyntaxKind.CallExpression:\n                    var callExpression = node;\n                    // We can fold a <array>.concat(<v>).\n                    if (isMethodCallOf(callExpression, 'concat') &&\n                        arrayOrEmpty(callExpression.arguments).length === 1) {\n                        var arrayNode = callExpression.expression.expression;\n                        if (this.isFoldableWorker(arrayNode, folding) &&\n                            this.isFoldableWorker(callExpression.arguments[0], folding)) {\n                            // It needs to be an array.\n                            var arrayValue = this.evaluateNode(arrayNode);\n                            if (arrayValue && Array.isArray(arrayValue)) {\n                                return true;\n                            }\n                        }\n                    }\n                    // We can fold a call to CONST_EXPR\n                    if (isCallOf(callExpression, 'CONST_EXPR') &&\n                        arrayOrEmpty(callExpression.arguments).length === 1)\n                        return this.isFoldableWorker(callExpression.arguments[0], folding);\n                    return false;\n                case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n                case ts.SyntaxKind.StringLiteral:\n                case ts.SyntaxKind.NumericLiteral:\n                case ts.SyntaxKind.NullKeyword:\n                case ts.SyntaxKind.TrueKeyword:\n                case ts.SyntaxKind.FalseKeyword:\n                case ts.SyntaxKind.TemplateHead:\n                case ts.SyntaxKind.TemplateMiddle:\n                case ts.SyntaxKind.TemplateTail:\n                    return true;\n                case ts.SyntaxKind.ParenthesizedExpression:\n                    var parenthesizedExpression = node;\n                    return this.isFoldableWorker(parenthesizedExpression.expression, folding);\n                case ts.SyntaxKind.BinaryExpression:\n                    var binaryExpression = node;\n                    switch (binaryExpression.operatorToken.kind) {\n                        case ts.SyntaxKind.PlusToken:\n                        case ts.SyntaxKind.MinusToken:\n                        case ts.SyntaxKind.AsteriskToken:\n                        case ts.SyntaxKind.SlashToken:\n                        case ts.SyntaxKind.PercentToken:\n                        case ts.SyntaxKind.AmpersandAmpersandToken:\n                        case ts.SyntaxKind.BarBarToken:\n                            return this.isFoldableWorker(binaryExpression.left, folding) &&\n                                this.isFoldableWorker(binaryExpression.right, folding);\n                        default:\n                            return false;\n                    }\n                case ts.SyntaxKind.PropertyAccessExpression:\n                    var propertyAccessExpression = node;\n                    return this.isFoldableWorker(propertyAccessExpression.expression, folding);\n                case ts.SyntaxKind.ElementAccessExpression:\n                    var elementAccessExpression = node;\n                    return this.isFoldableWorker(elementAccessExpression.expression, folding) &&\n                        this.isFoldableWorker(elementAccessExpression.argumentExpression, folding);\n                case ts.SyntaxKind.Identifier:\n                    var identifier = node;\n                    var reference = this.symbols.resolve(identifier.text);\n                    if (reference !== undefined && isPrimitive$1(reference)) {\n                        return true;\n                    }\n                    break;\n                case ts.SyntaxKind.TemplateExpression:\n                    var templateExpression = node;\n                    return templateExpression.templateSpans.every(function (span) { return _this.isFoldableWorker(span.expression, folding); });\n            }\n        }\n        return false;\n    };\n    /**\n     * Produce a JSON serialiable object representing `node`. The foldable values in the expression\n     * tree are folded. For example, a node representing `1 + 2` is folded into `3`.\n     */\n    Evaluator.prototype.evaluateNode = function (node, preferReference) {\n        var _this = this;\n        var t = this;\n        var error;\n        function recordEntry(entry, node) {\n            if (t.options.substituteExpression) {\n                var newEntry = t.options.substituteExpression(entry, node);\n                if (t.recordExport && newEntry != entry && isMetadataGlobalReferenceExpression(newEntry)) {\n                    t.recordExport(newEntry.name, entry);\n                }\n                entry = newEntry;\n            }\n            return recordMapEntry(entry, node, t.nodeMap);\n        }\n        function isFoldableError(value) {\n            return !t.options.verboseInvalidExpression && isMetadataError$1(value);\n        }\n        var resolveName = function (name, preferReference) {\n            var reference = _this.symbols.resolve(name, preferReference);\n            if (reference === undefined) {\n                // Encode as a global reference. StaticReflector will check the reference.\n                return recordEntry({ __symbolic: 'reference', name: name }, node);\n            }\n            if (reference && isMetadataSymbolicReferenceExpression(reference)) {\n                return recordEntry(__assign({}, reference), node);\n            }\n            return reference;\n        };\n        switch (node.kind) {\n            case ts.SyntaxKind.ObjectLiteralExpression:\n                var obj_1 = {};\n                var quoted_1 = [];\n                ts.forEachChild(node, function (child) {\n                    switch (child.kind) {\n                        case ts.SyntaxKind.ShorthandPropertyAssignment:\n                        case ts.SyntaxKind.PropertyAssignment:\n                            var assignment = child;\n                            if (assignment.name.kind == ts.SyntaxKind.StringLiteral) {\n                                var name_1 = assignment.name.text;\n                                quoted_1.push(name_1);\n                            }\n                            var propertyName = _this.nameOf(assignment.name);\n                            if (isFoldableError(propertyName)) {\n                                error = propertyName;\n                                return true;\n                            }\n                            var propertyValue = isPropertyAssignment(assignment) ?\n                                _this.evaluateNode(assignment.initializer, /* preferReference */ true) :\n                                resolveName(propertyName, /* preferReference */ true);\n                            if (isFoldableError(propertyValue)) {\n                                error = propertyValue;\n                                return true; // Stop the forEachChild.\n                            }\n                            else {\n                                obj_1[propertyName] = isPropertyAssignment(assignment) ?\n                                    recordEntry(propertyValue, assignment.initializer) :\n                                    propertyValue;\n                            }\n                    }\n                });\n                if (error)\n                    return error;\n                if (this.options.quotedNames && quoted_1.length) {\n                    obj_1['$quoted$'] = quoted_1;\n                }\n                return recordEntry(obj_1, node);\n            case ts.SyntaxKind.ArrayLiteralExpression:\n                var arr_1 = [];\n                ts.forEachChild(node, function (child) {\n                    var value = _this.evaluateNode(child, /* preferReference */ true);\n                    // Check for error\n                    if (isFoldableError(value)) {\n                        error = value;\n                        return true; // Stop the forEachChild.\n                    }\n                    // Handle spread expressions\n                    if (isMetadataSymbolicSpreadExpression(value)) {\n                        if (Array.isArray(value.expression)) {\n                            try {\n                                for (var _a = __values(value.expression), _b = _a.next(); !_b.done; _b = _a.next()) {\n                                    var spreadValue = _b.value;\n                                    arr_1.push(spreadValue);\n                                }\n                            }\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                            finally {\n                                try {\n                                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                                }\n                                finally { if (e_1) throw e_1.error; }\n                            }\n                            return;\n                        }\n                    }\n                    arr_1.push(value);\n                    var e_1, _c;\n                });\n                if (error)\n                    return error;\n                return recordEntry(arr_1, node);\n            case spreadElementSyntaxKind:\n                var spreadExpression = this.evaluateNode(node.expression);\n                return recordEntry({ __symbolic: 'spread', expression: spreadExpression }, node);\n            case ts.SyntaxKind.CallExpression:\n                var callExpression = node;\n                if (isCallOf(callExpression, 'forwardRef') &&\n                    arrayOrEmpty(callExpression.arguments).length === 1) {\n                    var firstArgument = callExpression.arguments[0];\n                    if (firstArgument.kind == ts.SyntaxKind.ArrowFunction) {\n                        var arrowFunction = firstArgument;\n                        return recordEntry(this.evaluateNode(arrowFunction.body), node);\n                    }\n                }\n                var args = arrayOrEmpty(callExpression.arguments).map(function (arg) { return _this.evaluateNode(arg); });\n                if (this.isFoldable(callExpression)) {\n                    if (isMethodCallOf(callExpression, 'concat')) {\n                        var arrayValue = this.evaluateNode(callExpression.expression.expression);\n                        if (isFoldableError(arrayValue))\n                            return arrayValue;\n                        return arrayValue.concat(args[0]);\n                    }\n                }\n                // Always fold a CONST_EXPR even if the argument is not foldable.\n                if (isCallOf(callExpression, 'CONST_EXPR') &&\n                    arrayOrEmpty(callExpression.arguments).length === 1) {\n                    return recordEntry(args[0], node);\n                }\n                var expression = this.evaluateNode(callExpression.expression);\n                if (isFoldableError(expression)) {\n                    return recordEntry(expression, node);\n                }\n                var result = { __symbolic: 'call', expression: expression };\n                if (args && args.length) {\n                    result.arguments = args;\n                }\n                return recordEntry(result, node);\n            case ts.SyntaxKind.NewExpression:\n                var newExpression = node;\n                var newArgs = arrayOrEmpty(newExpression.arguments).map(function (arg) { return _this.evaluateNode(arg); });\n                var newTarget = this.evaluateNode(newExpression.expression);\n                if (isMetadataError$1(newTarget)) {\n                    return recordEntry(newTarget, node);\n                }\n                var call = { __symbolic: 'new', expression: newTarget };\n                if (newArgs.length) {\n                    call.arguments = newArgs;\n                }\n                return recordEntry(call, node);\n            case ts.SyntaxKind.PropertyAccessExpression: {\n                var propertyAccessExpression = node;\n                var expression_1 = this.evaluateNode(propertyAccessExpression.expression);\n                if (isFoldableError(expression_1)) {\n                    return recordEntry(expression_1, node);\n                }\n                var member = this.nameOf(propertyAccessExpression.name);\n                if (isFoldableError(member)) {\n                    return recordEntry(member, node);\n                }\n                if (expression_1 && this.isFoldable(propertyAccessExpression.expression))\n                    return expression_1[member];\n                if (isMetadataModuleReferenceExpression(expression_1)) {\n                    // A select into a module reference and be converted into a reference to the symbol\n                    // in the module\n                    return recordEntry({ __symbolic: 'reference', module: expression_1.module, name: member }, node);\n                }\n                return recordEntry({ __symbolic: 'select', expression: expression_1, member: member }, node);\n            }\n            case ts.SyntaxKind.ElementAccessExpression: {\n                var elementAccessExpression = node;\n                var expression_2 = this.evaluateNode(elementAccessExpression.expression);\n                if (isFoldableError(expression_2)) {\n                    return recordEntry(expression_2, node);\n                }\n                if (!elementAccessExpression.argumentExpression) {\n                    return recordEntry(errorSymbol('Expression form not supported', node), node);\n                }\n                var index = this.evaluateNode(elementAccessExpression.argumentExpression);\n                if (isFoldableError(expression_2)) {\n                    return recordEntry(expression_2, node);\n                }\n                if (this.isFoldable(elementAccessExpression.expression) &&\n                    this.isFoldable(elementAccessExpression.argumentExpression))\n                    return expression_2[index];\n                return recordEntry({ __symbolic: 'index', expression: expression_2, index: index }, node);\n            }\n            case ts.SyntaxKind.Identifier:\n                var identifier = node;\n                var name = identifier.text;\n                return resolveName(name, preferReference);\n            case ts.SyntaxKind.TypeReference:\n                var typeReferenceNode = node;\n                var typeNameNode_1 = typeReferenceNode.typeName;\n                var getReference = function (node) {\n                    if (typeNameNode_1.kind === ts.SyntaxKind.QualifiedName) {\n                        var qualifiedName = node;\n                        var left_1 = _this.evaluateNode(qualifiedName.left);\n                        if (isMetadataModuleReferenceExpression(left_1)) {\n                            return recordEntry({\n                                __symbolic: 'reference',\n                                module: left_1.module,\n                                name: qualifiedName.right.text\n                            }, node);\n                        }\n                        // Record a type reference to a declared type as a select.\n                        return { __symbolic: 'select', expression: left_1, member: qualifiedName.right.text };\n                    }\n                    else {\n                        var identifier_1 = typeNameNode_1;\n                        var symbol = _this.symbols.resolve(identifier_1.text);\n                        if (isFoldableError(symbol) || isMetadataSymbolicReferenceExpression(symbol)) {\n                            return recordEntry(symbol, node);\n                        }\n                        return recordEntry(errorSymbol('Could not resolve type', node, { typeName: identifier_1.text }), node);\n                    }\n                };\n                var typeReference = getReference(typeNameNode_1);\n                if (isFoldableError(typeReference)) {\n                    return recordEntry(typeReference, node);\n                }\n                if (!isMetadataModuleReferenceExpression(typeReference) &&\n                    typeReferenceNode.typeArguments && typeReferenceNode.typeArguments.length) {\n                    var args_1 = typeReferenceNode.typeArguments.map(function (element) { return _this.evaluateNode(element); });\n                    // TODO: Remove typecast when upgraded to 2.0 as it will be correctly inferred.\n                    // Some versions of 1.9 do not infer this correctly.\n                    typeReference.arguments = args_1;\n                }\n                return recordEntry(typeReference, node);\n            case ts.SyntaxKind.UnionType:\n                var unionType = node;\n                // Remove null and undefined from the list of unions.\n                var references = unionType.types\n                    .filter(function (n) { return n.kind != ts.SyntaxKind.NullKeyword &&\n                    n.kind != ts.SyntaxKind.UndefinedKeyword; })\n                    .map(function (n) { return _this.evaluateNode(n); });\n                // The remmaining reference must be the same. If two have type arguments consider them\n                // different even if the type arguments are the same.\n                var candidate = null;\n                for (var i = 0; i < references.length; i++) {\n                    var reference = references[i];\n                    if (isMetadataSymbolicReferenceExpression(reference)) {\n                        if (candidate) {\n                            if (reference.name == candidate.name &&\n                                reference.module == candidate.module && !reference.arguments) {\n                                candidate = reference;\n                            }\n                        }\n                        else {\n                            candidate = reference;\n                        }\n                    }\n                    else {\n                        return reference;\n                    }\n                }\n                if (candidate)\n                    return candidate;\n                break;\n            case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n            case ts.SyntaxKind.StringLiteral:\n            case ts.SyntaxKind.TemplateHead:\n            case ts.SyntaxKind.TemplateTail:\n            case ts.SyntaxKind.TemplateMiddle:\n                return node.text;\n            case ts.SyntaxKind.NumericLiteral:\n                return parseFloat(node.text);\n            case ts.SyntaxKind.AnyKeyword:\n                return recordEntry({ __symbolic: 'reference', name: 'any' }, node);\n            case ts.SyntaxKind.StringKeyword:\n                return recordEntry({ __symbolic: 'reference', name: 'string' }, node);\n            case ts.SyntaxKind.NumberKeyword:\n                return recordEntry({ __symbolic: 'reference', name: 'number' }, node);\n            case ts.SyntaxKind.BooleanKeyword:\n                return recordEntry({ __symbolic: 'reference', name: 'boolean' }, node);\n            case ts.SyntaxKind.ArrayType:\n                var arrayTypeNode = node;\n                return recordEntry({\n                    __symbolic: 'reference',\n                    name: 'Array',\n                    arguments: [this.evaluateNode(arrayTypeNode.elementType)]\n                }, node);\n            case ts.SyntaxKind.NullKeyword:\n                return null;\n            case ts.SyntaxKind.TrueKeyword:\n                return true;\n            case ts.SyntaxKind.FalseKeyword:\n                return false;\n            case ts.SyntaxKind.ParenthesizedExpression:\n                var parenthesizedExpression = node;\n                return this.evaluateNode(parenthesizedExpression.expression);\n            case ts.SyntaxKind.TypeAssertionExpression:\n                var typeAssertion = node;\n                return this.evaluateNode(typeAssertion.expression);\n            case ts.SyntaxKind.PrefixUnaryExpression:\n                var prefixUnaryExpression = node;\n                var operand = this.evaluateNode(prefixUnaryExpression.operand);\n                if (isDefined$1(operand) && isPrimitive$1(operand)) {\n                    switch (prefixUnaryExpression.operator) {\n                        case ts.SyntaxKind.PlusToken:\n                            return +operand;\n                        case ts.SyntaxKind.MinusToken:\n                            return -operand;\n                        case ts.SyntaxKind.TildeToken:\n                            return ~operand;\n                        case ts.SyntaxKind.ExclamationToken:\n                            return !operand;\n                    }\n                }\n                var operatorText = void 0;\n                switch (prefixUnaryExpression.operator) {\n                    case ts.SyntaxKind.PlusToken:\n                        operatorText = '+';\n                        break;\n                    case ts.SyntaxKind.MinusToken:\n                        operatorText = '-';\n                        break;\n                    case ts.SyntaxKind.TildeToken:\n                        operatorText = '~';\n                        break;\n                    case ts.SyntaxKind.ExclamationToken:\n                        operatorText = '!';\n                        break;\n                    default:\n                        return undefined;\n                }\n                return recordEntry({ __symbolic: 'pre', operator: operatorText, operand: operand }, node);\n            case ts.SyntaxKind.BinaryExpression:\n                var binaryExpression = node;\n                var left = this.evaluateNode(binaryExpression.left);\n                var right = this.evaluateNode(binaryExpression.right);\n                if (isDefined$1(left) && isDefined$1(right)) {\n                    if (isPrimitive$1(left) && isPrimitive$1(right))\n                        switch (binaryExpression.operatorToken.kind) {\n                            case ts.SyntaxKind.BarBarToken:\n                                return left || right;\n                            case ts.SyntaxKind.AmpersandAmpersandToken:\n                                return left && right;\n                            case ts.SyntaxKind.AmpersandToken:\n                                return left & right;\n                            case ts.SyntaxKind.BarToken:\n                                return left | right;\n                            case ts.SyntaxKind.CaretToken:\n                                return left ^ right;\n                            case ts.SyntaxKind.EqualsEqualsToken:\n                                return left == right;\n                            case ts.SyntaxKind.ExclamationEqualsToken:\n                                return left != right;\n                            case ts.SyntaxKind.EqualsEqualsEqualsToken:\n                                return left === right;\n                            case ts.SyntaxKind.ExclamationEqualsEqualsToken:\n                                return left !== right;\n                            case ts.SyntaxKind.LessThanToken:\n                                return left < right;\n                            case ts.SyntaxKind.GreaterThanToken:\n                                return left > right;\n                            case ts.SyntaxKind.LessThanEqualsToken:\n                                return left <= right;\n                            case ts.SyntaxKind.GreaterThanEqualsToken:\n                                return left >= right;\n                            case ts.SyntaxKind.LessThanLessThanToken:\n                                return left << right;\n                            case ts.SyntaxKind.GreaterThanGreaterThanToken:\n                                return left >> right;\n                            case ts.SyntaxKind.GreaterThanGreaterThanGreaterThanToken:\n                                return left >>> right;\n                            case ts.SyntaxKind.PlusToken:\n                                return left + right;\n                            case ts.SyntaxKind.MinusToken:\n                                return left - right;\n                            case ts.SyntaxKind.AsteriskToken:\n                                return left * right;\n                            case ts.SyntaxKind.SlashToken:\n                                return left / right;\n                            case ts.SyntaxKind.PercentToken:\n                                return left % right;\n                        }\n                    return recordEntry({\n                        __symbolic: 'binop',\n                        operator: binaryExpression.operatorToken.getText(),\n                        left: left,\n                        right: right\n                    }, node);\n                }\n                break;\n            case ts.SyntaxKind.ConditionalExpression:\n                var conditionalExpression = node;\n                var condition = this.evaluateNode(conditionalExpression.condition);\n                var thenExpression = this.evaluateNode(conditionalExpression.whenTrue);\n                var elseExpression = this.evaluateNode(conditionalExpression.whenFalse);\n                if (isPrimitive$1(condition)) {\n                    return condition ? thenExpression : elseExpression;\n                }\n                return recordEntry({ __symbolic: 'if', condition: condition, thenExpression: thenExpression, elseExpression: elseExpression }, node);\n            case ts.SyntaxKind.FunctionExpression:\n            case ts.SyntaxKind.ArrowFunction:\n                return recordEntry(errorSymbol('Lambda not supported', node), node);\n            case ts.SyntaxKind.TaggedTemplateExpression:\n                return recordEntry(errorSymbol('Tagged template expressions are not supported in metadata', node), node);\n            case ts.SyntaxKind.TemplateExpression:\n                var templateExpression = node;\n                if (this.isFoldable(node)) {\n                    return templateExpression.templateSpans.reduce(function (previous, current) { return previous + _this.evaluateNode(current.expression) +\n                        _this.evaluateNode(current.literal); }, this.evaluateNode(templateExpression.head));\n                }\n                else {\n                    return templateExpression.templateSpans.reduce(function (previous, current) {\n                        var expr = _this.evaluateNode(current.expression);\n                        var literal = _this.evaluateNode(current.literal);\n                        if (isFoldableError(expr))\n                            return expr;\n                        if (isFoldableError(literal))\n                            return literal;\n                        if (typeof previous === 'string' && typeof expr === 'string' &&\n                            typeof literal === 'string') {\n                            return previous + expr + literal;\n                        }\n                        var result = expr;\n                        if (previous !== '') {\n                            result = { __symbolic: 'binop', operator: '+', left: previous, right: expr };\n                        }\n                        if (literal != '') {\n                            result = { __symbolic: 'binop', operator: '+', left: result, right: literal };\n                        }\n                        return result;\n                    }, this.evaluateNode(templateExpression.head));\n                }\n            case ts.SyntaxKind.AsExpression:\n                var asExpression = node;\n                return this.evaluateNode(asExpression.expression);\n            case ts.SyntaxKind.ClassExpression:\n                return { __symbolic: 'class' };\n        }\n        return recordEntry(errorSymbol('Expression form not supported', node), node);\n    };\n    return Evaluator;\n}());\nfunction isPropertyAssignment(node) {\n    return node.kind == ts.SyntaxKind.PropertyAssignment;\n}\nvar empty = ts.createNodeArray();\nfunction arrayOrEmpty(v) {\n    return v || empty;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Symbols = /** @class */ (function () {\n    function Symbols(sourceFile) {\n        this.sourceFile = sourceFile;\n        this.references = new Map();\n    }\n    Symbols.prototype.resolve = function (name, preferReference) {\n        return (preferReference && this.references.get(name)) || this.symbols.get(name);\n    };\n    Symbols.prototype.define = function (name, value) { this.symbols.set(name, value); };\n    Symbols.prototype.defineReference = function (name, value) {\n        this.references.set(name, value);\n    };\n    Symbols.prototype.has = function (name) { return this.symbols.has(name); };\n    Object.defineProperty(Symbols.prototype, \"symbols\", {\n        get: function () {\n            var result = this._symbols;\n            if (!result) {\n                result = this._symbols = new Map();\n                populateBuiltins(result);\n                this.buildImports();\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Symbols.prototype.buildImports = function () {\n        var _this = this;\n        var symbols = this._symbols;\n        // Collect the imported symbols into this.symbols\n        var stripQuotes = function (s) { return s.replace(/^['\"]|['\"]$/g, ''); };\n        var visit = function (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ImportEqualsDeclaration:\n                    var importEqualsDeclaration = node;\n                    if (importEqualsDeclaration.moduleReference.kind ===\n                        ts.SyntaxKind.ExternalModuleReference) {\n                        var externalReference = importEqualsDeclaration.moduleReference;\n                        if (externalReference.expression) {\n                            // An `import <identifier> = require(<module-specifier>);\n                            if (!externalReference.expression.parent) {\n                                // The `parent` field of a node is set by the TypeScript binder (run as\n                                // part of the type checker). Setting it here allows us to call `getText()`\n                                // even if the `SourceFile` was not type checked (which looks for `SourceFile`\n                                // in the parent chain). This doesn't damage the node as the binder unconditionally\n                                // sets the parent.\n                                externalReference.expression.parent = externalReference;\n                                externalReference.parent = _this.sourceFile;\n                            }\n                            var from_1 = stripQuotes(externalReference.expression.getText());\n                            symbols.set(importEqualsDeclaration.name.text, { __symbolic: 'reference', module: from_1 });\n                            break;\n                        }\n                    }\n                    symbols.set(importEqualsDeclaration.name.text, { __symbolic: 'error', message: \"Unsupported import syntax\" });\n                    break;\n                case ts.SyntaxKind.ImportDeclaration:\n                    var importDecl = node;\n                    if (!importDecl.importClause) {\n                        // An `import <module-specifier>` clause which does not bring symbols into scope.\n                        break;\n                    }\n                    if (!importDecl.moduleSpecifier.parent) {\n                        // See note above in the `ImportEqualDeclaration` case.\n                        importDecl.moduleSpecifier.parent = importDecl;\n                        importDecl.parent = _this.sourceFile;\n                    }\n                    var from = stripQuotes(importDecl.moduleSpecifier.getText());\n                    if (importDecl.importClause.name) {\n                        // An `import <identifier> form <module-specifier>` clause. Record the default symbol.\n                        symbols.set(importDecl.importClause.name.text, { __symbolic: 'reference', module: from, default: true });\n                    }\n                    var bindings = importDecl.importClause.namedBindings;\n                    if (bindings) {\n                        switch (bindings.kind) {\n                            case ts.SyntaxKind.NamedImports:\n                                try {\n                                    // An `import { [<identifier> [, <identifier>] } from <module-specifier>` clause\n                                    for (var _a = __values(bindings.elements), _b = _a.next(); !_b.done; _b = _a.next()) {\n                                        var binding = _b.value;\n                                        symbols.set(binding.name.text, {\n                                            __symbolic: 'reference',\n                                            module: from,\n                                            name: binding.propertyName ? binding.propertyName.text : binding.name.text\n                                        });\n                                    }\n                                }\n                                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                                finally {\n                                    try {\n                                        if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                                    }\n                                    finally { if (e_1) throw e_1.error; }\n                                }\n                                break;\n                            case ts.SyntaxKind.NamespaceImport:\n                                // An `input * as <identifier> from <module-specifier>` clause.\n                                symbols.set(bindings.name.text, { __symbolic: 'reference', module: from });\n                                break;\n                        }\n                    }\n                    break;\n            }\n            ts.forEachChild(node, visit);\n            var e_1, _c;\n        };\n        if (this.sourceFile) {\n            ts.forEachChild(this.sourceFile, visit);\n        }\n    };\n    return Symbols;\n}());\nfunction populateBuiltins(symbols) {\n    // From lib.core.d.ts (all \"define const\")\n    ['Object', 'Function', 'String', 'Number', 'Array', 'Boolean', 'Map', 'NaN', 'Infinity', 'Math',\n        'Date', 'RegExp', 'Error', 'Error', 'EvalError', 'RangeError', 'ReferenceError', 'SyntaxError',\n        'TypeError', 'URIError', 'JSON', 'ArrayBuffer', 'DataView', 'Int8Array', 'Uint8Array',\n        'Uint8ClampedArray', 'Uint16Array', 'Int16Array', 'Int32Array', 'Uint32Array', 'Float32Array',\n        'Float64Array']\n        .forEach(function (name) { return symbols.set(name, { __symbolic: 'reference', name: name }); });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar isStatic = function (node) { return ts.getCombinedModifierFlags(node) & ts.ModifierFlags.Static; };\n/**\n * Collect decorator metadata from a TypeScript module.\n */\nvar MetadataCollector = /** @class */ (function () {\n    function MetadataCollector(options) {\n        if (options === void 0) { options = {}; }\n        this.options = options;\n    }\n    /**\n     * Returns a JSON.stringify friendly form describing the decorators of the exported classes from\n     * the source file that is expected to correspond to a module.\n     */\n    MetadataCollector.prototype.getMetadata = function (sourceFile, strict, substituteExpression) {\n        var _this = this;\n        if (strict === void 0) { strict = false; }\n        var locals = new Symbols(sourceFile);\n        var nodeMap = new Map();\n        var composedSubstituter = substituteExpression && this.options.substituteExpression ?\n            function (value, node) {\n                return _this.options.substituteExpression(substituteExpression(value, node), node);\n            } :\n            substituteExpression;\n        var evaluatorOptions = substituteExpression ? __assign({}, this.options, { substituteExpression: composedSubstituter }) :\n            this.options;\n        var metadata;\n        var evaluator = new Evaluator(locals, nodeMap, evaluatorOptions, function (name, value) {\n            if (!metadata)\n                metadata = {};\n            metadata[name] = value;\n        });\n        var exports = undefined;\n        function objFromDecorator(decoratorNode) {\n            return evaluator.evaluateNode(decoratorNode.expression);\n        }\n        function recordEntry(entry, node) {\n            if (composedSubstituter) {\n                entry = composedSubstituter(entry, node);\n            }\n            return recordMapEntry(entry, node, nodeMap, sourceFile);\n        }\n        function errorSym(message, node, context) {\n            return errorSymbol(message, node, context, sourceFile);\n        }\n        function maybeGetSimpleFunction(functionDeclaration) {\n            if (functionDeclaration.name && functionDeclaration.name.kind == ts.SyntaxKind.Identifier) {\n                var nameNode = functionDeclaration.name;\n                var functionName = nameNode.text;\n                var functionBody = functionDeclaration.body;\n                if (functionBody && functionBody.statements.length == 1) {\n                    var statement = functionBody.statements[0];\n                    if (statement.kind === ts.SyntaxKind.ReturnStatement) {\n                        var returnStatement = statement;\n                        if (returnStatement.expression) {\n                            var func = {\n                                __symbolic: 'function',\n                                parameters: namesOf(functionDeclaration.parameters),\n                                value: evaluator.evaluateNode(returnStatement.expression)\n                            };\n                            if (functionDeclaration.parameters.some(function (p) { return p.initializer != null; })) {\n                                func.defaults = functionDeclaration.parameters.map(function (p) { return p.initializer && evaluator.evaluateNode(p.initializer); });\n                            }\n                            return recordEntry({ func: func, name: functionName }, functionDeclaration);\n                        }\n                    }\n                }\n            }\n        }\n        function classMetadataOf(classDeclaration) {\n            var result = { __symbolic: 'class' };\n            function getDecorators(decorators) {\n                if (decorators && decorators.length)\n                    return decorators.map(function (decorator) { return objFromDecorator(decorator); });\n                return undefined;\n            }\n            function referenceFrom(node) {\n                var result = evaluator.evaluateNode(node);\n                if (isMetadataError$1(result) || isMetadataSymbolicReferenceExpression(result) ||\n                    isMetadataSymbolicSelectExpression(result)) {\n                    return result;\n                }\n                else {\n                    return errorSym('Symbol reference expected', node);\n                }\n            }\n            // Add class parents\n            if (classDeclaration.heritageClauses) {\n                classDeclaration.heritageClauses.forEach(function (hc) {\n                    if (hc.token === ts.SyntaxKind.ExtendsKeyword && hc.types) {\n                        hc.types.forEach(function (type) { return result.extends = referenceFrom(type.expression); });\n                    }\n                });\n            }\n            // Add arity if the type is generic\n            var typeParameters = classDeclaration.typeParameters;\n            if (typeParameters && typeParameters.length) {\n                result.arity = typeParameters.length;\n            }\n            // Add class decorators\n            if (classDeclaration.decorators) {\n                result.decorators = getDecorators(classDeclaration.decorators);\n            }\n            // member decorators\n            var members = null;\n            function recordMember(name, metadata) {\n                if (!members)\n                    members = {};\n                var data = members.hasOwnProperty(name) ? members[name] : [];\n                data.push(metadata);\n                members[name] = data;\n            }\n            // static member\n            var statics = null;\n            function recordStaticMember(name, value) {\n                if (!statics)\n                    statics = {};\n                statics[name] = value;\n            }\n            try {\n                for (var _a = __values(classDeclaration.members), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var member = _b.value;\n                    var isConstructor = false;\n                    switch (member.kind) {\n                        case ts.SyntaxKind.Constructor:\n                        case ts.SyntaxKind.MethodDeclaration:\n                            isConstructor = member.kind === ts.SyntaxKind.Constructor;\n                            var method = member;\n                            if (isStatic(method)) {\n                                var maybeFunc = maybeGetSimpleFunction(method);\n                                if (maybeFunc) {\n                                    recordStaticMember(maybeFunc.name, maybeFunc.func);\n                                }\n                                continue;\n                            }\n                            var methodDecorators = getDecorators(method.decorators);\n                            var parameters = method.parameters;\n                            var parameterDecoratorData = [];\n                            var parametersData = [];\n                            var hasDecoratorData = false;\n                            var hasParameterData = false;\n                            try {\n                                for (var parameters_1 = __values(parameters), parameters_1_1 = parameters_1.next(); !parameters_1_1.done; parameters_1_1 = parameters_1.next()) {\n                                    var parameter = parameters_1_1.value;\n                                    var parameterData = getDecorators(parameter.decorators);\n                                    parameterDecoratorData.push(parameterData);\n                                    hasDecoratorData = hasDecoratorData || !!parameterData;\n                                    if (isConstructor) {\n                                        if (parameter.type) {\n                                            parametersData.push(referenceFrom(parameter.type));\n                                        }\n                                        else {\n                                            parametersData.push(null);\n                                        }\n                                        hasParameterData = true;\n                                    }\n                                }\n                            }\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                            finally {\n                                try {\n                                    if (parameters_1_1 && !parameters_1_1.done && (_c = parameters_1.return)) _c.call(parameters_1);\n                                }\n                                finally { if (e_1) throw e_1.error; }\n                            }\n                            var data = { __symbolic: isConstructor ? 'constructor' : 'method' };\n                            var name = isConstructor ? '__ctor__' : evaluator.nameOf(member.name);\n                            if (methodDecorators) {\n                                data.decorators = methodDecorators;\n                            }\n                            if (hasDecoratorData) {\n                                data.parameterDecorators = parameterDecoratorData;\n                            }\n                            if (hasParameterData) {\n                                data.parameters = parametersData;\n                            }\n                            if (!isMetadataError$1(name)) {\n                                recordMember(name, data);\n                            }\n                            break;\n                        case ts.SyntaxKind.PropertyDeclaration:\n                        case ts.SyntaxKind.GetAccessor:\n                        case ts.SyntaxKind.SetAccessor:\n                            var property = member;\n                            if (isStatic(property)) {\n                                var name_1 = evaluator.nameOf(property.name);\n                                if (!isMetadataError$1(name_1)) {\n                                    if (property.initializer) {\n                                        var value = evaluator.evaluateNode(property.initializer);\n                                        recordStaticMember(name_1, value);\n                                    }\n                                    else {\n                                        recordStaticMember(name_1, errorSym('Variable not initialized', property.name));\n                                    }\n                                }\n                            }\n                            var propertyDecorators = getDecorators(property.decorators);\n                            if (propertyDecorators) {\n                                var name_2 = evaluator.nameOf(property.name);\n                                if (!isMetadataError$1(name_2)) {\n                                    recordMember(name_2, { __symbolic: 'property', decorators: propertyDecorators });\n                                }\n                            }\n                            break;\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_d = _a.return)) _d.call(_a);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            if (members) {\n                result.members = members;\n            }\n            if (statics) {\n                result.statics = statics;\n            }\n            return recordEntry(result, classDeclaration);\n            var e_2, _d, e_1, _c;\n        }\n        // Collect all exported symbols from an exports clause.\n        var exportMap = new Map();\n        ts.forEachChild(sourceFile, function (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ExportDeclaration:\n                    var exportDeclaration = node;\n                    var moduleSpecifier = exportDeclaration.moduleSpecifier, exportClause = exportDeclaration.exportClause;\n                    if (!moduleSpecifier) {\n                        // If there is a module specifier there is also an exportClause\n                        exportClause.elements.forEach(function (spec) {\n                            var exportedAs = spec.name.text;\n                            var name = (spec.propertyName || spec.name).text;\n                            exportMap.set(name, exportedAs);\n                        });\n                    }\n            }\n        });\n        var isExport = function (node) {\n            return sourceFile.isDeclarationFile || ts.getCombinedModifierFlags(node) & ts.ModifierFlags.Export;\n        };\n        var isExportedIdentifier = function (identifier) {\n            return identifier && exportMap.has(identifier.text);\n        };\n        var isExported = function (node) {\n            return isExport(node) || isExportedIdentifier(node.name);\n        };\n        var exportedIdentifierName = function (identifier) {\n            return identifier && (exportMap.get(identifier.text) || identifier.text);\n        };\n        var exportedName = function (node) { return exportedIdentifierName(node.name); };\n        // Pre-declare classes and functions\n        ts.forEachChild(sourceFile, function (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ClassDeclaration:\n                    var classDeclaration = node;\n                    if (classDeclaration.name) {\n                        var className = classDeclaration.name.text;\n                        if (isExported(classDeclaration)) {\n                            locals.define(className, { __symbolic: 'reference', name: exportedName(classDeclaration) });\n                        }\n                        else {\n                            locals.define(className, errorSym('Reference to non-exported class', node, { className: className }));\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.InterfaceDeclaration:\n                    var interfaceDeclaration = node;\n                    if (interfaceDeclaration.name) {\n                        var interfaceName = interfaceDeclaration.name.text;\n                        // All references to interfaces should be converted to references to `any`.\n                        locals.define(interfaceName, { __symbolic: 'reference', name: 'any' });\n                    }\n                    break;\n                case ts.SyntaxKind.FunctionDeclaration:\n                    var functionDeclaration = node;\n                    if (!isExported(functionDeclaration)) {\n                        // Report references to this function as an error.\n                        var nameNode = functionDeclaration.name;\n                        if (nameNode && nameNode.text) {\n                            locals.define(nameNode.text, errorSym('Reference to a non-exported function', nameNode, { name: nameNode.text }));\n                        }\n                    }\n                    break;\n            }\n        });\n        ts.forEachChild(sourceFile, function (node) {\n            switch (node.kind) {\n                case ts.SyntaxKind.ExportDeclaration:\n                    // Record export declarations\n                    var exportDeclaration = node;\n                    var moduleSpecifier = exportDeclaration.moduleSpecifier, exportClause = exportDeclaration.exportClause;\n                    if (!moduleSpecifier) {\n                        // no module specifier -> export {propName as name};\n                        if (exportClause) {\n                            exportClause.elements.forEach(function (spec) {\n                                var name = spec.name.text;\n                                // If the symbol was not already exported, export a reference since it is a\n                                // reference to an import\n                                if (!metadata || !metadata[name]) {\n                                    var propNode = spec.propertyName || spec.name;\n                                    var value = evaluator.evaluateNode(propNode);\n                                    if (!metadata)\n                                        metadata = {};\n                                    metadata[name] = recordEntry(value, node);\n                                }\n                            });\n                        }\n                    }\n                    if (moduleSpecifier && moduleSpecifier.kind == ts.SyntaxKind.StringLiteral) {\n                        // Ignore exports that don't have string literals as exports.\n                        // This is allowed by the syntax but will be flagged as an error by the type checker.\n                        var from = moduleSpecifier.text;\n                        var moduleExport = { from: from };\n                        if (exportClause) {\n                            moduleExport.export = exportClause.elements.map(function (spec) { return spec.propertyName ? { name: spec.propertyName.text, as: spec.name.text } :\n                                spec.name.text; });\n                        }\n                        if (!exports)\n                            exports = [];\n                        exports.push(moduleExport);\n                    }\n                    break;\n                case ts.SyntaxKind.ClassDeclaration:\n                    var classDeclaration = node;\n                    if (classDeclaration.name) {\n                        if (isExported(classDeclaration)) {\n                            var name = exportedName(classDeclaration);\n                            if (name) {\n                                if (!metadata)\n                                    metadata = {};\n                                metadata[name] = classMetadataOf(classDeclaration);\n                            }\n                        }\n                    }\n                    // Otherwise don't record metadata for the class.\n                    break;\n                case ts.SyntaxKind.TypeAliasDeclaration:\n                    var typeDeclaration = node;\n                    if (typeDeclaration.name && isExported(typeDeclaration)) {\n                        var name = exportedName(typeDeclaration);\n                        if (name) {\n                            if (!metadata)\n                                metadata = {};\n                            metadata[name] = { __symbolic: 'interface' };\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.InterfaceDeclaration:\n                    var interfaceDeclaration = node;\n                    if (interfaceDeclaration.name && isExported(interfaceDeclaration)) {\n                        var name = exportedName(interfaceDeclaration);\n                        if (name) {\n                            if (!metadata)\n                                metadata = {};\n                            metadata[name] = { __symbolic: 'interface' };\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.FunctionDeclaration:\n                    // Record functions that return a single value. Record the parameter\n                    // names substitution will be performed by the StaticReflector.\n                    var functionDeclaration = node;\n                    if (isExported(functionDeclaration) && functionDeclaration.name) {\n                        var name = exportedName(functionDeclaration);\n                        var maybeFunc = maybeGetSimpleFunction(functionDeclaration);\n                        if (name) {\n                            if (!metadata)\n                                metadata = {};\n                            metadata[name] =\n                                maybeFunc ? recordEntry(maybeFunc.func, node) : { __symbolic: 'function' };\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.EnumDeclaration:\n                    var enumDeclaration = node;\n                    if (isExported(enumDeclaration)) {\n                        var enumValueHolder = {};\n                        var enumName = exportedName(enumDeclaration);\n                        var nextDefaultValue = 0;\n                        var writtenMembers = 0;\n                        try {\n                            for (var _a = __values(enumDeclaration.members), _b = _a.next(); !_b.done; _b = _a.next()) {\n                                var member = _b.value;\n                                var enumValue = void 0;\n                                if (!member.initializer) {\n                                    enumValue = nextDefaultValue;\n                                }\n                                else {\n                                    enumValue = evaluator.evaluateNode(member.initializer);\n                                }\n                                var name = undefined;\n                                if (member.name.kind == ts.SyntaxKind.Identifier) {\n                                    var identifier = member.name;\n                                    name = identifier.text;\n                                    enumValueHolder[name] = enumValue;\n                                    writtenMembers++;\n                                }\n                                if (typeof enumValue === 'number') {\n                                    nextDefaultValue = enumValue + 1;\n                                }\n                                else if (name) {\n                                    nextDefaultValue = {\n                                        __symbolic: 'binary',\n                                        operator: '+',\n                                        left: {\n                                            __symbolic: 'select',\n                                            expression: recordEntry({ __symbolic: 'reference', name: enumName }, node), name: name\n                                        }\n                                    };\n                                }\n                                else {\n                                    nextDefaultValue =\n                                        recordEntry(errorSym('Unsupported enum member name', member.name), node);\n                                }\n                            }\n                        }\n                        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                        finally {\n                            try {\n                                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                            }\n                            finally { if (e_3) throw e_3.error; }\n                        }\n                        if (writtenMembers) {\n                            if (enumName) {\n                                if (!metadata)\n                                    metadata = {};\n                                metadata[enumName] = recordEntry(enumValueHolder, node);\n                            }\n                        }\n                    }\n                    break;\n                case ts.SyntaxKind.VariableStatement:\n                    var variableStatement = node;\n                    var _loop_1 = function (variableDeclaration) {\n                        if (variableDeclaration.name.kind == ts.SyntaxKind.Identifier) {\n                            var nameNode = variableDeclaration.name;\n                            var varValue = void 0;\n                            if (variableDeclaration.initializer) {\n                                varValue = evaluator.evaluateNode(variableDeclaration.initializer);\n                            }\n                            else {\n                                varValue = recordEntry(errorSym('Variable not initialized', nameNode), nameNode);\n                            }\n                            var exported = false;\n                            if (isExport(variableStatement) || isExport(variableDeclaration) ||\n                                isExportedIdentifier(nameNode)) {\n                                var name = exportedIdentifierName(nameNode);\n                                if (name) {\n                                    if (!metadata)\n                                        metadata = {};\n                                    metadata[name] = recordEntry(varValue, node);\n                                }\n                                exported = true;\n                            }\n                            if (typeof varValue == 'string' || typeof varValue == 'number' ||\n                                typeof varValue == 'boolean') {\n                                locals.define(nameNode.text, varValue);\n                                if (exported) {\n                                    locals.defineReference(nameNode.text, { __symbolic: 'reference', name: nameNode.text });\n                                }\n                            }\n                            else if (!exported) {\n                                if (varValue && !isMetadataError$1(varValue)) {\n                                    locals.define(nameNode.text, recordEntry(varValue, node));\n                                }\n                                else {\n                                    locals.define(nameNode.text, recordEntry(errorSym('Reference to a local symbol', nameNode, { name: nameNode.text }), node));\n                                }\n                            }\n                        }\n                        else {\n                            // Destructuring (or binding) declarations are not supported,\n                            // var {<identifier>[, <identifier>]+} = <expression>;\n                            //   or\n                            // var [<identifier>[, <identifier}+] = <expression>;\n                            // are not supported.\n                            var report_1 = function (nameNode) {\n                                switch (nameNode.kind) {\n                                    case ts.SyntaxKind.Identifier:\n                                        var name = nameNode;\n                                        var varValue = errorSym('Destructuring not supported', name);\n                                        locals.define(name.text, varValue);\n                                        if (isExport(node)) {\n                                            if (!metadata)\n                                                metadata = {};\n                                            metadata[name.text] = varValue;\n                                        }\n                                        break;\n                                    case ts.SyntaxKind.BindingElement:\n                                        var bindingElement = nameNode;\n                                        report_1(bindingElement.name);\n                                        break;\n                                    case ts.SyntaxKind.ObjectBindingPattern:\n                                    case ts.SyntaxKind.ArrayBindingPattern:\n                                        var bindings = nameNode;\n                                        bindings.elements.forEach(report_1);\n                                        break;\n                                }\n                            };\n                            report_1(variableDeclaration.name);\n                        }\n                    };\n                    try {\n                        for (var _d = __values(variableStatement.declarationList.declarations), _e = _d.next(); !_e.done; _e = _d.next()) {\n                            var variableDeclaration = _e.value;\n                            _loop_1(variableDeclaration);\n                        }\n                    }\n                    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                    finally {\n                        try {\n                            if (_e && !_e.done && (_f = _d.return)) _f.call(_d);\n                        }\n                        finally { if (e_4) throw e_4.error; }\n                    }\n                    break;\n            }\n            var e_3, _c, e_4, _f;\n        });\n        if (metadata || exports) {\n            if (!metadata)\n                metadata = {};\n            else if (strict) {\n                validateMetadata(sourceFile, nodeMap, metadata);\n            }\n            var result = {\n                __symbolic: 'module',\n                version: this.options.version || METADATA_VERSION, metadata: metadata\n            };\n            if (sourceFile.moduleName)\n                result.importAs = sourceFile.moduleName;\n            if (exports)\n                result.exports = exports;\n            return result;\n        }\n    };\n    return MetadataCollector;\n}());\n// This will throw if the metadata entry given contains an error node.\nfunction validateMetadata(sourceFile, nodeMap, metadata) {\n    var locals = new Set(['Array', 'Object', 'Set', 'Map', 'string', 'number', 'any']);\n    function validateExpression(expression) {\n        if (!expression) {\n            return;\n        }\n        else if (Array.isArray(expression)) {\n            expression.forEach(validateExpression);\n        }\n        else if (typeof expression === 'object' && !expression.hasOwnProperty('__symbolic')) {\n            Object.getOwnPropertyNames(expression).forEach(function (v) { return validateExpression(expression[v]); });\n        }\n        else if (isMetadataError$1(expression)) {\n            reportError(expression);\n        }\n        else if (isMetadataGlobalReferenceExpression(expression)) {\n            if (!locals.has(expression.name)) {\n                var reference = metadata[expression.name];\n                if (reference) {\n                    validateExpression(reference);\n                }\n            }\n        }\n        else if (isFunctionMetadata(expression)) {\n            validateFunction(expression);\n        }\n        else if (isMetadataSymbolicExpression(expression)) {\n            switch (expression.__symbolic) {\n                case 'binary':\n                    var binaryExpression = expression;\n                    validateExpression(binaryExpression.left);\n                    validateExpression(binaryExpression.right);\n                    break;\n                case 'call':\n                case 'new':\n                    var callExpression = expression;\n                    validateExpression(callExpression.expression);\n                    if (callExpression.arguments)\n                        callExpression.arguments.forEach(validateExpression);\n                    break;\n                case 'index':\n                    var indexExpression = expression;\n                    validateExpression(indexExpression.expression);\n                    validateExpression(indexExpression.index);\n                    break;\n                case 'pre':\n                    var prefixExpression = expression;\n                    validateExpression(prefixExpression.operand);\n                    break;\n                case 'select':\n                    var selectExpression = expression;\n                    validateExpression(selectExpression.expression);\n                    break;\n                case 'spread':\n                    var spreadExpression = expression;\n                    validateExpression(spreadExpression.expression);\n                    break;\n                case 'if':\n                    var ifExpression = expression;\n                    validateExpression(ifExpression.condition);\n                    validateExpression(ifExpression.elseExpression);\n                    validateExpression(ifExpression.thenExpression);\n                    break;\n            }\n        }\n    }\n    function validateMember(classData, member) {\n        if (member.decorators) {\n            member.decorators.forEach(validateExpression);\n        }\n        if (isMethodMetadata(member) && member.parameterDecorators) {\n            member.parameterDecorators.forEach(validateExpression);\n        }\n        // Only validate parameters of classes for which we know that are used with our DI\n        if (classData.decorators && isConstructorMetadata(member) && member.parameters) {\n            member.parameters.forEach(validateExpression);\n        }\n    }\n    function validateClass(classData) {\n        if (classData.decorators) {\n            classData.decorators.forEach(validateExpression);\n        }\n        if (classData.members) {\n            Object.getOwnPropertyNames(classData.members)\n                .forEach(function (name) { return classData.members[name].forEach(function (m) { return validateMember(classData, m); }); });\n        }\n        if (classData.statics) {\n            Object.getOwnPropertyNames(classData.statics).forEach(function (name) {\n                var staticMember = classData.statics[name];\n                if (isFunctionMetadata(staticMember)) {\n                    validateExpression(staticMember.value);\n                }\n                else {\n                    validateExpression(staticMember);\n                }\n            });\n        }\n    }\n    function validateFunction(functionDeclaration) {\n        if (functionDeclaration.value) {\n            var oldLocals = locals;\n            if (functionDeclaration.parameters) {\n                locals = new Set(oldLocals.values());\n                if (functionDeclaration.parameters)\n                    functionDeclaration.parameters.forEach(function (n) { return locals.add(n); });\n            }\n            validateExpression(functionDeclaration.value);\n            locals = oldLocals;\n        }\n    }\n    function shouldReportNode(node) {\n        if (node) {\n            var nodeStart = node.getStart();\n            return !(node.pos != nodeStart &&\n                sourceFile.text.substring(node.pos, nodeStart).indexOf('@dynamic') >= 0);\n        }\n        return true;\n    }\n    function reportError(error) {\n        var node = nodeMap.get(error);\n        if (shouldReportNode(node)) {\n            var lineInfo = error.line != undefined ?\n                error.character != undefined ? \":\" + (error.line + 1) + \":\" + (error.character + 1) :\n                    \":\" + (error.line + 1) :\n                '';\n            throw new Error(\"\" + sourceFile.fileName + lineInfo + \": Metadata collected contains an error that will be reported at runtime: \" + expandedMessage$1(error) + \".\\n  \" + JSON.stringify(error));\n        }\n    }\n    Object.getOwnPropertyNames(metadata).forEach(function (name) {\n        var entry = metadata[name];\n        try {\n            if (isClassMetadata(entry)) {\n                validateClass(entry);\n            }\n        }\n        catch (e) {\n            var node = nodeMap.get(entry);\n            if (shouldReportNode(node)) {\n                if (node) {\n                    var _a = sourceFile.getLineAndCharacterOfPosition(node.getStart()), line = _a.line, character = _a.character;\n                    throw new Error(sourceFile.fileName + \":\" + (line + 1) + \":\" + (character + 1) + \": Error encountered in metadata generated for exported symbol '\" + name + \"': \\n \" + e.message);\n                }\n                throw new Error(\"Error encountered in metadata generated for exported symbol \" + name + \": \\n \" + e.message);\n            }\n        }\n    });\n}\n// Collect parameter names from a function.\nfunction namesOf(parameters) {\n    var result = [];\n    function addNamesOf(name) {\n        if (name.kind == ts.SyntaxKind.Identifier) {\n            var identifier = name;\n            result.push(identifier.text);\n        }\n        else {\n            var bindingPattern = name;\n            try {\n                for (var _a = __values(bindingPattern.elements), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var element = _b.value;\n                    var name_3 = element.name;\n                    if (name_3) {\n                        addNamesOf(name_3);\n                    }\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n        var e_5, _c;\n    }\n    try {\n        for (var parameters_2 = __values(parameters), parameters_2_1 = parameters_2.next(); !parameters_2_1.done; parameters_2_1 = parameters_2.next()) {\n            var parameter = parameters_2_1.value;\n            addNamesOf(parameter.name);\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (parameters_2_1 && !parameters_2_1.done && (_a = parameters_2.return)) _a.call(parameters_2);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    return result;\n    var e_6, _a;\n}\nfunction expandedMessage$1(error) {\n    switch (error.message) {\n        case 'Reference to non-exported class':\n            if (error.context && error.context.className) {\n                return \"Reference to a non-exported class \" + error.context.className + \". Consider exporting the class\";\n            }\n            break;\n        case 'Variable not initialized':\n            return 'Only initialized variables and constants can be referenced because the value of this variable is needed by the template compiler';\n        case 'Destructuring not supported':\n            return 'Referencing an exported destructured variable or constant is not supported by the template compiler. Consider simplifying this to avoid destructuring';\n        case 'Could not resolve type':\n            if (error.context && error.context.typeName) {\n                return \"Could not resolve type \" + error.context.typeName;\n            }\n            break;\n        case 'Function call not supported':\n            var prefix = error.context && error.context.name ? \"Calling function '\" + error.context.name + \"', f\" : 'F';\n            return prefix +\n                'unction calls are not supported. Consider replacing the function or lambda with a reference to an exported function';\n        case 'Reference to a local symbol':\n            if (error.context && error.context.name) {\n                return \"Reference to a local (non-exported) symbol '\" + error.context.name + \"'. Consider exporting the symbol\";\n            }\n    }\n    return error.message;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\n\n\n\nvar EmitFlags;\n(function (EmitFlags) {\n    EmitFlags[EmitFlags[\"DTS\"] = 1] = \"DTS\";\n    EmitFlags[EmitFlags[\"JS\"] = 2] = \"JS\";\n    EmitFlags[EmitFlags[\"Metadata\"] = 4] = \"Metadata\";\n    EmitFlags[EmitFlags[\"I18nBundle\"] = 8] = \"I18nBundle\";\n    EmitFlags[EmitFlags[\"Codegen\"] = 16] = \"Codegen\";\n    EmitFlags[EmitFlags[\"Default\"] = 19] = \"Default\";\n    EmitFlags[EmitFlags[\"All\"] = 31] = \"All\";\n})(EmitFlags || (EmitFlags = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar DTS$1 = /\\.d\\.ts$/;\n\n// Note: This is an internal property in TypeScript. Use it only for assertions and tests.\n\n\n\n\n\n\n/**\n * Converts a ng.Diagnostic into a ts.Diagnostic.\n * This looses some information, and also uses an incomplete object as `file`.\n *\n * I.e. only use this where the API allows only a ts.Diagnostic.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction createMetadataReaderCache() {\n    var data = new Map();\n    return { data: data };\n}\nfunction readMetadata(filePath, host, cache) {\n    var metadatas = cache && cache.data.get(filePath);\n    if (metadatas) {\n        return metadatas;\n    }\n    if (host.fileExists(filePath)) {\n        // If the file doesn't exists then we cannot return metadata for the file.\n        // This will occur if the user referenced a declared module for which no file\n        // exists for the module (i.e. jQuery or angularjs).\n        if (DTS$1.test(filePath)) {\n            metadatas = readMetadataFile(host, filePath);\n            if (!metadatas) {\n                // If there is a .d.ts file but no metadata file we need to produce a\n                // metadata from the .d.ts file as metadata files capture reexports\n                // (starting with v3).\n                metadatas = [upgradeMetadataWithDtsData(host, { '__symbolic': 'module', 'version': 1, 'metadata': {} }, filePath)];\n            }\n        }\n        else {\n            var metadata = host.getSourceFileMetadata(filePath);\n            metadatas = metadata ? [metadata] : [];\n        }\n    }\n    if (cache && (!host.cacheMetadata || host.cacheMetadata(filePath))) {\n        cache.data.set(filePath, metadatas);\n    }\n    return metadatas;\n}\nfunction readMetadataFile(host, dtsFilePath) {\n    var metadataPath = dtsFilePath.replace(DTS$1, '.metadata.json');\n    if (!host.fileExists(metadataPath)) {\n        return undefined;\n    }\n    try {\n        var metadataOrMetadatas = JSON.parse(host.readFile(metadataPath));\n        var metadatas = metadataOrMetadatas ?\n            (Array.isArray(metadataOrMetadatas) ? metadataOrMetadatas : [metadataOrMetadatas]) :\n            [];\n        if (metadatas.length) {\n            var maxMetadata = metadatas.reduce(function (p, c) { return p.version > c.version ? p : c; });\n            if (maxMetadata.version < METADATA_VERSION) {\n                metadatas.push(upgradeMetadataWithDtsData(host, maxMetadata, dtsFilePath));\n            }\n        }\n        return metadatas;\n    }\n    catch (e) {\n        console.error(\"Failed to read JSON file \" + metadataPath);\n        throw e;\n    }\n}\nfunction upgradeMetadataWithDtsData(host, oldMetadata, dtsFilePath) {\n    // patch v1 to v3 by adding exports and the `extends` clause.\n    // patch v3 to v4 by adding `interface` symbols for TypeAlias\n    var newMetadata = {\n        '__symbolic': 'module',\n        'version': METADATA_VERSION,\n        'metadata': __assign({}, oldMetadata.metadata),\n    };\n    if (oldMetadata.exports) {\n        newMetadata.exports = oldMetadata.exports;\n    }\n    if (oldMetadata.importAs) {\n        newMetadata.importAs = oldMetadata.importAs;\n    }\n    if (oldMetadata.origins) {\n        newMetadata.origins = oldMetadata.origins;\n    }\n    var dtsMetadata = host.getSourceFileMetadata(dtsFilePath);\n    if (dtsMetadata) {\n        for (var prop in dtsMetadata.metadata) {\n            if (!newMetadata.metadata[prop]) {\n                newMetadata.metadata[prop] = dtsMetadata.metadata[prop];\n            }\n        }\n        if (dtsMetadata['importAs'])\n            newMetadata['importAs'] = dtsMetadata['importAs'];\n        // Only copy exports from exports from metadata prior to version 3.\n        // Starting with version 3 the collector began collecting exports and\n        // this should be redundant. Also, with bundler will rewrite the exports\n        // which will hoist the exports from modules referenced indirectly causing\n        // the imports to be different than the .d.ts files and using the .d.ts file\n        // exports would cause the StaticSymbolResolver to redirect symbols to the\n        // incorrect location.\n        if ((!oldMetadata.version || oldMetadata.version < 3) && dtsMetadata.exports) {\n            newMetadata.exports = dtsMetadata.exports;\n        }\n    }\n    return newMetadata;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/*\n\nThe API from compiler-cli that language-service can see.\nIt is important that none the exported modules require anything other than\nAngular modules and Typescript as this will indirectly add a dependency\nto the language service.\n\n*/\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * The kind of diagnostic message.\n *\n * @experimental\n */\nvar DiagnosticKind$1;\n(function (DiagnosticKind) {\n    DiagnosticKind[DiagnosticKind[\"Error\"] = 0] = \"Error\";\n    DiagnosticKind[DiagnosticKind[\"Warning\"] = 1] = \"Warning\";\n})(DiagnosticKind$1 || (DiagnosticKind$1 = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction isParseSourceSpan(value) {\n    return value && !!value.start;\n}\nfunction spanOf$3(span) {\n    if (!span)\n        return undefined;\n    if (isParseSourceSpan(span)) {\n        return { start: span.start.offset, end: span.end.offset };\n    }\n    else {\n        if (span.endSourceSpan) {\n            return { start: span.sourceSpan.start.offset, end: span.endSourceSpan.end.offset };\n        }\n        else if (span.children && span.children.length) {\n            return {\n                start: span.sourceSpan.start.offset,\n                end: spanOf$3(span.children[span.children.length - 1]).end\n            };\n        }\n        return { start: span.sourceSpan.start.offset, end: span.sourceSpan.end.offset };\n    }\n}\nfunction inSpan(position, span, exclusive) {\n    return span != null && (exclusive ? position >= span.start && position < span.end :\n        position >= span.start && position <= span.end);\n}\nfunction offsetSpan$1(span, amount) {\n    return { start: span.start + amount, end: span.end + amount };\n}\nfunction isNarrower(spanA, spanB) {\n    return spanA.start >= spanB.start && spanA.end <= spanB.end;\n}\nfunction hasTemplateReference$1(type) {\n    if (type.diDeps) {\n        try {\n            for (var _a = __values(type.diDeps), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var diDep = _b.value;\n                if (diDep.token && diDep.token.identifier &&\n                    identifierName(diDep.token.identifier) == 'TemplateRef')\n                    return true;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    return false;\n    var e_1, _c;\n}\nfunction getSelectors(info) {\n    var map = new Map();\n    var selectors = flatten$1(info.directives.map(function (directive) {\n        var selectors = CssSelector.parse(directive.selector);\n        selectors.forEach(function (selector) { return map.set(selector, directive); });\n        return selectors;\n    }));\n    return { selectors: selectors, map: map };\n}\nfunction flatten$1(a) {\n    return (_a = []).concat.apply(_a, __spread(a));\n    var _a;\n}\nfunction removeSuffix(value, suffix) {\n    if (value.endsWith(suffix))\n        return value.substring(0, value.length - suffix.length);\n    return value;\n}\nfunction uniqueByName(elements) {\n    if (elements) {\n        var result = [];\n        var set = new Set();\n        try {\n            for (var elements_1 = __values(elements), elements_1_1 = elements_1.next(); !elements_1_1.done; elements_1_1 = elements_1.next()) {\n                var element = elements_1_1.value;\n                if (!set.has(element.name)) {\n                    set.add(element.name);\n                    result.push(element);\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (elements_1_1 && !elements_1_1.done && (_a = elements_1.return)) _a.call(elements_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return result;\n    }\n    var e_2, _a;\n}\n\nfunction diagnosticInfoFromTemplateInfo(info) {\n    return {\n        fileName: info.fileName,\n        offset: info.template.span.start,\n        query: info.template.query,\n        members: info.template.members,\n        htmlAst: info.htmlAst,\n        templateAst: info.templateAst\n    };\n}\nfunction findTemplateAstAt(ast, position, allowWidening) {\n    if (allowWidening === void 0) { allowWidening = false; }\n    var path$$1 = [];\n    var visitor = new /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.visit = function (ast, context) {\n            var span = spanOf$3(ast);\n            if (inSpan(position, span)) {\n                var len = path$$1.length;\n                if (!len || allowWidening || isNarrower(span, spanOf$3(path$$1[len - 1]))) {\n                    path$$1.push(ast);\n                }\n            }\n            else {\n                // Returning a value here will result in the children being skipped.\n                return true;\n            }\n        };\n        class_1.prototype.visitEmbeddedTemplate = function (ast, context) {\n            return this.visitChildren(context, function (visit) {\n                // Ignore reference, variable and providers\n                visit(ast.attrs);\n                visit(ast.directives);\n                visit(ast.children);\n            });\n        };\n        class_1.prototype.visitElement = function (ast, context) {\n            return this.visitChildren(context, function (visit) {\n                // Ingnore providers\n                visit(ast.attrs);\n                visit(ast.inputs);\n                visit(ast.outputs);\n                visit(ast.references);\n                visit(ast.directives);\n                visit(ast.children);\n            });\n        };\n        class_1.prototype.visitDirective = function (ast, context) {\n            // Ignore the host properties of a directive\n            var result = this.visitChildren(context, function (visit) { visit(ast.inputs); });\n            // We never care about the diretive itself, just its inputs.\n            if (path$$1[path$$1.length - 1] == ast) {\n                path$$1.pop();\n            }\n            return result;\n        };\n        return class_1;\n    }(RecursiveTemplateAstVisitor));\n    templateVisitAll(visitor, ast);\n    return new AstPath(path$$1, position);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction findAstAt(ast, position, excludeEmpty) {\n    if (excludeEmpty === void 0) { excludeEmpty = false; }\n    var path$$1 = [];\n    var visitor = new /** @class */ (function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.visit = function (ast) {\n            if ((!excludeEmpty || ast.span.start < ast.span.end) && inSpan(position, ast.span)) {\n                path$$1.push(ast);\n                visitAstChildren(ast, this);\n            }\n        };\n        return class_1;\n    }(NullAstVisitor));\n    // We never care about the ASTWithSource node and its visit() method calls its ast's visit so\n    // the visit() method above would never see it.\n    if (ast instanceof ASTWithSource) {\n        ast = ast.ast;\n    }\n    visitor.visit(ast);\n    return new AstPath(path$$1, position);\n}\nfunction getExpressionCompletions(scope, ast, position, query) {\n    var path$$1 = findAstAt(ast, position);\n    if (path$$1.empty)\n        return undefined;\n    var tail = path$$1.tail;\n    var result = scope;\n    function getType(ast) { return new AstType(scope, query, {}).getType(ast); }\n    // If the completion request is in a not in a pipe or property access then the global scope\n    // (that is the scope of the implicit receiver) is the right scope as the user is typing the\n    // beginning of an expression.\n    tail.visit({\n        visitBinary: function (ast) { },\n        visitChain: function (ast) { },\n        visitConditional: function (ast) { },\n        visitFunctionCall: function (ast) { },\n        visitImplicitReceiver: function (ast) { },\n        visitInterpolation: function (ast) { result = undefined; },\n        visitKeyedRead: function (ast) { },\n        visitKeyedWrite: function (ast) { },\n        visitLiteralArray: function (ast) { },\n        visitLiteralMap: function (ast) { },\n        visitLiteralPrimitive: function (ast) { },\n        visitMethodCall: function (ast) { },\n        visitPipe: function (ast) {\n            if (position >= ast.exp.span.end &&\n                (!ast.args || !ast.args.length || position < ast.args[0].span.start)) {\n                // We are in a position a pipe name is expected.\n                result = query.getPipes();\n            }\n        },\n        visitPrefixNot: function (ast) { },\n        visitNonNullAssert: function (ast) { },\n        visitPropertyRead: function (ast) {\n            var receiverType = getType(ast.receiver);\n            result = receiverType ? receiverType.members() : scope;\n        },\n        visitPropertyWrite: function (ast) {\n            var receiverType = getType(ast.receiver);\n            result = receiverType ? receiverType.members() : scope;\n        },\n        visitQuote: function (ast) {\n            // For a quote, return the members of any (if there are any).\n            result = query.getBuiltinType(BuiltinType$1.Any).members();\n        },\n        visitSafeMethodCall: function (ast) {\n            var receiverType = getType(ast.receiver);\n            result = receiverType ? receiverType.members() : scope;\n        },\n        visitSafePropertyRead: function (ast) {\n            var receiverType = getType(ast.receiver);\n            result = receiverType ? receiverType.members() : scope;\n        },\n    });\n    return result && result.values();\n}\nfunction getExpressionSymbol(scope, ast, position, query) {\n    var path$$1 = findAstAt(ast, position, /* excludeEmpty */ true);\n    if (path$$1.empty)\n        return undefined;\n    var tail = path$$1.tail;\n    function getType(ast) { return new AstType(scope, query, {}).getType(ast); }\n    var symbol = undefined;\n    var span = undefined;\n    // If the completion request is in a not in a pipe or property access then the global scope\n    // (that is the scope of the implicit receiver) is the right scope as the user is typing the\n    // beginning of an expression.\n    tail.visit({\n        visitBinary: function (ast) { },\n        visitChain: function (ast) { },\n        visitConditional: function (ast) { },\n        visitFunctionCall: function (ast) { },\n        visitImplicitReceiver: function (ast) { },\n        visitInterpolation: function (ast) { },\n        visitKeyedRead: function (ast) { },\n        visitKeyedWrite: function (ast) { },\n        visitLiteralArray: function (ast) { },\n        visitLiteralMap: function (ast) { },\n        visitLiteralPrimitive: function (ast) { },\n        visitMethodCall: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n        visitPipe: function (ast) {\n            if (position >= ast.exp.span.end &&\n                (!ast.args || !ast.args.length || position < ast.args[0].span.start)) {\n                // We are in a position a pipe name is expected.\n                var pipes = query.getPipes();\n                if (pipes) {\n                    symbol = pipes.get(ast.name);\n                    span = ast.span;\n                }\n            }\n        },\n        visitPrefixNot: function (ast) { },\n        visitNonNullAssert: function (ast) { },\n        visitPropertyRead: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n        visitPropertyWrite: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n        visitQuote: function (ast) { },\n        visitSafeMethodCall: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n        visitSafePropertyRead: function (ast) {\n            var receiverType = getType(ast.receiver);\n            symbol = receiverType && receiverType.members().get(ast.name);\n            span = ast.span;\n        },\n    });\n    if (symbol && span) {\n        return { symbol: symbol, span: span };\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar values = [\n    'ID',\n    'CDATA',\n    'NAME',\n    ['ltr', 'rtl'],\n    ['rect', 'circle', 'poly', 'default'],\n    'NUMBER',\n    ['nohref'],\n    ['ismap'],\n    ['declare'],\n    ['DATA', 'REF', 'OBJECT'],\n    ['GET', 'POST'],\n    'IDREF',\n    ['TEXT', 'PASSWORD', 'CHECKBOX', 'RADIO', 'SUBMIT', 'RESET', 'FILE', 'HIDDEN', 'IMAGE', 'BUTTON'],\n    ['checked'],\n    ['disabled'],\n    ['readonly'],\n    ['multiple'],\n    ['selected'],\n    ['button', 'submit', 'reset'],\n    ['void', 'above', 'below', 'hsides', 'lhs', 'rhs', 'vsides', 'box', 'border'],\n    ['none', 'groups', 'rows', 'cols', 'all'],\n    ['left', 'center', 'right', 'justify', 'char'],\n    ['top', 'middle', 'bottom', 'baseline'],\n    'IDREFS',\n    ['row', 'col', 'rowgroup', 'colgroup'],\n    ['defer']\n];\nvar groups = [\n    { id: 0 },\n    {\n        onclick: 1,\n        ondblclick: 1,\n        onmousedown: 1,\n        onmouseup: 1,\n        onmouseover: 1,\n        onmousemove: 1,\n        onmouseout: 1,\n        onkeypress: 1,\n        onkeydown: 1,\n        onkeyup: 1\n    },\n    { lang: 2, dir: 3 },\n    { onload: 1, onunload: 1 },\n    { name: 1 },\n    { href: 1 },\n    { type: 1 },\n    { alt: 1 },\n    { tabindex: 5 },\n    { media: 1 },\n    { nohref: 6 },\n    { usemap: 1 },\n    { src: 1 },\n    { onfocus: 1, onblur: 1 },\n    { charset: 1 },\n    { declare: 8, classid: 1, codebase: 1, data: 1, codetype: 1, archive: 1, standby: 1 },\n    { title: 1 },\n    { value: 1 },\n    { cite: 1 },\n    { datetime: 1 },\n    { accept: 1 },\n    { shape: 4, coords: 1 },\n    { for: 11\n    },\n    { action: 1, method: 10, enctype: 1, onsubmit: 1, onreset: 1, 'accept-charset': 1 },\n    { valuetype: 9 },\n    { longdesc: 1 },\n    { width: 1 },\n    { disabled: 14 },\n    { readonly: 15, onselect: 1 },\n    { accesskey: 1 },\n    { size: 5, multiple: 16 },\n    { onchange: 1 },\n    { label: 1 },\n    { selected: 17 },\n    { type: 12, checked: 13, size: 1, maxlength: 5 },\n    { rows: 5, cols: 5 },\n    { type: 18 },\n    { height: 1 },\n    { summary: 1, border: 1, frame: 19, rules: 20, cellspacing: 1, cellpadding: 1, datapagesize: 1 },\n    { align: 21, char: 1, charoff: 1, valign: 22 },\n    { span: 5 },\n    { abbr: 1, axis: 1, headers: 23, scope: 24, rowspan: 5, colspan: 5 },\n    { profile: 1 },\n    { 'http-equiv': 2, name: 2, content: 1, scheme: 1 },\n    { class: 1, style: 1 },\n    { hreflang: 2, rel: 1, rev: 1 },\n    { ismap: 7 },\n    { defer: 25, event: 1, for: 1 }\n];\nvar elements = {\n    TT: [0, 1, 2, 16, 44],\n    I: [0, 1, 2, 16, 44],\n    B: [0, 1, 2, 16, 44],\n    BIG: [0, 1, 2, 16, 44],\n    SMALL: [0, 1, 2, 16, 44],\n    EM: [0, 1, 2, 16, 44],\n    STRONG: [0, 1, 2, 16, 44],\n    DFN: [0, 1, 2, 16, 44],\n    CODE: [0, 1, 2, 16, 44],\n    SAMP: [0, 1, 2, 16, 44],\n    KBD: [0, 1, 2, 16, 44],\n    VAR: [0, 1, 2, 16, 44],\n    CITE: [0, 1, 2, 16, 44],\n    ABBR: [0, 1, 2, 16, 44],\n    ACRONYM: [0, 1, 2, 16, 44],\n    SUB: [0, 1, 2, 16, 44],\n    SUP: [0, 1, 2, 16, 44],\n    SPAN: [0, 1, 2, 16, 44],\n    BDO: [0, 2, 16, 44],\n    BR: [0, 16, 44],\n    BODY: [0, 1, 2, 3, 16, 44],\n    ADDRESS: [0, 1, 2, 16, 44],\n    DIV: [0, 1, 2, 16, 44],\n    A: [0, 1, 2, 4, 5, 6, 8, 13, 14, 16, 21, 29, 44, 45],\n    MAP: [0, 1, 2, 4, 16, 44],\n    AREA: [0, 1, 2, 5, 7, 8, 10, 13, 16, 21, 29, 44],\n    LINK: [0, 1, 2, 5, 6, 9, 14, 16, 44, 45],\n    IMG: [0, 1, 2, 4, 7, 11, 12, 16, 25, 26, 37, 44, 46],\n    OBJECT: [0, 1, 2, 4, 6, 8, 11, 15, 16, 26, 37, 44],\n    PARAM: [0, 4, 6, 17, 24],\n    HR: [0, 1, 2, 16, 44],\n    P: [0, 1, 2, 16, 44],\n    H1: [0, 1, 2, 16, 44],\n    H2: [0, 1, 2, 16, 44],\n    H3: [0, 1, 2, 16, 44],\n    H4: [0, 1, 2, 16, 44],\n    H5: [0, 1, 2, 16, 44],\n    H6: [0, 1, 2, 16, 44],\n    PRE: [0, 1, 2, 16, 44],\n    Q: [0, 1, 2, 16, 18, 44],\n    BLOCKQUOTE: [0, 1, 2, 16, 18, 44],\n    INS: [0, 1, 2, 16, 18, 19, 44],\n    DEL: [0, 1, 2, 16, 18, 19, 44],\n    DL: [0, 1, 2, 16, 44],\n    DT: [0, 1, 2, 16, 44],\n    DD: [0, 1, 2, 16, 44],\n    OL: [0, 1, 2, 16, 44],\n    UL: [0, 1, 2, 16, 44],\n    LI: [0, 1, 2, 16, 44],\n    FORM: [0, 1, 2, 4, 16, 20, 23, 44],\n    LABEL: [0, 1, 2, 13, 16, 22, 29, 44],\n    INPUT: [0, 1, 2, 4, 7, 8, 11, 12, 13, 16, 17, 20, 27, 28, 29, 31, 34, 44, 46],\n    SELECT: [0, 1, 2, 4, 8, 13, 16, 27, 30, 31, 44],\n    OPTGROUP: [0, 1, 2, 16, 27, 32, 44],\n    OPTION: [0, 1, 2, 16, 17, 27, 32, 33, 44],\n    TEXTAREA: [0, 1, 2, 4, 8, 13, 16, 27, 28, 29, 31, 35, 44],\n    FIELDSET: [0, 1, 2, 16, 44],\n    LEGEND: [0, 1, 2, 16, 29, 44],\n    BUTTON: [0, 1, 2, 4, 8, 13, 16, 17, 27, 29, 36, 44],\n    TABLE: [0, 1, 2, 16, 26, 38, 44],\n    CAPTION: [0, 1, 2, 16, 44],\n    COLGROUP: [0, 1, 2, 16, 26, 39, 40, 44],\n    COL: [0, 1, 2, 16, 26, 39, 40, 44],\n    THEAD: [0, 1, 2, 16, 39, 44],\n    TBODY: [0, 1, 2, 16, 39, 44],\n    TFOOT: [0, 1, 2, 16, 39, 44],\n    TR: [0, 1, 2, 16, 39, 44],\n    TH: [0, 1, 2, 16, 39, 41, 44],\n    TD: [0, 1, 2, 16, 39, 41, 44],\n    HEAD: [2, 42],\n    TITLE: [2],\n    BASE: [5],\n    META: [2, 43],\n    STYLE: [2, 6, 9, 16],\n    SCRIPT: [6, 12, 14, 47],\n    NOSCRIPT: [0, 1, 2, 16, 44],\n    HTML: [2]\n};\nvar defaultAttributes = [0, 1, 2, 4];\nfunction elementNames() {\n    return Object.keys(elements).sort().map(function (v) { return v.toLowerCase(); });\n}\nfunction compose(indexes) {\n    var result = {};\n    if (indexes) {\n        try {\n            for (var indexes_1 = __values(indexes), indexes_1_1 = indexes_1.next(); !indexes_1_1.done; indexes_1_1 = indexes_1.next()) {\n                var index = indexes_1_1.value;\n                var group = groups[index];\n                for (var name_1 in group)\n                    if (group.hasOwnProperty(name_1))\n                        result[name_1] = values[group[name_1]];\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (indexes_1_1 && !indexes_1_1.done && (_a = indexes_1.return)) _a.call(indexes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    return result;\n    var e_1, _a;\n}\nfunction attributeNames(element) {\n    return Object.keys(compose(elements[element.toUpperCase()] || defaultAttributes)).sort();\n}\n\n// This section is describes the DOM property surface of a DOM element and is derivgulp formated\n// from\n// from the SCHEMA strings from the security context information. SCHEMA is copied here because\n// it would be an unnecessary risk to allow this array to be imported from the security context\n// schema registry.\nvar SCHEMA$1 = [\n    '[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop,slot' +\n        /* added manually to avoid breaking changes */\n        ',*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored',\n    '[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',\n    'abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',\n    'media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,src,%srcObject,#volume',\n    ':svg:^[HTMLElement]|*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex',\n    ':svg:graphics^:svg:|',\n    ':svg:animation^:svg:|*begin,*end,*repeat',\n    ':svg:geometry^:svg:|',\n    ':svg:componentTransferFunction^:svg:|',\n    ':svg:gradient^:svg:|',\n    ':svg:textContent^:svg:graphics|',\n    ':svg:textPositioning^:svg:textContent|',\n    'a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username',\n    'area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,search,shape,target,username',\n    'audio^media|',\n    'br^[HTMLElement]|clear',\n    'base^[HTMLElement]|href,target',\n    'body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink',\n    'button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value',\n    'canvas^[HTMLElement]|#height,#width',\n    'content^[HTMLElement]|select',\n    'dl^[HTMLElement]|!compact',\n    'datalist^[HTMLElement]|',\n    'details^[HTMLElement]|!open',\n    'dialog^[HTMLElement]|!open,returnValue',\n    'dir^[HTMLElement]|!compact',\n    'div^[HTMLElement]|align',\n    'embed^[HTMLElement]|align,height,name,src,type,width',\n    'fieldset^[HTMLElement]|!disabled,name',\n    'font^[HTMLElement]|color,face,size',\n    'form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target',\n    'frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src',\n    'frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows',\n    'hr^[HTMLElement]|align,color,!noShade,size,width',\n    'head^[HTMLElement]|',\n    'h1,h2,h3,h4,h5,h6^[HTMLElement]|align',\n    'html^[HTMLElement]|version',\n    'iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width',\n    'img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width',\n    'input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width',\n    'li^[HTMLElement]|type,#value',\n    'label^[HTMLElement]|htmlFor',\n    'legend^[HTMLElement]|align',\n    'link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type',\n    'map^[HTMLElement]|name',\n    'marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width',\n    'menu^[HTMLElement]|!compact',\n    'meta^[HTMLElement]|content,httpEquiv,name,scheme',\n    'meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value',\n    'ins,del^[HTMLElement]|cite,dateTime',\n    'ol^[HTMLElement]|!compact,!reversed,#start,type',\n    'object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width',\n    'optgroup^[HTMLElement]|!disabled,label',\n    'option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value',\n    'output^[HTMLElement]|defaultValue,%htmlFor,name,value',\n    'p^[HTMLElement]|align',\n    'param^[HTMLElement]|name,type,value,valueType',\n    'picture^[HTMLElement]|',\n    'pre^[HTMLElement]|#width',\n    'progress^[HTMLElement]|#max,#value',\n    'q,blockquote,cite^[HTMLElement]|',\n    'script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type',\n    'select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value',\n    'shadow^[HTMLElement]|',\n    'slot^[HTMLElement]|name',\n    'source^[HTMLElement]|media,sizes,src,srcset,type',\n    'span^[HTMLElement]|',\n    'style^[HTMLElement]|!disabled,media,type',\n    'caption^[HTMLElement]|align',\n    'th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width',\n    'col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width',\n    'table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width',\n    'tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign',\n    'tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign',\n    'template^[HTMLElement]|',\n    'textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap',\n    'title^[HTMLElement]|text',\n    'track^[HTMLElement]|!default,kind,label,src,srclang',\n    'ul^[HTMLElement]|!compact,type',\n    'unknown^[HTMLElement]|',\n    'video^media|#height,poster,#width',\n    ':svg:a^:svg:graphics|',\n    ':svg:animate^:svg:animation|',\n    ':svg:animateMotion^:svg:animation|',\n    ':svg:animateTransform^:svg:animation|',\n    ':svg:circle^:svg:geometry|',\n    ':svg:clipPath^:svg:graphics|',\n    ':svg:defs^:svg:graphics|',\n    ':svg:desc^:svg:|',\n    ':svg:discard^:svg:|',\n    ':svg:ellipse^:svg:geometry|',\n    ':svg:feBlend^:svg:|',\n    ':svg:feColorMatrix^:svg:|',\n    ':svg:feComponentTransfer^:svg:|',\n    ':svg:feComposite^:svg:|',\n    ':svg:feConvolveMatrix^:svg:|',\n    ':svg:feDiffuseLighting^:svg:|',\n    ':svg:feDisplacementMap^:svg:|',\n    ':svg:feDistantLight^:svg:|',\n    ':svg:feDropShadow^:svg:|',\n    ':svg:feFlood^:svg:|',\n    ':svg:feFuncA^:svg:componentTransferFunction|',\n    ':svg:feFuncB^:svg:componentTransferFunction|',\n    ':svg:feFuncG^:svg:componentTransferFunction|',\n    ':svg:feFuncR^:svg:componentTransferFunction|',\n    ':svg:feGaussianBlur^:svg:|',\n    ':svg:feImage^:svg:|',\n    ':svg:feMerge^:svg:|',\n    ':svg:feMergeNode^:svg:|',\n    ':svg:feMorphology^:svg:|',\n    ':svg:feOffset^:svg:|',\n    ':svg:fePointLight^:svg:|',\n    ':svg:feSpecularLighting^:svg:|',\n    ':svg:feSpotLight^:svg:|',\n    ':svg:feTile^:svg:|',\n    ':svg:feTurbulence^:svg:|',\n    ':svg:filter^:svg:|',\n    ':svg:foreignObject^:svg:graphics|',\n    ':svg:g^:svg:graphics|',\n    ':svg:image^:svg:graphics|',\n    ':svg:line^:svg:geometry|',\n    ':svg:linearGradient^:svg:gradient|',\n    ':svg:mpath^:svg:|',\n    ':svg:marker^:svg:|',\n    ':svg:mask^:svg:|',\n    ':svg:metadata^:svg:|',\n    ':svg:path^:svg:geometry|',\n    ':svg:pattern^:svg:|',\n    ':svg:polygon^:svg:geometry|',\n    ':svg:polyline^:svg:geometry|',\n    ':svg:radialGradient^:svg:gradient|',\n    ':svg:rect^:svg:geometry|',\n    ':svg:svg^:svg:graphics|#currentScale,#zoomAndPan',\n    ':svg:script^:svg:|type',\n    ':svg:set^:svg:animation|',\n    ':svg:stop^:svg:|',\n    ':svg:style^:svg:|!disabled,media,title,type',\n    ':svg:switch^:svg:graphics|',\n    ':svg:symbol^:svg:|',\n    ':svg:tspan^:svg:textPositioning|',\n    ':svg:text^:svg:textPositioning|',\n    ':svg:textPath^:svg:textContent|',\n    ':svg:title^:svg:|',\n    ':svg:use^:svg:graphics|',\n    ':svg:view^:svg:|#zoomAndPan',\n    'data^[HTMLElement]|value',\n    'keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name',\n    'menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default',\n    'summary^[HTMLElement]|',\n    'time^[HTMLElement]|dateTime',\n    ':svg:cursor^:svg:|',\n];\nvar EVENT = 'event';\nvar BOOLEAN$1 = 'boolean';\nvar NUMBER$1 = 'number';\nvar STRING$1 = 'string';\nvar OBJECT$1 = 'object';\nvar SchemaInformation = /** @class */ (function () {\n    function SchemaInformation() {\n        var _this = this;\n        this.schema = {};\n        SCHEMA$1.forEach(function (encodedType) {\n            var parts = encodedType.split('|');\n            var properties = parts[1].split(',');\n            var typeParts = (parts[0] + '^').split('^');\n            var typeName = typeParts[0];\n            var type = {};\n            typeName.split(',').forEach(function (tag) { return _this.schema[tag.toLowerCase()] = type; });\n            var superName = typeParts[1];\n            var superType = superName && _this.schema[superName.toLowerCase()];\n            if (superType) {\n                for (var key in superType) {\n                    type[key] = superType[key];\n                }\n            }\n            properties.forEach(function (property) {\n                if (property == '') {\n                }\n                else if (property.startsWith('*')) {\n                    type[property.substring(1)] = EVENT;\n                }\n                else if (property.startsWith('!')) {\n                    type[property.substring(1)] = BOOLEAN$1;\n                }\n                else if (property.startsWith('#')) {\n                    type[property.substring(1)] = NUMBER$1;\n                }\n                else if (property.startsWith('%')) {\n                    type[property.substring(1)] = OBJECT$1;\n                }\n                else {\n                    type[property] = STRING$1;\n                }\n            });\n        });\n    }\n    SchemaInformation.prototype.allKnownElements = function () { return Object.keys(this.schema); };\n    SchemaInformation.prototype.eventsOf = function (elementName) {\n        var elementType = this.schema[elementName.toLowerCase()] || {};\n        return Object.keys(elementType).filter(function (property) { return elementType[property] === EVENT; });\n    };\n    SchemaInformation.prototype.propertiesOf = function (elementName) {\n        var elementType = this.schema[elementName.toLowerCase()] || {};\n        return Object.keys(elementType).filter(function (property) { return elementType[property] !== EVENT; });\n    };\n    SchemaInformation.prototype.typeOf = function (elementName, property) {\n        return (this.schema[elementName.toLowerCase()] || {})[property];\n    };\n    Object.defineProperty(SchemaInformation, \"instance\", {\n        get: function () {\n            var result = SchemaInformation._instance;\n            if (!result) {\n                result = SchemaInformation._instance = new SchemaInformation();\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SchemaInformation;\n}());\nfunction eventNames(elementName) {\n    return SchemaInformation.instance.eventsOf(elementName);\n}\nfunction propertyNames(elementName) {\n    return SchemaInformation.instance.propertiesOf(elementName);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar TEMPLATE_ATTR_PREFIX$2 = '*';\nvar hiddenHtmlElements = {\n    html: true,\n    script: true,\n    noscript: true,\n    base: true,\n    body: true,\n    title: true,\n    head: true,\n    link: true,\n};\nfunction getTemplateCompletions(templateInfo) {\n    var result = undefined;\n    var htmlAst = templateInfo.htmlAst, templateAst = templateInfo.templateAst, template = templateInfo.template;\n    // The templateNode starts at the delimiter character so we add 1 to skip it.\n    if (templateInfo.position != null) {\n        var templatePosition_1 = templateInfo.position - template.span.start;\n        var path_1 = findNode(htmlAst, templatePosition_1);\n        var mostSpecific = path_1.tail;\n        if (path_1.empty || !mostSpecific) {\n            result = elementCompletions(templateInfo, path_1);\n        }\n        else {\n            var astPosition_1 = templatePosition_1 - mostSpecific.sourceSpan.start.offset;\n            mostSpecific.visit({\n                visitElement: function (ast) {\n                    var startTagSpan = spanOf$3(ast.sourceSpan);\n                    var tagLen = ast.name.length;\n                    if (templatePosition_1 <=\n                        startTagSpan.start + tagLen + 1 /* 1 for the opening angle bracked */) {\n                        // If we are in the tag then return the element completions.\n                        result = elementCompletions(templateInfo, path_1);\n                    }\n                    else if (templatePosition_1 < startTagSpan.end) {\n                        // We are in the attribute section of the element (but not in an attribute).\n                        // Return the attribute completions.\n                        result = attributeCompletions(templateInfo, path_1);\n                    }\n                },\n                visitAttribute: function (ast) {\n                    if (!ast.valueSpan || !inSpan(templatePosition_1, spanOf$3(ast.valueSpan))) {\n                        // We are in the name of an attribute. Show attribute completions.\n                        result = attributeCompletions(templateInfo, path_1);\n                    }\n                    else if (ast.valueSpan && inSpan(templatePosition_1, spanOf$3(ast.valueSpan))) {\n                        result = attributeValueCompletions(templateInfo, templatePosition_1, ast);\n                    }\n                },\n                visitText: function (ast) {\n                    // Check if we are in a entity.\n                    result = entityCompletions(getSourceText(template, spanOf$3(ast)), astPosition_1);\n                    if (result)\n                        return result;\n                    result = interpolationCompletions(templateInfo, templatePosition_1);\n                    if (result)\n                        return result;\n                    var element = path_1.first(Element);\n                    if (element) {\n                        var definition = getHtmlTagDefinition(element.name);\n                        if (definition.contentType === TagContentType.PARSABLE_DATA) {\n                            result = voidElementAttributeCompletions(templateInfo, path_1);\n                            if (!result) {\n                                // If the element can hold content Show element completions.\n                                result = elementCompletions(templateInfo, path_1);\n                            }\n                        }\n                    }\n                    else {\n                        // If no element container, implies parsable data so show elements.\n                        result = voidElementAttributeCompletions(templateInfo, path_1);\n                        if (!result) {\n                            result = elementCompletions(templateInfo, path_1);\n                        }\n                    }\n                },\n                visitComment: function (ast) { },\n                visitExpansion: function (ast) { },\n                visitExpansionCase: function (ast) { }\n            }, null);\n        }\n    }\n    return result;\n}\nfunction attributeCompletions(info, path$$1) {\n    var item = path$$1.tail instanceof Element ? path$$1.tail : path$$1.parentOf(path$$1.tail);\n    if (item instanceof Element) {\n        return attributeCompletionsForElement(info, item.name, item);\n    }\n    return undefined;\n}\nfunction attributeCompletionsForElement(info, elementName, element) {\n    var attributes = getAttributeInfosForElement(info, elementName, element);\n    // Map all the attributes to a completion\n    return attributes.map(function (attr) { return ({\n        kind: attr.fromHtml ? 'html attribute' : 'attribute',\n        name: nameOfAttr(attr),\n        sort: attr.name\n    }); });\n}\nfunction getAttributeInfosForElement(info, elementName, element) {\n    var attributes = [];\n    // Add html attributes\n    var htmlAttributes = attributeNames(elementName) || [];\n    if (htmlAttributes) {\n        attributes.push.apply(attributes, __spread(htmlAttributes.map(function (name) { return ({ name: name, fromHtml: true }); })));\n    }\n    // Add html properties\n    var htmlProperties = propertyNames(elementName);\n    if (htmlProperties) {\n        attributes.push.apply(attributes, __spread(htmlProperties.map(function (name) { return ({ name: name, input: true }); })));\n    }\n    // Add html events\n    var htmlEvents = eventNames(elementName);\n    if (htmlEvents) {\n        attributes.push.apply(attributes, __spread(htmlEvents.map(function (name) { return ({ name: name, output: true }); })));\n    }\n    var _a = getSelectors(info), selectors = _a.selectors, selectorMap = _a.map;\n    if (selectors && selectors.length) {\n        // All the attributes that are selectable should be shown.\n        var applicableSelectors = selectors.filter(function (selector) { return !selector.element || selector.element == elementName; });\n        var selectorAndAttributeNames = applicableSelectors.map(function (selector) { return ({ selector: selector, attrs: selector.attrs.filter(function (a) { return !!a; }) }); });\n        var attrs_1 = flatten$1(selectorAndAttributeNames.map(function (selectorAndAttr) {\n            var directive = selectorMap.get(selectorAndAttr.selector);\n            var result = selectorAndAttr.attrs.map(function (name) { return ({ name: name, input: name in directive.inputs, output: name in directive.outputs }); });\n            return result;\n        }));\n        // Add template attribute if a directive contains a template reference\n        selectorAndAttributeNames.forEach(function (selectorAndAttr) {\n            var selector = selectorAndAttr.selector;\n            var directive = selectorMap.get(selector);\n            if (directive && hasTemplateReference$1(directive.type) && selector.attrs.length &&\n                selector.attrs[0]) {\n                attrs_1.push({ name: selector.attrs[0], template: true });\n            }\n        });\n        // All input and output properties of the matching directives should be added.\n        var elementSelector = element ?\n            createElementCssSelector$1(element) :\n            createElementCssSelector$1(new Element(elementName, [], [], null, null, null));\n        var matcher = new SelectorMatcher();\n        matcher.addSelectables(selectors);\n        matcher.match(elementSelector, function (selector) {\n            var directive = selectorMap.get(selector);\n            if (directive) {\n                attrs_1.push.apply(attrs_1, __spread(Object.keys(directive.inputs).map(function (name) { return ({ name: name, input: true }); })));\n                attrs_1.push.apply(attrs_1, __spread(Object.keys(directive.outputs).map(function (name) { return ({ name: name, output: true }); })));\n            }\n        });\n        // If a name shows up twice, fold it into a single value.\n        attrs_1 = foldAttrs(attrs_1);\n        // Now expand them back out to ensure that input/output shows up as well as input and\n        // output.\n        attributes.push.apply(attributes, __spread(flatten$1(attrs_1.map(expandedAttr))));\n    }\n    return attributes;\n}\nfunction attributeValueCompletions(info, position, attr) {\n    var path$$1 = findTemplateAstAt(info.templateAst, position);\n    var mostSpecific = path$$1.tail;\n    var dinfo = diagnosticInfoFromTemplateInfo(info);\n    if (mostSpecific) {\n        var visitor = new ExpressionVisitor(info, position, attr, function () { return getExpressionScope(dinfo, path$$1, false); });\n        mostSpecific.visit(visitor, null);\n        if (!visitor.result || !visitor.result.length) {\n            // Try allwoing widening the path\n            var widerPath_1 = findTemplateAstAt(info.templateAst, position, /* allowWidening */ true);\n            if (widerPath_1.tail) {\n                var widerVisitor = new ExpressionVisitor(info, position, attr, function () { return getExpressionScope(dinfo, widerPath_1, false); });\n                widerPath_1.tail.visit(widerVisitor, null);\n                return widerVisitor.result;\n            }\n        }\n        return visitor.result;\n    }\n}\nfunction elementCompletions(info, path$$1) {\n    var htmlNames = elementNames().filter(function (name) { return !(name in hiddenHtmlElements); });\n    // Collect the elements referenced by the selectors\n    var directiveElements = getSelectors(info)\n        .selectors.map(function (selector) { return selector.element; })\n        .filter(function (name) { return !!name; });\n    var components = directiveElements.map(function (name) { return ({ kind: 'component', name: name, sort: name }); });\n    var htmlElements = htmlNames.map(function (name) { return ({ kind: 'element', name: name, sort: name }); });\n    // Return components and html elements\n    return uniqueByName(htmlElements.concat(components));\n}\nfunction entityCompletions(value, position) {\n    // Look for entity completions\n    var re = /&[A-Za-z]*;?(?!\\d)/g;\n    var found;\n    var result = undefined;\n    while (found = re.exec(value)) {\n        var len = found[0].length;\n        if (position >= found.index && position < (found.index + len)) {\n            result = Object.keys(NAMED_ENTITIES)\n                .map(function (name) { return ({ kind: 'entity', name: \"&\" + name + \";\", sort: name }); });\n            break;\n        }\n    }\n    return result;\n}\nfunction interpolationCompletions(info, position) {\n    // Look for an interpolation in at the position.\n    var templatePath = findTemplateAstAt(info.templateAst, position);\n    var mostSpecific = templatePath.tail;\n    if (mostSpecific) {\n        var visitor = new ExpressionVisitor(info, position, undefined, function () { return getExpressionScope(diagnosticInfoFromTemplateInfo(info), templatePath, false); });\n        mostSpecific.visit(visitor, null);\n        return uniqueByName(visitor.result);\n    }\n}\n// There is a special case of HTML where text that contains a unclosed tag is treated as\n// text. For exaple '<h1> Some <a text </h1>' produces a text nodes inside of the H1\n// element \"Some <a text\". We, however, want to treat this as if the user was requesting\n// the attributes of an \"a\" element, not requesting completion in the a text element. This\n// code checks for this case and returns element completions if it is detected or undefined\n// if it is not.\nfunction voidElementAttributeCompletions(info, path$$1) {\n    var tail = path$$1.tail;\n    if (tail instanceof Text) {\n        var match = tail.value.match(/<(\\w(\\w|\\d|-)*:)?(\\w(\\w|\\d|-)*)\\s/);\n        // The position must be after the match, otherwise we are still in a place where elements\n        // are expected (such as `<|a` or `<a|`; we only want attributes for `<a |` or after).\n        if (match &&\n            path$$1.position >= (match.index || 0) + match[0].length + tail.sourceSpan.start.offset) {\n            return attributeCompletionsForElement(info, match[3]);\n        }\n    }\n}\nvar ExpressionVisitor = /** @class */ (function (_super) {\n    __extends(ExpressionVisitor, _super);\n    function ExpressionVisitor(info, position, attr, getExpressionScope) {\n        var _this = _super.call(this) || this;\n        _this.info = info;\n        _this.position = position;\n        _this.attr = attr;\n        _this.getExpressionScope = getExpressionScope || (function () { return info.template.members; });\n        return _this;\n    }\n    ExpressionVisitor.prototype.visitDirectiveProperty = function (ast) {\n        this.attributeValueCompletions(ast.value);\n    };\n    ExpressionVisitor.prototype.visitElementProperty = function (ast) {\n        this.attributeValueCompletions(ast.value);\n    };\n    ExpressionVisitor.prototype.visitEvent = function (ast) { this.attributeValueCompletions(ast.handler); };\n    ExpressionVisitor.prototype.visitElement = function (ast) {\n        var _this = this;\n        if (this.attr && getSelectors(this.info) && this.attr.name.startsWith(TEMPLATE_ATTR_PREFIX$2)) {\n            // The value is a template expression but the expression AST was not produced when the\n            // TemplateAst was produce so\n            // do that now.\n            var key_1 = this.attr.name.substr(TEMPLATE_ATTR_PREFIX$2.length);\n            // Find the selector\n            var selectorInfo = getSelectors(this.info);\n            var selectors = selectorInfo.selectors;\n            var selector_1 = selectors.filter(function (s) { return s.attrs.some(function (attr, i) { return i % 2 == 0 && attr == key_1; }); })[0];\n            var templateBindingResult = this.info.expressionParser.parseTemplateBindings(key_1, this.attr.value, null);\n            // find the template binding that contains the position\n            if (!this.attr.valueSpan)\n                return;\n            var valueRelativePosition_1 = this.position - this.attr.valueSpan.start.offset - 1;\n            var bindings = templateBindingResult.templateBindings;\n            var binding = bindings.find(function (binding) { return inSpan(valueRelativePosition_1, binding.span, /* exclusive */ true); }) ||\n                bindings.find(function (binding) { return inSpan(valueRelativePosition_1, binding.span); });\n            var keyCompletions = function () {\n                var keys = [];\n                if (selector_1) {\n                    var attrNames = selector_1.attrs.filter(function (_, i) { return i % 2 == 0; });\n                    keys = attrNames.filter(function (name) { return name.startsWith(key_1) && name != key_1; })\n                        .map(function (name) { return lowerName(name.substr(key_1.length)); });\n                }\n                keys.push('let');\n                _this.result = keys.map(function (key) { return ({ kind: 'key', name: key, sort: key }); });\n            };\n            if (!binding || (binding.key == key_1 && !binding.expression)) {\n                // We are in the root binding. We should return `let` and keys that are left in the\n                // selector.\n                keyCompletions();\n            }\n            else if (binding.keyIsVar) {\n                var equalLocation = this.attr.value.indexOf('=');\n                this.result = [];\n                if (equalLocation >= 0 && valueRelativePosition_1 >= equalLocation) {\n                    // We are after the '=' in a let clause. The valid values here are the members of the\n                    // template reference's type parameter.\n                    var directiveMetadata = selectorInfo.map.get(selector_1);\n                    if (directiveMetadata) {\n                        var contextTable = this.info.template.query.getTemplateContext(directiveMetadata.type.reference);\n                        if (contextTable) {\n                            this.result = this.symbolsToCompletions(contextTable.values());\n                        }\n                    }\n                }\n                else if (binding.key && valueRelativePosition_1 <= (binding.key.length - key_1.length)) {\n                    keyCompletions();\n                }\n            }\n            else {\n                // If the position is in the expression or after the key or there is no key, return the\n                // expression completions\n                if ((binding.expression && inSpan(valueRelativePosition_1, binding.expression.ast.span)) ||\n                    (binding.key &&\n                        valueRelativePosition_1 > binding.span.start + (binding.key.length - key_1.length)) ||\n                    !binding.key) {\n                    var span = new ParseSpan(0, this.attr.value.length);\n                    this.attributeValueCompletions(binding.expression ? binding.expression.ast :\n                        new PropertyRead(span, new ImplicitReceiver(span), ''), valueRelativePosition_1);\n                }\n                else {\n                    keyCompletions();\n                }\n            }\n        }\n    };\n    ExpressionVisitor.prototype.visitBoundText = function (ast) {\n        var expressionPosition = this.position - ast.sourceSpan.start.offset;\n        if (inSpan(expressionPosition, ast.value.span)) {\n            var completions = getExpressionCompletions(this.getExpressionScope(), ast.value, expressionPosition, this.info.template.query);\n            if (completions) {\n                this.result = this.symbolsToCompletions(completions);\n            }\n        }\n    };\n    ExpressionVisitor.prototype.attributeValueCompletions = function (value, position) {\n        var symbols = getExpressionCompletions(this.getExpressionScope(), value, position == null ? this.attributeValuePosition : position, this.info.template.query);\n        if (symbols) {\n            this.result = this.symbolsToCompletions(symbols);\n        }\n    };\n    ExpressionVisitor.prototype.symbolsToCompletions = function (symbols) {\n        return symbols.filter(function (s) { return !s.name.startsWith('__') && s.public; })\n            .map(function (symbol) { return ({ kind: symbol.kind, name: symbol.name, sort: symbol.name }); });\n    };\n    Object.defineProperty(ExpressionVisitor.prototype, \"attributeValuePosition\", {\n        get: function () {\n            if (this.attr && this.attr.valueSpan) {\n                return this.position - this.attr.valueSpan.start.offset - 1;\n            }\n            return 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ExpressionVisitor;\n}(NullTemplateVisitor));\nfunction getSourceText(template, span) {\n    return template.source.substring(span.start, span.end);\n}\nfunction nameOfAttr(attr) {\n    var name = attr.name;\n    if (attr.output) {\n        name = removeSuffix(name, 'Events');\n        name = removeSuffix(name, 'Changed');\n    }\n    var result = [name];\n    if (attr.input) {\n        result.unshift('[');\n        result.push(']');\n    }\n    if (attr.output) {\n        result.unshift('(');\n        result.push(')');\n    }\n    if (attr.template) {\n        result.unshift('*');\n    }\n    return result.join('');\n}\nvar templateAttr = /^(\\w+:)?(template$|^\\*)/;\nfunction createElementCssSelector$1(element) {\n    var cssSelector = new CssSelector();\n    var elNameNoNs = splitNsName(element.name)[1];\n    cssSelector.setElement(elNameNoNs);\n    try {\n        for (var _a = __values(element.attrs), _b = _a.next(); !_b.done; _b = _a.next()) {\n            var attr = _b.value;\n            if (!attr.name.match(templateAttr)) {\n                var _c = __read(splitNsName(attr.name), 2), _ = _c[0], attrNameNoNs = _c[1];\n                cssSelector.addAttribute(attrNameNoNs, attr.value);\n                if (attr.name.toLowerCase() == 'class') {\n                    var classes = attr.value.split(/s+/g);\n                    classes.forEach(function (className) { return cssSelector.addClassName(className); });\n                }\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_b && !_b.done && (_d = _a.return)) _d.call(_a);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return cssSelector;\n    var e_1, _d;\n}\nfunction foldAttrs(attrs) {\n    var inputOutput = new Map();\n    var templates = new Map();\n    var result = [];\n    attrs.forEach(function (attr) {\n        if (attr.fromHtml) {\n            return attr;\n        }\n        if (attr.template) {\n            var duplicate = templates.get(attr.name);\n            if (!duplicate) {\n                result.push({ name: attr.name, template: true });\n                templates.set(attr.name, attr);\n            }\n        }\n        if (attr.input || attr.output) {\n            var duplicate = inputOutput.get(attr.name);\n            if (duplicate) {\n                duplicate.input = duplicate.input || attr.input;\n                duplicate.output = duplicate.output || attr.output;\n            }\n            else {\n                var cloneAttr = { name: attr.name };\n                if (attr.input)\n                    cloneAttr.input = true;\n                if (attr.output)\n                    cloneAttr.output = true;\n                result.push(cloneAttr);\n                inputOutput.set(attr.name, cloneAttr);\n            }\n        }\n    });\n    return result;\n}\nfunction expandedAttr(attr) {\n    if (attr.input && attr.output) {\n        return [\n            attr, { name: attr.name, input: true, output: false },\n            { name: attr.name, input: false, output: true }\n        ];\n    }\n    return [attr];\n}\nfunction lowerName(name) {\n    return name && (name[0].toLowerCase() + name.substr(1));\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction locateSymbol(info) {\n    if (!info.position)\n        return undefined;\n    var templatePosition = info.position - info.template.span.start;\n    var path$$1 = findTemplateAstAt(info.templateAst, templatePosition);\n    if (path$$1.tail) {\n        var symbol_1 = undefined;\n        var span_1 = undefined;\n        var attributeValueSymbol_1 = function (ast, inEvent) {\n            if (inEvent === void 0) { inEvent = false; }\n            var attribute = findAttribute(info);\n            if (attribute) {\n                if (inSpan(templatePosition, spanOf$3(attribute.valueSpan))) {\n                    var dinfo = diagnosticInfoFromTemplateInfo(info);\n                    var scope = getExpressionScope(dinfo, path$$1, inEvent);\n                    if (attribute.valueSpan) {\n                        var expressionOffset = attribute.valueSpan.start.offset + 1;\n                        var result = getExpressionSymbol(scope, ast, templatePosition - expressionOffset, info.template.query);\n                        if (result) {\n                            symbol_1 = result.symbol;\n                            span_1 = offsetSpan$1(result.span, expressionOffset);\n                        }\n                    }\n                    return true;\n                }\n            }\n            return false;\n        };\n        path$$1.tail.visit({\n            visitNgContent: function (ast) { },\n            visitEmbeddedTemplate: function (ast) { },\n            visitElement: function (ast) {\n                var component = ast.directives.find(function (d) { return d.directive.isComponent; });\n                if (component) {\n                    symbol_1 = info.template.query.getTypeSymbol(component.directive.type.reference);\n                    symbol_1 = symbol_1 && new OverrideKindSymbol(symbol_1, 'component');\n                    span_1 = spanOf$3(ast);\n                }\n                else {\n                    // Find a directive that matches the element name\n                    var directive = ast.directives.find(function (d) { return d.directive.selector != null && d.directive.selector.indexOf(ast.name) >= 0; });\n                    if (directive) {\n                        symbol_1 = info.template.query.getTypeSymbol(directive.directive.type.reference);\n                        symbol_1 = symbol_1 && new OverrideKindSymbol(symbol_1, 'directive');\n                        span_1 = spanOf$3(ast);\n                    }\n                }\n            },\n            visitReference: function (ast) {\n                symbol_1 = ast.value && info.template.query.getTypeSymbol(tokenReference(ast.value));\n                span_1 = spanOf$3(ast);\n            },\n            visitVariable: function (ast) { },\n            visitEvent: function (ast) {\n                if (!attributeValueSymbol_1(ast.handler, /* inEvent */ true)) {\n                    symbol_1 = findOutputBinding(info, path$$1, ast);\n                    symbol_1 = symbol_1 && new OverrideKindSymbol(symbol_1, 'event');\n                    span_1 = spanOf$3(ast);\n                }\n            },\n            visitElementProperty: function (ast) { attributeValueSymbol_1(ast.value); },\n            visitAttr: function (ast) { },\n            visitBoundText: function (ast) {\n                var expressionPosition = templatePosition - ast.sourceSpan.start.offset;\n                if (inSpan(expressionPosition, ast.value.span)) {\n                    var dinfo = diagnosticInfoFromTemplateInfo(info);\n                    var scope = getExpressionScope(dinfo, path$$1, /* includeEvent */ false);\n                    var result = getExpressionSymbol(scope, ast.value, expressionPosition, info.template.query);\n                    if (result) {\n                        symbol_1 = result.symbol;\n                        span_1 = offsetSpan$1(result.span, ast.sourceSpan.start.offset);\n                    }\n                }\n            },\n            visitText: function (ast) { },\n            visitDirective: function (ast) {\n                symbol_1 = info.template.query.getTypeSymbol(ast.directive.type.reference);\n                span_1 = spanOf$3(ast);\n            },\n            visitDirectiveProperty: function (ast) {\n                if (!attributeValueSymbol_1(ast.value)) {\n                    symbol_1 = findInputBinding(info, path$$1, ast);\n                    span_1 = spanOf$3(ast);\n                }\n            }\n        }, null);\n        if (symbol_1 && span_1) {\n            return { symbol: symbol_1, span: offsetSpan$1(span_1, info.template.span.start) };\n        }\n    }\n}\nfunction findAttribute(info) {\n    if (info.position) {\n        var templatePosition = info.position - info.template.span.start;\n        var path$$1 = findNode(info.htmlAst, templatePosition);\n        return path$$1.first(Attribute);\n    }\n}\nfunction findInputBinding(info, path$$1, binding) {\n    var element = path$$1.first(ElementAst);\n    if (element) {\n        try {\n            for (var _a = __values(element.directives), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var directive = _b.value;\n                var invertedInput = invertMap(directive.directive.inputs);\n                var fieldName = invertedInput[binding.templateName];\n                if (fieldName) {\n                    var classSymbol = info.template.query.getTypeSymbol(directive.directive.type.reference);\n                    if (classSymbol) {\n                        return classSymbol.members().get(fieldName);\n                    }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    var e_1, _c;\n}\nfunction findOutputBinding(info, path$$1, binding) {\n    var element = path$$1.first(ElementAst);\n    if (element) {\n        try {\n            for (var _a = __values(element.directives), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var directive = _b.value;\n                var invertedOutputs = invertMap(directive.directive.outputs);\n                var fieldName = invertedOutputs[binding.name];\n                if (fieldName) {\n                    var classSymbol = info.template.query.getTypeSymbol(directive.directive.type.reference);\n                    if (classSymbol) {\n                        return classSymbol.members().get(fieldName);\n                    }\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n    var e_2, _c;\n}\nfunction invertMap(obj) {\n    var result = {};\n    try {\n        for (var _a = __values(Object.keys(obj)), _b = _a.next(); !_b.done; _b = _a.next()) {\n            var name_1 = _b.value;\n            var v = obj[name_1];\n            result[v] = name_1;\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return result;\n    var e_3, _c;\n}\n/**\n * Wrap a symbol and change its kind to component.\n */\nvar OverrideKindSymbol = /** @class */ (function () {\n    function OverrideKindSymbol(sym, kindOverride) {\n        this.sym = sym;\n        this.kind = kindOverride;\n    }\n    Object.defineProperty(OverrideKindSymbol.prototype, \"name\", {\n        get: function () { return this.sym.name; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"language\", {\n        get: function () { return this.sym.language; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"type\", {\n        get: function () { return this.sym.type; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"container\", {\n        get: function () { return this.sym.container; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"public\", {\n        get: function () { return this.sym.public; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"callable\", {\n        get: function () { return this.sym.callable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"nullable\", {\n        get: function () { return this.sym.nullable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OverrideKindSymbol.prototype, \"definition\", {\n        get: function () { return this.sym.definition; },\n        enumerable: true,\n        configurable: true\n    });\n    OverrideKindSymbol.prototype.members = function () { return this.sym.members(); };\n    OverrideKindSymbol.prototype.signatures = function () { return this.sym.signatures(); };\n    OverrideKindSymbol.prototype.selectSignature = function (types) { return this.sym.selectSignature(types); };\n    OverrideKindSymbol.prototype.indexed = function (argument) { return this.sym.indexed(argument); };\n    return OverrideKindSymbol;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getDefinition(info) {\n    var result = locateSymbol(info);\n    return result && result.symbol.definition;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getTemplateDiagnostics(fileName, astProvider, templates) {\n    var results = [];\n    var _loop_1 = function (template) {\n        var ast = astProvider.getTemplateAst(template, fileName);\n        if (ast) {\n            if (ast.parseErrors && ast.parseErrors.length) {\n                results.push.apply(results, __spread(ast.parseErrors.map(function (e) { return ({\n                    kind: DiagnosticKind$1.Error,\n                    span: offsetSpan$1(spanOf$3(e.span), template.span.start),\n                    message: e.msg\n                }); })));\n            }\n            else if (ast.templateAst && ast.htmlAst) {\n                var info = {\n                    templateAst: ast.templateAst,\n                    htmlAst: ast.htmlAst,\n                    offset: template.span.start,\n                    query: template.query,\n                    members: template.members\n                };\n                var expressionDiagnostics = getTemplateExpressionDiagnostics(info);\n                results.push.apply(results, __spread(expressionDiagnostics));\n            }\n            if (ast.errors) {\n                results.push.apply(results, __spread(ast.errors.map(function (e) { return ({ kind: e.kind, span: e.span || template.span, message: e.message }); })));\n            }\n        }\n    };\n    try {\n        for (var templates_1 = __values(templates), templates_1_1 = templates_1.next(); !templates_1_1.done; templates_1_1 = templates_1.next()) {\n            var template = templates_1_1.value;\n            _loop_1(template);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (templates_1_1 && !templates_1_1.done && (_a = templates_1.return)) _a.call(templates_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return results;\n    var e_1, _a;\n}\nfunction getDeclarationDiagnostics(declarations, modules) {\n    var results = [];\n    var directives = undefined;\n    var _loop_2 = function (declaration) {\n        var report = function (message, span) {\n            results.push({\n                kind: DiagnosticKind$1.Error,\n                span: span || declaration.declarationSpan, message: message\n            });\n        };\n        try {\n            for (var _a = __values(declaration.errors), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var error = _b.value;\n                report(error.message, error.span);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        if (declaration.metadata) {\n            if (declaration.metadata.isComponent) {\n                if (!modules.ngModuleByPipeOrDirective.has(declaration.type)) {\n                    report(\"Component '\" + declaration.type.name + \"' is not included in a module and will not be available inside a template. Consider adding it to a NgModule declaration\");\n                }\n                var _d = declaration.metadata.template, template = _d.template, templateUrl = _d.templateUrl;\n                if (template === null && !templateUrl) {\n                    report(\"Component '\" + declaration.type.name + \"' must have a template or templateUrl\");\n                }\n                else if (template && templateUrl) {\n                    report(\"Component '\" + declaration.type.name + \"' must not have both template and templateUrl\");\n                }\n            }\n            else {\n                if (!directives) {\n                    directives = new Set();\n                    modules.ngModules.forEach(function (module) {\n                        module.declaredDirectives.forEach(function (directive) { directives.add(directive.reference); });\n                    });\n                }\n                if (!directives.has(declaration.type)) {\n                    report(\"Directive '\" + declaration.type.name + \"' is not included in a module and will not be available inside a template. Consider adding it to a NgModule declaration\");\n                }\n            }\n        }\n        var e_2, _c;\n    };\n    try {\n        for (var declarations_1 = __values(declarations), declarations_1_1 = declarations_1.next(); !declarations_1_1.done; declarations_1_1 = declarations_1.next()) {\n            var declaration = declarations_1_1.value;\n            _loop_2(declaration);\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (declarations_1_1 && !declarations_1_1.done && (_a = declarations_1.return)) _a.call(declarations_1);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return results;\n    var e_3, _a;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getHover(info) {\n    var result = locateSymbol(info);\n    if (result) {\n        return { text: hoverTextOf(result.symbol), span: result.span };\n    }\n}\nfunction hoverTextOf(symbol) {\n    var result = [{ text: symbol.kind }, { text: ' ' }, { text: symbol.name, language: symbol.language }];\n    var container = symbol.container;\n    if (container) {\n        result.push({ text: ' of ' }, { text: container.name, language: container.language });\n    }\n    return result;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create an instance of an Angular `LanguageService`.\n *\n * @experimental\n */\nfunction createLanguageService(host) {\n    return new LanguageServiceImpl(host);\n}\nvar LanguageServiceImpl = /** @class */ (function () {\n    function LanguageServiceImpl(host) {\n        this.host = host;\n    }\n    Object.defineProperty(LanguageServiceImpl.prototype, \"metadataResolver\", {\n        get: function () { return this.host.resolver; },\n        enumerable: true,\n        configurable: true\n    });\n    LanguageServiceImpl.prototype.getTemplateReferences = function () { return this.host.getTemplateReferences(); };\n    LanguageServiceImpl.prototype.getDiagnostics = function (fileName) {\n        var results = [];\n        var templates = this.host.getTemplates(fileName);\n        if (templates && templates.length) {\n            results.push.apply(results, __spread(getTemplateDiagnostics(fileName, this, templates)));\n        }\n        var declarations = this.host.getDeclarations(fileName);\n        if (declarations && declarations.length) {\n            var summary = this.host.getAnalyzedModules();\n            results.push.apply(results, __spread(getDeclarationDiagnostics(declarations, summary)));\n        }\n        return uniqueBySpan(results);\n    };\n    LanguageServiceImpl.prototype.getPipesAt = function (fileName, position) {\n        var templateInfo = this.getTemplateAstAtPosition(fileName, position);\n        if (templateInfo) {\n            return templateInfo.pipes;\n        }\n        return [];\n    };\n    LanguageServiceImpl.prototype.getCompletionsAt = function (fileName, position) {\n        var templateInfo = this.getTemplateAstAtPosition(fileName, position);\n        if (templateInfo) {\n            return getTemplateCompletions(templateInfo);\n        }\n    };\n    LanguageServiceImpl.prototype.getDefinitionAt = function (fileName, position) {\n        var templateInfo = this.getTemplateAstAtPosition(fileName, position);\n        if (templateInfo) {\n            return getDefinition(templateInfo);\n        }\n    };\n    LanguageServiceImpl.prototype.getHoverAt = function (fileName, position) {\n        var templateInfo = this.getTemplateAstAtPosition(fileName, position);\n        if (templateInfo) {\n            return getHover(templateInfo);\n        }\n    };\n    LanguageServiceImpl.prototype.getTemplateAstAtPosition = function (fileName, position) {\n        var template = this.host.getTemplateAt(fileName, position);\n        if (template) {\n            var astResult = this.getTemplateAst(template, fileName);\n            if (astResult && astResult.htmlAst && astResult.templateAst && astResult.directive &&\n                astResult.directives && astResult.pipes && astResult.expressionParser)\n                return {\n                    position: position,\n                    fileName: fileName,\n                    template: template,\n                    htmlAst: astResult.htmlAst,\n                    directive: astResult.directive,\n                    directives: astResult.directives,\n                    pipes: astResult.pipes,\n                    templateAst: astResult.templateAst,\n                    expressionParser: astResult.expressionParser\n                };\n        }\n        return undefined;\n    };\n    LanguageServiceImpl.prototype.getTemplateAst = function (template, contextFile) {\n        var _this = this;\n        var result = undefined;\n        try {\n            var resolvedMetadata = this.metadataResolver.getNonNormalizedDirectiveMetadata(template.type);\n            var metadata = resolvedMetadata && resolvedMetadata.metadata;\n            if (metadata) {\n                var rawHtmlParser = new HtmlParser();\n                var htmlParser = new I18NHtmlParser(rawHtmlParser);\n                var expressionParser = new Parser(new Lexer());\n                var config = new CompilerConfig();\n                var parser = new TemplateParser(config, this.host.resolver.getReflector(), expressionParser, new DomElementSchemaRegistry(), htmlParser, null, []);\n                var htmlResult = htmlParser.parse(template.source, '', true);\n                var analyzedModules = this.host.getAnalyzedModules();\n                var errors = undefined;\n                var ngModule = analyzedModules.ngModuleByPipeOrDirective.get(template.type);\n                if (!ngModule) {\n                    // Reported by the the declaration diagnostics.\n                    ngModule = findSuitableDefaultModule(analyzedModules);\n                }\n                if (ngModule) {\n                    var resolvedDirectives = ngModule.transitiveModule.directives.map(function (d) { return _this.host.resolver.getNonNormalizedDirectiveMetadata(d.reference); });\n                    var directives = removeMissing(resolvedDirectives).map(function (d) { return d.metadata.toSummary(); });\n                    var pipes = ngModule.transitiveModule.pipes.map(function (p) { return _this.host.resolver.getOrLoadPipeMetadata(p.reference).toSummary(); });\n                    var schemas = ngModule.schemas;\n                    var parseResult = parser.tryParseHtml(htmlResult, metadata, directives, pipes, schemas);\n                    result = {\n                        htmlAst: htmlResult.rootNodes,\n                        templateAst: parseResult.templateAst,\n                        directive: metadata, directives: directives, pipes: pipes,\n                        parseErrors: parseResult.errors, expressionParser: expressionParser, errors: errors\n                    };\n                }\n            }\n        }\n        catch (e) {\n            var span = template.span;\n            if (e.fileName == contextFile) {\n                span = template.query.getSpanAt(e.line, e.column) || span;\n            }\n            result = { errors: [{ kind: DiagnosticKind$1.Error, message: e.message, span: span }] };\n        }\n        return result || {};\n    };\n    return LanguageServiceImpl;\n}());\nfunction removeMissing(values) {\n    return values.filter(function (e) { return !!e; });\n}\nfunction uniqueBySpan(elements) {\n    if (elements) {\n        var result = [];\n        var map = new Map();\n        try {\n            for (var elements_1 = __values(elements), elements_1_1 = elements_1.next(); !elements_1_1.done; elements_1_1 = elements_1.next()) {\n                var element = elements_1_1.value;\n                var span = element.span;\n                var set = map.get(span.start);\n                if (!set) {\n                    set = new Set();\n                    map.set(span.start, set);\n                }\n                if (!set.has(span.end)) {\n                    set.add(span.end);\n                    result.push(element);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (elements_1_1 && !elements_1_1.done && (_a = elements_1.return)) _a.call(elements_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return result;\n    }\n    var e_1, _a;\n}\nfunction findSuitableDefaultModule(modules) {\n    var result = undefined;\n    var resultSize = 0;\n    try {\n        for (var _a = __values(modules.ngModules), _b = _a.next(); !_b.done; _b = _a.next()) {\n            var module_1 = _b.value;\n            var moduleSize = module_1.transitiveModule.directives.length;\n            if (moduleSize > resultSize) {\n                result = module_1;\n                resultSize = moduleSize;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return result;\n    var e_2, _c;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Construct an `InjectableDef` which defines how a token will be constructed by the DI system, and\n * in which injectors (if any) it will be available.\n *\n * This should be assigned to a static `ngInjectableDef` field on a type, which will then be an\n * `InjectableType`.\n *\n * Options:\n * * `providedIn` determines which injectors will include the injectable, by either associating it\n *   with an `@NgModule` or other `InjectorType`, or by specifying that this injectable should be\n *   provided in the `'root'` injector, which will be the application-level injector in most apps.\n * * `factory` gives the zero argument function which will create an instance of the injectable.\n *   The factory can call `inject` to access the `Injector` and request injection of dependencies.\n *\n * @experimental\n */\nfunction defineInjectable(opts) {\n    return {\n        providedIn: opts.providedIn || null, factory: opts.factory, value: undefined,\n    };\n}\n/**\n * Construct an `InjectorDef` which configures an injector.\n *\n * This should be assigned to a static `ngInjectorDef` field on a type, which will then be an\n * `InjectorType`.\n *\n * Options:\n *\n * * `factory`: an `InjectorType` is an instantiable type, so a zero argument `factory` function to\n *   create the type must be provided. If that factory function needs to inject arguments, it can\n *   use the `inject` function.\n * * `providers`: an optional array of providers to add to the injector. Each provider must\n *   either have a factory or point to a type which has an `ngInjectableDef` static property (the\n *   type must be an `InjectableType`).\n * * `imports`: an optional array of imports of other `InjectorType`s or `InjectorTypeWithModule`s\n *   whose providers will also be added to the injector. Locally provided types will override\n *   providers from imports.\n *\n * @experimental\n */\nfunction defineInjector(options) {\n    return {\n        factory: options.factory, providers: options.providers || [], imports: options.imports || [],\n    };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Creates a token that can be used in a DI Provider.\n *\n * Use an `InjectionToken` whenever the type you are injecting is not reified (does not have a\n * runtime representation) such as when injecting an interface, callable type, array or\n * parametrized type.\n *\n * `InjectionToken` is parameterized on `T` which is the type of object which will be returned by\n * the `Injector`. This provides additional level of type safety.\n *\n * ```\n * interface MyInterface {...}\n * var myInterface = injector.get(new InjectionToken<MyInterface>('SomeToken'));\n * // myInterface is inferred to be MyInterface.\n * ```\n *\n * When creating an `InjectionToken`, you can optionally specify a factory function which returns\n * (possibly by creating) a default value of the parameterized type `T`. This sets up the\n * `InjectionToken` using this factory as a provider as if it was defined explicitly in the\n * application's root injector. If the factory function, which takes zero arguments, needs to inject\n * dependencies, it can do so using the `inject` function. See below for an example.\n *\n * Additionally, if a `factory` is specified you can also specify the `providedIn` option, which\n * overrides the above behavior and marks the token as belonging to a particular `@NgModule`. As\n * mentioned above, `'root'` is the default value for `providedIn`.\n *\n * ### Example\n *\n * #### Tree-shakeable InjectionToken\n *\n * {@example core/di/ts/injector_spec.ts region='ShakeableInjectionToken'}\n *\n * #### Plain InjectionToken\n *\n * {@example core/di/ts/injector_spec.ts region='InjectionToken'}\n *\n *\n */\nvar InjectionToken = /** @class */ (function () {\n    function InjectionToken(_desc, options) {\n        this._desc = _desc;\n        /** @internal */\n        this.ngMetadataName = 'InjectionToken';\n        if (options !== undefined) {\n            this.ngInjectableDef = defineInjectable({\n                providedIn: options.providedIn || 'root',\n                factory: options.factory,\n            });\n        }\n        else {\n            this.ngInjectableDef = undefined;\n        }\n    }\n    InjectionToken.prototype.toString = function () { return \"InjectionToken \" + this._desc; };\n    return InjectionToken;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ANNOTATIONS = '__annotations__';\nvar PARAMETERS = '__parameters__';\nvar PROP_METADATA = '__prop__metadata__';\n/**\n * @suppress {globalThis}\n */\nfunction makeDecorator(name, props, parentClass, chainFn, typeFn) {\n    var metaCtor = makeMetadataCtor(props);\n    function DecoratorFactory() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this instanceof DecoratorFactory) {\n            metaCtor.call.apply(metaCtor, __spread([this], args));\n            return this;\n        }\n        var annotationInstance = new ((_a = DecoratorFactory).bind.apply(_a, __spread([void 0], args)))();\n        var TypeDecorator = function TypeDecorator(cls) {\n            typeFn && typeFn.apply(void 0, __spread([cls], args));\n            // Use of Object.defineProperty is important since it creates non-enumerable property which\n            // prevents the property is copied during subclassing.\n            var annotations = cls.hasOwnProperty(ANNOTATIONS) ?\n                cls[ANNOTATIONS] :\n                Object.defineProperty(cls, ANNOTATIONS, { value: [] })[ANNOTATIONS];\n            annotations.push(annotationInstance);\n            return cls;\n        };\n        if (chainFn)\n            chainFn(TypeDecorator);\n        return TypeDecorator;\n        var _a;\n    }\n    if (parentClass) {\n        DecoratorFactory.prototype = Object.create(parentClass.prototype);\n    }\n    DecoratorFactory.prototype.ngMetadataName = name;\n    DecoratorFactory.annotationCls = DecoratorFactory;\n    return DecoratorFactory;\n}\nfunction makeMetadataCtor(props) {\n    return function ctor() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (props) {\n            var values = props.apply(void 0, __spread(args));\n            for (var propName in values) {\n                this[propName] = values[propName];\n            }\n        }\n    };\n}\nfunction makeParamDecorator(name, props, parentClass) {\n    var metaCtor = makeMetadataCtor(props);\n    function ParamDecoratorFactory() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this instanceof ParamDecoratorFactory) {\n            metaCtor.apply(this, args);\n            return this;\n        }\n        var annotationInstance = new ((_a = ParamDecoratorFactory).bind.apply(_a, __spread([void 0], args)))();\n        ParamDecorator.annotation = annotationInstance;\n        return ParamDecorator;\n        function ParamDecorator(cls, unusedKey, index) {\n            // Use of Object.defineProperty is important since it creates non-enumerable property which\n            // prevents the property is copied during subclassing.\n            var parameters = cls.hasOwnProperty(PARAMETERS) ?\n                cls[PARAMETERS] :\n                Object.defineProperty(cls, PARAMETERS, { value: [] })[PARAMETERS];\n            // there might be gaps if some in between parameters do not have annotations.\n            // we pad with nulls.\n            while (parameters.length <= index) {\n                parameters.push(null);\n            }\n            (parameters[index] = parameters[index] || []).push(annotationInstance);\n            return cls;\n        }\n        var _a;\n    }\n    if (parentClass) {\n        ParamDecoratorFactory.prototype = Object.create(parentClass.prototype);\n    }\n    ParamDecoratorFactory.prototype.ngMetadataName = name;\n    ParamDecoratorFactory.annotationCls = ParamDecoratorFactory;\n    return ParamDecoratorFactory;\n}\nfunction makePropDecorator(name, props, parentClass) {\n    var metaCtor = makeMetadataCtor(props);\n    function PropDecoratorFactory() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this instanceof PropDecoratorFactory) {\n            metaCtor.apply(this, args);\n            return this;\n        }\n        var decoratorInstance = new ((_a = PropDecoratorFactory).bind.apply(_a, __spread([void 0], args)))();\n        return function PropDecorator(target, name) {\n            var constructor = target.constructor;\n            // Use of Object.defineProperty is important since it creates non-enumerable property which\n            // prevents the property is copied during subclassing.\n            var meta = constructor.hasOwnProperty(PROP_METADATA) ?\n                constructor[PROP_METADATA] :\n                Object.defineProperty(constructor, PROP_METADATA, { value: {} })[PROP_METADATA];\n            meta[name] = meta.hasOwnProperty(name) && meta[name] || [];\n            meta[name].unshift(decoratorInstance);\n        };\n        var _a;\n    }\n    if (parentClass) {\n        PropDecoratorFactory.prototype = Object.create(parentClass.prototype);\n    }\n    PropDecoratorFactory.prototype.ngMetadataName = name;\n    PropDecoratorFactory.annotationCls = PropDecoratorFactory;\n    return PropDecoratorFactory;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * This token can be used to create a virtual provider that will populate the\n * `entryComponents` fields of components and ng modules based on its `useValue`.\n * All components that are referenced in the `useValue` value (either directly\n * or in a nested array or map) will be added to the `entryComponents` property.\n *\n * ### Example\n * The following example shows how the router can populate the `entryComponents`\n * field of an NgModule based on the router configuration which refers\n * to components.\n *\n * ```typescript\n * // helper function inside the router\n * function provideRoutes(routes) {\n *   return [\n *     {provide: ROUTES, useValue: routes},\n *     {provide: ANALYZE_FOR_ENTRY_COMPONENTS, useValue: routes, multi: true}\n *   ];\n * }\n *\n * // user code\n * let routes = [\n *   {path: '/root', component: RootComp},\n *   {path: '/teams', component: TeamsComp}\n * ];\n *\n * @NgModule({\n *   providers: [provideRoutes(routes)]\n * })\n * class ModuleWithRoutes {}\n * ```\n *\n * @experimental\n */\nvar ANALYZE_FOR_ENTRY_COMPONENTS = new InjectionToken('AnalyzeForEntryComponents');\n/**\n * Attribute decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Attribute$1 = makeParamDecorator('Attribute', function (attributeName) { return ({ attributeName: attributeName }); });\n/**\n * Base class for query metadata.\n *\n * See {@link ContentChildren}, {@link ContentChild}, {@link ViewChildren}, {@link ViewChild} for\n * more information.\n *\n *\n */\nvar Query = /** @class */ (function () {\n    function Query() {\n    }\n    return Query;\n}());\n/**\n * ContentChildren decorator and metadata.\n *\n *\n *  @Annotation\n */\nvar ContentChildren = makePropDecorator('ContentChildren', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: false, isViewQuery: false, descendants: false }, data));\n}, Query);\n/**\n * ContentChild decorator and metadata.\n *\n *\n * @Annotation\n */\nvar ContentChild = makePropDecorator('ContentChild', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: true, isViewQuery: false, descendants: true }, data));\n}, Query);\n/**\n * ViewChildren decorator and metadata.\n *\n *\n * @Annotation\n */\nvar ViewChildren = makePropDecorator('ViewChildren', function (selector, data) {\n    if (data === void 0) { data = {}; }\n    return (__assign({ selector: selector, first: false, isViewQuery: true, descendants: true }, data));\n}, Query);\n/**\n * ViewChild decorator and metadata.\n *\n *\n * @Annotation\n */\nvar ViewChild = makePropDecorator('ViewChild', function (selector, data) {\n    return (__assign({ selector: selector, first: true, isViewQuery: true, descendants: true }, data));\n}, Query);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Describes within the change detector which strategy will be used the next time change\n * detection is triggered.\n *\n */\n/**\n * Describes within the change detector which strategy will be used the next time change\n * detection is triggered.\n *\n */\nvar ChangeDetectionStrategy$1;\n/**\n * Describes within the change detector which strategy will be used the next time change\n * detection is triggered.\n *\n */\n(function (ChangeDetectionStrategy) {\n    /**\n     * `OnPush` means that the change detector's mode will be initially set to `CheckOnce`.\n     */\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"OnPush\"] = 0] = \"OnPush\";\n    /**\n     * `Default` means that the change detector's mode will be initially set to `CheckAlways`.\n     */\n    ChangeDetectionStrategy[ChangeDetectionStrategy[\"Default\"] = 1] = \"Default\";\n})(ChangeDetectionStrategy$1 || (ChangeDetectionStrategy$1 = {}));\n/**\n * Describes the status of the detector.\n */\n/**\n * Describes the status of the detector.\n */\nvar ChangeDetectorStatus;\n/**\n * Describes the status of the detector.\n */\n(function (ChangeDetectorStatus) {\n    /**\n     * `CheckOnce` means that after calling detectChanges the mode of the change detector\n     * will become `Checked`.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"CheckOnce\"] = 0] = \"CheckOnce\";\n    /**\n     * `Checked` means that the change detector should be skipped until its mode changes to\n     * `CheckOnce`.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"Checked\"] = 1] = \"Checked\";\n    /**\n     * `CheckAlways` means that after calling detectChanges the mode of the change detector\n     * will remain `CheckAlways`.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"CheckAlways\"] = 2] = \"CheckAlways\";\n    /**\n     * `Detached` means that the change detector sub tree is not a part of the main tree and\n     * should be skipped.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"Detached\"] = 3] = \"Detached\";\n    /**\n     * `Errored` means that the change detector encountered an error checking a binding\n     * or calling a directive lifecycle method and is now in an inconsistent state. Change\n     * detectors in this state will no longer detect changes.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"Errored\"] = 4] = \"Errored\";\n    /**\n     * `Destroyed` means that the change detector is destroyed.\n     */\n    ChangeDetectorStatus[ChangeDetectorStatus[\"Destroyed\"] = 5] = \"Destroyed\";\n})(ChangeDetectorStatus || (ChangeDetectorStatus = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar R3_COMPILE_COMPONENT = null;\nvar R3_COMPILE_INJECTABLE = null;\nvar R3_COMPILE_NGMODULE = null;\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Directive decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Directive = makeDecorator('Directive', function (dir) {\n    if (dir === void 0) { dir = {}; }\n    return dir;\n});\n/**\n * Component decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Component = makeDecorator('Component', function (c) {\n    if (c === void 0) { c = {}; }\n    return (__assign({ changeDetection: ChangeDetectionStrategy$1.Default }, c));\n}, Directive, undefined, function (type, meta) { return (R3_COMPILE_COMPONENT || (function () { }))(type, meta); });\n/**\n * Pipe decorator and metadata.\n *\n * Use the `@Pipe` annotation to declare that a given class is a pipe. A pipe\n * class must also implement {@link PipeTransform} interface.\n *\n * To use the pipe include a reference to the pipe class in\n * {@link NgModule#declarations}.\n *\n *\n * @Annotation\n */\nvar Pipe = makeDecorator('Pipe', function (p) { return (__assign({ pure: true }, p)); });\n/**\n * Input decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Input = makePropDecorator('Input', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });\n/**\n * Output decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Output = makePropDecorator('Output', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });\n/**\n * HostBinding decorator and metadata.\n *\n *\n * @Annotation\n */\nvar HostBinding = makePropDecorator('HostBinding', function (hostPropertyName) { return ({ hostPropertyName: hostPropertyName }); });\n/**\n * HostListener decorator and metadata.\n *\n *\n * @Annotation\n */\nvar HostListener = makePropDecorator('HostListener', function (eventName, args) { return ({ eventName: eventName, args: args }); });\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Represents a type that a Component or other object is instances of.\n *\n * An example of a `Type` is `MyCustomComponent` class, which in JavaScript is be represented by\n * the `MyCustomComponent` constructor function.\n *\n *\n */\nvar Type$2 = Function;\nfunction isType(v) {\n    return typeof v === 'function';\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar __window = typeof window !== 'undefined' && window;\nvar __self = typeof self !== 'undefined' && typeof WorkerGlobalScope !== 'undefined' &&\n    self instanceof WorkerGlobalScope && self;\nvar __global = typeof global !== 'undefined' && global;\nvar _global = __window || __global || __self;\nvar promise = Promise.resolve(0);\nvar _symbolIterator = null;\nfunction getSymbolIterator() {\n    if (!_symbolIterator) {\n        var Symbol_1 = _global['Symbol'];\n        if (Symbol_1 && Symbol_1.iterator) {\n            _symbolIterator = Symbol_1.iterator;\n        }\n        else {\n            // es6-shim specific logic\n            var keys = Object.getOwnPropertyNames(Map.prototype);\n            for (var i = 0; i < keys.length; ++i) {\n                var key = keys[i];\n                if (key !== 'entries' && key !== 'size' &&\n                    Map.prototype[key] === Map.prototype['entries']) {\n                    _symbolIterator = key;\n                }\n            }\n        }\n    }\n    return _symbolIterator;\n}\nfunction scheduleMicroTask(fn) {\n    if (typeof Zone === 'undefined') {\n        // use promise to schedule microTask instead of use Zone\n        promise.then(function () { fn && fn.apply(null, null); });\n    }\n    else {\n        Zone.current.scheduleMicroTask('scheduleMicrotask', fn);\n    }\n}\n// JS has NaN !== NaN\nfunction looseIdentical(a, b) {\n    return a === b || typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b);\n}\nfunction stringify$1(token) {\n    if (typeof token === 'string') {\n        return token;\n    }\n    if (token instanceof Array) {\n        return '[' + token.map(stringify$1).join(', ') + ']';\n    }\n    if (token == null) {\n        return '' + token;\n    }\n    if (token.overriddenName) {\n        return \"\" + token.overriddenName;\n    }\n    if (token.name) {\n        return \"\" + token.name;\n    }\n    var res = token.toString();\n    if (res == null) {\n        return '' + res;\n    }\n    var newLineIndex = res.indexOf('\\n');\n    return newLineIndex === -1 ? res : res.substring(0, newLineIndex);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Attention: These regex has to hold even if the code is minified!\n */\nvar DELEGATE_CTOR = /^function\\s+\\S+\\(\\)\\s*{[\\s\\S]+\\.apply\\(this,\\s*arguments\\)/;\nvar INHERITED_CLASS = /^class\\s+[A-Za-z\\d$_]*\\s*extends\\s+[A-Za-z\\d$_]+\\s*{/;\nvar INHERITED_CLASS_WITH_CTOR = /^class\\s+[A-Za-z\\d$_]*\\s*extends\\s+[A-Za-z\\d$_]+\\s*{[\\s\\S]*constructor\\s*\\(/;\nvar ReflectionCapabilities = /** @class */ (function () {\n    function ReflectionCapabilities(reflect) {\n        this._reflect = reflect || _global['Reflect'];\n    }\n    ReflectionCapabilities.prototype.isReflectionEnabled = function () { return true; };\n    ReflectionCapabilities.prototype.factory = function (t) { return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return new (t.bind.apply(t, __spread([void 0], args)))();\n    }; };\n    /** @internal */\n    /** @internal */\n    ReflectionCapabilities.prototype._zipTypesAndAnnotations = /** @internal */\n    function (paramTypes, paramAnnotations) {\n        var result;\n        if (typeof paramTypes === 'undefined') {\n            result = new Array(paramAnnotations.length);\n        }\n        else {\n            result = new Array(paramTypes.length);\n        }\n        for (var i = 0; i < result.length; i++) {\n            // TS outputs Object for parameters without types, while Traceur omits\n            // the annotations. For now we preserve the Traceur behavior to aid\n            // migration, but this can be revisited.\n            if (typeof paramTypes === 'undefined') {\n                result[i] = [];\n            }\n            else if (paramTypes[i] != Object) {\n                result[i] = [paramTypes[i]];\n            }\n            else {\n                result[i] = [];\n            }\n            if (paramAnnotations && paramAnnotations[i] != null) {\n                result[i] = result[i].concat(paramAnnotations[i]);\n            }\n        }\n        return result;\n    };\n    ReflectionCapabilities.prototype._ownParameters = function (type, parentCtor) {\n        var typeStr = type.toString();\n        // If we have no decorators, we only have function.length as metadata.\n        // In that case, to detect whether a child class declared an own constructor or not,\n        // we need to look inside of that constructor to check whether it is\n        // just calling the parent.\n        // This also helps to work around for https://github.com/Microsoft/TypeScript/issues/12439\n        // that sets 'design:paramtypes' to []\n        // if a class inherits from another class but has no ctor declared itself.\n        if (DELEGATE_CTOR.exec(typeStr) ||\n            (INHERITED_CLASS.exec(typeStr) && !INHERITED_CLASS_WITH_CTOR.exec(typeStr))) {\n            return null;\n        }\n        // Prefer the direct API.\n        if (type.parameters && type.parameters !== parentCtor.parameters) {\n            return type.parameters;\n        }\n        // API of tsickle for lowering decorators to properties on the class.\n        var tsickleCtorParams = type.ctorParameters;\n        if (tsickleCtorParams && tsickleCtorParams !== parentCtor.ctorParameters) {\n            // Newer tsickle uses a function closure\n            // Retain the non-function case for compatibility with older tsickle\n            var ctorParameters = typeof tsickleCtorParams === 'function' ? tsickleCtorParams() : tsickleCtorParams;\n            var paramTypes_1 = ctorParameters.map(function (ctorParam) { return ctorParam && ctorParam.type; });\n            var paramAnnotations_1 = ctorParameters.map(function (ctorParam) {\n                return ctorParam && convertTsickleDecoratorIntoMetadata(ctorParam.decorators);\n            });\n            return this._zipTypesAndAnnotations(paramTypes_1, paramAnnotations_1);\n        }\n        // API for metadata created by invoking the decorators.\n        var paramAnnotations = type.hasOwnProperty(PARAMETERS) && type[PARAMETERS];\n        var paramTypes = this._reflect && this._reflect.getOwnMetadata &&\n            this._reflect.getOwnMetadata('design:paramtypes', type);\n        if (paramTypes || paramAnnotations) {\n            return this._zipTypesAndAnnotations(paramTypes, paramAnnotations);\n        }\n        // If a class has no decorators, at least create metadata\n        // based on function.length.\n        // Note: We know that this is a real constructor as we checked\n        // the content of the constructor above.\n        return new Array(type.length).fill(undefined);\n    };\n    ReflectionCapabilities.prototype.parameters = function (type) {\n        // Note: only report metadata if we have at least one class decorator\n        // to stay in sync with the static reflector.\n        if (!isType(type)) {\n            return [];\n        }\n        var parentCtor = getParentCtor(type);\n        var parameters = this._ownParameters(type, parentCtor);\n        if (!parameters && parentCtor !== Object) {\n            parameters = this.parameters(parentCtor);\n        }\n        return parameters || [];\n    };\n    ReflectionCapabilities.prototype._ownAnnotations = function (typeOrFunc, parentCtor) {\n        // Prefer the direct API.\n        if (typeOrFunc.annotations && typeOrFunc.annotations !== parentCtor.annotations) {\n            var annotations = typeOrFunc.annotations;\n            if (typeof annotations === 'function' && annotations.annotations) {\n                annotations = annotations.annotations;\n            }\n            return annotations;\n        }\n        // API of tsickle for lowering decorators to properties on the class.\n        if (typeOrFunc.decorators && typeOrFunc.decorators !== parentCtor.decorators) {\n            return convertTsickleDecoratorIntoMetadata(typeOrFunc.decorators);\n        }\n        // API for metadata created by invoking the decorators.\n        if (typeOrFunc.hasOwnProperty(ANNOTATIONS)) {\n            return typeOrFunc[ANNOTATIONS];\n        }\n        return null;\n    };\n    ReflectionCapabilities.prototype.annotations = function (typeOrFunc) {\n        if (!isType(typeOrFunc)) {\n            return [];\n        }\n        var parentCtor = getParentCtor(typeOrFunc);\n        var ownAnnotations = this._ownAnnotations(typeOrFunc, parentCtor) || [];\n        var parentAnnotations = parentCtor !== Object ? this.annotations(parentCtor) : [];\n        return parentAnnotations.concat(ownAnnotations);\n    };\n    ReflectionCapabilities.prototype._ownPropMetadata = function (typeOrFunc, parentCtor) {\n        // Prefer the direct API.\n        if (typeOrFunc.propMetadata &&\n            typeOrFunc.propMetadata !== parentCtor.propMetadata) {\n            var propMetadata = typeOrFunc.propMetadata;\n            if (typeof propMetadata === 'function' && propMetadata.propMetadata) {\n                propMetadata = propMetadata.propMetadata;\n            }\n            return propMetadata;\n        }\n        // API of tsickle for lowering decorators to properties on the class.\n        if (typeOrFunc.propDecorators &&\n            typeOrFunc.propDecorators !== parentCtor.propDecorators) {\n            var propDecorators_1 = typeOrFunc.propDecorators;\n            var propMetadata_1 = {};\n            Object.keys(propDecorators_1).forEach(function (prop) {\n                propMetadata_1[prop] = convertTsickleDecoratorIntoMetadata(propDecorators_1[prop]);\n            });\n            return propMetadata_1;\n        }\n        // API for metadata created by invoking the decorators.\n        if (typeOrFunc.hasOwnProperty(PROP_METADATA)) {\n            return typeOrFunc[PROP_METADATA];\n        }\n        return null;\n    };\n    ReflectionCapabilities.prototype.propMetadata = function (typeOrFunc) {\n        if (!isType(typeOrFunc)) {\n            return {};\n        }\n        var parentCtor = getParentCtor(typeOrFunc);\n        var propMetadata = {};\n        if (parentCtor !== Object) {\n            var parentPropMetadata_1 = this.propMetadata(parentCtor);\n            Object.keys(parentPropMetadata_1).forEach(function (propName) {\n                propMetadata[propName] = parentPropMetadata_1[propName];\n            });\n        }\n        var ownPropMetadata = this._ownPropMetadata(typeOrFunc, parentCtor);\n        if (ownPropMetadata) {\n            Object.keys(ownPropMetadata).forEach(function (propName) {\n                var decorators = [];\n                if (propMetadata.hasOwnProperty(propName)) {\n                    decorators.push.apply(decorators, __spread(propMetadata[propName]));\n                }\n                decorators.push.apply(decorators, __spread(ownPropMetadata[propName]));\n                propMetadata[propName] = decorators;\n            });\n        }\n        return propMetadata;\n    };\n    ReflectionCapabilities.prototype.hasLifecycleHook = function (type, lcProperty) {\n        return type instanceof Type$2 && lcProperty in type.prototype;\n    };\n    ReflectionCapabilities.prototype.guards = function (type) { return {}; };\n    ReflectionCapabilities.prototype.getter = function (name) { return new Function('o', 'return o.' + name + ';'); };\n    ReflectionCapabilities.prototype.setter = function (name) {\n        return new Function('o', 'v', 'return o.' + name + ' = v;');\n    };\n    ReflectionCapabilities.prototype.method = function (name) {\n        var functionBody = \"if (!o.\" + name + \") throw new Error('\\\"\" + name + \"\\\" is undefined');\\n        return o.\" + name + \".apply(o, args);\";\n        return new Function('o', 'args', functionBody);\n    };\n    // There is not a concept of import uri in Js, but this is useful in developing Dart applications.\n    // There is not a concept of import uri in Js, but this is useful in developing Dart applications.\n    ReflectionCapabilities.prototype.importUri = \n    // There is not a concept of import uri in Js, but this is useful in developing Dart applications.\n    function (type) {\n        // StaticSymbol\n        if (typeof type === 'object' && type['filePath']) {\n            return type['filePath'];\n        }\n        // Runtime type\n        return \"./\" + stringify$1(type);\n    };\n    ReflectionCapabilities.prototype.resourceUri = function (type) { return \"./\" + stringify$1(type); };\n    ReflectionCapabilities.prototype.resolveIdentifier = function (name, moduleUrl, members, runtime) {\n        return runtime;\n    };\n    ReflectionCapabilities.prototype.resolveEnum = function (enumIdentifier, name) { return enumIdentifier[name]; };\n    return ReflectionCapabilities;\n}());\nfunction convertTsickleDecoratorIntoMetadata(decoratorInvocations) {\n    if (!decoratorInvocations) {\n        return [];\n    }\n    return decoratorInvocations.map(function (decoratorInvocation) {\n        var decoratorType = decoratorInvocation.type;\n        var annotationCls = decoratorType.annotationCls;\n        var annotationArgs = decoratorInvocation.args ? decoratorInvocation.args : [];\n        return new (annotationCls.bind.apply(annotationCls, __spread([void 0], annotationArgs)))();\n    });\n}\nfunction getParentCtor(ctor) {\n    var parentProto = ctor.prototype ? Object.getPrototypeOf(ctor.prototype) : null;\n    var parentCtor = parentProto ? parentProto.constructor : null;\n    // Note: We always use `Object` as the null value\n    // to simplify checking later on.\n    return parentCtor || Object;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction getClosureSafeProperty(objWithPropertyToExtract, target) {\n    for (var key in objWithPropertyToExtract) {\n        if (objWithPropertyToExtract[key] === target) {\n            return key;\n        }\n    }\n    throw Error('Could not find renamed property on target object.');\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Allows to refer to references which are not yet defined.\n *\n * For instance, `forwardRef` is used when the `token` which we need to refer to for the purposes of\n * DI is declared,\n * but not yet defined. It is also used when the `token` which we use when creating a query is not\n * yet defined.\n *\n * ### Example\n * {@example core/di/ts/forward_ref/forward_ref_spec.ts region='forward_ref'}\n * @experimental\n */\nfunction forwardRef(forwardRefFn) {\n    forwardRefFn.__forward_ref__ = forwardRef;\n    forwardRefFn.toString = function () { return stringify$1(this()); };\n    return forwardRefFn;\n}\n/**\n * Lazily retrieves the reference value from a forwardRef.\n *\n * Acts as the identity function when given a non-forward-ref value.\n *\n * ### Example ([live demo](http://plnkr.co/edit/GU72mJrk1fiodChcmiDR?p=preview))\n *\n * {@example core/di/ts/forward_ref/forward_ref_spec.ts region='resolve_forward_ref'}\n *\n * See: {@link forwardRef}\n * @experimental\n */\nfunction resolveForwardRef$1(type) {\n    if (typeof type === 'function' && type.hasOwnProperty('__forward_ref__') &&\n        type.__forward_ref__ === forwardRef) {\n        return type();\n    }\n    else {\n        return type;\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Inject decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Inject = makeParamDecorator('Inject', function (token) { return ({ token: token }); });\n/**\n * Optional decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Optional = makeParamDecorator('Optional');\n/**\n * Self decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Self = makeParamDecorator('Self');\n/**\n * SkipSelf decorator and metadata.\n *\n *\n * @Annotation\n */\nvar SkipSelf = makeParamDecorator('SkipSelf');\n/**\n * Host decorator and metadata.\n *\n *\n * @Annotation\n */\nvar Host = makeParamDecorator('Host');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar SOURCE$1 = '__source';\nvar _THROW_IF_NOT_FOUND = new Object();\nvar THROW_IF_NOT_FOUND = _THROW_IF_NOT_FOUND;\n/**\n * An InjectionToken that gets the current `Injector` for `createInjector()`-style injectors.\n *\n * Requesting this token instead of `Injector` allows `StaticInjector` to be tree-shaken from a\n * project.\n *\n * @experimental\n */\nvar INJECTOR = new InjectionToken('INJECTOR');\nvar NullInjector = /** @class */ (function () {\n    function NullInjector() {\n    }\n    NullInjector.prototype.get = function (token, notFoundValue) {\n        if (notFoundValue === void 0) { notFoundValue = _THROW_IF_NOT_FOUND; }\n        if (notFoundValue === _THROW_IF_NOT_FOUND) {\n            throw new Error(\"NullInjectorError: No provider for \" + stringify$1(token) + \"!\");\n        }\n        return notFoundValue;\n    };\n    return NullInjector;\n}());\n/**\n * @usageNotes\n * ```\n * const injector: Injector = ...;\n * injector.get(...);\n * ```\n *\n * @description\n *\n * Concrete injectors implement this interface.\n *\n * For more details, see the {@linkDocs guide/dependency-injection \"Dependency Injection Guide\"}.\n *\n * ### Example\n *\n * {@example core/di/ts/injector_spec.ts region='Injector'}\n *\n * `Injector` returns itself when given `Injector` as a token:\n * {@example core/di/ts/injector_spec.ts region='injectInjector'}\n *\n *\n */\nvar Injector = /** @class */ (function () {\n    function Injector() {\n    }\n    /**\n     * Create a new Injector which is configure using `StaticProvider`s.\n     *\n     * ### Example\n     *\n     * {@example core/di/ts/provider_spec.ts region='ConstructorProvider'}\n     */\n    /**\n       * Create a new Injector which is configure using `StaticProvider`s.\n       *\n       * ### Example\n       *\n       * {@example core/di/ts/provider_spec.ts region='ConstructorProvider'}\n       */\n    Injector.create = /**\n       * Create a new Injector which is configure using `StaticProvider`s.\n       *\n       * ### Example\n       *\n       * {@example core/di/ts/provider_spec.ts region='ConstructorProvider'}\n       */\n    function (options, parent) {\n        if (Array.isArray(options)) {\n            return new StaticInjector(options, parent);\n        }\n        else {\n            return new StaticInjector(options.providers, options.parent, options.name || null);\n        }\n    };\n    Injector.THROW_IF_NOT_FOUND = _THROW_IF_NOT_FOUND;\n    Injector.NULL = new NullInjector();\n    Injector.ngInjectableDef = defineInjectable({\n        providedIn: 'any',\n        factory: function () { return inject(INJECTOR); },\n    });\n    return Injector;\n}());\nvar IDENT = function (value) {\n    return value;\n};\nvar EMPTY = [];\nvar CIRCULAR = IDENT;\nvar MULTI_PROVIDER_FN = function () {\n    return Array.prototype.slice.call(arguments);\n};\nvar GET_PROPERTY_NAME$1 = {};\nvar USE_VALUE$2 = getClosureSafeProperty$1({ provide: String, useValue: GET_PROPERTY_NAME$1 });\nvar NG_TOKEN_PATH = 'ngTokenPath';\nvar NG_TEMP_TOKEN_PATH = 'ngTempTokenPath';\nvar NULL_INJECTOR = Injector.NULL;\nvar NEW_LINE = /\\n/gm;\nvar NO_NEW_LINE = '';\nvar StaticInjector = /** @class */ (function () {\n    function StaticInjector(providers, parent, source) {\n        if (parent === void 0) { parent = NULL_INJECTOR; }\n        if (source === void 0) { source = null; }\n        this.parent = parent;\n        this.source = source;\n        var records = this._records = new Map();\n        records.set(Injector, { token: Injector, fn: IDENT, deps: EMPTY, value: this, useNew: false });\n        records.set(INJECTOR, { token: INJECTOR, fn: IDENT, deps: EMPTY, value: this, useNew: false });\n        recursivelyProcessProviders(records, providers);\n    }\n    StaticInjector.prototype.get = function (token, notFoundValue, flags) {\n        if (flags === void 0) { flags = 0 /* Default */; }\n        var record = this._records.get(token);\n        try {\n            return tryResolveToken(token, record, this._records, this.parent, notFoundValue, flags);\n        }\n        catch (e) {\n            var tokenPath = e[NG_TEMP_TOKEN_PATH];\n            if (token[SOURCE$1]) {\n                tokenPath.unshift(token[SOURCE$1]);\n            }\n            e.message = formatError('\\n' + e.message, tokenPath, this.source);\n            e[NG_TOKEN_PATH] = tokenPath;\n            e[NG_TEMP_TOKEN_PATH] = null;\n            throw e;\n        }\n    };\n    StaticInjector.prototype.toString = function () {\n        var tokens = [], records = this._records;\n        records.forEach(function (v, token) { return tokens.push(stringify$1(token)); });\n        return \"StaticInjector[\" + tokens.join(', ') + \"]\";\n    };\n    return StaticInjector;\n}());\nfunction resolveProvider(provider) {\n    var deps = computeDeps(provider);\n    var fn = IDENT;\n    var value = EMPTY;\n    var useNew = false;\n    var provide = resolveForwardRef$1(provider.provide);\n    if (USE_VALUE$2 in provider) {\n        // We need to use USE_VALUE in provider since provider.useValue could be defined as undefined.\n        value = provider.useValue;\n    }\n    else if (provider.useFactory) {\n        fn = provider.useFactory;\n    }\n    else if (provider.useExisting) {\n        // Just use IDENT\n    }\n    else if (provider.useClass) {\n        useNew = true;\n        fn = resolveForwardRef$1(provider.useClass);\n    }\n    else if (typeof provide == 'function') {\n        useNew = true;\n        fn = provide;\n    }\n    else {\n        throw staticError('StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable', provider);\n    }\n    return { deps: deps, fn: fn, useNew: useNew, value: value };\n}\nfunction multiProviderMixError(token) {\n    return staticError('Cannot mix multi providers and regular providers', token);\n}\nfunction recursivelyProcessProviders(records, provider) {\n    if (provider) {\n        provider = resolveForwardRef$1(provider);\n        if (provider instanceof Array) {\n            // if we have an array recurse into the array\n            for (var i = 0; i < provider.length; i++) {\n                recursivelyProcessProviders(records, provider[i]);\n            }\n        }\n        else if (typeof provider === 'function') {\n            // Functions were supported in ReflectiveInjector, but are not here. For safety give useful\n            // error messages\n            throw staticError('Function/Class not supported', provider);\n        }\n        else if (provider && typeof provider === 'object' && provider.provide) {\n            // At this point we have what looks like a provider: {provide: ?, ....}\n            var token = resolveForwardRef$1(provider.provide);\n            var resolvedProvider = resolveProvider(provider);\n            if (provider.multi === true) {\n                // This is a multi provider.\n                var multiProvider = records.get(token);\n                if (multiProvider) {\n                    if (multiProvider.fn !== MULTI_PROVIDER_FN) {\n                        throw multiProviderMixError(token);\n                    }\n                }\n                else {\n                    // Create a placeholder factory which will look up the constituents of the multi provider.\n                    records.set(token, multiProvider = {\n                        token: provider.provide,\n                        deps: [],\n                        useNew: false,\n                        fn: MULTI_PROVIDER_FN,\n                        value: EMPTY\n                    });\n                }\n                // Treat the provider as the token.\n                token = provider;\n                multiProvider.deps.push({ token: token, options: 6 /* Default */ });\n            }\n            var record = records.get(token);\n            if (record && record.fn == MULTI_PROVIDER_FN) {\n                throw multiProviderMixError(token);\n            }\n            records.set(token, resolvedProvider);\n        }\n        else {\n            throw staticError('Unexpected provider', provider);\n        }\n    }\n}\nfunction tryResolveToken(token, record, records, parent, notFoundValue, flags) {\n    try {\n        return resolveToken(token, record, records, parent, notFoundValue, flags);\n    }\n    catch (e) {\n        // ensure that 'e' is of type Error.\n        if (!(e instanceof Error)) {\n            e = new Error(e);\n        }\n        var path$$1 = e[NG_TEMP_TOKEN_PATH] = e[NG_TEMP_TOKEN_PATH] || [];\n        path$$1.unshift(token);\n        if (record && record.value == CIRCULAR) {\n            // Reset the Circular flag.\n            record.value = EMPTY;\n        }\n        throw e;\n    }\n}\nfunction resolveToken(token, record, records, parent, notFoundValue, flags) {\n    var value;\n    if (record && !(flags & 4 /* SkipSelf */)) {\n        // If we don't have a record, this implies that we don't own the provider hence don't know how\n        // to resolve it.\n        value = record.value;\n        if (value == CIRCULAR) {\n            throw Error(NO_NEW_LINE + 'Circular dependency');\n        }\n        else if (value === EMPTY) {\n            record.value = CIRCULAR;\n            var obj = undefined;\n            var useNew = record.useNew;\n            var fn = record.fn;\n            var depRecords = record.deps;\n            var deps = EMPTY;\n            if (depRecords.length) {\n                deps = [];\n                for (var i = 0; i < depRecords.length; i++) {\n                    var depRecord = depRecords[i];\n                    var options = depRecord.options;\n                    var childRecord = options & 2 /* CheckSelf */ ? records.get(depRecord.token) : undefined;\n                    deps.push(tryResolveToken(\n                    // Current Token to resolve\n                    depRecord.token, childRecord, records, \n                    // If we don't know how to resolve dependency and we should not check parent for it,\n                    // than pass in Null injector.\n                    !childRecord && !(options & 4 /* CheckParent */) ? NULL_INJECTOR : parent, options & 1 /* Optional */ ? null : Injector.THROW_IF_NOT_FOUND, 0 /* Default */));\n                }\n            }\n            record.value = value = useNew ? new ((_a = fn).bind.apply(_a, __spread([void 0], deps)))() : fn.apply(obj, deps);\n        }\n    }\n    else if (!(flags & 2 /* Self */)) {\n        value = parent.get(token, notFoundValue, 0 /* Default */);\n    }\n    return value;\n    var _a;\n}\nfunction computeDeps(provider) {\n    var deps = EMPTY;\n    var providerDeps = provider.deps;\n    if (providerDeps && providerDeps.length) {\n        deps = [];\n        for (var i = 0; i < providerDeps.length; i++) {\n            var options = 6;\n            var token = resolveForwardRef$1(providerDeps[i]);\n            if (token instanceof Array) {\n                for (var j = 0, annotations = token; j < annotations.length; j++) {\n                    var annotation = annotations[j];\n                    if (annotation instanceof Optional || annotation == Optional) {\n                        options = options | 1 /* Optional */;\n                    }\n                    else if (annotation instanceof SkipSelf || annotation == SkipSelf) {\n                        options = options & ~2 /* CheckSelf */;\n                    }\n                    else if (annotation instanceof Self || annotation == Self) {\n                        options = options & ~4 /* CheckParent */;\n                    }\n                    else if (annotation instanceof Inject) {\n                        token = annotation.token;\n                    }\n                    else {\n                        token = resolveForwardRef$1(annotation);\n                    }\n                }\n            }\n            deps.push({ token: token, options: options });\n        }\n    }\n    else if (provider.useExisting) {\n        var token = resolveForwardRef$1(provider.useExisting);\n        deps = [{ token: token, options: 6 /* Default */ }];\n    }\n    else if (!providerDeps && !(USE_VALUE$2 in provider)) {\n        // useValue & useExisting are the only ones which are exempt from deps all others need it.\n        throw staticError('\\'deps\\' required', provider);\n    }\n    return deps;\n}\nfunction formatError(text, obj, source) {\n    if (source === void 0) { source = null; }\n    text = text && text.charAt(0) === '\\n' && text.charAt(1) == NO_NEW_LINE ? text.substr(2) : text;\n    var context = stringify$1(obj);\n    if (obj instanceof Array) {\n        context = obj.map(stringify$1).join(' -> ');\n    }\n    else if (typeof obj === 'object') {\n        var parts = [];\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                var value = obj[key];\n                parts.push(key + ':' + (typeof value === 'string' ? JSON.stringify(value) : stringify$1(value)));\n            }\n        }\n        context = \"{\" + parts.join(', ') + \"}\";\n    }\n    return \"StaticInjectorError\" + (source ? '(' + source + ')' : '') + \"[\" + context + \"]: \" + text.replace(NEW_LINE, '\\n  ');\n}\nfunction staticError(text, obj) {\n    return new Error(formatError(text, obj));\n}\nfunction getClosureSafeProperty$1(objWithPropertyToExtract) {\n    for (var key in objWithPropertyToExtract) {\n        if (objWithPropertyToExtract[key] === GET_PROPERTY_NAME$1) {\n            return key;\n        }\n    }\n    throw Error('!prop');\n}\n/**\n * Current injector value used by `inject`.\n * - `undefined`: it is an error to call `inject`\n * - `null`: `inject` can be called but there is no injector (limp-mode).\n * - Injector instance: Use the injector for resolution.\n */\nvar _currentInjector = undefined;\nfunction setCurrentInjector(injector) {\n    var former = _currentInjector;\n    _currentInjector = injector;\n    return former;\n}\nfunction inject(token, flags) {\n    if (flags === void 0) { flags = 0 /* Default */; }\n    if (_currentInjector === undefined) {\n        throw new Error(\"inject() must be called from an injection context\");\n    }\n    else if (_currentInjector === null) {\n        var injectableDef = token.ngInjectableDef;\n        if (injectableDef && injectableDef.providedIn == 'root') {\n            return injectableDef.value === undefined ? injectableDef.value = injectableDef.factory() :\n                injectableDef.value;\n        }\n        if (flags & 8 /* Optional */)\n            return null;\n        throw new Error(\"Injector: NOT_FOUND [\" + stringify$1(token) + \"]\");\n    }\n    else {\n        return _currentInjector.get(token, flags & 8 /* Optional */ ? null : undefined, flags);\n    }\n}\nfunction injectArgs(types) {\n    var args = [];\n    for (var i = 0; i < types.length; i++) {\n        var arg = types[i];\n        if (Array.isArray(arg)) {\n            if (arg.length === 0) {\n                throw new Error('Arguments array must have arguments.');\n            }\n            var type = undefined;\n            var flags = 0;\n            for (var j = 0; j < arg.length; j++) {\n                var meta = arg[j];\n                if (meta instanceof Optional || meta.__proto__.ngMetadataName === 'Optional') {\n                    flags |= 8 /* Optional */;\n                }\n                else if (meta instanceof SkipSelf || meta.__proto__.ngMetadataName === 'SkipSelf') {\n                    flags |= 4 /* SkipSelf */;\n                }\n                else if (meta instanceof Self || meta.__proto__.ngMetadataName === 'Self') {\n                    flags |= 2 /* Self */;\n                }\n                else if (meta instanceof Inject) {\n                    type = meta.token;\n                }\n                else {\n                    type = meta;\n                }\n            }\n            args.push(inject((type), flags));\n        }\n        else {\n            args.push(inject(arg));\n        }\n    }\n    return args;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar GET_PROPERTY_NAME = {};\nvar 0 = GET_PROPERTY_NAME;\nvar USE_VALUE$1 = getClosureSafeProperty({ provide: String, useValue: 0 }, GET_PROPERTY_NAME);\nvar EMPTY_ARRAY = [];\nfunction convertInjectableProviderToFactory(type, provider) {\n    if (!provider) {\n        var reflectionCapabilities = new ReflectionCapabilities();\n        var deps_1 = reflectionCapabilities.parameters(type);\n        // TODO - convert to flags.\n        return function () { return new (type.bind.apply(type, __spread([void 0], injectArgs(deps_1))))(); };\n    }\n    if (USE_VALUE$1 in provider) {\n        var valueProvider_1 = provider;\n        return function () { return valueProvider_1.useValue; };\n    }\n    else if (provider.useExisting) {\n        var existingProvider_1 = provider;\n        return function () { return inject(existingProvider_1.useExisting); };\n    }\n    else if (provider.useFactory) {\n        var factoryProvider_1 = provider;\n        return function () { return factoryProvider_1.useFactory.apply(factoryProvider_1, __spread(injectArgs(factoryProvider_1.deps || EMPTY_ARRAY))); };\n    }\n    else if (provider.useClass) {\n        var classProvider_1 = provider;\n        var deps_2 = provider.deps;\n        if (!deps_2) {\n            var reflectionCapabilities = new ReflectionCapabilities();\n            deps_2 = reflectionCapabilities.parameters(type);\n        }\n        return function () {\n            return new ((_a = classProvider_1.useClass).bind.apply(_a, __spread([void 0], injectArgs(deps_2))))();\n            var _a;\n        };\n    }\n    else {\n        var deps_3 = provider.deps;\n        if (!deps_3) {\n            var reflectionCapabilities = new ReflectionCapabilities();\n            deps_3 = reflectionCapabilities.parameters(type);\n        }\n        return function () { return new (type.bind.apply(type, __spread([void 0], injectArgs((deps_3)))))(); };\n    }\n}\n/**\n * Supports @Injectable() in JIT mode for Render2.\n */\nfunction preR3InjectableCompile(injectableType, options) {\n    if (options && options.providedIn !== undefined && injectableType.ngInjectableDef === undefined) {\n        injectableType.ngInjectableDef = defineInjectable({\n            providedIn: options.providedIn,\n            factory: convertInjectableProviderToFactory(injectableType, options),\n        });\n    }\n}\n/**\n* Injectable decorator and metadata.\n*\n*\n* @Annotation\n*/\nvar Injectable = makeDecorator('Injectable', undefined, undefined, undefined, function (type, meta) {\n    return (R3_COMPILE_INJECTABLE || preR3InjectableCompile)(type, meta);\n});\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Defines a schema that will allow:\n * - any non-Angular elements with a `-` in their name,\n * - any properties on elements with a `-` in their name which is the common rule for custom\n * elements.\n *\n *\n */\n\n/**\n * Defines a schema that will allow any property on any element.\n *\n * @experimental\n */\n\nfunction preR3NgModuleCompile(moduleType, metadata) {\n    var imports = (metadata && metadata.imports) || [];\n    if (metadata && metadata.exports) {\n        imports = __spread(imports, [metadata.exports]);\n    }\n    moduleType.ngInjectorDef = defineInjector({\n        factory: convertInjectableProviderToFactory(moduleType, { useClass: moduleType }),\n        providers: metadata && metadata.providers,\n        imports: imports,\n    });\n}\n/**\n * NgModule decorator and metadata.\n *\n *\n * @Annotation\n */\nvar NgModule = makeDecorator('NgModule', function (ngModule) { return ngModule; }, undefined, undefined, function (type, meta) { return (R3_COMPILE_NGMODULE || preR3NgModuleCompile)(type, meta); });\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Defines template and style encapsulation options available for Component's {@link Component}.\n *\n * See {@link Component#encapsulation encapsulation}.\n *\n */\n/**\n * Defines template and style encapsulation options available for Component's {@link Component}.\n *\n * See {@link Component#encapsulation encapsulation}.\n *\n */\nvar ViewEncapsulation$1;\n/**\n * Defines template and style encapsulation options available for Component's {@link Component}.\n *\n * See {@link Component#encapsulation encapsulation}.\n *\n */\n(function (ViewEncapsulation) {\n    /**\n     * Emulate `Native` scoping of styles by adding an attribute containing surrogate id to the Host\n     * Element and pre-processing the style rules provided via {@link Component#styles styles} or\n     * {@link Component#styleUrls styleUrls}, and adding the new Host Element attribute to all\n     * selectors.\n     *\n     * This is the default option.\n     */\n    ViewEncapsulation[ViewEncapsulation[\"Emulated\"] = 0] = \"Emulated\";\n    /**\n     * Use the native encapsulation mechanism of the renderer.\n     *\n     * For the DOM this means using [Shadow DOM](https://w3c.github.io/webcomponents/spec/shadow/) and\n     * creating a ShadowRoot for Component's Host Element.\n     */\n    ViewEncapsulation[ViewEncapsulation[\"Native\"] = 1] = \"Native\";\n    /**\n     * Don't provide any template or style encapsulation.\n     */\n    ViewEncapsulation[ViewEncapsulation[\"None\"] = 2] = \"None\";\n})(ViewEncapsulation$1 || (ViewEncapsulation$1 = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description Represents the version of Angular\n *\n *\n */\nvar Version$1 = /** @class */ (function () {\n    function Version(full) {\n        this.full = full;\n        this.major = full.split('.')[0];\n        this.minor = full.split('.')[1];\n        this.patch = full.split('.').slice(2).join('.');\n    }\n    return Version;\n}());\nvar VERSION$2 = new Version$1('6.0.0-rc.5+252.sha-7c1bd71');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar ERROR_DEBUG_CONTEXT = 'ngDebugContext';\nvar ERROR_ORIGINAL_ERROR = 'ngOriginalError';\nvar ERROR_LOGGER = 'ngErrorLogger';\n\nfunction getDebugContext(error) {\n    return error[ERROR_DEBUG_CONTEXT];\n}\nfunction getOriginalError(error) {\n    return error[ERROR_ORIGINAL_ERROR];\n}\nfunction getErrorLogger(error) {\n    return error[ERROR_LOGGER] || defaultErrorLogger;\n}\nfunction defaultErrorLogger(console) {\n    var values = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        values[_i - 1] = arguments[_i];\n    }\n    console.error.apply(console, __spread(values));\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n *\n * @description\n * Provides a hook for centralized exception handling.\n *\n * The default implementation of `ErrorHandler` prints error messages to the `console`. To\n * intercept error handling, write a custom exception handler that replaces this default as\n * appropriate for your app.\n *\n * ### Example\n *\n * ```\n * class MyErrorHandler implements ErrorHandler {\n *   handleError(error) {\n *     // do something with the exception\n *   }\n * }\n *\n * @NgModule({\n *   providers: [{provide: ErrorHandler, useClass: MyErrorHandler}]\n * })\n * class MyModule {}\n * ```\n *\n *\n */\nvar ErrorHandler = /** @class */ (function () {\n    function ErrorHandler() {\n        /**\n           * @internal\n           */\n        this._console = console;\n    }\n    ErrorHandler.prototype.handleError = function (error) {\n        var originalError = this._findOriginalError(error);\n        var context = this._findContext(error);\n        // Note: Browser consoles show the place from where console.error was called.\n        // We can use this to give users additional information about the error.\n        var errorLogger = getErrorLogger(error);\n        errorLogger(this._console, \"ERROR\", error);\n        if (originalError) {\n            errorLogger(this._console, \"ORIGINAL ERROR\", originalError);\n        }\n        if (context) {\n            errorLogger(this._console, 'ERROR CONTEXT', context);\n        }\n    };\n    /** @internal */\n    /** @internal */\n    ErrorHandler.prototype._findContext = /** @internal */\n    function (error) {\n        if (error) {\n            return getDebugContext(error) ? getDebugContext(error) :\n                this._findContext(getOriginalError(error));\n        }\n        return null;\n    };\n    /** @internal */\n    /** @internal */\n    ErrorHandler.prototype._findOriginalError = /** @internal */\n    function (error) {\n        var e = getOriginalError(error);\n        while (e && getOriginalError(e)) {\n            e = getOriginalError(e);\n        }\n        return e;\n    };\n    return ErrorHandler;\n}());\nfunction wrappedError(message, originalError) {\n    var msg = message + \" caused by: \" + (originalError instanceof Error ? originalError.message : originalError);\n    var error = Error(msg);\n    error[ERROR_ORIGINAL_ERROR] = originalError;\n    return error;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction findFirstClosedCycle(keys) {\n    var res = [];\n    for (var i = 0; i < keys.length; ++i) {\n        if (res.indexOf(keys[i]) > -1) {\n            res.push(keys[i]);\n            return res;\n        }\n        res.push(keys[i]);\n    }\n    return res;\n}\nfunction constructResolvingPath(keys) {\n    if (keys.length > 1) {\n        var reversed = findFirstClosedCycle(keys.slice().reverse());\n        var tokenStrs = reversed.map(function (k) { return stringify$1(k.token); });\n        return ' (' + tokenStrs.join(' -> ') + ')';\n    }\n    return '';\n}\nfunction injectionError(injector, key, constructResolvingMessage, originalError) {\n    var keys = [key];\n    var errMsg = constructResolvingMessage(keys);\n    var error = (originalError ? wrappedError(errMsg, originalError) : Error(errMsg));\n    error.addKey = addKey;\n    error.keys = keys;\n    error.injectors = [injector];\n    error.constructResolvingMessage = constructResolvingMessage;\n    error[ERROR_ORIGINAL_ERROR] = originalError;\n    return error;\n}\nfunction addKey(injector, key) {\n    this.injectors.push(injector);\n    this.keys.push(key);\n    // Note: This updated message won't be reflected in the `.stack` property\n    this.message = this.constructResolvingMessage(this.keys);\n}\n/**\n * Thrown when trying to retrieve a dependency by key from {@link Injector}, but the\n * {@link Injector} does not have a {@link Provider} for the given key.\n *\n * ### Example ([live demo](http://plnkr.co/edit/vq8D3FRB9aGbnWJqtEPE?p=preview))\n *\n * ```typescript\n * class A {\n *   constructor(b:B) {}\n * }\n *\n * expect(() => Injector.resolveAndCreate([A])).toThrowError();\n * ```\n */\nfunction noProviderError(injector, key) {\n    return injectionError(injector, key, function (keys) {\n        var first = stringify$1(keys[0].token);\n        return \"No provider for \" + first + \"!\" + constructResolvingPath(keys);\n    });\n}\n/**\n * Thrown when dependencies form a cycle.\n *\n * ### Example ([live demo](http://plnkr.co/edit/wYQdNos0Tzql3ei1EV9j?p=info))\n *\n * ```typescript\n * var injector = Injector.resolveAndCreate([\n *   {provide: \"one\", useFactory: (two) => \"two\", deps: [[new Inject(\"two\")]]},\n *   {provide: \"two\", useFactory: (one) => \"one\", deps: [[new Inject(\"one\")]]}\n * ]);\n *\n * expect(() => injector.get(\"one\")).toThrowError();\n * ```\n *\n * Retrieving `A` or `B` throws a `CyclicDependencyError` as the graph above cannot be constructed.\n */\nfunction cyclicDependencyError(injector, key) {\n    return injectionError(injector, key, function (keys) {\n        return \"Cannot instantiate cyclic dependency!\" + constructResolvingPath(keys);\n    });\n}\n/**\n * Thrown when a constructing type returns with an Error.\n *\n * The `InstantiationError` class contains the original error plus the dependency graph which caused\n * this object to be instantiated.\n *\n * ### Example ([live demo](http://plnkr.co/edit/7aWYdcqTQsP0eNqEdUAf?p=preview))\n *\n * ```typescript\n * class A {\n *   constructor() {\n *     throw new Error('message');\n *   }\n * }\n *\n * var injector = Injector.resolveAndCreate([A]);\n\n * try {\n *   injector.get(A);\n * } catch (e) {\n *   expect(e instanceof InstantiationError).toBe(true);\n *   expect(e.originalException.message).toEqual(\"message\");\n *   expect(e.originalStack).toBeDefined();\n * }\n * ```\n */\nfunction instantiationError(injector, originalException, originalStack, key) {\n    return injectionError(injector, key, function (keys) {\n        var first = stringify$1(keys[0].token);\n        return originalException.message + \": Error during instantiation of \" + first + \"!\" + constructResolvingPath(keys) + \".\";\n    }, originalException);\n}\n/**\n * Thrown when an object other then {@link Provider} (or `Type`) is passed to {@link Injector}\n * creation.\n *\n * ### Example ([live demo](http://plnkr.co/edit/YatCFbPAMCL0JSSQ4mvH?p=preview))\n *\n * ```typescript\n * expect(() => Injector.resolveAndCreate([\"not a type\"])).toThrowError();\n * ```\n */\nfunction invalidProviderError(provider) {\n    return Error(\"Invalid provider - only instances of Provider and Type are allowed, got: \" + provider);\n}\n/**\n * Thrown when the class has no annotation information.\n *\n * Lack of annotation information prevents the {@link Injector} from determining which dependencies\n * need to be injected into the constructor.\n *\n * ### Example ([live demo](http://plnkr.co/edit/rHnZtlNS7vJOPQ6pcVkm?p=preview))\n *\n * ```typescript\n * class A {\n *   constructor(b) {}\n * }\n *\n * expect(() => Injector.resolveAndCreate([A])).toThrowError();\n * ```\n *\n * This error is also thrown when the class not marked with {@link Injectable} has parameter types.\n *\n * ```typescript\n * class B {}\n *\n * class A {\n *   constructor(b:B) {} // no information about the parameter types of A is available at runtime.\n * }\n *\n * expect(() => Injector.resolveAndCreate([A,B])).toThrowError();\n * ```\n *\n */\nfunction noAnnotationError(typeOrFunc, params) {\n    var signature = [];\n    for (var i = 0, ii = params.length; i < ii; i++) {\n        var parameter = params[i];\n        if (!parameter || parameter.length == 0) {\n            signature.push('?');\n        }\n        else {\n            signature.push(parameter.map(stringify$1).join(' '));\n        }\n    }\n    return Error('Cannot resolve all parameters for \\'' + stringify$1(typeOrFunc) + '\\'(' +\n        signature.join(', ') + '). ' +\n        'Make sure that all the parameters are decorated with Inject or have valid type annotations and that \\'' +\n        stringify$1(typeOrFunc) + '\\' is decorated with Injectable.');\n}\n/**\n * Thrown when getting an object by index.\n *\n * ### Example ([live demo](http://plnkr.co/edit/bRs0SX2OTQiJzqvjgl8P?p=preview))\n *\n * ```typescript\n * class A {}\n *\n * var injector = Injector.resolveAndCreate([A]);\n *\n * expect(() => injector.getAt(100)).toThrowError();\n * ```\n *\n */\nfunction outOfBoundsError(index) {\n    return Error(\"Index \" + index + \" is out-of-bounds.\");\n}\n// TODO: add a working example after alpha38 is released\n/**\n * Thrown when a multi provider and a regular provider are bound to the same token.\n *\n * ### Example\n *\n * ```typescript\n * expect(() => Injector.resolveAndCreate([\n *   { provide: \"Strings\", useValue: \"string1\", multi: true},\n *   { provide: \"Strings\", useValue: \"string2\", multi: false}\n * ])).toThrowError();\n * ```\n */\nfunction mixingMultiProvidersWithRegularProvidersError(provider1, provider2) {\n    return Error(\"Cannot mix multi providers and regular providers, got: \" + provider1 + \" \" + provider2);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A unique object used for retrieving items from the {@link ReflectiveInjector}.\n *\n * Keys have:\n * - a system-wide unique `id`.\n * - a `token`.\n *\n * `Key` is used internally by {@link ReflectiveInjector} because its system-wide unique `id` allows\n * the\n * injector to store created objects in a more efficient way.\n *\n * `Key` should not be created directly. {@link ReflectiveInjector} creates keys automatically when\n * resolving\n * providers.\n * @deprecated No replacement\n */\nvar ReflectiveKey = /** @class */ (function () {\n    /**\n     * Private\n     */\n    function ReflectiveKey(token, id) {\n        this.token = token;\n        this.id = id;\n        if (!token) {\n            throw new Error('Token must be defined!');\n        }\n        this.displayName = stringify$1(this.token);\n    }\n    /**\n     * Retrieves a `Key` for a token.\n     */\n    /**\n       * Retrieves a `Key` for a token.\n       */\n    ReflectiveKey.get = /**\n       * Retrieves a `Key` for a token.\n       */\n    function (token) {\n        return _globalKeyRegistry.get(resolveForwardRef$1(token));\n    };\n    Object.defineProperty(ReflectiveKey, \"numberOfKeys\", {\n        /**\n         * @returns the number of keys registered in the system.\n         */\n        get: /**\n           * @returns the number of keys registered in the system.\n           */\n        function () { return _globalKeyRegistry.numberOfKeys; },\n        enumerable: true,\n        configurable: true\n    });\n    return ReflectiveKey;\n}());\nvar KeyRegistry = /** @class */ (function () {\n    function KeyRegistry() {\n        this._allKeys = new Map();\n    }\n    KeyRegistry.prototype.get = function (token) {\n        if (token instanceof ReflectiveKey)\n            return token;\n        if (this._allKeys.has(token)) {\n            return this._allKeys.get(token);\n        }\n        var newKey = new ReflectiveKey(token, ReflectiveKey.numberOfKeys);\n        this._allKeys.set(token, newKey);\n        return newKey;\n    };\n    Object.defineProperty(KeyRegistry.prototype, \"numberOfKeys\", {\n        get: function () { return this._allKeys.size; },\n        enumerable: true,\n        configurable: true\n    });\n    return KeyRegistry;\n}());\nvar _globalKeyRegistry = new KeyRegistry();\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Provides access to reflection data about symbols. Used internally by Angular\n * to power dependency injection and compilation.\n */\nvar Reflector = /** @class */ (function () {\n    function Reflector(reflectionCapabilities) {\n        this.reflectionCapabilities = reflectionCapabilities;\n    }\n    Reflector.prototype.updateCapabilities = function (caps) { this.reflectionCapabilities = caps; };\n    Reflector.prototype.factory = function (type) { return this.reflectionCapabilities.factory(type); };\n    Reflector.prototype.parameters = function (typeOrFunc) {\n        return this.reflectionCapabilities.parameters(typeOrFunc);\n    };\n    Reflector.prototype.annotations = function (typeOrFunc) {\n        return this.reflectionCapabilities.annotations(typeOrFunc);\n    };\n    Reflector.prototype.propMetadata = function (typeOrFunc) {\n        return this.reflectionCapabilities.propMetadata(typeOrFunc);\n    };\n    Reflector.prototype.hasLifecycleHook = function (type, lcProperty) {\n        return this.reflectionCapabilities.hasLifecycleHook(type, lcProperty);\n    };\n    Reflector.prototype.getter = function (name) { return this.reflectionCapabilities.getter(name); };\n    Reflector.prototype.setter = function (name) { return this.reflectionCapabilities.setter(name); };\n    Reflector.prototype.method = function (name) { return this.reflectionCapabilities.method(name); };\n    Reflector.prototype.importUri = function (type) { return this.reflectionCapabilities.importUri(type); };\n    Reflector.prototype.resourceUri = function (type) { return this.reflectionCapabilities.resourceUri(type); };\n    Reflector.prototype.resolveIdentifier = function (name, moduleUrl, members, runtime) {\n        return this.reflectionCapabilities.resolveIdentifier(name, moduleUrl, members, runtime);\n    };\n    Reflector.prototype.resolveEnum = function (identifier, name) {\n        return this.reflectionCapabilities.resolveEnum(identifier, name);\n    };\n    return Reflector;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * The {@link Reflector} used internally in Angular to access metadata\n * about symbols.\n */\nvar reflector = new Reflector(new ReflectionCapabilities());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * `Dependency` is used by the framework to extend DI.\n * This is internal to Angular and should not be used directly.\n */\nvar ReflectiveDependency = /** @class */ (function () {\n    function ReflectiveDependency(key, optional, visibility) {\n        this.key = key;\n        this.optional = optional;\n        this.visibility = visibility;\n    }\n    ReflectiveDependency.fromKey = function (key) {\n        return new ReflectiveDependency(key, false, null);\n    };\n    return ReflectiveDependency;\n}());\nvar _EMPTY_LIST = [];\nvar ResolvedReflectiveProvider_ = /** @class */ (function () {\n    function ResolvedReflectiveProvider_(key, resolvedFactories, multiProvider) {\n        this.key = key;\n        this.resolvedFactories = resolvedFactories;\n        this.multiProvider = multiProvider;\n        this.resolvedFactory = this.resolvedFactories[0];\n    }\n    return ResolvedReflectiveProvider_;\n}());\n/**\n * An internal resolved representation of a factory function created by resolving {@link\n * Provider}.\n * @experimental\n */\nvar ResolvedReflectiveFactory = /** @class */ (function () {\n    function ResolvedReflectiveFactory(/**\n           * Factory function which can return an instance of an object represented by a key.\n           */\n    factory, /**\n           * Arguments (dependencies) to the `factory` function.\n           */\n    dependencies) {\n        this.factory = factory;\n        this.dependencies = dependencies;\n    }\n    return ResolvedReflectiveFactory;\n}());\n/**\n * Resolve a single provider.\n */\nfunction resolveReflectiveFactory(provider) {\n    var factoryFn;\n    var resolvedDeps;\n    if (provider.useClass) {\n        var useClass = resolveForwardRef$1(provider.useClass);\n        factoryFn = reflector.factory(useClass);\n        resolvedDeps = _dependenciesFor(useClass);\n    }\n    else if (provider.useExisting) {\n        factoryFn = function (aliasInstance) { return aliasInstance; };\n        resolvedDeps = [ReflectiveDependency.fromKey(ReflectiveKey.get(provider.useExisting))];\n    }\n    else if (provider.useFactory) {\n        factoryFn = provider.useFactory;\n        resolvedDeps = constructDependencies(provider.useFactory, provider.deps);\n    }\n    else {\n        factoryFn = function () { return provider.useValue; };\n        resolvedDeps = _EMPTY_LIST;\n    }\n    return new ResolvedReflectiveFactory(factoryFn, resolvedDeps);\n}\n/**\n * Converts the {@link Provider} into {@link ResolvedProvider}.\n *\n * {@link Injector} internally only uses {@link ResolvedProvider}, {@link Provider} contains\n * convenience provider syntax.\n */\nfunction resolveReflectiveProvider(provider) {\n    return new ResolvedReflectiveProvider_(ReflectiveKey.get(provider.provide), [resolveReflectiveFactory(provider)], provider.multi || false);\n}\n/**\n * Resolve a list of Providers.\n */\nfunction resolveReflectiveProviders(providers) {\n    var normalized = _normalizeProviders(providers, []);\n    var resolved = normalized.map(resolveReflectiveProvider);\n    var resolvedProviderMap = mergeResolvedReflectiveProviders(resolved, new Map());\n    return Array.from(resolvedProviderMap.values());\n}\n/**\n * Merges a list of ResolvedProviders into a list where\n * each key is contained exactly once and multi providers\n * have been merged.\n */\nfunction mergeResolvedReflectiveProviders(providers, normalizedProvidersMap) {\n    for (var i = 0; i < providers.length; i++) {\n        var provider = providers[i];\n        var existing = normalizedProvidersMap.get(provider.key.id);\n        if (existing) {\n            if (provider.multiProvider !== existing.multiProvider) {\n                throw mixingMultiProvidersWithRegularProvidersError(existing, provider);\n            }\n            if (provider.multiProvider) {\n                for (var j = 0; j < provider.resolvedFactories.length; j++) {\n                    existing.resolvedFactories.push(provider.resolvedFactories[j]);\n                }\n            }\n            else {\n                normalizedProvidersMap.set(provider.key.id, provider);\n            }\n        }\n        else {\n            var resolvedProvider = void 0;\n            if (provider.multiProvider) {\n                resolvedProvider = new ResolvedReflectiveProvider_(provider.key, provider.resolvedFactories.slice(), provider.multiProvider);\n            }\n            else {\n                resolvedProvider = provider;\n            }\n            normalizedProvidersMap.set(provider.key.id, resolvedProvider);\n        }\n    }\n    return normalizedProvidersMap;\n}\nfunction _normalizeProviders(providers, res) {\n    providers.forEach(function (b) {\n        if (b instanceof Type$2) {\n            res.push({ provide: b, useClass: b });\n        }\n        else if (b && typeof b == 'object' && b.provide !== undefined) {\n            res.push(b);\n        }\n        else if (b instanceof Array) {\n            _normalizeProviders(b, res);\n        }\n        else {\n            throw invalidProviderError(b);\n        }\n    });\n    return res;\n}\nfunction constructDependencies(typeOrFunc, dependencies) {\n    if (!dependencies) {\n        return _dependenciesFor(typeOrFunc);\n    }\n    else {\n        var params_1 = dependencies.map(function (t) { return [t]; });\n        return dependencies.map(function (t) { return _extractToken(typeOrFunc, t, params_1); });\n    }\n}\nfunction _dependenciesFor(typeOrFunc) {\n    var params = reflector.parameters(typeOrFunc);\n    if (!params)\n        return [];\n    if (params.some(function (p) { return p == null; })) {\n        throw noAnnotationError(typeOrFunc, params);\n    }\n    return params.map(function (p) { return _extractToken(typeOrFunc, p, params); });\n}\nfunction _extractToken(typeOrFunc, metadata, params) {\n    var token = null;\n    var optional = false;\n    if (!Array.isArray(metadata)) {\n        if (metadata instanceof Inject) {\n            return _createDependency(metadata.token, optional, null);\n        }\n        else {\n            return _createDependency(metadata, optional, null);\n        }\n    }\n    var visibility = null;\n    for (var i = 0; i < metadata.length; ++i) {\n        var paramMetadata = metadata[i];\n        if (paramMetadata instanceof Type$2) {\n            token = paramMetadata;\n        }\n        else if (paramMetadata instanceof Inject) {\n            token = paramMetadata.token;\n        }\n        else if (paramMetadata instanceof Optional) {\n            optional = true;\n        }\n        else if (paramMetadata instanceof Self || paramMetadata instanceof SkipSelf) {\n            visibility = paramMetadata;\n        }\n        else if (paramMetadata instanceof InjectionToken) {\n            token = paramMetadata;\n        }\n    }\n    token = resolveForwardRef$1(token);\n    if (token != null) {\n        return _createDependency(token, optional, visibility);\n    }\n    else {\n        throw noAnnotationError(typeOrFunc, params);\n    }\n}\nfunction _createDependency(token, optional, visibility) {\n    return new ReflectiveDependency(ReflectiveKey.get(token), optional, visibility);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Threshold for the dynamic version\nvar UNDEFINED = new Object();\n/**\n * A ReflectiveDependency injection container used for instantiating objects and resolving\n * dependencies.\n *\n * An `Injector` is a replacement for a `new` operator, which can automatically resolve the\n * constructor dependencies.\n *\n * In typical use, application code asks for the dependencies in the constructor and they are\n * resolved by the `Injector`.\n *\n * ### Example ([live demo](http://plnkr.co/edit/jzjec0?p=preview))\n *\n * The following example creates an `Injector` configured to create `Engine` and `Car`.\n *\n * ```typescript\n * @Injectable()\n * class Engine {\n * }\n *\n * @Injectable()\n * class Car {\n *   constructor(public engine:Engine) {}\n * }\n *\n * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);\n * var car = injector.get(Car);\n * expect(car instanceof Car).toBe(true);\n * expect(car.engine instanceof Engine).toBe(true);\n * ```\n *\n * Notice, we don't use the `new` operator because we explicitly want to have the `Injector`\n * resolve all of the object's dependencies automatically.\n *\n * @deprecated from v5 - slow and brings in a lot of code, Use `Injector.create` instead.\n */\nvar ReflectiveInjector = /** @class */ (function () {\n    function ReflectiveInjector() {\n    }\n    /**\n     * Turns an array of provider definitions into an array of resolved providers.\n     *\n     * A resolution is a process of flattening multiple nested arrays and converting individual\n     * providers into an array of {@link ResolvedReflectiveProvider}s.\n     *\n     * ### Example ([live demo](http://plnkr.co/edit/AiXTHi?p=preview))\n     *\n     * ```typescript\n     * @Injectable()\n     * class Engine {\n     * }\n     *\n     * @Injectable()\n     * class Car {\n     *   constructor(public engine:Engine) {}\n     * }\n     *\n     * var providers = ReflectiveInjector.resolve([Car, [[Engine]]]);\n     *\n     * expect(providers.length).toEqual(2);\n     *\n     * expect(providers[0] instanceof ResolvedReflectiveProvider).toBe(true);\n     * expect(providers[0].key.displayName).toBe(\"Car\");\n     * expect(providers[0].dependencies.length).toEqual(1);\n     * expect(providers[0].factory).toBeDefined();\n     *\n     * expect(providers[1].key.displayName).toBe(\"Engine\");\n     * });\n     * ```\n     *\n     * See {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders} for more info.\n     */\n    /**\n       * Turns an array of provider definitions into an array of resolved providers.\n       *\n       * A resolution is a process of flattening multiple nested arrays and converting individual\n       * providers into an array of {@link ResolvedReflectiveProvider}s.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/AiXTHi?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var providers = ReflectiveInjector.resolve([Car, [[Engine]]]);\n       *\n       * expect(providers.length).toEqual(2);\n       *\n       * expect(providers[0] instanceof ResolvedReflectiveProvider).toBe(true);\n       * expect(providers[0].key.displayName).toBe(\"Car\");\n       * expect(providers[0].dependencies.length).toEqual(1);\n       * expect(providers[0].factory).toBeDefined();\n       *\n       * expect(providers[1].key.displayName).toBe(\"Engine\");\n       * });\n       * ```\n       *\n       * See {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders} for more info.\n       */\n    ReflectiveInjector.resolve = /**\n       * Turns an array of provider definitions into an array of resolved providers.\n       *\n       * A resolution is a process of flattening multiple nested arrays and converting individual\n       * providers into an array of {@link ResolvedReflectiveProvider}s.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/AiXTHi?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var providers = ReflectiveInjector.resolve([Car, [[Engine]]]);\n       *\n       * expect(providers.length).toEqual(2);\n       *\n       * expect(providers[0] instanceof ResolvedReflectiveProvider).toBe(true);\n       * expect(providers[0].key.displayName).toBe(\"Car\");\n       * expect(providers[0].dependencies.length).toEqual(1);\n       * expect(providers[0].factory).toBeDefined();\n       *\n       * expect(providers[1].key.displayName).toBe(\"Engine\");\n       * });\n       * ```\n       *\n       * See {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders} for more info.\n       */\n    function (providers) {\n        return resolveReflectiveProviders(providers);\n    };\n    /**\n     * Resolves an array of providers and creates an injector from those providers.\n     *\n     * The passed-in providers can be an array of `Type`, {@link Provider},\n     * or a recursive array of more providers.\n     *\n     * ### Example ([live demo](http://plnkr.co/edit/ePOccA?p=preview))\n     *\n     * ```typescript\n     * @Injectable()\n     * class Engine {\n     * }\n     *\n     * @Injectable()\n     * class Car {\n     *   constructor(public engine:Engine) {}\n     * }\n     *\n     * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);\n     * expect(injector.get(Car) instanceof Car).toBe(true);\n     * ```\n     *\n     * This function is slower than the corresponding `fromResolvedProviders`\n     * because it needs to resolve the passed-in providers first.\n     * See {@link ReflectiveInjector#resolve resolve} and\n     * {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders}.\n     */\n    /**\n       * Resolves an array of providers and creates an injector from those providers.\n       *\n       * The passed-in providers can be an array of `Type`, {@link Provider},\n       * or a recursive array of more providers.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/ePOccA?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);\n       * expect(injector.get(Car) instanceof Car).toBe(true);\n       * ```\n       *\n       * This function is slower than the corresponding `fromResolvedProviders`\n       * because it needs to resolve the passed-in providers first.\n       * See {@link ReflectiveInjector#resolve resolve} and\n       * {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders}.\n       */\n    ReflectiveInjector.resolveAndCreate = /**\n       * Resolves an array of providers and creates an injector from those providers.\n       *\n       * The passed-in providers can be an array of `Type`, {@link Provider},\n       * or a recursive array of more providers.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/ePOccA?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);\n       * expect(injector.get(Car) instanceof Car).toBe(true);\n       * ```\n       *\n       * This function is slower than the corresponding `fromResolvedProviders`\n       * because it needs to resolve the passed-in providers first.\n       * See {@link ReflectiveInjector#resolve resolve} and\n       * {@link ReflectiveInjector#fromResolvedProviders fromResolvedProviders}.\n       */\n    function (providers, parent) {\n        var ResolvedReflectiveProviders = ReflectiveInjector.resolve(providers);\n        return ReflectiveInjector.fromResolvedProviders(ResolvedReflectiveProviders, parent);\n    };\n    /**\n     * Creates an injector from previously resolved providers.\n     *\n     * This API is the recommended way to construct injectors in performance-sensitive parts.\n     *\n     * ### Example ([live demo](http://plnkr.co/edit/KrSMci?p=preview))\n     *\n     * ```typescript\n     * @Injectable()\n     * class Engine {\n     * }\n     *\n     * @Injectable()\n     * class Car {\n     *   constructor(public engine:Engine) {}\n     * }\n     *\n     * var providers = ReflectiveInjector.resolve([Car, Engine]);\n     * var injector = ReflectiveInjector.fromResolvedProviders(providers);\n     * expect(injector.get(Car) instanceof Car).toBe(true);\n     * ```\n     * @experimental\n     */\n    /**\n       * Creates an injector from previously resolved providers.\n       *\n       * This API is the recommended way to construct injectors in performance-sensitive parts.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/KrSMci?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var providers = ReflectiveInjector.resolve([Car, Engine]);\n       * var injector = ReflectiveInjector.fromResolvedProviders(providers);\n       * expect(injector.get(Car) instanceof Car).toBe(true);\n       * ```\n       * @experimental\n       */\n    ReflectiveInjector.fromResolvedProviders = /**\n       * Creates an injector from previously resolved providers.\n       *\n       * This API is the recommended way to construct injectors in performance-sensitive parts.\n       *\n       * ### Example ([live demo](http://plnkr.co/edit/KrSMci?p=preview))\n       *\n       * ```typescript\n       * @Injectable()\n       * class Engine {\n       * }\n       *\n       * @Injectable()\n       * class Car {\n       *   constructor(public engine:Engine) {}\n       * }\n       *\n       * var providers = ReflectiveInjector.resolve([Car, Engine]);\n       * var injector = ReflectiveInjector.fromResolvedProviders(providers);\n       * expect(injector.get(Car) instanceof Car).toBe(true);\n       * ```\n       * @experimental\n       */\n    function (providers, parent) {\n        return new ReflectiveInjector_(providers, parent);\n    };\n    return ReflectiveInjector;\n}());\nvar ReflectiveInjector_ = /** @class */ (function () {\n    /**\n     * Private\n     */\n    function ReflectiveInjector_(_providers, _parent) {\n        /** @internal */\n        this._constructionCounter = 0;\n        this._providers = _providers;\n        this.parent = _parent || null;\n        var len = _providers.length;\n        this.keyIds = new Array(len);\n        this.objs = new Array(len);\n        for (var i = 0; i < len; i++) {\n            this.keyIds[i] = _providers[i].key.id;\n            this.objs[i] = UNDEFINED;\n        }\n    }\n    ReflectiveInjector_.prototype.get = function (token, notFoundValue) {\n        if (notFoundValue === void 0) { notFoundValue = THROW_IF_NOT_FOUND; }\n        return this._getByKey(ReflectiveKey.get(token), null, notFoundValue);\n    };\n    ReflectiveInjector_.prototype.resolveAndCreateChild = function (providers) {\n        var ResolvedReflectiveProviders = ReflectiveInjector.resolve(providers);\n        return this.createChildFromResolved(ResolvedReflectiveProviders);\n    };\n    ReflectiveInjector_.prototype.createChildFromResolved = function (providers) {\n        var inj = new ReflectiveInjector_(providers);\n        inj.parent = this;\n        return inj;\n    };\n    ReflectiveInjector_.prototype.resolveAndInstantiate = function (provider) {\n        return this.instantiateResolved(ReflectiveInjector.resolve([provider])[0]);\n    };\n    ReflectiveInjector_.prototype.instantiateResolved = function (provider) {\n        return this._instantiateProvider(provider);\n    };\n    ReflectiveInjector_.prototype.getProviderAtIndex = function (index) {\n        if (index < 0 || index >= this._providers.length) {\n            throw outOfBoundsError(index);\n        }\n        return this._providers[index];\n    };\n    /** @internal */\n    /** @internal */\n    ReflectiveInjector_.prototype._new = /** @internal */\n    function (provider) {\n        if (this._constructionCounter++ > this._getMaxNumberOfObjects()) {\n            throw cyclicDependencyError(this, provider.key);\n        }\n        return this._instantiateProvider(provider);\n    };\n    ReflectiveInjector_.prototype._getMaxNumberOfObjects = function () { return this.objs.length; };\n    ReflectiveInjector_.prototype._instantiateProvider = function (provider) {\n        if (provider.multiProvider) {\n            var res = new Array(provider.resolvedFactories.length);\n            for (var i = 0; i < provider.resolvedFactories.length; ++i) {\n                res[i] = this._instantiate(provider, provider.resolvedFactories[i]);\n            }\n            return res;\n        }\n        else {\n            return this._instantiate(provider, provider.resolvedFactories[0]);\n        }\n    };\n    ReflectiveInjector_.prototype._instantiate = function (provider, ResolvedReflectiveFactory$$1) {\n        var _this = this;\n        var factory = ResolvedReflectiveFactory$$1.factory;\n        var deps;\n        try {\n            deps =\n                ResolvedReflectiveFactory$$1.dependencies.map(function (dep) { return _this._getByReflectiveDependency(dep); });\n        }\n        catch (e) {\n            if (e.addKey) {\n                e.addKey(this, provider.key);\n            }\n            throw e;\n        }\n        var obj;\n        try {\n            obj = factory.apply(void 0, __spread(deps));\n        }\n        catch (e) {\n            throw instantiationError(this, e, e.stack, provider.key);\n        }\n        return obj;\n    };\n    ReflectiveInjector_.prototype._getByReflectiveDependency = function (dep) {\n        return this._getByKey(dep.key, dep.visibility, dep.optional ? null : THROW_IF_NOT_FOUND);\n    };\n    ReflectiveInjector_.prototype._getByKey = function (key, visibility, notFoundValue) {\n        if (key === ReflectiveInjector_.INJECTOR_KEY) {\n            return this;\n        }\n        if (visibility instanceof Self) {\n            return this._getByKeySelf(key, notFoundValue);\n        }\n        else {\n            return this._getByKeyDefault(key, notFoundValue, visibility);\n        }\n    };\n    ReflectiveInjector_.prototype._getObjByKeyId = function (keyId) {\n        for (var i = 0; i < this.keyIds.length; i++) {\n            if (this.keyIds[i] === keyId) {\n                if (this.objs[i] === UNDEFINED) {\n                    this.objs[i] = this._new(this._providers[i]);\n                }\n                return this.objs[i];\n            }\n        }\n        return UNDEFINED;\n    };\n    /** @internal */\n    /** @internal */\n    ReflectiveInjector_.prototype._throwOrNull = /** @internal */\n    function (key, notFoundValue) {\n        if (notFoundValue !== THROW_IF_NOT_FOUND) {\n            return notFoundValue;\n        }\n        else {\n            throw noProviderError(this, key);\n        }\n    };\n    /** @internal */\n    /** @internal */\n    ReflectiveInjector_.prototype._getByKeySelf = /** @internal */\n    function (key, notFoundValue) {\n        var obj = this._getObjByKeyId(key.id);\n        return (obj !== UNDEFINED) ? obj : this._throwOrNull(key, notFoundValue);\n    };\n    /** @internal */\n    /** @internal */\n    ReflectiveInjector_.prototype._getByKeyDefault = /** @internal */\n    function (key, notFoundValue, visibility) {\n        var inj;\n        if (visibility instanceof SkipSelf) {\n            inj = this.parent;\n        }\n        else {\n            inj = this;\n        }\n        while (inj instanceof ReflectiveInjector_) {\n            var inj_ = inj;\n            var obj = inj_._getObjByKeyId(key.id);\n            if (obj !== UNDEFINED)\n                return obj;\n            inj = inj_.parent;\n        }\n        if (inj !== null) {\n            return inj.get(key.token, notFoundValue);\n        }\n        else {\n            return this._throwOrNull(key, notFoundValue);\n        }\n    };\n    Object.defineProperty(ReflectiveInjector_.prototype, \"displayName\", {\n        get: function () {\n            var providers = _mapProviders(this, function (b) { return ' \"' + b.key.displayName + '\" '; })\n                .join(', ');\n            return \"ReflectiveInjector(providers: [\" + providers + \"])\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ReflectiveInjector_.prototype.toString = function () { return this.displayName; };\n    ReflectiveInjector_.INJECTOR_KEY = ReflectiveKey.get(Injector);\n    return ReflectiveInjector_;\n}());\nfunction _mapProviders(injector, fn) {\n    var res = new Array(injector._providers.length);\n    for (var i = 0; i < injector._providers.length; ++i) {\n        res[i] = fn(injector.getProviderAtIndex(i));\n    }\n    return res;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An internal token whose presence in an injector indicates that the injector should treat itself\n * as a root scoped injector when processing requests for unknown tokens which may indicate\n * they are provided in the root scope.\n */\nvar APP_ROOT = new InjectionToken('The presence of this token marks an injector as being the root injector.');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a new `Injector` which is configured using `InjectorType`s.\n *\n * @experimental\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction isFunction(x) {\n    return typeof x === 'function';\n}\n\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\n/**\n * The global configuration object for RxJS, used to configure things\n * like what Promise contructor should used to create Promises\n */\nvar config = {\n    /**\n     * The promise constructor used by default for methods such as\n     * {@link toPromise} and {@link forEach}\n     */\n    Promise: undefined,\n    /**\n     * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n     * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n     * call in a try/catch block. It also enables producer interference, a nasty bug\n     * where a multicast can be broken for all observers by a downstream consumer with\n     * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BY TIME\n     * FOR MIGRATION REASONS.\n     */\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = new Error();\n            console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n\n/**\n * Throws an error on another job so that it's picked up by the runtime's\n * uncaught error handling mechanism.\n * @param err the error to throw\n */\nfunction hostReportError(err) {\n    setTimeout(function () { throw err; });\n}\n\nvar empty$1 = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n\nvar isArray = Array.isArray || (function (x) { return x && typeof x.length === 'number'; });\n\nfunction isObject(x) {\n    return x != null && typeof x === 'object';\n}\n\n// typeof any so that it we don't have to cast when comparing a result to the error object\nvar errorObject = { e: {} };\n\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        return tryCatchTarget.apply(this, arguments);\n    }\n    catch (e) {\n        errorObject.e = e;\n        return errorObject;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar __extends$2 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nvar UnsubscriptionError = /** @class */ (function (_super) {\n    __extends$2(UnsubscriptionError, _super);\n    function UnsubscriptionError(errors) {\n        var _this = _super.call(this, errors ?\n            errors.length + \" errors occurred during unsubscription:\\n  \" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '') || this;\n        _this.errors = errors;\n        _this.name = 'UnsubscriptionError';\n        Object.setPrototypeOf(_this, UnsubscriptionError.prototype);\n        return _this;\n    }\n    return UnsubscriptionError;\n}(Error));\n\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nvar Subscription = /** @class */ (function () {\n    /**\n     * @param {function(): void} [unsubscribe] A function describing how to\n     * perform the disposal of resources when the `unsubscribe` method is called.\n     */\n    function Subscription(unsubscribe) {\n        /**\n         * A flag to indicate whether this Subscription has already been unsubscribed.\n         * @type {boolean}\n         */\n        this.closed = false;\n        /** @internal */\n        this._parent = null;\n        /** @internal */\n        this._parents = null;\n        /** @internal */\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    /**\n     * Disposes the resources held by the subscription. May, for instance, cancel\n     * an ongoing Observable execution or cancel any other type of work that\n     * started when the Subscription was created.\n     * @return {void}\n     */\n    Subscription.prototype.unsubscribe = function () {\n        var hasErrors = false;\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parent = _a._parent, _parents = _a._parents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parent = null;\n        this._parents = null;\n        // null out _subscriptions first so any child subscriptions that attempt\n        // to remove themselves from this subscription will noop\n        this._subscriptions = null;\n        var index = -1;\n        var len = _parents ? _parents.length : 0;\n        // if this._parent is null, then so is this._parents, and we\n        // don't have to remove ourselves from any parent subscriptions.\n        while (_parent) {\n            _parent.remove(this);\n            // if this._parents is null or index >= len,\n            // then _parent is set to null, and the loop exits\n            _parent = ++index < len && _parents[index] || null;\n        }\n        if (isFunction(_unsubscribe)) {\n            var trial = tryCatch(_unsubscribe).call(this);\n            if (trial === errorObject) {\n                hasErrors = true;\n                errors = errors || (errorObject.e instanceof UnsubscriptionError ?\n                    flattenUnsubscriptionErrors(errorObject.e.errors) : [errorObject.e]);\n            }\n        }\n        if (isArray(_subscriptions)) {\n            index = -1;\n            len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    var trial = tryCatch(sub.unsubscribe).call(sub);\n                    if (trial === errorObject) {\n                        hasErrors = true;\n                        errors = errors || [];\n                        var err = errorObject.e;\n                        if (err instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(err.errors));\n                        }\n                        else {\n                            errors.push(err);\n                        }\n                    }\n                }\n            }\n        }\n        if (hasErrors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    /**\n     * Adds a tear down to be called during the unsubscribe() of this\n     * Subscription.\n     *\n     * If the tear down being added is a subscription that is already\n     * unsubscribed, is the same reference `add` is being called on, or is\n     * `Subscription.EMPTY`, it will not be added.\n     *\n     * If this subscription is already in an `closed` state, the passed\n     * tear down logic will be executed immediately.\n     *\n     * @param {TeardownLogic} teardown The additional logic to execute on\n     * teardown.\n     * @return {Subscription} Returns the Subscription used or created to be\n     * added to the inner subscriptions list. This Subscription can be used with\n     * `remove()` to remove the passed teardown logic from the inner subscriptions\n     * list.\n     */\n    Subscription.prototype.add = function (teardown) {\n        if (!teardown || (teardown === Subscription.EMPTY)) {\n            return Subscription.EMPTY;\n        }\n        if (teardown === this) {\n            return this;\n        }\n        var subscription = teardown;\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (typeof subscription._addParent !== 'function' /* quack quack */) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default:\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n        }\n        var subscriptions = this._subscriptions || (this._subscriptions = []);\n        subscriptions.push(subscription);\n        subscription._addParent(this);\n        return subscription;\n    };\n    /**\n     * Removes a Subscription from the internal list of subscriptions that will\n     * unsubscribe during the unsubscribe process of this Subscription.\n     * @param {Subscription} subscription The subscription to remove.\n     * @return {void}\n     */\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    /** @internal */\n    Subscription.prototype._addParent = function (parent) {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        if (!_parent || _parent === parent) {\n            // If we don't have a parent, or the new parent is the same as the\n            // current parent, then set this._parent to the new parent.\n            this._parent = parent;\n        }\n        else if (!_parents) {\n            // If there's already one parent, but not multiple, allocate an Array to\n            // store the rest of the parent Subscriptions.\n            this._parents = [parent];\n        }\n        else if (_parents.indexOf(parent) === -1) {\n            // Only add the new parent to the _parents list if it's not already there.\n            _parents.push(parent);\n        }\n    };\n    /** @nocollapse */\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n\nvar rxSubscriber = (typeof Symbol === 'function' && typeof Symbol.for === 'function')\n    ? Symbol.for('rxSubscriber')\n    : '@@rxSubscriber';\n/**\n * @deprecated use rxSubscriber instead\n */\n\nvar __extends$1 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nvar Subscriber = /** @class */ (function (_super) {\n    __extends$1(Subscriber, _super);\n    /**\n     * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n     * defined Observer or a `next` callback function.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     */\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        /** @internal */ _this.syncErrorValue = null;\n        /** @internal */ _this.syncErrorThrown = false;\n        /** @internal */ _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = empty$1;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = empty$1;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    // HACK(benlesh): For situations where Node has multiple copies of rxjs in\n                    // node_modules, we cannot rely on `instanceof` checks\n                    if (isTrustedSubscriber(destinationOrNext)) {\n                        var trustedSubscriber = destinationOrNext[rxSubscriber]();\n                        _this.syncErrorThrowable = trustedSubscriber.syncErrorThrowable;\n                        _this.destination = trustedSubscriber;\n                        trustedSubscriber.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriber] = function () { return this; };\n    /**\n     * A static factory for a Subscriber, given a (potentially partial) definition\n     * of an Observer.\n     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n     * Observer represented by the given arguments.\n     * @nocollapse\n     */\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `next` from\n     * the Observable, with a value. The Observable may call this method 0 or more\n     * times.\n     * @param {T} [value] The `next` value.\n     * @return {void}\n     */\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `error` from\n     * the Observable, with an attached {@link Error}. Notifies the Observer that\n     * the Observable has experienced an error condition.\n     * @param {any} [err] The `error` exception.\n     * @return {void}\n     */\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive a valueless notification of type\n     * `complete` from the Observable. Notifies the Observer that the Observable\n     * has finished sending push-based notifications.\n     * @return {void}\n     */\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        this._parent = null;\n        this._parents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parent = _parent;\n        this._parents = _parents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SafeSubscriber = /** @class */ (function (_super) {\n    __extends$1(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== empty$1) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nfunction isTrustedSubscriber(obj) {\n    return obj instanceof Subscriber || ('syncErrorThrowable' in obj && obj[rxSubscriber]);\n}\n\nfunction toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriber]) {\n            return nextOrObserver[rxSubscriber]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(empty$1);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n\n/** Symbol.observable or a string \"@@observable\". Used for interop */\nvar observable = typeof Symbol === 'function' && Symbol.observable || '@@observable';\n\n/* tslint:disable:no-empty */\nfunction noop$1() { }\n\n/* tslint:enable:max-line-length */\n\n/* @internal */\nfunction pipeFromArray(fns) {\n    if (!fns) {\n        return noop$1;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nvar Observable = /** @class */ (function () {\n    /**\n     * @constructor\n     * @param {Function} subscribe the function that is called when the Observable is\n     * initially subscribed to. This function is given a Subscriber, to which new values\n     * can be `next`ed, or an `error` method can be called to raise an error, or\n     * `complete` can be called to notify of a successful completion.\n     */\n    function Observable(subscribe) {\n        /** Internal implementation detail, do not use directly. */\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    /**\n     * Creates a new Observable, with this Observable as the source, and the passed\n     * operator defined as the new observable's operator.\n     * @method lift\n     * @param {Operator} operator the operator defining the operation to take on the observable\n     * @return {Observable} a new observable with the Operator applied\n     */\n    Observable.prototype.lift = function (operator) {\n        var observable$$1 = new Observable();\n        observable$$1.source = this;\n        observable$$1.operator = operator;\n        return observable$$1;\n    };\n    /**\n     * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n     *\n     * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n     *\n     * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n     * might be for example a function that you passed to a {@link create} static factory, but most of the time it is\n     * a library implementation, which defines what and when will be emitted by an Observable. This means that calling\n     * `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n     * thought.\n     *\n     * Apart from starting the execution of an Observable, this method allows you to listen for values\n     * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n     * following ways.\n     *\n     * The first way is creating an object that implements {@link Observer} interface. It should have methods\n     * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n     * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular do\n     * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n     * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n     * do anything, you can simply omit it. Note however, that if `error` method is not provided, all errors will\n     * be left uncaught.\n     *\n     * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n     * This means you can provide three functions as arguments to `subscribe`, where first function is equivalent\n     * of a `next` method, second of an `error` method and third of a `complete` method. Just as in case of Observer,\n     * if you do not need to listen for something, you can omit a function, preferably by passing `undefined` or `null`,\n     * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n     * to `error` function, just as before, if not provided, errors emitted by an Observable will be thrown.\n     *\n     * Whatever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n     * This object allows you to call `unsubscribe` on it, which in turn will stop work that an Observable does and will clean\n     * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n     * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n     *\n     * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n     * It is an Observable itself that decides when these functions will be called. For example {@link of}\n     * by default emits all its values synchronously. Always check documentation for how given Observable\n     * will behave when subscribed and if its default behavior can be modified with a {@link Scheduler}.\n     *\n     * @example <caption>Subscribe with an Observer</caption>\n     * const sumObserver = {\n     *   sum: 0,\n     *   next(value) {\n     *     console.log('Adding: ' + value);\n     *     this.sum = this.sum + value;\n     *   },\n     *   error() { // We actually could just remove this method,\n     *   },        // since we do not really care about errors right now.\n     *   complete() {\n     *     console.log('Sum equals: ' + this.sum);\n     *   }\n     * };\n     *\n     * Rx.Observable.of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n     * .subscribe(sumObserver);\n     *\n     * // Logs:\n     * // \"Adding: 1\"\n     * // \"Adding: 2\"\n     * // \"Adding: 3\"\n     * // \"Sum equals: 6\"\n     *\n     *\n     * @example <caption>Subscribe with functions</caption>\n     * let sum = 0;\n     *\n     * Rx.Observable.of(1, 2, 3)\n     * .subscribe(\n     *   function(value) {\n     *     console.log('Adding: ' + value);\n     *     sum = sum + value;\n     *   },\n     *   undefined,\n     *   function() {\n     *     console.log('Sum equals: ' + sum);\n     *   }\n     * );\n     *\n     * // Logs:\n     * // \"Adding: 1\"\n     * // \"Adding: 2\"\n     * // \"Adding: 3\"\n     * // \"Sum equals: 6\"\n     *\n     *\n     * @example <caption>Cancel a subscription</caption>\n     * const subscription = Rx.Observable.interval(1000).subscribe(\n     *   num => console.log(num),\n     *   undefined,\n     *   () => console.log('completed!') // Will not be called, even\n     * );                                // when cancelling subscription\n     *\n     *\n     * setTimeout(() => {\n     *   subscription.unsubscribe();\n     *   console.log('unsubscribed!');\n     * }, 2500);\n     *\n     * // Logs:\n     * // 0 after 1s\n     * // 1 after 2s\n     * // \"unsubscribed!\" after 2.5s\n     *\n     *\n     * @param {Observer|Function} observerOrNext (optional) Either an observer with methods to be called,\n     *  or the first of three possible handlers, which is the handler for each value emitted from the subscribed\n     *  Observable.\n     * @param {Function} error (optional) A handler for a terminal event resulting from an error. If no error handler is provided,\n     *  the error will be thrown as unhandled.\n     * @param {Function} complete (optional) A handler for a terminal event resulting from successful completion.\n     * @return {ISubscription} a subscription reference to the registered handlers\n     * @method subscribe\n     */\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            operator.call(sink, this.source);\n        }\n        else {\n            sink.add(this.source || !sink.syncErrorThrowable ? this._subscribe(sink) : this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            sink.error(err);\n        }\n    };\n    /**\n     * @method forEach\n     * @param {Function} next a handler for each value emitted by the observable\n     * @param {PromiseConstructor} [promiseCtor] a constructor function used to instantiate the Promise\n     * @return {Promise} a promise that either resolves on observable completion or\n     *  rejects with the handled error\n     */\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            // Must be declared in a separate statement to avoid a RefernceError when\n            // accessing subscription below in the closure due to Temporal Dead Zone.\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    /**\n     * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n     * @method Symbol.observable\n     * @return {Observable} this instance of the observable\n     */\n    Observable.prototype[observable] = function () {\n        return this;\n    };\n    /* tslint:enable:max-line-length */\n    /**\n     * Used to stitch together functional operators into a chain.\n     * @method pipe\n     * @return {Observable} the Observable result of all of the operators having\n     * been called in the order they were passed in.\n     *\n     * @example\n     *\n     * import { map, filter, scan } from 'rxjs/operators';\n     *\n     * Rx.Observable.interval(1000)\n     *   .pipe(\n     *     filter(x => x % 2 === 0),\n     *     map(x => x + x),\n     *     scan((acc, x) => acc + x)\n     *   )\n     *   .subscribe(x => console.log(x))\n     */\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    /* tslint:enable:max-line-length */\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    // HACK: Since TypeScript inherits static properties too, we have to\n    // fight against TypeScript here so Subject can have a different static create signature\n    /**\n     * Creates a new cold Observable by calling the Observable constructor\n     * @static true\n     * @owner Observable\n     * @method create\n     * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n     * @return {Observable} a new cold observable\n     * @nocollapse\n     */\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\n/**\n * Decides between a passed promise constructor from consuming code,\n * A default configured promise constructor, and the native promise\n * constructor and returns it. If nothing can be found, it will throw\n * an error.\n * @param promiseCtor The optional promise constructor to passed by consuming code\n */\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n\nvar __extends$5 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nvar ObjectUnsubscribedError = /** @class */ (function (_super) {\n    __extends$5(ObjectUnsubscribedError, _super);\n    function ObjectUnsubscribedError() {\n        var _this = _super.call(this, 'object unsubscribed') || this;\n        _this.name = 'ObjectUnsubscribedError';\n        Object.setPrototypeOf(_this, ObjectUnsubscribedError.prototype);\n        return _this;\n    }\n    return ObjectUnsubscribedError;\n}(Error));\n\nvar __extends$6 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SubjectSubscription = /** @class */ (function (_super) {\n    __extends$6(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\n\nvar __extends$4 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class SubjectSubscriber<T>\n */\nvar SubjectSubscriber = /** @class */ (function (_super) {\n    __extends$4(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\n/**\n * @class Subject<T>\n */\nvar Subject = /** @class */ (function (_super) {\n    __extends$4(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriber] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    /**@nocollapse */\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\n/**\n * @class AnonymousSubject<T>\n */\nvar AnonymousSubject = /** @class */ (function (_super) {\n    __extends$4(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\n\nvar __extends$7 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nfunction refCount() {\n    return function refCountOperatorFunction(source) {\n        return source.lift(new RefCountOperator$1(source));\n    };\n}\nvar RefCountOperator$1 = /** @class */ (function () {\n    function RefCountOperator(connectable) {\n        this.connectable = connectable;\n    }\n    RefCountOperator.prototype.call = function (subscriber, source) {\n        var connectable = this.connectable;\n        connectable._refCount++;\n        var refCounter = new RefCountSubscriber$1(subscriber, connectable);\n        var subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    };\n    return RefCountOperator;\n}());\nvar RefCountSubscriber$1 = /** @class */ (function (_super) {\n    __extends$7(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        ///\n        // Compare the local RefCountSubscriber's connection Subscription to the\n        // connection Subscription on the shared ConnectableObservable. In cases\n        // where the ConnectableObservable source synchronously emits values, and\n        // the RefCountSubscriber's downstream Observers synchronously unsubscribe,\n        // execution continues to here before the RefCountOperator has a chance to\n        // supply the RefCountSubscriber with the shared connection Subscription.\n        // For example:\n        // ```\n        // Observable.range(0, 10)\n        //   .publish()\n        //   .refCount()\n        //   .take(5)\n        //   .subscribe();\n        // ```\n        // In order to account for this case, RefCountSubscriber should only dispose\n        // the ConnectableObservable's shared connection Subscription if the\n        // connection Subscription exists, *and* either:\n        //   a. RefCountSubscriber doesn't have a reference to the shared connection\n        //      Subscription yet, or,\n        //   b. RefCountSubscriber's connection Subscription reference is identical\n        //      to the shared connection Subscription\n        ///\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n\nvar __extends$3 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class ConnectableObservable<T>\n */\nvar ConnectableObservable = /** @class */ (function (_super) {\n    __extends$3(ConnectableObservable, _super);\n    function ConnectableObservable(source, subjectFactory) {\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.subjectFactory = subjectFactory;\n        _this._refCount = 0;\n        /** @internal */\n        _this._isComplete = false;\n        return _this;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    ConnectableObservable.prototype._subscribe = function (subscriber) {\n        return this.getSubject().subscribe(subscriber);\n    };\n    ConnectableObservable.prototype.getSubject = function () {\n        var subject = this._subject;\n        if (!subject || subject.isStopped) {\n            this._subject = this.subjectFactory();\n        }\n        return this._subject;\n    };\n    ConnectableObservable.prototype.connect = function () {\n        var connection = this._connection;\n        if (!connection) {\n            this._isComplete = false;\n            connection = this._connection = new Subscription();\n            connection.add(this.source\n                .subscribe(new ConnectableSubscriber(this.getSubject(), this)));\n            if (connection.closed) {\n                this._connection = null;\n                connection = Subscription.EMPTY;\n            }\n            else {\n                this._connection = connection;\n            }\n        }\n        return connection;\n    };\n    ConnectableObservable.prototype.refCount = function () {\n        return refCount()(this);\n    };\n    return ConnectableObservable;\n}(Observable));\nvar connectableProto = ConnectableObservable.prototype;\nvar connectableObservableDescriptor = {\n    operator: { value: null },\n    _refCount: { value: 0, writable: true },\n    _subject: { value: null, writable: true },\n    _connection: { value: null, writable: true },\n    _subscribe: { value: connectableProto._subscribe },\n    _isComplete: { value: connectableProto._isComplete, writable: true },\n    getSubject: { value: connectableProto.getSubject },\n    connect: { value: connectableProto.connect },\n    refCount: { value: connectableProto.refCount }\n};\nvar ConnectableSubscriber = /** @class */ (function (_super) {\n    __extends$3(ConnectableSubscriber, _super);\n    function ConnectableSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    ConnectableSubscriber.prototype._error = function (err) {\n        this._unsubscribe();\n        _super.prototype._error.call(this, err);\n    };\n    ConnectableSubscriber.prototype._complete = function () {\n        this.connectable._isComplete = true;\n        this._unsubscribe();\n        _super.prototype._complete.call(this);\n    };\n    ConnectableSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (connectable) {\n            this.connectable = null;\n            var connection = connectable._connection;\n            connectable._refCount = 0;\n            connectable._subject = null;\n            connectable._connection = null;\n            if (connection) {\n                connection.unsubscribe();\n            }\n        }\n    };\n    return ConnectableSubscriber;\n}(SubjectSubscriber));\nvar RefCountSubscriber = /** @class */ (function (_super) {\n    __extends$3(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount$$1 = connectable._refCount;\n        if (refCount$$1 <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount$$1 - 1;\n        if (refCount$$1 > 1) {\n            this.connection = null;\n            return;\n        }\n        ///\n        // Compare the local RefCountSubscriber's connection Subscription to the\n        // connection Subscription on the shared ConnectableObservable. In cases\n        // where the ConnectableObservable source synchronously emits values, and\n        // the RefCountSubscriber's downstream Observers synchronously unsubscribe,\n        // execution continues to here before the RefCountOperator has a chance to\n        // supply the RefCountSubscriber with the shared connection Subscription.\n        // For example:\n        // ```\n        // Observable.range(0, 10)\n        //   .publish()\n        //   .refCount()\n        //   .take(5)\n        //   .subscribe();\n        // ```\n        // In order to account for this case, RefCountSubscriber should only dispose\n        // the ConnectableObservable's shared connection Subscription if the\n        // connection Subscription exists, *and* either:\n        //   a. RefCountSubscriber doesn't have a reference to the shared connection\n        //      Subscription yet, or,\n        //   b. RefCountSubscriber's connection Subscription reference is identical\n        //      to the shared connection Subscription\n        ///\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n\nvar __extends$8 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Groups the items emitted by an Observable according to a specified criterion,\n * and emits these grouped items as `GroupedObservables`, one\n * {@link GroupedObservable} per group.\n *\n * <img src=\"./img/groupBy.png\" width=\"100%\">\n *\n * @example <caption>Group objects by id and return as array</caption>\n * Observable.of<Obj>({id: 1, name: 'aze1'},\n *                    {id: 2, name: 'sf2'},\n *                    {id: 2, name: 'dg2'},\n *                    {id: 1, name: 'erg1'},\n *                    {id: 1, name: 'df1'},\n *                    {id: 2, name: 'sfqfb2'},\n *                    {id: 3, name: 'qfs3'},\n *                    {id: 2, name: 'qsgqsfg2'}\n *     )\n *     .groupBy(p => p.id)\n *     .flatMap( (group$) => group$.reduce((acc, cur) => [...acc, cur], []))\n *     .subscribe(p => console.log(p));\n *\n * // displays:\n * // [ { id: 1, name: 'aze1' },\n * //   { id: 1, name: 'erg1' },\n * //   { id: 1, name: 'df1' } ]\n * //\n * // [ { id: 2, name: 'sf2' },\n * //   { id: 2, name: 'dg2' },\n * //   { id: 2, name: 'sfqfb2' },\n * //   { id: 2, name: 'qsgqsfg2' } ]\n * //\n * // [ { id: 3, name: 'qfs3' } ]\n *\n * @example <caption>Pivot data on the id field</caption>\n * Observable.of<Obj>({id: 1, name: 'aze1'},\n *                    {id: 2, name: 'sf2'},\n *                    {id: 2, name: 'dg2'},\n *                    {id: 1, name: 'erg1'},\n *                    {id: 1, name: 'df1'},\n *                    {id: 2, name: 'sfqfb2'},\n *                    {id: 3, name: 'qfs1'},\n *                    {id: 2, name: 'qsgqsfg2'}\n *                   )\n *     .groupBy(p => p.id, p => p.name)\n *     .flatMap( (group$) => group$.reduce((acc, cur) => [...acc, cur], [\"\" + group$.key]))\n *     .map(arr => ({'id': parseInt(arr[0]), 'values': arr.slice(1)}))\n *     .subscribe(p => console.log(p));\n *\n * // displays:\n * // { id: 1, values: [ 'aze1', 'erg1', 'df1' ] }\n * // { id: 2, values: [ 'sf2', 'dg2', 'sfqfb2', 'qsgqsfg2' ] }\n * // { id: 3, values: [ 'qfs1' ] }\n *\n * @param {function(value: T): K} keySelector A function that extracts the key\n * for each item.\n * @param {function(value: T): R} [elementSelector] A function that extracts the\n * return element for each item.\n * @param {function(grouped: GroupedObservable<K,R>): Observable<any>} [durationSelector]\n * A function that returns an Observable to determine how long each group should\n * exist.\n * @return {Observable<GroupedObservable<K,R>>} An Observable that emits\n * GroupedObservables, each of which corresponds to a unique key value and each\n * of which emits those items from the source Observable that share that key\n * value.\n * @method groupBy\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar GroupBySubscriber = /** @class */ (function (_super) {\n    __extends$8(GroupBySubscriber, _super);\n    function GroupBySubscriber(destination, keySelector, elementSelector, durationSelector, subjectSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.elementSelector = elementSelector;\n        _this.durationSelector = durationSelector;\n        _this.subjectSelector = subjectSelector;\n        _this.groups = null;\n        _this.attemptedToUnsubscribe = false;\n        _this.count = 0;\n        return _this;\n    }\n    GroupBySubscriber.prototype._next = function (value) {\n        var key;\n        try {\n            key = this.keySelector(value);\n        }\n        catch (err) {\n            this.error(err);\n            return;\n        }\n        this._group(value, key);\n    };\n    GroupBySubscriber.prototype._group = function (value, key) {\n        var groups = this.groups;\n        if (!groups) {\n            groups = this.groups = new Map();\n        }\n        var group = groups.get(key);\n        var element;\n        if (this.elementSelector) {\n            try {\n                element = this.elementSelector(value);\n            }\n            catch (err) {\n                this.error(err);\n            }\n        }\n        else {\n            element = value;\n        }\n        if (!group) {\n            group = (this.subjectSelector ? this.subjectSelector() : new Subject());\n            groups.set(key, group);\n            var groupedObservable = new GroupedObservable(key, group, this);\n            this.destination.next(groupedObservable);\n            if (this.durationSelector) {\n                var duration = void 0;\n                try {\n                    duration = this.durationSelector(new GroupedObservable(key, group));\n                }\n                catch (err) {\n                    this.error(err);\n                    return;\n                }\n                this.add(duration.subscribe(new GroupDurationSubscriber(key, group, this)));\n            }\n        }\n        if (!group.closed) {\n            group.next(element);\n        }\n    };\n    GroupBySubscriber.prototype._error = function (err) {\n        var groups = this.groups;\n        if (groups) {\n            groups.forEach(function (group, key) {\n                group.error(err);\n            });\n            groups.clear();\n        }\n        this.destination.error(err);\n    };\n    GroupBySubscriber.prototype._complete = function () {\n        var groups = this.groups;\n        if (groups) {\n            groups.forEach(function (group, key) {\n                group.complete();\n            });\n            groups.clear();\n        }\n        this.destination.complete();\n    };\n    GroupBySubscriber.prototype.removeGroup = function (key) {\n        this.groups.delete(key);\n    };\n    GroupBySubscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.attemptedToUnsubscribe = true;\n            if (this.count === 0) {\n                _super.prototype.unsubscribe.call(this);\n            }\n        }\n    };\n    return GroupBySubscriber;\n}(Subscriber));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar GroupDurationSubscriber = /** @class */ (function (_super) {\n    __extends$8(GroupDurationSubscriber, _super);\n    function GroupDurationSubscriber(key, group, parent) {\n        var _this = _super.call(this, group) || this;\n        _this.key = key;\n        _this.group = group;\n        _this.parent = parent;\n        return _this;\n    }\n    GroupDurationSubscriber.prototype._next = function (value) {\n        this.complete();\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    GroupDurationSubscriber.prototype._unsubscribe = function () {\n        var _a = this, parent = _a.parent, key = _a.key;\n        this.key = this.parent = null;\n        if (parent) {\n            parent.removeGroup(key);\n        }\n    };\n    return GroupDurationSubscriber;\n}(Subscriber));\n/**\n * An Observable representing values belonging to the same group represented by\n * a common key. The values emitted by a GroupedObservable come from the source\n * Observable. The common key is available as the field `key` on a\n * GroupedObservable instance.\n *\n * @class GroupedObservable<K, T>\n */\nvar GroupedObservable = /** @class */ (function (_super) {\n    __extends$8(GroupedObservable, _super);\n    /** @deprecated Do not construct this type. Internal use only */\n    function GroupedObservable(key, groupSubject, refCountSubscription) {\n        var _this = _super.call(this) || this;\n        _this.key = key;\n        _this.groupSubject = groupSubject;\n        _this.refCountSubscription = refCountSubscription;\n        return _this;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    GroupedObservable.prototype._subscribe = function (subscriber) {\n        var subscription = new Subscription();\n        var _a = this, refCountSubscription = _a.refCountSubscription, groupSubject = _a.groupSubject;\n        if (refCountSubscription && !refCountSubscription.closed) {\n            subscription.add(new InnerRefCountSubscription(refCountSubscription));\n        }\n        subscription.add(groupSubject.subscribe(subscriber));\n        return subscription;\n    };\n    return GroupedObservable;\n}(Observable));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar InnerRefCountSubscription = /** @class */ (function (_super) {\n    __extends$8(InnerRefCountSubscription, _super);\n    function InnerRefCountSubscription(parent) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        parent.count++;\n        return _this;\n    }\n    InnerRefCountSubscription.prototype.unsubscribe = function () {\n        var parent = this.parent;\n        if (!parent.closed && !this.closed) {\n            _super.prototype.unsubscribe.call(this);\n            parent.count -= 1;\n            if (parent.count === 0 && parent.attemptedToUnsubscribe) {\n                parent.unsubscribe();\n            }\n        }\n    };\n    return InnerRefCountSubscription;\n}(Subscription));\n\nvar __extends$9 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class BehaviorSubject<T>\n */\nvar BehaviorSubject = /** @class */ (function (_super) {\n    __extends$9(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @deprecated This is an internal implementation detail, do not use. */\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        if (subscription && !subscription.closed) {\n            subscriber.next(this._value);\n        }\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        if (this.hasError) {\n            throw this.thrownError;\n        }\n        else if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return this._value;\n        }\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, this._value = value);\n    };\n    return BehaviorSubject;\n}(Subject));\n\nvar __extends$13 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * A unit of work to be executed in a {@link Scheduler}. An action is typically\n * created from within a Scheduler and an RxJS user does not need to concern\n * themselves about creating and manipulating an Action.\n *\n * ```ts\n * class Action<T> extends Subscription {\n *   new (scheduler: Scheduler, work: (state?: T) => void);\n *   schedule(state?: T, delay: number = 0): Subscription;\n * }\n * ```\n *\n * @class Action<T>\n */\nvar Action = /** @class */ (function (_super) {\n    __extends$13(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    /**\n     * Schedules this action on its parent Scheduler for execution. May be passed\n     * some context object, `state`. May happen at some point in the future,\n     * according to the `delay` parameter, if specified.\n     * @param {T} [state] Some contextual data that the `work` function uses when\n     * called by the Scheduler.\n     * @param {number} [delay] Time to wait before executing the work, where the\n     * time unit is implicit and defined by the Scheduler.\n     * @return {void}\n     */\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        return this;\n    };\n    return Action;\n}(Subscription));\n\nvar __extends$12 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AsyncAction = /** @class */ (function (_super) {\n    __extends$12(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (this.closed) {\n            return this;\n        }\n        // Always replace the current state with the new state.\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        //\n        // Important implementation note:\n        //\n        // Actions only execute once by default, unless rescheduled from within the\n        // scheduled callback. This allows us to implement single and repeat\n        // actions via the same code path, without adding API surface area, as well\n        // as mimic traditional recursion but across asynchronous boundaries.\n        //\n        // However, JS runtimes and timers distinguish between intervals achieved by\n        // serial `setTimeout` calls vs. a single `setInterval` call. An interval of\n        // serial `setTimeout` calls can be individually delayed, which delays\n        // scheduling the next `setTimeout`, and so on. `setInterval` attempts to\n        // guarantee the interval callback will be invoked more precisely to the\n        // interval period, regardless of load.\n        //\n        // Therefore, we use `setInterval` to schedule single and repeat actions.\n        // If the action reschedules itself with the same delay, the interval is not\n        // canceled. If the action doesn't reschedule, or reschedules with a\n        // different delay, the interval will be canceled after scheduled callback\n        // execution.\n        //\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        // Set the pending flag indicating that this action has been scheduled, or\n        // has recursively rescheduled itself.\n        this.pending = true;\n        this.delay = delay;\n        // If this action has already an async Id, don't request a new one.\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If this action is rescheduled with the same delay time, don't clear the interval id.\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        // Otherwise, if the action's delay time is different from the current delay,\n        // or the action has been rescheduled before it's executed, clear the interval id\n        return clearInterval(id) && undefined || undefined;\n    };\n    /**\n     * Immediately executes this action and the `work` it contains.\n     * @return {any}\n     */\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            // Dequeue if the action didn't reschedule itself. Don't call\n            // unsubscribe(), because the action could reschedule later.\n            // For example:\n            // ```\n            // scheduler.schedule(function doWork(counter) {\n            //   /* ... I'm a busy worker bee ... */\n            //   var originalAction = this;\n            //   /* wait 100ms before rescheduling the action */\n            //   setTimeout(function () {\n            //     originalAction.schedule(counter + 1);\n            //   }, 100);\n            // }, 1000);\n            // ```\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action));\n\nvar __extends$11 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar QueueAction = /** @class */ (function (_super) {\n    __extends$11(QueueAction, _super);\n    function QueueAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    QueueAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (delay > 0) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.delay = delay;\n        this.state = state;\n        this.scheduler.flush(this);\n        return this;\n    };\n    QueueAction.prototype.execute = function (state, delay) {\n        return (delay > 0 || this.closed) ?\n            _super.prototype.execute.call(this, state, delay) :\n            this._execute(state, delay);\n    };\n    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay exists and is greater than 0, or if the delay is null (the\n        // action wasn't rescheduled) but was originally scheduled as an async\n        // action, then recycle as an async action.\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        // Otherwise flush the scheduler starting with this action.\n        return scheduler.flush(this);\n    };\n    return QueueAction;\n}(AsyncAction));\n\n/**\n * An execution context and a data structure to order tasks and schedule their\n * execution. Provides a notion of (potentially virtual) time, through the\n * `now()` getter method.\n *\n * Each unit of work in a Scheduler is called an {@link Action}.\n *\n * ```ts\n * class Scheduler {\n *   now(): number;\n *   schedule(work, delay?, state?): Subscription;\n * }\n * ```\n *\n * @class Scheduler\n * @deprecated Scheduler is an internal implementation detail of RxJS, and\n * should not be used directly. Rather, create your own class and implement\n * {@link SchedulerLike}\n */\nvar Scheduler = /** @class */ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) { now = Scheduler.now; }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    /**\n     * Schedules a function, `work`, for execution. May happen at some point in\n     * the future, according to the `delay` parameter, if specified. May be passed\n     * some context object, `state`, which will be passed to the `work` function.\n     *\n     * The given arguments will be processed an stored as an Action object in a\n     * queue of actions.\n     *\n     * @param {function(state: ?T): ?Subscription} work A function representing a\n     * task, or some unit of work to be executed by the Scheduler.\n     * @param {number} [delay] Time to wait before executing the work, where the\n     * time unit is implicit and defined by the Scheduler itself.\n     * @param {T} [state] Some contextual data that the `work` function uses when\n     * called by the Scheduler.\n     * @return {Subscription} A subscription in order to be able to unsubscribe\n     * the scheduled work.\n     */\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) { delay = 0; }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    /** @nocollapse */\n    Scheduler.now = Date.now ? Date.now : function () { return +new Date(); };\n    return Scheduler;\n}());\n\nvar __extends$15 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar AsyncScheduler = /** @class */ (function (_super) {\n    __extends$15(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) { now = Scheduler.now; }\n        var _this = _super.call(this, SchedulerAction, function () {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        }) || this;\n        _this.actions = [];\n        /**\n         * A flag to indicate whether the Scheduler is currently executing a batch of\n         * queued actions.\n         * @type {boolean}\n         */\n        _this.active = false;\n        /**\n         * An internal ID used to track the latest asynchronous task such as those\n         * coming from `setTimeout`, `setInterval`, `requestAnimationFrame`, and\n         * others.\n         * @type {any}\n         */\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) { delay = 0; }\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return _super.prototype.schedule.call(this, work, delay, state);\n        }\n    };\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift()); // exhaust the scheduler queue\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\n\nvar __extends$14 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar QueueScheduler = /** @class */ (function (_super) {\n    __extends$14(QueueScheduler, _super);\n    function QueueScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QueueScheduler;\n}(AsyncScheduler));\n\n/**\n *\n * Queue Scheduler\n *\n * <span class=\"informal\">Put every next task on a queue, instead of executing it immediately</span>\n *\n * `queue` scheduler, when used with delay, behaves the same as {@link async} scheduler.\n *\n * When used without delay, it schedules given task synchronously - executes it right when\n * it is scheduled. However when called recursively, that is when inside the scheduled task,\n * another task is scheduled with queue scheduler, instead of executing immediately as well,\n * that task will be put on a queue and wait for current one to finish.\n *\n * This means that when you execute task with `queue` scheduler, you are sure it will end\n * before any other task scheduled with that scheduler will start.\n *\n * @examples <caption>Schedule recursively first, then do something</caption>\n *\n * Rx.Scheduler.queue.schedule(() => {\n *   Rx.Scheduler.queue.schedule(() => console.log('second')); // will not happen now, but will be put on a queue\n *\n *   console.log('first');\n * });\n *\n * // Logs:\n * // \"first\"\n * // \"second\"\n *\n *\n * @example <caption>Reschedule itself recursively</caption>\n *\n * Rx.Scheduler.queue.schedule(function(state) {\n *   if (state !== 0) {\n *     console.log('before', state);\n *     this.schedule(state - 1); // `this` references currently executing Action,\n *                               // which we reschedule with new state\n *     console.log('after', state);\n *   }\n * }, 0, 3);\n *\n * // In scheduler that runs recursively, you would expect:\n * // \"before\", 3\n * // \"before\", 2\n * // \"before\", 1\n * // \"after\", 1\n * // \"after\", 2\n * // \"after\", 3\n *\n * // But with queue it logs:\n * // \"before\", 3\n * // \"after\", 3\n * // \"before\", 2\n * // \"after\", 2\n * // \"before\", 1\n * // \"after\", 1\n *\n *\n * @static true\n * @name queue\n * @owner Scheduler\n */\nvar queue = new QueueScheduler(QueueAction);\n\n/**\n * The same Observable instance returned by any call to {@link empty} without a\n * {@link Scheduler}. It is preferrable to use this over `empty()`.\n */\nvar EMPTY$1 = new Observable(function (subscriber) { return subscriber.complete(); });\n/**\n * Creates an Observable that emits no items to the Observer and immediately\n * emits a complete notification.\n *\n * <span class=\"informal\">Just emits 'complete', and nothing else.\n * </span>\n *\n * <img src=\"./img/empty.png\" width=\"100%\">\n *\n * This static operator is useful for creating a simple Observable that only\n * emits the complete notification. It can be used for composing with other\n * Observables, such as in a {@link mergeMap}.\n *\n * @example <caption>Emit the number 7, then complete.</caption>\n * var result = Rx.Observable.empty().startWith(7);\n * result.subscribe(x => console.log(x));\n *\n * @example <caption>Map and flatten only odd numbers to the sequence 'a', 'b', 'c'</caption>\n * var interval = Rx.Observable.interval(1000);\n * var result = interval.mergeMap(x =>\n *   x % 2 === 1 ? Rx.Observable.of('a', 'b', 'c') : Rx.Observable.empty()\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following to the console:\n * // x is equal to the count on the interval eg(0,1,2,3,...)\n * // x will occur every 1000ms\n * // if x % 2 is equal to 1 print abc\n * // if x % 2 is not equal to 1 nothing will be output\n *\n * @see {@link create}\n * @see {@link never}\n * @see {@link of}\n * @see {@link throw}\n *\n * @param {Scheduler} [scheduler] A {@link IScheduler} to use for scheduling\n * the emission of the complete notification.\n * @return {Observable} An \"empty\" Observable: emits only the complete\n * notification.\n * @static true\n * @name empty\n * @owner Observable\n * @deprecated Deprecated in favor of using EMPTY constant.\n */\nfunction empty$2(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY$1;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n\nfunction isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n\n/**\n * Subscribes to an ArrayLike with a subscriber\n * @param array The array or array-like to subscribe to\n */\nvar subscribeToArray = function (array) { return function (subscriber) {\n    for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n        subscriber.next(array[i]);\n    }\n    if (!subscriber.closed) {\n        subscriber.complete();\n    }\n}; };\n\nfunction fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToArray(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            var i = 0;\n            sub.add(scheduler.schedule(function () {\n                if (i === input.length) {\n                    subscriber.complete();\n                    return;\n                }\n                subscriber.next(input[i++]);\n                if (!subscriber.closed) {\n                    sub.add(this.schedule());\n                }\n            }));\n            return sub;\n        });\n    }\n}\n\nfunction scalar(value) {\n    var result = new Observable(function (subscriber) {\n        subscriber.next(value);\n        subscriber.complete();\n    });\n    result._isScalar = true;\n    result.value = value;\n    return result;\n}\n\nfunction of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = args[args.length - 1];\n    if (isScheduler(scheduler)) {\n        args.pop();\n    }\n    else {\n        scheduler = undefined;\n    }\n    switch (args.length) {\n        case 0:\n            return empty$2(scheduler);\n        case 1:\n            return scheduler ? fromArray(args, scheduler) : scalar(args[0]);\n        default:\n            return fromArray(args, scheduler);\n    }\n}\n\n/**\n * Creates an Observable that emits no items to the Observer and immediately\n * emits an error notification.\n *\n * <span class=\"informal\">Just emits 'error', and nothing else.\n * </span>\n *\n * <img src=\"./img/throw.png\" width=\"100%\">\n *\n * This static operator is useful for creating a simple Observable that only\n * emits the error notification. It can be used for composing with other\n * Observables, such as in a {@link mergeMap}.\n *\n * @example <caption>Emit the number 7, then emit an error.</caption>\n * import { throwError, concat, of } from 'rxjs/create';\n *\n * const result = concat(of(7), throwError(new Error('oops!')));\n * result.subscribe(x => console.log(x), e => console.error(e));\n *\n * @example <caption>Map and flatten numbers to the sequence 'a', 'b', 'c', but throw an error for 13</caption>\n * import { throwError, interval, of } from 'rxjs/create';\n * import { mergeMap } from 'rxjs/operators';\n *\n * interval(1000).pipe(\n *   mergeMap(x => x === 13 ?\n *     throwError('Thirteens are bad') :\n *     of('a', 'b', 'c')\n *   )\n * ).subscribe(x => console.log(x), e => console.error(e));\n *\n * @see {@link create}\n * @see {@link empty}\n * @see {@link never}\n * @see {@link of}\n *\n * @param {any} error The particular Error to pass to the error notification.\n * @param {Scheduler} [scheduler] A {@link IScheduler} to use for scheduling\n * the emission of the error notification.\n * @return {Observable} An error Observable: emits only the error notification\n * using the given error argument.\n * @static true\n * @name throw\n * @owner Observable\n */\nfunction throwError(error, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) { return subscriber.error(error); });\n    }\n    else {\n        return new Observable(function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });\n    }\n}\nfunction dispatch(_a) {\n    var error = _a.error, subscriber = _a.subscriber;\n    subscriber.error(error);\n}\n\n/**\n * Represents a push-based event or value that an {@link Observable} can emit.\n * This class is particularly useful for operators that manage notifications,\n * like {@link materialize}, {@link dematerialize}, {@link observeOn}, and\n * others. Besides wrapping the actual delivered value, it also annotates it\n * with metadata of, for instance, what type of push message it is (`next`,\n * `error`, or `complete`).\n *\n * @see {@link materialize}\n * @see {@link dematerialize}\n * @see {@link observeOn}\n *\n * @class Notification<T>\n */\nvar Notification = /** @class */ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === 'N';\n    }\n    /**\n     * Delivers to the given `observer` the value wrapped by this Notification.\n     * @param {Observer} observer\n     * @return\n     */\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case 'N':\n                return observer.next && observer.next(this.value);\n            case 'E':\n                return observer.error && observer.error(this.error);\n            case 'C':\n                return observer.complete && observer.complete();\n        }\n    };\n    /**\n     * Given some {@link Observer} callbacks, deliver the value represented by the\n     * current Notification to the correctly corresponding callback.\n     * @param {function(value: T): void} next An Observer `next` callback.\n     * @param {function(err: any): void} [error] An Observer `error` callback.\n     * @param {function(): void} [complete] An Observer `complete` callback.\n     * @return {any}\n     */\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return next && next(this.value);\n            case 'E':\n                return error && error(this.error);\n            case 'C':\n                return complete && complete();\n        }\n    };\n    /**\n     * Takes an Observer or its individual callback functions, and calls `observe`\n     * or `do` methods accordingly.\n     * @param {Observer|function(value: T): void} nextOrObserver An Observer or\n     * the `next` callback.\n     * @param {function(err: any): void} [error] An Observer `error` callback.\n     * @param {function(): void} [complete] An Observer `complete` callback.\n     * @return {any}\n     */\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    /**\n     * Returns a simple Observable that just delivers the notification represented\n     * by this Notification instance.\n     * @return {any}\n     */\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return of(this.value);\n            case 'E':\n                return throwError(this.error);\n            case 'C':\n                return empty$2();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    /**\n     * A shortcut to create a Notification instance of the type `next` from a\n     * given value.\n     * @param {T} value The `next` value.\n     * @return {Notification<T>} The \"next\" Notification representing the\n     * argument.\n     * @nocollapse\n     */\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification('N', value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    /**\n     * A shortcut to create a Notification instance of the type `error` from a\n     * given error.\n     * @param {any} [err] The `error` error.\n     * @return {Notification<T>} The \"error\" Notification representing the\n     * argument.\n     * @nocollapse\n     */\n    Notification.createError = function (err) {\n        return new Notification('E', undefined, err);\n    };\n    /**\n     * A shortcut to create a Notification instance of the type `complete`.\n     * @return {Notification<any>} The valueless \"complete\" Notification.\n     * @nocollapse\n     */\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification('C');\n    Notification.undefinedValueNotification = new Notification('N', undefined);\n    return Notification;\n}());\n\nvar __extends$16 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n *\n * Re-emits all notifications from source Observable with specified scheduler.\n *\n * <span class=\"informal\">Ensure a specific scheduler is used, from outside of an Observable.</span>\n *\n * `observeOn` is an operator that accepts a scheduler as a first parameter, which will be used to reschedule\n * notifications emitted by the source Observable. It might be useful, if you do not have control over\n * internal scheduler of a given Observable, but want to control when its values are emitted nevertheless.\n *\n * Returned Observable emits the same notifications (nexted values, complete and error events) as the source Observable,\n * but rescheduled with provided scheduler. Note that this doesn't mean that source Observables internal\n * scheduler will be replaced in any way. Original scheduler still will be used, but when the source Observable emits\n * notification, it will be immediately scheduled again - this time with scheduler passed to `observeOn`.\n * An anti-pattern would be calling `observeOn` on Observable that emits lots of values synchronously, to split\n * that emissions into asynchronous chunks. For this to happen, scheduler would have to be passed into the source\n * Observable directly (usually into the operator that creates it). `observeOn` simply delays notifications a\n * little bit more, to ensure that they are emitted at expected moments.\n *\n * As a matter of fact, `observeOn` accepts second parameter, which specifies in milliseconds with what delay notifications\n * will be emitted. The main difference between {@link delay} operator and `observeOn` is that `observeOn`\n * will delay all notifications - including error notifications - while `delay` will pass through error\n * from source Observable immediately when it is emitted. In general it is highly recommended to use `delay` operator\n * for any kind of delaying of values in the stream, while using `observeOn` to specify which scheduler should be used\n * for notification emissions in general.\n *\n * @example <caption>Ensure values in subscribe are called just before browser repaint.</caption>\n * const intervals = Rx.Observable.interval(10); // Intervals are scheduled\n *                                               // with async scheduler by default...\n *\n * intervals\n * .observeOn(Rx.Scheduler.animationFrame)       // ...but we will observe on animationFrame\n * .subscribe(val => {                           // scheduler to ensure smooth animation.\n *   someDiv.style.height = val + 'px';\n * });\n *\n * @see {@link delay}\n *\n * @param {SchedulerLike} scheduler Scheduler that will be used to reschedule notifications from source Observable.\n * @param {number} [delay] Number of milliseconds that states with what delay every notification should be rescheduled.\n * @return {Observable<T>} Observable that emits the same notifications as the source Observable,\n * but with provided scheduler.\n *\n * @method observeOn\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ObserveOnSubscriber = /** @class */ (function (_super) {\n    __extends$16(ObserveOnSubscriber, _super);\n    function ObserveOnSubscriber(destination, scheduler, delay) {\n        if (delay === void 0) { delay = 0; }\n        var _this = _super.call(this, destination) || this;\n        _this.scheduler = scheduler;\n        _this.delay = delay;\n        return _this;\n    }\n    /** @nocollapse */\n    ObserveOnSubscriber.dispatch = function (arg) {\n        var notification = arg.notification, destination = arg.destination;\n        notification.observe(destination);\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {\n        this.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n    };\n    ObserveOnSubscriber.prototype._next = function (value) {\n        this.scheduleMessage(Notification.createNext(value));\n    };\n    ObserveOnSubscriber.prototype._error = function (err) {\n        this.scheduleMessage(Notification.createError(err));\n    };\n    ObserveOnSubscriber.prototype._complete = function () {\n        this.scheduleMessage(Notification.createComplete());\n    };\n    return ObserveOnSubscriber;\n}(Subscriber));\nvar ObserveOnMessage = /** @class */ (function () {\n    function ObserveOnMessage(notification, destination) {\n        this.notification = notification;\n        this.destination = destination;\n    }\n    return ObserveOnMessage;\n}());\n\nvar __extends$10 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class ReplaySubject<T>\n */\nvar ReplaySubject = /** @class */ (function (_super) {\n    __extends$10(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) { bufferSize = Number.POSITIVE_INFINITY; }\n        if (windowTime === void 0) { windowTime = Number.POSITIVE_INFINITY; }\n        var _this = _super.call(this) || this;\n        _this.scheduler = scheduler;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Number.POSITIVE_INFINITY) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        var _events = this._events;\n        _events.push(value);\n        // Since this method is invoked in every next() call than the buffer\n        // can overgrow the max size only by one item\n        if (_events.length > this._bufferSize) {\n            _events.shift();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        this._events.push(new ReplayEvent(this._getNow(), value));\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        // When `_infiniteTimeWindow === true` then the buffer is already trimmed\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new ObserveOnSubscriber(subscriber, scheduler));\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        // Trim events that fall out of the time window.\n        // Start at the front of the list. Break early once\n        // we encounter an event that falls within the window.\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject));\nvar ReplayEvent = /** @class */ (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n\nvar __extends$17 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @class AsyncSubject<T>\n */\nvar AsyncSubject = /** @class */ (function (_super) {\n    __extends$17(AsyncSubject, _super);\n    function AsyncSubject() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.value = null;\n        _this.hasNext = false;\n        _this.hasCompleted = false;\n        return _this;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    AsyncSubject.prototype._subscribe = function (subscriber) {\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.hasCompleted && this.hasNext) {\n            subscriber.next(this.value);\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        return _super.prototype._subscribe.call(this, subscriber);\n    };\n    AsyncSubject.prototype.next = function (value) {\n        if (!this.hasCompleted) {\n            this.value = value;\n            this.hasNext = true;\n        }\n    };\n    AsyncSubject.prototype.error = function (error) {\n        if (!this.hasCompleted) {\n            _super.prototype.error.call(this, error);\n        }\n    };\n    AsyncSubject.prototype.complete = function () {\n        this.hasCompleted = true;\n        if (this.hasNext) {\n            _super.prototype.next.call(this, this.value);\n        }\n        _super.prototype.complete.call(this);\n    };\n    return AsyncSubject;\n}(Subject));\n\nvar nextHandle = 0;\nvar tasksByHandle = {};\nfunction runIfPresent(handle) {\n    var cb = tasksByHandle[handle];\n    if (cb) {\n        cb();\n    }\n}\nvar Immediate = {\n    setImmediate: function (cb) {\n        var handle = nextHandle++;\n        tasksByHandle[handle] = cb;\n        Promise.resolve().then(function () { return runIfPresent(handle); });\n        return handle;\n    },\n    clearImmediate: function (handle) {\n        delete tasksByHandle[handle];\n    },\n};\n\nvar __extends$18 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AsapAction = /** @class */ (function (_super) {\n    __extends$18(AsapAction, _super);\n    function AsapAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AsapAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay is greater than 0, request as an async action.\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        // Push the action to the end of the scheduler queue.\n        scheduler.actions.push(this);\n        // If a microtask has already been scheduled, don't schedule another\n        // one. If a microtask hasn't been scheduled yet, schedule one now. Return\n        // the current scheduled microtask id.\n        return scheduler.scheduled || (scheduler.scheduled = Immediate.setImmediate(scheduler.flush.bind(scheduler, null)));\n    };\n    AsapAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay exists and is greater than 0, or if the delay is null (the\n        // action wasn't rescheduled) but was originally scheduled as an async\n        // action, then recycle as an async action.\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        // If the scheduler queue is empty, cancel the requested microtask and\n        // set the scheduled flag to undefined so the next AsapAction will schedule\n        // its own.\n        if (scheduler.actions.length === 0) {\n            Immediate.clearImmediate(id);\n            scheduler.scheduled = undefined;\n        }\n        // Return undefined so the action knows to request a new async id if it's rescheduled.\n        return undefined;\n    };\n    return AsapAction;\n}(AsyncAction));\n\nvar __extends$19 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar AsapScheduler = /** @class */ (function (_super) {\n    __extends$19(AsapScheduler, _super);\n    function AsapScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AsapScheduler.prototype.flush = function (action) {\n        this.active = true;\n        this.scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        var index = -1;\n        var count = actions.length;\n        action = action || actions.shift();\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (++index < count && (action = actions.shift()));\n        this.active = false;\n        if (error) {\n            while (++index < count && (action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsapScheduler;\n}(AsyncScheduler));\n\n/**\n *\n * Asap Scheduler\n *\n * <span class=\"informal\">Perform task as fast as it can be performed asynchronously</span>\n *\n * `asap` scheduler behaves the same as {@link async} scheduler when you use it to delay task\n * in time. If however you set delay to `0`, `asap` will wait for current synchronously executing\n * code to end and then it will try to execute given task as fast as possible.\n *\n * `asap` scheduler will do its best to minimize time between end of currently executing code\n * and start of scheduled task. This makes it best candidate for performing so called \"deferring\".\n * Traditionally this was achieved by calling `setTimeout(deferredTask, 0)`, but that technique involves\n * some (although minimal) unwanted delay.\n *\n * Note that using `asap` scheduler does not necessarily mean that your task will be first to process\n * after currently executing code. In particular, if some task was also scheduled with `asap` before,\n * that task will execute first. That being said, if you need to schedule task asynchronously, but\n * as soon as possible, `asap` scheduler is your best bet.\n *\n * @example <caption>Compare async and asap scheduler</caption>\n *\n * Rx.Scheduler.async.schedule(() => console.log('async')); // scheduling 'async' first...\n * Rx.Scheduler.asap.schedule(() => console.log('asap'));\n *\n * // Logs:\n * // \"asap\"\n * // \"async\"\n * // ... but 'asap' goes first!\n *\n * @static true\n * @name asap\n * @owner Scheduler\n */\nvar asap = new AsapScheduler(AsapAction);\n\n/**\n *\n * Async Scheduler\n *\n * <span class=\"informal\">Schedule task as if you used setTimeout(task, duration)</span>\n *\n * `async` scheduler schedules tasks asynchronously, by putting them on the JavaScript\n * event loop queue. It is best used to delay tasks in time or to schedule tasks repeating\n * in intervals.\n *\n * If you just want to \"defer\" task, that is to perform it right after currently\n * executing synchronous code ends (commonly achieved by `setTimeout(deferredTask, 0)`),\n * better choice will be the {@link asap} scheduler.\n *\n * @example <caption>Use async scheduler to delay task</caption>\n * const task = () => console.log('it works!');\n *\n * Rx.Scheduler.async.schedule(task, 2000);\n *\n * // After 2 seconds logs:\n * // \"it works!\"\n *\n *\n * @example <caption>Use async scheduler to repeat task in intervals</caption>\n * function task(state) {\n *   console.log(state);\n *   this.schedule(state + 1, 1000); // `this` references currently executing Action,\n *                                   // which we reschedule with new state and delay\n * }\n *\n * Rx.Scheduler.async.schedule(task, 3000, 0);\n *\n * // Logs:\n * // 0 after 3s\n * // 1 after 4s\n * // 2 after 5s\n * // 3 after 6s\n *\n * @static true\n * @name async\n * @owner Scheduler\n */\nvar async = new AsyncScheduler(AsyncAction);\n\nvar __extends$20 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AnimationFrameAction = /** @class */ (function (_super) {\n    __extends$20(AnimationFrameAction, _super);\n    function AnimationFrameAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AnimationFrameAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay is greater than 0, request as an async action.\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        // Push the action to the end of the scheduler queue.\n        scheduler.actions.push(this);\n        // If an animation frame has already been requested, don't request another\n        // one. If an animation frame hasn't been requested yet, request one. Return\n        // the current animation frame request id.\n        return scheduler.scheduled || (scheduler.scheduled = requestAnimationFrame(function () { return scheduler.flush(null); }));\n    };\n    AnimationFrameAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        // If delay exists and is greater than 0, or if the delay is null (the\n        // action wasn't rescheduled) but was originally scheduled as an async\n        // action, then recycle as an async action.\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        // If the scheduler queue is empty, cancel the requested animation frame and\n        // set the scheduled flag to undefined so the next AnimationFrameAction will\n        // request its own.\n        if (scheduler.actions.length === 0) {\n            cancelAnimationFrame(id);\n            scheduler.scheduled = undefined;\n        }\n        // Return undefined so the action knows to request a new async id if it's rescheduled.\n        return undefined;\n    };\n    return AnimationFrameAction;\n}(AsyncAction));\n\nvar __extends$21 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar AnimationFrameScheduler = /** @class */ (function (_super) {\n    __extends$21(AnimationFrameScheduler, _super);\n    function AnimationFrameScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AnimationFrameScheduler.prototype.flush = function (action) {\n        this.active = true;\n        this.scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        var index = -1;\n        var count = actions.length;\n        action = action || actions.shift();\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (++index < count && (action = actions.shift()));\n        this.active = false;\n        if (error) {\n            while (++index < count && (action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AnimationFrameScheduler;\n}(AsyncScheduler));\n\n/**\n *\n * Animation Frame Scheduler\n *\n * <span class=\"informal\">Perform task when `window.requestAnimationFrame` would fire</span>\n *\n * When `animationFrame` scheduler is used with delay, it will fall back to {@link async} scheduler\n * behaviour.\n *\n * Without delay, `animationFrame` scheduler can be used to create smooth browser animations.\n * It makes sure scheduled task will happen just before next browser content repaint,\n * thus performing animations as efficiently as possible.\n *\n * @example <caption>Schedule div height animation</caption>\n * const div = document.querySelector('.some-div');\n *\n * Rx.Scheduler.animationFrame.schedule(function(height) {\n *   div.style.height = height + \"px\";\n *\n *   this.schedule(height + 1);  // `this` references currently executing Action,\n *                               // which we reschedule with new state\n * }, 0, 0);\n *\n * // You will see .some-div element growing in height\n *\n *\n * @static true\n * @name animationFrame\n * @owner Scheduler\n */\nvar animationFrame = new AnimationFrameScheduler(AnimationFrameAction);\n\nvar __extends$22 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar VirtualTimeScheduler = /** @class */ (function (_super) {\n    __extends$22(VirtualTimeScheduler, _super);\n    function VirtualTimeScheduler(SchedulerAction, maxFrames) {\n        if (SchedulerAction === void 0) { SchedulerAction = VirtualAction; }\n        if (maxFrames === void 0) { maxFrames = Number.POSITIVE_INFINITY; }\n        var _this = _super.call(this, SchedulerAction, function () { return _this.frame; }) || this;\n        _this.maxFrames = maxFrames;\n        _this.frame = 0;\n        _this.index = -1;\n        return _this;\n    }\n    /**\n     * Prompt the Scheduler to execute all of its queued actions, therefore\n     * clearing its queue.\n     * @return {void}\n     */\n    VirtualTimeScheduler.prototype.flush = function () {\n        var _a = this, actions = _a.actions, maxFrames = _a.maxFrames;\n        var error, action;\n        while ((action = actions.shift()) && (this.frame = action.delay) <= maxFrames) {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        }\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    VirtualTimeScheduler.frameTimeFactor = 10;\n    return VirtualTimeScheduler;\n}(AsyncScheduler));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar VirtualAction = /** @class */ (function (_super) {\n    __extends$22(VirtualAction, _super);\n    function VirtualAction(scheduler, work, index) {\n        if (index === void 0) { index = scheduler.index += 1; }\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.index = index;\n        _this.active = true;\n        _this.index = scheduler.index = index;\n        return _this;\n    }\n    VirtualAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (!this.id) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.active = false;\n        // If an action is rescheduled, we save allocations by mutating its state,\n        // pushing it to the end of the scheduler queue, and recycling the action.\n        // But since the VirtualTimeScheduler is used for testing, VirtualActions\n        // must be immutable so they can be inspected later.\n        var action = new VirtualAction(this.scheduler, this.work);\n        this.add(action);\n        return action.schedule(state, delay);\n    };\n    VirtualAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        this.delay = scheduler.frame + delay;\n        var actions = scheduler.actions;\n        actions.push(this);\n        actions.sort(VirtualAction.sortActions);\n        return true;\n    };\n    VirtualAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        return undefined;\n    };\n    VirtualAction.prototype._execute = function (state, delay) {\n        if (this.active === true) {\n            return _super.prototype._execute.call(this, state, delay);\n        }\n    };\n    VirtualAction.sortActions = function (a, b) {\n        if (a.delay === b.delay) {\n            if (a.index === b.index) {\n                return 0;\n            }\n            else if (a.index > b.index) {\n                return 1;\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (a.delay > b.delay) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    };\n    return VirtualAction;\n}(AsyncAction));\n\nfunction identity(x) {\n    return x;\n}\n\nvar __extends$23 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when an element was queried at a certain index of an\n * Observable, but no such index or position exists in that sequence.\n *\n * @see {@link elementAt}\n * @see {@link take}\n * @see {@link takeLast}\n *\n * @class ArgumentOutOfRangeError\n */\nvar ArgumentOutOfRangeError = /** @class */ (function (_super) {\n    __extends$23(ArgumentOutOfRangeError, _super);\n    function ArgumentOutOfRangeError() {\n        var _this = _super.call(this, 'argument out of range') || this;\n        _this.name = 'ArgumentOutOfRangeError';\n        Object.setPrototypeOf(_this, ArgumentOutOfRangeError.prototype);\n        return _this;\n    }\n    return ArgumentOutOfRangeError;\n}(Error));\n\nvar __extends$24 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when an Observable or a sequence was queried but has no\n * elements.\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link single}\n *\n * @class EmptyError\n */\nvar EmptyError = /** @class */ (function (_super) {\n    __extends$24(EmptyError, _super);\n    function EmptyError() {\n        var _this = _super.call(this, 'no elements in sequence') || this;\n        _this.name = 'EmptyError';\n        Object.setPrototypeOf(_this, EmptyError.prototype);\n        return _this;\n    }\n    return EmptyError;\n}(Error));\n\nvar __extends$25 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * An error thrown when duetime elapses.\n *\n * @see {@link timeout}\n *\n * @class TimeoutError\n */\nvar TimeoutError = /** @class */ (function (_super) {\n    __extends$25(TimeoutError, _super);\n    function TimeoutError() {\n        var _this = _super.call(this, 'Timeout has occurred') || this;\n        Object.setPrototypeOf(_this, TimeoutError.prototype);\n        return _this;\n    }\n    return TimeoutError;\n}(Error));\n\nvar __extends$26 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Applies a given `project` function to each value emitted by the source\n * Observable, and emits the resulting values as an Observable.\n *\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\n * it passes each source value through a transformation function to get\n * corresponding output values.</span>\n *\n * <img src=\"./img/map.png\" width=\"100%\">\n *\n * Similar to the well known `Array.prototype.map` function, this operator\n * applies a projection to each value and emits that projection in the output\n * Observable.\n *\n * @example <caption>Map every click to the clientX position of that click</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var positions = clicks.map(ev => ev.clientX);\n * positions.subscribe(x => console.log(x));\n *\n * @see {@link mapTo}\n * @see {@link pluck}\n *\n * @param {function(value: T, index: number): R} project The function to apply\n * to each `value` emitted by the source Observable. The `index` parameter is\n * the number `i` for the i-th emission that has happened since the\n * subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to define what `this` is in the\n * `project` function.\n * @return {Observable<R>} An Observable that emits the values from the source\n * Observable transformed by the given `project` function.\n * @method map\n * @owner Observable\n */\nfunction map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /** @class */ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MapSubscriber = /** @class */ (function (_super) {\n    __extends$26(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    // NOTE: This looks unoptimized, but it's actually purposefully NOT\n    // using try/catch optimizations.\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n\nvar __read$1 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$1 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$1(arguments[i]));\n    return ar;\n};\n// tslint:enable:max-line-length\n/**\n * Converts a callback API to a function that returns an Observable.\n *\n * <span class=\"informal\">Give it a function `f` of type `f(x, callback)` and\n * it will return a function `g` that when called as `g(x)` will output an\n * Observable.</span>\n *\n * `bindCallback` is not an operator because its input and output are not\n * Observables. The input is a function `func` with some parameters, the\n * last parameter must be a callback function that `func` calls when it is\n * done.\n *\n * The output of `bindCallback` is a function that takes the same parameters\n * as `func`, except the last one (the callback). When the output function\n * is called with arguments it will return an Observable. If function `func`\n * calls its callback with one argument the Observable will emit that value.\n * If on the other hand the callback is called with multiple values the resulting\n * Observable will emit an array with said values as arguments.\n *\n * It is very important to remember that input function `func` is not called\n * when the output function is, but rather when the Observable returned by the output\n * function is subscribed. This means if `func` makes an AJAX request, that request\n * will be made every time someone subscribes to the resulting Observable, but not before.\n *\n * The last optional parameter - {@link Scheduler} - can be used to control when the call\n * to `func` happens after someone subscribes to Observable, as well as when results\n * passed to callback will be emitted. By default, the subscription to  an Observable calls `func`\n * synchronously, but using `Scheduler.async` as the last parameter will defer the call to `func`,\n * just like wrapping the call in `setTimeout` with a timeout of `0` would. If you use the async Scheduler\n * and call `subscribe` on the output Observable all function calls that are currently executing\n * will end before `func` is invoked.\n *\n * By default results passed to the callback are emitted immediately after `func` invokes the callback.\n * In particular, if the callback is called synchronously the subscription of the resulting Observable\n * will call the `next` function synchronously as well.  If you want to defer that call,\n * you may use `Scheduler.async` just as before.  This means that by using `Scheduler.async` you can\n * ensure that `func` always calls its callback asynchronously, thus avoiding terrifying Zalgo.\n *\n * Note that the Observable created by the output function will always emit a single value\n * and then complete immediately. If `func` calls the callback multiple times, values from subsequent\n * calls will not appear in the stream. If you need to listen for multiple calls,\n *  you probably want to use {@link fromEvent} or {@link fromEventPattern} instead.\n *\n * If `func` depends on some context (`this` property) and is not already bound the context of `func`\n * will be the context that the output function has at call time. In particular, if `func`\n * is called as a method of some objec and if `func` is not already bound, in order to preserve the context\n * it is recommended that the context of the output function is set to that object as well.\n *\n * If the input function calls its callback in the \"node style\" (i.e. first argument to callback is\n * optional error parameter signaling whether the call failed or not), {@link bindNodeCallback}\n * provides convenient error handling and probably is a better choice.\n * `bindCallback` will treat such functions the same as any other and error parameters\n * (whether passed or not) will always be interpreted as regular callback argument.\n *\n *\n * @example <caption>Convert jQuery's getJSON to an Observable API</caption>\n * // Suppose we have jQuery.getJSON('/my/url', callback)\n * var getJSONAsObservable = bindCallback(jQuery.getJSON);\n * var result = getJSONAsObservable('/my/url');\n * result.subscribe(x => console.log(x), e => console.error(e));\n *\n *\n * @example <caption>Receive an array of arguments passed to a callback</caption>\n * someFunction((a, b, c) => {\n *   console.log(a); // 5\n *   console.log(b); // 'some string'\n *   console.log(c); // {someProperty: 'someValue'}\n * });\n *\n * const boundSomeFunction = bindCallback(someFunction);\n * boundSomeFunction().subscribe(values => {\n *   console.log(values) // [5, 'some string', {someProperty: 'someValue'}]\n * });\n *\n *\n * @example <caption>Compare behaviour with and without async Scheduler</caption>\n * function iCallMyCallbackSynchronously(cb) {\n *   cb();\n * }\n *\n * const boundSyncFn = bindCallback(iCallMyCallbackSynchronously);\n * const boundAsyncFn = bindCallback(iCallMyCallbackSynchronously, null, Rx.Scheduler.async);\n *\n * boundSyncFn().subscribe(() => console.log('I was sync!'));\n * boundAsyncFn().subscribe(() => console.log('I was async!'));\n * console.log('This happened...');\n *\n * // Logs:\n * // I was sync!\n * // This happened...\n * // I was async!\n *\n *\n * @example <caption>Use bindCallback on an object method</caption>\n * const boundMethod = bindCallback(someObject.methodWithCallback);\n * boundMethod.call(someObject) // make sure methodWithCallback has access to someObject\n * .subscribe(subscriber);\n *\n *\n * @see {@link bindNodeCallback}\n * @see {@link from}\n * @see {@link fromPromise}\n *\n * @param {function} func A function with a callback as the last parameter.\n * @param {Scheduler} [scheduler] The scheduler on which to schedule the\n * callbacks.\n * @return {function(...params: *): Observable} A function which returns the\n * Observable that delivers the same values the callback would deliver.\n * @name bindCallback\n */\n\nvar __read$2 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$2 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$2(arguments[i]));\n    return ar;\n};\n/**\n * Converts a Node.js-style callback API to a function that returns an\n * Observable.\n *\n * <span class=\"informal\">It's just like {@link bindCallback}, but the\n * callback is expected to be of type `callback(error, result)`.</span>\n *\n * `bindNodeCallback` is not an operator because its input and output are not\n * Observables. The input is a function `func` with some parameters, but the\n * last parameter must be a callback function that `func` calls when it is\n * done. The callback function is expected to follow Node.js conventions,\n * where the first argument to the callback is an error object, signaling\n * whether call was successful. If that object is passed to callback, it means\n * something went wrong.\n *\n * The output of `bindNodeCallback` is a function that takes the same\n * parameters as `func`, except the last one (the callback). When the output\n * function is called with arguments, it will return an Observable.\n * If `func` calls its callback with error parameter present, Observable will\n * error with that value as well. If error parameter is not passed, Observable will emit\n * second parameter. If there are more parameters (third and so on),\n * Observable will emit an array with all arguments, except first error argument.\n *\n * Note that `func` will not be called at the same time output function is,\n * but rather whenever resulting Observable is subscribed. By default call to\n * `func` will happen synchronously after subscription, but that can be changed\n * with proper {@link Scheduler} provided as optional third parameter. Scheduler\n * can also control when values from callback will be emitted by Observable.\n * To find out more, check out documentation for {@link bindCallback}, where\n * Scheduler works exactly the same.\n *\n * As in {@link bindCallback}, context (`this` property) of input function will be set to context\n * of returned function, when it is called.\n *\n * After Observable emits value, it will complete immediately. This means\n * even if `func` calls callback again, values from second and consecutive\n * calls will never appear on the stream. If you need to handle functions\n * that call callbacks multiple times, check out {@link fromEvent} or\n * {@link fromEventPattern} instead.\n *\n * Note that `bindNodeCallback` can be used in non-Node.js environments as well.\n * \"Node.js-style\" callbacks are just a convention, so if you write for\n * browsers or any other environment and API you use implements that callback style,\n * `bindNodeCallback` can be safely used on that API functions as well.\n *\n * Remember that Error object passed to callback does not have to be an instance\n * of JavaScript built-in `Error` object. In fact, it does not even have to an object.\n * Error parameter of callback function is interpreted as \"present\", when value\n * of that parameter is truthy. It could be, for example, non-zero number, non-empty\n * string or boolean `true`. In all of these cases resulting Observable would error\n * with that value. This means usually regular style callbacks will fail very often when\n * `bindNodeCallback` is used. If your Observable errors much more often then you\n * would expect, check if callback really is called in Node.js-style and, if not,\n * switch to {@link bindCallback} instead.\n *\n * Note that even if error parameter is technically present in callback, but its value\n * is falsy, it still won't appear in array emitted by Observable.\n *\n *\n * @example <caption>Read a file from the filesystem and get the data as an Observable</caption>\n * import * as fs from 'fs';\n * var readFileAsObservable = bindNodeCallback(fs.readFile);\n * var result = readFileAsObservable('./roadNames.txt', 'utf8');\n * result.subscribe(x => console.log(x), e => console.error(e));\n *\n *\n * @example <caption>Use on function calling callback with multiple arguments</caption>\n * someFunction((err, a, b) => {\n *   console.log(err); // null\n *   console.log(a); // 5\n *   console.log(b); // \"some string\"\n * });\n * var boundSomeFunction = bindNodeCallback(someFunction);\n * boundSomeFunction()\n * .subscribe(value => {\n *   console.log(value); // [5, \"some string\"]\n * });\n *\n * @example <caption>Use on function calling callback in regular style</caption>\n * someFunction(a => {\n *   console.log(a); // 5\n * });\n * var boundSomeFunction = bindNodeCallback(someFunction);\n * boundSomeFunction()\n * .subscribe(\n *   value => {}             // never gets called\n *   err => console.log(err) // 5\n * );\n *\n *\n * @see {@link bindCallback}\n * @see {@link from}\n * @see {@link fromPromise}\n *\n * @param {function} func Function with a Node.js-style callback as the last parameter.\n * @param {Scheduler} [scheduler] The scheduler on which to schedule the\n * callbacks.\n * @return {function(...params: *): Observable} A function which returns the\n * Observable that delivers the same values the Node.js callback would\n * deliver.\n * @name bindNodeCallback\n */\n\nvar __extends$28 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar OuterSubscriber = /** @class */ (function (_super) {\n    __extends$28(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber));\n\nvar __extends$29 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar InnerSubscriber = /** @class */ (function (_super) {\n    __extends$29(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber));\n\nvar subscribeToPromise = function (promise) { return function (subscriber) {\n    promise.then(function (value) {\n        if (!subscriber.closed) {\n            subscriber.next(value);\n            subscriber.complete();\n        }\n    }, function (err) { return subscriber.error(err); })\n        .then(null, hostReportError);\n    return subscriber;\n}; };\n\nfunction getSymbolIterator$1() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nvar iterator = getSymbolIterator$1();\n/**\n * @deprecated use {@link iterator} instead\n */\n\nvar subscribeToIterable = function (iterable) { return function (subscriber) {\n    var iterator$$1 = iterable[iterator]();\n    do {\n        var item = iterator$$1.next();\n        if (item.done) {\n            subscriber.complete();\n            break;\n        }\n        subscriber.next(item.value);\n        if (subscriber.closed) {\n            break;\n        }\n    } while (true);\n    // Finalize the iterator if it happens to be a Generator\n    if (typeof iterator$$1.return === 'function') {\n        subscriber.add(function () {\n            if (iterator$$1.return) {\n                iterator$$1.return();\n            }\n        });\n    }\n    return subscriber;\n}; };\n\n/**\n * Subscribes to an object that implements Symbol.observable with the given\n * Subscriber.\n * @param obj An object that implements Symbol.observable\n */\nvar subscribeToObservable = function (obj) { return function (subscriber) {\n    var obs = obj[observable]();\n    if (typeof obs.subscribe !== 'function') {\n        // Should be caught by observable subscribe function error handling.\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    }\n    else {\n        return obs.subscribe(subscriber);\n    }\n}; };\n\nvar isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n\nfunction isPromise$1(value) {\n    return value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\n\nvar subscribeTo = function (result) {\n    if (result instanceof Observable) {\n        return function (subscriber) {\n            if (result._isScalar) {\n                subscriber.next(result.value);\n                subscriber.complete();\n                return undefined;\n            }\n            else {\n                return result.subscribe(subscriber);\n            }\n        };\n    }\n    else if (isArrayLike(result)) {\n        return subscribeToArray(result);\n    }\n    else if (isPromise$1(result)) {\n        return subscribeToPromise(result);\n    }\n    else if (result && typeof result[iterator] === 'function') {\n        return subscribeToIterable(result);\n    }\n    else if (result && typeof result[observable] === 'function') {\n        return subscribeToObservable(result);\n    }\n    else {\n        var value = isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n\nfunction subscribeToResult(outerSubscriber, result, outerValue, outerIndex) {\n    var destination = new InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    return subscribeTo(result)(destination);\n}\n\nvar __extends$27 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar NONE = {};\n/* tslint:enable:max-line-length */\n/**\n * Combines multiple Observables to create an Observable whose values are\n * calculated from the latest values of each of its input Observables.\n *\n * <span class=\"informal\">Whenever any input Observable emits a value, it\n * computes a formula using the latest values from all the inputs, then emits\n * the output of that formula.</span>\n *\n * <img src=\"./img/combineLatest.png\" width=\"100%\">\n *\n * `combineLatest` combines the values from all the Observables passed as\n * arguments. This is done by subscribing to each Observable in order and,\n * whenever any Observable emits, collecting an array of the most recent\n * values from each Observable. So if you pass `n` Observables to operator,\n * returned Observable will always emit an array of `n` values, in order\n * corresponding to order of passed Observables (value from the first Observable\n * on the first place and so on).\n *\n * Static version of `combineLatest` accepts either an array of Observables\n * or each Observable can be put directly as an argument. Note that array of\n * Observables is good choice, if you don't know beforehand how many Observables\n * you will combine. Passing empty array will result in Observable that\n * completes immediately.\n *\n * To ensure output array has always the same length, `combineLatest` will\n * actually wait for all input Observables to emit at least once,\n * before it starts emitting results. This means if some Observable emits\n * values before other Observables started emitting, all that values but last\n * will be lost. On the other hand, is some Observable does not emit value but\n * completes, resulting Observable will complete at the same moment without\n * emitting anything, since it will be now impossible to include value from\n * completed Observable in resulting array. Also, if some input Observable does\n * not emit any value and never completes, `combineLatest` will also never emit\n * and never complete, since, again, it will wait for all streams to emit some\n * value.\n *\n * If at least one Observable was passed to `combineLatest` and all passed Observables\n * emitted something, resulting Observable will complete when all combined\n * streams complete. So even if some Observable completes, result of\n * `combineLatest` will still emit values when other Observables do. In case\n * of completed Observable, its value from now on will always be the last\n * emitted value. On the other hand, if any Observable errors, `combineLatest`\n * will error immediately as well, and all other Observables will be unsubscribed.\n *\n * `combineLatest` accepts as optional parameter `project` function, which takes\n * as arguments all values that would normally be emitted by resulting Observable.\n * `project` can return any kind of value, which will be then emitted by Observable\n * instead of default array. Note that `project` does not take as argument that array\n * of values, but values themselves. That means default `project` can be imagined\n * as function that takes all its arguments and puts them into an array.\n *\n *\n * @example <caption>Combine two timer Observables</caption>\n * const firstTimer = Rx.Observable.timer(0, 1000); // emit 0, 1, 2... after every second, starting from now\n * const secondTimer = Rx.Observable.timer(500, 1000); // emit 0, 1, 2... after every second, starting 0,5s from now\n * const combinedTimers = Rx.Observable.combineLatest(firstTimer, secondTimer);\n * combinedTimers.subscribe(value => console.log(value));\n * // Logs\n * // [0, 0] after 0.5s\n * // [1, 0] after 1s\n * // [1, 1] after 1.5s\n * // [2, 1] after 2s\n *\n *\n * @example <caption>Combine an array of Observables</caption>\n * const observables = [1, 5, 10].map(\n *   n => Rx.Observable.of(n).delay(n * 1000).startWith(0) // emit 0 and then emit n after n seconds\n * );\n * const combined = Rx.Observable.combineLatest(observables);\n * combined.subscribe(value => console.log(value));\n * // Logs\n * // [0, 0, 0] immediately\n * // [1, 0, 0] after 1s\n * // [1, 5, 0] after 5s\n * // [1, 5, 10] after 10s\n *\n *\n * @example <caption>Use project function to dynamically calculate the Body-Mass Index</caption>\n * var weight = Rx.Observable.of(70, 72, 76, 79, 75);\n * var height = Rx.Observable.of(1.76, 1.77, 1.78);\n * var bmi = Rx.Observable.combineLatest(weight, height, (w, h) => w / (h * h));\n * bmi.subscribe(x => console.log('BMI is ' + x));\n *\n * // With output to console:\n * // BMI is 24.212293388429753\n * // BMI is 23.93948099205209\n * // BMI is 23.671253629592222\n *\n *\n * @see {@link combineAll}\n * @see {@link merge}\n * @see {@link withLatestFrom}\n *\n * @param {ObservableInput} observable1 An input Observable to combine with other Observables.\n * @param {ObservableInput} observable2 An input Observable to combine with other Observables.\n * More than one input Observables may be given as arguments\n * or an array of Observables may be given as the first argument.\n * @param {function} [project] An optional function to project the values from\n * the combined latest values into a new value on the output Observable.\n * @param {Scheduler} [scheduler=null] The IScheduler to use for subscribing to\n * each input Observable.\n * @return {Observable} An Observable of projected values from the most recent\n * values from each input Observable, or an array of the most recent values from\n * each input Observable.\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar CombineLatestSubscriber = /** @class */ (function (_super) {\n    __extends$27(CombineLatestSubscriber, _super);\n    function CombineLatestSubscriber(destination, resultSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.resultSelector = resultSelector;\n        _this.active = 0;\n        _this.values = [];\n        _this.observables = [];\n        return _this;\n    }\n    CombineLatestSubscriber.prototype._next = function (observable) {\n        this.values.push(NONE);\n        this.observables.push(observable);\n    };\n    CombineLatestSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            this.active = len;\n            this.toRespond = len;\n            for (var i = 0; i < len; i++) {\n                var observable = observables[i];\n                this.add(subscribeToResult(this, observable, observable, i));\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyComplete = function (unused) {\n        if ((this.active -= 1) === 0) {\n            this.destination.complete();\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var values = this.values;\n        var oldVal = values[outerIndex];\n        var toRespond = !this.toRespond\n            ? 0\n            : oldVal === NONE ? --this.toRespond : this.toRespond;\n        values[outerIndex] = innerValue;\n        if (toRespond === 0) {\n            if (this.resultSelector) {\n                this._tryResultSelector(values);\n            }\n            else {\n                this.destination.next(values.slice());\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype._tryResultSelector = function (values) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, values);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return CombineLatestSubscriber;\n}(OuterSubscriber));\n\n/** Identifies an input as being Observable (but not necessary an Rx Observable) */\nfunction isObservable(input) {\n    return input && typeof input[observable] === 'function';\n}\n\n/** Identifies an input as being an Iterable */\nfunction isIterable(input) {\n    return input && typeof input[iterator] === 'function';\n}\n\nfunction fromPromise(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToPromise(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            sub.add(scheduler.schedule(function () { return input.then(function (value) {\n                sub.add(scheduler.schedule(function () {\n                    subscriber.next(value);\n                    sub.add(scheduler.schedule(function () { return subscriber.complete(); }));\n                }));\n            }, function (err) {\n                sub.add(scheduler.schedule(function () { return subscriber.error(err); }));\n            }); }));\n            return sub;\n        });\n    }\n}\n\nfunction fromIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    if (!scheduler) {\n        return new Observable(subscribeToIterable(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            var iterator$$1;\n            sub.add(function () {\n                // Finalize generators\n                if (iterator$$1 && typeof iterator$$1.return === 'function') {\n                    iterator$$1.return();\n                }\n            });\n            sub.add(scheduler.schedule(function () {\n                iterator$$1 = input[iterator]();\n                sub.add(scheduler.schedule(function () {\n                    if (subscriber.closed) {\n                        return;\n                    }\n                    var value;\n                    var done;\n                    try {\n                        var result = iterator$$1.next();\n                        value = result.value;\n                        done = result.done;\n                    }\n                    catch (err) {\n                        subscriber.error(err);\n                        return;\n                    }\n                    if (done) {\n                        subscriber.complete();\n                    }\n                    else {\n                        subscriber.next(value);\n                        this.schedule();\n                    }\n                }));\n            }));\n            return sub;\n        });\n    }\n}\n\nfunction fromObservable(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToObservable(input));\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var sub = new Subscription();\n            sub.add(scheduler.schedule(function () {\n                var observable$$1 = input[observable]();\n                sub.add(observable$$1.subscribe({\n                    next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },\n                    error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },\n                    complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },\n                }));\n            }));\n            return sub;\n        });\n    }\n}\n\nfunction from(input, scheduler) {\n    if (!scheduler) {\n        if (input instanceof Observable) {\n            return input;\n        }\n        return new Observable(subscribeTo(input));\n    }\n    if (input != null) {\n        if (isObservable(input)) {\n            return fromObservable(input, scheduler);\n        }\n        else if (isPromise$1(input)) {\n            return fromPromise(input, scheduler);\n        }\n        else if (isArrayLike(input)) {\n            return fromArray(input, scheduler);\n        }\n        else if (isIterable(input) || typeof input === 'string') {\n            return fromIterable(input, scheduler);\n        }\n    }\n    throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\n\nvar __extends$30 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link mergeAll}.</span>\n *\n * <img src=\"./img/mergeMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an Observable, and then merging those resulting Observables and\n * emitting the results of this merger.\n *\n * @example <caption>Map and flatten each letter to an Observable ticking every 1 second</caption>\n * var letters = Rx.Observable.of('a', 'b', 'c');\n * var result = letters.mergeMap(x =>\n *   Rx.Observable.interval(1000).map(i => x+i)\n * );\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // a0\n * // b0\n * // c0\n * // a1\n * // b1\n * // c1\n * // continues to list a,b,c with respective ascending integers\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link merge}\n * @see {@link mergeAll}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional `resultSelector`) to each item emitted\n * by the source Observable and merging the results of the Observables obtained\n * from this transformation.\n * @method mergeMap\n * @owner Observable\n */\nfunction mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n    if (typeof resultSelector === 'function') {\n        // DEPRECATED PATH\n        return function (source) { return source.pipe(mergeMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };\n}\nvar MergeMapOperator = /** @class */ (function () {\n    function MergeMapOperator(project, concurrent) {\n        if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n        this.project = project;\n        this.concurrent = concurrent;\n    }\n    MergeMapOperator.prototype.call = function (observer, source) {\n        return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));\n    };\n    return MergeMapOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MergeMapSubscriber = /** @class */ (function (_super) {\n    __extends$30(MergeMapSubscriber, _super);\n    function MergeMapSubscriber(destination, project, concurrent) {\n        if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeMapSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            this._tryNext(value);\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeMapSubscriber.prototype._tryNext = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.active++;\n        this._innerSub(result, value, index);\n    };\n    MergeMapSubscriber.prototype._innerSub = function (ish, value, index) {\n        this.add(subscribeToResult(this, ish, value, index));\n    };\n    MergeMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n    };\n    MergeMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    MergeMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return MergeMapSubscriber;\n}(OuterSubscriber));\n\n/**\n * Converts a higher-order Observable into a first-order Observable which\n * concurrently delivers all values that are emitted on the inner Observables.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables.</span>\n *\n * <img src=\"./img/mergeAll.png\" width=\"100%\">\n *\n * `mergeAll` subscribes to an Observable that emits Observables, also known as\n * a higher-order Observable. Each time it observes one of these emitted inner\n * Observables, it subscribes to that and delivers all the values from the\n * inner Observable on the output Observable. The output Observable only\n * completes once all inner Observables have completed. Any error delivered by\n * a inner Observable will be immediately emitted on the output Observable.\n *\n * @example <caption>Spawn a new interval Observable for each click event, and blend their outputs as one Observable</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var higherOrder = clicks.map((ev) => Rx.Observable.interval(1000));\n * var firstOrder = higherOrder.mergeAll();\n * firstOrder.subscribe(x => console.log(x));\n *\n * @example <caption>Count from 0 to 9 every second for each click, but only allow 2 concurrent timers</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var higherOrder = clicks.map((ev) => Rx.Observable.interval(1000).take(10));\n * var firstOrder = higherOrder.mergeAll(2);\n * firstOrder.subscribe(x => console.log(x));\n *\n * @see {@link combineAll}\n * @see {@link concatAll}\n * @see {@link exhaust}\n * @see {@link merge}\n * @see {@link mergeMap}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n * @see {@link switch}\n * @see {@link zipAll}\n *\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of inner\n * Observables being subscribed to concurrently.\n * @return {Observable} An Observable that emits values coming from all the\n * inner Observables emitted by the source Observable.\n * @method mergeAll\n * @owner Observable\n */\nfunction mergeAll(concurrent) {\n    if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n    return mergeMap(identity, concurrent);\n}\n\n/**\n * Converts a higher-order Observable into a first-order Observable by\n * concatenating the inner Observables in order.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables by putting one\n * inner Observable after the other.</span>\n *\n * <img src=\"./img/concatAll.png\" width=\"100%\">\n *\n * Joins every Observable emitted by the source (a higher-order Observable), in\n * a serial fashion. It subscribes to each inner Observable only after the\n * previous inner Observable has completed, and merges all of their values into\n * the returned observable.\n *\n * __Warning:__ If the source Observable emits Observables quickly and\n * endlessly, and the inner Observables it emits generally complete slower than\n * the source emits, you can run into memory issues as the incoming Observables\n * collect in an unbounded buffer.\n *\n * Note: `concatAll` is equivalent to `mergeAll` with concurrency parameter set\n * to `1`.\n *\n * @example <caption>For each click event, tick every second from 0 to 3, with no concurrency</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var higherOrder = clicks.map(ev => Rx.Observable.interval(1000).take(4));\n * var firstOrder = higherOrder.concatAll();\n * firstOrder.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n *\n * @see {@link combineAll}\n * @see {@link concat}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n * @see {@link exhaust}\n * @see {@link mergeAll}\n * @see {@link switch}\n * @see {@link zipAll}\n *\n * @return {Observable} An Observable emitting values from all the inner\n * Observables concatenated.\n * @method concatAll\n * @owner Observable\n */\n\nvar __read$3 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$3 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$3(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Creates an output Observable which sequentially emits all values from given\n * Observable and then moves on to the next.\n *\n * <span class=\"informal\">Concatenates multiple Observables together by\n * sequentially emitting their values, one Observable after the other.</span>\n *\n * <img src=\"./img/concat.png\" width=\"100%\">\n *\n * `concat` joins multiple Observables together, by subscribing to them one at a time and\n * merging their results into the output Observable. You can pass either an array of\n * Observables, or put them directly as arguments. Passing an empty array will result\n * in Observable that completes immediately.\n *\n * `concat` will subscribe to first input Observable and emit all its values, without\n * changing or affecting them in any way. When that Observable completes, it will\n * subscribe to then next Observable passed and, again, emit its values. This will be\n * repeated, until the operator runs out of Observables. When last input Observable completes,\n * `concat` will complete as well. At any given moment only one Observable passed to operator\n * emits values. If you would like to emit values from passed Observables concurrently, check out\n * {@link merge} instead, especially with optional `concurrent` parameter. As a matter of fact,\n * `concat` is an equivalent of `merge` operator with `concurrent` parameter set to `1`.\n *\n * Note that if some input Observable never completes, `concat` will also never complete\n * and Observables following the one that did not complete will never be subscribed. On the other\n * hand, if some Observable simply completes immediately after it is subscribed, it will be\n * invisible for `concat`, which will just move on to the next Observable.\n *\n * If any Observable in chain errors, instead of passing control to the next Observable,\n * `concat` will error immediately as well. Observables that would be subscribed after\n * the one that emitted error, never will.\n *\n * If you pass to `concat` the same Observable many times, its stream of values\n * will be \"replayed\" on every subscription, which means you can repeat given Observable\n * as many times as you like. If passing the same Observable to `concat` 1000 times becomes tedious,\n * you can always use {@link repeat}.\n *\n * @example <caption>Concatenate a timer counting from 0 to 3 with a synchronous sequence from 1 to 10</caption>\n * var timer = Rx.Observable.interval(1000).take(4);\n * var sequence = Rx.Observable.range(1, 10);\n * var result = Rx.Observable.concat(timer, sequence);\n * result.subscribe(x => console.log(x));\n *\n * // results in:\n * // 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3 -immediate-> 1 ... 10\n *\n *\n * @example <caption>Concatenate an array of 3 Observables</caption>\n * var timer1 = Rx.Observable.interval(1000).take(10);\n * var timer2 = Rx.Observable.interval(2000).take(6);\n * var timer3 = Rx.Observable.interval(500).take(10);\n * var result = Rx.Observable.concat([timer1, timer2, timer3]); // note that array is passed\n * result.subscribe(x => console.log(x));\n *\n * // results in the following:\n * // (Prints to console sequentially)\n * // -1000ms-> 0 -1000ms-> 1 -1000ms-> ... 9\n * // -2000ms-> 0 -2000ms-> 1 -2000ms-> ... 5\n * // -500ms-> 0 -500ms-> 1 -500ms-> ... 9\n *\n *\n * @example <caption>Concatenate the same Observable to repeat it</caption>\n * const timer = Rx.Observable.interval(1000).take(2);\n *\n * Rx.Observable.concat(timer, timer) // concating the same Observable!\n * .subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('...and it is done!')\n * );\n *\n * // Logs:\n * // 0 after 1s\n * // 1 after 2s\n * // 0 after 3s\n * // 1 after 4s\n * // \"...and it is done!\" also after 4s\n *\n * @see {@link concatAll}\n * @see {@link concatMap}\n * @see {@link concatMapTo}\n *\n * @param {ObservableInput} input1 An input Observable to concatenate with others.\n * @param {ObservableInput} input2 An input Observable to concatenate with others.\n * More than one input Observables may be given as argument.\n * @param {Scheduler} [scheduler=null] An optional IScheduler to schedule each\n * Observable subscription on.\n * @return {Observable} All values of each passed Observable merged into a\n * single Observable, in order, in serial fashion.\n * @static true\n * @name concat\n * @owner Observable\n */\n\n/**\n * Creates an Observable that, on subscribe, calls an Observable factory to\n * make an Observable for each new Observer.\n *\n * <span class=\"informal\">Creates the Observable lazily, that is, only when it\n * is subscribed.\n * </span>\n *\n * <img src=\"./img/defer.png\" width=\"100%\">\n *\n * `defer` allows you to create the Observable only when the Observer\n * subscribes, and create a fresh Observable for each Observer. It waits until\n * an Observer subscribes to it, and then it generates an Observable,\n * typically with an Observable factory function. It does this afresh for each\n * subscriber, so although each subscriber may think it is subscribing to the\n * same Observable, in fact each subscriber gets its own individual\n * Observable.\n *\n * @example <caption>Subscribe to either an Observable of clicks or an Observable of interval, at random</caption>\n * var clicksOrInterval = Rx.Observable.defer(function () {\n *   if (Math.random() > 0.5) {\n *     return Rx.Observable.fromEvent(document, 'click');\n *   } else {\n *     return Rx.Observable.interval(1000);\n *   }\n * });\n * clicksOrInterval.subscribe(x => console.log(x));\n *\n * // Results in the following behavior:\n * // If the result of Math.random() is greater than 0.5 it will listen\n * // for clicks anywhere on the \"document\"; when document is clicked it\n * // will log a MouseEvent object to the console. If the result is less\n * // than 0.5 it will emit ascending numbers, one every second(1000ms).\n *\n * @see {@link create}\n *\n * @param {function(): SubscribableOrPromise} observableFactory The Observable\n * factory function to invoke for each Observer that subscribes to the output\n * Observable. May also return a Promise, which will be converted on the fly\n * to an Observable.\n * @return {Observable} An Observable whose Observers' subscriptions trigger\n * an invocation of the given Observable factory function.\n * @static true\n * @name defer\n * @owner Observable\n */\n\nvar __extends$31 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read$4 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$4 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$4(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Joins last values emitted by passed Observables.\n *\n * <span class=\"informal\">Wait for Observables to complete and then combine last values they emitted.</span>\n *\n * <img src=\"./img/forkJoin.png\" width=\"100%\">\n *\n * `forkJoin` is an operator that takes any number of Observables which can be passed either as an array\n * or directly as arguments. If no input Observables are provided, resulting stream will complete\n * immediately.\n *\n * `forkJoin` will wait for all passed Observables to complete and then it will emit an array with last\n * values from corresponding Observables. So if you pass `n` Observables to the operator, resulting\n * array will have `n` values, where first value is the last thing emitted by the first Observable,\n * second value is the last thing emitted by the second Observable and so on. That means `forkJoin` will\n * not emit more than once and it will complete after that. If you need to emit combined values not only\n * at the end of lifecycle of passed Observables, but also throughout it, try out {@link combineLatest}\n * or {@link zip} instead.\n *\n * In order for resulting array to have the same length as the number of input Observables, whenever any of\n * that Observables completes without emitting any value, `forkJoin` will complete at that moment as well\n * and it will not emit anything either, even if it already has some last values from other Observables.\n * Conversely, if there is an Observable that never completes, `forkJoin` will never complete as well,\n * unless at any point some other Observable completes without emitting value, which brings us back to\n * the previous case. Overall, in order for `forkJoin` to emit a value, all Observables passed as arguments\n * have to emit something at least once and complete.\n *\n * If any input Observable errors at some point, `forkJoin` will error as well and all other Observables\n * will be immediately unsubscribed.\n *\n * Optionally `forkJoin` accepts project function, that will be called with values which normally\n * would land in emitted array. Whatever is returned by project function, will appear in output\n * Observable instead. This means that default project can be thought of as a function that takes\n * all its arguments and puts them into an array. Note that project function will be called only\n * when output Observable is supposed to emit a result.\n *\n * @example <caption>Use forkJoin with operator emitting immediately</caption>\n * import { forkJoin, of } from 'rxjs';\n *\n * const observable = forkJoin(\n *   of(1, 2, 3, 4),\n *   of(5, 6, 7, 8)\n * );\n * observable.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('This is how it ends!')\n * );\n *\n * // Logs:\n * // [4, 8]\n * // \"This is how it ends!\"\n *\n *\n * @example <caption>Use forkJoin with operator emitting after some time</caption>\n * import { forkJoin, interval } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * const observable = forkJoin(\n *   interval(1000).pipe(take(3)), // emit 0, 1, 2 every second and complete\n *   interval(500).pipe(take(4)) // emit 0, 1, 2, 3 every half a second and complete\n * );\n * observable.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('This is how it ends!')\n * );\n *\n * // Logs:\n * // [2, 3] after 3 seconds\n * // \"This is how it ends!\" immediately after\n *\n *\n * @example <caption>Use forkJoin with project function</caption>\n * import { jorkJoin, interval } from 'rxjs';\n * import { take } from 'rxjs/operators';\n *\n * const observable = forkJoin(\n *   interval(1000).pipe(take(3)), // emit 0, 1, 2 every second and complete\n *   interval(500).pipe(take(4)), // emit 0, 1, 2, 3 every half a second and complete\n *   (n, m) => n + m\n * );\n * observable.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('This is how it ends!')\n * );\n *\n * // Logs:\n * // 5 after 3 seconds\n * // \"This is how it ends!\" immediately after\n *\n * @see {@link combineLatest}\n * @see {@link zip}\n *\n * @param {...ObservableInput} sources Any number of Observables provided either as an array or as an arguments\n * passed directly to the operator.\n * @param {function} [project] Function that takes values emitted by input Observables and returns value\n * that will appear in resulting Observable instead of default array.\n * @return {Observable} Observable emitting either an array of last values emitted by passed Observables\n * or value from project function.\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ForkJoinSubscriber = /** @class */ (function (_super) {\n    __extends$31(ForkJoinSubscriber, _super);\n    function ForkJoinSubscriber(destination, sources) {\n        var _this = _super.call(this, destination) || this;\n        _this.sources = sources;\n        _this.completed = 0;\n        _this.haveValues = 0;\n        var len = sources.length;\n        _this.values = new Array(len);\n        for (var i = 0; i < len; i++) {\n            var source = sources[i];\n            var innerSubscription = subscribeToResult(_this, source, null, i);\n            if (innerSubscription) {\n                _this.add(innerSubscription);\n            }\n        }\n        return _this;\n    }\n    ForkJoinSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.values[outerIndex] = innerValue;\n        if (!innerSub._hasValue) {\n            innerSub._hasValue = true;\n            this.haveValues++;\n        }\n    };\n    ForkJoinSubscriber.prototype.notifyComplete = function (innerSub) {\n        var _a = this, destination = _a.destination, haveValues = _a.haveValues, values = _a.values;\n        var len = values.length;\n        if (!innerSub._hasValue) {\n            destination.complete();\n            return;\n        }\n        this.completed++;\n        if (this.completed !== len) {\n            return;\n        }\n        if (haveValues === len) {\n            destination.next(values);\n        }\n        destination.complete();\n    };\n    return ForkJoinSubscriber;\n}(OuterSubscriber));\n\nvar __read$5 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$5 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$5(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Creates an Observable that emits events of a specific type coming from the\n * given event target.\n *\n * <span class=\"informal\">Creates an Observable from DOM events, or Node.js\n * EventEmitter events or others.</span>\n *\n * <img src=\"./img/fromEvent.png\" width=\"100%\">\n *\n * `fromEvent` accepts as a first argument event target, which is an object with methods\n * for registering event handler functions. As a second argument it takes string that indicates\n * type of event we want to listen for. `fromEvent` supports selected types of event targets,\n * which are described in detail below. If your event target does not match any of the ones listed,\n * you should use {@link fromEventPattern}, which can be used on arbitrary APIs.\n * When it comes to APIs supported by `fromEvent`, their methods for adding and removing event\n * handler functions have different names, but they all accept a string describing event type\n * and function itself, which will be called whenever said event happens.\n *\n * Every time resulting Observable is subscribed, event handler function will be registered\n * to event target on given event type. When that event fires, value\n * passed as a first argument to registered function will be emitted by output Observable.\n * When Observable is unsubscribed, function will be unregistered from event target.\n *\n * Note that if event target calls registered function with more than one argument, second\n * and following arguments will not appear in resulting stream. In order to get access to them,\n * you can pass to `fromEvent` optional project function, which will be called with all arguments\n * passed to event handler. Output Observable will then emit value returned by project function,\n * instead of the usual value.\n *\n * Remember that event targets listed below are checked via duck typing. It means that\n * no matter what kind of object you have and no matter what environment you work in,\n * you can safely use `fromEvent` on that object if it exposes described methods (provided\n * of course they behave as was described above). So for example if Node.js library exposes\n * event target which has the same method names as DOM EventTarget, `fromEvent` is still\n * a good choice.\n *\n * If the API you use is more callback then event handler oriented (subscribed\n * callback function fires only once and thus there is no need to manually\n * unregister it), you should use {@link bindCallback} or {@link bindNodeCallback}\n * instead.\n *\n * `fromEvent` supports following types of event targets:\n *\n * **DOM EventTarget**\n *\n * This is an object with `addEventListener` and `removeEventListener` methods.\n *\n * In the browser, `addEventListener` accepts - apart from event type string and event\n * handler function arguments - optional third parameter, which is either an object or boolean,\n * both used for additional configuration how and when passed function will be called. When\n * `fromEvent` is used with event target of that type, you can provide this values\n * as third parameter as well.\n *\n * **Node.js EventEmitter**\n *\n * An object with `addListener` and `removeListener` methods.\n *\n * **JQuery-style event target**\n *\n * An object with `on` and `off` methods\n *\n * **DOM NodeList**\n *\n * List of DOM Nodes, returned for example by `document.querySelectorAll` or `Node.childNodes`.\n *\n * Although this collection is not event target in itself, `fromEvent` will iterate over all Nodes\n * it contains and install event handler function in every of them. When returned Observable\n * is unsubscribed, function will be removed from all Nodes.\n *\n * **DOM HtmlCollection**\n *\n * Just as in case of NodeList it is a collection of DOM nodes. Here as well event handler function is\n * installed and removed in each of elements.\n *\n *\n * @example <caption>Emits clicks happening on the DOM document</caption>\n * var clicks = fromEvent(document, 'click');\n * clicks.subscribe(x => console.log(x));\n *\n * // Results in:\n * // MouseEvent object logged to console every time a click\n * // occurs on the document.\n *\n *\n * @example <caption>Use addEventListener with capture option</caption>\n * var clicksInDocument = fromEvent(document, 'click', true); // note optional configuration parameter\n *                                                                          // which will be passed to addEventListener\n * var clicksInDiv = fromEvent(someDivInDocument, 'click');\n *\n * clicksInDocument.subscribe(() => console.log('document'));\n * clicksInDiv.subscribe(() => console.log('div'));\n *\n * // By default events bubble UP in DOM tree, so normally\n * // when we would click on div in document\n * // \"div\" would be logged first and then \"document\".\n * // Since we specified optional `capture` option, document\n * // will catch event when it goes DOWN DOM tree, so console\n * // will log \"document\" and then \"div\".\n *\n * @see {@link bindCallback}\n * @see {@link bindNodeCallback}\n * @see {@link fromEventPattern}\n *\n * @param {FromEventTarget<T>} target The DOM EventTarget, Node.js\n * EventEmitter, JQuery-like event target, NodeList or HTMLCollection to attach the event handler to.\n * @param {string} eventName The event name of interest, being emitted by the\n * `target`.\n * @param {EventListenerOptions} [options] Options to pass through to addEventListener\n * @return {Observable<T>}\n * @name fromEvent\n */\n\nvar __read$6 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$6 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$6(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Creates an Observable from an API based on addHandler/removeHandler\n * functions.\n *\n * <span class=\"informal\">Converts any addHandler/removeHandler API to an\n * Observable.</span>\n *\n * <img src=\"./img/fromEventPattern.png\" width=\"100%\">\n *\n * Creates an Observable by using the `addHandler` and `removeHandler`\n * functions to add and remove the handlers. The `addHandler` is\n * called when the output Observable is subscribed, and `removeHandler` is\n * called when the Subscription is unsubscribed.\n *\n * @example <caption>Emits clicks happening on the DOM document</caption>\n * function addClickHandler(handler) {\n *   document.addEventListener('click', handler);\n * }\n *\n * function removeClickHandler(handler) {\n *   document.removeEventListener('click', handler);\n * }\n *\n * var clicks = fromEventPattern(\n *   addClickHandler,\n *   removeClickHandler\n * );\n * clicks.subscribe(x => console.log(x));\n *\n * @see {@link from}\n * @see {@link fromEvent}\n *\n * @param {function(handler: Function): any} addHandler A function that takes\n * a `handler` function as argument and attaches it somehow to the actual\n * source of events.\n * @param {function(handler: Function, signal?: any): void} [removeHandler] An optional function that\n * takes a `handler` function as argument and removes it in case it was\n * previously attached using `addHandler`. if addHandler returns signal to teardown when remove,\n * removeHandler function will forward it.\n * @return {Observable<T>}\n * @name fromEventPattern\n */\n\n/**\n * Decides at subscription time which Observable will actually be subscribed.\n *\n * <span class=\"informal\">`If` statement for Observables.</span>\n *\n * `if` accepts a condition function and two Observables. When\n * an Observable returned by the operator is subscribed, condition function will be called.\n * Based on what boolean it returns at that moment, consumer will subscribe either to\n * the first Observable (if condition was true) or to the second (if condition was false). Condition\n * function may also not return anything - in that case condition will be evaluated as false and\n * second Observable will be subscribed.\n *\n * Note that Observables for both cases (true and false) are optional. If condition points to an Observable that\n * was left undefined, resulting stream will simply complete immediately. That allows you to, rather\n * then controlling which Observable will be subscribed, decide at runtime if consumer should have access\n * to given Observable or not.\n *\n * If you have more complex logic that requires decision between more than two Observables, {@link defer}\n * will probably be a better choice. Actually `if` can be easily implemented with {@link defer}\n * and exists only for convenience and readability reasons.\n *\n *\n * @example <caption>Change at runtime which Observable will be subscribed</caption>\n * let subscribeToFirst;\n * const firstOrSecond = Rx.Observable.if(\n *   () => subscribeToFirst,\n *   Rx.Observable.of('first'),\n *   Rx.Observable.of('second')\n * );\n *\n * subscribeToFirst = true;\n * firstOrSecond.subscribe(value => console.log(value));\n *\n * // Logs:\n * // \"first\"\n *\n * subscribeToFirst = false;\n * firstOrSecond.subscribe(value => console.log(value));\n *\n * // Logs:\n * // \"second\"\n *\n *\n * @example <caption>Control an access to an Observable</caption>\n * let accessGranted;\n * const observableIfYouHaveAccess = Rx.Observable.if(\n *   () => accessGranted,\n *   Rx.Observable.of('It seems you have an access...') // Note that only one Observable is passed to the operator.\n * );\n *\n * accessGranted = true;\n * observableIfYouHaveAccess.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('The end')\n * );\n *\n * // Logs:\n * // \"It seems you have an access...\"\n * // \"The end\"\n *\n * accessGranted = false;\n * observableIfYouHaveAccess.subscribe(\n *   value => console.log(value),\n *   err => {},\n *   () => console.log('The end')\n * );\n *\n * // Logs:\n * // \"The end\"\n *\n * @see {@link defer}\n *\n * @param {function(): boolean} condition Condition which Observable should be chosen.\n * @param {Observable} [trueObservable] An Observable that will be subscribed if condition is true.\n * @param {Observable} [falseObservable] An Observable that will be subscribed if condition is false.\n * @return {Observable} Either first or second Observable, depending on condition.\n * @static true\n * @name iif\n * @owner Observable\n */\n\nfunction isNumeric(val) {\n    // parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n    // ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n    // subtraction forces infinities to NaN\n    // adding 1 corrects loss of precision from parseFloat (#15100)\n    return !isArray(val) && (val - parseFloat(val) + 1) >= 0;\n}\n\n/**\n * Creates an Observable that emits sequential numbers every specified\n * interval of time, on a specified IScheduler.\n *\n * <span class=\"informal\">Emits incremental numbers periodically in time.\n * </span>\n *\n * <img src=\"./img/interval.png\" width=\"100%\">\n *\n * `interval` returns an Observable that emits an infinite sequence of\n * ascending integers, with a constant interval of time of your choosing\n * between those emissions. The first emission is not sent immediately, but\n * only after the first period has passed. By default, this operator uses the\n * `async` IScheduler to provide a notion of time, but you may pass any\n * IScheduler to it.\n *\n * @example <caption>Emits ascending numbers, one every second (1000ms)</caption>\n * var numbers = Rx.Observable.interval(1000);\n * numbers.subscribe(x => console.log(x));\n *\n * @see {@link timer}\n * @see {@link delay}\n *\n * @param {number} [period=0] The interval size in milliseconds (by default)\n * or the time unit determined by the scheduler's clock.\n * @param {Scheduler} [scheduler=async] The IScheduler to use for scheduling\n * the emission of values, and providing a notion of \"time\".\n * @return {Observable} An Observable that emits a sequential number each time\n * interval.\n * @static true\n * @name interval\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Creates an output Observable which concurrently emits all values from every\n * given input Observable.\n *\n * <span class=\"informal\">Flattens multiple Observables together by blending\n * their values into one Observable.</span>\n *\n * <img src=\"./img/merge.png\" width=\"100%\">\n *\n * `merge` subscribes to each given input Observable (as arguments), and simply\n * forwards (without doing any transformation) all the values from all the input\n * Observables to the output Observable. The output Observable only completes\n * once all input Observables have completed. Any error delivered by an input\n * Observable will be immediately emitted on the output Observable.\n *\n * @example <caption>Merge together two Observables: 1s interval and clicks</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var timer = Rx.Observable.interval(1000);\n * var clicksOrTimer = Rx.Observable.merge(clicks, timer);\n * clicksOrTimer.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // timer will emit ascending values, one every second(1000ms) to console\n * // clicks logs MouseEvents to console everytime the \"document\" is clicked\n * // Since the two streams are merged you see these happening\n * // as they occur.\n *\n * @example <caption>Merge together 3 Observables, but only 2 run concurrently</caption>\n * var timer1 = Rx.Observable.interval(1000).take(10);\n * var timer2 = Rx.Observable.interval(2000).take(6);\n * var timer3 = Rx.Observable.interval(500).take(10);\n * var concurrent = 2; // the argument\n * var merged = Rx.Observable.merge(timer1, timer2, timer3, concurrent);\n * merged.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // - First timer1 and timer2 will run concurrently\n * // - timer1 will emit a value every 1000ms for 10 iterations\n * // - timer2 will emit a value every 2000ms for 6 iterations\n * // - after timer1 hits it's max iteration, timer2 will\n * //   continue, and timer3 will start to run concurrently with timer2\n * // - when timer2 hits it's max iteration it terminates, and\n * //   timer3 will continue to emit a value every 500ms until it is complete\n *\n * @see {@link mergeAll}\n * @see {@link mergeMap}\n * @see {@link mergeMapTo}\n * @see {@link mergeScan}\n *\n * @param {...ObservableInput} observables Input Observables to merge together.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @param {Scheduler} [scheduler=null] The IScheduler to use for managing\n * concurrency of input Observables.\n * @return {Observable} an Observable that emits items that are the result of\n * every input Observable.\n * @static true\n * @name merge\n * @owner Observable\n */\nfunction merge() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var concurrent = Number.POSITIVE_INFINITY;\n    var scheduler = null;\n    var last = observables[observables.length - 1];\n    if (isScheduler(last)) {\n        scheduler = observables.pop();\n        if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {\n            concurrent = observables.pop();\n        }\n    }\n    else if (typeof last === 'number') {\n        concurrent = observables.pop();\n    }\n    if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable) {\n        return observables[0];\n    }\n    return mergeAll(concurrent)(fromArray(observables, scheduler));\n}\n\n/**\n * An Observable that emits no items to the Observer and never completes.\n *\n * <img src=\"./img/never.png\" width=\"100%\">\n *\n * A simple Observable that emits neither values nor errors nor the completion\n * notification. It can be used for testing purposes or for composing with other\n * Observables. Please note that by never emitting a complete notification, this\n * Observable keeps the subscription from being disposed automatically.\n * Subscriptions need to be manually disposed.\n *\n * @example <caption>Emit the number 7, then never emit anything else (not even complete).</caption>\n * function info() {\n *   console.log('Will not be called');\n * }\n * var result = NEVER.startWith(7);\n * result.subscribe(x => console.log(x), info, info);\n *\n * @see {@link create}\n * @see {@link EMPTY}\n * @see {@link of}\n * @see {@link throwError}\n */\n\n/**\n * @deprecated Deprecated in favor of using NEVER constant.\n */\n\nvar __read$7 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$7 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$7(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * When any of the provided Observable emits an complete or error notification, it immediately subscribes to the next one\n * that was passed.\n *\n * <span class=\"informal\">Execute series of Observables no matter what, even if it means swallowing errors.</span>\n *\n * <img src=\"./img/onErrorResumeNext.png\" width=\"100%\">\n *\n * `onErrorResumeNext` Will subscribe to each observable source it is provided, in order.\n * If the source it's subscribed to emits an error or completes, it will move to the next source\n * without error.\n *\n * If `onErrorResumeNext` is provided no arguments, or a single, empty array, it will return {@link EMPTY}.\n *\n * `onErrorResumeNext` is basically {@link concat}, only it will continue, even if one of its\n * sources emits an error.\n *\n * Note that there is no way to handle any errors thrown by sources via the resuult of\n * `onErrorResumeNext`. If you want to handle errors thrown in any given source, you can\n * always use the {@link catchError} operator on them before passing them into `onErrorResumeNext`.\n *\n * @example <caption>Subscribe to the next Observable after map fails</caption>\n * import { onErrorResumeNext, of } from 'rxjs/create';\n * import { map } from 'rxjs/operators';\n *\n * onErrorResumeNext(\n *  of(1, 2, 3, 0).pipe(\n *    map(x => {\n *      if (x === 0) throw Error();\n *      return 10 / x;\n *    })\n *  ),\n *  of(1, 2, 3),\n * )\n * .subscribe(\n *   val => console.log(val),\n *   err => console.log(err),          // Will never be called.\n *   () => console.log('done')\n * );\n *\n * // Logs:\n * // 10\n * // 5\n * // 3.3333333333333335\n * // 1\n * // 2\n * // 3\n * // \"done\"\n *\n * @see {@link concat}\n * @see {@link catch}\n *\n * @param {...ObservableInput} sources Observables (or anything that *is* observable) passed either directly or as an array.\n * @return {Observable} An Observable that concatenates all sources, one after the other,\n * ignoring all errors, such that any error causes it to move on to the next source.\n */\n\n/**\n * Convert an object into an observable sequence of [key, value] pairs\n * using an optional IScheduler to enumerate the object.\n *\n * @example <caption>Converts a javascript object to an Observable</caption>\n * var obj = {\n *   foo: 42,\n *   bar: 56,\n *   baz: 78\n * };\n *\n * var source = Rx.Observable.pairs(obj);\n *\n * var subscription = source.subscribe(\n *   function (x) {\n *     console.log('Next: %s', x);\n *   },\n *   function (err) {\n *     console.log('Error: %s', err);\n *   },\n *   function () {\n *     console.log('Completed');\n *   });\n *\n * @param {Object} obj The object to inspect and turn into an\n * Observable sequence.\n * @param {Scheduler} [scheduler] An optional IScheduler to run the\n * enumeration of the input sequence on.\n * @returns {(Observable<[string, T]>)} An observable sequence of\n * [key, value] pairs from the object.\n */\n\n/** @internal */\n\nvar __extends$32 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RaceSubscriber = /** @class */ (function (_super) {\n    __extends$32(RaceSubscriber, _super);\n    function RaceSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasFirst = false;\n        _this.observables = [];\n        _this.subscriptions = [];\n        return _this;\n    }\n    RaceSubscriber.prototype._next = function (observable) {\n        this.observables.push(observable);\n    };\n    RaceSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            for (var i = 0; i < len && !this.hasFirst; i++) {\n                var observable = observables[i];\n                var subscription = subscribeToResult(this, observable, observable, i);\n                if (this.subscriptions) {\n                    this.subscriptions.push(subscription);\n                }\n                this.add(subscription);\n            }\n            this.observables = null;\n        }\n    };\n    RaceSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (!this.hasFirst) {\n            this.hasFirst = true;\n            for (var i = 0; i < this.subscriptions.length; i++) {\n                if (i !== outerIndex) {\n                    var subscription = this.subscriptions[i];\n                    subscription.unsubscribe();\n                    this.remove(subscription);\n                }\n            }\n            this.subscriptions = null;\n        }\n        this.destination.next(innerValue);\n    };\n    return RaceSubscriber;\n}(OuterSubscriber));\n\n/**\n * Creates an Observable that emits a sequence of numbers within a specified\n * range.\n *\n * <span class=\"informal\">Emits a sequence of numbers in a range.</span>\n *\n * <img src=\"./img/range.png\" width=\"100%\">\n *\n * `range` operator emits a range of sequential integers, in order, where you\n * select the `start` of the range and its `length`. By default, uses no\n * IScheduler and just delivers the notifications synchronously, but may use\n * an optional IScheduler to regulate those deliveries.\n *\n * @example <caption>Emits the numbers 1 to 10</caption>\n * var numbers = Rx.Observable.range(1, 10);\n * numbers.subscribe(x => console.log(x));\n *\n * @see {@link timer}\n * @see {@link interval}\n *\n * @param {number} [start=0] The value of the first integer in the sequence.\n * @param {number} [count=0] The number of sequential integers to generate.\n * @param {Scheduler} [scheduler] A {@link IScheduler} to use for scheduling\n * the emissions of the notifications.\n * @return {Observable} An Observable of numbers that emits a finite range of\n * sequential integers.\n * @static true\n * @name range\n * @owner Observable\n */\n\n/** @internal */\n\n/**\n * Creates an Observable that starts emitting after an `initialDelay` and\n * emits ever increasing numbers after each `period` of time thereafter.\n *\n * <span class=\"informal\">Its like {@link interval}, but you can specify when\n * should the emissions start.</span>\n *\n * <img src=\"./img/timer.png\" width=\"100%\">\n *\n * `timer` returns an Observable that emits an infinite sequence of ascending\n * integers, with a constant interval of time, `period` of your choosing\n * between those emissions. The first emission happens after the specified\n * `initialDelay`. The initial delay may be a {@link Date}. By default, this\n * operator uses the `async` IScheduler to provide a notion of time, but you\n * may pass any IScheduler to it. If `period` is not specified, the output\n * Observable emits only one value, `0`. Otherwise, it emits an infinite\n * sequence.\n *\n * @example <caption>Emits ascending numbers, one every second (1000ms), starting after 3 seconds</caption>\n * var numbers = Rx.Observable.timer(3000, 1000);\n * numbers.subscribe(x => console.log(x));\n *\n * @example <caption>Emits one number after five seconds</caption>\n * var numbers = Rx.Observable.timer(5000);\n * numbers.subscribe(x => console.log(x));\n *\n * @see {@link interval}\n * @see {@link delay}\n *\n * @param {number|Date} [dueTime] The initial delay time to wait before\n * emitting the first value of `0`.\n * @param {number|SchedulerLike} [periodOrScheduler] The period of time between emissions of the\n * subsequent numbers.\n * @param {SchedulerLike} [scheduler=async] The IScheduler to use for scheduling\n * the emission of values, and providing a notion of \"time\".\n * @return {Observable} An Observable that emits a `0` after the\n * `initialDelay` and ever increasing numbers after each `period` of time\n * thereafter.\n * @static true\n * @name timer\n * @owner Observable\n */\n\n/**\n * Creates an Observable that uses a resource which will be disposed at the same time as the Observable.\n *\n * <span class=\"informal\">Use it when you catch yourself cleaning up after an Observable.</span>\n *\n * `using` is a factory operator, which accepts two functions. First function returns a disposable resource.\n * It can be an arbitrary object that implements `unsubscribe` method. Second function will be injected with\n * that object and should return an Observable. That Observable can use resource object during its execution.\n * Both functions passed to `using` will be called every time someone subscribes - neither an Observable nor\n * resource object will be shared in any way between subscriptions.\n *\n * When Observable returned by `using` is subscribed, Observable returned from the second function will be subscribed\n * as well. All its notifications (nexted values, completion and error events) will be emitted unchanged by the output\n * Observable. If however someone unsubscribes from the Observable or source Observable completes or errors by itself,\n * the `unsubscribe` method on resource object will be called. This can be used to do any necessary clean up, which\n * otherwise would have to be handled by hand. Note that complete or error notifications are not emitted when someone\n * cancels subscription to an Observable via `unsubscribe`, so `using` can be used as a hook, allowing you to make\n * sure that all resources which need to exist during an Observable execution will be disposed at appropriate time.\n *\n * @see {@link defer}\n *\n * @param {function(): ISubscription} resourceFactory A function which creates any resource object\n * that implements `unsubscribe` method.\n * @param {function(resource: ISubscription): Observable<T>} observableFactory A function which\n * creates an Observable, that can use injected resource object.\n * @return {Observable<T>} An Observable that behaves the same as Observable returned by `observableFactory`, but\n * which - when completed, errored or unsubscribed - will also call `unsubscribe` on created resource object.\n */\n\nvar __extends$33 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Combines multiple Observables to create an Observable whose values are calculated from the values, in order, of each\n * of its input Observables.\n *\n * If the latest parameter is a function, this function is used to compute the created value from the input values.\n * Otherwise, an array of the input values is returned.\n *\n * @example <caption>Combine age and name from different sources</caption>\n *\n * let age$ = Observable.of<number>(27, 25, 29);\n * let name$ = Observable.of<string>('Foo', 'Bar', 'Beer');\n * let isDev$ = Observable.of<boolean>(true, true, false);\n *\n * Observable\n *     .zip(age$,\n *          name$,\n *          isDev$,\n *          (age: number, name: string, isDev: boolean) => ({ age, name, isDev }))\n *     .subscribe(x => console.log(x));\n *\n * // outputs\n * // { age: 27, name: 'Foo', isDev: true }\n * // { age: 25, name: 'Bar', isDev: true }\n * // { age: 29, name: 'Beer', isDev: false }\n *\n * @param observables\n * @return {Observable<R>}\n * @static true\n * @name zip\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ZipSubscriber = /** @class */ (function (_super) {\n    __extends$33(ZipSubscriber, _super);\n    function ZipSubscriber(destination, resultSelector, values) {\n        if (values === void 0) { values = Object.create(null); }\n        var _this = _super.call(this, destination) || this;\n        _this.iterators = [];\n        _this.active = 0;\n        _this.resultSelector = (typeof resultSelector === 'function') ? resultSelector : null;\n        _this.values = values;\n        return _this;\n    }\n    ZipSubscriber.prototype._next = function (value) {\n        var iterators = this.iterators;\n        if (isArray(value)) {\n            iterators.push(new StaticArrayIterator(value));\n        }\n        else if (typeof value[iterator] === 'function') {\n            iterators.push(new StaticIterator(value[iterator]()));\n        }\n        else {\n            iterators.push(new ZipBufferIterator(this.destination, this, value));\n        }\n    };\n    ZipSubscriber.prototype._complete = function () {\n        var iterators = this.iterators;\n        var len = iterators.length;\n        if (len === 0) {\n            this.destination.complete();\n            return;\n        }\n        this.active = len;\n        for (var i = 0; i < len; i++) {\n            var iterator$$1 = iterators[i];\n            if (iterator$$1.stillUnsubscribed) {\n                this.add(iterator$$1.subscribe(iterator$$1, i));\n            }\n            else {\n                this.active--; // not an observable\n            }\n        }\n    };\n    ZipSubscriber.prototype.notifyInactive = function () {\n        this.active--;\n        if (this.active === 0) {\n            this.destination.complete();\n        }\n    };\n    ZipSubscriber.prototype.checkIterators = function () {\n        var iterators = this.iterators;\n        var len = iterators.length;\n        var destination = this.destination;\n        // abort if not all of them have values\n        for (var i = 0; i < len; i++) {\n            var iterator$$1 = iterators[i];\n            if (typeof iterator$$1.hasValue === 'function' && !iterator$$1.hasValue()) {\n                return;\n            }\n        }\n        var shouldComplete = false;\n        var args = [];\n        for (var i = 0; i < len; i++) {\n            var iterator$$1 = iterators[i];\n            var result = iterator$$1.next();\n            // check to see if it's completed now that you've gotten\n            // the next value.\n            if (iterator$$1.hasCompleted()) {\n                shouldComplete = true;\n            }\n            if (result.done) {\n                destination.complete();\n                return;\n            }\n            args.push(result.value);\n        }\n        if (this.resultSelector) {\n            this._tryresultSelector(args);\n        }\n        else {\n            destination.next(args);\n        }\n        if (shouldComplete) {\n            destination.complete();\n        }\n    };\n    ZipSubscriber.prototype._tryresultSelector = function (args) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, args);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return ZipSubscriber;\n}(Subscriber));\nvar StaticIterator = /** @class */ (function () {\n    function StaticIterator(iterator$$1) {\n        this.iterator = iterator$$1;\n        this.nextResult = iterator$$1.next();\n    }\n    StaticIterator.prototype.hasValue = function () {\n        return true;\n    };\n    StaticIterator.prototype.next = function () {\n        var result = this.nextResult;\n        this.nextResult = this.iterator.next();\n        return result;\n    };\n    StaticIterator.prototype.hasCompleted = function () {\n        var nextResult = this.nextResult;\n        return nextResult && nextResult.done;\n    };\n    return StaticIterator;\n}());\nvar StaticArrayIterator = /** @class */ (function () {\n    function StaticArrayIterator(array) {\n        this.array = array;\n        this.index = 0;\n        this.length = 0;\n        this.length = array.length;\n    }\n    StaticArrayIterator.prototype[iterator] = function () {\n        return this;\n    };\n    StaticArrayIterator.prototype.next = function (value) {\n        var i = this.index++;\n        var array = this.array;\n        return i < this.length ? { value: array[i], done: false } : { value: null, done: true };\n    };\n    StaticArrayIterator.prototype.hasValue = function () {\n        return this.array.length > this.index;\n    };\n    StaticArrayIterator.prototype.hasCompleted = function () {\n        return this.array.length === this.index;\n    };\n    return StaticArrayIterator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ZipBufferIterator = /** @class */ (function (_super) {\n    __extends$33(ZipBufferIterator, _super);\n    function ZipBufferIterator(destination, parent, observable) {\n        var _this = _super.call(this, destination) || this;\n        _this.parent = parent;\n        _this.observable = observable;\n        _this.stillUnsubscribed = true;\n        _this.buffer = [];\n        _this.isComplete = false;\n        return _this;\n    }\n    ZipBufferIterator.prototype[iterator] = function () {\n        return this;\n    };\n    // NOTE: there is actually a name collision here with Subscriber.next and Iterator.next\n    //    this is legit because `next()` will never be called by a subscription in this case.\n    ZipBufferIterator.prototype.next = function () {\n        var buffer = this.buffer;\n        if (buffer.length === 0 && this.isComplete) {\n            return { value: null, done: true };\n        }\n        else {\n            return { value: buffer.shift(), done: false };\n        }\n    };\n    ZipBufferIterator.prototype.hasValue = function () {\n        return this.buffer.length > 0;\n    };\n    ZipBufferIterator.prototype.hasCompleted = function () {\n        return this.buffer.length === 0 && this.isComplete;\n    };\n    ZipBufferIterator.prototype.notifyComplete = function () {\n        if (this.buffer.length > 0) {\n            this.isComplete = true;\n            this.parent.notifyInactive();\n        }\n        else {\n            this.destination.complete();\n        }\n    };\n    ZipBufferIterator.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.buffer.push(innerValue);\n        this.parent.checkIterators();\n    };\n    ZipBufferIterator.prototype.subscribe = function (value, index) {\n        return subscribeToResult(this, this.observable, this, index);\n    };\n    return ZipBufferIterator;\n}(OuterSubscriber));\n\n/* Observable */\n\nvar __extends$34 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Ignores source values for a duration determined by another Observable, then\n * emits the most recent value from the source Observable, then repeats this\n * process.\n *\n * <span class=\"informal\">It's like {@link auditTime}, but the silencing\n * duration is determined by a second Observable.</span>\n *\n * <img src=\"./img/audit.png\" width=\"100%\">\n *\n * `audit` is similar to `throttle`, but emits the last value from the silenced\n * time window, instead of the first value. `audit` emits the most recent value\n * from the source Observable on the output Observable as soon as its internal\n * timer becomes disabled, and ignores source values while the timer is enabled.\n * Initially, the timer is disabled. As soon as the first source value arrives,\n * the timer is enabled by calling the `durationSelector` function with the\n * source value, which returns the \"duration\" Observable. When the duration\n * Observable emits a value or completes, the timer is disabled, then the most\n * recent source value is emitted on the output Observable, and this process\n * repeats for the next source value.\n *\n * @example <caption>Emit clicks at a rate of at most one click per second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.audit(ev => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link auditTime}\n * @see {@link debounce}\n * @see {@link delayWhen}\n * @see {@link sample}\n * @see {@link throttle}\n *\n * @param {function(value: T): SubscribableOrPromise} durationSelector A function\n * that receives a value from the source Observable, for computing the silencing\n * duration, returned as an Observable or a Promise.\n * @return {Observable<T>} An Observable that performs rate-limiting of\n * emissions from the source Observable.\n * @method audit\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AuditSubscriber = /** @class */ (function (_super) {\n    __extends$34(AuditSubscriber, _super);\n    function AuditSubscriber(destination, durationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.durationSelector = durationSelector;\n        _this.hasValue = false;\n        return _this;\n    }\n    AuditSubscriber.prototype._next = function (value) {\n        this.value = value;\n        this.hasValue = true;\n        if (!this.throttled) {\n            var duration = tryCatch(this.durationSelector)(value);\n            if (duration === errorObject) {\n                this.destination.error(errorObject.e);\n            }\n            else {\n                var innerSubscription = subscribeToResult(this, duration);\n                if (innerSubscription.closed) {\n                    this.clearThrottle();\n                }\n                else {\n                    this.add(this.throttled = innerSubscription);\n                }\n            }\n        }\n    };\n    AuditSubscriber.prototype.clearThrottle = function () {\n        var _a = this, value = _a.value, hasValue = _a.hasValue, throttled = _a.throttled;\n        if (throttled) {\n            this.remove(throttled);\n            this.throttled = null;\n            throttled.unsubscribe();\n        }\n        if (hasValue) {\n            this.value = null;\n            this.hasValue = false;\n            this.destination.next(value);\n        }\n    };\n    AuditSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex) {\n        this.clearThrottle();\n    };\n    AuditSubscriber.prototype.notifyComplete = function () {\n        this.clearThrottle();\n    };\n    return AuditSubscriber;\n}(OuterSubscriber));\n\n/**\n * Ignores source values for `duration` milliseconds, then emits the most recent\n * value from the source Observable, then repeats this process.\n *\n * <span class=\"informal\">When it sees a source values, it ignores that plus\n * the next ones for `duration` milliseconds, and then it emits the most recent\n * value from the source.</span>\n *\n * <img src=\"./img/auditTime.png\" width=\"100%\">\n *\n * `auditTime` is similar to `throttleTime`, but emits the last value from the\n * silenced time window, instead of the first value. `auditTime` emits the most\n * recent value from the source Observable on the output Observable as soon as\n * its internal timer becomes disabled, and ignores source values while the\n * timer is enabled. Initially, the timer is disabled. As soon as the first\n * source value arrives, the timer is enabled. After `duration` milliseconds (or\n * the time unit determined internally by the optional `scheduler`) has passed,\n * the timer is disabled, then the most recent source value is emitted on the\n * output Observable, and this process repeats for the next source value.\n * Optionally takes a {@link IScheduler} for managing timers.\n *\n * @example <caption>Emit clicks at a rate of at most one click per second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.auditTime(1000);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link audit}\n * @see {@link debounceTime}\n * @see {@link delay}\n * @see {@link sampleTime}\n * @see {@link throttleTime}\n *\n * @param {number} duration Time to wait before emitting the most recent source\n * value, measured in milliseconds or the time unit determined internally\n * by the optional `scheduler`.\n * @param {Scheduler} [scheduler=async] The {@link IScheduler} to use for\n * managing the timers that handle the rate-limiting behavior.\n * @return {Observable<T>} An Observable that performs rate-limiting of\n * emissions from the source Observable.\n * @method auditTime\n * @owner Observable\n */\n\nvar __extends$35 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Buffers the source Observable values until `closingNotifier` emits.\n *\n * <span class=\"informal\">Collects values from the past as an array, and emits\n * that array only when another Observable emits.</span>\n *\n * <img src=\"./img/buffer.png\" width=\"100%\">\n *\n * Buffers the incoming Observable values until the given `closingNotifier`\n * Observable emits a value, at which point it emits the buffer on the output\n * Observable and starts a new buffer internally, awaiting the next time\n * `closingNotifier` emits.\n *\n * @example <caption>On every click, emit array of most recent interval events</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var interval = Rx.Observable.interval(1000);\n * var buffered = interval.buffer(clicks);\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link bufferCount}\n * @see {@link bufferTime}\n * @see {@link bufferToggle}\n * @see {@link bufferWhen}\n * @see {@link window}\n *\n * @param {Observable<any>} closingNotifier An Observable that signals the\n * buffer to be emitted on the output Observable.\n * @return {Observable<T[]>} An Observable of buffers, which are arrays of\n * values.\n * @method buffer\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferSubscriber = /** @class */ (function (_super) {\n    __extends$35(BufferSubscriber, _super);\n    function BufferSubscriber(destination, closingNotifier) {\n        var _this = _super.call(this, destination) || this;\n        _this.buffer = [];\n        _this.add(subscribeToResult(_this, closingNotifier));\n        return _this;\n    }\n    BufferSubscriber.prototype._next = function (value) {\n        this.buffer.push(value);\n    };\n    BufferSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var buffer = this.buffer;\n        this.buffer = [];\n        this.destination.next(buffer);\n    };\n    return BufferSubscriber;\n}(OuterSubscriber));\n\nvar __extends$36 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Buffers the source Observable values until the size hits the maximum\n * `bufferSize` given.\n *\n * <span class=\"informal\">Collects values from the past as an array, and emits\n * that array only when its size reaches `bufferSize`.</span>\n *\n * <img src=\"./img/bufferCount.png\" width=\"100%\">\n *\n * Buffers a number of values from the source Observable by `bufferSize` then\n * emits the buffer and clears it, and starts a new buffer each\n * `startBufferEvery` values. If `startBufferEvery` is not provided or is\n * `null`, then new buffers are started immediately at the start of the source\n * and when each buffer closes and is emitted.\n *\n * @example <caption>Emit the last two click events as an array</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferCount(2);\n * buffered.subscribe(x => console.log(x));\n *\n * @example <caption>On every click, emit the last two click events as an array</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferCount(2, 1);\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferTime}\n * @see {@link bufferToggle}\n * @see {@link bufferWhen}\n * @see {@link pairwise}\n * @see {@link windowCount}\n *\n * @param {number} bufferSize The maximum size of the buffer emitted.\n * @param {number} [startBufferEvery] Interval at which to start a new buffer.\n * For example if `startBufferEvery` is `2`, then a new buffer will be started\n * on every other value from the source. A new buffer is started at the\n * beginning of the source by default.\n * @return {Observable<T[]>} An Observable of arrays of buffered values.\n * @method bufferCount\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferCountSubscriber = /** @class */ (function (_super) {\n    __extends$36(BufferCountSubscriber, _super);\n    function BufferCountSubscriber(destination, bufferSize) {\n        var _this = _super.call(this, destination) || this;\n        _this.bufferSize = bufferSize;\n        _this.buffer = [];\n        return _this;\n    }\n    BufferCountSubscriber.prototype._next = function (value) {\n        var buffer = this.buffer;\n        buffer.push(value);\n        if (buffer.length == this.bufferSize) {\n            this.destination.next(buffer);\n            this.buffer = [];\n        }\n    };\n    BufferCountSubscriber.prototype._complete = function () {\n        var buffer = this.buffer;\n        if (buffer.length > 0) {\n            this.destination.next(buffer);\n        }\n        _super.prototype._complete.call(this);\n    };\n    return BufferCountSubscriber;\n}(Subscriber));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferSkipCountSubscriber = /** @class */ (function (_super) {\n    __extends$36(BufferSkipCountSubscriber, _super);\n    function BufferSkipCountSubscriber(destination, bufferSize, startBufferEvery) {\n        var _this = _super.call(this, destination) || this;\n        _this.bufferSize = bufferSize;\n        _this.startBufferEvery = startBufferEvery;\n        _this.buffers = [];\n        _this.count = 0;\n        return _this;\n    }\n    BufferSkipCountSubscriber.prototype._next = function (value) {\n        var _a = this, bufferSize = _a.bufferSize, startBufferEvery = _a.startBufferEvery, buffers = _a.buffers, count = _a.count;\n        this.count++;\n        if (count % startBufferEvery === 0) {\n            buffers.push([]);\n        }\n        for (var i = buffers.length; i--;) {\n            var buffer = buffers[i];\n            buffer.push(value);\n            if (buffer.length === bufferSize) {\n                buffers.splice(i, 1);\n                this.destination.next(buffer);\n            }\n        }\n    };\n    BufferSkipCountSubscriber.prototype._complete = function () {\n        var _a = this, buffers = _a.buffers, destination = _a.destination;\n        while (buffers.length > 0) {\n            var buffer = buffers.shift();\n            if (buffer.length > 0) {\n                destination.next(buffer);\n            }\n        }\n        _super.prototype._complete.call(this);\n    };\n    return BufferSkipCountSubscriber;\n}(Subscriber));\n\nvar __extends$37 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Buffers the source Observable values for a specific time period.\n *\n * <span class=\"informal\">Collects values from the past as an array, and emits\n * those arrays periodically in time.</span>\n *\n * <img src=\"./img/bufferTime.png\" width=\"100%\">\n *\n * Buffers values from the source for a specific time duration `bufferTimeSpan`.\n * Unless the optional argument `bufferCreationInterval` is given, it emits and\n * resets the buffer every `bufferTimeSpan` milliseconds. If\n * `bufferCreationInterval` is given, this operator opens the buffer every\n * `bufferCreationInterval` milliseconds and closes (emits and resets) the\n * buffer every `bufferTimeSpan` milliseconds. When the optional argument\n * `maxBufferSize` is specified, the buffer will be closed either after\n * `bufferTimeSpan` milliseconds or when it contains `maxBufferSize` elements.\n *\n * @example <caption>Every second, emit an array of the recent click events</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferTime(1000);\n * buffered.subscribe(x => console.log(x));\n *\n * @example <caption>Every 5 seconds, emit the click events from the next 2 seconds</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferTime(2000, 5000);\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n * @see {@link bufferToggle}\n * @see {@link bufferWhen}\n * @see {@link windowTime}\n *\n * @param {number} bufferTimeSpan The amount of time to fill each buffer array.\n * @param {number} [bufferCreationInterval] The interval at which to start new\n * buffers.\n * @param {number} [maxBufferSize] The maximum buffer size.\n * @param {Scheduler} [scheduler=async] The scheduler on which to schedule the\n * intervals that determine buffer boundaries.\n * @return {Observable<T[]>} An observable of arrays of buffered values.\n * @method bufferTime\n * @owner Observable\n */\n\nvar Context = /** @class */ (function () {\n    function Context() {\n        this.buffer = [];\n    }\n    return Context;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferTimeSubscriber = /** @class */ (function (_super) {\n    __extends$37(BufferTimeSubscriber, _super);\n    function BufferTimeSubscriber(destination, bufferTimeSpan, bufferCreationInterval, maxBufferSize, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.bufferTimeSpan = bufferTimeSpan;\n        _this.bufferCreationInterval = bufferCreationInterval;\n        _this.maxBufferSize = maxBufferSize;\n        _this.scheduler = scheduler;\n        _this.contexts = [];\n        var context = _this.openContext();\n        _this.timespanOnly = bufferCreationInterval == null || bufferCreationInterval < 0;\n        if (_this.timespanOnly) {\n            var timeSpanOnlyState = { subscriber: _this, context: context, bufferTimeSpan: bufferTimeSpan };\n            _this.add(context.closeAction = scheduler.schedule(dispatchBufferTimeSpanOnly, bufferTimeSpan, timeSpanOnlyState));\n        }\n        else {\n            var closeState = { subscriber: _this, context: context };\n            var creationState = { bufferTimeSpan: bufferTimeSpan, bufferCreationInterval: bufferCreationInterval, subscriber: _this, scheduler: scheduler };\n            _this.add(context.closeAction = scheduler.schedule(dispatchBufferClose, bufferTimeSpan, closeState));\n            _this.add(scheduler.schedule(dispatchBufferCreation, bufferCreationInterval, creationState));\n        }\n        return _this;\n    }\n    BufferTimeSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        var len = contexts.length;\n        var filledBufferContext;\n        for (var i = 0; i < len; i++) {\n            var context = contexts[i];\n            var buffer = context.buffer;\n            buffer.push(value);\n            if (buffer.length == this.maxBufferSize) {\n                filledBufferContext = context;\n            }\n        }\n        if (filledBufferContext) {\n            this.onBufferFull(filledBufferContext);\n        }\n    };\n    BufferTimeSubscriber.prototype._error = function (err) {\n        this.contexts.length = 0;\n        _super.prototype._error.call(this, err);\n    };\n    BufferTimeSubscriber.prototype._complete = function () {\n        var _a = this, contexts = _a.contexts, destination = _a.destination;\n        while (contexts.length > 0) {\n            var context = contexts.shift();\n            destination.next(context.buffer);\n        }\n        _super.prototype._complete.call(this);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    BufferTimeSubscriber.prototype._unsubscribe = function () {\n        this.contexts = null;\n    };\n    BufferTimeSubscriber.prototype.onBufferFull = function (context) {\n        this.closeContext(context);\n        var closeAction = context.closeAction;\n        closeAction.unsubscribe();\n        this.remove(closeAction);\n        if (!this.closed && this.timespanOnly) {\n            context = this.openContext();\n            var bufferTimeSpan = this.bufferTimeSpan;\n            var timeSpanOnlyState = { subscriber: this, context: context, bufferTimeSpan: bufferTimeSpan };\n            this.add(context.closeAction = this.scheduler.schedule(dispatchBufferTimeSpanOnly, bufferTimeSpan, timeSpanOnlyState));\n        }\n    };\n    BufferTimeSubscriber.prototype.openContext = function () {\n        var context = new Context();\n        this.contexts.push(context);\n        return context;\n    };\n    BufferTimeSubscriber.prototype.closeContext = function (context) {\n        this.destination.next(context.buffer);\n        var contexts = this.contexts;\n        var spliceIndex = contexts ? contexts.indexOf(context) : -1;\n        if (spliceIndex >= 0) {\n            contexts.splice(contexts.indexOf(context), 1);\n        }\n    };\n    return BufferTimeSubscriber;\n}(Subscriber));\nfunction dispatchBufferTimeSpanOnly(state) {\n    var subscriber = state.subscriber;\n    var prevContext = state.context;\n    if (prevContext) {\n        subscriber.closeContext(prevContext);\n    }\n    if (!subscriber.closed) {\n        state.context = subscriber.openContext();\n        state.context.closeAction = this.schedule(state, state.bufferTimeSpan);\n    }\n}\nfunction dispatchBufferCreation(state) {\n    var bufferCreationInterval = state.bufferCreationInterval, bufferTimeSpan = state.bufferTimeSpan, subscriber = state.subscriber, scheduler = state.scheduler;\n    var context = subscriber.openContext();\n    var action = this;\n    if (!subscriber.closed) {\n        subscriber.add(context.closeAction = scheduler.schedule(dispatchBufferClose, bufferTimeSpan, { subscriber: subscriber, context: context }));\n        action.schedule(state, bufferCreationInterval);\n    }\n}\nfunction dispatchBufferClose(arg) {\n    var subscriber = arg.subscriber, context = arg.context;\n    subscriber.closeContext(context);\n}\n\nvar __extends$38 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Buffers the source Observable values starting from an emission from\n * `openings` and ending when the output of `closingSelector` emits.\n *\n * <span class=\"informal\">Collects values from the past as an array. Starts\n * collecting only when `opening` emits, and calls the `closingSelector`\n * function to get an Observable that tells when to close the buffer.</span>\n *\n * <img src=\"./img/bufferToggle.png\" width=\"100%\">\n *\n * Buffers values from the source by opening the buffer via signals from an\n * Observable provided to `openings`, and closing and sending the buffers when\n * a Subscribable or Promise returned by the `closingSelector` function emits.\n *\n * @example <caption>Every other second, emit the click events from the next 500ms</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var openings = Rx.Observable.interval(1000);\n * var buffered = clicks.bufferToggle(openings, i =>\n *   i % 2 ? Rx.Observable.interval(500) : Rx.Observable.empty()\n * );\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n * @see {@link bufferTime}\n * @see {@link bufferWhen}\n * @see {@link windowToggle}\n *\n * @param {SubscribableOrPromise<O>} openings A Subscribable or Promise of notifications to start new\n * buffers.\n * @param {function(value: O): SubscribableOrPromise} closingSelector A function that takes\n * the value emitted by the `openings` observable and returns a Subscribable or Promise,\n * which, when it emits, signals that the associated buffer should be emitted\n * and cleared.\n * @return {Observable<T[]>} An observable of arrays of buffered values.\n * @method bufferToggle\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferToggleSubscriber = /** @class */ (function (_super) {\n    __extends$38(BufferToggleSubscriber, _super);\n    function BufferToggleSubscriber(destination, openings, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.openings = openings;\n        _this.closingSelector = closingSelector;\n        _this.contexts = [];\n        _this.add(subscribeToResult(_this, openings));\n        return _this;\n    }\n    BufferToggleSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        var len = contexts.length;\n        for (var i = 0; i < len; i++) {\n            contexts[i].buffer.push(value);\n        }\n    };\n    BufferToggleSubscriber.prototype._error = function (err) {\n        var contexts = this.contexts;\n        while (contexts.length > 0) {\n            var context = contexts.shift();\n            context.subscription.unsubscribe();\n            context.buffer = null;\n            context.subscription = null;\n        }\n        this.contexts = null;\n        _super.prototype._error.call(this, err);\n    };\n    BufferToggleSubscriber.prototype._complete = function () {\n        var contexts = this.contexts;\n        while (contexts.length > 0) {\n            var context = contexts.shift();\n            this.destination.next(context.buffer);\n            context.subscription.unsubscribe();\n            context.buffer = null;\n            context.subscription = null;\n        }\n        this.contexts = null;\n        _super.prototype._complete.call(this);\n    };\n    BufferToggleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        outerValue ? this.closeBuffer(outerValue) : this.openBuffer(innerValue);\n    };\n    BufferToggleSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.closeBuffer(innerSub.context);\n    };\n    BufferToggleSubscriber.prototype.openBuffer = function (value) {\n        try {\n            var closingSelector = this.closingSelector;\n            var closingNotifier = closingSelector.call(this, value);\n            if (closingNotifier) {\n                this.trySubscribe(closingNotifier);\n            }\n        }\n        catch (err) {\n            this._error(err);\n        }\n    };\n    BufferToggleSubscriber.prototype.closeBuffer = function (context) {\n        var contexts = this.contexts;\n        if (contexts && context) {\n            var buffer = context.buffer, subscription = context.subscription;\n            this.destination.next(buffer);\n            contexts.splice(contexts.indexOf(context), 1);\n            this.remove(subscription);\n            subscription.unsubscribe();\n        }\n    };\n    BufferToggleSubscriber.prototype.trySubscribe = function (closingNotifier) {\n        var contexts = this.contexts;\n        var buffer = [];\n        var subscription = new Subscription();\n        var context = { buffer: buffer, subscription: subscription };\n        contexts.push(context);\n        var innerSubscription = subscribeToResult(this, closingNotifier, context);\n        if (!innerSubscription || innerSubscription.closed) {\n            this.closeBuffer(context);\n        }\n        else {\n            innerSubscription.context = context;\n            this.add(innerSubscription);\n            subscription.add(innerSubscription);\n        }\n    };\n    return BufferToggleSubscriber;\n}(OuterSubscriber));\n\nvar __extends$39 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Buffers the source Observable values, using a factory function of closing\n * Observables to determine when to close, emit, and reset the buffer.\n *\n * <span class=\"informal\">Collects values from the past as an array. When it\n * starts collecting values, it calls a function that returns an Observable that\n * tells when to close the buffer and restart collecting.</span>\n *\n * <img src=\"./img/bufferWhen.png\" width=\"100%\">\n *\n * Opens a buffer immediately, then closes the buffer when the observable\n * returned by calling `closingSelector` function emits a value. When it closes\n * the buffer, it immediately opens a new buffer and repeats the process.\n *\n * @example <caption>Emit an array of the last clicks every [1-5] random seconds</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var buffered = clicks.bufferWhen(() =>\n *   Rx.Observable.interval(1000 + Math.random() * 4000)\n * );\n * buffered.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n * @see {@link bufferTime}\n * @see {@link bufferToggle}\n * @see {@link windowWhen}\n *\n * @param {function(): Observable} closingSelector A function that takes no\n * arguments and returns an Observable that signals buffer closure.\n * @return {Observable<T[]>} An observable of arrays of buffered values.\n * @method bufferWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar BufferWhenSubscriber = /** @class */ (function (_super) {\n    __extends$39(BufferWhenSubscriber, _super);\n    function BufferWhenSubscriber(destination, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.closingSelector = closingSelector;\n        _this.subscribing = false;\n        _this.openBuffer();\n        return _this;\n    }\n    BufferWhenSubscriber.prototype._next = function (value) {\n        this.buffer.push(value);\n    };\n    BufferWhenSubscriber.prototype._complete = function () {\n        var buffer = this.buffer;\n        if (buffer) {\n            this.destination.next(buffer);\n        }\n        _super.prototype._complete.call(this);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    BufferWhenSubscriber.prototype._unsubscribe = function () {\n        this.buffer = null;\n        this.subscribing = false;\n    };\n    BufferWhenSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.openBuffer();\n    };\n    BufferWhenSubscriber.prototype.notifyComplete = function () {\n        if (this.subscribing) {\n            this.complete();\n        }\n        else {\n            this.openBuffer();\n        }\n    };\n    BufferWhenSubscriber.prototype.openBuffer = function () {\n        var closingSubscription = this.closingSubscription;\n        if (closingSubscription) {\n            this.remove(closingSubscription);\n            closingSubscription.unsubscribe();\n        }\n        var buffer = this.buffer;\n        if (this.buffer) {\n            this.destination.next(buffer);\n        }\n        this.buffer = [];\n        var closingNotifier = tryCatch(this.closingSelector)();\n        if (closingNotifier === errorObject) {\n            this.error(errorObject.e);\n        }\n        else {\n            closingSubscription = new Subscription();\n            this.closingSubscription = closingSubscription;\n            this.add(closingSubscription);\n            this.subscribing = true;\n            closingSubscription.add(subscribeToResult(this, closingNotifier));\n            this.subscribing = false;\n        }\n    };\n    return BufferWhenSubscriber;\n}(OuterSubscriber));\n\nvar __extends$40 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Catches errors on the observable to be handled by returning a new observable or throwing an error.\n *\n * <img src=\"./img/catch.png\" width=\"100%\">\n *\n * @example <caption>Continues with a different Observable when there's an error</caption>\n *\n * Observable.of(1, 2, 3, 4, 5)\n *   .map(n => {\n * \t   if (n == 4) {\n * \t     throw 'four!';\n *     }\n *\t   return n;\n *   })\n *   .catch(err => Observable.of('I', 'II', 'III', 'IV', 'V'))\n *   .subscribe(x => console.log(x));\n *   // 1, 2, 3, I, II, III, IV, V\n *\n * @example <caption>Retries the caught source Observable again in case of error, similar to retry() operator</caption>\n *\n * Observable.of(1, 2, 3, 4, 5)\n *   .map(n => {\n * \t   if (n === 4) {\n * \t     throw 'four!';\n *     }\n * \t   return n;\n *   })\n *   .catch((err, caught) => caught)\n *   .take(30)\n *   .subscribe(x => console.log(x));\n *   // 1, 2, 3, 1, 2, 3, ...\n *\n * @example <caption>Throws a new error when the source Observable throws an error</caption>\n *\n * Observable.of(1, 2, 3, 4, 5)\n *   .map(n => {\n *     if (n == 4) {\n *       throw 'four!';\n *     }\n *     return n;\n *   })\n *   .catch(err => {\n *     throw 'error in source. Details: ' + err;\n *   })\n *   .subscribe(\n *     x => console.log(x),\n *     err => console.log(err)\n *   );\n *   // 1, 2, 3, error in source. Details: four!\n *\n * @param {function} selector a function that takes as arguments `err`, which is the error, and `caught`, which\n *  is the source observable, in case you'd like to \"retry\" that observable by returning it again. Whatever observable\n *  is returned by the `selector` will be used to continue the observable chain.\n * @return {Observable} An observable that originates from either the source or the observable returned by the\n *  catch `selector` function.\n * @name catchError\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar CatchSubscriber = /** @class */ (function (_super) {\n    __extends$40(CatchSubscriber, _super);\n    function CatchSubscriber(destination, selector, caught) {\n        var _this = _super.call(this, destination) || this;\n        _this.selector = selector;\n        _this.caught = caught;\n        return _this;\n    }\n    // NOTE: overriding `error` instead of `_error` because we don't want\n    // to have this flag this subscriber as `isStopped`. We can mimic the\n    // behavior of the RetrySubscriber (from the `retry` operator), where\n    // we unsubscribe from our source chain, reset our Subscriber flags,\n    // then subscribe to the selector result.\n    CatchSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var result = void 0;\n            try {\n                result = this.selector(err, this.caught);\n            }\n            catch (err2) {\n                _super.prototype.error.call(this, err2);\n                return;\n            }\n            this._unsubscribeAndRecycle();\n            this.add(subscribeToResult(this, result));\n        }\n    };\n    return CatchSubscriber;\n}(OuterSubscriber));\n\nvar __read$8 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$8 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$8(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * @deprecated Deprecated in favor of static combineLatest.\n */\n\nvar __read$9 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$9 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$9(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * @deprecated Deprecated in favor of static concat.\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, in a serialized fashion waiting for each one to complete before\n * merging the next.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link concatAll}.</span>\n *\n * <img src=\"./img/concatMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each new inner Observable is\n * concatenated with the previous inner Observable.\n *\n * __Warning:__ if source values arrive endlessly and faster than their\n * corresponding inner Observables can complete, it will result in memory issues\n * as inner Observables amass in an unbounded buffer waiting for their turn to\n * be subscribed to.\n *\n * Note: `concatMap` is equivalent to `mergeMap` with concurrency parameter set\n * to `1`.\n *\n * @example <caption>For each click event, tick every second from 0 to 3, with no concurrency</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.concatMap(ev => Rx.Observable.interval(1000).take(4));\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n *\n * @see {@link concat}\n * @see {@link concatAll}\n * @see {@link concatMapTo}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional `resultSelector`) to each item emitted\n * by the source Observable and taking values from each projected inner\n * Observable sequentially.\n * @method concatMap\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to the same Observable which is merged multiple\n * times in a serialized fashion on the output Observable.\n *\n * <span class=\"informal\">It's like {@link concatMap}, but maps each value\n * always to the same inner Observable.</span>\n *\n * <img src=\"./img/concatMapTo.png\" width=\"100%\">\n *\n * Maps each source value to the given Observable `innerObservable` regardless\n * of the source value, and then flattens those resulting Observables into one\n * single Observable, which is the output Observable. Each new `innerObservable`\n * instance emitted on the output Observable is concatenated with the previous\n * `innerObservable` instance.\n *\n * __Warning:__ if source values arrive endlessly and faster than their\n * corresponding inner Observables can complete, it will result in memory issues\n * as inner Observables amass in an unbounded buffer waiting for their turn to\n * be subscribed to.\n *\n * Note: `concatMapTo` is equivalent to `mergeMapTo` with concurrency parameter\n * set to `1`.\n *\n * @example <caption>For each click event, tick every second from 0 to 3, with no concurrency</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.concatMapTo(Rx.Observable.interval(1000).take(4));\n * result.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // (results are not concurrent)\n * // For every click on the \"document\" it will emit values 0 to 3 spaced\n * // on a 1000ms interval\n * // one click = 1000ms-> 0 -1000ms-> 1 -1000ms-> 2 -1000ms-> 3\n *\n * @see {@link concat}\n * @see {@link concatAll}\n * @see {@link concatMap}\n * @see {@link mergeMapTo}\n * @see {@link switchMapTo}\n *\n * @param {ObservableInput} innerObservable An Observable to replace each value from\n * the source Observable.\n * @return {Observable} An observable of values merged together by joining the\n * passed observable with itself, one after the other, for each value emitted\n * from the source.\n * @method concatMapTo\n * @owner Observable\n */\n\nvar __extends$41 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Counts the number of emissions on the source and emits that number when the\n * source completes.\n *\n * <span class=\"informal\">Tells how many values were emitted, when the source\n * completes.</span>\n *\n * <img src=\"./img/count.png\" width=\"100%\">\n *\n * `count` transforms an Observable that emits values into an Observable that\n * emits a single value that represents the number of values emitted by the\n * source Observable. If the source Observable terminates with an error, `count`\n * will pass this error notification along without emitting a value first. If\n * the source Observable does not terminate at all, `count` will neither emit\n * a value nor terminate. This operator takes an optional `predicate` function\n * as argument, in which case the output emission will represent the number of\n * source values that matched `true` with the `predicate`.\n *\n * @example <caption>Counts how many seconds have passed before the first click happened</caption>\n * var seconds = Rx.Observable.interval(1000);\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var secondsBeforeClick = seconds.takeUntil(clicks);\n * var result = secondsBeforeClick.count();\n * result.subscribe(x => console.log(x));\n *\n * @example <caption>Counts how many odd numbers are there between 1 and 7</caption>\n * var numbers = Rx.Observable.range(1, 7);\n * var result = numbers.count(i => i % 2 === 1);\n * result.subscribe(x => console.log(x));\n *\n * // Results in:\n * // 4\n *\n * @see {@link max}\n * @see {@link min}\n * @see {@link reduce}\n *\n * @param {function(value: T, i: number, source: Observable<T>): boolean} [predicate] A\n * boolean function to select what values are to be counted. It is provided with\n * arguments of:\n * - `value`: the value from the source Observable.\n * - `index`: the (zero-based) \"index\" of the value from the source Observable.\n * - `source`: the source Observable instance itself.\n * @return {Observable} An Observable of one number that represents the count as\n * described above.\n * @method count\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar CountSubscriber = /** @class */ (function (_super) {\n    __extends$41(CountSubscriber, _super);\n    function CountSubscriber(destination, predicate, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.source = source;\n        _this.count = 0;\n        _this.index = 0;\n        return _this;\n    }\n    CountSubscriber.prototype._next = function (value) {\n        if (this.predicate) {\n            this._tryPredicate(value);\n        }\n        else {\n            this.count++;\n        }\n    };\n    CountSubscriber.prototype._tryPredicate = function (value) {\n        var result;\n        try {\n            result = this.predicate(value, this.index++, this.source);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.count++;\n        }\n    };\n    CountSubscriber.prototype._complete = function () {\n        this.destination.next(this.count);\n        this.destination.complete();\n    };\n    return CountSubscriber;\n}(Subscriber));\n\nvar __extends$42 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits a value from the source Observable only after a particular time span\n * determined by another Observable has passed without another source emission.\n *\n * <span class=\"informal\">It's like {@link debounceTime}, but the time span of\n * emission silence is determined by a second Observable.</span>\n *\n * <img src=\"./img/debounce.png\" width=\"100%\">\n *\n * `debounce` delays values emitted by the source Observable, but drops previous\n * pending delayed emissions if a new value arrives on the source Observable.\n * This operator keeps track of the most recent value from the source\n * Observable, and spawns a duration Observable by calling the\n * `durationSelector` function. The value is emitted only when the duration\n * Observable emits a value or completes, and if no other value was emitted on\n * the source Observable since the duration Observable was spawned. If a new\n * value appears before the duration Observable emits, the previous value will\n * be dropped and will not be emitted on the output Observable.\n *\n * Like {@link debounceTime}, this is a rate-limiting operator, and also a\n * delay-like operator since output emissions do not necessarily occur at the\n * same time as they did on the source Observable.\n *\n * @example <caption>Emit the most recent click after a burst of clicks</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.debounce(() => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link audit}\n * @see {@link debounceTime}\n * @see {@link delayWhen}\n * @see {@link throttle}\n *\n * @param {function(value: T): SubscribableOrPromise} durationSelector A function\n * that receives a value from the source Observable, for computing the timeout\n * duration for each source value, returned as an Observable or a Promise.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by the specified duration Observable returned by\n * `durationSelector`, and may drop some values if they occur too frequently.\n * @method debounce\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DebounceSubscriber = /** @class */ (function (_super) {\n    __extends$42(DebounceSubscriber, _super);\n    function DebounceSubscriber(destination, durationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.durationSelector = durationSelector;\n        _this.hasValue = false;\n        _this.durationSubscription = null;\n        return _this;\n    }\n    DebounceSubscriber.prototype._next = function (value) {\n        try {\n            var result = this.durationSelector.call(this, value);\n            if (result) {\n                this._tryNext(value, result);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    DebounceSubscriber.prototype._complete = function () {\n        this.emitValue();\n        this.destination.complete();\n    };\n    DebounceSubscriber.prototype._tryNext = function (value, duration) {\n        var subscription = this.durationSubscription;\n        this.value = value;\n        this.hasValue = true;\n        if (subscription) {\n            subscription.unsubscribe();\n            this.remove(subscription);\n        }\n        subscription = subscribeToResult(this, duration);\n        if (subscription && !subscription.closed) {\n            this.add(this.durationSubscription = subscription);\n        }\n    };\n    DebounceSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.emitValue();\n    };\n    DebounceSubscriber.prototype.notifyComplete = function () {\n        this.emitValue();\n    };\n    DebounceSubscriber.prototype.emitValue = function () {\n        if (this.hasValue) {\n            var value = this.value;\n            var subscription = this.durationSubscription;\n            if (subscription) {\n                this.durationSubscription = null;\n                subscription.unsubscribe();\n                this.remove(subscription);\n            }\n            // This must be done *before* passing the value\n            // along to the destination because it's possible for\n            // the value to synchronously re-enter this operator\n            // recursively if the duration selector Observable\n            // emits synchronously\n            this.value = null;\n            this.hasValue = false;\n            _super.prototype._next.call(this, value);\n        }\n    };\n    return DebounceSubscriber;\n}(OuterSubscriber));\n\nvar __extends$43 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits a value from the source Observable only after a particular time span\n * has passed without another source emission.\n *\n * <span class=\"informal\">It's like {@link delay}, but passes only the most\n * recent value from each burst of emissions.</span>\n *\n * <img src=\"./img/debounceTime.png\" width=\"100%\">\n *\n * `debounceTime` delays values emitted by the source Observable, but drops\n * previous pending delayed emissions if a new value arrives on the source\n * Observable. This operator keeps track of the most recent value from the\n * source Observable, and emits that only when `dueTime` enough time has passed\n * without any other value appearing on the source Observable. If a new value\n * appears before `dueTime` silence occurs, the previous value will be dropped\n * and will not be emitted on the output Observable.\n *\n * This is a rate-limiting operator, because it is impossible for more than one\n * value to be emitted in any time window of duration `dueTime`, but it is also\n * a delay-like operator since output emissions do not occur at the same time as\n * they did on the source Observable. Optionally takes a {@link IScheduler} for\n * managing timers.\n *\n * @example <caption>Emit the most recent click after a burst of clicks</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.debounceTime(1000);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link auditTime}\n * @see {@link debounce}\n * @see {@link delay}\n * @see {@link sampleTime}\n * @see {@link throttleTime}\n *\n * @param {number} dueTime The timeout duration in milliseconds (or the time\n * unit determined internally by the optional `scheduler`) for the window of\n * time required to wait for emission silence before emitting the most recent\n * source value.\n * @param {Scheduler} [scheduler=async] The {@link IScheduler} to use for\n * managing the timers that handle the timeout for each value.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by the specified `dueTime`, and may drop some values if they occur\n * too frequently.\n * @method debounceTime\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DebounceTimeSubscriber = /** @class */ (function (_super) {\n    __extends$43(DebounceTimeSubscriber, _super);\n    function DebounceTimeSubscriber(destination, dueTime, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.dueTime = dueTime;\n        _this.scheduler = scheduler;\n        _this.debouncedSubscription = null;\n        _this.lastValue = null;\n        _this.hasValue = false;\n        return _this;\n    }\n    DebounceTimeSubscriber.prototype._next = function (value) {\n        this.clearDebounce();\n        this.lastValue = value;\n        this.hasValue = true;\n        this.add(this.debouncedSubscription = this.scheduler.schedule(dispatchNext$2, this.dueTime, this));\n    };\n    DebounceTimeSubscriber.prototype._complete = function () {\n        this.debouncedNext();\n        this.destination.complete();\n    };\n    DebounceTimeSubscriber.prototype.debouncedNext = function () {\n        this.clearDebounce();\n        if (this.hasValue) {\n            var lastValue = this.lastValue;\n            // This must be done *before* passing the value\n            // along to the destination because it's possible for\n            // the value to synchronously re-enter this operator\n            // recursively when scheduled with things like\n            // VirtualScheduler/TestScheduler.\n            this.lastValue = null;\n            this.hasValue = false;\n            this.destination.next(lastValue);\n        }\n    };\n    DebounceTimeSubscriber.prototype.clearDebounce = function () {\n        var debouncedSubscription = this.debouncedSubscription;\n        if (debouncedSubscription !== null) {\n            this.remove(debouncedSubscription);\n            debouncedSubscription.unsubscribe();\n            this.debouncedSubscription = null;\n        }\n    };\n    return DebounceTimeSubscriber;\n}(Subscriber));\nfunction dispatchNext$2(subscriber) {\n    subscriber.debouncedNext();\n}\n\nvar __extends$44 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Emits a given value if the source Observable completes without emitting any\n * `next` value, otherwise mirrors the source Observable.\n *\n * <span class=\"informal\">If the source Observable turns out to be empty, then\n * this operator will emit a default value.</span>\n *\n * <img src=\"./img/defaultIfEmpty.png\" width=\"100%\">\n *\n * `defaultIfEmpty` emits the values emitted by the source Observable or a\n * specified default value if the source Observable is empty (completes without\n * having emitted any `next` value).\n *\n * @example <caption>If no clicks happen in 5 seconds, then emit \"no clicks\"</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var clicksBeforeFive = clicks.takeUntil(Rx.Observable.interval(5000));\n * var result = clicksBeforeFive.defaultIfEmpty('no clicks');\n * result.subscribe(x => console.log(x));\n *\n * @see {@link empty}\n * @see {@link last}\n *\n * @param {any} [defaultValue=null] The default value used if the source\n * Observable is empty.\n * @return {Observable} An Observable that emits either the specified\n * `defaultValue` if the source Observable emits no items, or the values emitted\n * by the source Observable.\n * @method defaultIfEmpty\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DefaultIfEmptySubscriber = /** @class */ (function (_super) {\n    __extends$44(DefaultIfEmptySubscriber, _super);\n    function DefaultIfEmptySubscriber(destination, defaultValue) {\n        var _this = _super.call(this, destination) || this;\n        _this.defaultValue = defaultValue;\n        _this.isEmpty = true;\n        return _this;\n    }\n    DefaultIfEmptySubscriber.prototype._next = function (value) {\n        this.isEmpty = false;\n        this.destination.next(value);\n    };\n    DefaultIfEmptySubscriber.prototype._complete = function () {\n        if (this.isEmpty) {\n            this.destination.next(this.defaultValue);\n        }\n        this.destination.complete();\n    };\n    return DefaultIfEmptySubscriber;\n}(Subscriber));\n\nvar __extends$45 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Delays the emission of items from the source Observable by a given timeout or\n * until a given Date.\n *\n * <span class=\"informal\">Time shifts each item by some specified amount of\n * milliseconds.</span>\n *\n * <img src=\"./img/delay.png\" width=\"100%\">\n *\n * If the delay argument is a Number, this operator time shifts the source\n * Observable by that amount of time expressed in milliseconds. The relative\n * time intervals between the values are preserved.\n *\n * If the delay argument is a Date, this operator time shifts the start of the\n * Observable execution until the given date occurs.\n *\n * @example <caption>Delay each click by one second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var delayedClicks = clicks.delay(1000); // each click emitted after 1 second\n * delayedClicks.subscribe(x => console.log(x));\n *\n * @example <caption>Delay all clicks until a future date happens</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var date = new Date('March 15, 2050 12:00:00'); // in the future\n * var delayedClicks = clicks.delay(date); // click emitted only after that date\n * delayedClicks.subscribe(x => console.log(x));\n *\n * @see {@link debounceTime}\n * @see {@link delayWhen}\n *\n * @param {number|Date} delay The delay duration in milliseconds (a `number`) or\n * a `Date` until which the emission of the source items is delayed.\n * @param {Scheduler} [scheduler=async] The IScheduler to use for\n * managing the timers that handle the time-shift for each item.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by the specified timeout or Date.\n * @method delay\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DelaySubscriber = /** @class */ (function (_super) {\n    __extends$45(DelaySubscriber, _super);\n    function DelaySubscriber(destination, delay, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.delay = delay;\n        _this.scheduler = scheduler;\n        _this.queue = [];\n        _this.active = false;\n        _this.errored = false;\n        return _this;\n    }\n    DelaySubscriber.dispatch = function (state) {\n        var source = state.source;\n        var queue = source.queue;\n        var scheduler = state.scheduler;\n        var destination = state.destination;\n        while (queue.length > 0 && (queue[0].time - scheduler.now()) <= 0) {\n            queue.shift().notification.observe(destination);\n        }\n        if (queue.length > 0) {\n            var delay_1 = Math.max(0, queue[0].time - scheduler.now());\n            this.schedule(state, delay_1);\n        }\n        else {\n            source.active = false;\n        }\n    };\n    DelaySubscriber.prototype._schedule = function (scheduler) {\n        this.active = true;\n        this.add(scheduler.schedule(DelaySubscriber.dispatch, this.delay, {\n            source: this, destination: this.destination, scheduler: scheduler\n        }));\n    };\n    DelaySubscriber.prototype.scheduleNotification = function (notification) {\n        if (this.errored === true) {\n            return;\n        }\n        var scheduler = this.scheduler;\n        var message = new DelayMessage(scheduler.now() + this.delay, notification);\n        this.queue.push(message);\n        if (this.active === false) {\n            this._schedule(scheduler);\n        }\n    };\n    DelaySubscriber.prototype._next = function (value) {\n        this.scheduleNotification(Notification.createNext(value));\n    };\n    DelaySubscriber.prototype._error = function (err) {\n        this.errored = true;\n        this.queue = [];\n        this.destination.error(err);\n    };\n    DelaySubscriber.prototype._complete = function () {\n        this.scheduleNotification(Notification.createComplete());\n    };\n    return DelaySubscriber;\n}(Subscriber));\nvar DelayMessage = /** @class */ (function () {\n    function DelayMessage(time, notification) {\n        this.time = time;\n        this.notification = notification;\n    }\n    return DelayMessage;\n}());\n\nvar __extends$46 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Delays the emission of items from the source Observable by a given time span\n * determined by the emissions of another Observable.\n *\n * <span class=\"informal\">It's like {@link delay}, but the time span of the\n * delay duration is determined by a second Observable.</span>\n *\n * <img src=\"./img/delayWhen.png\" width=\"100%\">\n *\n * `delayWhen` time shifts each emitted value from the source Observable by a\n * time span determined by another Observable. When the source emits a value,\n * the `delayDurationSelector` function is called with the source value as\n * argument, and should return an Observable, called the \"duration\" Observable.\n * The source value is emitted on the output Observable only when the duration\n * Observable emits a value or completes.\n *\n * Optionally, `delayWhen` takes a second argument, `subscriptionDelay`, which\n * is an Observable. When `subscriptionDelay` emits its first value or\n * completes, the source Observable is subscribed to and starts behaving like\n * described in the previous paragraph. If `subscriptionDelay` is not provided,\n * `delayWhen` will subscribe to the source Observable as soon as the output\n * Observable is subscribed.\n *\n * @example <caption>Delay each click by a random amount of time, between 0 and 5 seconds</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var delayedClicks = clicks.delayWhen(event =>\n *   Rx.Observable.interval(Math.random() * 5000)\n * );\n * delayedClicks.subscribe(x => console.log(x));\n *\n * @see {@link debounce}\n * @see {@link delay}\n *\n * @param {function(value: T): Observable} delayDurationSelector A function that\n * returns an Observable for each value emitted by the source Observable, which\n * is then used to delay the emission of that item on the output Observable\n * until the Observable returned from this function emits a value.\n * @param {Observable} subscriptionDelay An Observable that triggers the\n * subscription to the source Observable once it emits any value.\n * @return {Observable} An Observable that delays the emissions of the source\n * Observable by an amount of time specified by the Observable returned by\n * `delayDurationSelector`.\n * @method delayWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DelayWhenSubscriber = /** @class */ (function (_super) {\n    __extends$46(DelayWhenSubscriber, _super);\n    function DelayWhenSubscriber(destination, delayDurationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.delayDurationSelector = delayDurationSelector;\n        _this.completed = false;\n        _this.delayNotifierSubscriptions = [];\n        _this.values = [];\n        return _this;\n    }\n    DelayWhenSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(outerValue);\n        this.removeSubscription(innerSub);\n        this.tryComplete();\n    };\n    DelayWhenSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    DelayWhenSubscriber.prototype.notifyComplete = function (innerSub) {\n        var value = this.removeSubscription(innerSub);\n        if (value) {\n            this.destination.next(value);\n        }\n        this.tryComplete();\n    };\n    DelayWhenSubscriber.prototype._next = function (value) {\n        try {\n            var delayNotifier = this.delayDurationSelector(value);\n            if (delayNotifier) {\n                this.tryDelay(delayNotifier, value);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    DelayWhenSubscriber.prototype._complete = function () {\n        this.completed = true;\n        this.tryComplete();\n    };\n    DelayWhenSubscriber.prototype.removeSubscription = function (subscription) {\n        subscription.unsubscribe();\n        var subscriptionIdx = this.delayNotifierSubscriptions.indexOf(subscription);\n        var value = null;\n        if (subscriptionIdx !== -1) {\n            value = this.values[subscriptionIdx];\n            this.delayNotifierSubscriptions.splice(subscriptionIdx, 1);\n            this.values.splice(subscriptionIdx, 1);\n        }\n        return value;\n    };\n    DelayWhenSubscriber.prototype.tryDelay = function (delayNotifier, value) {\n        var notifierSubscription = subscribeToResult(this, delayNotifier, value);\n        if (notifierSubscription && !notifierSubscription.closed) {\n            this.add(notifierSubscription);\n            this.delayNotifierSubscriptions.push(notifierSubscription);\n        }\n        this.values.push(value);\n    };\n    DelayWhenSubscriber.prototype.tryComplete = function () {\n        if (this.completed && this.delayNotifierSubscriptions.length === 0) {\n            this.destination.complete();\n        }\n    };\n    return DelayWhenSubscriber;\n}(OuterSubscriber));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SubscriptionDelayObservable = /** @class */ (function (_super) {\n    __extends$46(SubscriptionDelayObservable, _super);\n    function SubscriptionDelayObservable(source, subscriptionDelay) {\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.subscriptionDelay = subscriptionDelay;\n        return _this;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    SubscriptionDelayObservable.prototype._subscribe = function (subscriber) {\n        this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(subscriber, this.source));\n    };\n    return SubscriptionDelayObservable;\n}(Observable));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SubscriptionDelaySubscriber = /** @class */ (function (_super) {\n    __extends$46(SubscriptionDelaySubscriber, _super);\n    function SubscriptionDelaySubscriber(parent, source) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.source = source;\n        _this.sourceSubscribed = false;\n        return _this;\n    }\n    SubscriptionDelaySubscriber.prototype._next = function (unused) {\n        this.subscribeToSource();\n    };\n    SubscriptionDelaySubscriber.prototype._error = function (err) {\n        this.unsubscribe();\n        this.parent.error(err);\n    };\n    SubscriptionDelaySubscriber.prototype._complete = function () {\n        this.subscribeToSource();\n    };\n    SubscriptionDelaySubscriber.prototype.subscribeToSource = function () {\n        if (!this.sourceSubscribed) {\n            this.sourceSubscribed = true;\n            this.unsubscribe();\n            this.source.subscribe(this.parent);\n        }\n    };\n    return SubscriptionDelaySubscriber;\n}(Subscriber));\n\nvar __extends$47 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Converts an Observable of {@link Notification} objects into the emissions\n * that they represent.\n *\n * <span class=\"informal\">Unwraps {@link Notification} objects as actual `next`,\n * `error` and `complete` emissions. The opposite of {@link materialize}.</span>\n *\n * <img src=\"./img/dematerialize.png\" width=\"100%\">\n *\n * `dematerialize` is assumed to operate an Observable that only emits\n * {@link Notification} objects as `next` emissions, and does not emit any\n * `error`. Such Observable is the output of a `materialize` operation. Those\n * notifications are then unwrapped using the metadata they contain, and emitted\n * as `next`, `error`, and `complete` on the output Observable.\n *\n * Use this operator in conjunction with {@link materialize}.\n *\n * @example <caption>Convert an Observable of Notifications to an actual Observable</caption>\n * var notifA = new Rx.Notification('N', 'A');\n * var notifB = new Rx.Notification('N', 'B');\n * var notifE = new Rx.Notification('E', void 0,\n *   new TypeError('x.toUpperCase is not a function')\n * );\n * var materialized = Rx.Observable.of(notifA, notifB, notifE);\n * var upperCase = materialized.dematerialize();\n * upperCase.subscribe(x => console.log(x), e => console.error(e));\n *\n * // Results in:\n * // A\n * // B\n * // TypeError: x.toUpperCase is not a function\n *\n * @see {@link Notification}\n * @see {@link materialize}\n *\n * @return {Observable} An Observable that emits items and notifications\n * embedded in Notification objects emitted by the source Observable.\n * @method dematerialize\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DeMaterializeSubscriber = /** @class */ (function (_super) {\n    __extends$47(DeMaterializeSubscriber, _super);\n    function DeMaterializeSubscriber(destination) {\n        return _super.call(this, destination) || this;\n    }\n    DeMaterializeSubscriber.prototype._next = function (value) {\n        value.observe(this.destination);\n    };\n    return DeMaterializeSubscriber;\n}(Subscriber));\n\nvar __extends$48 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from previous items.\n *\n * If a keySelector function is provided, then it will project each value from the source observable into a new value that it will\n * check for equality with previously projected values. If a keySelector function is not provided, it will use each value from the\n * source observable directly with an equality check against previous values.\n *\n * In JavaScript runtimes that support `Set`, this operator will use a `Set` to improve performance of the distinct value checking.\n *\n * In other runtimes, this operator will use a minimal implementation of `Set` that relies on an `Array` and `indexOf` under the\n * hood, so performance will degrade as more values are checked for distinction. Even in newer browsers, a long-running `distinct`\n * use might result in memory leaks. To help alleviate this in some scenarios, an optional `flushes` parameter is also provided so\n * that the internal `Set` can be \"flushed\", basically clearing it of values.\n *\n * @example <caption>A simple example with numbers</caption>\n * Observable.of(1, 1, 2, 2, 2, 1, 2, 3, 4, 3, 2, 1)\n *   .distinct()\n *   .subscribe(x => console.log(x)); // 1, 2, 3, 4\n *\n * @example <caption>An example using a keySelector function</caption>\n * interface Person {\n *    age: number,\n *    name: string\n * }\n *\n * Observable.of<Person>(\n *     { age: 4, name: 'Foo'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo'})\n *     .distinct((p: Person) => p.name)\n *     .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n *\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n *\n * @param {function} [keySelector] Optional function to select which value you want to check as distinct.\n * @param {Observable} [flushes] Optional Observable for flushing the internal HashSet of the operator.\n * @return {Observable} An Observable that emits items from the source Observable with distinct values.\n * @method distinct\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DistinctSubscriber = /** @class */ (function (_super) {\n    __extends$48(DistinctSubscriber, _super);\n    function DistinctSubscriber(destination, keySelector, flushes) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.values = new Set();\n        if (flushes) {\n            _this.add(subscribeToResult(_this, flushes));\n        }\n        return _this;\n    }\n    DistinctSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.values.clear();\n    };\n    DistinctSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    DistinctSubscriber.prototype._next = function (value) {\n        if (this.keySelector) {\n            this._useKeySelector(value);\n        }\n        else {\n            this._finalizeNext(value, value);\n        }\n    };\n    DistinctSubscriber.prototype._useKeySelector = function (value) {\n        var key;\n        var destination = this.destination;\n        try {\n            key = this.keySelector(value);\n        }\n        catch (err) {\n            destination.error(err);\n            return;\n        }\n        this._finalizeNext(key, value);\n    };\n    DistinctSubscriber.prototype._finalizeNext = function (key, value) {\n        var values = this.values;\n        if (!values.has(key)) {\n            values.add(key);\n            this.destination.next(value);\n        }\n    };\n    return DistinctSubscriber;\n}(OuterSubscriber));\n\nvar __extends$49 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from the previous item.\n *\n * If a comparator function is provided, then it will be called for each item to test for whether or not that value should be emitted.\n *\n * If a comparator function is not provided, an equality check is used by default.\n *\n * @example <caption>A simple example with numbers</caption>\n * Observable.of(1, 1, 2, 2, 2, 1, 1, 2, 3, 3, 4)\n *   .distinctUntilChanged()\n *   .subscribe(x => console.log(x)); // 1, 2, 1, 2, 3, 4\n *\n * @example <caption>An example using a compare function</caption>\n * interface Person {\n *    age: number,\n *    name: string\n * }\n *\n * Observable.of<Person>(\n *     { age: 4, name: 'Foo'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo'})\n *     { age: 6, name: 'Foo'})\n *     .distinctUntilChanged((p: Person, q: Person) => p.name === q.name)\n *     .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo' }\n *\n * @see {@link distinct}\n * @see {@link distinctUntilKeyChanged}\n *\n * @param {function} [compare] Optional comparison function called to test if an item is distinct from the previous item in the source.\n * @return {Observable} An Observable that emits items from the source Observable with distinct values.\n * @method distinctUntilChanged\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DistinctUntilChangedSubscriber = /** @class */ (function (_super) {\n    __extends$49(DistinctUntilChangedSubscriber, _super);\n    function DistinctUntilChangedSubscriber(destination, compare, keySelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.hasKey = false;\n        if (typeof compare === 'function') {\n            _this.compare = compare;\n        }\n        return _this;\n    }\n    DistinctUntilChangedSubscriber.prototype.compare = function (x, y) {\n        return x === y;\n    };\n    DistinctUntilChangedSubscriber.prototype._next = function (value) {\n        var keySelector = this.keySelector;\n        var key = value;\n        if (keySelector) {\n            key = tryCatch(this.keySelector)(value);\n            if (key === errorObject) {\n                return this.destination.error(errorObject.e);\n            }\n        }\n        var result = false;\n        if (this.hasKey) {\n            result = tryCatch(this.compare)(this.key, key);\n            if (result === errorObject) {\n                return this.destination.error(errorObject.e);\n            }\n        }\n        else {\n            this.hasKey = true;\n        }\n        if (Boolean(result) === false) {\n            this.key = key;\n            this.destination.next(value);\n        }\n    };\n    return DistinctUntilChangedSubscriber;\n}(Subscriber));\n\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from the previous item,\n * using a property accessed by using the key provided to check if the two items are distinct.\n *\n * If a comparator function is provided, then it will be called for each item to test for whether or not that value should be emitted.\n *\n * If a comparator function is not provided, an equality check is used by default.\n *\n * @example <caption>An example comparing the name of persons</caption>\n *\n *  interface Person {\n *     age: number,\n *     name: string\n *  }\n *\n * Observable.of<Person>(\n *     { age: 4, name: 'Foo'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo'},\n *     { age: 6, name: 'Foo'})\n *     .distinctUntilKeyChanged('name')\n *     .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo' }\n *\n * @example <caption>An example comparing the first letters of the name</caption>\n *\n * interface Person {\n *     age: number,\n *     name: string\n *  }\n *\n * Observable.of<Person>(\n *     { age: 4, name: 'Foo1'},\n *     { age: 7, name: 'Bar'},\n *     { age: 5, name: 'Foo2'},\n *     { age: 6, name: 'Foo3'})\n *     .distinctUntilKeyChanged('name', (x: string, y: string) => x.substring(0, 3) === y.substring(0, 3))\n *     .subscribe(x => console.log(x));\n *\n * // displays:\n * // { age: 4, name: 'Foo1' }\n * // { age: 7, name: 'Bar' }\n * // { age: 5, name: 'Foo2' }\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n *\n * @param {string} key String key for object property lookup on each item.\n * @param {function} [compare] Optional comparison function called to test if an item is distinct from the previous item in the source.\n * @return {Observable} An Observable that emits items from the source Observable with distinct values based on the key specified.\n * @method distinctUntilKeyChanged\n * @owner Observable\n */\n\nvar __extends$50 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Filter items emitted by the source Observable by only emitting those that\n * satisfy a specified predicate.\n *\n * <span class=\"informal\">Like\n * [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),\n * it only emits a value from the source if it passes a criterion function.</span>\n *\n * <img src=\"./img/filter.png\" width=\"100%\">\n *\n * Similar to the well-known `Array.prototype.filter` method, this operator\n * takes values from the source Observable, passes them through a `predicate`\n * function and only emits those values that yielded `true`.\n *\n * @example <caption>Emit only click events whose target was a DIV element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var clicksOnDivs = clicks.filter(ev => ev.target.tagName === 'DIV');\n * clicksOnDivs.subscribe(x => console.log(x));\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n * @see {@link ignoreElements}\n * @see {@link partition}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted, if `false` the value is not passed to the output\n * Observable. The `index` parameter is the number `i` for the i-th source\n * emission that has happened since the subscription, starting from the number\n * `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable} An Observable of values from the source that were\n * allowed by the `predicate` function.\n * @method filter\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FilterSubscriber = /** @class */ (function (_super) {\n    __extends$50(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    // the try catch block below is left specifically for\n    // optimization and perf reasons. a tryCatcher is not necessary here.\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n\nvar __extends$51 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Perform a side effect for every emission on the source Observable, but return\n * an Observable that is identical to the source.\n *\n * <span class=\"informal\">Intercepts each emission on the source and runs a\n * function, but returns an output which is identical to the source as long as errors don't occur.</span>\n *\n * <img src=\"./img/do.png\" width=\"100%\">\n *\n * Returns a mirrored Observable of the source Observable, but modified so that\n * the provided Observer is called to perform a side effect for every value,\n * error, and completion emitted by the source. Any errors that are thrown in\n * the aforementioned Observer or handlers are safely sent down the error path\n * of the output Observable.\n *\n * This operator is useful for debugging your Observables for the correct values\n * or performing other side effects.\n *\n * Note: this is different to a `subscribe` on the Observable. If the Observable\n * returned by `do` is not subscribed, the side effects specified by the\n * Observer will never happen. `do` therefore simply spies on existing\n * execution, it does not trigger an execution to happen like `subscribe` does.\n *\n * @example <caption>Map every click to the clientX position of that click, while also logging the click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var positions = clicks\n *   .do(ev => console.log(ev))\n *   .map(ev => ev.clientX);\n * positions.subscribe(x => console.log(x));\n *\n * @see {@link map}\n * @see {@link subscribe}\n *\n * @param {Observer|function} [nextOrObserver] A normal Observer object or a\n * callback for `next`.\n * @param {function} [error] Callback for errors in the source.\n * @param {function} [complete] Callback for the completion of the source.\n * @return {Observable} An Observable identical to the source, but runs the\n * specified Observer or callback(s) for each item.\n * @name tap\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TapSubscriber = /** @class */ (function (_super) {\n    __extends$51(TapSubscriber, _super);\n    function TapSubscriber(destination, observerOrNext, error, complete) {\n        var _this = _super.call(this, destination) || this;\n        _this._tapNext = noop$1;\n        _this._tapError = noop$1;\n        _this._tapComplete = noop$1;\n        _this._tapError = error || noop$1;\n        _this._tapComplete = complete || noop$1;\n        if (isFunction(observerOrNext)) {\n            _this._context = _this;\n            _this._tapNext = observerOrNext;\n        }\n        else if (observerOrNext) {\n            _this._context = observerOrNext;\n            _this._tapNext = observerOrNext.next || noop$1;\n            _this._tapError = observerOrNext.error || noop$1;\n            _this._tapComplete = observerOrNext.complete || noop$1;\n        }\n        return _this;\n    }\n    TapSubscriber.prototype._next = function (value) {\n        try {\n            this._tapNext.call(this._context, value);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(value);\n    };\n    TapSubscriber.prototype._error = function (err) {\n        try {\n            this._tapError.call(this._context, err);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.error(err);\n    };\n    TapSubscriber.prototype._complete = function () {\n        try {\n            this._tapComplete.call(this._context);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        return this.destination.complete();\n    };\n    return TapSubscriber;\n}(Subscriber));\n\n/**\n * If the source observable completes without emitting a value, it will emit\n * an error. The error will be created at that time by the optional\n * `errorFactory` argument, otherwise, the error will be {@link ErrorEmpty}.\n *\n * @example\n *\n * const click$ = fromEvent(button, 'click');\n *\n * clicks$.pipe(\n *   takeUntil(timer(1000)),\n *   throwIfEmpty(\n *     () => new Error('the button was not clicked within 1 second')\n *   ),\n * )\n * .subscribe({\n *   next() { console.log('The button was clicked'); },\n *   error(err) { console.error(err); },\n * });\n * @param {Function} [errorFactory] A factory function called to produce the\n * error to be thrown when the source observable completes without emitting a\n * value.\n */\n\nvar __extends$52 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits only the first `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Takes the first `count` values from the source, then\n * completes.</span>\n *\n * <img src=\"./img/take.png\" width=\"100%\">\n *\n * `take` returns an Observable that emits only the first `count` values emitted\n * by the source Observable. If the source emits fewer than `count` values then\n * all of its values are emitted. After that, it completes, regardless if the\n * source completes.\n *\n * @example <caption>Take the first 5 seconds of an infinite 1-second interval Observable</caption>\n * var interval = Rx.Observable.interval(1000);\n * var five = interval.take(5);\n * five.subscribe(x => console.log(x));\n *\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @throws {ArgumentOutOfRangeError} When using `take(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0`.\n *\n * @param {number} count The maximum number of `next` values to emit.\n * @return {Observable<T>} An Observable that emits only the first `count`\n * values emitted by the source Observable, or all of the values from the source\n * if the source emits fewer than `count` values.\n * @method take\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeSubscriber = /** @class */ (function (_super) {\n    __extends$52(TakeSubscriber, _super);\n    function TakeSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.count = 0;\n        return _this;\n    }\n    TakeSubscriber.prototype._next = function (value) {\n        var total = this.total;\n        var count = ++this.count;\n        if (count <= total) {\n            this.destination.next(value);\n            if (count === total) {\n                this.destination.complete();\n                this.unsubscribe();\n            }\n        }\n    };\n    return TakeSubscriber;\n}(Subscriber));\n\n/**\n * Emits the single value at the specified `index` in a sequence of emissions\n * from the source Observable.\n *\n * <span class=\"informal\">Emits only the i-th value, then completes.</span>\n *\n * <img src=\"./img/elementAt.png\" width=\"100%\">\n *\n * `elementAt` returns an Observable that emits the item at the specified\n * `index` in the source Observable, or a default value if that `index` is out\n * of range and the `default` argument is provided. If the `default` argument is\n * not given and the `index` is out of range, the output Observable will emit an\n * `ArgumentOutOfRangeError` error.\n *\n * @example <caption>Emit only the third click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.elementAt(2);\n * result.subscribe(x => console.log(x));\n *\n * // Results in:\n * // click 1 = nothing\n * // click 2 = nothing\n * // click 3 = MouseEvent object logged to console\n *\n * @see {@link first}\n * @see {@link last}\n * @see {@link skip}\n * @see {@link single}\n * @see {@link take}\n *\n * @throws {ArgumentOutOfRangeError} When using `elementAt(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0` or the\n * Observable has completed before emitting the i-th `next` notification.\n *\n * @param {number} index Is the number `i` for the i-th source emission that has\n * happened since the subscription, starting from the number `0`.\n * @param {T} [defaultValue] The default value returned for missing indices.\n * @return {Observable} An Observable that emits a single item, if it is found.\n * Otherwise, will emit the default value if given. If not, then emits an error.\n * @method elementAt\n * @owner Observable\n */\n\nvar __extends$53 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that emits whether or not every item of the source satisfies the condition specified.\n *\n * @example <caption>A simple example emitting true if all elements are less than 5, false otherwise</caption>\n *  Observable.of(1, 2, 3, 4, 5, 6)\n *     .every(x => x < 5)\n *     .subscribe(x => console.log(x)); // -> false\n *\n * @param {function} predicate A function for determining if an item meets a specified condition.\n * @param {any} [thisArg] Optional object to use for `this` in the callback.\n * @return {Observable} An Observable of booleans that determines if all items of the source Observable meet the condition specified.\n * @method every\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar EverySubscriber = /** @class */ (function (_super) {\n    __extends$53(EverySubscriber, _super);\n    function EverySubscriber(destination, predicate, thisArg, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.source = source;\n        _this.index = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    EverySubscriber.prototype.notifyComplete = function (everyValueMatch) {\n        this.destination.next(everyValueMatch);\n        this.destination.complete();\n    };\n    EverySubscriber.prototype._next = function (value) {\n        var result = false;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.index++, this.source);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (!result) {\n            this.notifyComplete(false);\n        }\n    };\n    EverySubscriber.prototype._complete = function () {\n        this.notifyComplete(true);\n    };\n    return EverySubscriber;\n}(Subscriber));\n\nvar __extends$54 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Converts a higher-order Observable into a first-order Observable by dropping\n * inner Observables while the previous inner Observable has not yet completed.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables by dropping the\n * next inner Observables while the current inner is still executing.</span>\n *\n * <img src=\"./img/exhaust.png\" width=\"100%\">\n *\n * `exhaust` subscribes to an Observable that emits Observables, also known as a\n * higher-order Observable. Each time it observes one of these emitted inner\n * Observables, the output Observable begins emitting the items emitted by that\n * inner Observable. So far, it behaves like {@link mergeAll}. However,\n * `exhaust` ignores every new inner Observable if the previous Observable has\n * not yet completed. Once that one completes, it will accept and flatten the\n * next inner Observable and repeat this process.\n *\n * @example <caption>Run a finite timer for each click, only if there is no currently active timer</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var higherOrder = clicks.map((ev) => Rx.Observable.interval(1000).take(5));\n * var result = higherOrder.exhaust();\n * result.subscribe(x => console.log(x));\n *\n * @see {@link combineAll}\n * @see {@link concatAll}\n * @see {@link switch}\n * @see {@link mergeAll}\n * @see {@link exhaustMap}\n * @see {@link zipAll}\n *\n * @return {Observable} An Observable that takes a source of Observables and propagates the first observable\n * exclusively until it completes before subscribing to the next.\n * @method exhaust\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SwitchFirstSubscriber = /** @class */ (function (_super) {\n    __extends$54(SwitchFirstSubscriber, _super);\n    function SwitchFirstSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasCompleted = false;\n        _this.hasSubscription = false;\n        return _this;\n    }\n    SwitchFirstSubscriber.prototype._next = function (value) {\n        if (!this.hasSubscription) {\n            this.hasSubscription = true;\n            this.add(subscribeToResult(this, value));\n        }\n    };\n    SwitchFirstSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (!this.hasSubscription) {\n            this.destination.complete();\n        }\n    };\n    SwitchFirstSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.remove(innerSub);\n        this.hasSubscription = false;\n        if (this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return SwitchFirstSubscriber;\n}(OuterSubscriber));\n\nvar __extends$55 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable only if the previous projected Observable has completed.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link exhaust}.</span>\n *\n * <img src=\"./img/exhaustMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. When it projects a source value to\n * an Observable, the output Observable begins emitting the items emitted by\n * that projected Observable. However, `exhaustMap` ignores every new projected\n * Observable if the previous projected Observable has not yet completed. Once\n * that one completes, it will accept and flatten the next projected Observable\n * and repeat this process.\n *\n * @example <caption>Run a finite timer for each click, only if there is no currently active timer</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.exhaustMap((ev) => Rx.Observable.interval(1000).take(5));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMap}\n * @see {@link exhaust}\n * @see {@link mergeMap}\n * @see {@link switchMap}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return {Observable} An Observable containing projected Observables\n * of each item of the source, ignoring projected Observables that start before\n * their preceding Observable has completed.\n * @method exhaustMap\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ExhaustMapSubscriber = /** @class */ (function (_super) {\n    __extends$55(ExhaustMapSubscriber, _super);\n    function ExhaustMapSubscriber(destination, project) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.hasSubscription = false;\n        _this.hasCompleted = false;\n        _this.index = 0;\n        return _this;\n    }\n    ExhaustMapSubscriber.prototype._next = function (value) {\n        if (!this.hasSubscription) {\n            this.tryNext(value);\n        }\n    };\n    ExhaustMapSubscriber.prototype.tryNext = function (value) {\n        var index = this.index++;\n        var destination = this.destination;\n        try {\n            var result = this.project(value, index);\n            this.hasSubscription = true;\n            this.add(subscribeToResult(this, result, value, index));\n        }\n        catch (err) {\n            destination.error(err);\n        }\n    };\n    ExhaustMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (!this.hasSubscription) {\n            this.destination.complete();\n        }\n    };\n    ExhaustMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    ExhaustMapSubscriber.prototype.notifyError = function (err) {\n        this.destination.error(err);\n    };\n    ExhaustMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.remove(innerSub);\n        this.hasSubscription = false;\n        if (this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return ExhaustMapSubscriber;\n}(OuterSubscriber));\n\nvar __extends$56 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Recursively projects each source value to an Observable which is merged in\n * the output Observable.\n *\n * <span class=\"informal\">It's similar to {@link mergeMap}, but applies the\n * projection function to every source value as well as every output value.\n * It's recursive.</span>\n *\n * <img src=\"./img/expand.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an Observable, and then merging those resulting Observables and\n * emitting the results of this merger. *Expand* will re-emit on the output\n * Observable every source value. Then, each output value is given to the\n * `project` function which returns an inner Observable to be merged on the\n * output Observable. Those output values resulting from the projection are also\n * given to the `project` function to produce new output values. This is how\n * *expand* behaves recursively.\n *\n * @example <caption>Start emitting the powers of two on every click, at most 10 of them</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var powersOfTwo = clicks\n *   .mapTo(1)\n *   .expand(x => Rx.Observable.of(2 * x).delay(1000))\n *   .take(10);\n * powersOfTwo.subscribe(x => console.log(x));\n *\n * @see {@link mergeMap}\n * @see {@link mergeScan}\n *\n * @param {function(value: T, index: number) => Observable} project A function\n * that, when applied to an item emitted by the source or the output Observable,\n * returns an Observable.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @param {Scheduler} [scheduler=null] The IScheduler to use for subscribing to\n * each projected inner Observable.\n * @return {Observable} An Observable that emits the source values and also\n * result of applying the projection function to each value emitted on the\n * output Observable and and merging the results of the Observables obtained\n * from this transformation.\n * @method expand\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ExpandSubscriber = /** @class */ (function (_super) {\n    __extends$56(ExpandSubscriber, _super);\n    function ExpandSubscriber(destination, project, concurrent, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.scheduler = scheduler;\n        _this.index = 0;\n        _this.active = 0;\n        _this.hasCompleted = false;\n        if (concurrent < Number.POSITIVE_INFINITY) {\n            _this.buffer = [];\n        }\n        return _this;\n    }\n    ExpandSubscriber.dispatch = function (arg) {\n        var subscriber = arg.subscriber, result = arg.result, value = arg.value, index = arg.index;\n        subscriber.subscribeToProjection(result, value, index);\n    };\n    ExpandSubscriber.prototype._next = function (value) {\n        var destination = this.destination;\n        if (destination.closed) {\n            this._complete();\n            return;\n        }\n        var index = this.index++;\n        if (this.active < this.concurrent) {\n            destination.next(value);\n            var result = tryCatch(this.project)(value, index);\n            if (result === errorObject) {\n                destination.error(errorObject.e);\n            }\n            else if (!this.scheduler) {\n                this.subscribeToProjection(result, value, index);\n            }\n            else {\n                var state = { subscriber: this, result: result, value: value, index: index };\n                this.add(this.scheduler.schedule(ExpandSubscriber.dispatch, 0, state));\n            }\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    ExpandSubscriber.prototype.subscribeToProjection = function (result, value, index) {\n        this.active++;\n        this.add(subscribeToResult(this, result, value, index));\n    };\n    ExpandSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.hasCompleted && this.active === 0) {\n            this.destination.complete();\n        }\n    };\n    ExpandSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this._next(innerValue);\n    };\n    ExpandSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer && buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        if (this.hasCompleted && this.active === 0) {\n            this.destination.complete();\n        }\n    };\n    return ExpandSubscriber;\n}(OuterSubscriber));\n\nvar __extends$57 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that mirrors the source Observable, but will call a specified function when\n * the source terminates on complete or error.\n * @param {function} callback Function to be called when source terminates.\n * @return {Observable} An Observable that mirrors the source, but will call the specified function on termination.\n * @method finally\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FinallySubscriber = /** @class */ (function (_super) {\n    __extends$57(FinallySubscriber, _super);\n    function FinallySubscriber(destination, callback) {\n        var _this = _super.call(this, destination) || this;\n        _this.add(new Subscription(callback));\n        return _this;\n    }\n    return FinallySubscriber;\n}(Subscriber));\n\nvar __extends$58 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits only the first value emitted by the source Observable that meets some\n * condition.\n *\n * <span class=\"informal\">Finds the first value that passes some test and emits\n * that.</span>\n *\n * <img src=\"./img/find.png\" width=\"100%\">\n *\n * `find` searches for the first item in the source Observable that matches the\n * specified condition embodied by the `predicate`, and returns the first\n * occurrence in the source. Unlike {@link first}, the `predicate` is required\n * in `find`, and does not emit an error if a valid value is not found.\n *\n * @example <caption>Find and emit the first click that happens on a DIV element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.find(ev => ev.target.tagName === 'DIV');\n * result.subscribe(x => console.log(x));\n *\n * @see {@link filter}\n * @see {@link first}\n * @see {@link findIndex}\n * @see {@link take}\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} predicate\n * A function called with each item to test for condition matching.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable<T>} An Observable of the first item that matches the\n * condition.\n * @method find\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FindValueSubscriber = /** @class */ (function (_super) {\n    __extends$58(FindValueSubscriber, _super);\n    function FindValueSubscriber(destination, predicate, source, yieldIndex, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.source = source;\n        _this.yieldIndex = yieldIndex;\n        _this.thisArg = thisArg;\n        _this.index = 0;\n        return _this;\n    }\n    FindValueSubscriber.prototype.notifyComplete = function (value) {\n        var destination = this.destination;\n        destination.next(value);\n        destination.complete();\n    };\n    FindValueSubscriber.prototype._next = function (value) {\n        var _a = this, predicate = _a.predicate, thisArg = _a.thisArg;\n        var index = this.index++;\n        try {\n            var result = predicate.call(thisArg || this, value, index, this.source);\n            if (result) {\n                this.notifyComplete(this.yieldIndex ? index : value);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    FindValueSubscriber.prototype._complete = function () {\n        this.notifyComplete(this.yieldIndex ? -1 : undefined);\n    };\n    return FindValueSubscriber;\n}(Subscriber));\n\n/**\n * Emits only the index of the first value emitted by the source Observable that\n * meets some condition.\n *\n * <span class=\"informal\">It's like {@link find}, but emits the index of the\n * found value, not the value itself.</span>\n *\n * <img src=\"./img/findIndex.png\" width=\"100%\">\n *\n * `findIndex` searches for the first item in the source Observable that matches\n * the specified condition embodied by the `predicate`, and returns the\n * (zero-based) index of the first occurrence in the source. Unlike\n * {@link first}, the `predicate` is required in `findIndex`, and does not emit\n * an error if a valid value is not found.\n *\n * @example <caption>Emit the index of first click that happens on a DIV element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.findIndex(ev => ev.target.tagName === 'DIV');\n * result.subscribe(x => console.log(x));\n *\n * @see {@link filter}\n * @see {@link find}\n * @see {@link first}\n * @see {@link take}\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} predicate\n * A function called with each item to test for condition matching.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable} An Observable of the index of the first item that\n * matches the condition.\n * @method find\n * @owner Observable\n */\n\n/**\n * Emits only the first value (or the first value that meets some condition)\n * emitted by the source Observable.\n *\n * <span class=\"informal\">Emits only the first value. Or emits only the first\n * value that passes some test.</span>\n *\n * <img src=\"./img/first.png\" width=\"100%\">\n *\n * If called with no arguments, `first` emits the first value of the source\n * Observable, then completes. If called with a `predicate` function, `first`\n * emits the first value of the source that matches the specified condition. It\n * may also take a `resultSelector` function to produce the output value from\n * the input value, and a `defaultValue` to emit in case the source completes\n * before it is able to emit a valid value. Throws an error if `defaultValue`\n * was not provided and a matching element is not found.\n *\n * @example <caption>Emit only the first click that happens on the DOM</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.first();\n * result.subscribe(x => console.log(x));\n *\n * @example <caption>Emits the first click that happens on a DIV</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.first(ev => ev.target.tagName === 'DIV');\n * result.subscribe(x => console.log(x));\n *\n * @see {@link filter}\n * @see {@link find}\n * @see {@link take}\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n *\n * @param {function(value: T, index: number, source: Observable<T>): boolean} [predicate]\n * An optional function called with each item to test for condition matching.\n * @param {R} [defaultValue] The default value emitted in case no valid value\n * was found on the source.\n * @return {Observable<T|R>} An Observable of the first item that matches the\n * condition.\n * @method first\n * @owner Observable\n */\n\nvar __extends$59 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Ignores all items emitted by the source Observable and only passes calls of `complete` or `error`.\n *\n * <img src=\"./img/ignoreElements.png\" width=\"100%\">\n *\n * @return {Observable} An empty Observable that only calls `complete`\n * or `error`, based on which one is called by the source Observable.\n * @method ignoreElements\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar IgnoreElementsSubscriber = /** @class */ (function (_super) {\n    __extends$59(IgnoreElementsSubscriber, _super);\n    function IgnoreElementsSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    IgnoreElementsSubscriber.prototype._next = function (unused) {\n        // Do nothing\n    };\n    return IgnoreElementsSubscriber;\n}(Subscriber));\n\nvar __extends$60 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar IsEmptySubscriber = /** @class */ (function (_super) {\n    __extends$60(IsEmptySubscriber, _super);\n    function IsEmptySubscriber(destination) {\n        return _super.call(this, destination) || this;\n    }\n    IsEmptySubscriber.prototype.notifyComplete = function (isEmpty) {\n        var destination = this.destination;\n        destination.next(isEmpty);\n        destination.complete();\n    };\n    IsEmptySubscriber.prototype._next = function (value) {\n        this.notifyComplete(false);\n    };\n    IsEmptySubscriber.prototype._complete = function () {\n        this.notifyComplete(true);\n    };\n    return IsEmptySubscriber;\n}(Subscriber));\n\nvar __extends$61 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits only the last `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Remembers the latest `count` values, then emits those\n * only when the source completes.</span>\n *\n * <img src=\"./img/takeLast.png\" width=\"100%\">\n *\n * `takeLast` returns an Observable that emits at most the last `count` values\n * emitted by the source Observable. If the source emits fewer than `count`\n * values then all of its values are emitted. This operator must wait until the\n * `complete` notification emission from the source in order to emit the `next`\n * values on the output Observable, because otherwise it is impossible to know\n * whether or not more values will be emitted on the source. For this reason,\n * all values are emitted synchronously, followed by the complete notification.\n *\n * @example <caption>Take the last 3 values of an Observable with many values</caption>\n * var many = Rx.Observable.range(1, 100);\n * var lastThree = many.pipe(takeLast(3));\n * lastThree.subscribe(x => console.log(x));\n *\n * @see {@link take}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @throws {ArgumentOutOfRangeError} When using `takeLast(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0`.\n *\n * @param {number} count The maximum number of values to emit from the end of\n * the sequence of values emitted by the source Observable.\n * @return {Observable<T>} An Observable that emits at most the last count\n * values emitted by the source Observable.\n * @method takeLast\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeLastSubscriber = /** @class */ (function (_super) {\n    __extends$61(TakeLastSubscriber, _super);\n    function TakeLastSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.ring = new Array();\n        _this.count = 0;\n        return _this;\n    }\n    TakeLastSubscriber.prototype._next = function (value) {\n        var ring = this.ring;\n        var total = this.total;\n        var count = this.count++;\n        if (ring.length < total) {\n            ring.push(value);\n        }\n        else {\n            var index = count % total;\n            ring[index] = value;\n        }\n    };\n    TakeLastSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        var count = this.count;\n        if (count > 0) {\n            var total = this.count >= this.total ? this.total : this.count;\n            var ring = this.ring;\n            for (var i = 0; i < total; i++) {\n                var idx = (count++) % total;\n                destination.next(ring[idx]);\n            }\n        }\n        destination.complete();\n    };\n    return TakeLastSubscriber;\n}(Subscriber));\n\n/**\n * Returns an Observable that emits only the last item emitted by the source Observable.\n * It optionally takes a predicate function as a parameter, in which case, rather than emitting\n * the last item from the source Observable, the resulting Observable will emit the last item\n * from the source Observable that satisfies the predicate.\n *\n * <img src=\"./img/last.png\" width=\"100%\">\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n * @param {function} [predicate] - The condition any source emitted item has to satisfy.\n * @param {any} [defaultValue] - An optional default value to provide if last\n * predicate isn't met or no values were emitted.\n * @return {Observable} An Observable that emits only the last item satisfying the given condition\n * from the source, or an NoSuchElementException if no such items are emitted.\n * @throws - Throws if no items that match the predicate are emitted by the source Observable.\n */\n\nvar __extends$62 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits the given constant value on the output Observable every time the source\n * Observable emits a value.\n *\n * <span class=\"informal\">Like {@link map}, but it maps every source value to\n * the same output value every time.</span>\n *\n * <img src=\"./img/mapTo.png\" width=\"100%\">\n *\n * Takes a constant `value` as argument, and emits that whenever the source\n * Observable emits a value. In other words, ignores the actual source value,\n * and simply uses the emission moment to know when to emit the given `value`.\n *\n * @example <caption>Map every click to the string 'Hi'</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var greetings = clicks.mapTo('Hi');\n * greetings.subscribe(x => console.log(x));\n *\n * @see {@link map}\n *\n * @param {any} value The value to map each source value to.\n * @return {Observable} An Observable that emits the given `value` every time\n * the source Observable emits something.\n * @method mapTo\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MapToSubscriber = /** @class */ (function (_super) {\n    __extends$62(MapToSubscriber, _super);\n    function MapToSubscriber(destination, value) {\n        var _this = _super.call(this, destination) || this;\n        _this.value = value;\n        return _this;\n    }\n    MapToSubscriber.prototype._next = function (x) {\n        this.destination.next(this.value);\n    };\n    return MapToSubscriber;\n}(Subscriber));\n\nvar __extends$63 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Represents all of the notifications from the source Observable as `next`\n * emissions marked with their original types within {@link Notification}\n * objects.\n *\n * <span class=\"informal\">Wraps `next`, `error` and `complete` emissions in\n * {@link Notification} objects, emitted as `next` on the output Observable.\n * </span>\n *\n * <img src=\"./img/materialize.png\" width=\"100%\">\n *\n * `materialize` returns an Observable that emits a `next` notification for each\n * `next`, `error`, or `complete` emission of the source Observable. When the\n * source Observable emits `complete`, the output Observable will emit `next` as\n * a Notification of type \"complete\", and then it will emit `complete` as well.\n * When the source Observable emits `error`, the output will emit `next` as a\n * Notification of type \"error\", and then `complete`.\n *\n * This operator is useful for producing metadata of the source Observable, to\n * be consumed as `next` emissions. Use it in conjunction with\n * {@link dematerialize}.\n *\n * @example <caption>Convert a faulty Observable to an Observable of Notifications</caption>\n * var letters = Rx.Observable.of('a', 'b', 13, 'd');\n * var upperCase = letters.map(x => x.toUpperCase());\n * var materialized = upperCase.materialize();\n * materialized.subscribe(x => console.log(x));\n *\n * // Results in the following:\n * // - Notification {kind: \"N\", value: \"A\", error: undefined, hasValue: true}\n * // - Notification {kind: \"N\", value: \"B\", error: undefined, hasValue: true}\n * // - Notification {kind: \"E\", value: undefined, error: TypeError:\n * //   x.toUpperCase is not a function at MapSubscriber.letters.map.x\n * //   [as project] (http://1, hasValue: false}\n *\n * @see {@link Notification}\n * @see {@link dematerialize}\n *\n * @return {Observable<Notification<T>>} An Observable that emits\n * {@link Notification} objects that wrap the original emissions from the source\n * Observable with metadata.\n * @method materialize\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MaterializeSubscriber = /** @class */ (function (_super) {\n    __extends$63(MaterializeSubscriber, _super);\n    function MaterializeSubscriber(destination) {\n        return _super.call(this, destination) || this;\n    }\n    MaterializeSubscriber.prototype._next = function (value) {\n        this.destination.next(Notification.createNext(value));\n    };\n    MaterializeSubscriber.prototype._error = function (err) {\n        var destination = this.destination;\n        destination.next(Notification.createError(err));\n        destination.complete();\n    };\n    MaterializeSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        destination.next(Notification.createComplete());\n        destination.complete();\n    };\n    return MaterializeSubscriber;\n}(Subscriber));\n\nvar __extends$64 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Applies an accumulator function over the source Observable, and returns each\n * intermediate result, with an optional seed value.\n *\n * <span class=\"informal\">It's like {@link reduce}, but emits the current\n * accumulation whenever the source emits a value.</span>\n *\n * <img src=\"./img/scan.png\" width=\"100%\">\n *\n * Combines together all values emitted on the source, using an accumulator\n * function that knows how to join a new source value into the accumulation from\n * the past. Is similar to {@link reduce}, but emits the intermediate\n * accumulations.\n *\n * Returns an Observable that applies a specified `accumulator` function to each\n * item emitted by the source Observable. If a `seed` value is specified, then\n * that value will be used as the initial value for the accumulator. If no seed\n * value is specified, the first item of the source is used as the seed.\n *\n * @example <caption>Count the number of click events</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var ones = clicks.mapTo(1);\n * var seed = 0;\n * var count = ones.scan((acc, one) => acc + one, seed);\n * count.subscribe(x => console.log(x));\n *\n * @see {@link expand}\n * @see {@link mergeScan}\n * @see {@link reduce}\n *\n * @param {function(acc: R, value: T, index: number): R} accumulator\n * The accumulator function called on each source value.\n * @param {T|R} [seed] The initial accumulation value.\n * @return {Observable<R>} An observable of the accumulated values.\n * @method scan\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ScanSubscriber = /** @class */ (function (_super) {\n    __extends$64(ScanSubscriber, _super);\n    function ScanSubscriber(destination, accumulator, _seed, hasSeed) {\n        var _this = _super.call(this, destination) || this;\n        _this.accumulator = accumulator;\n        _this._seed = _seed;\n        _this.hasSeed = hasSeed;\n        _this.index = 0;\n        return _this;\n    }\n    Object.defineProperty(ScanSubscriber.prototype, \"seed\", {\n        get: function () {\n            return this._seed;\n        },\n        set: function (value) {\n            this.hasSeed = true;\n            this._seed = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ScanSubscriber.prototype._next = function (value) {\n        if (!this.hasSeed) {\n            this.seed = value;\n            this.destination.next(value);\n        }\n        else {\n            return this._tryNext(value);\n        }\n    };\n    ScanSubscriber.prototype._tryNext = function (value) {\n        var index = this.index++;\n        var result;\n        try {\n            result = this.accumulator(this.seed, value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n        this.seed = result;\n        this.destination.next(result);\n    };\n    return ScanSubscriber;\n}(Subscriber));\n\n/* tslint:enable:max-line-length */\n/**\n * Applies an accumulator function over the source Observable, and returns the\n * accumulated result when the source completes, given an optional seed value.\n *\n * <span class=\"informal\">Combines together all values emitted on the source,\n * using an accumulator function that knows how to join a new source value into\n * the accumulation from the past.</span>\n *\n * <img src=\"./img/reduce.png\" width=\"100%\">\n *\n * Like\n * [Array.prototype.reduce()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce),\n * `reduce` applies an `accumulator` function against an accumulation and each\n * value of the source Observable (from the past) to reduce it to a single\n * value, emitted on the output Observable. Note that `reduce` will only emit\n * one value, only when the source Observable completes. It is equivalent to\n * applying operator {@link scan} followed by operator {@link last}.\n *\n * Returns an Observable that applies a specified `accumulator` function to each\n * item emitted by the source Observable. If a `seed` value is specified, then\n * that value will be used as the initial value for the accumulator. If no seed\n * value is specified, the first item of the source is used as the seed.\n *\n * @example <caption>Count the number of click events that happened in 5 seconds</caption>\n * var clicksInFiveSeconds = Rx.Observable.fromEvent(document, 'click')\n *   .takeUntil(Rx.Observable.interval(5000));\n * var ones = clicksInFiveSeconds.mapTo(1);\n * var seed = 0;\n * var count = ones.reduce((acc, one) => acc + one, seed);\n * count.subscribe(x => console.log(x));\n *\n * @see {@link count}\n * @see {@link expand}\n * @see {@link mergeScan}\n * @see {@link scan}\n *\n * @param {function(acc: R, value: T, index: number): R} accumulator The accumulator function\n * called on each source value.\n * @param {R} [seed] The initial accumulation value.\n * @return {Observable<R>} An Observable that emits a single value that is the\n * result of accumulating the values emitted by the source Observable.\n * @method reduce\n * @owner Observable\n */\n\n/**\n * The Max operator operates on an Observable that emits numbers (or items that can be compared with a provided function),\n * and when source Observable completes it emits a single item: the item with the largest value.\n *\n * <img src=\"./img/max.png\" width=\"100%\">\n *\n * @example <caption>Get the maximal value of a series of numbers</caption>\n * Rx.Observable.of(5, 4, 7, 2, 8)\n *   .max()\n *   .subscribe(x => console.log(x)); // -> 8\n *\n * @example <caption>Use a comparer function to get the maximal item</caption>\n * interface Person {\n *   age: number,\n *   name: string\n * }\n * Observable.of<Person>({age: 7, name: 'Foo'},\n *                       {age: 5, name: 'Bar'},\n *                       {age: 9, name: 'Beer'})\n *           .max<Person>((a: Person, b: Person) => a.age < b.age ? -1 : 1)\n *           .subscribe((x: Person) => console.log(x.name)); // -> 'Beer'\n * }\n *\n * @see {@link min}\n *\n * @param {Function} [comparer] - Optional comparer function that it will use instead of its default to compare the\n * value of two items.\n * @return {Observable} An Observable that emits item with the largest value.\n * @method max\n * @owner Observable\n */\n\nvar __read$10 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$10 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$10(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * @deprecated Deprecated in favor of static merge.\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to the same Observable which is merged multiple\n * times in the output Observable.\n *\n * <span class=\"informal\">It's like {@link mergeMap}, but maps each value always\n * to the same inner Observable.</span>\n *\n * <img src=\"./img/mergeMapTo.png\" width=\"100%\">\n *\n * Maps each source value to the given Observable `innerObservable` regardless\n * of the source value, and then merges those resulting Observables into one\n * single Observable, which is the output Observable.\n *\n * @example <caption>For each click event, start an interval Observable ticking every 1 second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.mergeMapTo(Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMapTo}\n * @see {@link merge}\n * @see {@link mergeAll}\n * @see {@link mergeMap}\n * @see {@link mergeScan}\n * @see {@link switchMapTo}\n *\n * @param {ObservableInput} innerObservable An Observable to replace each value from\n * the source Observable.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input\n * Observables being subscribed to concurrently.\n * @return {Observable} An Observable that emits items from the given\n * `innerObservable`\n * @method mergeMapTo\n * @owner Observable\n */\n\nvar __extends$65 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Applies an accumulator function over the source Observable where the\n * accumulator function itself returns an Observable, then each intermediate\n * Observable returned is merged into the output Observable.\n *\n * <span class=\"informal\">It's like {@link scan}, but the Observables returned\n * by the accumulator are merged into the outer Observable.</span>\n *\n * @example <caption>Count the number of click events</caption>\n * const click$ = Rx.Observable.fromEvent(document, 'click');\n * const one$ = click$.mapTo(1);\n * const seed = 0;\n * const count$ = one$.mergeScan((acc, one) => Rx.Observable.of(acc + one), seed);\n * count$.subscribe(x => console.log(x));\n *\n * // Results:\n * 1\n * 2\n * 3\n * 4\n * // ...and so on for each click\n *\n * @param {function(acc: R, value: T): Observable<R>} accumulator\n * The accumulator function called on each source value.\n * @param seed The initial accumulation value.\n * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of\n * input Observables being subscribed to concurrently.\n * @return {Observable<R>} An observable of the accumulated values.\n * @method mergeScan\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MergeScanSubscriber = /** @class */ (function (_super) {\n    __extends$65(MergeScanSubscriber, _super);\n    function MergeScanSubscriber(destination, accumulator, acc, concurrent) {\n        var _this = _super.call(this, destination) || this;\n        _this.accumulator = accumulator;\n        _this.acc = acc;\n        _this.concurrent = concurrent;\n        _this.hasValue = false;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeScanSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            var index = this.index++;\n            var ish = tryCatch(this.accumulator)(this.acc, value);\n            var destination = this.destination;\n            if (ish === errorObject) {\n                destination.error(errorObject.e);\n            }\n            else {\n                this.active++;\n                this._innerSub(ish, value, index);\n            }\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeScanSubscriber.prototype._innerSub = function (ish, value, index) {\n        this.add(subscribeToResult(this, ish, value, index));\n    };\n    MergeScanSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            if (this.hasValue === false) {\n                this.destination.next(this.acc);\n            }\n            this.destination.complete();\n        }\n    };\n    MergeScanSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var destination = this.destination;\n        this.acc = innerValue;\n        this.hasValue = true;\n        destination.next(innerValue);\n    };\n    MergeScanSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            if (this.hasValue === false) {\n                this.destination.next(this.acc);\n            }\n            this.destination.complete();\n        }\n    };\n    return MergeScanSubscriber;\n}(OuterSubscriber));\n\n/**\n * The Min operator operates on an Observable that emits numbers (or items that can be compared with a provided function),\n * and when source Observable completes it emits a single item: the item with the smallest value.\n *\n * <img src=\"./img/min.png\" width=\"100%\">\n *\n * @example <caption>Get the minimal value of a series of numbers</caption>\n * Rx.Observable.of(5, 4, 7, 2, 8)\n *   .min()\n *   .subscribe(x => console.log(x)); // -> 2\n *\n * @example <caption>Use a comparer function to get the minimal item</caption>\n * interface Person {\n *   age: number,\n *   name: string\n * }\n * Observable.of<Person>({age: 7, name: 'Foo'},\n *                       {age: 5, name: 'Bar'},\n *                       {age: 9, name: 'Beer'})\n *           .min<Person>( (a: Person, b: Person) => a.age < b.age ? -1 : 1)\n *           .subscribe((x: Person) => console.log(x.name)); // -> 'Bar'\n * }\n *\n * @see {@link max}\n *\n * @param {Function} [comparer] - Optional comparer function that it will use instead of its default to compare the\n * value of two items.\n * @return {Observable<R>} An Observable that emits item with the smallest value.\n * @method min\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that emits the results of invoking a specified selector on items\n * emitted by a ConnectableObservable that shares a single subscription to the underlying stream.\n *\n * <img src=\"./img/multicast.png\" width=\"100%\">\n *\n * @param {Function|Subject} subjectOrSubjectFactory - Factory function to create an intermediate subject through\n * which the source sequence's elements will be multicast to the selector function\n * or Subject to push source elements into.\n * @param {Function} [selector] - Optional selector function that can use the multicasted source stream\n * as many times as needed, without causing multiple subscriptions to the source stream.\n * Subscribers to the given source will receive all notifications of the source from the\n * time of the subscription forward.\n * @return {Observable} An Observable that emits the results of invoking the selector\n * on the items emitted by a `ConnectableObservable` that shares a single subscription to\n * the underlying stream.\n * @method multicast\n * @owner Observable\n */\nfunction multicast(subjectOrSubjectFactory, selector) {\n    return function multicastOperatorFunction(source) {\n        var subjectFactory;\n        if (typeof subjectOrSubjectFactory === 'function') {\n            subjectFactory = subjectOrSubjectFactory;\n        }\n        else {\n            subjectFactory = function subjectFactory() {\n                return subjectOrSubjectFactory;\n            };\n        }\n        if (typeof selector === 'function') {\n            return source.lift(new MulticastOperator(subjectFactory, selector));\n        }\n        var connectable = Object.create(source, connectableObservableDescriptor);\n        connectable.source = source;\n        connectable.subjectFactory = subjectFactory;\n        return connectable;\n    };\n}\nvar MulticastOperator = /** @class */ (function () {\n    function MulticastOperator(subjectFactory, selector) {\n        this.subjectFactory = subjectFactory;\n        this.selector = selector;\n    }\n    MulticastOperator.prototype.call = function (subscriber, source) {\n        var selector = this.selector;\n        var subject = this.subjectFactory();\n        var subscription = selector(subject).subscribe(subscriber);\n        subscription.add(source.subscribe(subject));\n        return subscription;\n    };\n    return MulticastOperator;\n}());\n\nvar __extends$66 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * When any of the provided Observable emits an complete or error notification, it immediately subscribes to the next one\n * that was passed.\n *\n * <span class=\"informal\">Execute series of Observables no matter what, even if it means swallowing errors.</span>\n *\n * <img src=\"./img/onErrorResumeNext.png\" width=\"100%\">\n *\n * `onErrorResumeNext` is an operator that accepts a series of Observables, provided either directly as\n * arguments or as an array. If no single Observable is provided, returned Observable will simply behave the same\n * as the source.\n *\n * `onErrorResumeNext` returns an Observable that starts by subscribing and re-emitting values from the source Observable.\n * When its stream of values ends - no matter if Observable completed or emitted an error - `onErrorResumeNext`\n * will subscribe to the first Observable that was passed as an argument to the method. It will start re-emitting\n * its values as well and - again - when that stream ends, `onErrorResumeNext` will proceed to subscribing yet another\n * Observable in provided series, no matter if previous Observable completed or ended with an error. This will\n * be happening until there is no more Observables left in the series, at which point returned Observable will\n * complete - even if the last subscribed stream ended with an error.\n *\n * `onErrorResumeNext` can be therefore thought of as version of {@link concat} operator, which is more permissive\n * when it comes to the errors emitted by its input Observables. While `concat` subscribes to the next Observable\n * in series only if previous one successfully completed, `onErrorResumeNext` subscribes even if it ended with\n * an error.\n *\n * Note that you do not get any access to errors emitted by the Observables. In particular do not\n * expect these errors to appear in error callback passed to {@link subscribe}. If you want to take\n * specific actions based on what error was emitted by an Observable, you should try out {@link catch} instead.\n *\n *\n * @example <caption>Subscribe to the next Observable after map fails</caption>\n * Rx.Observable.of(1, 2, 3, 0)\n *   .map(x => {\n *       if (x === 0) { throw Error(); }\n         return 10 / x;\n *   })\n *   .onErrorResumeNext(Rx.Observable.of(1, 2, 3))\n *   .subscribe(\n *     val => console.log(val),\n *     err => console.log(err),          // Will never be called.\n *     () => console.log('that\\'s it!')\n *   );\n *\n * // Logs:\n * // 10\n * // 5\n * // 3.3333333333333335\n * // 1\n * // 2\n * // 3\n * // \"that's it!\"\n *\n * @see {@link concat}\n * @see {@link catch}\n *\n * @param {...ObservableInput} observables Observables passed either directly or as an array.\n * @return {Observable} An Observable that emits values from source Observable, but - if it errors - subscribes\n * to the next passed Observable and so on, until it completes or runs out of Observables.\n * @method onErrorResumeNext\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n\nvar OnErrorResumeNextSubscriber = /** @class */ (function (_super) {\n    __extends$66(OnErrorResumeNextSubscriber, _super);\n    function OnErrorResumeNextSubscriber(destination, nextSources) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.nextSources = nextSources;\n        return _this;\n    }\n    OnErrorResumeNextSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.subscribeToNextSource();\n    };\n    OnErrorResumeNextSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.subscribeToNextSource();\n    };\n    OnErrorResumeNextSubscriber.prototype._error = function (err) {\n        this.subscribeToNextSource();\n    };\n    OnErrorResumeNextSubscriber.prototype._complete = function () {\n        this.subscribeToNextSource();\n    };\n    OnErrorResumeNextSubscriber.prototype.subscribeToNextSource = function () {\n        var next = this.nextSources.shift();\n        if (next) {\n            this.add(subscribeToResult(this, next));\n        }\n        else {\n            this.destination.complete();\n        }\n    };\n    return OnErrorResumeNextSubscriber;\n}(OuterSubscriber));\n\nvar __extends$67 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Groups pairs of consecutive emissions together and emits them as an array of\n * two values.\n *\n * <span class=\"informal\">Puts the current value and previous value together as\n * an array, and emits that.</span>\n *\n * <img src=\"./img/pairwise.png\" width=\"100%\">\n *\n * The Nth emission from the source Observable will cause the output Observable\n * to emit an array [(N-1)th, Nth] of the previous and the current value, as a\n * pair. For this reason, `pairwise` emits on the second and subsequent\n * emissions from the source Observable, but not on the first emission, because\n * there is no previous value in that case.\n *\n * @example <caption>On every click (starting from the second), emit the relative distance to the previous click</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var pairs = clicks.pairwise();\n * var distance = pairs.map(pair => {\n *   var x0 = pair[0].clientX;\n *   var y0 = pair[0].clientY;\n *   var x1 = pair[1].clientX;\n *   var y1 = pair[1].clientY;\n *   return Math.sqrt(Math.pow(x0 - x1, 2) + Math.pow(y0 - y1, 2));\n * });\n * distance.subscribe(x => console.log(x));\n *\n * @see {@link buffer}\n * @see {@link bufferCount}\n *\n * @return {Observable<Array<T>>} An Observable of pairs (as arrays) of\n * consecutive values from the source Observable.\n * @method pairwise\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar PairwiseSubscriber = /** @class */ (function (_super) {\n    __extends$67(PairwiseSubscriber, _super);\n    function PairwiseSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasPrev = false;\n        return _this;\n    }\n    PairwiseSubscriber.prototype._next = function (value) {\n        if (this.hasPrev) {\n            this.destination.next([this.prev, value]);\n        }\n        else {\n            this.hasPrev = true;\n        }\n        this.prev = value;\n    };\n    return PairwiseSubscriber;\n}(Subscriber));\n\n/**\n * Splits the source Observable into two, one with values that satisfy a\n * predicate, and another with values that don't satisfy the predicate.\n *\n * <span class=\"informal\">It's like {@link filter}, but returns two Observables:\n * one like the output of {@link filter}, and the other with values that did not\n * pass the condition.</span>\n *\n * <img src=\"./img/partition.png\" width=\"100%\">\n *\n * `partition` outputs an array with two Observables that partition the values\n * from the source Observable through the given `predicate` function. The first\n * Observable in that array emits source values for which the predicate argument\n * returns true. The second Observable emits source values for which the\n * predicate returns false. The first behaves like {@link filter} and the second\n * behaves like {@link filter} with the predicate negated.\n *\n * @example <caption>Partition click events into those on DIV elements and those elsewhere</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var parts = clicks.partition(ev => ev.target.tagName === 'DIV');\n * var clicksOnDivs = parts[0];\n * var clicksElsewhere = parts[1];\n * clicksOnDivs.subscribe(x => console.log('DIV clicked: ', x));\n * clicksElsewhere.subscribe(x => console.log('Other clicked: ', x));\n *\n * @see {@link filter}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted on the first Observable in the returned array, if\n * `false` the value is emitted on the second Observable in the array. The\n * `index` parameter is the number `i` for the i-th source emission that has\n * happened since the subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {[Observable<T>, Observable<T>]} An array with two Observables: one\n * with values that passed the predicate, and another with values that did not\n * pass the predicate.\n * @method partition\n * @owner Observable\n */\n\n/**\n * Maps each source value (an object) to its specified nested property.\n *\n * <span class=\"informal\">Like {@link map}, but meant only for picking one of\n * the nested properties of every emitted object.</span>\n *\n * <img src=\"./img/pluck.png\" width=\"100%\">\n *\n * Given a list of strings describing a path to an object property, retrieves\n * the value of a specified nested property from all values in the source\n * Observable. If a property can't be resolved, it will return `undefined` for\n * that value.\n *\n * @example <caption>Map every click to the tagName of the clicked target element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var tagNames = clicks.pluck('target', 'tagName');\n * tagNames.subscribe(x => console.log(x));\n *\n * @see {@link map}\n *\n * @param {...string} properties The nested properties to pluck from each source\n * value (an object).\n * @return {Observable} A new Observable of property values from the source values.\n * @method pluck\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n/**\n * Returns a ConnectableObservable, which is a variety of Observable that waits until its connect method is called\n * before it begins emitting items to those Observers that have subscribed to it.\n *\n * <img src=\"./img/publish.png\" width=\"100%\">\n *\n * @param {Function} [selector] - Optional selector function which can use the multicasted source sequence as many times\n * as needed, without causing multiple subscriptions to the source sequence.\n * Subscribers to the given source will receive all notifications of the source from the time of the subscription on.\n * @return A ConnectableObservable that upon connection causes the source Observable to emit items to its Observers.\n * @method publish\n * @owner Observable\n */\n\n/**\n * @param value\n * @return {ConnectableObservable<T>}\n * @method publishBehavior\n * @owner Observable\n */\n\n/* tslint:enable:max-line-length */\n\nvar __read$11 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$11 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$11(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that mirrors the first source Observable to emit an item\n * from the combination of this Observable and supplied Observables.\n * @param {...Observables} ...observables Sources used to race for which Observable emits first.\n * @return {Observable} An Observable that mirrors the output of the first Observable to emit an item.\n * @method race\n * @owner Observable\n */\n\nvar __extends$68 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that repeats the stream of items emitted by the source Observable at most count times.\n *\n * <img src=\"./img/repeat.png\" width=\"100%\">\n *\n * @param {number} [count] The number of times the source Observable items are repeated, a count of 0 will yield\n * an empty Observable.\n * @return {Observable} An Observable that repeats the stream of items emitted by the source Observable at most\n * count times.\n * @method repeat\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RepeatSubscriber = /** @class */ (function (_super) {\n    __extends$68(RepeatSubscriber, _super);\n    function RepeatSubscriber(destination, count, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.count = count;\n        _this.source = source;\n        return _this;\n    }\n    RepeatSubscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            var _a = this, source = _a.source, count = _a.count;\n            if (count === 0) {\n                return _super.prototype.complete.call(this);\n            }\n            else if (count > -1) {\n                this.count = count - 1;\n            }\n            source.subscribe(this._unsubscribeAndRecycle());\n        }\n    };\n    return RepeatSubscriber;\n}(Subscriber));\n\nvar __extends$69 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that mirrors the source Observable with the exception of a `complete`. If the source\n * Observable calls `complete`, this method will emit to the Observable returned from `notifier`. If that Observable\n * calls `complete` or `error`, then this method will call `complete` or `error` on the child subscription. Otherwise\n * this method will resubscribe to the source Observable.\n *\n * <img src=\"./img/repeatWhen.png\" width=\"100%\">\n *\n * @param {function(notifications: Observable): Observable} notifier - Receives an Observable of notifications with\n * which a user can `complete` or `error`, aborting the repetition.\n * @return {Observable} The source Observable modified with repeat logic.\n * @method repeatWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RepeatWhenSubscriber = /** @class */ (function (_super) {\n    __extends$69(RepeatWhenSubscriber, _super);\n    function RepeatWhenSubscriber(destination, notifier, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.notifier = notifier;\n        _this.source = source;\n        _this.sourceIsBeingSubscribedTo = true;\n        return _this;\n    }\n    RepeatWhenSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.sourceIsBeingSubscribedTo = true;\n        this.source.subscribe(this);\n    };\n    RepeatWhenSubscriber.prototype.notifyComplete = function (innerSub) {\n        if (this.sourceIsBeingSubscribedTo === false) {\n            return _super.prototype.complete.call(this);\n        }\n    };\n    RepeatWhenSubscriber.prototype.complete = function () {\n        this.sourceIsBeingSubscribedTo = false;\n        if (!this.isStopped) {\n            if (!this.retries) {\n                this.subscribeToRetries();\n            }\n            if (!this.retriesSubscription || this.retriesSubscription.closed) {\n                return _super.prototype.complete.call(this);\n            }\n            this._unsubscribeAndRecycle();\n            this.notifications.next();\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    RepeatWhenSubscriber.prototype._unsubscribe = function () {\n        var _a = this, notifications = _a.notifications, retriesSubscription = _a.retriesSubscription;\n        if (notifications) {\n            notifications.unsubscribe();\n            this.notifications = null;\n        }\n        if (retriesSubscription) {\n            retriesSubscription.unsubscribe();\n            this.retriesSubscription = null;\n        }\n        this.retries = null;\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    RepeatWhenSubscriber.prototype._unsubscribeAndRecycle = function () {\n        var _unsubscribe = this._unsubscribe;\n        this._unsubscribe = null;\n        _super.prototype._unsubscribeAndRecycle.call(this);\n        this._unsubscribe = _unsubscribe;\n        return this;\n    };\n    RepeatWhenSubscriber.prototype.subscribeToRetries = function () {\n        this.notifications = new Subject();\n        var retries = tryCatch(this.notifier)(this.notifications);\n        if (retries === errorObject) {\n            return _super.prototype.complete.call(this);\n        }\n        this.retries = retries;\n        this.retriesSubscription = subscribeToResult(this, retries);\n    };\n    return RepeatWhenSubscriber;\n}(OuterSubscriber));\n\nvar __extends$70 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that mirrors the source Observable with the exception of an `error`. If the source Observable\n * calls `error`, this method will resubscribe to the source Observable for a maximum of `count` resubscriptions (given\n * as a number parameter) rather than propagating the `error` call.\n *\n * <img src=\"./img/retry.png\" width=\"100%\">\n *\n * Any and all items emitted by the source Observable will be emitted by the resulting Observable, even those emitted\n * during failed subscriptions. For example, if an Observable fails at first but emits [1, 2] then succeeds the second\n * time and emits: [1, 2, 3, 4, 5] then the complete stream of emissions and notifications\n * would be: [1, 2, 1, 2, 3, 4, 5, `complete`].\n * @param {number} count - Number of retry attempts before failing.\n * @return {Observable} The source Observable modified with the retry logic.\n * @method retry\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RetrySubscriber = /** @class */ (function (_super) {\n    __extends$70(RetrySubscriber, _super);\n    function RetrySubscriber(destination, count, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.count = count;\n        _this.source = source;\n        return _this;\n    }\n    RetrySubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _a = this, source = _a.source, count = _a.count;\n            if (count === 0) {\n                return _super.prototype.error.call(this, err);\n            }\n            else if (count > -1) {\n                this.count = count - 1;\n            }\n            source.subscribe(this._unsubscribeAndRecycle());\n        }\n    };\n    return RetrySubscriber;\n}(Subscriber));\n\nvar __extends$71 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that mirrors the source Observable with the exception of an `error`. If the source Observable\n * calls `error`, this method will emit the Throwable that caused the error to the Observable returned from `notifier`.\n * If that Observable calls `complete` or `error` then this method will call `complete` or `error` on the child\n * subscription. Otherwise this method will resubscribe to the source Observable.\n *\n * <img src=\"./img/retryWhen.png\" width=\"100%\">\n *\n * @param {function(errors: Observable): Observable} notifier - Receives an Observable of notifications with which a\n * user can `complete` or `error`, aborting the retry.\n * @return {Observable} The source Observable modified with retry logic.\n * @method retryWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar RetryWhenSubscriber = /** @class */ (function (_super) {\n    __extends$71(RetryWhenSubscriber, _super);\n    function RetryWhenSubscriber(destination, notifier, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.notifier = notifier;\n        _this.source = source;\n        return _this;\n    }\n    RetryWhenSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var errors = this.errors;\n            var retries = this.retries;\n            var retriesSubscription = this.retriesSubscription;\n            if (!retries) {\n                errors = new Subject();\n                retries = tryCatch(this.notifier)(errors);\n                if (retries === errorObject) {\n                    return _super.prototype.error.call(this, errorObject.e);\n                }\n                retriesSubscription = subscribeToResult(this, retries);\n            }\n            else {\n                this.errors = null;\n                this.retriesSubscription = null;\n            }\n            this._unsubscribeAndRecycle();\n            this.errors = errors;\n            this.retries = retries;\n            this.retriesSubscription = retriesSubscription;\n            errors.next(err);\n        }\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    RetryWhenSubscriber.prototype._unsubscribe = function () {\n        var _a = this, errors = _a.errors, retriesSubscription = _a.retriesSubscription;\n        if (errors) {\n            errors.unsubscribe();\n            this.errors = null;\n        }\n        if (retriesSubscription) {\n            retriesSubscription.unsubscribe();\n            this.retriesSubscription = null;\n        }\n        this.retries = null;\n    };\n    RetryWhenSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var _unsubscribe = this._unsubscribe;\n        this._unsubscribe = null;\n        this._unsubscribeAndRecycle();\n        this._unsubscribe = _unsubscribe;\n        this.source.subscribe(this);\n    };\n    return RetryWhenSubscriber;\n}(OuterSubscriber));\n\nvar __extends$72 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits the most recently emitted value from the source Observable whenever\n * another Observable, the `notifier`, emits.\n *\n * <span class=\"informal\">It's like {@link sampleTime}, but samples whenever\n * the `notifier` Observable emits something.</span>\n *\n * <img src=\"./img/sample.png\" width=\"100%\">\n *\n * Whenever the `notifier` Observable emits a value or completes, `sample`\n * looks at the source Observable and emits whichever value it has most recently\n * emitted since the previous sampling, unless the source has not emitted\n * anything since the previous sampling. The `notifier` is subscribed to as soon\n * as the output Observable is subscribed.\n *\n * @example <caption>On every click, sample the most recent \"seconds\" timer</caption>\n * var seconds = Rx.Observable.interval(1000);\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = seconds.sample(clicks);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link audit}\n * @see {@link debounce}\n * @see {@link sampleTime}\n * @see {@link throttle}\n *\n * @param {Observable<any>} notifier The Observable to use for sampling the\n * source Observable.\n * @return {Observable<T>} An Observable that emits the results of sampling the\n * values emitted by the source Observable whenever the notifier Observable\n * emits value or completes.\n * @method sample\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SampleSubscriber = /** @class */ (function (_super) {\n    __extends$72(SampleSubscriber, _super);\n    function SampleSubscriber() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.hasValue = false;\n        return _this;\n    }\n    SampleSubscriber.prototype._next = function (value) {\n        this.value = value;\n        this.hasValue = true;\n    };\n    SampleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.emitValue();\n    };\n    SampleSubscriber.prototype.notifyComplete = function () {\n        this.emitValue();\n    };\n    SampleSubscriber.prototype.emitValue = function () {\n        if (this.hasValue) {\n            this.hasValue = false;\n            this.destination.next(this.value);\n        }\n    };\n    return SampleSubscriber;\n}(OuterSubscriber));\n\nvar __extends$73 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits the most recently emitted value from the source Observable within\n * periodic time intervals.\n *\n * <span class=\"informal\">Samples the source Observable at periodic time\n * intervals, emitting what it samples.</span>\n *\n * <img src=\"./img/sampleTime.png\" width=\"100%\">\n *\n * `sampleTime` periodically looks at the source Observable and emits whichever\n * value it has most recently emitted since the previous sampling, unless the\n * source has not emitted anything since the previous sampling. The sampling\n * happens periodically in time every `period` milliseconds (or the time unit\n * defined by the optional `scheduler` argument). The sampling starts as soon as\n * the output Observable is subscribed.\n *\n * @example <caption>Every second, emit the most recent click at most once</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.sampleTime(1000);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link auditTime}\n * @see {@link debounceTime}\n * @see {@link delay}\n * @see {@link sample}\n * @see {@link throttleTime}\n *\n * @param {number} period The sampling period expressed in milliseconds or the\n * time unit determined internally by the optional `scheduler`.\n * @param {Scheduler} [scheduler=async] The {@link IScheduler} to use for\n * managing the timers that handle the sampling.\n * @return {Observable<T>} An Observable that emits the results of sampling the\n * values emitted by the source Observable at the specified time interval.\n * @method sampleTime\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SampleTimeSubscriber = /** @class */ (function (_super) {\n    __extends$73(SampleTimeSubscriber, _super);\n    function SampleTimeSubscriber(destination, period, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.period = period;\n        _this.scheduler = scheduler;\n        _this.hasValue = false;\n        _this.add(scheduler.schedule(dispatchNotification, period, { subscriber: _this, period: period }));\n        return _this;\n    }\n    SampleTimeSubscriber.prototype._next = function (value) {\n        this.lastValue = value;\n        this.hasValue = true;\n    };\n    SampleTimeSubscriber.prototype.notifyNext = function () {\n        if (this.hasValue) {\n            this.hasValue = false;\n            this.destination.next(this.lastValue);\n        }\n    };\n    return SampleTimeSubscriber;\n}(Subscriber));\nfunction dispatchNotification(state) {\n    var subscriber = state.subscriber, period = state.period;\n    subscriber.notifyNext();\n    this.schedule(state, period);\n}\n\nvar __extends$74 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Compares all values of two observables in sequence using an optional comparor function\n * and returns an observable of a single boolean value representing whether or not the two sequences\n * are equal.\n *\n * <span class=\"informal\">Checks to see of all values emitted by both observables are equal, in order.</span>\n *\n * <img src=\"./img/sequenceEqual.png\" width=\"100%\">\n *\n * `sequenceEqual` subscribes to two observables and buffers incoming values from each observable. Whenever either\n * observable emits a value, the value is buffered and the buffers are shifted and compared from the bottom\n * up; If any value pair doesn't match, the returned observable will emit `false` and complete. If one of the\n * observables completes, the operator will wait for the other observable to complete; If the other\n * observable emits before completing, the returned observable will emit `false` and complete. If one observable never\n * completes or emits after the other complets, the returned observable will never complete.\n *\n * @example <caption>figure out if the Konami code matches</caption>\n * var code = Rx.Observable.from([\n *  \"ArrowUp\",\n *  \"ArrowUp\",\n *  \"ArrowDown\",\n *  \"ArrowDown\",\n *  \"ArrowLeft\",\n *  \"ArrowRight\",\n *  \"ArrowLeft\",\n *  \"ArrowRight\",\n *  \"KeyB\",\n *  \"KeyA\",\n *  \"Enter\" // no start key, clearly.\n * ]);\n *\n * var keys = Rx.Observable.fromEvent(document, 'keyup')\n *  .map(e => e.code);\n * var matches = keys.bufferCount(11, 1)\n *  .mergeMap(\n *    last11 =>\n *      Rx.Observable.from(last11)\n *        .sequenceEqual(code)\n *   );\n * matches.subscribe(matched => console.log('Successful cheat at Contra? ', matched));\n *\n * @see {@link combineLatest}\n * @see {@link zip}\n * @see {@link withLatestFrom}\n *\n * @param {Observable} compareTo The observable sequence to compare the source sequence to.\n * @param {function} [comparor] An optional function to compare each value pair\n * @return {Observable} An Observable of a single boolean value representing whether or not\n * the values emitted by both observables were equal in sequence.\n * @method sequenceEqual\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SequenceEqualSubscriber = /** @class */ (function (_super) {\n    __extends$74(SequenceEqualSubscriber, _super);\n    function SequenceEqualSubscriber(destination, compareTo, comparor) {\n        var _this = _super.call(this, destination) || this;\n        _this.compareTo = compareTo;\n        _this.comparor = comparor;\n        _this._a = [];\n        _this._b = [];\n        _this._oneComplete = false;\n        _this.add(compareTo.subscribe(new SequenceEqualCompareToSubscriber(destination, _this)));\n        return _this;\n    }\n    SequenceEqualSubscriber.prototype._next = function (value) {\n        if (this._oneComplete && this._b.length === 0) {\n            this.emit(false);\n        }\n        else {\n            this._a.push(value);\n            this.checkValues();\n        }\n    };\n    SequenceEqualSubscriber.prototype._complete = function () {\n        if (this._oneComplete) {\n            this.emit(this._a.length === 0 && this._b.length === 0);\n        }\n        else {\n            this._oneComplete = true;\n        }\n    };\n    SequenceEqualSubscriber.prototype.checkValues = function () {\n        var _c = this, _a = _c._a, _b = _c._b, comparor = _c.comparor;\n        while (_a.length > 0 && _b.length > 0) {\n            var a = _a.shift();\n            var b = _b.shift();\n            var areEqual = false;\n            if (comparor) {\n                areEqual = tryCatch(comparor)(a, b);\n                if (areEqual === errorObject) {\n                    this.destination.error(errorObject.e);\n                }\n            }\n            else {\n                areEqual = a === b;\n            }\n            if (!areEqual) {\n                this.emit(false);\n            }\n        }\n    };\n    SequenceEqualSubscriber.prototype.emit = function (value) {\n        var destination = this.destination;\n        destination.next(value);\n        destination.complete();\n    };\n    SequenceEqualSubscriber.prototype.nextB = function (value) {\n        if (this._oneComplete && this._a.length === 0) {\n            this.emit(false);\n        }\n        else {\n            this._b.push(value);\n            this.checkValues();\n        }\n    };\n    return SequenceEqualSubscriber;\n}(Subscriber));\nvar SequenceEqualCompareToSubscriber = /** @class */ (function (_super) {\n    __extends$74(SequenceEqualCompareToSubscriber, _super);\n    function SequenceEqualCompareToSubscriber(destination, parent) {\n        var _this = _super.call(this, destination) || this;\n        _this.parent = parent;\n        return _this;\n    }\n    SequenceEqualCompareToSubscriber.prototype._next = function (value) {\n        this.parent.nextB(value);\n    };\n    SequenceEqualCompareToSubscriber.prototype._error = function (err) {\n        this.parent.error(err);\n    };\n    SequenceEqualCompareToSubscriber.prototype._complete = function () {\n        this.parent._complete();\n    };\n    return SequenceEqualCompareToSubscriber;\n}(Subscriber));\n\nfunction shareSubjectFactory() {\n    return new Subject();\n}\n/**\n * Returns a new Observable that multicasts (shares) the original Observable. As long as there is at least one\n * Subscriber this Observable will be subscribed and emitting data. When all subscribers have unsubscribed it will\n * unsubscribe from the source Observable. Because the Observable is multicasting it makes the stream `hot`.\n * This is an alias for .multicast(() => new Subject()).refCount().\n *\n * <img src=\"./img/share.png\" width=\"100%\">\n *\n * @return {Observable<T>} An Observable that upon connection causes the source Observable to emit items to its Observers.\n * @method share\n * @owner Observable\n */\nfunction share() {\n    return function (source) { return refCount()(multicast(shareSubjectFactory)(source)); };\n}\n\n/**\n * @method shareReplay\n * @owner Observable\n */\n\nvar __extends$75 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that emits the single item emitted by the source Observable that matches a specified\n * predicate, if that Observable emits one such item. If the source Observable emits more than one such item or no\n * items, notify of an IllegalArgumentException or NoSuchElementException respectively. If the source Observable\n * emits items but none match the specified predicate then `undefined` is emiited.\n *\n * <img src=\"./img/single.png\" width=\"100%\">\n *\n * @throws {EmptyError} Delivers an EmptyError to the Observer's `error`\n * callback if the Observable completes before any `next` notification was sent.\n * @param {Function} predicate - A predicate function to evaluate items emitted by the source Observable.\n * @return {Observable<T>} An Observable that emits the single item emitted by the source Observable that matches\n * the predicate or `undefined` when no items match.\n *\n * @method single\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SingleSubscriber = /** @class */ (function (_super) {\n    __extends$75(SingleSubscriber, _super);\n    function SingleSubscriber(destination, predicate, source) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.source = source;\n        _this.seenValue = false;\n        _this.index = 0;\n        return _this;\n    }\n    SingleSubscriber.prototype.applySingleValue = function (value) {\n        if (this.seenValue) {\n            this.destination.error('Sequence contains more than one element');\n        }\n        else {\n            this.seenValue = true;\n            this.singleValue = value;\n        }\n    };\n    SingleSubscriber.prototype._next = function (value) {\n        var index = this.index++;\n        if (this.predicate) {\n            this.tryNext(value, index);\n        }\n        else {\n            this.applySingleValue(value);\n        }\n    };\n    SingleSubscriber.prototype.tryNext = function (value, index) {\n        try {\n            if (this.predicate(value, index, this.source)) {\n                this.applySingleValue(value);\n            }\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    SingleSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        if (this.index > 0) {\n            destination.next(this.seenValue ? this.singleValue : undefined);\n            destination.complete();\n        }\n        else {\n            destination.error(new EmptyError);\n        }\n    };\n    return SingleSubscriber;\n}(Subscriber));\n\nvar __extends$76 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that skips the first `count` items emitted by the source Observable.\n *\n * <img src=\"./img/skip.png\" width=\"100%\">\n *\n * @param {Number} count - The number of times, items emitted by source Observable should be skipped.\n * @return {Observable} An Observable that skips values emitted by the source Observable.\n *\n * @method skip\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SkipSubscriber = /** @class */ (function (_super) {\n    __extends$76(SkipSubscriber, _super);\n    function SkipSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.count = 0;\n        return _this;\n    }\n    SkipSubscriber.prototype._next = function (x) {\n        if (++this.count > this.total) {\n            this.destination.next(x);\n        }\n    };\n    return SkipSubscriber;\n}(Subscriber));\n\nvar __extends$77 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Skip the last `count` values emitted by the source Observable.\n *\n * <img src=\"./img/skipLast.png\" width=\"100%\">\n *\n * `skipLast` returns an Observable that accumulates a queue with a length\n * enough to store the first `count` values. As more values are received,\n * values are taken from the front of the queue and produced on the result\n * sequence. This causes values to be delayed.\n *\n * @example <caption>Skip the last 2 values of an Observable with many values</caption>\n * var many = Rx.Observable.range(1, 5);\n * var skipLastTwo = many.skipLast(2);\n * skipLastTwo.subscribe(x => console.log(x));\n *\n * // Results in:\n * // 1 2 3\n *\n * @see {@link skip}\n * @see {@link skipUntil}\n * @see {@link skipWhile}\n * @see {@link take}\n *\n * @throws {ArgumentOutOfRangeError} When using `skipLast(i)`, it throws\n * ArgumentOutOrRangeError if `i < 0`.\n *\n * @param {number} count Number of elements to skip from the end of the source Observable.\n * @returns {Observable<T>} An Observable that skips the last count values\n * emitted by the source Observable.\n * @method skipLast\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SkipLastSubscriber = /** @class */ (function (_super) {\n    __extends$77(SkipLastSubscriber, _super);\n    function SkipLastSubscriber(destination, _skipCount) {\n        var _this = _super.call(this, destination) || this;\n        _this._skipCount = _skipCount;\n        _this._count = 0;\n        _this._ring = new Array(_skipCount);\n        return _this;\n    }\n    SkipLastSubscriber.prototype._next = function (value) {\n        var skipCount = this._skipCount;\n        var count = this._count++;\n        if (count < skipCount) {\n            this._ring[count] = value;\n        }\n        else {\n            var currentIndex = count % skipCount;\n            var ring = this._ring;\n            var oldValue = ring[currentIndex];\n            ring[currentIndex] = value;\n            this.destination.next(oldValue);\n        }\n    };\n    return SkipLastSubscriber;\n}(Subscriber));\n\nvar __extends$78 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that skips items emitted by the source Observable until a second Observable emits an item.\n *\n * <img src=\"./img/skipUntil.png\" width=\"100%\">\n *\n * @param {Observable} notifier - The second Observable that has to emit an item before the source Observable's elements begin to\n * be mirrored by the resulting Observable.\n * @return {Observable<T>} An Observable that skips items from the source Observable until the second Observable emits\n * an item, then emits the remaining items.\n * @method skipUntil\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SkipUntilSubscriber = /** @class */ (function (_super) {\n    __extends$78(SkipUntilSubscriber, _super);\n    function SkipUntilSubscriber(destination, notifier) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasValue = false;\n        _this.add(_this.innerSubscription = subscribeToResult(_this, notifier));\n        return _this;\n    }\n    SkipUntilSubscriber.prototype._next = function (value) {\n        if (this.hasValue) {\n            _super.prototype._next.call(this, value);\n        }\n    };\n    SkipUntilSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.hasValue = true;\n        this.innerSubscription.unsubscribe();\n    };\n    SkipUntilSubscriber.prototype.notifyComplete = function () {\n        /* do nothing */\n    };\n    return SkipUntilSubscriber;\n}(OuterSubscriber));\n\nvar __extends$79 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Returns an Observable that skips all items emitted by the source Observable as long as a specified condition holds\n * true, but emits all further source items as soon as the condition becomes false.\n *\n * <img src=\"./img/skipWhile.png\" width=\"100%\">\n *\n * @param {Function} predicate - A function to test each item emitted from the source Observable.\n * @return {Observable<T>} An Observable that begins emitting items emitted by the source Observable when the\n * specified predicate becomes false.\n * @method skipWhile\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SkipWhileSubscriber = /** @class */ (function (_super) {\n    __extends$79(SkipWhileSubscriber, _super);\n    function SkipWhileSubscriber(destination, predicate) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.skipping = true;\n        _this.index = 0;\n        return _this;\n    }\n    SkipWhileSubscriber.prototype._next = function (value) {\n        var destination = this.destination;\n        if (this.skipping) {\n            this.tryCallPredicate(value);\n        }\n        if (!this.skipping) {\n            destination.next(value);\n        }\n    };\n    SkipWhileSubscriber.prototype.tryCallPredicate = function (value) {\n        try {\n            var result = this.predicate(value, this.index++);\n            this.skipping = Boolean(result);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    };\n    return SkipWhileSubscriber;\n}(Subscriber));\n\n/* tslint:enable:max-line-length */\n/**\n * Returns an Observable that emits the items you specify as arguments before it begins to emit\n * items emitted by the source Observable.\n *\n * <img src=\"./img/startWith.png\" width=\"100%\">\n *\n * @param {...T} values - Items you want the modified Observable to emit first.\n * @param {Scheduler} [scheduler] - A {@link IScheduler} to use for scheduling\n * the emissions of the `next` notifications.\n * @return {Observable} An Observable that emits the items in the specified Iterable and then emits the items\n * emitted by the source Observable.\n * @method startWith\n * @owner Observable\n */\n\nvar __extends$80 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\nvar SubscribeOnObservable = /** @class */ (function (_super) {\n    __extends$80(SubscribeOnObservable, _super);\n    function SubscribeOnObservable(source, delayTime, scheduler) {\n        if (delayTime === void 0) { delayTime = 0; }\n        if (scheduler === void 0) { scheduler = asap; }\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.delayTime = delayTime;\n        _this.scheduler = scheduler;\n        if (!isNumeric(delayTime) || delayTime < 0) {\n            _this.delayTime = 0;\n        }\n        if (!scheduler || typeof scheduler.schedule !== 'function') {\n            _this.scheduler = asap;\n        }\n        return _this;\n    }\n    /** @nocollapse */\n    SubscribeOnObservable.create = function (source, delay, scheduler) {\n        if (delay === void 0) { delay = 0; }\n        if (scheduler === void 0) { scheduler = asap; }\n        return new SubscribeOnObservable(source, delay, scheduler);\n    };\n    /** @nocollapse */\n    SubscribeOnObservable.dispatch = function (arg) {\n        var source = arg.source, subscriber = arg.subscriber;\n        return this.add(source.subscribe(subscriber));\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    SubscribeOnObservable.prototype._subscribe = function (subscriber) {\n        var delay = this.delayTime;\n        var source = this.source;\n        var scheduler = this.scheduler;\n        return scheduler.schedule(SubscribeOnObservable.dispatch, delay, {\n            source: source, subscriber: subscriber\n        });\n    };\n    return SubscribeOnObservable;\n}(Observable));\n\n/**\n * Asynchronously subscribes Observers to this Observable on the specified IScheduler.\n *\n * <img src=\"./img/subscribeOn.png\" width=\"100%\">\n *\n * @param {Scheduler} scheduler - The IScheduler to perform subscription actions on.\n * @return {Observable<T>} The source Observable modified so that its subscriptions happen on the specified IScheduler.\n .\n * @method subscribeOn\n * @owner Observable\n */\n\nvar __extends$81 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, emitting values only from the most recently projected Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link switch}.</span>\n *\n * <img src=\"./img/switchMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each time it observes one of these\n * inner Observables, the output Observable begins emitting the items emitted by\n * that inner Observable. When a new inner Observable is emitted, `switchMap`\n * stops emitting items from the earlier-emitted inner Observable and begins\n * emitting items from the new one. It continues to behave like this for\n * subsequent inner Observables.\n *\n * @example <caption>Rerun an interval Observable on every click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.switchMap((ev) => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switch}\n * @see {@link switchMapTo}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional `resultSelector`) to each item emitted\n * by the source Observable and taking only the values from the most recently\n * projected inner Observable.\n * @method switchMap\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SwitchMapSubscriber = /** @class */ (function (_super) {\n    __extends$81(SwitchMapSubscriber, _super);\n    function SwitchMapSubscriber(destination, project) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.index = 0;\n        return _this;\n    }\n    SwitchMapSubscriber.prototype._next = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (error) {\n            this.destination.error(error);\n            return;\n        }\n        this._innerSub(result, value, index);\n    };\n    SwitchMapSubscriber.prototype._innerSub = function (result, value, index) {\n        var innerSubscription = this.innerSubscription;\n        if (innerSubscription) {\n            innerSubscription.unsubscribe();\n        }\n        this.add(this.innerSubscription = subscribeToResult(this, result, value, index));\n    };\n    SwitchMapSubscriber.prototype._complete = function () {\n        var innerSubscription = this.innerSubscription;\n        if (!innerSubscription || innerSubscription.closed) {\n            _super.prototype._complete.call(this);\n        }\n    };\n    SwitchMapSubscriber.prototype._unsubscribe = function () {\n        this.innerSubscription = null;\n    };\n    SwitchMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.remove(innerSub);\n        this.innerSubscription = null;\n        if (this.isStopped) {\n            _super.prototype._complete.call(this);\n        }\n    };\n    SwitchMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    return SwitchMapSubscriber;\n}(OuterSubscriber));\n\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to the same Observable which is flattened multiple\n * times with {@link switch} in the output Observable.\n *\n * <span class=\"informal\">It's like {@link switchMap}, but maps each value\n * always to the same inner Observable.</span>\n *\n * <img src=\"./img/switchMapTo.png\" width=\"100%\">\n *\n * Maps each source value to the given Observable `innerObservable` regardless\n * of the source value, and then flattens those resulting Observables into one\n * single Observable, which is the output Observable. The output Observables\n * emits values only from the most recently emitted instance of\n * `innerObservable`.\n *\n * @example <caption>Rerun an interval Observable on every click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.switchMapTo(Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMapTo}\n * @see {@link switch}\n * @see {@link switchMap}\n * @see {@link mergeMapTo}\n *\n * @param {ObservableInput} innerObservable An Observable to replace each value from\n * the source Observable.\n * @return {Observable} An Observable that emits items from the given\n * `innerObservable` (and optionally transformed through `resultSelector`) every\n * time a value is emitted on the source Observable, and taking only the values\n * from the most recently projected inner Observable.\n * @method switchMapTo\n * @owner Observable\n */\n\nvar __extends$82 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits the values emitted by the source Observable until a `notifier`\n * Observable emits a value.\n *\n * <span class=\"informal\">Lets values pass until a second Observable,\n * `notifier`, emits a value. Then, it completes.</span>\n *\n * <img src=\"./img/takeUntil.png\" width=\"100%\">\n *\n * `takeUntil` subscribes and begins mirroring the source Observable. It also\n * monitors a second Observable, `notifier` that you provide. If the `notifier`\n * emits a value, the output Observable stops mirroring the source Observable\n * and completes. If the `notifier` doesn't emit any value and completes\n * then `takeUntil` will pass all values.\n *\n * @example <caption>Tick every second until the first click happens</caption>\n * var interval = Rx.Observable.interval(1000);\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = interval.takeUntil(clicks);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link take}\n * @see {@link takeLast}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @param {Observable} notifier The Observable whose first emitted value will\n * cause the output Observable of `takeUntil` to stop emitting values from the\n * source Observable.\n * @return {Observable<T>} An Observable that emits the values from the source\n * Observable until such time as `notifier` emits its first value.\n * @method takeUntil\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeUntilSubscriber = /** @class */ (function (_super) {\n    __extends$82(TakeUntilSubscriber, _super);\n    function TakeUntilSubscriber(destination) {\n        return _super.call(this, destination) || this;\n    }\n    TakeUntilSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.complete();\n    };\n    TakeUntilSubscriber.prototype.notifyComplete = function () {\n        // noop\n    };\n    return TakeUntilSubscriber;\n}(OuterSubscriber));\n\nvar __extends$83 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits values emitted by the source Observable so long as each value satisfies\n * the given `predicate`, and then completes as soon as this `predicate` is not\n * satisfied.\n *\n * <span class=\"informal\">Takes values from the source only while they pass the\n * condition given. When the first value does not satisfy, it completes.</span>\n *\n * <img src=\"./img/takeWhile.png\" width=\"100%\">\n *\n * `takeWhile` subscribes and begins mirroring the source Observable. Each value\n * emitted on the source is given to the `predicate` function which returns a\n * boolean, representing a condition to be satisfied by the source values. The\n * output Observable emits the source values until such time as the `predicate`\n * returns false, at which point `takeWhile` stops mirroring the source\n * Observable and completes the output Observable.\n *\n * @example <caption>Emit click events only while the clientX property is greater than 200</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.takeWhile(ev => ev.clientX > 200);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link take}\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates a value emitted by the source Observable and returns a boolean.\n * Also takes the (zero-based) index as the second argument.\n * @return {Observable<T>} An Observable that emits the values from the source\n * Observable so long as each value satisfies the condition defined by the\n * `predicate`, then completes.\n * @method takeWhile\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeWhileSubscriber = /** @class */ (function (_super) {\n    __extends$83(TakeWhileSubscriber, _super);\n    function TakeWhileSubscriber(destination, predicate) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.index = 0;\n        return _this;\n    }\n    TakeWhileSubscriber.prototype._next = function (value) {\n        var destination = this.destination;\n        var result;\n        try {\n            result = this.predicate(value, this.index++);\n        }\n        catch (err) {\n            destination.error(err);\n            return;\n        }\n        this.nextOrComplete(value, result);\n    };\n    TakeWhileSubscriber.prototype.nextOrComplete = function (value, predicateResult) {\n        var destination = this.destination;\n        if (Boolean(predicateResult)) {\n            destination.next(value);\n        }\n        else {\n            destination.complete();\n        }\n    };\n    return TakeWhileSubscriber;\n}(Subscriber));\n\nvar __extends$84 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/**\n * Emits a value from the source Observable, then ignores subsequent source\n * values for a duration determined by another Observable, then repeats this\n * process.\n *\n * <span class=\"informal\">It's like {@link throttleTime}, but the silencing\n * duration is determined by a second Observable.</span>\n *\n * <img src=\"./img/throttle.png\" width=\"100%\">\n *\n * `throttle` emits the source Observable values on the output Observable\n * when its internal timer is disabled, and ignores source values when the timer\n * is enabled. Initially, the timer is disabled. As soon as the first source\n * value arrives, it is forwarded to the output Observable, and then the timer\n * is enabled by calling the `durationSelector` function with the source value,\n * which returns the \"duration\" Observable. When the duration Observable emits a\n * value or completes, the timer is disabled, and this process repeats for the\n * next source value.\n *\n * @example <caption>Emit clicks at a rate of at most one click per second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.throttle(ev => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link audit}\n * @see {@link debounce}\n * @see {@link delayWhen}\n * @see {@link sample}\n * @see {@link throttleTime}\n *\n * @param {function(value: T): SubscribableOrPromise} durationSelector A function\n * that receives a value from the source Observable, for computing the silencing\n * duration for each source value, returned as an Observable or a Promise.\n * @param {Object} config a configuration object to define `leading` and `trailing` behavior. Defaults\n * to `{ leading: true, trailing: false }`.\n * @return {Observable<T>} An Observable that performs the throttle operation to\n * limit the rate of emissions from the source.\n * @method throttle\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc\n * @ignore\n * @extends {Ignored}\n */\nvar ThrottleSubscriber = /** @class */ (function (_super) {\n    __extends$84(ThrottleSubscriber, _super);\n    function ThrottleSubscriber(destination, durationSelector, _leading, _trailing) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.durationSelector = durationSelector;\n        _this._leading = _leading;\n        _this._trailing = _trailing;\n        _this._hasValue = false;\n        return _this;\n    }\n    ThrottleSubscriber.prototype._next = function (value) {\n        this._hasValue = true;\n        this._sendValue = value;\n        if (!this._throttled) {\n            if (this._leading) {\n                this.send();\n            }\n            else {\n                this.throttle(value);\n            }\n        }\n    };\n    ThrottleSubscriber.prototype.send = function () {\n        var _a = this, _hasValue = _a._hasValue, _sendValue = _a._sendValue;\n        if (_hasValue) {\n            this.destination.next(_sendValue);\n            this.throttle(_sendValue);\n        }\n        this._hasValue = false;\n        this._sendValue = null;\n    };\n    ThrottleSubscriber.prototype.throttle = function (value) {\n        var duration = this.tryDurationSelector(value);\n        if (duration) {\n            this.add(this._throttled = subscribeToResult(this, duration));\n        }\n    };\n    ThrottleSubscriber.prototype.tryDurationSelector = function (value) {\n        try {\n            return this.durationSelector(value);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return null;\n        }\n    };\n    ThrottleSubscriber.prototype.throttlingDone = function () {\n        var _a = this, _throttled = _a._throttled, _trailing = _a._trailing;\n        if (_throttled) {\n            _throttled.unsubscribe();\n        }\n        this._throttled = null;\n        if (_trailing) {\n            this.send();\n        }\n    };\n    ThrottleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.throttlingDone();\n    };\n    ThrottleSubscriber.prototype.notifyComplete = function () {\n        this.throttlingDone();\n    };\n    return ThrottleSubscriber;\n}(OuterSubscriber));\n\nvar __extends$85 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Emits a value from the source Observable, then ignores subsequent source\n * values for `duration` milliseconds, then repeats this process.\n *\n * <span class=\"informal\">Lets a value pass, then ignores source values for the\n * next `duration` milliseconds.</span>\n *\n * <img src=\"./img/throttleTime.png\" width=\"100%\">\n *\n * `throttleTime` emits the source Observable values on the output Observable\n * when its internal timer is disabled, and ignores source values when the timer\n * is enabled. Initially, the timer is disabled. As soon as the first source\n * value arrives, it is forwarded to the output Observable, and then the timer\n * is enabled. After `duration` milliseconds (or the time unit determined\n * internally by the optional `scheduler`) has passed, the timer is disabled,\n * and this process repeats for the next source value. Optionally takes a\n * {@link IScheduler} for managing timers.\n *\n * @example <caption>Emit clicks at a rate of at most one click per second</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.throttleTime(1000);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link auditTime}\n * @see {@link debounceTime}\n * @see {@link delay}\n * @see {@link sampleTime}\n * @see {@link throttle}\n *\n * @param {number} duration Time to wait before emitting another value after\n * emitting the last value, measured in milliseconds or the time unit determined\n * internally by the optional `scheduler`.\n * @param {Scheduler} [scheduler=async] The {@link IScheduler} to use for\n * managing the timers that handle the throttling.\n * @param {Object} config a configuration object to define `leading` and\n * `trailing` behavior. Defaults to `{ leading: true, trailing: false }`.\n * @return {Observable<T>} An Observable that performs the throttle operation to\n * limit the rate of emissions from the source.\n * @method throttleTime\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar ThrottleTimeSubscriber = /** @class */ (function (_super) {\n    __extends$85(ThrottleTimeSubscriber, _super);\n    function ThrottleTimeSubscriber(destination, duration, scheduler, leading, trailing) {\n        var _this = _super.call(this, destination) || this;\n        _this.duration = duration;\n        _this.scheduler = scheduler;\n        _this.leading = leading;\n        _this.trailing = trailing;\n        _this._hasTrailingValue = false;\n        _this._trailingValue = null;\n        return _this;\n    }\n    ThrottleTimeSubscriber.prototype._next = function (value) {\n        if (this.throttled) {\n            if (this.trailing) {\n                this._trailingValue = value;\n                this._hasTrailingValue = true;\n            }\n        }\n        else {\n            this.add(this.throttled = this.scheduler.schedule(dispatchNext$3, this.duration, { subscriber: this }));\n            if (this.leading) {\n                this.destination.next(value);\n            }\n        }\n    };\n    ThrottleTimeSubscriber.prototype._complete = function () {\n        if (this._hasTrailingValue) {\n            this.destination.next(this._trailingValue);\n            this.destination.complete();\n        }\n        else {\n            this.destination.complete();\n        }\n    };\n    ThrottleTimeSubscriber.prototype.clearThrottle = function () {\n        var throttled = this.throttled;\n        if (throttled) {\n            if (this.trailing && this._hasTrailingValue) {\n                this.destination.next(this._trailingValue);\n                this._trailingValue = null;\n                this._hasTrailingValue = false;\n            }\n            throttled.unsubscribe();\n            this.remove(throttled);\n            this.throttled = null;\n        }\n    };\n    return ThrottleTimeSubscriber;\n}(Subscriber));\nfunction dispatchNext$3(arg) {\n    var subscriber = arg.subscriber;\n    subscriber.clearThrottle();\n}\n\nvar __extends$86 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* tslint:enable:max-line-length */\n/**\n *\n * Errors if Observable does not emit a value in given time span, in case of which\n * subscribes to the second Observable.\n *\n * <span class=\"informal\">It's a version of `timeout` operator that let's you specify fallback Observable.</span>\n *\n * <img src=\"./img/timeoutWith.png\" width=\"100%\">\n *\n * `timeoutWith` is a variation of `timeout` operator. It behaves exactly the same,\n * still accepting as a first argument either a number or a Date, which control - respectively -\n * when values of source Observable should be emitted or when it should complete.\n *\n * The only difference is that it accepts a second, required parameter. This parameter\n * should be an Observable which will be subscribed when source Observable fails any timeout check.\n * So whenever regular `timeout` would emit an error, `timeoutWith` will instead start re-emitting\n * values from second Observable. Note that this fallback Observable is not checked for timeouts\n * itself, so it can emit values and complete at arbitrary points in time. From the moment of a second\n * subscription, Observable returned from `timeoutWith` simply mirrors fallback stream. When that\n * stream completes, it completes as well.\n *\n * Scheduler, which in case of `timeout` is provided as as second argument, can be still provided\n * here - as a third, optional parameter. It still is used to schedule timeout checks and -\n * as a consequence - when second Observable will be subscribed, since subscription happens\n * immediately after failing check.\n *\n * @example <caption>Add fallback observable</caption>\n * const seconds = Rx.Observable.interval(1000);\n * const minutes = Rx.Observable.interval(60 * 1000);\n *\n * seconds.timeoutWith(900, minutes)\n *     .subscribe(\n *         value => console.log(value), // After 900ms, will start emitting `minutes`,\n *                                      // since first value of `seconds` will not arrive fast enough.\n *         err => console.log(err) // Would be called after 900ms in case of `timeout`,\n *                                 // but here will never be called.\n *     );\n *\n * @param {number|Date} due Number specifying period within which Observable must emit values\n *                          or Date specifying before when Observable should complete\n * @param {Observable<T>} withObservable Observable which will be subscribed if source fails timeout check.\n * @param {Scheduler} [scheduler] Scheduler controlling when timeout checks occur.\n * @return {Observable<T>} Observable that mirrors behaviour of source or, when timeout check fails, of an Observable\n *                          passed as a second parameter.\n * @method timeoutWith\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TimeoutWithSubscriber = /** @class */ (function (_super) {\n    __extends$86(TimeoutWithSubscriber, _super);\n    function TimeoutWithSubscriber(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.absoluteTimeout = absoluteTimeout;\n        _this.waitFor = waitFor;\n        _this.withObservable = withObservable;\n        _this.scheduler = scheduler;\n        _this.action = null;\n        _this.scheduleTimeout();\n        return _this;\n    }\n    TimeoutWithSubscriber.dispatchTimeout = function (subscriber) {\n        var withObservable = subscriber.withObservable;\n        subscriber._unsubscribeAndRecycle();\n        subscriber.add(subscribeToResult(subscriber, withObservable));\n    };\n    TimeoutWithSubscriber.prototype.scheduleTimeout = function () {\n        var action = this.action;\n        if (action) {\n            // Recycle the action if we've already scheduled one. All the production\n            // Scheduler Actions mutate their state/delay time and return themeselves.\n            // VirtualActions are immutable, so they create and return a clone. In this\n            // case, we need to set the action reference to the most recent VirtualAction,\n            // to ensure that's the one we clone from next time.\n            this.action = action.schedule(this, this.waitFor);\n        }\n        else {\n            this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\n        }\n    };\n    TimeoutWithSubscriber.prototype._next = function (value) {\n        if (!this.absoluteTimeout) {\n            this.scheduleTimeout();\n        }\n        _super.prototype._next.call(this, value);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    TimeoutWithSubscriber.prototype._unsubscribe = function () {\n        this.action = null;\n        this.scheduler = null;\n        this.withObservable = null;\n    };\n    return TimeoutWithSubscriber;\n}(OuterSubscriber));\n\n/**\n *\n * Errors if Observable does not emit a value in given time span.\n *\n * <span class=\"informal\">Timeouts on Observable that doesn't emit values fast enough.</span>\n *\n * <img src=\"./img/timeout.png\" width=\"100%\">\n *\n * `timeout` operator accepts as an argument either a number or a Date.\n *\n * If number was provided, it returns an Observable that behaves like a source\n * Observable, unless there is a period of time where there is no value emitted.\n * So if you provide `100` as argument and first value comes after 50ms from\n * the moment of subscription, this value will be simply re-emitted by the resulting\n * Observable. If however after that 100ms passes without a second value being emitted,\n * stream will end with an error and source Observable will be unsubscribed.\n * These checks are performed throughout whole lifecycle of Observable - from the moment\n * it was subscribed to, until it completes or errors itself. Thus every value must be\n * emitted within specified period since previous value.\n *\n * If provided argument was Date, returned Observable behaves differently. It throws\n * if Observable did not complete before provided Date. This means that periods between\n * emission of particular values do not matter in this case. If Observable did not complete\n * before provided Date, source Observable will be unsubscribed. Other than that, resulting\n * stream behaves just as source Observable.\n *\n * `timeout` accepts also a Scheduler as a second parameter. It is used to schedule moment (or moments)\n * when returned Observable will check if source stream emitted value or completed.\n *\n * @example <caption>Check if ticks are emitted within certain timespan</caption>\n * const seconds = Rx.Observable.interval(1000);\n *\n * seconds.timeout(1100) // Let's use bigger timespan to be safe,\n *                       // since `interval` might fire a bit later then scheduled.\n * .subscribe(\n *     value => console.log(value), // Will emit numbers just as regular `interval` would.\n *     err => console.log(err) // Will never be called.\n * );\n *\n * seconds.timeout(900).subscribe(\n *     value => console.log(value), // Will never be called.\n *     err => console.log(err) // Will emit error before even first value is emitted,\n *                             // since it did not arrive within 900ms period.\n * );\n *\n * @example <caption>Use Date to check if Observable completed</caption>\n * const seconds = Rx.Observable.interval(1000);\n *\n * seconds.timeout(new Date(\"December 17, 2020 03:24:00\"))\n * .subscribe(\n *     value => console.log(value), // Will emit values as regular `interval` would\n *                                  // until December 17, 2020 at 03:24:00.\n *     err => console.log(err) // On December 17, 2020 at 03:24:00 it will emit an error,\n *                             // since Observable did not complete by then.\n * );\n *\n * @see {@link timeoutWith}\n *\n * @param {number|Date} due Number specifying period within which Observable must emit values\n *                          or Date specifying before when Observable should complete\n * @param {Scheduler} [scheduler] Scheduler controlling when timeout checks occur.\n * @return {Observable<T>} Observable that mirrors behaviour of source, unless timeout checks fail.\n * @method timeout\n * @owner Observable\n */\n\n/**\n * @param scheduler\n * @return {Observable<Timestamp<any>>|WebSocketSubject<T>|Observable<T>}\n * @method timestamp\n * @owner Observable\n */\n\nvar __extends$87 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Branch out the source Observable values as a nested Observable whenever\n * `windowBoundaries` emits.\n *\n * <span class=\"informal\">It's like {@link buffer}, but emits a nested Observable\n * instead of an array.</span>\n *\n * <img src=\"./img/window.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits connected, non-overlapping\n * windows. It emits the current window and opens a new one whenever the\n * Observable `windowBoundaries` emits an item. Because each window is an\n * Observable, the output is a higher-order Observable.\n *\n * @example <caption>In every window of 1 second each, emit at most 2 click events</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var interval = Rx.Observable.interval(1000);\n * var result = clicks.window(interval)\n *   .map(win => win.take(2)) // each window has at most 2 emissions\n *   .mergeAll(); // flatten the Observable-of-Observables\n * result.subscribe(x => console.log(x));\n *\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link windowWhen}\n * @see {@link buffer}\n *\n * @param {Observable<any>} windowBoundaries An Observable that completes the\n * previous window and starts a new window.\n * @return {Observable<Observable<T>>} An Observable of windows, which are\n * Observables emitting values of the source Observable.\n * @method window\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowSubscriber = /** @class */ (function (_super) {\n    __extends$87(WindowSubscriber, _super);\n    function WindowSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.window = new Subject();\n        destination.next(_this.window);\n        return _this;\n    }\n    WindowSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.openWindow();\n    };\n    WindowSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    WindowSubscriber.prototype.notifyComplete = function (innerSub) {\n        this._complete();\n    };\n    WindowSubscriber.prototype._next = function (value) {\n        this.window.next(value);\n    };\n    WindowSubscriber.prototype._error = function (err) {\n        this.window.error(err);\n        this.destination.error(err);\n    };\n    WindowSubscriber.prototype._complete = function () {\n        this.window.complete();\n        this.destination.complete();\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    WindowSubscriber.prototype._unsubscribe = function () {\n        this.window = null;\n    };\n    WindowSubscriber.prototype.openWindow = function () {\n        var prevWindow = this.window;\n        if (prevWindow) {\n            prevWindow.complete();\n        }\n        var destination = this.destination;\n        var newWindow = this.window = new Subject();\n        destination.next(newWindow);\n    };\n    return WindowSubscriber;\n}(OuterSubscriber));\n\nvar __extends$88 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Branch out the source Observable values as a nested Observable with each\n * nested Observable emitting at most `windowSize` values.\n *\n * <span class=\"informal\">It's like {@link bufferCount}, but emits a nested\n * Observable instead of an array.</span>\n *\n * <img src=\"./img/windowCount.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits windows every `startWindowEvery`\n * items, each containing no more than `windowSize` items. When the source\n * Observable completes or encounters an error, the output Observable emits\n * the current window and propagates the notification from the source\n * Observable. If `startWindowEvery` is not provided, then new windows are\n * started immediately at the start of the source and when each window completes\n * with size `windowSize`.\n *\n * @example <caption>Ignore every 3rd click event, starting from the first one</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.windowCount(3)\n *   .map(win => win.skip(1)) // skip first of every 3 clicks\n *   .mergeAll(); // flatten the Observable-of-Observables\n * result.subscribe(x => console.log(x));\n *\n * @example <caption>Ignore every 3rd click event, starting from the third one</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.windowCount(2, 3)\n *   .mergeAll(); // flatten the Observable-of-Observables\n * result.subscribe(x => console.log(x));\n *\n * @see {@link window}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link windowWhen}\n * @see {@link bufferCount}\n *\n * @param {number} windowSize The maximum number of values emitted by each\n * window.\n * @param {number} [startWindowEvery] Interval at which to start a new window.\n * For example if `startWindowEvery` is `2`, then a new window will be started\n * on every other value from the source. A new window is started at the\n * beginning of the source by default.\n * @return {Observable<Observable<T>>} An Observable of windows, which in turn\n * are Observable of values.\n * @method windowCount\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowCountSubscriber = /** @class */ (function (_super) {\n    __extends$88(WindowCountSubscriber, _super);\n    function WindowCountSubscriber(destination, windowSize, startWindowEvery) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.windowSize = windowSize;\n        _this.startWindowEvery = startWindowEvery;\n        _this.windows = [new Subject()];\n        _this.count = 0;\n        destination.next(_this.windows[0]);\n        return _this;\n    }\n    WindowCountSubscriber.prototype._next = function (value) {\n        var startWindowEvery = (this.startWindowEvery > 0) ? this.startWindowEvery : this.windowSize;\n        var destination = this.destination;\n        var windowSize = this.windowSize;\n        var windows = this.windows;\n        var len = windows.length;\n        for (var i = 0; i < len && !this.closed; i++) {\n            windows[i].next(value);\n        }\n        var c = this.count - windowSize + 1;\n        if (c >= 0 && c % startWindowEvery === 0 && !this.closed) {\n            windows.shift().complete();\n        }\n        if (++this.count % startWindowEvery === 0 && !this.closed) {\n            var window_1 = new Subject();\n            windows.push(window_1);\n            destination.next(window_1);\n        }\n    };\n    WindowCountSubscriber.prototype._error = function (err) {\n        var windows = this.windows;\n        if (windows) {\n            while (windows.length > 0 && !this.closed) {\n                windows.shift().error(err);\n            }\n        }\n        this.destination.error(err);\n    };\n    WindowCountSubscriber.prototype._complete = function () {\n        var windows = this.windows;\n        if (windows) {\n            while (windows.length > 0 && !this.closed) {\n                windows.shift().complete();\n            }\n        }\n        this.destination.complete();\n    };\n    WindowCountSubscriber.prototype._unsubscribe = function () {\n        this.count = 0;\n        this.windows = null;\n    };\n    return WindowCountSubscriber;\n}(Subscriber));\n\nvar __extends$89 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar CountedSubject = /** @class */ (function (_super) {\n    __extends$89(CountedSubject, _super);\n    function CountedSubject() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._numberOfNextedValues = 0;\n        return _this;\n    }\n    CountedSubject.prototype.next = function (value) {\n        this._numberOfNextedValues++;\n        _super.prototype.next.call(this, value);\n    };\n    Object.defineProperty(CountedSubject.prototype, \"numberOfNextedValues\", {\n        get: function () {\n            return this._numberOfNextedValues;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return CountedSubject;\n}(Subject));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowTimeSubscriber = /** @class */ (function (_super) {\n    __extends$89(WindowTimeSubscriber, _super);\n    function WindowTimeSubscriber(destination, windowTimeSpan, windowCreationInterval, maxWindowSize, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.windowTimeSpan = windowTimeSpan;\n        _this.windowCreationInterval = windowCreationInterval;\n        _this.maxWindowSize = maxWindowSize;\n        _this.scheduler = scheduler;\n        _this.windows = [];\n        var window = _this.openWindow();\n        if (windowCreationInterval !== null && windowCreationInterval >= 0) {\n            var closeState = { subscriber: _this, window: window, context: null };\n            var creationState = { windowTimeSpan: windowTimeSpan, windowCreationInterval: windowCreationInterval, subscriber: _this, scheduler: scheduler };\n            _this.add(scheduler.schedule(dispatchWindowClose, windowTimeSpan, closeState));\n            _this.add(scheduler.schedule(dispatchWindowCreation, windowCreationInterval, creationState));\n        }\n        else {\n            var timeSpanOnlyState = { subscriber: _this, window: window, windowTimeSpan: windowTimeSpan };\n            _this.add(scheduler.schedule(dispatchWindowTimeSpanOnly, windowTimeSpan, timeSpanOnlyState));\n        }\n        return _this;\n    }\n    WindowTimeSubscriber.prototype._next = function (value) {\n        var windows = this.windows;\n        var len = windows.length;\n        for (var i = 0; i < len; i++) {\n            var window_1 = windows[i];\n            if (!window_1.closed) {\n                window_1.next(value);\n                if (window_1.numberOfNextedValues >= this.maxWindowSize) {\n                    this.closeWindow(window_1);\n                }\n            }\n        }\n    };\n    WindowTimeSubscriber.prototype._error = function (err) {\n        var windows = this.windows;\n        while (windows.length > 0) {\n            windows.shift().error(err);\n        }\n        this.destination.error(err);\n    };\n    WindowTimeSubscriber.prototype._complete = function () {\n        var windows = this.windows;\n        while (windows.length > 0) {\n            var window_2 = windows.shift();\n            if (!window_2.closed) {\n                window_2.complete();\n            }\n        }\n        this.destination.complete();\n    };\n    WindowTimeSubscriber.prototype.openWindow = function () {\n        var window = new CountedSubject();\n        this.windows.push(window);\n        var destination = this.destination;\n        destination.next(window);\n        return window;\n    };\n    WindowTimeSubscriber.prototype.closeWindow = function (window) {\n        window.complete();\n        var windows = this.windows;\n        windows.splice(windows.indexOf(window), 1);\n    };\n    return WindowTimeSubscriber;\n}(Subscriber));\nfunction dispatchWindowTimeSpanOnly(state) {\n    var subscriber = state.subscriber, windowTimeSpan = state.windowTimeSpan, window = state.window;\n    if (window) {\n        subscriber.closeWindow(window);\n    }\n    state.window = subscriber.openWindow();\n    this.schedule(state, windowTimeSpan);\n}\nfunction dispatchWindowCreation(state) {\n    var windowTimeSpan = state.windowTimeSpan, subscriber = state.subscriber, scheduler = state.scheduler, windowCreationInterval = state.windowCreationInterval;\n    var window = subscriber.openWindow();\n    var action = this;\n    var context = { action: action, subscription: null };\n    var timeSpanState = { subscriber: subscriber, window: window, context: context };\n    context.subscription = scheduler.schedule(dispatchWindowClose, windowTimeSpan, timeSpanState);\n    action.add(context.subscription);\n    action.schedule(state, windowCreationInterval);\n}\nfunction dispatchWindowClose(state) {\n    var subscriber = state.subscriber, window = state.window, context = state.context;\n    if (context && context.action && context.subscription) {\n        context.action.remove(context.subscription);\n    }\n    subscriber.closeWindow(window);\n}\n\nvar __extends$90 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Branch out the source Observable values as a nested Observable starting from\n * an emission from `openings` and ending when the output of `closingSelector`\n * emits.\n *\n * <span class=\"informal\">It's like {@link bufferToggle}, but emits a nested\n * Observable instead of an array.</span>\n *\n * <img src=\"./img/windowToggle.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits windows that contain those items\n * emitted by the source Observable between the time when the `openings`\n * Observable emits an item and when the Observable returned by\n * `closingSelector` emits an item.\n *\n * @example <caption>Every other second, emit the click events from the next 500ms</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var openings = Rx.Observable.interval(1000);\n * var result = clicks.windowToggle(openings, i =>\n *   i % 2 ? Rx.Observable.interval(500) : Rx.Observable.empty()\n * ).mergeAll();\n * result.subscribe(x => console.log(x));\n *\n * @see {@link window}\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowWhen}\n * @see {@link bufferToggle}\n *\n * @param {Observable<O>} openings An observable of notifications to start new\n * windows.\n * @param {function(value: O): Observable} closingSelector A function that takes\n * the value emitted by the `openings` observable and returns an Observable,\n * which, when it emits (either `next` or `complete`), signals that the\n * associated window should complete.\n * @return {Observable<Observable<T>>} An observable of windows, which in turn\n * are Observables.\n * @method windowToggle\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowToggleSubscriber = /** @class */ (function (_super) {\n    __extends$90(WindowToggleSubscriber, _super);\n    function WindowToggleSubscriber(destination, openings, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.openings = openings;\n        _this.closingSelector = closingSelector;\n        _this.contexts = [];\n        _this.add(_this.openSubscription = subscribeToResult(_this, openings, openings));\n        return _this;\n    }\n    WindowToggleSubscriber.prototype._next = function (value) {\n        var contexts = this.contexts;\n        if (contexts) {\n            var len = contexts.length;\n            for (var i = 0; i < len; i++) {\n                contexts[i].window.next(value);\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype._error = function (err) {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context = contexts[index];\n                context.window.error(err);\n                context.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._error.call(this, err);\n    };\n    WindowToggleSubscriber.prototype._complete = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context = contexts[index];\n                context.window.complete();\n                context.subscription.unsubscribe();\n            }\n        }\n        _super.prototype._complete.call(this);\n    };\n    /** @deprecated This is an internal implementation detail, do not use. */\n    WindowToggleSubscriber.prototype._unsubscribe = function () {\n        var contexts = this.contexts;\n        this.contexts = null;\n        if (contexts) {\n            var len = contexts.length;\n            var index = -1;\n            while (++index < len) {\n                var context = contexts[index];\n                context.window.unsubscribe();\n                context.subscription.unsubscribe();\n            }\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (outerValue === this.openings) {\n            var closingSelector = this.closingSelector;\n            var closingNotifier = tryCatch(closingSelector)(innerValue);\n            if (closingNotifier === errorObject) {\n                return this.error(errorObject.e);\n            }\n            else {\n                var window_1 = new Subject();\n                var subscription = new Subscription();\n                var context = { window: window_1, subscription: subscription };\n                this.contexts.push(context);\n                var innerSubscription = subscribeToResult(this, closingNotifier, context);\n                if (innerSubscription.closed) {\n                    this.closeWindow(this.contexts.length - 1);\n                }\n                else {\n                    innerSubscription.context = context;\n                    subscription.add(innerSubscription);\n                }\n                this.destination.next(window_1);\n            }\n        }\n        else {\n            this.closeWindow(this.contexts.indexOf(outerValue));\n        }\n    };\n    WindowToggleSubscriber.prototype.notifyError = function (err) {\n        this.error(err);\n    };\n    WindowToggleSubscriber.prototype.notifyComplete = function (inner) {\n        if (inner !== this.openSubscription) {\n            this.closeWindow(this.contexts.indexOf(inner.context));\n        }\n    };\n    WindowToggleSubscriber.prototype.closeWindow = function (index) {\n        if (index === -1) {\n            return;\n        }\n        var contexts = this.contexts;\n        var context = contexts[index];\n        var window = context.window, subscription = context.subscription;\n        contexts.splice(index, 1);\n        window.complete();\n        subscription.unsubscribe();\n    };\n    return WindowToggleSubscriber;\n}(OuterSubscriber));\n\nvar __extends$91 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Branch out the source Observable values as a nested Observable using a\n * factory function of closing Observables to determine when to start a new\n * window.\n *\n * <span class=\"informal\">It's like {@link bufferWhen}, but emits a nested\n * Observable instead of an array.</span>\n *\n * <img src=\"./img/windowWhen.png\" width=\"100%\">\n *\n * Returns an Observable that emits windows of items it collects from the source\n * Observable. The output Observable emits connected, non-overlapping windows.\n * It emits the current window and opens a new one whenever the Observable\n * produced by the specified `closingSelector` function emits an item. The first\n * window is opened immediately when subscribing to the output Observable.\n *\n * @example <caption>Emit only the first two clicks events in every window of [1-5] random seconds</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks\n *   .windowWhen(() => Rx.Observable.interval(1000 + Math.random() * 4000))\n *   .map(win => win.take(2)) // each window has at most 2 emissions\n *   .mergeAll(); // flatten the Observable-of-Observables\n * result.subscribe(x => console.log(x));\n *\n * @see {@link window}\n * @see {@link windowCount}\n * @see {@link windowTime}\n * @see {@link windowToggle}\n * @see {@link bufferWhen}\n *\n * @param {function(): Observable} closingSelector A function that takes no\n * arguments and returns an Observable that signals (on either `next` or\n * `complete`) when to close the previous window and start a new one.\n * @return {Observable<Observable<T>>} An observable of windows, which in turn\n * are Observables.\n * @method windowWhen\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WindowSubscriber$1 = /** @class */ (function (_super) {\n    __extends$91(WindowSubscriber, _super);\n    function WindowSubscriber(destination, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.closingSelector = closingSelector;\n        _this.openWindow();\n        return _this;\n    }\n    WindowSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.openWindow(innerSub);\n    };\n    WindowSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    WindowSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.openWindow(innerSub);\n    };\n    WindowSubscriber.prototype._next = function (value) {\n        this.window.next(value);\n    };\n    WindowSubscriber.prototype._error = function (err) {\n        this.window.error(err);\n        this.destination.error(err);\n        this.unsubscribeClosingNotification();\n    };\n    WindowSubscriber.prototype._complete = function () {\n        this.window.complete();\n        this.destination.complete();\n        this.unsubscribeClosingNotification();\n    };\n    WindowSubscriber.prototype.unsubscribeClosingNotification = function () {\n        if (this.closingNotification) {\n            this.closingNotification.unsubscribe();\n        }\n    };\n    WindowSubscriber.prototype.openWindow = function (innerSub) {\n        if (innerSub === void 0) { innerSub = null; }\n        if (innerSub) {\n            this.remove(innerSub);\n            innerSub.unsubscribe();\n        }\n        var prevWindow = this.window;\n        if (prevWindow) {\n            prevWindow.complete();\n        }\n        var window = this.window = new Subject();\n        this.destination.next(window);\n        var closingNotifier = tryCatch(this.closingSelector)();\n        if (closingNotifier === errorObject) {\n            var err = errorObject.e;\n            this.destination.error(err);\n            this.window.error(err);\n        }\n        else {\n            this.add(this.closingNotification = subscribeToResult(this, closingNotifier));\n        }\n    };\n    return WindowSubscriber;\n}(OuterSubscriber));\n\nvar __extends$92 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read$12 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$12 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$12(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * Combines the source Observable with other Observables to create an Observable\n * whose values are calculated from the latest values of each, only when the\n * source emits.\n *\n * <span class=\"informal\">Whenever the source Observable emits a value, it\n * computes a formula using that value plus the latest values from other input\n * Observables, then emits the output of that formula.</span>\n *\n * <img src=\"./img/withLatestFrom.png\" width=\"100%\">\n *\n * `withLatestFrom` combines each value from the source Observable (the\n * instance) with the latest values from the other input Observables only when\n * the source emits a value, optionally using a `project` function to determine\n * the value to be emitted on the output Observable. All input Observables must\n * emit at least one value before the output Observable will emit a value.\n *\n * @example <caption>On every click event, emit an array with the latest timer event plus the click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var timer = Rx.Observable.interval(1000);\n * var result = clicks.withLatestFrom(timer);\n * result.subscribe(x => console.log(x));\n *\n * @see {@link combineLatest}\n *\n * @param {ObservableInput} other An input Observable to combine with the source\n * Observable. More than one input Observables may be given as argument.\n * @param {Function} [project] Projection function for combining values\n * together. Receives all values in order of the Observables passed, where the\n * first parameter is a value from the source Observable. (e.g.\n * `a.withLatestFrom(b, c, (a1, b1, c1) => a1 + b1 + c1)`). If this is not\n * passed, arrays will be emitted on the output Observable.\n * @return {Observable} An Observable of projected values from the most recent\n * values from each input Observable, or an array of the most recent values from\n * each input Observable.\n * @method withLatestFrom\n * @owner Observable\n */\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar WithLatestFromSubscriber = /** @class */ (function (_super) {\n    __extends$92(WithLatestFromSubscriber, _super);\n    function WithLatestFromSubscriber(destination, observables, project) {\n        var _this = _super.call(this, destination) || this;\n        _this.observables = observables;\n        _this.project = project;\n        _this.toRespond = [];\n        var len = observables.length;\n        _this.values = new Array(len);\n        for (var i = 0; i < len; i++) {\n            _this.toRespond.push(i);\n        }\n        for (var i = 0; i < len; i++) {\n            var observable = observables[i];\n            _this.add(subscribeToResult(_this, observable, observable, i));\n        }\n        return _this;\n    }\n    WithLatestFromSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.values[outerIndex] = innerValue;\n        var toRespond = this.toRespond;\n        if (toRespond.length > 0) {\n            var found = toRespond.indexOf(outerIndex);\n            if (found !== -1) {\n                toRespond.splice(found, 1);\n            }\n        }\n    };\n    WithLatestFromSubscriber.prototype.notifyComplete = function () {\n        // noop\n    };\n    WithLatestFromSubscriber.prototype._next = function (value) {\n        if (this.toRespond.length === 0) {\n            var args = __spread$12([value], this.values);\n            if (this.project) {\n                this._tryProject(args);\n            }\n            else {\n                this.destination.next(args);\n            }\n        }\n    };\n    WithLatestFromSubscriber.prototype._tryProject = function (args) {\n        var result;\n        try {\n            result = this.project.apply(this, args);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return WithLatestFromSubscriber;\n}(OuterSubscriber));\n\nvar __read$13 = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread$13 = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read$13(arguments[i]));\n    return ar;\n};\n/* tslint:enable:max-line-length */\n/**\n * @deprecated Deprecated in favor of static zip.\n */\n\n/* Operator exports */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Determine if the argument is shaped like a Promise\n */\nfunction isPromise$2(obj) {\n    // allow any Promise/A+ compliant thenable.\n    // It's up to the caller to ensure that obj.then conforms to the spec\n    return !!obj && typeof obj.then === 'function';\n}\n/**\n * Determine if the argument is an Observable\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A function that will be executed when an application is initialized.\n * @experimental\n */\nvar APP_INITIALIZER = new InjectionToken('Application Initializer');\n/**\n * A class that reflects the state of running {@link APP_INITIALIZER}s.\n *\n * @experimental\n */\nvar ApplicationInitStatus = /** @class */ (function () {\n    function ApplicationInitStatus(appInits) {\n        var _this = this;\n        this.appInits = appInits;\n        this.initialized = false;\n        this.done = false;\n        this.donePromise = new Promise(function (res, rej) {\n            _this.resolve = res;\n            _this.reject = rej;\n        });\n    }\n    /** @internal */\n    /** @internal */\n    ApplicationInitStatus.prototype.runInitializers = /** @internal */\n    function () {\n        var _this = this;\n        if (this.initialized) {\n            return;\n        }\n        var asyncInitPromises = [];\n        var complete = function () {\n            _this.done = true;\n            _this.resolve();\n        };\n        if (this.appInits) {\n            for (var i = 0; i < this.appInits.length; i++) {\n                var initResult = this.appInits[i]();\n                if (isPromise$2(initResult)) {\n                    asyncInitPromises.push(initResult);\n                }\n            }\n        }\n        Promise.all(asyncInitPromises).then(function () { complete(); }).catch(function (e) { _this.reject(e); });\n        if (asyncInitPromises.length === 0) {\n            complete();\n        }\n        this.initialized = true;\n    };\n    ApplicationInitStatus.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    ApplicationInitStatus.ctorParameters = function () { return [\n        { type: Array, decorators: [{ type: Inject, args: [APP_INITIALIZER,] }, { type: Optional },] },\n    ]; };\n    return ApplicationInitStatus;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A DI Token representing a unique string id assigned to the application by Angular and used\n * primarily for prefixing application attributes and CSS styles when\n * {@link ViewEncapsulation#Emulated ViewEncapsulation.Emulated} is being used.\n *\n * If you need to avoid randomly generated value to be used as an application id, you can provide\n * a custom value via a DI provider <!-- TODO: provider --> configuring the root {@link Injector}\n * using this token.\n * @experimental\n */\nvar APP_ID = new InjectionToken('AppId');\nfunction _appIdRandomProviderFactory() {\n    return \"\" + _randomChar() + _randomChar() + _randomChar();\n}\n/**\n * Providers that will generate a random APP_ID_TOKEN.\n * @experimental\n */\nvar APP_ID_RANDOM_PROVIDER = {\n    provide: APP_ID,\n    useFactory: _appIdRandomProviderFactory,\n    deps: [],\n};\nfunction _randomChar() {\n    return String.fromCharCode(97 + Math.floor(Math.random() * 25));\n}\n/**\n * A function that will be executed when a platform is initialized.\n * @experimental\n */\nvar PLATFORM_INITIALIZER = new InjectionToken('Platform Initializer');\n/**\n * A token that indicates an opaque platform id.\n * @experimental\n */\nvar PLATFORM_ID = new InjectionToken('Platform ID');\n/**\n * All callbacks provided via this token will be called for every component that is bootstrapped.\n * Signature of the callback:\n *\n * `(componentRef: ComponentRef) => void`.\n *\n * @experimental\n */\nvar APP_BOOTSTRAP_LISTENER = new InjectionToken('appBootstrapListener');\n/**\n * A token which indicates the root directory of the application\n * @experimental\n */\nvar PACKAGE_ROOT_URL = new InjectionToken('Application Packages Root URL');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Console = /** @class */ (function () {\n    function Console() {\n    }\n    Console.prototype.log = function (message) {\n        // tslint:disable-next-line:no-console\n        console.log(message);\n    };\n    // Note: for reporting errors use `DOM.logError()` as it is platform specific\n    // Note: for reporting errors use `DOM.logError()` as it is platform specific\n    Console.prototype.warn = \n    // Note: for reporting errors use `DOM.logError()` as it is platform specific\n    function (message) {\n        // tslint:disable-next-line:no-console\n        console.warn(message);\n    };\n    Console.decorators = [\n        { type: Injectable }\n    ];\n    return Console;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction _throwError() {\n    throw new Error(\"Runtime compiler is not loaded\");\n}\n/**\n * Low-level service for running the angular compiler during runtime\n * to create {@link ComponentFactory}s, which\n * can later be used to create and render a Component instance.\n *\n * Each `@NgModule` provides an own `Compiler` to its injector,\n * that will use the directives/pipes of the ng module for compilation\n * of components.\n *\n */\nvar Compiler = /** @class */ (function () {\n    function Compiler() {\n    }\n    /**\n     * Compiles the given NgModule and all of its components. All templates of the components listed\n     * in `entryComponents` have to be inlined.\n     */\n    /**\n       * Compiles the given NgModule and all of its components. All templates of the components listed\n       * in `entryComponents` have to be inlined.\n       */\n    Compiler.prototype.compileModuleSync = /**\n       * Compiles the given NgModule and all of its components. All templates of the components listed\n       * in `entryComponents` have to be inlined.\n       */\n    function (moduleType) { throw _throwError(); };\n    /**\n     * Compiles the given NgModule and all of its components\n     */\n    /**\n       * Compiles the given NgModule and all of its components\n       */\n    Compiler.prototype.compileModuleAsync = /**\n       * Compiles the given NgModule and all of its components\n       */\n    function (moduleType) { throw _throwError(); };\n    /**\n     * Same as {@link #compileModuleSync} but also creates ComponentFactories for all components.\n     */\n    /**\n       * Same as {@link #compileModuleSync} but also creates ComponentFactories for all components.\n       */\n    Compiler.prototype.compileModuleAndAllComponentsSync = /**\n       * Same as {@link #compileModuleSync} but also creates ComponentFactories for all components.\n       */\n    function (moduleType) {\n        throw _throwError();\n    };\n    /**\n     * Same as {@link #compileModuleAsync} but also creates ComponentFactories for all components.\n     */\n    /**\n       * Same as {@link #compileModuleAsync} but also creates ComponentFactories for all components.\n       */\n    Compiler.prototype.compileModuleAndAllComponentsAsync = /**\n       * Same as {@link #compileModuleAsync} but also creates ComponentFactories for all components.\n       */\n    function (moduleType) {\n        throw _throwError();\n    };\n    /**\n     * Clears all caches.\n     */\n    /**\n       * Clears all caches.\n       */\n    Compiler.prototype.clearCache = /**\n       * Clears all caches.\n       */\n    function () { };\n    /**\n     * Clears the cache for the given component/ngModule.\n     */\n    /**\n       * Clears the cache for the given component/ngModule.\n       */\n    Compiler.prototype.clearCacheFor = /**\n       * Clears the cache for the given component/ngModule.\n       */\n    function (type) { };\n    Compiler.decorators = [\n        { type: Injectable }\n    ];\n    return Compiler;\n}());\n/**\n * Token to provide CompilerOptions in the platform injector.\n *\n * @experimental\n */\nvar COMPILER_OPTIONS = new InjectionToken('compilerOptions');\n/**\n * A factory for creating a Compiler\n *\n * @experimental\n */\nvar CompilerFactory = /** @class */ (function () {\n    function CompilerFactory() {\n    }\n    return CompilerFactory;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Represents an instance of a Component created via a {@link ComponentFactory}.\n *\n * `ComponentRef` provides access to the Component Instance as well other objects related to this\n * Component Instance and allows you to destroy the Component Instance via the {@link #destroy}\n * method.\n *\n */\nvar ComponentRef = /** @class */ (function () {\n    function ComponentRef() {\n    }\n    return ComponentRef;\n}());\nvar ComponentFactory = /** @class */ (function () {\n    function ComponentFactory() {\n    }\n    return ComponentFactory;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction noComponentFactoryError(component) {\n    var error = Error(\"No component factory found for \" + stringify$1(component) + \". Did you add it to @NgModule.entryComponents?\");\n    error[ERROR_COMPONENT] = component;\n    return error;\n}\nvar ERROR_COMPONENT = 'ngComponent';\n\nvar _NullComponentFactoryResolver = /** @class */ (function () {\n    function _NullComponentFactoryResolver() {\n    }\n    _NullComponentFactoryResolver.prototype.resolveComponentFactory = function (component) {\n        throw noComponentFactoryError(component);\n    };\n    return _NullComponentFactoryResolver;\n}());\nvar ComponentFactoryResolver = /** @class */ (function () {\n    function ComponentFactoryResolver() {\n    }\n    ComponentFactoryResolver.NULL = new _NullComponentFactoryResolver();\n    return ComponentFactoryResolver;\n}());\nvar ComponentFactoryBoundToModule = /** @class */ (function (_super) {\n    __extends(ComponentFactoryBoundToModule, _super);\n    function ComponentFactoryBoundToModule(factory, ngModule) {\n        var _this = _super.call(this) || this;\n        _this.factory = factory;\n        _this.ngModule = ngModule;\n        _this.selector = factory.selector;\n        _this.componentType = factory.componentType;\n        _this.ngContentSelectors = factory.ngContentSelectors;\n        _this.inputs = factory.inputs;\n        _this.outputs = factory.outputs;\n        return _this;\n    }\n    ComponentFactoryBoundToModule.prototype.create = function (injector, projectableNodes, rootSelectorOrNode, ngModule) {\n        return this.factory.create(injector, projectableNodes, rootSelectorOrNode, ngModule || this.ngModule);\n    };\n    return ComponentFactoryBoundToModule;\n}(ComponentFactory));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Represents an instance of an NgModule created via a {@link NgModuleFactory}.\n *\n * `NgModuleRef` provides access to the NgModule Instance as well other objects related to this\n * NgModule Instance.\n *\n *\n */\nvar NgModuleRef = /** @class */ (function () {\n    function NgModuleRef() {\n    }\n    return NgModuleRef;\n}());\n/**\n * @experimental\n */\nvar NgModuleFactory = /** @class */ (function () {\n    function NgModuleFactory() {\n    }\n    return NgModuleFactory;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar trace;\nvar events;\nfunction detectWTF() {\n    var wtf = _global /** TODO #9100 */['wtf'];\n    if (wtf) {\n        trace = wtf['trace'];\n        if (trace) {\n            events = trace['events'];\n            return true;\n        }\n    }\n    return false;\n}\nfunction createScope(signature, flags) {\n    if (flags === void 0) { flags = null; }\n    return events.createScope(signature, flags);\n}\nfunction leave(scope, returnValue) {\n    trace.leaveScope(scope, returnValue);\n    return returnValue;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * True if WTF is enabled.\n */\nvar wtfEnabled = detectWTF();\nfunction noopScope(arg0, arg1) {\n    return null;\n}\n/**\n * Create trace scope.\n *\n * Scopes must be strictly nested and are analogous to stack frames, but\n * do not have to follow the stack frames. Instead it is recommended that they follow logical\n * nesting. You may want to use\n * [Event\n * Signatures](http://google.github.io/tracing-framework/instrumenting-code.html#custom-events)\n * as they are defined in WTF.\n *\n * Used to mark scope entry. The return value is used to leave the scope.\n *\n *     var myScope = wtfCreateScope('MyClass#myMethod(ascii someVal)');\n *\n *     someMethod() {\n *        var s = myScope('Foo'); // 'Foo' gets stored in tracing UI\n *        // DO SOME WORK HERE\n *        return wtfLeave(s, 123); // Return value 123\n *     }\n *\n * Note, adding try-finally block around the work to ensure that `wtfLeave` gets called can\n * negatively impact the performance of your application. For this reason we recommend that\n * you don't add them to ensure that `wtfLeave` gets called. In production `wtfLeave` is a noop and\n * so try-finally block has no value. When debugging perf issues, skipping `wtfLeave`, do to\n * exception, will produce incorrect trace, but presence of exception signifies logic error which\n * needs to be fixed before the app should be profiled. Add try-finally only when you expect that\n * an exception is expected during normal execution while profiling.\n *\n * @experimental\n */\nvar wtfCreateScope = wtfEnabled ? createScope : function (signature, flags) { return noopScope; };\n/**\n * Used to mark end of Scope.\n *\n * - `scope` to end.\n * - `returnValue` (optional) to be passed to the WTF.\n *\n * Returns the `returnValue for easy chaining.\n * @experimental\n */\nvar wtfLeave = wtfEnabled ? leave : function (s, r) { return r; };\n/**\n * Used to mark Async start. Async are similar to scope but they don't have to be strictly nested.\n * The return value is used in the call to [endAsync]. Async ranges only work if WTF has been\n * enabled.\n *\n *     someMethod() {\n *        var s = wtfStartTimeRange('HTTP:GET', 'some.url');\n *        var future = new Future.delay(5).then((_) {\n *          wtfEndTimeRange(s);\n *        });\n *     }\n * @experimental\n */\n\n/**\n * Ends a async time range operation.\n * [range] is the return value from [wtfStartTimeRange] Async ranges only work if WTF has been\n * enabled.\n * @experimental\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Use by directives and components to emit custom Events.\n *\n * ### Examples\n *\n * In the following example, `Zippy` alternatively emits `open` and `close` events when its\n * title gets clicked:\n *\n * ```\n * @Component({\n *   selector: 'zippy',\n *   template: `\n *   <div class=\"zippy\">\n *     <div (click)=\"toggle()\">Toggle</div>\n *     <div [hidden]=\"!visible\">\n *       <ng-content></ng-content>\n *     </div>\n *  </div>`})\n * export class Zippy {\n *   visible: boolean = true;\n *   @Output() open: EventEmitter<any> = new EventEmitter();\n *   @Output() close: EventEmitter<any> = new EventEmitter();\n *\n *   toggle() {\n *     this.visible = !this.visible;\n *     if (this.visible) {\n *       this.open.emit(null);\n *     } else {\n *       this.close.emit(null);\n *     }\n *   }\n * }\n * ```\n *\n * The events payload can be accessed by the parameter `$event` on the components output event\n * handler:\n *\n * ```\n * <zippy (open)=\"onOpen($event)\" (close)=\"onClose($event)\"></zippy>\n * ```\n *\n * Uses Rx.Observable but provides an adapter to make it work as specified here:\n * https://github.com/jhusain/observable-spec\n *\n * Once a reference implementation of the spec is available, switch to it.\n *\n */\nvar EventEmitter = /** @class */ (function (_super) {\n    __extends(EventEmitter, _super);\n    /**\n     * Creates an instance of {@link EventEmitter}, which depending on `isAsync`,\n     * delivers events synchronously or asynchronously.\n     *\n     * @param isAsync By default, events are delivered synchronously (default value: `false`).\n     * Set to `true` for asynchronous event delivery.\n     */\n    function EventEmitter(isAsync) {\n        if (isAsync === void 0) { isAsync = false; }\n        var _this = _super.call(this) || this;\n        _this.__isAsync = isAsync;\n        return _this;\n    }\n    EventEmitter.prototype.emit = function (value) { _super.prototype.next.call(this, value); };\n    EventEmitter.prototype.subscribe = function (generatorOrNext, error, complete) {\n        var schedulerFn;\n        var errorFn = function (err) { return null; };\n        var completeFn = function () { return null; };\n        if (generatorOrNext && typeof generatorOrNext === 'object') {\n            schedulerFn = this.__isAsync ? function (value) {\n                setTimeout(function () { return generatorOrNext.next(value); });\n            } : function (value) { generatorOrNext.next(value); };\n            if (generatorOrNext.error) {\n                errorFn = this.__isAsync ? function (err) { setTimeout(function () { return generatorOrNext.error(err); }); } :\n                    function (err) { generatorOrNext.error(err); };\n            }\n            if (generatorOrNext.complete) {\n                completeFn = this.__isAsync ? function () { setTimeout(function () { return generatorOrNext.complete(); }); } :\n                    function () { generatorOrNext.complete(); };\n            }\n        }\n        else {\n            schedulerFn = this.__isAsync ? function (value) { setTimeout(function () { return generatorOrNext(value); }); } :\n                function (value) { generatorOrNext(value); };\n            if (error) {\n                errorFn =\n                    this.__isAsync ? function (err) { setTimeout(function () { return error(err); }); } : function (err) { error(err); };\n            }\n            if (complete) {\n                completeFn =\n                    this.__isAsync ? function () { setTimeout(function () { return complete(); }); } : function () { complete(); };\n            }\n        }\n        var sink = _super.prototype.subscribe.call(this, schedulerFn, errorFn, completeFn);\n        if (generatorOrNext instanceof Subscription) {\n            generatorOrNext.add(sink);\n        }\n        return sink;\n    };\n    return EventEmitter;\n}(Subject));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An injectable service for executing work inside or outside of the Angular zone.\n *\n * The most common use of this service is to optimize performance when starting a work consisting of\n * one or more asynchronous tasks that don't require UI updates or error handling to be handled by\n * Angular. Such tasks can be kicked off via {@link #runOutsideAngular} and if needed, these tasks\n * can reenter the Angular zone via {@link #run}.\n *\n * <!-- TODO: add/fix links to:\n *   - docs explaining zones and the use of zones in Angular and change-detection\n *   - link to runOutsideAngular/run (throughout this file!)\n *   -->\n *\n * ### Example\n *\n * ```\n * import {Component, NgZone} from '@angular/core';\n * import {NgIf} from '@angular/common';\n *\n * @Component({\n *   selector: 'ng-zone-demo',\n *   template: `\n *     <h2>Demo: NgZone</h2>\n *\n *     <p>Progress: {{progress}}%</p>\n *     <p *ngIf=\"progress >= 100\">Done processing {{label}} of Angular zone!</p>\n *\n *     <button (click)=\"processWithinAngularZone()\">Process within Angular zone</button>\n *     <button (click)=\"processOutsideOfAngularZone()\">Process outside of Angular zone</button>\n *   `,\n * })\n * export class NgZoneDemo {\n *   progress: number = 0;\n *   label: string;\n *\n *   constructor(private _ngZone: NgZone) {}\n *\n *   // Loop inside the Angular zone\n *   // so the UI DOES refresh after each setTimeout cycle\n *   processWithinAngularZone() {\n *     this.label = 'inside';\n *     this.progress = 0;\n *     this._increaseProgress(() => console.log('Inside Done!'));\n *   }\n *\n *   // Loop outside of the Angular zone\n *   // so the UI DOES NOT refresh after each setTimeout cycle\n *   processOutsideOfAngularZone() {\n *     this.label = 'outside';\n *     this.progress = 0;\n *     this._ngZone.runOutsideAngular(() => {\n *       this._increaseProgress(() => {\n *         // reenter the Angular zone and display done\n *         this._ngZone.run(() => { console.log('Outside Done!'); });\n *       });\n *     });\n *   }\n *\n *   _increaseProgress(doneCallback: () => void) {\n *     this.progress += 1;\n *     console.log(`Current progress: ${this.progress}%`);\n *\n *     if (this.progress < 100) {\n *       window.setTimeout(() => this._increaseProgress(doneCallback), 10);\n *     } else {\n *       doneCallback();\n *     }\n *   }\n * }\n * ```\n *\n * @experimental\n */\nvar NgZone = /** @class */ (function () {\n    function NgZone(_a) {\n        var _b = _a.enableLongStackTrace, enableLongStackTrace = _b === void 0 ? false : _b;\n        this.hasPendingMicrotasks = false;\n        this.hasPendingMacrotasks = false;\n        /**\n           * Whether there are no outstanding microtasks or macrotasks.\n           */\n        this.isStable = true;\n        /**\n           * Notifies when code enters Angular Zone. This gets fired first on VM Turn.\n           */\n        this.onUnstable = new EventEmitter(false);\n        /**\n           * Notifies when there is no more microtasks enqueued in the current VM Turn.\n           * This is a hint for Angular to do change detection, which may enqueue more microtasks.\n           * For this reason this event can fire multiple times per VM Turn.\n           */\n        this.onMicrotaskEmpty = new EventEmitter(false);\n        /**\n           * Notifies when the last `onMicrotaskEmpty` has run and there are no more microtasks, which\n           * implies we are about to relinquish VM turn.\n           * This event gets called just once.\n           */\n        this.onStable = new EventEmitter(false);\n        /**\n           * Notifies that an error has been delivered.\n           */\n        this.onError = new EventEmitter(false);\n        if (typeof Zone == 'undefined') {\n            throw new Error(\"In this configuration Angular requires Zone.js\");\n        }\n        Zone.assertZonePatched();\n        var self = this;\n        self._nesting = 0;\n        self._outer = self._inner = Zone.current;\n        if (Zone['wtfZoneSpec']) {\n            self._inner = self._inner.fork(Zone['wtfZoneSpec']);\n        }\n        if (Zone['TaskTrackingZoneSpec']) {\n            self._inner = self._inner.fork(new Zone['TaskTrackingZoneSpec']);\n        }\n        if (enableLongStackTrace && Zone['longStackTraceZoneSpec']) {\n            self._inner = self._inner.fork(Zone['longStackTraceZoneSpec']);\n        }\n        forkInnerZoneWithAngularBehavior(self);\n    }\n    NgZone.isInAngularZone = function () { return Zone.current.get('isAngularZone') === true; };\n    NgZone.assertInAngularZone = function () {\n        if (!NgZone.isInAngularZone()) {\n            throw new Error('Expected to be in Angular Zone, but it is not!');\n        }\n    };\n    NgZone.assertNotInAngularZone = function () {\n        if (NgZone.isInAngularZone()) {\n            throw new Error('Expected to not be in Angular Zone, but it is!');\n        }\n    };\n    /**\n     * Executes the `fn` function synchronously within the Angular zone and returns value returned by\n     * the function.\n     *\n     * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n     * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n     *\n     * Any future tasks or microtasks scheduled from within this function will continue executing from\n     * within the Angular zone.\n     *\n     * If a synchronous error happens it will be rethrown and not reported via `onError`.\n     */\n    /**\n       * Executes the `fn` function synchronously within the Angular zone and returns value returned by\n       * the function.\n       *\n       * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n       * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * within the Angular zone.\n       *\n       * If a synchronous error happens it will be rethrown and not reported via `onError`.\n       */\n    NgZone.prototype.run = /**\n       * Executes the `fn` function synchronously within the Angular zone and returns value returned by\n       * the function.\n       *\n       * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n       * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * within the Angular zone.\n       *\n       * If a synchronous error happens it will be rethrown and not reported via `onError`.\n       */\n    function (fn, applyThis, applyArgs) {\n        return this._inner.run(fn, applyThis, applyArgs);\n    };\n    /**\n     * Executes the `fn` function synchronously within the Angular zone as a task and returns value\n     * returned by the function.\n     *\n     * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n     * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n     *\n     * Any future tasks or microtasks scheduled from within this function will continue executing from\n     * within the Angular zone.\n     *\n     * If a synchronous error happens it will be rethrown and not reported via `onError`.\n     */\n    /**\n       * Executes the `fn` function synchronously within the Angular zone as a task and returns value\n       * returned by the function.\n       *\n       * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n       * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * within the Angular zone.\n       *\n       * If a synchronous error happens it will be rethrown and not reported via `onError`.\n       */\n    NgZone.prototype.runTask = /**\n       * Executes the `fn` function synchronously within the Angular zone as a task and returns value\n       * returned by the function.\n       *\n       * Running functions via `run` allows you to reenter Angular zone from a task that was executed\n       * outside of the Angular zone (typically started via {@link #runOutsideAngular}).\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * within the Angular zone.\n       *\n       * If a synchronous error happens it will be rethrown and not reported via `onError`.\n       */\n    function (fn, applyThis, applyArgs, name) {\n        var zone = this._inner;\n        var task = zone.scheduleEventTask('NgZoneEvent: ' + name, fn, EMPTY_PAYLOAD, noop$2, noop$2);\n        try {\n            return zone.runTask(task, applyThis, applyArgs);\n        }\n        finally {\n            zone.cancelTask(task);\n        }\n    };\n    /**\n     * Same as `run`, except that synchronous errors are caught and forwarded via `onError` and not\n     * rethrown.\n     */\n    /**\n       * Same as `run`, except that synchronous errors are caught and forwarded via `onError` and not\n       * rethrown.\n       */\n    NgZone.prototype.runGuarded = /**\n       * Same as `run`, except that synchronous errors are caught and forwarded via `onError` and not\n       * rethrown.\n       */\n    function (fn, applyThis, applyArgs) {\n        return this._inner.runGuarded(fn, applyThis, applyArgs);\n    };\n    /**\n     * Executes the `fn` function synchronously in Angular's parent zone and returns value returned by\n     * the function.\n     *\n     * Running functions via {@link #runOutsideAngular} allows you to escape Angular's zone and do\n     * work that\n     * doesn't trigger Angular change-detection or is subject to Angular's error handling.\n     *\n     * Any future tasks or microtasks scheduled from within this function will continue executing from\n     * outside of the Angular zone.\n     *\n     * Use {@link #run} to reenter the Angular zone and do work that updates the application model.\n     */\n    /**\n       * Executes the `fn` function synchronously in Angular's parent zone and returns value returned by\n       * the function.\n       *\n       * Running functions via {@link #runOutsideAngular} allows you to escape Angular's zone and do\n       * work that\n       * doesn't trigger Angular change-detection or is subject to Angular's error handling.\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * outside of the Angular zone.\n       *\n       * Use {@link #run} to reenter the Angular zone and do work that updates the application model.\n       */\n    NgZone.prototype.runOutsideAngular = /**\n       * Executes the `fn` function synchronously in Angular's parent zone and returns value returned by\n       * the function.\n       *\n       * Running functions via {@link #runOutsideAngular} allows you to escape Angular's zone and do\n       * work that\n       * doesn't trigger Angular change-detection or is subject to Angular's error handling.\n       *\n       * Any future tasks or microtasks scheduled from within this function will continue executing from\n       * outside of the Angular zone.\n       *\n       * Use {@link #run} to reenter the Angular zone and do work that updates the application model.\n       */\n    function (fn) {\n        return this._outer.run(fn);\n    };\n    return NgZone;\n}());\nfunction noop$2() { }\nvar EMPTY_PAYLOAD = {};\nfunction checkStable(zone) {\n    if (zone._nesting == 0 && !zone.hasPendingMicrotasks && !zone.isStable) {\n        try {\n            zone._nesting++;\n            zone.onMicrotaskEmpty.emit(null);\n        }\n        finally {\n            zone._nesting--;\n            if (!zone.hasPendingMicrotasks) {\n                try {\n                    zone.runOutsideAngular(function () { return zone.onStable.emit(null); });\n                }\n                finally {\n                    zone.isStable = true;\n                }\n            }\n        }\n    }\n}\nfunction forkInnerZoneWithAngularBehavior(zone) {\n    zone._inner = zone._inner.fork({\n        name: 'angular',\n        properties: { 'isAngularZone': true },\n        onInvokeTask: function (delegate, current, target, task, applyThis, applyArgs) {\n            try {\n                onEnter(zone);\n                return delegate.invokeTask(target, task, applyThis, applyArgs);\n            }\n            finally {\n                onLeave(zone);\n            }\n        },\n        onInvoke: function (delegate, current, target, callback, applyThis, applyArgs, source) {\n            try {\n                onEnter(zone);\n                return delegate.invoke(target, callback, applyThis, applyArgs, source);\n            }\n            finally {\n                onLeave(zone);\n            }\n        },\n        onHasTask: function (delegate, current, target, hasTaskState) {\n            delegate.hasTask(target, hasTaskState);\n            if (current === target) {\n                // We are only interested in hasTask events which originate from our zone\n                // (A child hasTask event is not interesting to us)\n                if (hasTaskState.change == 'microTask') {\n                    zone.hasPendingMicrotasks = hasTaskState.microTask;\n                    checkStable(zone);\n                }\n                else if (hasTaskState.change == 'macroTask') {\n                    zone.hasPendingMacrotasks = hasTaskState.macroTask;\n                }\n            }\n        },\n        onHandleError: function (delegate, current, target, error) {\n            delegate.handleError(target, error);\n            zone.runOutsideAngular(function () { return zone.onError.emit(error); });\n            return false;\n        }\n    });\n}\nfunction onEnter(zone) {\n    zone._nesting++;\n    if (zone.isStable) {\n        zone.isStable = false;\n        zone.onUnstable.emit(null);\n    }\n}\nfunction onLeave(zone) {\n    zone._nesting--;\n    checkStable(zone);\n}\n/**\n * Provides a noop implementation of `NgZone` which does nothing. This zone requires explicit calls\n * to framework to perform rendering.\n */\nvar NoopNgZone = /** @class */ (function () {\n    function NoopNgZone() {\n        this.hasPendingMicrotasks = false;\n        this.hasPendingMacrotasks = false;\n        this.isStable = true;\n        this.onUnstable = new EventEmitter();\n        this.onMicrotaskEmpty = new EventEmitter();\n        this.onStable = new EventEmitter();\n        this.onError = new EventEmitter();\n    }\n    NoopNgZone.prototype.run = function (fn) { return fn(); };\n    NoopNgZone.prototype.runGuarded = function (fn) { return fn(); };\n    NoopNgZone.prototype.runOutsideAngular = function (fn) { return fn(); };\n    NoopNgZone.prototype.runTask = function (fn) { return fn(); };\n    return NoopNgZone;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * The Testability service provides testing hooks that can be accessed from\n * the browser and by services such as Protractor. Each bootstrapped Angular\n * application on the page will have an instance of Testability.\n * @experimental\n */\nvar Testability = /** @class */ (function () {\n    function Testability(_ngZone) {\n        var _this = this;\n        this._ngZone = _ngZone;\n        this._pendingCount = 0;\n        this._isZoneStable = true;\n        /**\n           * Whether any work was done since the last 'whenStable' callback. This is\n           * useful to detect if this could have potentially destabilized another\n           * component while it is stabilizing.\n           * @internal\n           */\n        this._didWork = false;\n        this._callbacks = [];\n        this._watchAngularEvents();\n        _ngZone.run(function () { _this.taskTrackingZone = Zone.current.get('TaskTrackingZone'); });\n    }\n    Testability.prototype._watchAngularEvents = function () {\n        var _this = this;\n        this._ngZone.onUnstable.subscribe({\n            next: function () {\n                _this._didWork = true;\n                _this._isZoneStable = false;\n            }\n        });\n        this._ngZone.runOutsideAngular(function () {\n            _this._ngZone.onStable.subscribe({\n                next: function () {\n                    NgZone.assertNotInAngularZone();\n                    scheduleMicroTask(function () {\n                        _this._isZoneStable = true;\n                        _this._runCallbacksIfReady();\n                    });\n                }\n            });\n        });\n    };\n    /**\n     * Increases the number of pending request\n     * @deprecated pending requests are now tracked with zones.\n     */\n    /**\n       * Increases the number of pending request\n       * @deprecated pending requests are now tracked with zones.\n       */\n    Testability.prototype.increasePendingRequestCount = /**\n       * Increases the number of pending request\n       * @deprecated pending requests are now tracked with zones.\n       */\n    function () {\n        this._pendingCount += 1;\n        this._didWork = true;\n        return this._pendingCount;\n    };\n    /**\n     * Decreases the number of pending request\n     * @deprecated pending requests are now tracked with zones\n     */\n    /**\n       * Decreases the number of pending request\n       * @deprecated pending requests are now tracked with zones\n       */\n    Testability.prototype.decreasePendingRequestCount = /**\n       * Decreases the number of pending request\n       * @deprecated pending requests are now tracked with zones\n       */\n    function () {\n        this._pendingCount -= 1;\n        if (this._pendingCount < 0) {\n            throw new Error('pending async requests below zero');\n        }\n        this._runCallbacksIfReady();\n        return this._pendingCount;\n    };\n    /**\n     * Whether an associated application is stable\n     */\n    /**\n       * Whether an associated application is stable\n       */\n    Testability.prototype.isStable = /**\n       * Whether an associated application is stable\n       */\n    function () {\n        return this._isZoneStable && this._pendingCount === 0 && !this._ngZone.hasPendingMacrotasks;\n    };\n    Testability.prototype._runCallbacksIfReady = function () {\n        var _this = this;\n        if (this.isStable()) {\n            // Schedules the call backs in a new frame so that it is always async.\n            scheduleMicroTask(function () {\n                while (_this._callbacks.length !== 0) {\n                    var cb = (_this._callbacks.pop());\n                    clearTimeout(cb.timeoutId);\n                    cb.doneCb(_this._didWork);\n                }\n                _this._didWork = false;\n            });\n        }\n        else {\n            // Still not stable, send updates.\n            var pending_1 = this.getPendingTasks();\n            this._callbacks = this._callbacks.filter(function (cb) {\n                if (cb.updateCb && cb.updateCb(pending_1)) {\n                    clearTimeout(cb.timeoutId);\n                    return false;\n                }\n                return true;\n            });\n            this._didWork = true;\n        }\n    };\n    Testability.prototype.getPendingTasks = function () {\n        if (!this.taskTrackingZone) {\n            return [];\n        }\n        return this.taskTrackingZone.macroTasks.map(function (t) {\n            return {\n                source: t.source,\n                isPeriodic: t.data.isPeriodic,\n                delay: t.data.delay,\n                // From TaskTrackingZone:\n                // https://github.com/angular/zone.js/blob/master/lib/zone-spec/task-tracking.ts#L40\n                creationLocation: t.creationLocation,\n                // Added by Zones for XHRs\n                // https://github.com/angular/zone.js/blob/master/lib/browser/browser.ts#L133\n                xhr: t.data.target\n            };\n        });\n    };\n    Testability.prototype.addCallback = function (cb, timeout, updateCb) {\n        var _this = this;\n        var timeoutId = -1;\n        if (timeout && timeout > 0) {\n            timeoutId = setTimeout(function () {\n                _this._callbacks = _this._callbacks.filter(function (cb) { return cb.timeoutId !== timeoutId; });\n                cb(_this._didWork, _this.getPendingTasks());\n            }, timeout);\n        }\n        this._callbacks.push({ doneCb: cb, timeoutId: timeoutId, updateCb: updateCb });\n    };\n    /**\n     * Wait for the application to be stable with a timeout. If the timeout is reached before that\n     * happens, the callback receives a list of the macro tasks that were pending, otherwise null.\n     *\n     * @param doneCb The callback to invoke when Angular is stable or the timeout expires\n     *    whichever comes first.\n     * @param timeout Optional. The maximum time to wait for Angular to become stable. If not\n     *    specified, whenStable() will wait forever.\n     * @param updateCb Optional. If specified, this callback will be invoked whenever the set of\n     *    pending macrotasks changes. If this callback returns true doneCb will not be invoked\n     *    and no further updates will be issued.\n     */\n    /**\n       * Wait for the application to be stable with a timeout. If the timeout is reached before that\n       * happens, the callback receives a list of the macro tasks that were pending, otherwise null.\n       *\n       * @param doneCb The callback to invoke when Angular is stable or the timeout expires\n       *    whichever comes first.\n       * @param timeout Optional. The maximum time to wait for Angular to become stable. If not\n       *    specified, whenStable() will wait forever.\n       * @param updateCb Optional. If specified, this callback will be invoked whenever the set of\n       *    pending macrotasks changes. If this callback returns true doneCb will not be invoked\n       *    and no further updates will be issued.\n       */\n    Testability.prototype.whenStable = /**\n       * Wait for the application to be stable with a timeout. If the timeout is reached before that\n       * happens, the callback receives a list of the macro tasks that were pending, otherwise null.\n       *\n       * @param doneCb The callback to invoke when Angular is stable or the timeout expires\n       *    whichever comes first.\n       * @param timeout Optional. The maximum time to wait for Angular to become stable. If not\n       *    specified, whenStable() will wait forever.\n       * @param updateCb Optional. If specified, this callback will be invoked whenever the set of\n       *    pending macrotasks changes. If this callback returns true doneCb will not be invoked\n       *    and no further updates will be issued.\n       */\n    function (doneCb, timeout, updateCb) {\n        if (updateCb && !this.taskTrackingZone) {\n            throw new Error('Task tracking zone is required when passing an update callback to ' +\n                'whenStable(). Is \"zone.js/dist/task-tracking.js\" loaded?');\n        }\n        // These arguments are 'Function' above to keep the public API simple.\n        this.addCallback(doneCb, timeout, updateCb);\n        this._runCallbacksIfReady();\n    };\n    /**\n     * Get the number of pending requests\n     * @deprecated pending requests are now tracked with zones\n     */\n    /**\n       * Get the number of pending requests\n       * @deprecated pending requests are now tracked with zones\n       */\n    Testability.prototype.getPendingRequestCount = /**\n       * Get the number of pending requests\n       * @deprecated pending requests are now tracked with zones\n       */\n    function () { return this._pendingCount; };\n    /**\n     * Find providers by name\n     * @param using The root element to search from\n     * @param provider The name of binding variable\n     * @param exactMatch Whether using exactMatch\n     */\n    /**\n       * Find providers by name\n       * @param using The root element to search from\n       * @param provider The name of binding variable\n       * @param exactMatch Whether using exactMatch\n       */\n    Testability.prototype.findProviders = /**\n       * Find providers by name\n       * @param using The root element to search from\n       * @param provider The name of binding variable\n       * @param exactMatch Whether using exactMatch\n       */\n    function (using, provider, exactMatch) {\n        // TODO(juliemr): implement.\n        return [];\n    };\n    Testability.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    Testability.ctorParameters = function () { return [\n        { type: NgZone, },\n    ]; };\n    return Testability;\n}());\n/**\n * A global registry of {@link Testability} instances for specific elements.\n * @experimental\n */\nvar TestabilityRegistry = /** @class */ (function () {\n    function TestabilityRegistry() {\n        /** @internal */\n        this._applications = new Map();\n        _testabilityGetter.addToWindow(this);\n    }\n    /**\n     * Registers an application with a testability hook so that it can be tracked\n     * @param token token of application, root element\n     * @param testability Testability hook\n     */\n    /**\n       * Registers an application with a testability hook so that it can be tracked\n       * @param token token of application, root element\n       * @param testability Testability hook\n       */\n    TestabilityRegistry.prototype.registerApplication = /**\n       * Registers an application with a testability hook so that it can be tracked\n       * @param token token of application, root element\n       * @param testability Testability hook\n       */\n    function (token, testability) {\n        this._applications.set(token, testability);\n    };\n    /**\n     * Unregisters an application.\n     * @param token token of application, root element\n     */\n    /**\n       * Unregisters an application.\n       * @param token token of application, root element\n       */\n    TestabilityRegistry.prototype.unregisterApplication = /**\n       * Unregisters an application.\n       * @param token token of application, root element\n       */\n    function (token) { this._applications.delete(token); };\n    /**\n     * Unregisters all applications\n     */\n    /**\n       * Unregisters all applications\n       */\n    TestabilityRegistry.prototype.unregisterAllApplications = /**\n       * Unregisters all applications\n       */\n    function () { this._applications.clear(); };\n    /**\n     * Get a testability hook associated with the application\n     * @param elem root element\n     */\n    /**\n       * Get a testability hook associated with the application\n       * @param elem root element\n       */\n    TestabilityRegistry.prototype.getTestability = /**\n       * Get a testability hook associated with the application\n       * @param elem root element\n       */\n    function (elem) { return this._applications.get(elem) || null; };\n    /**\n     * Get all registered testabilities\n     */\n    /**\n       * Get all registered testabilities\n       */\n    TestabilityRegistry.prototype.getAllTestabilities = /**\n       * Get all registered testabilities\n       */\n    function () { return Array.from(this._applications.values()); };\n    /**\n     * Get all registered applications(root elements)\n     */\n    /**\n       * Get all registered applications(root elements)\n       */\n    TestabilityRegistry.prototype.getAllRootElements = /**\n       * Get all registered applications(root elements)\n       */\n    function () { return Array.from(this._applications.keys()); };\n    /**\n     * Find testability of a node in the Tree\n     * @param elem node\n     * @param findInAncestors whether finding testability in ancestors if testability was not found in\n     * current node\n     */\n    /**\n       * Find testability of a node in the Tree\n       * @param elem node\n       * @param findInAncestors whether finding testability in ancestors if testability was not found in\n       * current node\n       */\n    TestabilityRegistry.prototype.findTestabilityInTree = /**\n       * Find testability of a node in the Tree\n       * @param elem node\n       * @param findInAncestors whether finding testability in ancestors if testability was not found in\n       * current node\n       */\n    function (elem, findInAncestors) {\n        if (findInAncestors === void 0) { findInAncestors = true; }\n        return _testabilityGetter.findTestabilityInTree(this, elem, findInAncestors);\n    };\n    TestabilityRegistry.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    TestabilityRegistry.ctorParameters = function () { return []; };\n    return TestabilityRegistry;\n}());\nvar _NoopGetTestability = /** @class */ (function () {\n    function _NoopGetTestability() {\n    }\n    _NoopGetTestability.prototype.addToWindow = function (registry) { };\n    _NoopGetTestability.prototype.findTestabilityInTree = function (registry, elem, findInAncestors) {\n        return null;\n    };\n    return _NoopGetTestability;\n}());\n/**\n * Set the {@link GetTestability} implementation used by the Angular testing framework.\n * @experimental\n */\n\nvar _testabilityGetter = new _NoopGetTestability();\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _devMode = true;\nvar _platform;\nvar ALLOW_MULTIPLE_PLATFORMS = new InjectionToken('AllowMultipleToken');\n/**\n * Disable Angular's development mode, which turns off assertions and other\n * checks within the framework.\n *\n * One important assertion this disables verifies that a change detection pass\n * does not result in additional changes to any bindings (also known as\n * unidirectional data flow).\n *\n *\n */\n\n/**\n * Returns whether Angular is in development mode. After called once,\n * the value is locked and won't change any more.\n *\n * By default, this is true, unless a user calls `enableProdMode` before calling this.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction isDevMode() {\n    return _devMode;\n}\n/**\n * Creates a platform.\n * Platforms have to be eagerly created via this function.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction createPlatform(injector) {\n    if (_platform && !_platform.destroyed &&\n        !_platform.injector.get(ALLOW_MULTIPLE_PLATFORMS, false)) {\n        throw new Error('There can be only one platform. Destroy the previous one to create a new one.');\n    }\n    _platform = injector.get(PlatformRef);\n    var inits = injector.get(PLATFORM_INITIALIZER, null);\n    if (inits)\n        inits.forEach(function (init) { return init(); });\n    return _platform;\n}\n/**\n * Creates a factory for a platform\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction createPlatformFactory(parentPlatformFactory, name, providers) {\n    if (providers === void 0) { providers = []; }\n    var desc = \"Platform: \" + name;\n    var marker = new InjectionToken(desc);\n    return function (extraProviders) {\n        if (extraProviders === void 0) { extraProviders = []; }\n        var platform = getPlatform();\n        if (!platform || platform.injector.get(ALLOW_MULTIPLE_PLATFORMS, false)) {\n            if (parentPlatformFactory) {\n                parentPlatformFactory(providers.concat(extraProviders).concat({ provide: marker, useValue: true }));\n            }\n            else {\n                var injectedProviders = providers.concat(extraProviders).concat({ provide: marker, useValue: true });\n                createPlatform(Injector.create({ providers: injectedProviders, name: desc }));\n            }\n        }\n        return assertPlatform(marker);\n    };\n}\n/**\n * Checks that there currently is a platform which contains the given token as a provider.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction assertPlatform(requiredToken) {\n    var platform = getPlatform();\n    if (!platform) {\n        throw new Error('No platform exists!');\n    }\n    if (!platform.injector.get(requiredToken, null)) {\n        throw new Error('A platform with a different configuration has been created. Please destroy it first.');\n    }\n    return platform;\n}\n/**\n * Destroy the existing platform.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\n\n/**\n * Returns the current platform.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nfunction getPlatform() {\n    return _platform && !_platform.destroyed ? _platform : null;\n}\n/**\n * The Angular platform is the entry point for Angular on a web page. Each page\n * has exactly one platform, and services (such as reflection) which are common\n * to every Angular application running on the page are bound in its scope.\n *\n * A page's platform is initialized implicitly when a platform is created via a platform factory\n * (e.g. {@link platformBrowser}), or explicitly by calling the {@link createPlatform} function.\n *\n *\n */\nvar PlatformRef = /** @class */ (function () {\n    /** @internal */\n    function PlatformRef(_injector) {\n        this._injector = _injector;\n        this._modules = [];\n        this._destroyListeners = [];\n        this._destroyed = false;\n    }\n    /**\n     * Creates an instance of an `@NgModule` for the given platform\n     * for offline compilation.\n     *\n     * ## Simple Example\n     *\n     * ```typescript\n     * my_module.ts:\n     *\n     * @NgModule({\n     *   imports: [BrowserModule]\n     * })\n     * class MyModule {}\n     *\n     * main.ts:\n     * import {MyModuleNgFactory} from './my_module.ngfactory';\n     * import {platformBrowser} from '@angular/platform-browser';\n     *\n     * let moduleRef = platformBrowser().bootstrapModuleFactory(MyModuleNgFactory);\n     * ```\n     *\n     * @experimental APIs related to application bootstrap are currently under review.\n     */\n    /**\n       * Creates an instance of an `@NgModule` for the given platform\n       * for offline compilation.\n       *\n       * ## Simple Example\n       *\n       * ```typescript\n       * my_module.ts:\n       *\n       * @NgModule({\n       *   imports: [BrowserModule]\n       * })\n       * class MyModule {}\n       *\n       * main.ts:\n       * import {MyModuleNgFactory} from './my_module.ngfactory';\n       * import {platformBrowser} from '@angular/platform-browser';\n       *\n       * let moduleRef = platformBrowser().bootstrapModuleFactory(MyModuleNgFactory);\n       * ```\n       *\n       * @experimental APIs related to application bootstrap are currently under review.\n       */\n    PlatformRef.prototype.bootstrapModuleFactory = /**\n       * Creates an instance of an `@NgModule` for the given platform\n       * for offline compilation.\n       *\n       * ## Simple Example\n       *\n       * ```typescript\n       * my_module.ts:\n       *\n       * @NgModule({\n       *   imports: [BrowserModule]\n       * })\n       * class MyModule {}\n       *\n       * main.ts:\n       * import {MyModuleNgFactory} from './my_module.ngfactory';\n       * import {platformBrowser} from '@angular/platform-browser';\n       *\n       * let moduleRef = platformBrowser().bootstrapModuleFactory(MyModuleNgFactory);\n       * ```\n       *\n       * @experimental APIs related to application bootstrap are currently under review.\n       */\n    function (moduleFactory, options) {\n        var _this = this;\n        // Note: We need to create the NgZone _before_ we instantiate the module,\n        // as instantiating the module creates some providers eagerly.\n        // So we create a mini parent injector that just contains the new NgZone and\n        // pass that as parent to the NgModuleFactory.\n        var ngZoneOption = options ? options.ngZone : undefined;\n        var ngZone = getNgZone(ngZoneOption);\n        var providers = [{ provide: NgZone, useValue: ngZone }];\n        // Attention: Don't use ApplicationRef.run here,\n        // as we want to be sure that all possible constructor calls are inside `ngZone.run`!\n        return ngZone.run(function () {\n            var ngZoneInjector = Injector.create({ providers: providers, parent: _this.injector, name: moduleFactory.moduleType.name });\n            var moduleRef = moduleFactory.create(ngZoneInjector);\n            var exceptionHandler = moduleRef.injector.get(ErrorHandler, null);\n            if (!exceptionHandler) {\n                throw new Error('No ErrorHandler. Is platform module (BrowserModule) included?');\n            }\n            moduleRef.onDestroy(function () { return remove(_this._modules, moduleRef); });\n            ngZone.runOutsideAngular(function () {\n                return ngZone.onError.subscribe({ next: function (error) { exceptionHandler.handleError(error); } });\n            });\n            return _callAndReportToErrorHandler(exceptionHandler, (ngZone), function () {\n                var initStatus = moduleRef.injector.get(ApplicationInitStatus);\n                initStatus.runInitializers();\n                return initStatus.donePromise.then(function () {\n                    _this._moduleDoBootstrap(moduleRef);\n                    return moduleRef;\n                });\n            });\n        });\n    };\n    /**\n     * Creates an instance of an `@NgModule` for a given platform using the given runtime compiler.\n     *\n     * ## Simple Example\n     *\n     * ```typescript\n     * @NgModule({\n     *   imports: [BrowserModule]\n     * })\n     * class MyModule {}\n     *\n     * let moduleRef = platformBrowser().bootstrapModule(MyModule);\n     * ```\n     *\n     */\n    /**\n       * Creates an instance of an `@NgModule` for a given platform using the given runtime compiler.\n       *\n       * ## Simple Example\n       *\n       * ```typescript\n       * @NgModule({\n       *   imports: [BrowserModule]\n       * })\n       * class MyModule {}\n       *\n       * let moduleRef = platformBrowser().bootstrapModule(MyModule);\n       * ```\n       *\n       */\n    PlatformRef.prototype.bootstrapModule = /**\n       * Creates an instance of an `@NgModule` for a given platform using the given runtime compiler.\n       *\n       * ## Simple Example\n       *\n       * ```typescript\n       * @NgModule({\n       *   imports: [BrowserModule]\n       * })\n       * class MyModule {}\n       *\n       * let moduleRef = platformBrowser().bootstrapModule(MyModule);\n       * ```\n       *\n       */\n    function (moduleType, compilerOptions) {\n        var _this = this;\n        if (compilerOptions === void 0) { compilerOptions = []; }\n        var compilerFactory = this.injector.get(CompilerFactory);\n        var options = optionsReducer({}, compilerOptions);\n        var compiler = compilerFactory.createCompiler([options]);\n        return compiler.compileModuleAsync(moduleType)\n            .then(function (moduleFactory) { return _this.bootstrapModuleFactory(moduleFactory, options); });\n    };\n    PlatformRef.prototype._moduleDoBootstrap = function (moduleRef) {\n        var appRef = moduleRef.injector.get(ApplicationRef);\n        if (moduleRef._bootstrapComponents.length > 0) {\n            moduleRef._bootstrapComponents.forEach(function (f) { return appRef.bootstrap(f); });\n        }\n        else if (moduleRef.instance.ngDoBootstrap) {\n            moduleRef.instance.ngDoBootstrap(appRef);\n        }\n        else {\n            throw new Error(\"The module \" + stringify$1(moduleRef.instance.constructor) + \" was bootstrapped, but it does not declare \\\"@NgModule.bootstrap\\\" components nor a \\\"ngDoBootstrap\\\" method. \" +\n                \"Please define one of these.\");\n        }\n        this._modules.push(moduleRef);\n    };\n    /**\n     * Register a listener to be called when the platform is disposed.\n     */\n    /**\n       * Register a listener to be called when the platform is disposed.\n       */\n    PlatformRef.prototype.onDestroy = /**\n       * Register a listener to be called when the platform is disposed.\n       */\n    function (callback) { this._destroyListeners.push(callback); };\n    Object.defineProperty(PlatformRef.prototype, \"injector\", {\n        /**\n         * Retrieve the platform {@link Injector}, which is the parent injector for\n         * every Angular application on the page and provides singleton providers.\n         */\n        get: /**\n           * Retrieve the platform {@link Injector}, which is the parent injector for\n           * every Angular application on the page and provides singleton providers.\n           */\n        function () { return this._injector; },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Destroy the Angular platform and all Angular applications on the page.\n     */\n    /**\n       * Destroy the Angular platform and all Angular applications on the page.\n       */\n    PlatformRef.prototype.destroy = /**\n       * Destroy the Angular platform and all Angular applications on the page.\n       */\n    function () {\n        if (this._destroyed) {\n            throw new Error('The platform has already been destroyed!');\n        }\n        this._modules.slice().forEach(function (module) { return module.destroy(); });\n        this._destroyListeners.forEach(function (listener) { return listener(); });\n        this._destroyed = true;\n    };\n    Object.defineProperty(PlatformRef.prototype, \"destroyed\", {\n        get: function () { return this._destroyed; },\n        enumerable: true,\n        configurable: true\n    });\n    PlatformRef.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    PlatformRef.ctorParameters = function () { return [\n        { type: Injector, },\n    ]; };\n    return PlatformRef;\n}());\nfunction getNgZone(ngZoneOption) {\n    var ngZone;\n    if (ngZoneOption === 'noop') {\n        ngZone = new NoopNgZone();\n    }\n    else {\n        ngZone = (ngZoneOption === 'zone.js' ? undefined : ngZoneOption) ||\n            new NgZone({ enableLongStackTrace: isDevMode() });\n    }\n    return ngZone;\n}\nfunction _callAndReportToErrorHandler(errorHandler, ngZone, callback) {\n    try {\n        var result = callback();\n        if (isPromise$2(result)) {\n            return result.catch(function (e) {\n                ngZone.runOutsideAngular(function () { return errorHandler.handleError(e); });\n                // rethrow as the exception handler might not do it\n                throw e;\n            });\n        }\n        return result;\n    }\n    catch (e) {\n        ngZone.runOutsideAngular(function () { return errorHandler.handleError(e); });\n        // rethrow as the exception handler might not do it\n        throw e;\n    }\n}\nfunction optionsReducer(dst, objs) {\n    if (Array.isArray(objs)) {\n        dst = objs.reduce(optionsReducer, dst);\n    }\n    else {\n        dst = __assign({}, dst, objs);\n    }\n    return dst;\n}\n/**\n * A reference to an Angular application running on a page.\n *\n *\n */\nvar ApplicationRef = /** @class */ (function () {\n    /** @internal */\n    function ApplicationRef(_zone, _console, _injector, _exceptionHandler, _componentFactoryResolver, _initStatus) {\n        var _this = this;\n        this._zone = _zone;\n        this._console = _console;\n        this._injector = _injector;\n        this._exceptionHandler = _exceptionHandler;\n        this._componentFactoryResolver = _componentFactoryResolver;\n        this._initStatus = _initStatus;\n        this._bootstrapListeners = [];\n        this._views = [];\n        this._runningTick = false;\n        this._enforceNoNewChanges = false;\n        this._stable = true;\n        /**\n           * Get a list of component types registered to this application.\n           * This list is populated even before the component is created.\n           */\n        this.componentTypes = [];\n        /**\n           * Get a list of components registered to this application.\n           */\n        this.components = [];\n        this._enforceNoNewChanges = isDevMode();\n        this._zone.onMicrotaskEmpty.subscribe({ next: function () { _this._zone.run(function () { _this.tick(); }); } });\n        var isCurrentlyStable = new Observable(function (observer) {\n            _this._stable = _this._zone.isStable && !_this._zone.hasPendingMacrotasks &&\n                !_this._zone.hasPendingMicrotasks;\n            _this._zone.runOutsideAngular(function () {\n                observer.next(_this._stable);\n                observer.complete();\n            });\n        });\n        var isStable = new Observable(function (observer) {\n            // Create the subscription to onStable outside the Angular Zone so that\n            // the callback is run outside the Angular Zone.\n            var stableSub;\n            _this._zone.runOutsideAngular(function () {\n                stableSub = _this._zone.onStable.subscribe(function () {\n                    NgZone.assertNotInAngularZone();\n                    // Check whether there are no pending macro/micro tasks in the next tick\n                    // to allow for NgZone to update the state.\n                    scheduleMicroTask(function () {\n                        if (!_this._stable && !_this._zone.hasPendingMacrotasks &&\n                            !_this._zone.hasPendingMicrotasks) {\n                            _this._stable = true;\n                            observer.next(true);\n                        }\n                    });\n                });\n            });\n            var unstableSub = _this._zone.onUnstable.subscribe(function () {\n                NgZone.assertInAngularZone();\n                if (_this._stable) {\n                    _this._stable = false;\n                    _this._zone.runOutsideAngular(function () { observer.next(false); });\n                }\n            });\n            return function () {\n                stableSub.unsubscribe();\n                unstableSub.unsubscribe();\n            };\n        });\n        this.isStable =\n            merge(isCurrentlyStable, isStable.pipe(share()));\n    }\n    /**\n     * Bootstrap a new component at the root level of the application.\n     *\n     * ### Bootstrap process\n     *\n     * When bootstrapping a new root component into an application, Angular mounts the\n     * specified application component onto DOM elements identified by the [componentType]'s\n     * selector and kicks off automatic change detection to finish initializing the component.\n     *\n     * Optionally, a component can be mounted onto a DOM element that does not match the\n     * [componentType]'s selector.\n     *\n     * ### Example\n     * {@example core/ts/platform/platform.ts region='longform'}\n     */\n    /**\n       * Bootstrap a new component at the root level of the application.\n       *\n       * ### Bootstrap process\n       *\n       * When bootstrapping a new root component into an application, Angular mounts the\n       * specified application component onto DOM elements identified by the [componentType]'s\n       * selector and kicks off automatic change detection to finish initializing the component.\n       *\n       * Optionally, a component can be mounted onto a DOM element that does not match the\n       * [componentType]'s selector.\n       *\n       * ### Example\n       * {@example core/ts/platform/platform.ts region='longform'}\n       */\n    ApplicationRef.prototype.bootstrap = /**\n       * Bootstrap a new component at the root level of the application.\n       *\n       * ### Bootstrap process\n       *\n       * When bootstrapping a new root component into an application, Angular mounts the\n       * specified application component onto DOM elements identified by the [componentType]'s\n       * selector and kicks off automatic change detection to finish initializing the component.\n       *\n       * Optionally, a component can be mounted onto a DOM element that does not match the\n       * [componentType]'s selector.\n       *\n       * ### Example\n       * {@example core/ts/platform/platform.ts region='longform'}\n       */\n    function (componentOrFactory, rootSelectorOrNode) {\n        var _this = this;\n        if (!this._initStatus.done) {\n            throw new Error('Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.');\n        }\n        var componentFactory;\n        if (componentOrFactory instanceof ComponentFactory) {\n            componentFactory = componentOrFactory;\n        }\n        else {\n            componentFactory =\n                (this._componentFactoryResolver.resolveComponentFactory(componentOrFactory));\n        }\n        this.componentTypes.push(componentFactory.componentType);\n        // Create a factory associated with the current module if it's not bound to some other\n        var ngModule = componentFactory instanceof ComponentFactoryBoundToModule ?\n            null :\n            this._injector.get(NgModuleRef);\n        var selectorOrNode = rootSelectorOrNode || componentFactory.selector;\n        var compRef = componentFactory.create(Injector.NULL, [], selectorOrNode, ngModule);\n        compRef.onDestroy(function () { _this._unloadComponent(compRef); });\n        var testability = compRef.injector.get(Testability, null);\n        if (testability) {\n            compRef.injector.get(TestabilityRegistry)\n                .registerApplication(compRef.location.nativeElement, testability);\n        }\n        this._loadComponent(compRef);\n        if (isDevMode()) {\n            this._console.log(\"Angular is running in the development mode. Call enableProdMode() to enable the production mode.\");\n        }\n        return compRef;\n    };\n    /**\n     * Invoke this method to explicitly process change detection and its side-effects.\n     *\n     * In development mode, `tick()` also performs a second change detection cycle to ensure that no\n     * further changes are detected. If additional changes are picked up during this second cycle,\n     * bindings in the app have side-effects that cannot be resolved in a single change detection\n     * pass.\n     * In this case, Angular throws an error, since an Angular application can only have one change\n     * detection pass during which all change detection must complete.\n     */\n    /**\n       * Invoke this method to explicitly process change detection and its side-effects.\n       *\n       * In development mode, `tick()` also performs a second change detection cycle to ensure that no\n       * further changes are detected. If additional changes are picked up during this second cycle,\n       * bindings in the app have side-effects that cannot be resolved in a single change detection\n       * pass.\n       * In this case, Angular throws an error, since an Angular application can only have one change\n       * detection pass during which all change detection must complete.\n       */\n    ApplicationRef.prototype.tick = /**\n       * Invoke this method to explicitly process change detection and its side-effects.\n       *\n       * In development mode, `tick()` also performs a second change detection cycle to ensure that no\n       * further changes are detected. If additional changes are picked up during this second cycle,\n       * bindings in the app have side-effects that cannot be resolved in a single change detection\n       * pass.\n       * In this case, Angular throws an error, since an Angular application can only have one change\n       * detection pass during which all change detection must complete.\n       */\n    function () {\n        var _this = this;\n        if (this._runningTick) {\n            throw new Error('ApplicationRef.tick is called recursively');\n        }\n        var scope = ApplicationRef._tickScope();\n        try {\n            this._runningTick = true;\n            this._views.forEach(function (view) { return view.detectChanges(); });\n            if (this._enforceNoNewChanges) {\n                this._views.forEach(function (view) { return view.checkNoChanges(); });\n            }\n        }\n        catch (e) {\n            // Attention: Don't rethrow as it could cancel subscriptions to Observables!\n            this._zone.runOutsideAngular(function () { return _this._exceptionHandler.handleError(e); });\n        }\n        finally {\n            this._runningTick = false;\n            wtfLeave(scope);\n        }\n    };\n    /**\n     * Attaches a view so that it will be dirty checked.\n     * The view will be automatically detached when it is destroyed.\n     * This will throw if the view is already attached to a ViewContainer.\n     */\n    /**\n       * Attaches a view so that it will be dirty checked.\n       * The view will be automatically detached when it is destroyed.\n       * This will throw if the view is already attached to a ViewContainer.\n       */\n    ApplicationRef.prototype.attachView = /**\n       * Attaches a view so that it will be dirty checked.\n       * The view will be automatically detached when it is destroyed.\n       * This will throw if the view is already attached to a ViewContainer.\n       */\n    function (viewRef) {\n        var view = viewRef;\n        this._views.push(view);\n        view.attachToAppRef(this);\n    };\n    /**\n     * Detaches a view from dirty checking again.\n     */\n    /**\n       * Detaches a view from dirty checking again.\n       */\n    ApplicationRef.prototype.detachView = /**\n       * Detaches a view from dirty checking again.\n       */\n    function (viewRef) {\n        var view = viewRef;\n        remove(this._views, view);\n        view.detachFromAppRef();\n    };\n    ApplicationRef.prototype._loadComponent = function (componentRef) {\n        this.attachView(componentRef.hostView);\n        this.tick();\n        this.components.push(componentRef);\n        // Get the listeners lazily to prevent DI cycles.\n        var listeners = this._injector.get(APP_BOOTSTRAP_LISTENER, []).concat(this._bootstrapListeners);\n        listeners.forEach(function (listener) { return listener(componentRef); });\n    };\n    ApplicationRef.prototype._unloadComponent = function (componentRef) {\n        this.detachView(componentRef.hostView);\n        remove(this.components, componentRef);\n    };\n    /** @internal */\n    /** @internal */\n    ApplicationRef.prototype.ngOnDestroy = /** @internal */\n    function () {\n        // TODO(alxhub): Dispose of the NgZone.\n        this._views.slice().forEach(function (view) { return view.destroy(); });\n    };\n    Object.defineProperty(ApplicationRef.prototype, \"viewCount\", {\n        /**\n         * Returns the number of attached views.\n         */\n        get: /**\n           * Returns the number of attached views.\n           */\n        function () { return this._views.length; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @internal */\n    ApplicationRef._tickScope = wtfCreateScope('ApplicationRef#tick()');\n    ApplicationRef.decorators = [\n        { type: Injectable }\n    ];\n    /** @nocollapse */\n    ApplicationRef.ctorParameters = function () { return [\n        { type: NgZone, },\n        { type: Console, },\n        { type: Injector, },\n        { type: ErrorHandler, },\n        { type: ComponentFactoryResolver, },\n        { type: ApplicationInitStatus, },\n    ]; };\n    return ApplicationRef;\n}());\nfunction remove(list, el) {\n    var index = list.indexOf(el);\n    if (index > -1) {\n        list.splice(index, 1);\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @deprecated Use the `Renderer2` instead.\n */\nvar Renderer = /** @class */ (function () {\n    function Renderer() {\n    }\n    return Renderer;\n}());\nvar Renderer2Interceptor = new InjectionToken('Renderer2Interceptor');\n/**\n * @experimental\n */\nvar RendererFactory2 = /** @class */ (function () {\n    function RendererFactory2() {\n    }\n    return RendererFactory2;\n}());\n/**\n * @experimental\n */\n/**\n * @experimental\n */\nvar RendererStyleFlags2;\n/**\n * @experimental\n */\n(function (RendererStyleFlags2) {\n    RendererStyleFlags2[RendererStyleFlags2[\"Important\"] = 1] = \"Important\";\n    RendererStyleFlags2[RendererStyleFlags2[\"DashCase\"] = 2] = \"DashCase\";\n})(RendererStyleFlags2 || (RendererStyleFlags2 = {}));\n/**\n * @experimental\n */\nvar Renderer2 = /** @class */ (function () {\n    function Renderer2() {\n    }\n    return Renderer2;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A wrapper around a native element inside of a View.\n *\n * An `ElementRef` is backed by a render-specific element. In the browser, this is usually a DOM\n * element.\n *\n * @security Permitting direct access to the DOM can make your application more vulnerable to\n * XSS attacks. Carefully review any use of `ElementRef` in your code. For more detail, see the\n * [Security Guide](http://g.co/ng/security).\n *\n *\n */\n// Note: We don't expose things like `Injector`, `ViewContainer`, ... here,\n// i.e. users have to ask for what they need. With that, we can build better analysis tools\n// and could do better codegen in the future.\nvar ElementRef = /** @class */ (function () {\n    function ElementRef(nativeElement) {\n        this.nativeElement = nativeElement;\n    }\n    return ElementRef;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Used to load ng module factories.\n *\n */\n/**\n * Registers a loaded module. Should only be called from generated NgModuleFactory code.\n * @experimental\n */\n\n\n/**\n * Returns the NgModuleFactory with the given id, if it exists and has been loaded.\n * Factories for modules that do not specify an `id` cannot be retrieved. Throws if the module\n * cannot be found.\n * @experimental\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An unmodifiable list of items that Angular keeps up to date when the state\n * of the application changes.\n *\n * The type of object that {@link ViewChildren}, {@link ContentChildren}, and {@link QueryList}\n * provide.\n *\n * Implements an iterable interface, therefore it can be used in both ES6\n * javascript `for (var i of items)` loops as well as in Angular templates with\n * `*ngFor=\"let i of myList\"`.\n *\n * Changes can be observed by subscribing to the changes `Observable`.\n *\n * NOTE: In the future this class will implement an `Observable` interface.\n *\n * ### Example ([live demo](http://plnkr.co/edit/RX8sJnQYl9FWuSCWme5z?p=preview))\n * ```typescript\n * @Component({...})\n * class Container {\n *   @ViewChildren(Item) items:QueryList<Item>;\n * }\n * ```\n *\n */\nvar QueryList = /** @class */ (function () {\n    function QueryList() {\n        this.dirty = true;\n        this._results = [];\n        this.changes = new EventEmitter();\n        this.length = 0;\n    }\n    /**\n     * See\n     * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n     */\n    /**\n       * See\n       * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n       */\n    QueryList.prototype.map = /**\n       * See\n       * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n       */\n    function (fn) { return this._results.map(fn); };\n    /**\n     * See\n     * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n     */\n    /**\n       * See\n       * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n       */\n    QueryList.prototype.filter = /**\n       * See\n       * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n       */\n    function (fn) {\n        return this._results.filter(fn);\n    };\n    /**\n     * See\n     * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n     */\n    /**\n       * See\n       * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n       */\n    QueryList.prototype.find = /**\n       * See\n       * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n       */\n    function (fn) {\n        return this._results.find(fn);\n    };\n    /**\n     * See\n     * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n     */\n    /**\n       * See\n       * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n       */\n    QueryList.prototype.reduce = /**\n       * See\n       * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n       */\n    function (fn, init) {\n        return this._results.reduce(fn, init);\n    };\n    /**\n     * See\n     * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n     */\n    /**\n       * See\n       * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n       */\n    QueryList.prototype.forEach = /**\n       * See\n       * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n       */\n    function (fn) { this._results.forEach(fn); };\n    /**\n     * See\n     * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n     */\n    /**\n       * See\n       * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n       */\n    QueryList.prototype.some = /**\n       * See\n       * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n       */\n    function (fn) {\n        return this._results.some(fn);\n    };\n    QueryList.prototype.toArray = function () { return this._results.slice(); };\n    QueryList.prototype[getSymbolIterator()] = function () { return this._results[getSymbolIterator()](); };\n    QueryList.prototype.toString = function () { return this._results.toString(); };\n    QueryList.prototype.reset = function (res) {\n        this._results = flatten$2(res);\n        this.dirty = false;\n        this.length = this._results.length;\n        this.last = this._results[this.length - 1];\n        this.first = this._results[0];\n    };\n    QueryList.prototype.notifyOnChanges = function () { this.changes.emit(this); };\n    /** internal */\n    /** internal */\n    QueryList.prototype.setDirty = /** internal */\n    function () { this.dirty = true; };\n    /** internal */\n    /** internal */\n    QueryList.prototype.destroy = /** internal */\n    function () {\n        this.changes.complete();\n        this.changes.unsubscribe();\n    };\n    return QueryList;\n}());\nfunction flatten$2(list) {\n    return list.reduce(function (flat, item) {\n        var flatItem = Array.isArray(item) ? flatten$2(item) : item;\n        return flat.concat(flatItem);\n    }, []);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Represents an Embedded Template that can be used to instantiate Embedded Views.\n *\n * You can access a `TemplateRef`, in two ways. Via a directive placed on a `<ng-template>` element\n * (or directive prefixed with `*`) and have the `TemplateRef` for this Embedded View injected into\n * the constructor of the directive using the `TemplateRef` Token. Alternatively you can query for\n * the `TemplateRef` from a Component or a Directive via {@link Query}.\n *\n * To instantiate Embedded Views based on a Template, use {@link ViewContainerRef#\n * createEmbeddedView}, which will create the View and attach it to the View Container.\n *\n */\nvar TemplateRef = /** @class */ (function () {\n    function TemplateRef() {\n    }\n    return TemplateRef;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Represents a container where one or more Views can be attached.\n *\n * The container can contain two kinds of Views. Host Views, created by instantiating a\n * {@link Component} via {@link #createComponent}, and Embedded Views, created by instantiating an\n * {@link TemplateRef Embedded Template} via {@link #createEmbeddedView}.\n *\n * The location of the View Container within the containing View is specified by the Anchor\n * `element`. Each View Container can have only one Anchor Element and each Anchor Element can only\n * have a single View Container.\n *\n * Root elements of Views attached to this container become siblings of the Anchor Element in\n * the Rendered View.\n *\n * To access a `ViewContainerRef` of an Element, you can either place a {@link Directive} injected\n * with `ViewContainerRef` on the Element, or you obtain it via a {@link ViewChild} query.\n *\n */\nvar ViewContainerRef = /** @class */ (function () {\n    function ViewContainerRef() {\n    }\n    return ViewContainerRef;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ChangeDetectorRef = /** @class */ (function () {\n    function ChangeDetectorRef() {\n    }\n    return ChangeDetectorRef;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ViewRef = /** @class */ (function (_super) {\n    __extends(ViewRef, _super);\n    function ViewRef() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return ViewRef;\n}(ChangeDetectorRef));\n/**\n * Represents an Angular View.\n *\n * <!-- TODO: move the next two paragraphs to the dev guide -->\n * A View is a fundamental building block of the application UI. It is the smallest grouping of\n * Elements which are created and destroyed together.\n *\n * Properties of elements in a View can change, but the structure (number and order) of elements in\n * a View cannot. Changing the structure of Elements can only be done by inserting, moving or\n * removing nested Views via a {@link ViewContainerRef}. Each View can contain many View Containers.\n * <!-- /TODO -->\n *\n * ### Example\n *\n * Given this template...\n *\n * ```\n * Count: {{items.length}}\n * <ul>\n *   <li *ngFor=\"let  item of items\">{{item}}</li>\n * </ul>\n * ```\n *\n * We have two {@link TemplateRef}s:\n *\n * Outer {@link TemplateRef}:\n * ```\n * Count: {{items.length}}\n * <ul>\n *   <ng-template ngFor let-item [ngForOf]=\"items\"></ng-template>\n * </ul>\n * ```\n *\n * Inner {@link TemplateRef}:\n * ```\n *   <li>{{item}}</li>\n * ```\n *\n * Notice that the original template is broken down into two separate {@link TemplateRef}s.\n *\n * The outer/inner {@link TemplateRef}s are then assembled into views like so:\n *\n * ```\n * <!-- ViewRef: outer-0 -->\n * Count: 2\n * <ul>\n *   <ng-template view-container-ref></ng-template>\n *   <!-- ViewRef: inner-1 --><li>first</li><!-- /ViewRef: inner-1 -->\n *   <!-- ViewRef: inner-2 --><li>second</li><!-- /ViewRef: inner-2 -->\n * </ul>\n * <!-- /ViewRef: outer-0 -->\n * ```\n * @experimental\n */\nvar EmbeddedViewRef = /** @class */ (function (_super) {\n    __extends(EmbeddedViewRef, _super);\n    function EmbeddedViewRef() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return EmbeddedViewRef;\n}(ViewRef));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar EventListener = /** @class */ (function () {\n    function EventListener(name, callback) {\n        this.name = name;\n        this.callback = callback;\n    }\n    return EventListener;\n}());\n/**\n * @experimental All debugging apis are currently experimental.\n */\nvar DebugNode = /** @class */ (function () {\n    function DebugNode(nativeNode, parent, _debugContext) {\n        this._debugContext = _debugContext;\n        this.nativeNode = nativeNode;\n        if (parent && parent instanceof DebugElement) {\n            parent.addChild(this);\n        }\n        else {\n            this.parent = null;\n        }\n        this.listeners = [];\n    }\n    Object.defineProperty(DebugNode.prototype, \"injector\", {\n        get: function () { return this._debugContext.injector; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugNode.prototype, \"componentInstance\", {\n        get: function () { return this._debugContext.component; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugNode.prototype, \"context\", {\n        get: function () { return this._debugContext.context; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugNode.prototype, \"references\", {\n        get: function () { return this._debugContext.references; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugNode.prototype, \"providerTokens\", {\n        get: function () { return this._debugContext.providerTokens; },\n        enumerable: true,\n        configurable: true\n    });\n    return DebugNode;\n}());\n/**\n * @experimental All debugging apis are currently experimental.\n */\nvar DebugElement = /** @class */ (function (_super) {\n    __extends(DebugElement, _super);\n    function DebugElement(nativeNode, parent, _debugContext) {\n        var _this = _super.call(this, nativeNode, parent, _debugContext) || this;\n        _this.properties = {};\n        _this.attributes = {};\n        _this.classes = {};\n        _this.styles = {};\n        _this.childNodes = [];\n        _this.nativeElement = nativeNode;\n        return _this;\n    }\n    DebugElement.prototype.addChild = function (child) {\n        if (child) {\n            this.childNodes.push(child);\n            child.parent = this;\n        }\n    };\n    DebugElement.prototype.removeChild = function (child) {\n        var childIndex = this.childNodes.indexOf(child);\n        if (childIndex !== -1) {\n            child.parent = null;\n            this.childNodes.splice(childIndex, 1);\n        }\n    };\n    DebugElement.prototype.insertChildrenAfter = function (child, newChildren) {\n        var _this = this;\n        var siblingIndex = this.childNodes.indexOf(child);\n        if (siblingIndex !== -1) {\n            (_a = this.childNodes).splice.apply(_a, __spread([siblingIndex + 1, 0], newChildren));\n            newChildren.forEach(function (c) {\n                if (c.parent) {\n                    c.parent.removeChild(c);\n                }\n                c.parent = _this;\n            });\n        }\n        var _a;\n    };\n    DebugElement.prototype.insertBefore = function (refChild, newChild) {\n        var refIndex = this.childNodes.indexOf(refChild);\n        if (refIndex === -1) {\n            this.addChild(newChild);\n        }\n        else {\n            if (newChild.parent) {\n                newChild.parent.removeChild(newChild);\n            }\n            newChild.parent = this;\n            this.childNodes.splice(refIndex, 0, newChild);\n        }\n    };\n    DebugElement.prototype.query = function (predicate) {\n        var results = this.queryAll(predicate);\n        return results[0] || null;\n    };\n    DebugElement.prototype.queryAll = function (predicate) {\n        var matches = [];\n        _queryElementChildren(this, predicate, matches);\n        return matches;\n    };\n    DebugElement.prototype.queryAllNodes = function (predicate) {\n        var matches = [];\n        _queryNodeChildren(this, predicate, matches);\n        return matches;\n    };\n    Object.defineProperty(DebugElement.prototype, \"children\", {\n        get: function () {\n            return this.childNodes.filter(function (node) { return node instanceof DebugElement; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DebugElement.prototype.triggerEventHandler = function (eventName, eventObj) {\n        this.listeners.forEach(function (listener) {\n            if (listener.name == eventName) {\n                listener.callback(eventObj);\n            }\n        });\n    };\n    return DebugElement;\n}(DebugNode));\n/**\n * @experimental\n */\n\nfunction _queryElementChildren(element, predicate, matches) {\n    element.childNodes.forEach(function (node) {\n        if (node instanceof DebugElement) {\n            if (predicate(node)) {\n                matches.push(node);\n            }\n            _queryElementChildren(node, predicate, matches);\n        }\n    });\n}\nfunction _queryNodeChildren(parentNode, predicate, matches) {\n    if (parentNode instanceof DebugElement) {\n        parentNode.childNodes.forEach(function (node) {\n            if (predicate(node)) {\n                matches.push(node);\n            }\n            if (node instanceof DebugElement) {\n                _queryNodeChildren(node, predicate, matches);\n            }\n        });\n    }\n}\n// Need to keep the nodes in a global Map so that multiple angular apps are supported.\nvar _nativeNodeToDebugNode = new Map();\n/**\n * @experimental\n */\nfunction getDebugNode(nativeNode) {\n    return _nativeNodeToDebugNode.get(nativeNode) || null;\n}\n\nfunction indexDebugNode(node) {\n    _nativeNodeToDebugNode.set(node.nativeNode, node);\n}\nfunction removeDebugNodeFromIndex(node) {\n    _nativeNodeToDebugNode.delete(node.nativeNode);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction devModeEqual(a, b) {\n    var isListLikeIterableA = isListLikeIterable(a);\n    var isListLikeIterableB = isListLikeIterable(b);\n    if (isListLikeIterableA && isListLikeIterableB) {\n        return areIterablesEqual(a, b, devModeEqual);\n    }\n    else {\n        var isAObject = a && (typeof a === 'object' || typeof a === 'function');\n        var isBObject = b && (typeof b === 'object' || typeof b === 'function');\n        if (!isListLikeIterableA && isAObject && !isListLikeIterableB && isBObject) {\n            return true;\n        }\n        else {\n            return looseIdentical(a, b);\n        }\n    }\n}\n/**\n * Indicates that the result of a {@link Pipe} transformation has changed even though the\n * reference has not changed.\n *\n * Wrapped values are unwrapped automatically during the change detection, and the unwrapped value\n * is stored.\n *\n * Example:\n *\n * ```\n * if (this._latestValue === this._latestReturnedValue) {\n *    return this._latestReturnedValue;\n *  } else {\n *    this._latestReturnedValue = this._latestValue;\n *    return WrappedValue.wrap(this._latestValue); // this will force update\n *  }\n * ```\n *\n */\nvar WrappedValue = /** @class */ (function () {\n    function WrappedValue(value) {\n        this.wrapped = value;\n    }\n    /** Creates a wrapped value. */\n    /** Creates a wrapped value. */\n    WrappedValue.wrap = /** Creates a wrapped value. */\n    function (value) { return new WrappedValue(value); };\n    /**\n     * Returns the underlying value of a wrapped value.\n     * Returns the given `value` when it is not wrapped.\n     **/\n    /**\n       * Returns the underlying value of a wrapped value.\n       * Returns the given `value` when it is not wrapped.\n       **/\n    WrappedValue.unwrap = /**\n       * Returns the underlying value of a wrapped value.\n       * Returns the given `value` when it is not wrapped.\n       **/\n    function (value) { return WrappedValue.isWrapped(value) ? value.wrapped : value; };\n    /** Returns true if `value` is a wrapped value. */\n    /** Returns true if `value` is a wrapped value. */\n    WrappedValue.isWrapped = /** Returns true if `value` is a wrapped value. */\n    function (value) { return value instanceof WrappedValue; };\n    return WrappedValue;\n}());\n/**\n * Represents a basic change from a previous to a new value.\n *\n */\nvar SimpleChange = /** @class */ (function () {\n    function SimpleChange(previousValue, currentValue, firstChange) {\n        this.previousValue = previousValue;\n        this.currentValue = currentValue;\n        this.firstChange = firstChange;\n    }\n    /**\n     * Check whether the new value is the first value assigned.\n     */\n    /**\n       * Check whether the new value is the first value assigned.\n       */\n    SimpleChange.prototype.isFirstChange = /**\n       * Check whether the new value is the first value assigned.\n       */\n    function () { return this.firstChange; };\n    return SimpleChange;\n}());\nfunction isListLikeIterable(obj) {\n    if (!isJsObject(obj))\n        return false;\n    return Array.isArray(obj) ||\n        (!(obj instanceof Map) && // JS Map are iterables but return entries as [k, v]\n            // JS Map are iterables but return entries as [k, v]\n            getSymbolIterator() in obj); // JS Iterable have a Symbol.iterator prop\n}\nfunction areIterablesEqual(a, b, comparator) {\n    var iterator1 = a[getSymbolIterator()]();\n    var iterator2 = b[getSymbolIterator()]();\n    while (true) {\n        var item1 = iterator1.next();\n        var item2 = iterator2.next();\n        if (item1.done && item2.done)\n            return true;\n        if (item1.done || item2.done)\n            return false;\n        if (!comparator(item1.value, item2.value))\n            return false;\n    }\n}\nfunction iterateListLike(obj, fn) {\n    if (Array.isArray(obj)) {\n        for (var i = 0; i < obj.length; i++) {\n            fn(obj[i]);\n        }\n    }\n    else {\n        var iterator = obj[getSymbolIterator()]();\n        var item = void 0;\n        while (!((item = iterator.next()).done)) {\n            fn(item.value);\n        }\n    }\n}\nfunction isJsObject(o) {\n    return o !== null && (typeof o === 'function' || typeof o === 'object');\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DefaultIterableDifferFactory = /** @class */ (function () {\n    function DefaultIterableDifferFactory() {\n    }\n    DefaultIterableDifferFactory.prototype.supports = function (obj) { return isListLikeIterable(obj); };\n    DefaultIterableDifferFactory.prototype.create = function (trackByFn) {\n        return new DefaultIterableDiffer(trackByFn);\n    };\n    return DefaultIterableDifferFactory;\n}());\nvar trackByIdentity = function (index, item) { return item; };\n/**\n * @deprecated v4.0.0 - Should not be part of public API.\n */\nvar DefaultIterableDiffer = /** @class */ (function () {\n    function DefaultIterableDiffer(trackByFn) {\n        this.length = 0;\n        // Keeps track of the used records at any point in time (during & across `_check()` calls)\n        this._linkedRecords = null;\n        // Keeps track of the removed records at any point in time during `_check()` calls.\n        this._unlinkedRecords = null;\n        this._previousItHead = null;\n        this._itHead = null;\n        this._itTail = null;\n        this._additionsHead = null;\n        this._additionsTail = null;\n        this._movesHead = null;\n        this._movesTail = null;\n        this._removalsHead = null;\n        this._removalsTail = null;\n        // Keeps track of records where custom track by is the same, but item identity has changed\n        this._identityChangesHead = null;\n        this._identityChangesTail = null;\n        this._trackByFn = trackByFn || trackByIdentity;\n    }\n    DefaultIterableDiffer.prototype.forEachItem = function (fn) {\n        var record;\n        for (record = this._itHead; record !== null; record = record._next) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachOperation = function (fn) {\n        var nextIt = this._itHead;\n        var nextRemove = this._removalsHead;\n        var addRemoveOffset = 0;\n        var moveOffsets = null;\n        while (nextIt || nextRemove) {\n            // Figure out which is the next record to process\n            // Order: remove, add, move\n            var record = !nextRemove ||\n                nextIt &&\n                    (nextIt.currentIndex) <\n                        getPreviousIndex(nextRemove, addRemoveOffset, moveOffsets) ?\n                nextIt :\n                nextRemove;\n            var adjPreviousIndex = getPreviousIndex(record, addRemoveOffset, moveOffsets);\n            var currentIndex = record.currentIndex;\n            // consume the item, and adjust the addRemoveOffset and update moveDistance if necessary\n            if (record === nextRemove) {\n                addRemoveOffset--;\n                nextRemove = nextRemove._nextRemoved;\n            }\n            else {\n                nextIt = nextIt._next;\n                if (record.previousIndex == null) {\n                    addRemoveOffset++;\n                }\n                else {\n                    // INVARIANT:  currentIndex < previousIndex\n                    if (!moveOffsets)\n                        moveOffsets = [];\n                    var localMovePreviousIndex = adjPreviousIndex - addRemoveOffset;\n                    var localCurrentIndex = (currentIndex) - addRemoveOffset;\n                    if (localMovePreviousIndex != localCurrentIndex) {\n                        for (var i = 0; i < localMovePreviousIndex; i++) {\n                            var offset = i < moveOffsets.length ? moveOffsets[i] : (moveOffsets[i] = 0);\n                            var index = offset + i;\n                            if (localCurrentIndex <= index && index < localMovePreviousIndex) {\n                                moveOffsets[i] = offset + 1;\n                            }\n                        }\n                        var previousIndex = record.previousIndex;\n                        moveOffsets[previousIndex] = localCurrentIndex - localMovePreviousIndex;\n                    }\n                }\n            }\n            if (adjPreviousIndex !== currentIndex) {\n                fn(record, adjPreviousIndex, currentIndex);\n            }\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachPreviousItem = function (fn) {\n        var record;\n        for (record = this._previousItHead; record !== null; record = record._nextPrevious) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachAddedItem = function (fn) {\n        var record;\n        for (record = this._additionsHead; record !== null; record = record._nextAdded) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachMovedItem = function (fn) {\n        var record;\n        for (record = this._movesHead; record !== null; record = record._nextMoved) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachRemovedItem = function (fn) {\n        var record;\n        for (record = this._removalsHead; record !== null; record = record._nextRemoved) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.forEachIdentityChange = function (fn) {\n        var record;\n        for (record = this._identityChangesHead; record !== null; record = record._nextIdentityChange) {\n            fn(record);\n        }\n    };\n    DefaultIterableDiffer.prototype.diff = function (collection) {\n        if (collection == null)\n            collection = [];\n        if (!isListLikeIterable(collection)) {\n            throw new Error(\"Error trying to diff '\" + stringify$1(collection) + \"'. Only arrays and iterables are allowed\");\n        }\n        if (this.check(collection)) {\n            return this;\n        }\n        else {\n            return null;\n        }\n    };\n    DefaultIterableDiffer.prototype.onDestroy = function () { };\n    DefaultIterableDiffer.prototype.check = function (collection) {\n        var _this = this;\n        this._reset();\n        var record = this._itHead;\n        var mayBeDirty = false;\n        var index;\n        var item;\n        var itemTrackBy;\n        if (Array.isArray(collection)) {\n            this.length = collection.length;\n            for (var index_1 = 0; index_1 < this.length; index_1++) {\n                item = collection[index_1];\n                itemTrackBy = this._trackByFn(index_1, item);\n                if (record === null || !looseIdentical(record.trackById, itemTrackBy)) {\n                    record = this._mismatch(record, item, itemTrackBy, index_1);\n                    mayBeDirty = true;\n                }\n                else {\n                    if (mayBeDirty) {\n                        // TODO(misko): can we limit this to duplicates only?\n                        record = this._verifyReinsertion(record, item, itemTrackBy, index_1);\n                    }\n                    if (!looseIdentical(record.item, item))\n                        this._addIdentityChange(record, item);\n                }\n                record = record._next;\n            }\n        }\n        else {\n            index = 0;\n            iterateListLike(collection, function (item) {\n                itemTrackBy = _this._trackByFn(index, item);\n                if (record === null || !looseIdentical(record.trackById, itemTrackBy)) {\n                    record = _this._mismatch(record, item, itemTrackBy, index);\n                    mayBeDirty = true;\n                }\n                else {\n                    if (mayBeDirty) {\n                        // TODO(misko): can we limit this to duplicates only?\n                        record = _this._verifyReinsertion(record, item, itemTrackBy, index);\n                    }\n                    if (!looseIdentical(record.item, item))\n                        _this._addIdentityChange(record, item);\n                }\n                record = record._next;\n                index++;\n            });\n            this.length = index;\n        }\n        this._truncate(record);\n        this.collection = collection;\n        return this.isDirty;\n    };\n    Object.defineProperty(DefaultIterableDiffer.prototype, \"isDirty\", {\n        /* CollectionChanges is considered dirty if it has any additions, moves, removals, or identity\n         * changes.\n         */\n        get: /* CollectionChanges is considered dirty if it has any additions, moves, removals, or identity\n           * changes.\n           */\n        function () {\n            return this._additionsHead !== null || this._movesHead !== null ||\n                this._removalsHead !== null || this._identityChangesHead !== null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Reset the state of the change objects to show no changes. This means set previousKey to\n     * currentKey, and clear all of the queues (additions, moves, removals).\n     * Set the previousIndexes of moved and added items to their currentIndexes\n     * Reset the list of additions, moves and removals\n     *\n     * @internal\n     */\n    /**\n       * Reset the state of the change objects to show no changes. This means set previousKey to\n       * currentKey, and clear all of the queues (additions, moves, removals).\n       * Set the previousIndexes of moved and added items to their currentIndexes\n       * Reset the list of additions, moves and removals\n       *\n       * @internal\n       */\n    DefaultIterableDiffer.prototype._reset = /**\n       * Reset the state of the change objects to show no changes. This means set previousKey to\n       * currentKey, and clear all of the queues (additions, moves, removals).\n       * Set the previousIndexes of moved and added items to their currentIndexes\n       * Reset the list of additions, moves and removals\n       *\n       * @internal\n       */\n    function () {\n        if (this.isDirty) {\n            var record = void 0;\n            var nextRecord = void 0;\n            for (record = this._previousItHead = this._itHead; record !== null; record = record._next) {\n                record._nextPrevious = record._next;\n            }\n            for (record = this._additionsHead; record !== null; record = record._nextAdded) {\n                record.previousIndex = record.currentIndex;\n            }\n            this._additionsHead = this._additionsTail = null;\n            for (record = this._movesHead; record !== null; record = nextRecord) {\n                record.previousIndex = record.currentIndex;\n                nextRecord = record._nextMoved;\n            }\n            this._movesHead = this._movesTail = null;\n            this._removalsHead = this._removalsTail = null;\n            this._identityChangesHead = this._identityChangesTail = null;\n            // TODO(vicb): when assert gets supported\n            // assert(!this.isDirty);\n        }\n    };\n    /**\n     * This is the core function which handles differences between collections.\n     *\n     * - `record` is the record which we saw at this position last time. If null then it is a new\n     *   item.\n     * - `item` is the current item in the collection\n     * - `index` is the position of the item in the collection\n     *\n     * @internal\n     */\n    /**\n       * This is the core function which handles differences between collections.\n       *\n       * - `record` is the record which we saw at this position last time. If null then it is a new\n       *   item.\n       * - `item` is the current item in the collection\n       * - `index` is the position of the item in the collection\n       *\n       * @internal\n       */\n    DefaultIterableDiffer.prototype._mismatch = /**\n       * This is the core function which handles differences between collections.\n       *\n       * - `record` is the record which we saw at this position last time. If null then it is a new\n       *   item.\n       * - `item` is the current item in the collection\n       * - `index` is the position of the item in the collection\n       *\n       * @internal\n       */\n    function (record, item, itemTrackBy, index) {\n        // The previous record after which we will append the current one.\n        var previousRecord;\n        if (record === null) {\n            previousRecord = this._itTail;\n        }\n        else {\n            previousRecord = record._prev;\n            // Remove the record from the collection since we know it does not match the item.\n            this._remove(record);\n        }\n        // Attempt to see if we have seen the item before.\n        record = this._linkedRecords === null ? null : this._linkedRecords.get(itemTrackBy, index);\n        if (record !== null) {\n            // We have seen this before, we need to move it forward in the collection.\n            // But first we need to check if identity changed, so we can update in view if necessary\n            if (!looseIdentical(record.item, item))\n                this._addIdentityChange(record, item);\n            this._moveAfter(record, previousRecord, index);\n        }\n        else {\n            // Never seen it, check evicted list.\n            record = this._unlinkedRecords === null ? null : this._unlinkedRecords.get(itemTrackBy, null);\n            if (record !== null) {\n                // It is an item which we have evicted earlier: reinsert it back into the list.\n                // But first we need to check if identity changed, so we can update in view if necessary\n                if (!looseIdentical(record.item, item))\n                    this._addIdentityChange(record, item);\n                this._reinsertAfter(record, previousRecord, index);\n            }\n            else {\n                // It is a new item: add it.\n                record =\n                    this._addAfter(new IterableChangeRecord_(item, itemTrackBy), previousRecord, index);\n            }\n        }\n        return record;\n    };\n    /**\n     * This check is only needed if an array contains duplicates. (Short circuit of nothing dirty)\n     *\n     * Use case: `[a, a]` => `[b, a, a]`\n     *\n     * If we did not have this check then the insertion of `b` would:\n     *   1) evict first `a`\n     *   2) insert `b` at `0` index.\n     *   3) leave `a` at index `1` as is. <-- this is wrong!\n     *   3) reinsert `a` at index 2. <-- this is wrong!\n     *\n     * The correct behavior is:\n     *   1) evict first `a`\n     *   2) insert `b` at `0` index.\n     *   3) reinsert `a` at index 1.\n     *   3) move `a` at from `1` to `2`.\n     *\n     *\n     * Double check that we have not evicted a duplicate item. We need to check if the item type may\n     * have already been removed:\n     * The insertion of b will evict the first 'a'. If we don't reinsert it now it will be reinserted\n     * at the end. Which will show up as the two 'a's switching position. This is incorrect, since a\n     * better way to think of it is as insert of 'b' rather then switch 'a' with 'b' and then add 'a'\n     * at the end.\n     *\n     * @internal\n     */\n    /**\n       * This check is only needed if an array contains duplicates. (Short circuit of nothing dirty)\n       *\n       * Use case: `[a, a]` => `[b, a, a]`\n       *\n       * If we did not have this check then the insertion of `b` would:\n       *   1) evict first `a`\n       *   2) insert `b` at `0` index.\n       *   3) leave `a` at index `1` as is. <-- this is wrong!\n       *   3) reinsert `a` at index 2. <-- this is wrong!\n       *\n       * The correct behavior is:\n       *   1) evict first `a`\n       *   2) insert `b` at `0` index.\n       *   3) reinsert `a` at index 1.\n       *   3) move `a` at from `1` to `2`.\n       *\n       *\n       * Double check that we have not evicted a duplicate item. We need to check if the item type may\n       * have already been removed:\n       * The insertion of b will evict the first 'a'. If we don't reinsert it now it will be reinserted\n       * at the end. Which will show up as the two 'a's switching position. This is incorrect, since a\n       * better way to think of it is as insert of 'b' rather then switch 'a' with 'b' and then add 'a'\n       * at the end.\n       *\n       * @internal\n       */\n    DefaultIterableDiffer.prototype._verifyReinsertion = /**\n       * This check is only needed if an array contains duplicates. (Short circuit of nothing dirty)\n       *\n       * Use case: `[a, a]` => `[b, a, a]`\n       *\n       * If we did not have this check then the insertion of `b` would:\n       *   1) evict first `a`\n       *   2) insert `b` at `0` index.\n       *   3) leave `a` at index `1` as is. <-- this is wrong!\n       *   3) reinsert `a` at index 2. <-- this is wrong!\n       *\n       * The correct behavior is:\n       *   1) evict first `a`\n       *   2) insert `b` at `0` index.\n       *   3) reinsert `a` at index 1.\n       *   3) move `a` at from `1` to `2`.\n       *\n       *\n       * Double check that we have not evicted a duplicate item. We need to check if the item type may\n       * have already been removed:\n       * The insertion of b will evict the first 'a'. If we don't reinsert it now it will be reinserted\n       * at the end. Which will show up as the two 'a's switching position. This is incorrect, since a\n       * better way to think of it is as insert of 'b' rather then switch 'a' with 'b' and then add 'a'\n       * at the end.\n       *\n       * @internal\n       */\n    function (record, item, itemTrackBy, index) {\n        var reinsertRecord = this._unlinkedRecords === null ? null : this._unlinkedRecords.get(itemTrackBy, null);\n        if (reinsertRecord !== null) {\n            record = this._reinsertAfter(reinsertRecord, (record._prev), index);\n        }\n        else if (record.currentIndex != index) {\n            record.currentIndex = index;\n            this._addToMoves(record, index);\n        }\n        return record;\n    };\n    /**\n     * Get rid of any excess {@link IterableChangeRecord_}s from the previous collection\n     *\n     * - `record` The first excess {@link IterableChangeRecord_}.\n     *\n     * @internal\n     */\n    /**\n       * Get rid of any excess {@link IterableChangeRecord_}s from the previous collection\n       *\n       * - `record` The first excess {@link IterableChangeRecord_}.\n       *\n       * @internal\n       */\n    DefaultIterableDiffer.prototype._truncate = /**\n       * Get rid of any excess {@link IterableChangeRecord_}s from the previous collection\n       *\n       * - `record` The first excess {@link IterableChangeRecord_}.\n       *\n       * @internal\n       */\n    function (record) {\n        // Anything after that needs to be removed;\n        while (record !== null) {\n            var nextRecord = record._next;\n            this._addToRemovals(this._unlink(record));\n            record = nextRecord;\n        }\n        if (this._unlinkedRecords !== null) {\n            this._unlinkedRecords.clear();\n        }\n        if (this._additionsTail !== null) {\n            this._additionsTail._nextAdded = null;\n        }\n        if (this._movesTail !== null) {\n            this._movesTail._nextMoved = null;\n        }\n        if (this._itTail !== null) {\n            this._itTail._next = null;\n        }\n        if (this._removalsTail !== null) {\n            this._removalsTail._nextRemoved = null;\n        }\n        if (this._identityChangesTail !== null) {\n            this._identityChangesTail._nextIdentityChange = null;\n        }\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._reinsertAfter = /** @internal */\n    function (record, prevRecord, index) {\n        if (this._unlinkedRecords !== null) {\n            this._unlinkedRecords.remove(record);\n        }\n        var prev = record._prevRemoved;\n        var next = record._nextRemoved;\n        if (prev === null) {\n            this._removalsHead = next;\n        }\n        else {\n            prev._nextRemoved = next;\n        }\n        if (next === null) {\n            this._removalsTail = prev;\n        }\n        else {\n            next._prevRemoved = prev;\n        }\n        this._insertAfter(record, prevRecord, index);\n        this._addToMoves(record, index);\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._moveAfter = /** @internal */\n    function (record, prevRecord, index) {\n        this._unlink(record);\n        this._insertAfter(record, prevRecord, index);\n        this._addToMoves(record, index);\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._addAfter = /** @internal */\n    function (record, prevRecord, index) {\n        this._insertAfter(record, prevRecord, index);\n        if (this._additionsTail === null) {\n            // TODO(vicb):\n            // assert(this._additionsHead === null);\n            this._additionsTail = this._additionsHead = record;\n        }\n        else {\n            // TODO(vicb):\n            // assert(_additionsTail._nextAdded === null);\n            // assert(record._nextAdded === null);\n            this._additionsTail = this._additionsTail._nextAdded = record;\n        }\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._insertAfter = /** @internal */\n    function (record, prevRecord, index) {\n        // TODO(vicb):\n        // assert(record != prevRecord);\n        // assert(record._next === null);\n        // assert(record._prev === null);\n        var next = prevRecord === null ? this._itHead : prevRecord._next;\n        // TODO(vicb):\n        // assert(next != record);\n        // assert(prevRecord != record);\n        record._next = next;\n        record._prev = prevRecord;\n        if (next === null) {\n            this._itTail = record;\n        }\n        else {\n            next._prev = record;\n        }\n        if (prevRecord === null) {\n            this._itHead = record;\n        }\n        else {\n            prevRecord._next = record;\n        }\n        if (this._linkedRecords === null) {\n            this._linkedRecords = new _DuplicateMap();\n        }\n        this._linkedRecords.put(record);\n        record.currentIndex = index;\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._remove = /** @internal */\n    function (record) {\n        return this._addToRemovals(this._unlink(record));\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._unlink = /** @internal */\n    function (record) {\n        if (this._linkedRecords !== null) {\n            this._linkedRecords.remove(record);\n        }\n        var prev = record._prev;\n        var next = record._next;\n        // TODO(vicb):\n        // assert((record._prev = null) === null);\n        // assert((record._next = null) === null);\n        if (prev === null) {\n            this._itHead = next;\n        }\n        else {\n            prev._next = next;\n        }\n        if (next === null) {\n            this._itTail = prev;\n        }\n        else {\n            next._prev = prev;\n        }\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._addToMoves = /** @internal */\n    function (record, toIndex) {\n        // TODO(vicb):\n        // assert(record._nextMoved === null);\n        if (record.previousIndex === toIndex) {\n            return record;\n        }\n        if (this._movesTail === null) {\n            // TODO(vicb):\n            // assert(_movesHead === null);\n            this._movesTail = this._movesHead = record;\n        }\n        else {\n            // TODO(vicb):\n            // assert(_movesTail._nextMoved === null);\n            this._movesTail = this._movesTail._nextMoved = record;\n        }\n        return record;\n    };\n    DefaultIterableDiffer.prototype._addToRemovals = function (record) {\n        if (this._unlinkedRecords === null) {\n            this._unlinkedRecords = new _DuplicateMap();\n        }\n        this._unlinkedRecords.put(record);\n        record.currentIndex = null;\n        record._nextRemoved = null;\n        if (this._removalsTail === null) {\n            // TODO(vicb):\n            // assert(_removalsHead === null);\n            this._removalsTail = this._removalsHead = record;\n            record._prevRemoved = null;\n        }\n        else {\n            // TODO(vicb):\n            // assert(_removalsTail._nextRemoved === null);\n            // assert(record._nextRemoved === null);\n            record._prevRemoved = this._removalsTail;\n            this._removalsTail = this._removalsTail._nextRemoved = record;\n        }\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultIterableDiffer.prototype._addIdentityChange = /** @internal */\n    function (record, item) {\n        record.item = item;\n        if (this._identityChangesTail === null) {\n            this._identityChangesTail = this._identityChangesHead = record;\n        }\n        else {\n            this._identityChangesTail = this._identityChangesTail._nextIdentityChange = record;\n        }\n        return record;\n    };\n    return DefaultIterableDiffer;\n}());\nvar IterableChangeRecord_ = /** @class */ (function () {\n    function IterableChangeRecord_(item, trackById) {\n        this.item = item;\n        this.trackById = trackById;\n        this.currentIndex = null;\n        this.previousIndex = null;\n        /** @internal */\n        this._nextPrevious = null;\n        /** @internal */\n        this._prev = null;\n        /** @internal */\n        this._next = null;\n        /** @internal */\n        this._prevDup = null;\n        /** @internal */\n        this._nextDup = null;\n        /** @internal */\n        this._prevRemoved = null;\n        /** @internal */\n        this._nextRemoved = null;\n        /** @internal */\n        this._nextAdded = null;\n        /** @internal */\n        this._nextMoved = null;\n        /** @internal */\n        this._nextIdentityChange = null;\n    }\n    return IterableChangeRecord_;\n}());\n// A linked list of CollectionChangeRecords with the same IterableChangeRecord_.item\nvar _DuplicateItemRecordList = /** @class */ (function () {\n    function _DuplicateItemRecordList() {\n        /** @internal */\n        this._head = null;\n        /** @internal */\n        this._tail = null;\n    }\n    /**\n     * Append the record to the list of duplicates.\n     *\n     * Note: by design all records in the list of duplicates hold the same value in record.item.\n     */\n    /**\n       * Append the record to the list of duplicates.\n       *\n       * Note: by design all records in the list of duplicates hold the same value in record.item.\n       */\n    _DuplicateItemRecordList.prototype.add = /**\n       * Append the record to the list of duplicates.\n       *\n       * Note: by design all records in the list of duplicates hold the same value in record.item.\n       */\n    function (record) {\n        if (this._head === null) {\n            this._head = this._tail = record;\n            record._nextDup = null;\n            record._prevDup = null;\n        }\n        else {\n            // TODO(vicb):\n            // assert(record.item ==  _head.item ||\n            //       record.item is num && record.item.isNaN && _head.item is num && _head.item.isNaN);\n            // TODO(vicb):\n            // assert(record.item ==  _head.item ||\n            //       record.item is num && record.item.isNaN && _head.item is num && _head.item.isNaN);\n            this._tail._nextDup = record;\n            record._prevDup = this._tail;\n            record._nextDup = null;\n            this._tail = record;\n        }\n    };\n    // Returns a IterableChangeRecord_ having IterableChangeRecord_.trackById == trackById and\n    // IterableChangeRecord_.currentIndex >= atOrAfterIndex\n    // Returns a IterableChangeRecord_ having IterableChangeRecord_.trackById == trackById and\n    // IterableChangeRecord_.currentIndex >= atOrAfterIndex\n    _DuplicateItemRecordList.prototype.get = \n    // Returns a IterableChangeRecord_ having IterableChangeRecord_.trackById == trackById and\n    // IterableChangeRecord_.currentIndex >= atOrAfterIndex\n    function (trackById, atOrAfterIndex) {\n        var record;\n        for (record = this._head; record !== null; record = record._nextDup) {\n            if ((atOrAfterIndex === null || atOrAfterIndex <= (record.currentIndex)) &&\n                looseIdentical(record.trackById, trackById)) {\n                return record;\n            }\n        }\n        return null;\n    };\n    /**\n     * Remove one {@link IterableChangeRecord_} from the list of duplicates.\n     *\n     * Returns whether the list of duplicates is empty.\n     */\n    /**\n       * Remove one {@link IterableChangeRecord_} from the list of duplicates.\n       *\n       * Returns whether the list of duplicates is empty.\n       */\n    _DuplicateItemRecordList.prototype.remove = /**\n       * Remove one {@link IterableChangeRecord_} from the list of duplicates.\n       *\n       * Returns whether the list of duplicates is empty.\n       */\n    function (record) {\n        // TODO(vicb):\n        // assert(() {\n        //  // verify that the record being removed is in the list.\n        //  for (IterableChangeRecord_ cursor = _head; cursor != null; cursor = cursor._nextDup) {\n        //    if (identical(cursor, record)) return true;\n        //  }\n        //  return false;\n        //});\n        var prev = record._prevDup;\n        var next = record._nextDup;\n        if (prev === null) {\n            this._head = next;\n        }\n        else {\n            prev._nextDup = next;\n        }\n        if (next === null) {\n            this._tail = prev;\n        }\n        else {\n            next._prevDup = prev;\n        }\n        return this._head === null;\n    };\n    return _DuplicateItemRecordList;\n}());\nvar _DuplicateMap = /** @class */ (function () {\n    function _DuplicateMap() {\n        this.map = new Map();\n    }\n    _DuplicateMap.prototype.put = function (record) {\n        var key = record.trackById;\n        var duplicates = this.map.get(key);\n        if (!duplicates) {\n            duplicates = new _DuplicateItemRecordList();\n            this.map.set(key, duplicates);\n        }\n        duplicates.add(record);\n    };\n    /**\n     * Retrieve the `value` using key. Because the IterableChangeRecord_ value may be one which we\n     * have already iterated over, we use the `atOrAfterIndex` to pretend it is not there.\n     *\n     * Use case: `[a, b, c, a, a]` if we are at index `3` which is the second `a` then asking if we\n     * have any more `a`s needs to return the second `a`.\n     */\n    /**\n       * Retrieve the `value` using key. Because the IterableChangeRecord_ value may be one which we\n       * have already iterated over, we use the `atOrAfterIndex` to pretend it is not there.\n       *\n       * Use case: `[a, b, c, a, a]` if we are at index `3` which is the second `a` then asking if we\n       * have any more `a`s needs to return the second `a`.\n       */\n    _DuplicateMap.prototype.get = /**\n       * Retrieve the `value` using key. Because the IterableChangeRecord_ value may be one which we\n       * have already iterated over, we use the `atOrAfterIndex` to pretend it is not there.\n       *\n       * Use case: `[a, b, c, a, a]` if we are at index `3` which is the second `a` then asking if we\n       * have any more `a`s needs to return the second `a`.\n       */\n    function (trackById, atOrAfterIndex) {\n        var key = trackById;\n        var recordList = this.map.get(key);\n        return recordList ? recordList.get(trackById, atOrAfterIndex) : null;\n    };\n    /**\n     * Removes a {@link IterableChangeRecord_} from the list of duplicates.\n     *\n     * The list of duplicates also is removed from the map if it gets empty.\n     */\n    /**\n       * Removes a {@link IterableChangeRecord_} from the list of duplicates.\n       *\n       * The list of duplicates also is removed from the map if it gets empty.\n       */\n    _DuplicateMap.prototype.remove = /**\n       * Removes a {@link IterableChangeRecord_} from the list of duplicates.\n       *\n       * The list of duplicates also is removed from the map if it gets empty.\n       */\n    function (record) {\n        var key = record.trackById;\n        var recordList = (this.map.get(key));\n        // Remove the list of duplicates when it gets empty\n        if (recordList.remove(record)) {\n            this.map.delete(key);\n        }\n        return record;\n    };\n    Object.defineProperty(_DuplicateMap.prototype, \"isEmpty\", {\n        get: function () { return this.map.size === 0; },\n        enumerable: true,\n        configurable: true\n    });\n    _DuplicateMap.prototype.clear = function () { this.map.clear(); };\n    return _DuplicateMap;\n}());\nfunction getPreviousIndex(item, addRemoveOffset, moveOffsets) {\n    var previousIndex = item.previousIndex;\n    if (previousIndex === null)\n        return previousIndex;\n    var moveOffset = 0;\n    if (moveOffsets && previousIndex < moveOffsets.length) {\n        moveOffset = moveOffsets[previousIndex];\n    }\n    return previousIndex + addRemoveOffset + moveOffset;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar DefaultKeyValueDifferFactory = /** @class */ (function () {\n    function DefaultKeyValueDifferFactory() {\n    }\n    DefaultKeyValueDifferFactory.prototype.supports = function (obj) { return obj instanceof Map || isJsObject(obj); };\n    DefaultKeyValueDifferFactory.prototype.create = function () { return new DefaultKeyValueDiffer(); };\n    return DefaultKeyValueDifferFactory;\n}());\nvar DefaultKeyValueDiffer = /** @class */ (function () {\n    function DefaultKeyValueDiffer() {\n        this._records = new Map();\n        this._mapHead = null;\n        // _appendAfter is used in the check loop\n        this._appendAfter = null;\n        this._previousMapHead = null;\n        this._changesHead = null;\n        this._changesTail = null;\n        this._additionsHead = null;\n        this._additionsTail = null;\n        this._removalsHead = null;\n        this._removalsTail = null;\n    }\n    Object.defineProperty(DefaultKeyValueDiffer.prototype, \"isDirty\", {\n        get: function () {\n            return this._additionsHead !== null || this._changesHead !== null ||\n                this._removalsHead !== null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DefaultKeyValueDiffer.prototype.forEachItem = function (fn) {\n        var record;\n        for (record = this._mapHead; record !== null; record = record._next) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.forEachPreviousItem = function (fn) {\n        var record;\n        for (record = this._previousMapHead; record !== null; record = record._nextPrevious) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.forEachChangedItem = function (fn) {\n        var record;\n        for (record = this._changesHead; record !== null; record = record._nextChanged) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.forEachAddedItem = function (fn) {\n        var record;\n        for (record = this._additionsHead; record !== null; record = record._nextAdded) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.forEachRemovedItem = function (fn) {\n        var record;\n        for (record = this._removalsHead; record !== null; record = record._nextRemoved) {\n            fn(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype.diff = function (map) {\n        if (!map) {\n            map = new Map();\n        }\n        else if (!(map instanceof Map || isJsObject(map))) {\n            throw new Error(\"Error trying to diff '\" + stringify$1(map) + \"'. Only maps and objects are allowed\");\n        }\n        return this.check(map) ? this : null;\n    };\n    DefaultKeyValueDiffer.prototype.onDestroy = function () { };\n    /**\n     * Check the current state of the map vs the previous.\n     * The algorithm is optimised for when the keys do no change.\n     */\n    /**\n       * Check the current state of the map vs the previous.\n       * The algorithm is optimised for when the keys do no change.\n       */\n    DefaultKeyValueDiffer.prototype.check = /**\n       * Check the current state of the map vs the previous.\n       * The algorithm is optimised for when the keys do no change.\n       */\n    function (map) {\n        var _this = this;\n        this._reset();\n        var insertBefore = this._mapHead;\n        this._appendAfter = null;\n        this._forEach(map, function (value, key) {\n            if (insertBefore && insertBefore.key === key) {\n                _this._maybeAddToChanges(insertBefore, value);\n                _this._appendAfter = insertBefore;\n                insertBefore = insertBefore._next;\n            }\n            else {\n                var record = _this._getOrCreateRecordForKey(key, value);\n                insertBefore = _this._insertBeforeOrAppend(insertBefore, record);\n            }\n        });\n        // Items remaining at the end of the list have been deleted\n        if (insertBefore) {\n            if (insertBefore._prev) {\n                insertBefore._prev._next = null;\n            }\n            this._removalsHead = insertBefore;\n            for (var record = insertBefore; record !== null; record = record._nextRemoved) {\n                if (record === this._mapHead) {\n                    this._mapHead = null;\n                }\n                this._records.delete(record.key);\n                record._nextRemoved = record._next;\n                record.previousValue = record.currentValue;\n                record.currentValue = null;\n                record._prev = null;\n                record._next = null;\n            }\n        }\n        // Make sure tails have no next records from previous runs\n        if (this._changesTail)\n            this._changesTail._nextChanged = null;\n        if (this._additionsTail)\n            this._additionsTail._nextAdded = null;\n        return this.isDirty;\n    };\n    /**\n     * Inserts a record before `before` or append at the end of the list when `before` is null.\n     *\n     * Notes:\n     * - This method appends at `this._appendAfter`,\n     * - This method updates `this._appendAfter`,\n     * - The return value is the new value for the insertion pointer.\n     */\n    /**\n       * Inserts a record before `before` or append at the end of the list when `before` is null.\n       *\n       * Notes:\n       * - This method appends at `this._appendAfter`,\n       * - This method updates `this._appendAfter`,\n       * - The return value is the new value for the insertion pointer.\n       */\n    DefaultKeyValueDiffer.prototype._insertBeforeOrAppend = /**\n       * Inserts a record before `before` or append at the end of the list when `before` is null.\n       *\n       * Notes:\n       * - This method appends at `this._appendAfter`,\n       * - This method updates `this._appendAfter`,\n       * - The return value is the new value for the insertion pointer.\n       */\n    function (before, record) {\n        if (before) {\n            var prev = before._prev;\n            record._next = before;\n            record._prev = prev;\n            before._prev = record;\n            if (prev) {\n                prev._next = record;\n            }\n            if (before === this._mapHead) {\n                this._mapHead = record;\n            }\n            this._appendAfter = before;\n            return before;\n        }\n        if (this._appendAfter) {\n            this._appendAfter._next = record;\n            record._prev = this._appendAfter;\n        }\n        else {\n            this._mapHead = record;\n        }\n        this._appendAfter = record;\n        return null;\n    };\n    DefaultKeyValueDiffer.prototype._getOrCreateRecordForKey = function (key, value) {\n        if (this._records.has(key)) {\n            var record_1 = (this._records.get(key));\n            this._maybeAddToChanges(record_1, value);\n            var prev = record_1._prev;\n            var next = record_1._next;\n            if (prev) {\n                prev._next = next;\n            }\n            if (next) {\n                next._prev = prev;\n            }\n            record_1._next = null;\n            record_1._prev = null;\n            return record_1;\n        }\n        var record = new KeyValueChangeRecord_(key);\n        this._records.set(key, record);\n        record.currentValue = value;\n        this._addToAdditions(record);\n        return record;\n    };\n    /** @internal */\n    /** @internal */\n    DefaultKeyValueDiffer.prototype._reset = /** @internal */\n    function () {\n        if (this.isDirty) {\n            var record = void 0;\n            // let `_previousMapHead` contain the state of the map before the changes\n            this._previousMapHead = this._mapHead;\n            for (record = this._previousMapHead; record !== null; record = record._next) {\n                record._nextPrevious = record._next;\n            }\n            // Update `record.previousValue` with the value of the item before the changes\n            // We need to update all changed items (that's those which have been added and changed)\n            for (record = this._changesHead; record !== null; record = record._nextChanged) {\n                record.previousValue = record.currentValue;\n            }\n            for (record = this._additionsHead; record != null; record = record._nextAdded) {\n                record.previousValue = record.currentValue;\n            }\n            this._changesHead = this._changesTail = null;\n            this._additionsHead = this._additionsTail = null;\n            this._removalsHead = null;\n        }\n    };\n    // Add the record or a given key to the list of changes only when the value has actually changed\n    // Add the record or a given key to the list of changes only when the value has actually changed\n    DefaultKeyValueDiffer.prototype._maybeAddToChanges = \n    // Add the record or a given key to the list of changes only when the value has actually changed\n    function (record, newValue) {\n        if (!looseIdentical(newValue, record.currentValue)) {\n            record.previousValue = record.currentValue;\n            record.currentValue = newValue;\n            this._addToChanges(record);\n        }\n    };\n    DefaultKeyValueDiffer.prototype._addToAdditions = function (record) {\n        if (this._additionsHead === null) {\n            this._additionsHead = this._additionsTail = record;\n        }\n        else {\n            this._additionsTail._nextAdded = record;\n            this._additionsTail = record;\n        }\n    };\n    DefaultKeyValueDiffer.prototype._addToChanges = function (record) {\n        if (this._changesHead === null) {\n            this._changesHead = this._changesTail = record;\n        }\n        else {\n            this._changesTail._nextChanged = record;\n            this._changesTail = record;\n        }\n    };\n    /** @internal */\n    /** @internal */\n    DefaultKeyValueDiffer.prototype._forEach = /** @internal */\n    function (obj, fn) {\n        if (obj instanceof Map) {\n            obj.forEach(fn);\n        }\n        else {\n            Object.keys(obj).forEach(function (k) { return fn(obj[k], k); });\n        }\n    };\n    return DefaultKeyValueDiffer;\n}());\nvar KeyValueChangeRecord_ = /** @class */ (function () {\n    function KeyValueChangeRecord_(key) {\n        this.key = key;\n        this.previousValue = null;\n        this.currentValue = null;\n        /** @internal */\n        this._nextPrevious = null;\n        /** @internal */\n        this._next = null;\n        /** @internal */\n        this._prev = null;\n        /** @internal */\n        this._nextAdded = null;\n        /** @internal */\n        this._nextRemoved = null;\n        /** @internal */\n        this._nextChanged = null;\n    }\n    return KeyValueChangeRecord_;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A repository of different iterable diffing strategies used by NgFor, NgClass, and others.\n *\n */\nvar IterableDiffers = /** @class */ (function () {\n    function IterableDiffers(factories) {\n        this.factories = factories;\n    }\n    IterableDiffers.create = function (factories, parent) {\n        if (parent != null) {\n            var copied = parent.factories.slice();\n            factories = factories.concat(copied);\n        }\n        return new IterableDiffers(factories);\n    };\n    /**\n     * Takes an array of {@link IterableDifferFactory} and returns a provider used to extend the\n     * inherited {@link IterableDiffers} instance with the provided factories and return a new\n     * {@link IterableDiffers} instance.\n     *\n     * The following example shows how to extend an existing list of factories,\n     * which will only be applied to the injector for this component and its children.\n     * This step is all that's required to make a new {@link IterableDiffer} available.\n     *\n     * ### Example\n     *\n     * ```\n     * @Component({\n     *   viewProviders: [\n     *     IterableDiffers.extend([new ImmutableListDiffer()])\n     *   ]\n     * })\n     * ```\n     */\n    /**\n       * Takes an array of {@link IterableDifferFactory} and returns a provider used to extend the\n       * inherited {@link IterableDiffers} instance with the provided factories and return a new\n       * {@link IterableDiffers} instance.\n       *\n       * The following example shows how to extend an existing list of factories,\n       * which will only be applied to the injector for this component and its children.\n       * This step is all that's required to make a new {@link IterableDiffer} available.\n       *\n       * ### Example\n       *\n       * ```\n       * @Component({\n       *   viewProviders: [\n       *     IterableDiffers.extend([new ImmutableListDiffer()])\n       *   ]\n       * })\n       * ```\n       */\n    IterableDiffers.extend = /**\n       * Takes an array of {@link IterableDifferFactory} and returns a provider used to extend the\n       * inherited {@link IterableDiffers} instance with the provided factories and return a new\n       * {@link IterableDiffers} instance.\n       *\n       * The following example shows how to extend an existing list of factories,\n       * which will only be applied to the injector for this component and its children.\n       * This step is all that's required to make a new {@link IterableDiffer} available.\n       *\n       * ### Example\n       *\n       * ```\n       * @Component({\n       *   viewProviders: [\n       *     IterableDiffers.extend([new ImmutableListDiffer()])\n       *   ]\n       * })\n       * ```\n       */\n    function (factories) {\n        return {\n            provide: IterableDiffers,\n            useFactory: function (parent) {\n                if (!parent) {\n                    // Typically would occur when calling IterableDiffers.extend inside of dependencies passed\n                    // to\n                    // bootstrap(), which would override default pipes instead of extending them.\n                    throw new Error('Cannot extend IterableDiffers without a parent injector');\n                }\n                return IterableDiffers.create(factories, parent);\n            },\n            // Dependency technically isn't optional, but we can provide a better error message this way.\n            deps: [[IterableDiffers, new SkipSelf(), new Optional()]]\n        };\n    };\n    IterableDiffers.prototype.find = function (iterable) {\n        var factory = this.factories.find(function (f) { return f.supports(iterable); });\n        if (factory != null) {\n            return factory;\n        }\n        else {\n            throw new Error(\"Cannot find a differ supporting object '\" + iterable + \"' of type '\" + getTypeNameForDebugging(iterable) + \"'\");\n        }\n    };\n    IterableDiffers.ngInjectableDef = defineInjectable({\n        providedIn: 'root',\n        factory: function () { return new IterableDiffers([new DefaultIterableDifferFactory()]); }\n    });\n    return IterableDiffers;\n}());\nfunction getTypeNameForDebugging(type) {\n    return type['name'] || typeof type;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A repository of different Map diffing strategies used by NgClass, NgStyle, and others.\n *\n */\nvar KeyValueDiffers = /** @class */ (function () {\n    function KeyValueDiffers(factories) {\n        this.factories = factories;\n    }\n    KeyValueDiffers.create = function (factories, parent) {\n        if (parent) {\n            var copied = parent.factories.slice();\n            factories = factories.concat(copied);\n        }\n        return new KeyValueDiffers(factories);\n    };\n    /**\n     * Takes an array of {@link KeyValueDifferFactory} and returns a provider used to extend the\n     * inherited {@link KeyValueDiffers} instance with the provided factories and return a new\n     * {@link KeyValueDiffers} instance.\n     *\n     * The following example shows how to extend an existing list of factories,\n     * which will only be applied to the injector for this component and its children.\n     * This step is all that's required to make a new {@link KeyValueDiffer} available.\n     *\n     * ### Example\n     *\n     * ```\n     * @Component({\n     *   viewProviders: [\n     *     KeyValueDiffers.extend([new ImmutableMapDiffer()])\n     *   ]\n     * })\n     * ```\n     */\n    /**\n       * Takes an array of {@link KeyValueDifferFactory} and returns a provider used to extend the\n       * inherited {@link KeyValueDiffers} instance with the provided factories and return a new\n       * {@link KeyValueDiffers} instance.\n       *\n       * The following example shows how to extend an existing list of factories,\n       * which will only be applied to the injector for this component and its children.\n       * This step is all that's required to make a new {@link KeyValueDiffer} available.\n       *\n       * ### Example\n       *\n       * ```\n       * @Component({\n       *   viewProviders: [\n       *     KeyValueDiffers.extend([new ImmutableMapDiffer()])\n       *   ]\n       * })\n       * ```\n       */\n    KeyValueDiffers.extend = /**\n       * Takes an array of {@link KeyValueDifferFactory} and returns a provider used to extend the\n       * inherited {@link KeyValueDiffers} instance with the provided factories and return a new\n       * {@link KeyValueDiffers} instance.\n       *\n       * The following example shows how to extend an existing list of factories,\n       * which will only be applied to the injector for this component and its children.\n       * This step is all that's required to make a new {@link KeyValueDiffer} available.\n       *\n       * ### Example\n       *\n       * ```\n       * @Component({\n       *   viewProviders: [\n       *     KeyValueDiffers.extend([new ImmutableMapDiffer()])\n       *   ]\n       * })\n       * ```\n       */\n    function (factories) {\n        return {\n            provide: KeyValueDiffers,\n            useFactory: function (parent) {\n                if (!parent) {\n                    // Typically would occur when calling KeyValueDiffers.extend inside of dependencies passed\n                    // to bootstrap(), which would override default pipes instead of extending them.\n                    throw new Error('Cannot extend KeyValueDiffers without a parent injector');\n                }\n                return KeyValueDiffers.create(factories, parent);\n            },\n            // Dependency technically isn't optional, but we can provide a better error message this way.\n            deps: [[KeyValueDiffers, new SkipSelf(), new Optional()]]\n        };\n    };\n    KeyValueDiffers.prototype.find = function (kv) {\n        var factory = this.factories.find(function (f) { return f.supports(kv); });\n        if (factory) {\n            return factory;\n        }\n        throw new Error(\"Cannot find a differ supporting object '\" + kv + \"'\");\n    };\n    return KeyValueDiffers;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Structural diffing for `Object`s and `Map`s.\n */\nvar keyValDiff = [new DefaultKeyValueDifferFactory()];\n/**\n * Structural diffing for `Iterable` types such as `Array`s.\n */\nvar iterableDiff = [new DefaultIterableDifferFactory()];\nvar defaultIterableDiffers = new IterableDiffers(iterableDiff);\nvar defaultKeyValueDiffers = new KeyValueDiffers(keyValDiff);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _CORE_PLATFORM_PROVIDERS = [\n    // Set a default platform name for platforms that don't set it explicitly.\n    { provide: PLATFORM_ID, useValue: 'unknown' },\n    { provide: PlatformRef, deps: [Injector] },\n    { provide: TestabilityRegistry, deps: [] },\n    { provide: Console, deps: [] },\n];\n/**\n * This platform has to be included in any other platform\n *\n * @experimental\n */\nvar platformCore = createPlatformFactory(null, 'core', _CORE_PLATFORM_PROVIDERS);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Provide this token to set the locale of your application.\n * It is used for i18n extraction, by i18n pipes (DatePipe, I18nPluralPipe, CurrencyPipe,\n * DecimalPipe and PercentPipe) and by ICU expressions.\n *\n * See the {@linkDocs guide/i18n#setting-up-locale i18n guide} for more information.\n *\n * ### Example\n *\n * ```typescript\n * import { LOCALE_ID } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   providers: [{provide: LOCALE_ID, useValue: 'en-US' }]\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\nvar LOCALE_ID = new InjectionToken('LocaleId');\n/**\n * Use this token at bootstrap to provide the content of your translation file (`xtb`,\n * `xlf` or `xlf2`) when you want to translate your application in another language.\n *\n * See the {@linkDocs guide/i18n#merge i18n guide} for more information.\n *\n * ### Example\n *\n * ```typescript\n * import { TRANSLATIONS } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * // content of your translation file\n * const translations = '....';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   providers: [{provide: TRANSLATIONS, useValue: translations }]\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\nvar TRANSLATIONS = new InjectionToken('Translations');\n/**\n * Provide this token at bootstrap to set the format of your {@link TRANSLATIONS}: `xtb`,\n * `xlf` or `xlf2`.\n *\n * See the {@linkDocs guide/i18n#merge i18n guide} for more information.\n *\n * ### Example\n *\n * ```typescript\n * import { TRANSLATIONS_FORMAT } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   providers: [{provide: TRANSLATIONS_FORMAT, useValue: 'xlf' }]\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\nvar TRANSLATIONS_FORMAT = new InjectionToken('TranslationsFormat');\n/**\n * Use this enum at bootstrap as an option of `bootstrapModule` to define the strategy\n * that the compiler should use in case of missing translations:\n * - Error: throw if you have missing translations.\n * - Warning (default): show a warning in the console and/or shell.\n * - Ignore: do nothing.\n *\n * See the {@linkDocs guide/i18n#missing-translation i18n guide} for more information.\n *\n * ### Example\n * ```typescript\n * import { MissingTranslationStrategy } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   missingTranslation: MissingTranslationStrategy.Error\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\n/**\n * Use this enum at bootstrap as an option of `bootstrapModule` to define the strategy\n * that the compiler should use in case of missing translations:\n * - Error: throw if you have missing translations.\n * - Warning (default): show a warning in the console and/or shell.\n * - Ignore: do nothing.\n *\n * See the {@linkDocs guide/i18n#missing-translation i18n guide} for more information.\n *\n * ### Example\n * ```typescript\n * import { MissingTranslationStrategy } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   missingTranslation: MissingTranslationStrategy.Error\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\nvar MissingTranslationStrategy$1;\n/**\n * Use this enum at bootstrap as an option of `bootstrapModule` to define the strategy\n * that the compiler should use in case of missing translations:\n * - Error: throw if you have missing translations.\n * - Warning (default): show a warning in the console and/or shell.\n * - Ignore: do nothing.\n *\n * See the {@linkDocs guide/i18n#missing-translation i18n guide} for more information.\n *\n * ### Example\n * ```typescript\n * import { MissingTranslationStrategy } from '@angular/core';\n * import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n * import { AppModule } from './app/app.module';\n *\n * platformBrowserDynamic().bootstrapModule(AppModule, {\n *   missingTranslation: MissingTranslationStrategy.Error\n * });\n * ```\n *\n * @experimental i18n support is experimental.\n */\n(function (MissingTranslationStrategy) {\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Error\"] = 0] = \"Error\";\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Warning\"] = 1] = \"Warning\";\n    MissingTranslationStrategy[MissingTranslationStrategy[\"Ignore\"] = 2] = \"Ignore\";\n})(MissingTranslationStrategy$1 || (MissingTranslationStrategy$1 = {}));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction _iterableDiffersFactory() {\n    return defaultIterableDiffers;\n}\nfunction _keyValueDiffersFactory() {\n    return defaultKeyValueDiffers;\n}\nfunction _localeFactory(locale) {\n    return locale || 'en-US';\n}\n/**\n * This module includes the providers of @angular/core that are needed\n * to bootstrap components via `ApplicationRef`.\n *\n * @experimental\n */\nvar ApplicationModule = /** @class */ (function () {\n    // Inject ApplicationRef to make it eager...\n    function ApplicationModule(appRef) {\n    }\n    ApplicationModule.decorators = [\n        { type: NgModule, args: [{\n                    providers: [\n                        ApplicationRef,\n                        ApplicationInitStatus,\n                        Compiler,\n                        APP_ID_RANDOM_PROVIDER,\n                        { provide: IterableDiffers, useFactory: _iterableDiffersFactory },\n                        { provide: KeyValueDiffers, useFactory: _keyValueDiffersFactory },\n                        {\n                            provide: LOCALE_ID,\n                            useFactory: _localeFactory,\n                            deps: [[new Inject(LOCALE_ID), new Optional(), new SkipSelf()]]\n                        },\n                    ],\n                },] }\n    ];\n    /** @nocollapse */\n    ApplicationModule.ctorParameters = function () { return [\n        { type: ApplicationRef, },\n    ]; };\n    return ApplicationModule;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * This helper class is used to get hold of an inert tree of DOM elements containing dirty HTML\n * that needs sanitizing.\n * Depending upon browser support we must use one of three strategies for doing this.\n * Support: Safari 10.x -> XHR strategy\n * Support: Firefox -> DomParser strategy\n * Default: InertDocument strategy\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction tagSet(tags) {\n    var res = {};\n    try {\n        for (var _a = __values(tags.split(',')), _b = _a.next(); !_b.done; _b = _a.next()) {\n            var t = _b.value;\n            res[t] = true;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return res;\n    var e_1, _c;\n}\nfunction merge$2() {\n    var sets = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sets[_i] = arguments[_i];\n    }\n    var res = {};\n    try {\n        for (var sets_1 = __values(sets), sets_1_1 = sets_1.next(); !sets_1_1.done; sets_1_1 = sets_1.next()) {\n            var s = sets_1_1.value;\n            for (var v in s) {\n                if (s.hasOwnProperty(v))\n                    res[v] = true;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (sets_1_1 && !sets_1_1.done && (_a = sets_1.return)) _a.call(sets_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return res;\n    var e_2, _a;\n}\n// Good source of info about elements and attributes\n// http://dev.w3.org/html5/spec/Overview.html#semantics\n// http://simon.html5.org/html-elements\n// Safe Void Elements - HTML5\n// http://dev.w3.org/html5/spec/Overview.html#void-elements\nvar VOID_ELEMENTS = tagSet('area,br,col,hr,img,wbr');\n// Elements that you can, intentionally, leave open (and which close themselves)\n// http://dev.w3.org/html5/spec/Overview.html#optional-tags\nvar OPTIONAL_END_TAG_BLOCK_ELEMENTS = tagSet('colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr');\nvar OPTIONAL_END_TAG_INLINE_ELEMENTS = tagSet('rp,rt');\nvar OPTIONAL_END_TAG_ELEMENTS = merge$2(OPTIONAL_END_TAG_INLINE_ELEMENTS, OPTIONAL_END_TAG_BLOCK_ELEMENTS);\n// Safe Block Elements - HTML5\nvar BLOCK_ELEMENTS = merge$2(OPTIONAL_END_TAG_BLOCK_ELEMENTS, tagSet('address,article,' +\n    'aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,' +\n    'h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul'));\n// Inline Elements - HTML5\nvar INLINE_ELEMENTS = merge$2(OPTIONAL_END_TAG_INLINE_ELEMENTS, tagSet('a,abbr,acronym,audio,b,' +\n    'bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,' +\n    'samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video'));\nvar VALID_ELEMENTS = merge$2(VOID_ELEMENTS, BLOCK_ELEMENTS, INLINE_ELEMENTS, OPTIONAL_END_TAG_ELEMENTS);\n// Attributes that have href and hence need to be sanitized\nvar URI_ATTRS = tagSet('background,cite,href,itemtype,longdesc,poster,src,xlink:href');\n// Attributes that have special href set hence need to be sanitized\nvar SRCSET_ATTRS = tagSet('srcset');\nvar HTML_ATTRS = tagSet('abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,' +\n    'compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,' +\n    'ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,' +\n    'scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,' +\n    'valign,value,vspace,width');\n// NB: This currently consciously doesn't support SVG. SVG sanitization has had several security\n// issues in the past, so it seems safer to leave it out if possible. If support for binding SVG via\n// innerHTML is required, SVG attributes should be added here.\n// NB: Sanitization does not allow <form> elements or other active elements (<button> etc). Those\n// can be sanitized, but they increase security surface area without a legitimate use case, so they\n// are left out here.\nvar VALID_ATTRS = merge$2(URI_ATTRS, SRCSET_ATTRS, HTML_ATTRS);\n/**\n * Sanitizes the given unsafe, untrusted HTML fragment, and returns HTML text that is safe to add to\n * the DOM in a browser environment.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Sanitizes the given untrusted CSS style property value (i.e. not an entire object, just a single\n * value) and returns a value that is safe to use in a browser environment.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A SecurityContext marks a location that has dangerous security implications, e.g. a DOM property\n * like `innerHTML` that could cause Cross Site Scripting (XSS) security bugs when improperly\n * handled.\n *\n * See DomSanitizer for more details on security in Angular applications.\n *\n *\n */\n/**\n * A SecurityContext marks a location that has dangerous security implications, e.g. a DOM property\n * like `innerHTML` that could cause Cross Site Scripting (XSS) security bugs when improperly\n * handled.\n *\n * See DomSanitizer for more details on security in Angular applications.\n *\n *\n */\nvar SecurityContext$1;\n/**\n * A SecurityContext marks a location that has dangerous security implications, e.g. a DOM property\n * like `innerHTML` that could cause Cross Site Scripting (XSS) security bugs when improperly\n * handled.\n *\n * See DomSanitizer for more details on security in Angular applications.\n *\n *\n */\n(function (SecurityContext) {\n    SecurityContext[SecurityContext[\"NONE\"] = 0] = \"NONE\";\n    SecurityContext[SecurityContext[\"HTML\"] = 1] = \"HTML\";\n    SecurityContext[SecurityContext[\"STYLE\"] = 2] = \"STYLE\";\n    SecurityContext[SecurityContext[\"SCRIPT\"] = 3] = \"SCRIPT\";\n    SecurityContext[SecurityContext[\"URL\"] = 4] = \"URL\";\n    SecurityContext[SecurityContext[\"RESOURCE_URL\"] = 5] = \"RESOURCE_URL\";\n})(SecurityContext$1 || (SecurityContext$1 = {}));\n/**\n * Sanitizer is used by the views to sanitize potentially dangerous values.\n *\n *\n */\nvar Sanitizer = /** @class */ (function () {\n    function Sanitizer() {\n    }\n    return Sanitizer;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Called before each cycle of a view's check to detect whether this is in the\n// initState for which we need to call ngOnInit, ngAfterContentInit or ngAfterViewInit\n// lifecycle methods. Returns true if this check cycle should call lifecycle\n// methods.\nfunction shiftInitState(view, priorInitState, newInitState) {\n    // Only update the InitState if we are currently in the prior state.\n    // For example, only move into CallingInit if we are in BeforeInit. Only\n    // move into CallingContentInit if we are in CallingInit. Normally this will\n    // always be true because of how checkCycle is called in checkAndUpdateView.\n    // However, if checkAndUpdateView is called recursively or if an exception is\n    // thrown while checkAndUpdateView is running, checkAndUpdateView starts over\n    // from the beginning. This ensures the state is monotonically increasing,\n    // terminating in the AfterInit state, which ensures the Init methods are called\n    // at least once and only once.\n    var state = view.state;\n    var initState = state & 1792;\n    if (initState === priorInitState) {\n        view.state = (state & ~1792 /* InitState_Mask */) | newInitState;\n        view.initIndex = -1;\n        return true;\n    }\n    return initState === newInitState;\n}\n// Returns true if the lifecycle init method should be called for the node with\n// the given init index.\nfunction shouldCallLifecycleInitHook(view, initState, index) {\n    if ((view.state & 1792 /* InitState_Mask */) === initState && view.initIndex <= index) {\n        view.initIndex = index + 1;\n        return true;\n    }\n    return false;\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asTextData(view, index) {\n    return view.nodes[index];\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asElementData(view, index) {\n    return view.nodes[index];\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asProviderData(view, index) {\n    return view.nodes[index];\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asPureExpressionData(view, index) {\n    return view.nodes[index];\n}\n/**\n * Accessor for view.nodes, enforcing that every usage site stays monomorphic.\n */\nfunction asQueryList(view, index) {\n    return view.nodes[index];\n}\n/**\n * This object is used to prevent cycles in the source files and to have a place where\n * debug mode can hook it. It is lazily filled when `isDevMode` is known.\n */\nvar Services = {\n    setCurrentNode: (undefined),\n    createRootView: (undefined),\n    createEmbeddedView: (undefined),\n    createComponentView: (undefined),\n    createNgModuleRef: (undefined),\n    overrideProvider: (undefined),\n    overrideComponentView: (undefined),\n    clearOverrides: (undefined),\n    checkAndUpdateView: (undefined),\n    checkNoChangesView: (undefined),\n    destroyView: (undefined),\n    resolveDep: (undefined),\n    createDebugContext: (undefined),\n    handleEvent: (undefined),\n    updateDirectives: (undefined),\n    updateRenderer: (undefined),\n    dirtyParentQueries: (undefined),\n};\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction expressionChangedAfterItHasBeenCheckedError(context, oldValue, currValue, isFirstCheck) {\n    var msg = \"ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '\" + oldValue + \"'. Current value: '\" + currValue + \"'.\";\n    if (isFirstCheck) {\n        msg +=\n            \" It seems like the view has been created after its parent and its children have been dirty checked.\" +\n                \" Has it been created in a change detection hook ?\";\n    }\n    return viewDebugError(msg, context);\n}\nfunction viewWrappedDebugError(err, context) {\n    if (!(err instanceof Error)) {\n        // errors that are not Error instances don't have a stack,\n        // so it is ok to wrap them into a new Error object...\n        err = new Error(err.toString());\n    }\n    _addDebugContext(err, context);\n    return err;\n}\nfunction viewDebugError(msg, context) {\n    var err = new Error(msg);\n    _addDebugContext(err, context);\n    return err;\n}\nfunction _addDebugContext(err, context) {\n    err[ERROR_DEBUG_CONTEXT] = context;\n    err[ERROR_LOGGER] = context.logError.bind(context);\n}\nfunction isViewDebugError(err) {\n    return !!getDebugContext(err);\n}\nfunction viewDestroyedError(action) {\n    return new Error(\"ViewDestroyedError: Attempt to use a destroyed view: \" + action);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar NOOP = function () { };\nvar _tokenKeyCache = new Map();\nfunction tokenKey(token) {\n    var key = _tokenKeyCache.get(token);\n    if (!key) {\n        key = stringify$1(token) + '_' + _tokenKeyCache.size;\n        _tokenKeyCache.set(token, key);\n    }\n    return key;\n}\n\n// Attention: this function is called as top level function.\n// Putting any logic in here will destroy closure tree shaking!\n\n\nfunction checkBinding(view, def, bindingIdx, value) {\n    var oldValues = view.oldValues;\n    if ((view.state & 2 /* FirstCheck */) ||\n        !looseIdentical(oldValues[def.bindingIndex + bindingIdx], value)) {\n        return true;\n    }\n    return false;\n}\nfunction checkAndUpdateBinding(view, def, bindingIdx, value) {\n    if (checkBinding(view, def, bindingIdx, value)) {\n        view.oldValues[def.bindingIndex + bindingIdx] = value;\n        return true;\n    }\n    return false;\n}\nfunction checkBindingNoChanges(view, def, bindingIdx, value) {\n    var oldValue = view.oldValues[def.bindingIndex + bindingIdx];\n    if ((view.state & 1 /* BeforeFirstCheck */) || !devModeEqual(oldValue, value)) {\n        var bindingName = def.bindings[bindingIdx].name;\n        throw expressionChangedAfterItHasBeenCheckedError(Services.createDebugContext(view, def.nodeIndex), bindingName + \": \" + oldValue, bindingName + \": \" + value, (view.state & 1 /* BeforeFirstCheck */) !== 0);\n    }\n}\nfunction markParentViewsForCheck(view) {\n    var currView = view;\n    while (currView) {\n        if (currView.def.flags & 2 /* OnPush */) {\n            currView.state |= 8 /* ChecksEnabled */;\n        }\n        currView = currView.viewContainerParent || currView.parent;\n    }\n}\nfunction markParentViewsForCheckProjectedViews(view, endView) {\n    var currView = view;\n    while (currView && currView !== endView) {\n        currView.state |= 64 /* CheckProjectedViews */;\n        currView = currView.viewContainerParent || currView.parent;\n    }\n}\nfunction dispatchEvent(view, nodeIndex, eventName, event) {\n    try {\n        var nodeDef = view.def.nodes[nodeIndex];\n        var startView = nodeDef.flags & 33554432 /* ComponentView */ ?\n            asElementData(view, nodeIndex).componentView :\n            view;\n        markParentViewsForCheck(startView);\n        return Services.handleEvent(view, nodeIndex, eventName, event);\n    }\n    catch (e) {\n        // Attention: Don't rethrow, as it would cancel Observable subscriptions!\n        view.root.errorHandler.handleError(e);\n    }\n}\nfunction declaredViewContainer(view) {\n    if (view.parent) {\n        var parentView = view.parent;\n        return asElementData(parentView, view.parentNodeDef.nodeIndex);\n    }\n    return null;\n}\n/**\n * for component views, this is the host element.\n * for embedded views, this is the index of the parent node\n * that contains the view container.\n */\nfunction viewParentEl(view) {\n    var parentView = view.parent;\n    if (parentView) {\n        return view.parentNodeDef.parent;\n    }\n    else {\n        return null;\n    }\n}\nfunction renderNode(view, def) {\n    switch (def.flags & 201347067 /* Types */) {\n        case 1 /* TypeElement */:\n            return asElementData(view, def.nodeIndex).renderElement;\n        case 2 /* TypeText */:\n            return asTextData(view, def.nodeIndex).renderText;\n    }\n}\nfunction elementEventFullName$1(target, name) {\n    return target ? target + \":\" + name : name;\n}\nfunction isComponentView(view) {\n    return !!view.parent && !!(view.parentNodeDef.flags & 32768 /* Component */);\n}\nfunction isEmbeddedView(view) {\n    return !!view.parent && !(view.parentNodeDef.flags & 32768 /* Component */);\n}\n\n\nfunction splitDepsDsl(deps, sourceName) {\n    return deps.map(function (value) {\n        var token;\n        var flags;\n        if (Array.isArray(value)) {\n            _a = __read(value, 2), flags = _a[0], token = _a[1];\n        }\n        else {\n            flags = 0 /* None */;\n            token = value;\n        }\n        if (token && (typeof token === 'function' || typeof token === 'object') && sourceName) {\n            Object.defineProperty(token, SOURCE$1, { value: sourceName, configurable: true });\n        }\n        return { flags: flags, token: token, tokenKey: tokenKey(token) };\n        var _a;\n    });\n}\nfunction getParentRenderElement(view, renderHost, def) {\n    var renderParent = def.renderParent;\n    if (renderParent) {\n        if ((renderParent.flags & 1 /* TypeElement */) === 0 ||\n            (renderParent.flags & 33554432 /* ComponentView */) === 0 ||\n            (renderParent.element.componentRendererType &&\n                renderParent.element.componentRendererType.encapsulation ===\n                    ViewEncapsulation$1.Native)) {\n            // only children of non components, or children of components with native encapsulation should\n            // be attached.\n            return asElementData(view, def.renderParent.nodeIndex).renderElement;\n        }\n    }\n    else {\n        return renderHost;\n    }\n}\nvar DEFINITION_CACHE = new WeakMap();\nfunction resolveDefinition(factory) {\n    var value = DEFINITION_CACHE.get(factory);\n    if (!value) {\n        value = factory(function () { return NOOP; });\n        value.factory = factory;\n        DEFINITION_CACHE.set(factory, value);\n    }\n    return value;\n}\nfunction rootRenderNodes(view) {\n    var renderNodes = [];\n    visitRootRenderNodes(view, 0 /* Collect */, undefined, undefined, renderNodes);\n    return renderNodes;\n}\nfunction visitRootRenderNodes(view, action, parentNode, nextSibling, target) {\n    // We need to re-compute the parent node in case the nodes have been moved around manually\n    if (action === 3 /* RemoveChild */) {\n        parentNode = view.renderer.parentNode(renderNode(view, (view.def.lastRenderRootNode)));\n    }\n    visitSiblingRenderNodes(view, action, 0, view.def.nodes.length - 1, parentNode, nextSibling, target);\n}\nfunction visitSiblingRenderNodes(view, action, startIndex, endIndex, parentNode, nextSibling, target) {\n    for (var i = startIndex; i <= endIndex; i++) {\n        var nodeDef = view.def.nodes[i];\n        if (nodeDef.flags & (1 /* TypeElement */ | 2 /* TypeText */ | 8 /* TypeNgContent */)) {\n            visitRenderNode(view, nodeDef, action, parentNode, nextSibling, target);\n        }\n        // jump to next sibling\n        i += nodeDef.childCount;\n    }\n}\nfunction visitProjectedRenderNodes(view, ngContentIndex, action, parentNode, nextSibling, target) {\n    var compView = view;\n    while (compView && !isComponentView(compView)) {\n        compView = compView.parent;\n    }\n    var hostView = compView.parent;\n    var hostElDef = viewParentEl((compView));\n    var startIndex = hostElDef.nodeIndex + 1;\n    var endIndex = hostElDef.nodeIndex + hostElDef.childCount;\n    for (var i = startIndex; i <= endIndex; i++) {\n        var nodeDef = hostView.def.nodes[i];\n        if (nodeDef.ngContentIndex === ngContentIndex) {\n            visitRenderNode((hostView), nodeDef, action, parentNode, nextSibling, target);\n        }\n        // jump to next sibling\n        i += nodeDef.childCount;\n    }\n    if (!hostView.parent) {\n        // a root view\n        var projectedNodes = view.root.projectableNodes[ngContentIndex];\n        if (projectedNodes) {\n            for (var i = 0; i < projectedNodes.length; i++) {\n                execRenderNodeAction(view, projectedNodes[i], action, parentNode, nextSibling, target);\n            }\n        }\n    }\n}\nfunction visitRenderNode(view, nodeDef, action, parentNode, nextSibling, target) {\n    if (nodeDef.flags & 8 /* TypeNgContent */) {\n        visitProjectedRenderNodes(view, nodeDef.ngContent.index, action, parentNode, nextSibling, target);\n    }\n    else {\n        var rn = renderNode(view, nodeDef);\n        if (action === 3 /* RemoveChild */ && (nodeDef.flags & 33554432 /* ComponentView */) &&\n            (nodeDef.bindingFlags & 48 /* CatSyntheticProperty */)) {\n            // Note: we might need to do both actions.\n            if (nodeDef.bindingFlags & (16 /* SyntheticProperty */)) {\n                execRenderNodeAction(view, rn, action, parentNode, nextSibling, target);\n            }\n            if (nodeDef.bindingFlags & (32 /* SyntheticHostProperty */)) {\n                var compView = asElementData(view, nodeDef.nodeIndex).componentView;\n                execRenderNodeAction(compView, rn, action, parentNode, nextSibling, target);\n            }\n        }\n        else {\n            execRenderNodeAction(view, rn, action, parentNode, nextSibling, target);\n        }\n        if (nodeDef.flags & 16777216 /* EmbeddedViews */) {\n            var embeddedViews = asElementData(view, nodeDef.nodeIndex).viewContainer._embeddedViews;\n            for (var k = 0; k < embeddedViews.length; k++) {\n                visitRootRenderNodes(embeddedViews[k], action, parentNode, nextSibling, target);\n            }\n        }\n        if (nodeDef.flags & 1 /* TypeElement */ && !nodeDef.element.name) {\n            visitSiblingRenderNodes(view, action, nodeDef.nodeIndex + 1, nodeDef.nodeIndex + nodeDef.childCount, parentNode, nextSibling, target);\n        }\n    }\n}\nfunction execRenderNodeAction(view, renderNode, action, parentNode, nextSibling, target) {\n    var renderer = view.renderer;\n    switch (action) {\n        case 1 /* AppendChild */:\n            renderer.appendChild(parentNode, renderNode);\n            break;\n        case 2 /* InsertBefore */:\n            renderer.insertBefore(parentNode, renderNode, nextSibling);\n            break;\n        case 3 /* RemoveChild */:\n            renderer.removeChild(parentNode, renderNode);\n            break;\n        case 0 /* Collect */:\n            target.push(renderNode);\n            break;\n    }\n}\nvar NS_PREFIX_RE = /^:([^:]+):(.+)$/;\nfunction splitNamespace(name) {\n    if (name[0] === ':') {\n        var match = (name.match(NS_PREFIX_RE));\n        return [match[1], match[2]];\n    }\n    return ['', name];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nfunction createElement(view, renderHost, def) {\n    var elDef = (def.element);\n    var rootSelectorOrNode = view.root.selectorOrNode;\n    var renderer = view.renderer;\n    var el;\n    if (view.parent || !rootSelectorOrNode) {\n        if (elDef.name) {\n            el = renderer.createElement(elDef.name, elDef.ns);\n        }\n        else {\n            el = renderer.createComment('');\n        }\n        var parentEl = getParentRenderElement(view, renderHost, def);\n        if (parentEl) {\n            renderer.appendChild(parentEl, el);\n        }\n    }\n    else {\n        el = renderer.selectRootElement(rootSelectorOrNode);\n    }\n    if (elDef.attrs) {\n        for (var i = 0; i < elDef.attrs.length; i++) {\n            var _a = __read(elDef.attrs[i], 3), ns = _a[0], name_2 = _a[1], value = _a[2];\n            renderer.setAttribute(el, name_2, value, ns);\n        }\n    }\n    return el;\n}\nfunction listenToElementOutputs(view, compView, def, el) {\n    for (var i = 0; i < def.outputs.length; i++) {\n        var output = def.outputs[i];\n        var handleEventClosure = renderEventHandlerClosure(view, def.nodeIndex, elementEventFullName$1(output.target, output.eventName));\n        var listenTarget = output.target;\n        var listenerView = view;\n        if (output.target === 'component') {\n            listenTarget = null;\n            listenerView = compView;\n        }\n        var disposable = listenerView.renderer.listen(listenTarget || el, output.eventName, handleEventClosure);\n        view.disposables[def.outputIndex + i] = disposable;\n    }\n}\nfunction renderEventHandlerClosure(view, index, eventName) {\n    return function (event) { return dispatchEvent(view, index, eventName, event); };\n}\nfunction checkAndUpdateElementInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var bindLen = def.bindings.length;\n    var changed = false;\n    if (bindLen > 0 && checkAndUpdateElementValue(view, def, 0, v0))\n        changed = true;\n    if (bindLen > 1 && checkAndUpdateElementValue(view, def, 1, v1))\n        changed = true;\n    if (bindLen > 2 && checkAndUpdateElementValue(view, def, 2, v2))\n        changed = true;\n    if (bindLen > 3 && checkAndUpdateElementValue(view, def, 3, v3))\n        changed = true;\n    if (bindLen > 4 && checkAndUpdateElementValue(view, def, 4, v4))\n        changed = true;\n    if (bindLen > 5 && checkAndUpdateElementValue(view, def, 5, v5))\n        changed = true;\n    if (bindLen > 6 && checkAndUpdateElementValue(view, def, 6, v6))\n        changed = true;\n    if (bindLen > 7 && checkAndUpdateElementValue(view, def, 7, v7))\n        changed = true;\n    if (bindLen > 8 && checkAndUpdateElementValue(view, def, 8, v8))\n        changed = true;\n    if (bindLen > 9 && checkAndUpdateElementValue(view, def, 9, v9))\n        changed = true;\n    return changed;\n}\nfunction checkAndUpdateElementDynamic(view, def, values) {\n    var changed = false;\n    for (var i = 0; i < values.length; i++) {\n        if (checkAndUpdateElementValue(view, def, i, values[i]))\n            changed = true;\n    }\n    return changed;\n}\nfunction checkAndUpdateElementValue(view, def, bindingIdx, value) {\n    if (!checkAndUpdateBinding(view, def, bindingIdx, value)) {\n        return false;\n    }\n    var binding = def.bindings[bindingIdx];\n    var elData = asElementData(view, def.nodeIndex);\n    var renderNode$$1 = elData.renderElement;\n    var name = (binding.name);\n    switch (binding.flags & 15 /* Types */) {\n        case 1 /* TypeElementAttribute */:\n            setElementAttribute(view, binding, renderNode$$1, binding.ns, name, value);\n            break;\n        case 2 /* TypeElementClass */:\n            setElementClass(view, renderNode$$1, name, value);\n            break;\n        case 4 /* TypeElementStyle */:\n            setElementStyle(view, binding, renderNode$$1, name, value);\n            break;\n        case 8 /* TypeProperty */:\n            var bindView = (def.flags & 33554432 /* ComponentView */ &&\n                binding.flags & 32 /* SyntheticHostProperty */) ?\n                elData.componentView :\n                view;\n            setElementProperty(bindView, binding, renderNode$$1, name, value);\n            break;\n    }\n    return true;\n}\nfunction setElementAttribute(view, binding, renderNode$$1, ns, name, value) {\n    var securityContext = binding.securityContext;\n    var renderValue = securityContext ? view.root.sanitizer.sanitize(securityContext, value) : value;\n    renderValue = renderValue != null ? renderValue.toString() : null;\n    var renderer = view.renderer;\n    if (value != null) {\n        renderer.setAttribute(renderNode$$1, name, renderValue, ns);\n    }\n    else {\n        renderer.removeAttribute(renderNode$$1, name, ns);\n    }\n}\nfunction setElementClass(view, renderNode$$1, name, value) {\n    var renderer = view.renderer;\n    if (value) {\n        renderer.addClass(renderNode$$1, name);\n    }\n    else {\n        renderer.removeClass(renderNode$$1, name);\n    }\n}\nfunction setElementStyle(view, binding, renderNode$$1, name, value) {\n    var renderValue = view.root.sanitizer.sanitize(SecurityContext$1.STYLE, value);\n    if (renderValue != null) {\n        renderValue = renderValue.toString();\n        var unit = binding.suffix;\n        if (unit != null) {\n            renderValue = renderValue + unit;\n        }\n    }\n    else {\n        renderValue = null;\n    }\n    var renderer = view.renderer;\n    if (renderValue != null) {\n        renderer.setStyle(renderNode$$1, name, renderValue);\n    }\n    else {\n        renderer.removeStyle(renderNode$$1, name);\n    }\n}\nfunction setElementProperty(view, binding, renderNode$$1, name, value) {\n    var securityContext = binding.securityContext;\n    var renderValue = securityContext ? view.root.sanitizer.sanitize(securityContext, value) : value;\n    view.renderer.setProperty(renderNode$$1, name, renderValue);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar UNDEFINED_VALUE = new Object();\nvar InjectorRefTokenKey$1 = tokenKey(Injector);\nvar INJECTORRefTokenKey$1 = tokenKey(INJECTOR);\nvar NgModuleRefTokenKey = tokenKey(NgModuleRef);\n\n\nfunction initNgModule(data) {\n    var def = data._def;\n    var providers = data._providers = new Array(def.providers.length);\n    for (var i = 0; i < def.providers.length; i++) {\n        var provDef = def.providers[i];\n        if (!(provDef.flags & 4096 /* LazyProvider */)) {\n            // Make sure the provider has not been already initialized outside this loop.\n            if (providers[i] === undefined) {\n                providers[i] = _createProviderInstance$1(data, provDef);\n            }\n        }\n    }\n}\nfunction resolveNgModuleDep(data, depDef, notFoundValue) {\n    if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }\n    var former = setCurrentInjector(data);\n    try {\n        if (depDef.flags & 8 /* Value */) {\n            return depDef.token;\n        }\n        if (depDef.flags & 2 /* Optional */) {\n            notFoundValue = null;\n        }\n        if (depDef.flags & 1 /* SkipSelf */) {\n            return data._parent.get(depDef.token, notFoundValue);\n        }\n        var tokenKey_1 = depDef.tokenKey;\n        switch (tokenKey_1) {\n            case InjectorRefTokenKey$1:\n            case INJECTORRefTokenKey$1:\n            case NgModuleRefTokenKey:\n                return data;\n        }\n        var providerDef = data._def.providersByKey[tokenKey_1];\n        if (providerDef) {\n            var providerInstance = data._providers[providerDef.index];\n            if (providerInstance === undefined) {\n                providerInstance = data._providers[providerDef.index] =\n                    _createProviderInstance$1(data, providerDef);\n            }\n            return providerInstance === UNDEFINED_VALUE ? undefined : providerInstance;\n        }\n        else if (depDef.token.ngInjectableDef && targetsModule(data, depDef.token.ngInjectableDef)) {\n            var injectableDef = depDef.token.ngInjectableDef;\n            var index = data._providers.length;\n            data._def.providersByKey[depDef.tokenKey] = {\n                flags: 1024 /* TypeFactoryProvider */ | 4096 /* LazyProvider */,\n                value: injectableDef.factory,\n                deps: [], index: index,\n                token: depDef.token,\n            };\n            data._providers[index] = UNDEFINED_VALUE;\n            return (data._providers[index] =\n                _createProviderInstance$1(data, data._def.providersByKey[depDef.tokenKey]));\n        }\n        return data._parent.get(depDef.token, notFoundValue);\n    }\n    finally {\n        setCurrentInjector(former);\n    }\n}\nfunction moduleTransitivelyPresent(ngModule, scope) {\n    return ngModule._def.modules.indexOf(scope) > -1;\n}\nfunction targetsModule(ngModule, def) {\n    return def.providedIn != null && (moduleTransitivelyPresent(ngModule, def.providedIn) ||\n        def.providedIn === 'root' && ngModule._def.isRoot);\n}\nfunction _createProviderInstance$1(ngModule, providerDef) {\n    var injectable;\n    switch (providerDef.flags & 201347067 /* Types */) {\n        case 512 /* TypeClassProvider */:\n            injectable = _createClass(ngModule, providerDef.value, providerDef.deps);\n            break;\n        case 1024 /* TypeFactoryProvider */:\n            injectable = _callFactory(ngModule, providerDef.value, providerDef.deps);\n            break;\n        case 2048 /* TypeUseExistingProvider */:\n            injectable = resolveNgModuleDep(ngModule, providerDef.deps[0]);\n            break;\n        case 256 /* TypeValueProvider */:\n            injectable = providerDef.value;\n            break;\n    }\n    // The read of `ngOnDestroy` here is slightly expensive as it's megamorphic, so it should be\n    // avoided if possible. The sequence of checks here determines whether ngOnDestroy needs to be\n    // checked. It might not if the `injectable` isn't an object or if NodeFlags.OnDestroy is already\n    // set (ngOnDestroy was detected statically).\n    if (injectable !== UNDEFINED_VALUE && injectable != null && typeof injectable === 'object' &&\n        !(providerDef.flags & 131072 /* OnDestroy */) && typeof injectable.ngOnDestroy === 'function') {\n        providerDef.flags |= 131072 /* OnDestroy */;\n    }\n    return injectable === undefined ? UNDEFINED_VALUE : injectable;\n}\nfunction _createClass(ngModule, ctor, deps) {\n    var len = deps.length;\n    switch (len) {\n        case 0:\n            return new ctor();\n        case 1:\n            return new ctor(resolveNgModuleDep(ngModule, deps[0]));\n        case 2:\n            return new ctor(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]));\n        case 3:\n            return new ctor(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]), resolveNgModuleDep(ngModule, deps[2]));\n        default:\n            var depValues = new Array(len);\n            for (var i = 0; i < len; i++) {\n                depValues[i] = resolveNgModuleDep(ngModule, deps[i]);\n            }\n            return new (ctor.bind.apply(ctor, __spread([void 0], depValues)))();\n    }\n}\nfunction _callFactory(ngModule, factory, deps) {\n    var len = deps.length;\n    switch (len) {\n        case 0:\n            return factory();\n        case 1:\n            return factory(resolveNgModuleDep(ngModule, deps[0]));\n        case 2:\n            return factory(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]));\n        case 3:\n            return factory(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]), resolveNgModuleDep(ngModule, deps[2]));\n        default:\n            var depValues = Array(len);\n            for (var i = 0; i < len; i++) {\n                depValues[i] = resolveNgModuleDep(ngModule, deps[i]);\n            }\n            return factory.apply(void 0, __spread(depValues));\n    }\n}\nfunction callNgModuleLifecycle(ngModule, lifecycles) {\n    var def = ngModule._def;\n    var destroyed = new Set();\n    for (var i = 0; i < def.providers.length; i++) {\n        var provDef = def.providers[i];\n        if (provDef.flags & 131072 /* OnDestroy */) {\n            var instance = ngModule._providers[i];\n            if (instance && instance !== UNDEFINED_VALUE) {\n                var onDestroy = instance.ngOnDestroy;\n                if (typeof onDestroy === 'function' && !destroyed.has(instance)) {\n                    onDestroy.apply(instance);\n                    destroyed.add(instance);\n                }\n            }\n        }\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction attachEmbeddedView(parentView, elementData, viewIndex, view) {\n    var embeddedViews = elementData.viewContainer._embeddedViews;\n    if (viewIndex === null || viewIndex === undefined) {\n        viewIndex = embeddedViews.length;\n    }\n    view.viewContainerParent = parentView;\n    addToArray(embeddedViews, (viewIndex), view);\n    attachProjectedView(elementData, view);\n    Services.dirtyParentQueries(view);\n    var prevView = (viewIndex) > 0 ? embeddedViews[(viewIndex) - 1] : null;\n    renderAttachEmbeddedView(elementData, prevView, view);\n}\nfunction attachProjectedView(vcElementData, view) {\n    var dvcElementData = declaredViewContainer(view);\n    if (!dvcElementData || dvcElementData === vcElementData ||\n        view.state & 16 /* IsProjectedView */) {\n        return;\n    }\n    // Note: For performance reasons, we\n    // - add a view to template._projectedViews only 1x throughout its lifetime,\n    //   and remove it not until the view is destroyed.\n    //   (hard, as when a parent view is attached/detached we would need to attach/detach all\n    //    nested projected views as well, even across component boundaries).\n    // - don't track the insertion order of views in the projected views array\n    //   (hard, as when the views of the same template are inserted different view containers)\n    view.state |= 16 /* IsProjectedView */;\n    var projectedViews = dvcElementData.template._projectedViews;\n    if (!projectedViews) {\n        projectedViews = dvcElementData.template._projectedViews = [];\n    }\n    projectedViews.push(view);\n    // Note: we are changing the NodeDef here as we cannot calculate\n    // the fact whether a template is used for projection during compilation.\n    markNodeAsProjectedTemplate(view.parent.def, (view.parentNodeDef));\n}\nfunction markNodeAsProjectedTemplate(viewDef, nodeDef) {\n    if (nodeDef.flags & 4 /* ProjectedTemplate */) {\n        return;\n    }\n    viewDef.nodeFlags |= 4 /* ProjectedTemplate */;\n    nodeDef.flags |= 4 /* ProjectedTemplate */;\n    var parentNodeDef = nodeDef.parent;\n    while (parentNodeDef) {\n        parentNodeDef.childFlags |= 4 /* ProjectedTemplate */;\n        parentNodeDef = parentNodeDef.parent;\n    }\n}\nfunction detachEmbeddedView(elementData, viewIndex) {\n    var embeddedViews = elementData.viewContainer._embeddedViews;\n    if (viewIndex == null || viewIndex >= embeddedViews.length) {\n        viewIndex = embeddedViews.length - 1;\n    }\n    if (viewIndex < 0) {\n        return null;\n    }\n    var view = embeddedViews[viewIndex];\n    view.viewContainerParent = null;\n    removeFromArray(embeddedViews, viewIndex);\n    // See attachProjectedView for why we don't update projectedViews here.\n    Services.dirtyParentQueries(view);\n    renderDetachView(view);\n    return view;\n}\nfunction detachProjectedView(view) {\n    if (!(view.state & 16 /* IsProjectedView */)) {\n        return;\n    }\n    var dvcElementData = declaredViewContainer(view);\n    if (dvcElementData) {\n        var projectedViews = dvcElementData.template._projectedViews;\n        if (projectedViews) {\n            removeFromArray(projectedViews, projectedViews.indexOf(view));\n            Services.dirtyParentQueries(view);\n        }\n    }\n}\nfunction moveEmbeddedView(elementData, oldViewIndex, newViewIndex) {\n    var embeddedViews = elementData.viewContainer._embeddedViews;\n    var view = embeddedViews[oldViewIndex];\n    removeFromArray(embeddedViews, oldViewIndex);\n    if (newViewIndex == null) {\n        newViewIndex = embeddedViews.length;\n    }\n    addToArray(embeddedViews, newViewIndex, view);\n    // Note: Don't need to change projectedViews as the order in there\n    // as always invalid...\n    Services.dirtyParentQueries(view);\n    renderDetachView(view);\n    var prevView = newViewIndex > 0 ? embeddedViews[newViewIndex - 1] : null;\n    renderAttachEmbeddedView(elementData, prevView, view);\n    return view;\n}\nfunction renderAttachEmbeddedView(elementData, prevView, view) {\n    var prevRenderNode = prevView ? renderNode(prevView, (prevView.def.lastRenderRootNode)) :\n        elementData.renderElement;\n    var parentNode = view.renderer.parentNode(prevRenderNode);\n    var nextSibling = view.renderer.nextSibling(prevRenderNode);\n    // Note: We can't check if `nextSibling` is present, as on WebWorkers it will always be!\n    // However, browsers automatically do `appendChild` when there is no `nextSibling`.\n    visitRootRenderNodes(view, 2 /* InsertBefore */, parentNode, nextSibling, undefined);\n}\nfunction renderDetachView(view) {\n    visitRootRenderNodes(view, 3 /* RemoveChild */, null, null, undefined);\n}\nfunction addToArray(arr, index, value) {\n    // perf: array.push is faster than array.splice!\n    if (index >= arr.length) {\n        arr.push(value);\n    }\n    else {\n        arr.splice(index, 0, value);\n    }\n}\nfunction removeFromArray(arr, index) {\n    // perf: array.pop is faster than array.splice!\n    if (index >= arr.length - 1) {\n        arr.pop();\n    }\n    else {\n        arr.splice(index, 1);\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar EMPTY_CONTEXT = new Object();\n// Attention: this function is called as top level function.\n// Putting any logic in here will destroy closure tree shaking!\n\nfunction getComponentViewDefinitionFactory(componentFactory) {\n    return componentFactory.viewDefFactory;\n}\nvar ComponentFactory_ = /** @class */ (function (_super) {\n    __extends(ComponentFactory_, _super);\n    function ComponentFactory_(selector, componentType, viewDefFactory, _inputs, _outputs, ngContentSelectors) {\n        var _this = \n        // Attention: this ctor is called as top level function.\n        // Putting any logic in here will destroy closure tree shaking!\n        _super.call(this) || this;\n        _this.selector = selector;\n        _this.componentType = componentType;\n        _this._inputs = _inputs;\n        _this._outputs = _outputs;\n        _this.ngContentSelectors = ngContentSelectors;\n        _this.viewDefFactory = viewDefFactory;\n        return _this;\n    }\n    Object.defineProperty(ComponentFactory_.prototype, \"inputs\", {\n        get: function () {\n            var inputsArr = [];\n            var inputs = (this._inputs);\n            for (var propName in inputs) {\n                var templateName = inputs[propName];\n                inputsArr.push({ propName: propName, templateName: templateName });\n            }\n            return inputsArr;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComponentFactory_.prototype, \"outputs\", {\n        get: function () {\n            var outputsArr = [];\n            for (var propName in this._outputs) {\n                var templateName = this._outputs[propName];\n                outputsArr.push({ propName: propName, templateName: templateName });\n            }\n            return outputsArr;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates a new component.\n     */\n    /**\n       * Creates a new component.\n       */\n    ComponentFactory_.prototype.create = /**\n       * Creates a new component.\n       */\n    function (injector, projectableNodes, rootSelectorOrNode, ngModule) {\n        if (!ngModule) {\n            throw new Error('ngModule should be provided');\n        }\n        var viewDef = resolveDefinition(this.viewDefFactory);\n        var componentNodeIndex = viewDef.nodes[0].element.componentProvider.nodeIndex;\n        var view = Services.createRootView(injector, projectableNodes || [], rootSelectorOrNode, viewDef, ngModule, EMPTY_CONTEXT);\n        var component = asProviderData(view, componentNodeIndex).instance;\n        if (rootSelectorOrNode) {\n            view.renderer.setAttribute(asElementData(view, 0).renderElement, 'ng-version', VERSION$2.full);\n        }\n        return new ComponentRef_(view, new ViewRef_(view), component);\n    };\n    return ComponentFactory_;\n}(ComponentFactory));\nvar ComponentRef_ = /** @class */ (function (_super) {\n    __extends(ComponentRef_, _super);\n    function ComponentRef_(_view, _viewRef, _component) {\n        var _this = _super.call(this) || this;\n        _this._view = _view;\n        _this._viewRef = _viewRef;\n        _this._component = _component;\n        _this._elDef = _this._view.def.nodes[0];\n        _this.hostView = _viewRef;\n        _this.changeDetectorRef = _viewRef;\n        _this.instance = _component;\n        return _this;\n    }\n    Object.defineProperty(ComponentRef_.prototype, \"location\", {\n        get: function () {\n            return new ElementRef(asElementData(this._view, this._elDef.nodeIndex).renderElement);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComponentRef_.prototype, \"injector\", {\n        get: function () { return new Injector_(this._view, this._elDef); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ComponentRef_.prototype, \"componentType\", {\n        get: function () { return this._component.constructor; },\n        enumerable: true,\n        configurable: true\n    });\n    ComponentRef_.prototype.destroy = function () { this._viewRef.destroy(); };\n    ComponentRef_.prototype.onDestroy = function (callback) { this._viewRef.onDestroy(callback); };\n    return ComponentRef_;\n}(ComponentRef));\nfunction createViewContainerData(view, elDef, elData) {\n    return new ViewContainerRef_(view, elDef, elData);\n}\nvar ViewContainerRef_ = /** @class */ (function () {\n    function ViewContainerRef_(_view, _elDef, _data) {\n        this._view = _view;\n        this._elDef = _elDef;\n        this._data = _data;\n        /**\n           * @internal\n           */\n        this._embeddedViews = [];\n    }\n    Object.defineProperty(ViewContainerRef_.prototype, \"element\", {\n        get: function () { return new ElementRef(this._data.renderElement); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ViewContainerRef_.prototype, \"injector\", {\n        get: function () { return new Injector_(this._view, this._elDef); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ViewContainerRef_.prototype, \"parentInjector\", {\n        get: function () {\n            var view = this._view;\n            var elDef = this._elDef.parent;\n            while (!elDef && view) {\n                elDef = viewParentEl(view);\n                view = (view.parent);\n            }\n            return view ? new Injector_(view, elDef) : new Injector_(this._view, null);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ViewContainerRef_.prototype.clear = function () {\n        var len = this._embeddedViews.length;\n        for (var i = len - 1; i >= 0; i--) {\n            var view = (detachEmbeddedView(this._data, i));\n            Services.destroyView(view);\n        }\n    };\n    ViewContainerRef_.prototype.get = function (index) {\n        var view = this._embeddedViews[index];\n        if (view) {\n            var ref = new ViewRef_(view);\n            ref.attachToViewContainerRef(this);\n            return ref;\n        }\n        return null;\n    };\n    Object.defineProperty(ViewContainerRef_.prototype, \"length\", {\n        get: function () { return this._embeddedViews.length; },\n        enumerable: true,\n        configurable: true\n    });\n    ViewContainerRef_.prototype.createEmbeddedView = function (templateRef, context, index) {\n        var viewRef = templateRef.createEmbeddedView(context || {});\n        this.insert(viewRef, index);\n        return viewRef;\n    };\n    ViewContainerRef_.prototype.createComponent = function (componentFactory, index, injector, projectableNodes, ngModuleRef) {\n        var contextInjector = injector || this.parentInjector;\n        if (!ngModuleRef && !(componentFactory instanceof ComponentFactoryBoundToModule)) {\n            ngModuleRef = contextInjector.get(NgModuleRef);\n        }\n        var componentRef = componentFactory.create(contextInjector, projectableNodes, undefined, ngModuleRef);\n        this.insert(componentRef.hostView, index);\n        return componentRef;\n    };\n    ViewContainerRef_.prototype.insert = function (viewRef, index) {\n        if (viewRef.destroyed) {\n            throw new Error('Cannot insert a destroyed View in a ViewContainer!');\n        }\n        var viewRef_ = viewRef;\n        var viewData = viewRef_._view;\n        attachEmbeddedView(this._view, this._data, index, viewData);\n        viewRef_.attachToViewContainerRef(this);\n        return viewRef;\n    };\n    ViewContainerRef_.prototype.move = function (viewRef, currentIndex) {\n        if (viewRef.destroyed) {\n            throw new Error('Cannot move a destroyed View in a ViewContainer!');\n        }\n        var previousIndex = this._embeddedViews.indexOf(viewRef._view);\n        moveEmbeddedView(this._data, previousIndex, currentIndex);\n        return viewRef;\n    };\n    ViewContainerRef_.prototype.indexOf = function (viewRef) {\n        return this._embeddedViews.indexOf(viewRef._view);\n    };\n    ViewContainerRef_.prototype.remove = function (index) {\n        var viewData = detachEmbeddedView(this._data, index);\n        if (viewData) {\n            Services.destroyView(viewData);\n        }\n    };\n    ViewContainerRef_.prototype.detach = function (index) {\n        var view = detachEmbeddedView(this._data, index);\n        return view ? new ViewRef_(view) : null;\n    };\n    return ViewContainerRef_;\n}());\nfunction createChangeDetectorRef(view) {\n    return new ViewRef_(view);\n}\nvar ViewRef_ = /** @class */ (function () {\n    function ViewRef_(_view) {\n        this._view = _view;\n        this._viewContainerRef = null;\n        this._appRef = null;\n    }\n    Object.defineProperty(ViewRef_.prototype, \"rootNodes\", {\n        get: function () { return rootRenderNodes(this._view); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ViewRef_.prototype, \"context\", {\n        get: function () { return this._view.context; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ViewRef_.prototype, \"destroyed\", {\n        get: function () { return (this._view.state & 128 /* Destroyed */) !== 0; },\n        enumerable: true,\n        configurable: true\n    });\n    ViewRef_.prototype.markForCheck = function () { markParentViewsForCheck(this._view); };\n    ViewRef_.prototype.detach = function () { this._view.state &= ~4 /* Attached */; };\n    ViewRef_.prototype.detectChanges = function () {\n        var fs$$1 = this._view.root.rendererFactory;\n        if (fs$$1.begin) {\n            fs$$1.begin();\n        }\n        try {\n            Services.checkAndUpdateView(this._view);\n        }\n        finally {\n            if (fs$$1.end) {\n                fs$$1.end();\n            }\n        }\n    };\n    ViewRef_.prototype.checkNoChanges = function () { Services.checkNoChangesView(this._view); };\n    ViewRef_.prototype.reattach = function () { this._view.state |= 4 /* Attached */; };\n    ViewRef_.prototype.onDestroy = function (callback) {\n        if (!this._view.disposables) {\n            this._view.disposables = [];\n        }\n        this._view.disposables.push(callback);\n    };\n    ViewRef_.prototype.destroy = function () {\n        if (this._appRef) {\n            this._appRef.detachView(this);\n        }\n        else if (this._viewContainerRef) {\n            this._viewContainerRef.detach(this._viewContainerRef.indexOf(this));\n        }\n        Services.destroyView(this._view);\n    };\n    ViewRef_.prototype.detachFromAppRef = function () {\n        this._appRef = null;\n        renderDetachView(this._view);\n        Services.dirtyParentQueries(this._view);\n    };\n    ViewRef_.prototype.attachToAppRef = function (appRef) {\n        if (this._viewContainerRef) {\n            throw new Error('This view is already attached to a ViewContainer!');\n        }\n        this._appRef = appRef;\n    };\n    ViewRef_.prototype.attachToViewContainerRef = function (vcRef) {\n        if (this._appRef) {\n            throw new Error('This view is already attached directly to the ApplicationRef!');\n        }\n        this._viewContainerRef = vcRef;\n    };\n    return ViewRef_;\n}());\nfunction createTemplateData(view, def) {\n    return new TemplateRef_(view, def);\n}\nvar TemplateRef_ = /** @class */ (function (_super) {\n    __extends(TemplateRef_, _super);\n    function TemplateRef_(_parentView, _def) {\n        var _this = _super.call(this) || this;\n        _this._parentView = _parentView;\n        _this._def = _def;\n        return _this;\n    }\n    TemplateRef_.prototype.createEmbeddedView = function (context) {\n        return new ViewRef_(Services.createEmbeddedView(this._parentView, this._def, (this._def.element.template), context));\n    };\n    Object.defineProperty(TemplateRef_.prototype, \"elementRef\", {\n        get: function () {\n            return new ElementRef(asElementData(this._parentView, this._def.nodeIndex).renderElement);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return TemplateRef_;\n}(TemplateRef));\nfunction createInjector$1(view, elDef) {\n    return new Injector_(view, elDef);\n}\nvar Injector_ = /** @class */ (function () {\n    function Injector_(view, elDef) {\n        this.view = view;\n        this.elDef = elDef;\n    }\n    Injector_.prototype.get = function (token, notFoundValue) {\n        if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }\n        var allowPrivateServices = this.elDef ? (this.elDef.flags & 33554432 /* ComponentView */) !== 0 : false;\n        return Services.resolveDep(this.view, this.elDef, allowPrivateServices, { flags: 0 /* None */, token: token, tokenKey: tokenKey(token) }, notFoundValue);\n    };\n    return Injector_;\n}());\n\nfunction createRendererV1(view) {\n    return new RendererAdapter(view.renderer);\n}\nvar RendererAdapter = /** @class */ (function () {\n    function RendererAdapter(delegate) {\n        this.delegate = delegate;\n    }\n    RendererAdapter.prototype.selectRootElement = function (selectorOrNode) {\n        return this.delegate.selectRootElement(selectorOrNode);\n    };\n    RendererAdapter.prototype.createElement = function (parent, namespaceAndName) {\n        var _a = __read(splitNamespace(namespaceAndName), 2), ns = _a[0], name = _a[1];\n        var el = this.delegate.createElement(name, ns);\n        if (parent) {\n            this.delegate.appendChild(parent, el);\n        }\n        return el;\n    };\n    RendererAdapter.prototype.createViewRoot = function (hostElement) { return hostElement; };\n    RendererAdapter.prototype.createTemplateAnchor = function (parentElement) {\n        var comment = this.delegate.createComment('');\n        if (parentElement) {\n            this.delegate.appendChild(parentElement, comment);\n        }\n        return comment;\n    };\n    RendererAdapter.prototype.createText = function (parentElement, value) {\n        var node = this.delegate.createText(value);\n        if (parentElement) {\n            this.delegate.appendChild(parentElement, node);\n        }\n        return node;\n    };\n    RendererAdapter.prototype.projectNodes = function (parentElement, nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            this.delegate.appendChild(parentElement, nodes[i]);\n        }\n    };\n    RendererAdapter.prototype.attachViewAfter = function (node, viewRootNodes) {\n        var parentElement = this.delegate.parentNode(node);\n        var nextSibling = this.delegate.nextSibling(node);\n        for (var i = 0; i < viewRootNodes.length; i++) {\n            this.delegate.insertBefore(parentElement, viewRootNodes[i], nextSibling);\n        }\n    };\n    RendererAdapter.prototype.detachView = function (viewRootNodes) {\n        for (var i = 0; i < viewRootNodes.length; i++) {\n            var node = viewRootNodes[i];\n            var parentElement = this.delegate.parentNode(node);\n            this.delegate.removeChild(parentElement, node);\n        }\n    };\n    RendererAdapter.prototype.destroyView = function (hostElement, viewAllNodes) {\n        for (var i = 0; i < viewAllNodes.length; i++) {\n            this.delegate.destroyNode(viewAllNodes[i]);\n        }\n    };\n    RendererAdapter.prototype.listen = function (renderElement, name, callback) {\n        return this.delegate.listen(renderElement, name, callback);\n    };\n    RendererAdapter.prototype.listenGlobal = function (target, name, callback) {\n        return this.delegate.listen(target, name, callback);\n    };\n    RendererAdapter.prototype.setElementProperty = function (renderElement, propertyName, propertyValue) {\n        this.delegate.setProperty(renderElement, propertyName, propertyValue);\n    };\n    RendererAdapter.prototype.setElementAttribute = function (renderElement, namespaceAndName, attributeValue) {\n        var _a = __read(splitNamespace(namespaceAndName), 2), ns = _a[0], name = _a[1];\n        if (attributeValue != null) {\n            this.delegate.setAttribute(renderElement, name, attributeValue, ns);\n        }\n        else {\n            this.delegate.removeAttribute(renderElement, name, ns);\n        }\n    };\n    RendererAdapter.prototype.setBindingDebugInfo = function (renderElement, propertyName, propertyValue) { };\n    RendererAdapter.prototype.setElementClass = function (renderElement, className, isAdd) {\n        if (isAdd) {\n            this.delegate.addClass(renderElement, className);\n        }\n        else {\n            this.delegate.removeClass(renderElement, className);\n        }\n    };\n    RendererAdapter.prototype.setElementStyle = function (renderElement, styleName, styleValue) {\n        if (styleValue != null) {\n            this.delegate.setStyle(renderElement, styleName, styleValue);\n        }\n        else {\n            this.delegate.removeStyle(renderElement, styleName);\n        }\n    };\n    RendererAdapter.prototype.invokeElementMethod = function (renderElement, methodName, args) {\n        renderElement[methodName].apply(renderElement, args);\n    };\n    RendererAdapter.prototype.setText = function (renderNode$$1, text) { this.delegate.setValue(renderNode$$1, text); };\n    RendererAdapter.prototype.animate = function () { throw new Error('Renderer.animate is no longer supported!'); };\n    return RendererAdapter;\n}());\nfunction createNgModuleRef(moduleType, parent, bootstrapComponents, def) {\n    return new NgModuleRef_(moduleType, parent, bootstrapComponents, def);\n}\nvar NgModuleRef_ = /** @class */ (function () {\n    function NgModuleRef_(_moduleType, _parent, _bootstrapComponents, _def) {\n        this._moduleType = _moduleType;\n        this._parent = _parent;\n        this._bootstrapComponents = _bootstrapComponents;\n        this._def = _def;\n        this._destroyListeners = [];\n        this._destroyed = false;\n        this.injector = this;\n        initNgModule(this);\n    }\n    NgModuleRef_.prototype.get = function (token, notFoundValue, injectFlags) {\n        if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }\n        if (injectFlags === void 0) { injectFlags = 0 /* Default */; }\n        var flags = 0;\n        if (injectFlags & 4 /* SkipSelf */) {\n            flags |= 1 /* SkipSelf */;\n        }\n        else if (injectFlags & 2 /* Self */) {\n            flags |= 4 /* Self */;\n        }\n        return resolveNgModuleDep(this, { token: token, tokenKey: tokenKey(token), flags: flags }, notFoundValue);\n    };\n    Object.defineProperty(NgModuleRef_.prototype, \"instance\", {\n        get: function () { return this.get(this._moduleType); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NgModuleRef_.prototype, \"componentFactoryResolver\", {\n        get: function () { return this.get(ComponentFactoryResolver); },\n        enumerable: true,\n        configurable: true\n    });\n    NgModuleRef_.prototype.destroy = function () {\n        if (this._destroyed) {\n            throw new Error(\"The ng module \" + stringify$1(this.instance.constructor) + \" has already been destroyed.\");\n        }\n        this._destroyed = true;\n        callNgModuleLifecycle(this, 131072 /* OnDestroy */);\n        this._destroyListeners.forEach(function (listener) { return listener(); });\n    };\n    NgModuleRef_.prototype.onDestroy = function (callback) { this._destroyListeners.push(callback); };\n    return NgModuleRef_;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar RendererV1TokenKey = tokenKey(Renderer);\nvar Renderer2TokenKey = tokenKey(Renderer2);\nvar ElementRefTokenKey = tokenKey(ElementRef);\nvar ViewContainerRefTokenKey = tokenKey(ViewContainerRef);\nvar TemplateRefTokenKey = tokenKey(TemplateRef);\nvar ChangeDetectorRefTokenKey = tokenKey(ChangeDetectorRef);\nvar InjectorRefTokenKey = tokenKey(Injector);\nvar INJECTORRefTokenKey = tokenKey(INJECTOR);\n\n\n\n\nfunction createProviderInstance(view, def) {\n    return _createProviderInstance(view, def);\n}\nfunction createPipeInstance(view, def) {\n    // deps are looked up from component.\n    var compView = view;\n    while (compView.parent && !isComponentView(compView)) {\n        compView = compView.parent;\n    }\n    // pipes can see the private services of the component\n    var allowPrivateServices = true;\n    // pipes are always eager and classes!\n    return createClass((compView.parent), (viewParentEl(compView)), allowPrivateServices, def.provider.value, def.provider.deps);\n}\nfunction createDirectiveInstance(view, def) {\n    // components can see other private services, other directives can't.\n    var allowPrivateServices = (def.flags & 32768 /* Component */) > 0;\n    // directives are always eager and classes!\n    var instance = createClass(view, (def.parent), allowPrivateServices, def.provider.value, def.provider.deps);\n    if (def.outputs.length) {\n        for (var i = 0; i < def.outputs.length; i++) {\n            var output = def.outputs[i];\n            var subscription = instance[output.propName].subscribe(eventHandlerClosure(view, def.parent.nodeIndex, output.eventName));\n            view.disposables[def.outputIndex + i] = subscription.unsubscribe.bind(subscription);\n        }\n    }\n    return instance;\n}\nfunction eventHandlerClosure(view, index, eventName) {\n    return function (event) { return dispatchEvent(view, index, eventName, event); };\n}\nfunction checkAndUpdateDirectiveInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var providerData = asProviderData(view, def.nodeIndex);\n    var directive = providerData.instance;\n    var changed = false;\n    var changes = (undefined);\n    var bindLen = def.bindings.length;\n    if (bindLen > 0 && checkBinding(view, def, 0, v0)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 0, v0, changes);\n    }\n    if (bindLen > 1 && checkBinding(view, def, 1, v1)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 1, v1, changes);\n    }\n    if (bindLen > 2 && checkBinding(view, def, 2, v2)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 2, v2, changes);\n    }\n    if (bindLen > 3 && checkBinding(view, def, 3, v3)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 3, v3, changes);\n    }\n    if (bindLen > 4 && checkBinding(view, def, 4, v4)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 4, v4, changes);\n    }\n    if (bindLen > 5 && checkBinding(view, def, 5, v5)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 5, v5, changes);\n    }\n    if (bindLen > 6 && checkBinding(view, def, 6, v6)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 6, v6, changes);\n    }\n    if (bindLen > 7 && checkBinding(view, def, 7, v7)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 7, v7, changes);\n    }\n    if (bindLen > 8 && checkBinding(view, def, 8, v8)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 8, v8, changes);\n    }\n    if (bindLen > 9 && checkBinding(view, def, 9, v9)) {\n        changed = true;\n        changes = updateProp(view, providerData, def, 9, v9, changes);\n    }\n    if (changes) {\n        directive.ngOnChanges(changes);\n    }\n    if ((def.flags & 65536 /* OnInit */) &&\n        shouldCallLifecycleInitHook(view, 256 /* InitState_CallingOnInit */, def.nodeIndex)) {\n        directive.ngOnInit();\n    }\n    if (def.flags & 262144 /* DoCheck */) {\n        directive.ngDoCheck();\n    }\n    return changed;\n}\nfunction checkAndUpdateDirectiveDynamic(view, def, values) {\n    var providerData = asProviderData(view, def.nodeIndex);\n    var directive = providerData.instance;\n    var changed = false;\n    var changes = (undefined);\n    for (var i = 0; i < values.length; i++) {\n        if (checkBinding(view, def, i, values[i])) {\n            changed = true;\n            changes = updateProp(view, providerData, def, i, values[i], changes);\n        }\n    }\n    if (changes) {\n        directive.ngOnChanges(changes);\n    }\n    if ((def.flags & 65536 /* OnInit */) &&\n        shouldCallLifecycleInitHook(view, 256 /* InitState_CallingOnInit */, def.nodeIndex)) {\n        directive.ngOnInit();\n    }\n    if (def.flags & 262144 /* DoCheck */) {\n        directive.ngDoCheck();\n    }\n    return changed;\n}\nfunction _createProviderInstance(view, def) {\n    // private services can see other private services\n    var allowPrivateServices = (def.flags & 8192 /* PrivateProvider */) > 0;\n    var providerDef = def.provider;\n    switch (def.flags & 201347067 /* Types */) {\n        case 512 /* TypeClassProvider */:\n            return createClass(view, (def.parent), allowPrivateServices, providerDef.value, providerDef.deps);\n        case 1024 /* TypeFactoryProvider */:\n            return callFactory(view, (def.parent), allowPrivateServices, providerDef.value, providerDef.deps);\n        case 2048 /* TypeUseExistingProvider */:\n            return resolveDep(view, (def.parent), allowPrivateServices, providerDef.deps[0]);\n        case 256 /* TypeValueProvider */:\n            return providerDef.value;\n    }\n}\nfunction createClass(view, elDef, allowPrivateServices, ctor, deps) {\n    var len = deps.length;\n    switch (len) {\n        case 0:\n            return new ctor();\n        case 1:\n            return new ctor(resolveDep(view, elDef, allowPrivateServices, deps[0]));\n        case 2:\n            return new ctor(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]));\n        case 3:\n            return new ctor(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]), resolveDep(view, elDef, allowPrivateServices, deps[2]));\n        default:\n            var depValues = new Array(len);\n            for (var i = 0; i < len; i++) {\n                depValues[i] = resolveDep(view, elDef, allowPrivateServices, deps[i]);\n            }\n            return new (ctor.bind.apply(ctor, __spread([void 0], depValues)))();\n    }\n}\nfunction callFactory(view, elDef, allowPrivateServices, factory, deps) {\n    var len = deps.length;\n    switch (len) {\n        case 0:\n            return factory();\n        case 1:\n            return factory(resolveDep(view, elDef, allowPrivateServices, deps[0]));\n        case 2:\n            return factory(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]));\n        case 3:\n            return factory(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]), resolveDep(view, elDef, allowPrivateServices, deps[2]));\n        default:\n            var depValues = Array(len);\n            for (var i = 0; i < len; i++) {\n                depValues[i] = resolveDep(view, elDef, allowPrivateServices, deps[i]);\n            }\n            return factory.apply(void 0, __spread(depValues));\n    }\n}\n// This default value is when checking the hierarchy for a token.\n//\n// It means both:\n// - the token is not provided by the current injector,\n// - only the element injectors should be checked (ie do not check module injectors\n//\n//          mod1\n//         /\n//       el1   mod2\n//         \\  /\n//         el2\n//\n// When requesting el2.injector.get(token), we should check in the following order and return the\n// first found value:\n// - el2.injector.get(token, default)\n// - el1.injector.get(token, NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR) -> do not check the module\n// - mod2.injector.get(token, default)\nvar NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR = {};\nfunction resolveDep(view, elDef, allowPrivateServices, depDef, notFoundValue) {\n    if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }\n    if (depDef.flags & 8 /* Value */) {\n        return depDef.token;\n    }\n    var startView = view;\n    if (depDef.flags & 2 /* Optional */) {\n        notFoundValue = null;\n    }\n    var tokenKey$$1 = depDef.tokenKey;\n    if (tokenKey$$1 === ChangeDetectorRefTokenKey) {\n        // directives on the same element as a component should be able to control the change detector\n        // of that component as well.\n        allowPrivateServices = !!(elDef && elDef.element.componentView);\n    }\n    if (elDef && (depDef.flags & 1 /* SkipSelf */)) {\n        allowPrivateServices = false;\n        elDef = (elDef.parent);\n    }\n    var searchView = view;\n    while (searchView) {\n        if (elDef) {\n            switch (tokenKey$$1) {\n                case RendererV1TokenKey: {\n                    var compView = findCompView(searchView, elDef, allowPrivateServices);\n                    return createRendererV1(compView);\n                }\n                case Renderer2TokenKey: {\n                    var compView = findCompView(searchView, elDef, allowPrivateServices);\n                    return compView.renderer;\n                }\n                case ElementRefTokenKey:\n                    return new ElementRef(asElementData(searchView, elDef.nodeIndex).renderElement);\n                case ViewContainerRefTokenKey:\n                    return asElementData(searchView, elDef.nodeIndex).viewContainer;\n                case TemplateRefTokenKey: {\n                    if (elDef.element.template) {\n                        return asElementData(searchView, elDef.nodeIndex).template;\n                    }\n                    break;\n                }\n                case ChangeDetectorRefTokenKey: {\n                    var cdView = findCompView(searchView, elDef, allowPrivateServices);\n                    return createChangeDetectorRef(cdView);\n                }\n                case InjectorRefTokenKey:\n                case INJECTORRefTokenKey:\n                    return createInjector$1(searchView, elDef);\n                default:\n                    var providerDef_1 = (allowPrivateServices ? elDef.element.allProviders :\n                        elDef.element.publicProviders)[tokenKey$$1];\n                    if (providerDef_1) {\n                        var providerData = asProviderData(searchView, providerDef_1.nodeIndex);\n                        if (!providerData) {\n                            providerData = { instance: _createProviderInstance(searchView, providerDef_1) };\n                            searchView.nodes[providerDef_1.nodeIndex] = providerData;\n                        }\n                        return providerData.instance;\n                    }\n            }\n        }\n        allowPrivateServices = isComponentView(searchView);\n        elDef = (viewParentEl(searchView));\n        searchView = (searchView.parent);\n        if (depDef.flags & 4 /* Self */) {\n            searchView = null;\n        }\n    }\n    var value = startView.root.injector.get(depDef.token, NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR);\n    if (value !== NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR ||\n        notFoundValue === NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR) {\n        // Return the value from the root element injector when\n        // - it provides it\n        //   (value !== NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR)\n        // - the module injector should not be checked\n        //   (notFoundValue === NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR)\n        return value;\n    }\n    return startView.root.ngModule.injector.get(depDef.token, notFoundValue);\n}\nfunction findCompView(view, elDef, allowPrivateServices) {\n    var compView;\n    if (allowPrivateServices) {\n        compView = asElementData(view, elDef.nodeIndex).componentView;\n    }\n    else {\n        compView = view;\n        while (compView.parent && !isComponentView(compView)) {\n            compView = compView.parent;\n        }\n    }\n    return compView;\n}\nfunction updateProp(view, providerData, def, bindingIdx, value, changes) {\n    if (def.flags & 32768 /* Component */) {\n        var compView = asElementData(view, def.parent.nodeIndex).componentView;\n        if (compView.def.flags & 2 /* OnPush */) {\n            compView.state |= 8 /* ChecksEnabled */;\n        }\n    }\n    var binding = def.bindings[bindingIdx];\n    var propName = (binding.name);\n    // Note: This is still safe with Closure Compiler as\n    // the user passed in the property name as an object has to `providerDef`,\n    // so Closure Compiler will have renamed the property correctly already.\n    providerData.instance[propName] = value;\n    if (def.flags & 524288 /* OnChanges */) {\n        changes = changes || {};\n        var oldValue = WrappedValue.unwrap(view.oldValues[def.bindingIndex + bindingIdx]);\n        var binding_1 = def.bindings[bindingIdx];\n        changes[binding_1.nonMinifiedName] =\n            new SimpleChange(oldValue, value, (view.state & 2 /* FirstCheck */) !== 0);\n    }\n    view.oldValues[def.bindingIndex + bindingIdx] = value;\n    return changes;\n}\n// This function calls the ngAfterContentCheck, ngAfterContentInit,\n// ngAfterViewCheck, and ngAfterViewInit lifecycle hooks (depending on the node\n// flags in lifecycle). Unlike ngDoCheck, ngOnChanges and ngOnInit, which are\n// called during a pre-order traversal of the view tree (that is calling the\n// parent hooks before the child hooks) these events are sent in using a\n// post-order traversal of the tree (children before parents). This changes the\n// meaning of initIndex in the view state. For ngOnInit, initIndex tracks the\n// expected nodeIndex which a ngOnInit should be called. When sending\n// ngAfterContentInit and ngAfterViewInit it is the expected count of\n// ngAfterContentInit or ngAfterViewInit methods that have been called. This\n// ensure that despite being called recursively or after picking up after an\n// exception, the ngAfterContentInit or ngAfterViewInit will be called on the\n// correct nodes. Consider for example, the following (where E is an element\n// and D is a directive)\n//  Tree:       pre-order index  post-order index\n//    E1        0                6\n//      E2      1                1\n//       D3     2                0\n//      E4      3                5\n//       E5     4                4\n//        E6    5                2\n//        E7    6                3\n// As can be seen, the post-order index has an unclear relationship to the\n// pre-order index (postOrderIndex === preOrderIndex - parentCount +\n// childCount). Since number of calls to ngAfterContentInit and ngAfterViewInit\n// are stable (will be the same for the same view regardless of exceptions or\n// recursion) we just need to count them which will roughly correspond to the\n// post-order index (it skips elements and directives that do not have\n// lifecycle hooks).\n//\n// For example, if an exception is raised in the E6.onAfterViewInit() the\n// initIndex is left at 3 (by shouldCallLifecycleInitHook() which set it to\n// initIndex + 1). When checkAndUpdateView() is called again D3, E2 and E6 will\n// not have their ngAfterViewInit() called but, starting with E7, the rest of\n// the view will begin getting ngAfterViewInit() called until a check and\n// pass is complete.\n//\n// This algorthim also handles recursion. Consider if E4's ngAfterViewInit()\n// indirectly calls E1's ChangeDetectorRef.detectChanges(). The expected\n// initIndex is set to 6, the recusive checkAndUpdateView() starts walk again.\n// D3, E2, E6, E7, E5 and E4 are skipped, ngAfterViewInit() is called on E1.\n// When the recursion returns the initIndex will be 7 so E1 is skipped as it\n// has already been called in the recursively called checkAnUpdateView().\nfunction callLifecycleHooksChildrenFirst(view, lifecycles) {\n    if (!(view.def.nodeFlags & lifecycles)) {\n        return;\n    }\n    var nodes = view.def.nodes;\n    var initIndex = 0;\n    for (var i = 0; i < nodes.length; i++) {\n        var nodeDef = nodes[i];\n        var parent_1 = nodeDef.parent;\n        if (!parent_1 && nodeDef.flags & lifecycles) {\n            // matching root node (e.g. a pipe)\n            callProviderLifecycles(view, i, nodeDef.flags & lifecycles, initIndex++);\n        }\n        if ((nodeDef.childFlags & lifecycles) === 0) {\n            // no child matches one of the lifecycles\n            i += nodeDef.childCount;\n        }\n        while (parent_1 && (parent_1.flags & 1 /* TypeElement */) &&\n            i === parent_1.nodeIndex + parent_1.childCount) {\n            // last child of an element\n            if (parent_1.directChildFlags & lifecycles) {\n                initIndex = callElementProvidersLifecycles(view, parent_1, lifecycles, initIndex);\n            }\n            parent_1 = parent_1.parent;\n        }\n    }\n}\nfunction callElementProvidersLifecycles(view, elDef, lifecycles, initIndex) {\n    for (var i = elDef.nodeIndex + 1; i <= elDef.nodeIndex + elDef.childCount; i++) {\n        var nodeDef = view.def.nodes[i];\n        if (nodeDef.flags & lifecycles) {\n            callProviderLifecycles(view, i, nodeDef.flags & lifecycles, initIndex++);\n        }\n        // only visit direct children\n        i += nodeDef.childCount;\n    }\n    return initIndex;\n}\nfunction callProviderLifecycles(view, index, lifecycles, initIndex) {\n    var providerData = asProviderData(view, index);\n    if (!providerData) {\n        return;\n    }\n    var provider = providerData.instance;\n    if (!provider) {\n        return;\n    }\n    Services.setCurrentNode(view, index);\n    if (lifecycles & 1048576 /* AfterContentInit */ &&\n        shouldCallLifecycleInitHook(view, 512 /* InitState_CallingAfterContentInit */, initIndex)) {\n        provider.ngAfterContentInit();\n    }\n    if (lifecycles & 2097152 /* AfterContentChecked */) {\n        provider.ngAfterContentChecked();\n    }\n    if (lifecycles & 4194304 /* AfterViewInit */ &&\n        shouldCallLifecycleInitHook(view, 768 /* InitState_CallingAfterViewInit */, initIndex)) {\n        provider.ngAfterViewInit();\n    }\n    if (lifecycles & 8388608 /* AfterViewChecked */) {\n        provider.ngAfterViewChecked();\n    }\n    if (lifecycles & 131072 /* OnDestroy */) {\n        provider.ngOnDestroy();\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction createQuery() {\n    return new QueryList();\n}\nfunction dirtyParentQueries(view) {\n    var queryIds = view.def.nodeMatchedQueries;\n    while (view.parent && isEmbeddedView(view)) {\n        var tplDef = (view.parentNodeDef);\n        view = view.parent;\n        // content queries\n        var end = tplDef.nodeIndex + tplDef.childCount;\n        for (var i = 0; i <= end; i++) {\n            var nodeDef = view.def.nodes[i];\n            if ((nodeDef.flags & 67108864 /* TypeContentQuery */) &&\n                (nodeDef.flags & 536870912 /* DynamicQuery */) &&\n                (nodeDef.query.filterId & queryIds) === nodeDef.query.filterId) {\n                asQueryList(view, i).setDirty();\n            }\n            if ((nodeDef.flags & 1 /* TypeElement */ && i + nodeDef.childCount < tplDef.nodeIndex) ||\n                !(nodeDef.childFlags & 67108864 /* TypeContentQuery */) ||\n                !(nodeDef.childFlags & 536870912 /* DynamicQuery */)) {\n                // skip elements that don't contain the template element or no query.\n                i += nodeDef.childCount;\n            }\n        }\n    }\n    // view queries\n    if (view.def.nodeFlags & 134217728 /* TypeViewQuery */) {\n        for (var i = 0; i < view.def.nodes.length; i++) {\n            var nodeDef = view.def.nodes[i];\n            if ((nodeDef.flags & 134217728 /* TypeViewQuery */) && (nodeDef.flags & 536870912 /* DynamicQuery */)) {\n                asQueryList(view, i).setDirty();\n            }\n            // only visit the root nodes\n            i += nodeDef.childCount;\n        }\n    }\n}\nfunction checkAndUpdateQuery(view, nodeDef) {\n    var queryList = asQueryList(view, nodeDef.nodeIndex);\n    if (!queryList.dirty) {\n        return;\n    }\n    var directiveInstance;\n    var newValues = (undefined);\n    if (nodeDef.flags & 67108864 /* TypeContentQuery */) {\n        var elementDef = (nodeDef.parent.parent);\n        newValues = calcQueryValues(view, elementDef.nodeIndex, elementDef.nodeIndex + elementDef.childCount, (nodeDef.query), []);\n        directiveInstance = asProviderData(view, nodeDef.parent.nodeIndex).instance;\n    }\n    else if (nodeDef.flags & 134217728 /* TypeViewQuery */) {\n        newValues = calcQueryValues(view, 0, view.def.nodes.length - 1, (nodeDef.query), []);\n        directiveInstance = view.component;\n    }\n    queryList.reset(newValues);\n    var bindings = nodeDef.query.bindings;\n    var notify = false;\n    for (var i = 0; i < bindings.length; i++) {\n        var binding = bindings[i];\n        var boundValue = void 0;\n        switch (binding.bindingType) {\n            case 0 /* First */:\n                boundValue = queryList.first;\n                break;\n            case 1 /* All */:\n                boundValue = queryList;\n                notify = true;\n                break;\n        }\n        directiveInstance[binding.propName] = boundValue;\n    }\n    if (notify) {\n        queryList.notifyOnChanges();\n    }\n}\nfunction calcQueryValues(view, startIndex, endIndex, queryDef, values) {\n    for (var i = startIndex; i <= endIndex; i++) {\n        var nodeDef = view.def.nodes[i];\n        var valueType = nodeDef.matchedQueries[queryDef.id];\n        if (valueType != null) {\n            values.push(getQueryValue(view, nodeDef, valueType));\n        }\n        if (nodeDef.flags & 1 /* TypeElement */ && nodeDef.element.template &&\n            (nodeDef.element.template.nodeMatchedQueries & queryDef.filterId) ===\n                queryDef.filterId) {\n            var elementData = asElementData(view, i);\n            // check embedded views that were attached at the place of their template,\n            // but process child nodes first if some match the query (see issue #16568)\n            if ((nodeDef.childMatchedQueries & queryDef.filterId) === queryDef.filterId) {\n                calcQueryValues(view, i + 1, i + nodeDef.childCount, queryDef, values);\n                i += nodeDef.childCount;\n            }\n            if (nodeDef.flags & 16777216 /* EmbeddedViews */) {\n                var embeddedViews = elementData.viewContainer._embeddedViews;\n                for (var k = 0; k < embeddedViews.length; k++) {\n                    var embeddedView = embeddedViews[k];\n                    var dvc = declaredViewContainer(embeddedView);\n                    if (dvc && dvc === elementData) {\n                        calcQueryValues(embeddedView, 0, embeddedView.def.nodes.length - 1, queryDef, values);\n                    }\n                }\n            }\n            var projectedViews = elementData.template._projectedViews;\n            if (projectedViews) {\n                for (var k = 0; k < projectedViews.length; k++) {\n                    var projectedView = projectedViews[k];\n                    calcQueryValues(projectedView, 0, projectedView.def.nodes.length - 1, queryDef, values);\n                }\n            }\n        }\n        if ((nodeDef.childMatchedQueries & queryDef.filterId) !== queryDef.filterId) {\n            // if no child matches the query, skip the children.\n            i += nodeDef.childCount;\n        }\n    }\n    return values;\n}\nfunction getQueryValue(view, nodeDef, queryValueType) {\n    if (queryValueType != null) {\n        // a match\n        switch (queryValueType) {\n            case 1 /* RenderElement */:\n                return asElementData(view, nodeDef.nodeIndex).renderElement;\n            case 0 /* ElementRef */:\n                return new ElementRef(asElementData(view, nodeDef.nodeIndex).renderElement);\n            case 2 /* TemplateRef */:\n                return asElementData(view, nodeDef.nodeIndex).template;\n            case 3 /* ViewContainerRef */:\n                return asElementData(view, nodeDef.nodeIndex).viewContainer;\n            case 4 /* Provider */:\n                return asProviderData(view, nodeDef.nodeIndex).instance;\n        }\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction appendNgContent(view, renderHost, def) {\n    var parentEl = getParentRenderElement(view, renderHost, def);\n    if (!parentEl) {\n        // Nothing to do if there is no parent element.\n        return;\n    }\n    var ngContentIndex = def.ngContent.index;\n    visitProjectedRenderNodes(view, ngContentIndex, 1 /* AppendChild */, parentEl, null, undefined);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\n\nfunction createPureExpression(view, def) {\n    return { value: undefined };\n}\nfunction checkAndUpdatePureExpressionInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var bindings = def.bindings;\n    var changed = false;\n    var bindLen = bindings.length;\n    if (bindLen > 0 && checkAndUpdateBinding(view, def, 0, v0))\n        changed = true;\n    if (bindLen > 1 && checkAndUpdateBinding(view, def, 1, v1))\n        changed = true;\n    if (bindLen > 2 && checkAndUpdateBinding(view, def, 2, v2))\n        changed = true;\n    if (bindLen > 3 && checkAndUpdateBinding(view, def, 3, v3))\n        changed = true;\n    if (bindLen > 4 && checkAndUpdateBinding(view, def, 4, v4))\n        changed = true;\n    if (bindLen > 5 && checkAndUpdateBinding(view, def, 5, v5))\n        changed = true;\n    if (bindLen > 6 && checkAndUpdateBinding(view, def, 6, v6))\n        changed = true;\n    if (bindLen > 7 && checkAndUpdateBinding(view, def, 7, v7))\n        changed = true;\n    if (bindLen > 8 && checkAndUpdateBinding(view, def, 8, v8))\n        changed = true;\n    if (bindLen > 9 && checkAndUpdateBinding(view, def, 9, v9))\n        changed = true;\n    if (changed) {\n        var data = asPureExpressionData(view, def.nodeIndex);\n        var value = void 0;\n        switch (def.flags & 201347067 /* Types */) {\n            case 32 /* TypePureArray */:\n                value = new Array(bindings.length);\n                if (bindLen > 0)\n                    value[0] = v0;\n                if (bindLen > 1)\n                    value[1] = v1;\n                if (bindLen > 2)\n                    value[2] = v2;\n                if (bindLen > 3)\n                    value[3] = v3;\n                if (bindLen > 4)\n                    value[4] = v4;\n                if (bindLen > 5)\n                    value[5] = v5;\n                if (bindLen > 6)\n                    value[6] = v6;\n                if (bindLen > 7)\n                    value[7] = v7;\n                if (bindLen > 8)\n                    value[8] = v8;\n                if (bindLen > 9)\n                    value[9] = v9;\n                break;\n            case 64 /* TypePureObject */:\n                value = {};\n                if (bindLen > 0)\n                    value[bindings[0].name] = v0;\n                if (bindLen > 1)\n                    value[bindings[1].name] = v1;\n                if (bindLen > 2)\n                    value[bindings[2].name] = v2;\n                if (bindLen > 3)\n                    value[bindings[3].name] = v3;\n                if (bindLen > 4)\n                    value[bindings[4].name] = v4;\n                if (bindLen > 5)\n                    value[bindings[5].name] = v5;\n                if (bindLen > 6)\n                    value[bindings[6].name] = v6;\n                if (bindLen > 7)\n                    value[bindings[7].name] = v7;\n                if (bindLen > 8)\n                    value[bindings[8].name] = v8;\n                if (bindLen > 9)\n                    value[bindings[9].name] = v9;\n                break;\n            case 128 /* TypePurePipe */:\n                var pipe = v0;\n                switch (bindLen) {\n                    case 1:\n                        value = pipe.transform(v0);\n                        break;\n                    case 2:\n                        value = pipe.transform(v1);\n                        break;\n                    case 3:\n                        value = pipe.transform(v1, v2);\n                        break;\n                    case 4:\n                        value = pipe.transform(v1, v2, v3);\n                        break;\n                    case 5:\n                        value = pipe.transform(v1, v2, v3, v4);\n                        break;\n                    case 6:\n                        value = pipe.transform(v1, v2, v3, v4, v5);\n                        break;\n                    case 7:\n                        value = pipe.transform(v1, v2, v3, v4, v5, v6);\n                        break;\n                    case 8:\n                        value = pipe.transform(v1, v2, v3, v4, v5, v6, v7);\n                        break;\n                    case 9:\n                        value = pipe.transform(v1, v2, v3, v4, v5, v6, v7, v8);\n                        break;\n                    case 10:\n                        value = pipe.transform(v1, v2, v3, v4, v5, v6, v7, v8, v9);\n                        break;\n                }\n                break;\n        }\n        data.value = value;\n    }\n    return changed;\n}\nfunction checkAndUpdatePureExpressionDynamic(view, def, values) {\n    var bindings = def.bindings;\n    var changed = false;\n    for (var i = 0; i < values.length; i++) {\n        // Note: We need to loop over all values, so that\n        // the old values are updates as well!\n        if (checkAndUpdateBinding(view, def, i, values[i])) {\n            changed = true;\n        }\n    }\n    if (changed) {\n        var data = asPureExpressionData(view, def.nodeIndex);\n        var value = void 0;\n        switch (def.flags & 201347067 /* Types */) {\n            case 32 /* TypePureArray */:\n                value = values;\n                break;\n            case 64 /* TypePureObject */:\n                value = {};\n                for (var i = 0; i < values.length; i++) {\n                    value[bindings[i].name] = values[i];\n                }\n                break;\n            case 128 /* TypePurePipe */:\n                var pipe = values[0];\n                var params = values.slice(1);\n                value = pipe.transform.apply(pipe, __spread(params));\n                break;\n        }\n        data.value = value;\n    }\n    return changed;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction createText(view, renderHost, def) {\n    var renderNode$$1;\n    var renderer = view.renderer;\n    renderNode$$1 = renderer.createText(def.text.prefix);\n    var parentEl = getParentRenderElement(view, renderHost, def);\n    if (parentEl) {\n        renderer.appendChild(parentEl, renderNode$$1);\n    }\n    return { renderText: renderNode$$1 };\n}\nfunction checkAndUpdateTextInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var changed = false;\n    var bindings = def.bindings;\n    var bindLen = bindings.length;\n    if (bindLen > 0 && checkAndUpdateBinding(view, def, 0, v0))\n        changed = true;\n    if (bindLen > 1 && checkAndUpdateBinding(view, def, 1, v1))\n        changed = true;\n    if (bindLen > 2 && checkAndUpdateBinding(view, def, 2, v2))\n        changed = true;\n    if (bindLen > 3 && checkAndUpdateBinding(view, def, 3, v3))\n        changed = true;\n    if (bindLen > 4 && checkAndUpdateBinding(view, def, 4, v4))\n        changed = true;\n    if (bindLen > 5 && checkAndUpdateBinding(view, def, 5, v5))\n        changed = true;\n    if (bindLen > 6 && checkAndUpdateBinding(view, def, 6, v6))\n        changed = true;\n    if (bindLen > 7 && checkAndUpdateBinding(view, def, 7, v7))\n        changed = true;\n    if (bindLen > 8 && checkAndUpdateBinding(view, def, 8, v8))\n        changed = true;\n    if (bindLen > 9 && checkAndUpdateBinding(view, def, 9, v9))\n        changed = true;\n    if (changed) {\n        var value = def.text.prefix;\n        if (bindLen > 0)\n            value += _addInterpolationPart(v0, bindings[0]);\n        if (bindLen > 1)\n            value += _addInterpolationPart(v1, bindings[1]);\n        if (bindLen > 2)\n            value += _addInterpolationPart(v2, bindings[2]);\n        if (bindLen > 3)\n            value += _addInterpolationPart(v3, bindings[3]);\n        if (bindLen > 4)\n            value += _addInterpolationPart(v4, bindings[4]);\n        if (bindLen > 5)\n            value += _addInterpolationPart(v5, bindings[5]);\n        if (bindLen > 6)\n            value += _addInterpolationPart(v6, bindings[6]);\n        if (bindLen > 7)\n            value += _addInterpolationPart(v7, bindings[7]);\n        if (bindLen > 8)\n            value += _addInterpolationPart(v8, bindings[8]);\n        if (bindLen > 9)\n            value += _addInterpolationPart(v9, bindings[9]);\n        var renderNode$$1 = asTextData(view, def.nodeIndex).renderText;\n        view.renderer.setValue(renderNode$$1, value);\n    }\n    return changed;\n}\nfunction checkAndUpdateTextDynamic(view, def, values) {\n    var bindings = def.bindings;\n    var changed = false;\n    for (var i = 0; i < values.length; i++) {\n        // Note: We need to loop over all values, so that\n        // the old values are updates as well!\n        if (checkAndUpdateBinding(view, def, i, values[i])) {\n            changed = true;\n        }\n    }\n    if (changed) {\n        var value = '';\n        for (var i = 0; i < values.length; i++) {\n            value = value + _addInterpolationPart(values[i], bindings[i]);\n        }\n        value = def.text.prefix + value;\n        var renderNode$$1 = asTextData(view, def.nodeIndex).renderText;\n        view.renderer.setValue(renderNode$$1, value);\n    }\n    return changed;\n}\nfunction _addInterpolationPart(value, binding) {\n    var valueStr = value != null ? value.toString() : '';\n    return valueStr + binding.suffix;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nfunction createEmbeddedView(parent, anchorDef$$1, viewDef, context) {\n    // embedded views are seen as siblings to the anchor, so we need\n    // to get the parent of the anchor and use it as parentIndex.\n    var view = createView(parent.root, parent.renderer, parent, anchorDef$$1, viewDef);\n    initView(view, parent.component, context);\n    createViewNodes(view);\n    return view;\n}\nfunction createRootView(root, def, context) {\n    var view = createView(root, root.renderer, null, null, def);\n    initView(view, context, context);\n    createViewNodes(view);\n    return view;\n}\nfunction createComponentView(parentView, nodeDef, viewDef, hostElement) {\n    var rendererType = nodeDef.element.componentRendererType;\n    var compRenderer;\n    if (!rendererType) {\n        compRenderer = parentView.root.renderer;\n    }\n    else {\n        compRenderer = parentView.root.rendererFactory.createRenderer(hostElement, rendererType);\n    }\n    return createView(parentView.root, compRenderer, parentView, nodeDef.element.componentProvider, viewDef);\n}\nfunction createView(root, renderer, parent, parentNodeDef, def) {\n    var nodes = new Array(def.nodes.length);\n    var disposables = def.outputCount ? new Array(def.outputCount) : null;\n    var view = {\n        def: def,\n        parent: parent,\n        viewContainerParent: null, parentNodeDef: parentNodeDef,\n        context: null,\n        component: null, nodes: nodes,\n        state: 13 /* CatInit */, root: root, renderer: renderer,\n        oldValues: new Array(def.bindingCount), disposables: disposables,\n        initIndex: -1\n    };\n    return view;\n}\nfunction initView(view, component, context) {\n    view.component = component;\n    view.context = context;\n}\nfunction createViewNodes(view) {\n    var renderHost;\n    if (isComponentView(view)) {\n        var hostDef = view.parentNodeDef;\n        renderHost = asElementData((view.parent), hostDef.parent.nodeIndex).renderElement;\n    }\n    var def = view.def;\n    var nodes = view.nodes;\n    for (var i = 0; i < def.nodes.length; i++) {\n        var nodeDef = def.nodes[i];\n        Services.setCurrentNode(view, i);\n        var nodeData = void 0;\n        switch (nodeDef.flags & 201347067 /* Types */) {\n            case 1 /* TypeElement */:\n                var el = createElement(view, renderHost, nodeDef);\n                var componentView = (undefined);\n                if (nodeDef.flags & 33554432 /* ComponentView */) {\n                    var compViewDef = resolveDefinition((nodeDef.element.componentView));\n                    componentView = Services.createComponentView(view, nodeDef, compViewDef, el);\n                }\n                listenToElementOutputs(view, componentView, nodeDef, el);\n                nodeData = {\n                    renderElement: el,\n                    componentView: componentView,\n                    viewContainer: null,\n                    template: nodeDef.element.template ? createTemplateData(view, nodeDef) : undefined\n                };\n                if (nodeDef.flags & 16777216 /* EmbeddedViews */) {\n                    nodeData.viewContainer = createViewContainerData(view, nodeDef, nodeData);\n                }\n                break;\n            case 2 /* TypeText */:\n                nodeData = createText(view, renderHost, nodeDef);\n                break;\n            case 512 /* TypeClassProvider */:\n            case 1024 /* TypeFactoryProvider */:\n            case 2048 /* TypeUseExistingProvider */:\n            case 256 /* TypeValueProvider */: {\n                nodeData = nodes[i];\n                if (!nodeData && !(nodeDef.flags & 4096 /* LazyProvider */)) {\n                    var instance = createProviderInstance(view, nodeDef);\n                    nodeData = { instance: instance };\n                }\n                break;\n            }\n            case 16 /* TypePipe */: {\n                var instance = createPipeInstance(view, nodeDef);\n                nodeData = { instance: instance };\n                break;\n            }\n            case 16384 /* TypeDirective */: {\n                nodeData = nodes[i];\n                if (!nodeData) {\n                    var instance = createDirectiveInstance(view, nodeDef);\n                    nodeData = { instance: instance };\n                }\n                if (nodeDef.flags & 32768 /* Component */) {\n                    var compView = asElementData(view, nodeDef.parent.nodeIndex).componentView;\n                    initView(compView, nodeData.instance, nodeData.instance);\n                }\n                break;\n            }\n            case 32 /* TypePureArray */:\n            case 64 /* TypePureObject */:\n            case 128 /* TypePurePipe */:\n                nodeData = createPureExpression(view, nodeDef);\n                break;\n            case 67108864 /* TypeContentQuery */:\n            case 134217728 /* TypeViewQuery */:\n                nodeData = createQuery();\n                break;\n            case 8 /* TypeNgContent */:\n                appendNgContent(view, renderHost, nodeDef);\n                // no runtime data needed for NgContent...\n                nodeData = undefined;\n                break;\n        }\n        nodes[i] = nodeData;\n    }\n    // Create the ViewData.nodes of component views after we created everything else,\n    // so that e.g. ng-content works\n    execComponentViewsAction(view, ViewAction.CreateViewNodes);\n    // fill static content and view queries\n    execQueriesAction(view, 67108864 /* TypeContentQuery */ | 134217728 /* TypeViewQuery */, 268435456 /* StaticQuery */, 0 /* CheckAndUpdate */);\n}\nfunction checkNoChangesView(view) {\n    markProjectedViewsForCheck(view);\n    Services.updateDirectives(view, 1 /* CheckNoChanges */);\n    execEmbeddedViewsAction(view, ViewAction.CheckNoChanges);\n    Services.updateRenderer(view, 1 /* CheckNoChanges */);\n    execComponentViewsAction(view, ViewAction.CheckNoChanges);\n    // Note: We don't check queries for changes as we didn't do this in v2.x.\n    // TODO(tbosch): investigate if we can enable the check again in v5.x with a nicer error message.\n    view.state &= ~(64 /* CheckProjectedViews */ | 32 /* CheckProjectedView */);\n}\nfunction checkAndUpdateView(view) {\n    if (view.state & 1 /* BeforeFirstCheck */) {\n        view.state &= ~1 /* BeforeFirstCheck */;\n        view.state |= 2 /* FirstCheck */;\n    }\n    else {\n        view.state &= ~2 /* FirstCheck */;\n    }\n    shiftInitState(view, 0 /* InitState_BeforeInit */, 256 /* InitState_CallingOnInit */);\n    markProjectedViewsForCheck(view);\n    Services.updateDirectives(view, 0 /* CheckAndUpdate */);\n    execEmbeddedViewsAction(view, ViewAction.CheckAndUpdate);\n    execQueriesAction(view, 67108864 /* TypeContentQuery */, 536870912 /* DynamicQuery */, 0 /* CheckAndUpdate */);\n    var callInit = shiftInitState(view, 256 /* InitState_CallingOnInit */, 512 /* InitState_CallingAfterContentInit */);\n    callLifecycleHooksChildrenFirst(view, 2097152 /* AfterContentChecked */ | (callInit ? 1048576 /* AfterContentInit */ : 0));\n    Services.updateRenderer(view, 0 /* CheckAndUpdate */);\n    execComponentViewsAction(view, ViewAction.CheckAndUpdate);\n    execQueriesAction(view, 134217728 /* TypeViewQuery */, 536870912 /* DynamicQuery */, 0 /* CheckAndUpdate */);\n    callInit = shiftInitState(view, 512 /* InitState_CallingAfterContentInit */, 768 /* InitState_CallingAfterViewInit */);\n    callLifecycleHooksChildrenFirst(view, 8388608 /* AfterViewChecked */ | (callInit ? 4194304 /* AfterViewInit */ : 0));\n    if (view.def.flags & 2 /* OnPush */) {\n        view.state &= ~8 /* ChecksEnabled */;\n    }\n    view.state &= ~(64 /* CheckProjectedViews */ | 32 /* CheckProjectedView */);\n    shiftInitState(view, 768 /* InitState_CallingAfterViewInit */, 1024 /* InitState_AfterInit */);\n}\nfunction checkAndUpdateNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    if (argStyle === 0 /* Inline */) {\n        return checkAndUpdateNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    }\n    else {\n        return checkAndUpdateNodeDynamic(view, nodeDef, v0);\n    }\n}\nfunction markProjectedViewsForCheck(view) {\n    var def = view.def;\n    if (!(def.nodeFlags & 4 /* ProjectedTemplate */)) {\n        return;\n    }\n    for (var i = 0; i < def.nodes.length; i++) {\n        var nodeDef = def.nodes[i];\n        if (nodeDef.flags & 4 /* ProjectedTemplate */) {\n            var projectedViews = asElementData(view, i).template._projectedViews;\n            if (projectedViews) {\n                for (var i_1 = 0; i_1 < projectedViews.length; i_1++) {\n                    var projectedView = projectedViews[i_1];\n                    projectedView.state |= 32 /* CheckProjectedView */;\n                    markParentViewsForCheckProjectedViews(projectedView, view);\n                }\n            }\n        }\n        else if ((nodeDef.childFlags & 4 /* ProjectedTemplate */) === 0) {\n            // a parent with leafs\n            // no child is a component,\n            // then skip the children\n            i += nodeDef.childCount;\n        }\n    }\n}\nfunction checkAndUpdateNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    switch (nodeDef.flags & 201347067 /* Types */) {\n        case 1 /* TypeElement */:\n            return checkAndUpdateElementInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n        case 2 /* TypeText */:\n            return checkAndUpdateTextInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n        case 16384 /* TypeDirective */:\n            return checkAndUpdateDirectiveInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n        case 32 /* TypePureArray */:\n        case 64 /* TypePureObject */:\n        case 128 /* TypePurePipe */:\n            return checkAndUpdatePureExpressionInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n        default:\n            throw 'unreachable';\n    }\n}\nfunction checkAndUpdateNodeDynamic(view, nodeDef, values) {\n    switch (nodeDef.flags & 201347067 /* Types */) {\n        case 1 /* TypeElement */:\n            return checkAndUpdateElementDynamic(view, nodeDef, values);\n        case 2 /* TypeText */:\n            return checkAndUpdateTextDynamic(view, nodeDef, values);\n        case 16384 /* TypeDirective */:\n            return checkAndUpdateDirectiveDynamic(view, nodeDef, values);\n        case 32 /* TypePureArray */:\n        case 64 /* TypePureObject */:\n        case 128 /* TypePurePipe */:\n            return checkAndUpdatePureExpressionDynamic(view, nodeDef, values);\n        default:\n            throw 'unreachable';\n    }\n}\nfunction checkNoChangesNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    if (argStyle === 0 /* Inline */) {\n        checkNoChangesNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    }\n    else {\n        checkNoChangesNodeDynamic(view, nodeDef, v0);\n    }\n    // Returning false is ok here as we would have thrown in case of a change.\n    return false;\n}\nfunction checkNoChangesNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var bindLen = nodeDef.bindings.length;\n    if (bindLen > 0)\n        checkBindingNoChanges(view, nodeDef, 0, v0);\n    if (bindLen > 1)\n        checkBindingNoChanges(view, nodeDef, 1, v1);\n    if (bindLen > 2)\n        checkBindingNoChanges(view, nodeDef, 2, v2);\n    if (bindLen > 3)\n        checkBindingNoChanges(view, nodeDef, 3, v3);\n    if (bindLen > 4)\n        checkBindingNoChanges(view, nodeDef, 4, v4);\n    if (bindLen > 5)\n        checkBindingNoChanges(view, nodeDef, 5, v5);\n    if (bindLen > 6)\n        checkBindingNoChanges(view, nodeDef, 6, v6);\n    if (bindLen > 7)\n        checkBindingNoChanges(view, nodeDef, 7, v7);\n    if (bindLen > 8)\n        checkBindingNoChanges(view, nodeDef, 8, v8);\n    if (bindLen > 9)\n        checkBindingNoChanges(view, nodeDef, 9, v9);\n}\nfunction checkNoChangesNodeDynamic(view, nodeDef, values) {\n    for (var i = 0; i < values.length; i++) {\n        checkBindingNoChanges(view, nodeDef, i, values[i]);\n    }\n}\n/**\n * Workaround https://github.com/angular/tsickle/issues/497\n * @suppress {misplacedTypeAnnotation}\n */\nfunction checkNoChangesQuery(view, nodeDef) {\n    var queryList = asQueryList(view, nodeDef.nodeIndex);\n    if (queryList.dirty) {\n        throw expressionChangedAfterItHasBeenCheckedError(Services.createDebugContext(view, nodeDef.nodeIndex), \"Query \" + nodeDef.query.id + \" not dirty\", \"Query \" + nodeDef.query.id + \" dirty\", (view.state & 1 /* BeforeFirstCheck */) !== 0);\n    }\n}\nfunction destroyView(view) {\n    if (view.state & 128 /* Destroyed */) {\n        return;\n    }\n    execEmbeddedViewsAction(view, ViewAction.Destroy);\n    execComponentViewsAction(view, ViewAction.Destroy);\n    callLifecycleHooksChildrenFirst(view, 131072 /* OnDestroy */);\n    if (view.disposables) {\n        for (var i = 0; i < view.disposables.length; i++) {\n            view.disposables[i]();\n        }\n    }\n    detachProjectedView(view);\n    if (view.renderer.destroyNode) {\n        destroyViewNodes(view);\n    }\n    if (isComponentView(view)) {\n        view.renderer.destroy();\n    }\n    view.state |= 128 /* Destroyed */;\n}\nfunction destroyViewNodes(view) {\n    var len = view.def.nodes.length;\n    for (var i = 0; i < len; i++) {\n        var def = view.def.nodes[i];\n        if (def.flags & 1 /* TypeElement */) {\n            view.renderer.destroyNode(asElementData(view, i).renderElement);\n        }\n        else if (def.flags & 2 /* TypeText */) {\n            view.renderer.destroyNode(asTextData(view, i).renderText);\n        }\n        else if (def.flags & 67108864 /* TypeContentQuery */ || def.flags & 134217728 /* TypeViewQuery */) {\n            asQueryList(view, i).destroy();\n        }\n    }\n}\nvar ViewAction;\n(function (ViewAction) {\n    ViewAction[ViewAction[\"CreateViewNodes\"] = 0] = \"CreateViewNodes\";\n    ViewAction[ViewAction[\"CheckNoChanges\"] = 1] = \"CheckNoChanges\";\n    ViewAction[ViewAction[\"CheckNoChangesProjectedViews\"] = 2] = \"CheckNoChangesProjectedViews\";\n    ViewAction[ViewAction[\"CheckAndUpdate\"] = 3] = \"CheckAndUpdate\";\n    ViewAction[ViewAction[\"CheckAndUpdateProjectedViews\"] = 4] = \"CheckAndUpdateProjectedViews\";\n    ViewAction[ViewAction[\"Destroy\"] = 5] = \"Destroy\";\n})(ViewAction || (ViewAction = {}));\nfunction execComponentViewsAction(view, action) {\n    var def = view.def;\n    if (!(def.nodeFlags & 33554432 /* ComponentView */)) {\n        return;\n    }\n    for (var i = 0; i < def.nodes.length; i++) {\n        var nodeDef = def.nodes[i];\n        if (nodeDef.flags & 33554432 /* ComponentView */) {\n            // a leaf\n            callViewAction(asElementData(view, i).componentView, action);\n        }\n        else if ((nodeDef.childFlags & 33554432 /* ComponentView */) === 0) {\n            // a parent with leafs\n            // no child is a component,\n            // then skip the children\n            i += nodeDef.childCount;\n        }\n    }\n}\nfunction execEmbeddedViewsAction(view, action) {\n    var def = view.def;\n    if (!(def.nodeFlags & 16777216 /* EmbeddedViews */)) {\n        return;\n    }\n    for (var i = 0; i < def.nodes.length; i++) {\n        var nodeDef = def.nodes[i];\n        if (nodeDef.flags & 16777216 /* EmbeddedViews */) {\n            // a leaf\n            var embeddedViews = asElementData(view, i).viewContainer._embeddedViews;\n            for (var k = 0; k < embeddedViews.length; k++) {\n                callViewAction(embeddedViews[k], action);\n            }\n        }\n        else if ((nodeDef.childFlags & 16777216 /* EmbeddedViews */) === 0) {\n            // a parent with leafs\n            // no child is a component,\n            // then skip the children\n            i += nodeDef.childCount;\n        }\n    }\n}\nfunction callViewAction(view, action) {\n    var viewState = view.state;\n    switch (action) {\n        case ViewAction.CheckNoChanges:\n            if ((viewState & 128 /* Destroyed */) === 0) {\n                if ((viewState & 12 /* CatDetectChanges */) === 12 /* CatDetectChanges */) {\n                    checkNoChangesView(view);\n                }\n                else if (viewState & 64 /* CheckProjectedViews */) {\n                    execProjectedViewsAction(view, ViewAction.CheckNoChangesProjectedViews);\n                }\n            }\n            break;\n        case ViewAction.CheckNoChangesProjectedViews:\n            if ((viewState & 128 /* Destroyed */) === 0) {\n                if (viewState & 32 /* CheckProjectedView */) {\n                    checkNoChangesView(view);\n                }\n                else if (viewState & 64 /* CheckProjectedViews */) {\n                    execProjectedViewsAction(view, action);\n                }\n            }\n            break;\n        case ViewAction.CheckAndUpdate:\n            if ((viewState & 128 /* Destroyed */) === 0) {\n                if ((viewState & 12 /* CatDetectChanges */) === 12 /* CatDetectChanges */) {\n                    checkAndUpdateView(view);\n                }\n                else if (viewState & 64 /* CheckProjectedViews */) {\n                    execProjectedViewsAction(view, ViewAction.CheckAndUpdateProjectedViews);\n                }\n            }\n            break;\n        case ViewAction.CheckAndUpdateProjectedViews:\n            if ((viewState & 128 /* Destroyed */) === 0) {\n                if (viewState & 32 /* CheckProjectedView */) {\n                    checkAndUpdateView(view);\n                }\n                else if (viewState & 64 /* CheckProjectedViews */) {\n                    execProjectedViewsAction(view, action);\n                }\n            }\n            break;\n        case ViewAction.Destroy:\n            // Note: destroyView recurses over all views,\n            // so we don't need to special case projected views here.\n            destroyView(view);\n            break;\n        case ViewAction.CreateViewNodes:\n            createViewNodes(view);\n            break;\n    }\n}\nfunction execProjectedViewsAction(view, action) {\n    execEmbeddedViewsAction(view, action);\n    execComponentViewsAction(view, action);\n}\nfunction execQueriesAction(view, queryFlags, staticDynamicQueryFlag, checkType) {\n    if (!(view.def.nodeFlags & queryFlags) || !(view.def.nodeFlags & staticDynamicQueryFlag)) {\n        return;\n    }\n    var nodeCount = view.def.nodes.length;\n    for (var i = 0; i < nodeCount; i++) {\n        var nodeDef = view.def.nodes[i];\n        if ((nodeDef.flags & queryFlags) && (nodeDef.flags & staticDynamicQueryFlag)) {\n            Services.setCurrentNode(view, nodeDef.nodeIndex);\n            switch (checkType) {\n                case 0 /* CheckAndUpdate */:\n                    checkAndUpdateQuery(view, nodeDef);\n                    break;\n                case 1 /* CheckNoChanges */:\n                    checkNoChangesQuery(view, nodeDef);\n                    break;\n            }\n        }\n        if (!(nodeDef.childFlags & queryFlags) || !(nodeDef.childFlags & staticDynamicQueryFlag)) {\n            // no child has a matching query\n            // then skip the children\n            i += nodeDef.childCount;\n        }\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar initialized = false;\nfunction initServicesIfNeeded() {\n    if (initialized) {\n        return;\n    }\n    initialized = true;\n    var services = isDevMode() ? createDebugServices() : createProdServices();\n    Services.setCurrentNode = services.setCurrentNode;\n    Services.createRootView = services.createRootView;\n    Services.createEmbeddedView = services.createEmbeddedView;\n    Services.createComponentView = services.createComponentView;\n    Services.createNgModuleRef = services.createNgModuleRef;\n    Services.overrideProvider = services.overrideProvider;\n    Services.overrideComponentView = services.overrideComponentView;\n    Services.clearOverrides = services.clearOverrides;\n    Services.checkAndUpdateView = services.checkAndUpdateView;\n    Services.checkNoChangesView = services.checkNoChangesView;\n    Services.destroyView = services.destroyView;\n    Services.resolveDep = resolveDep;\n    Services.createDebugContext = services.createDebugContext;\n    Services.handleEvent = services.handleEvent;\n    Services.updateDirectives = services.updateDirectives;\n    Services.updateRenderer = services.updateRenderer;\n    Services.dirtyParentQueries = dirtyParentQueries;\n}\nfunction createProdServices() {\n    return {\n        setCurrentNode: function () { },\n        createRootView: createProdRootView,\n        createEmbeddedView: createEmbeddedView,\n        createComponentView: createComponentView,\n        createNgModuleRef: createNgModuleRef,\n        overrideProvider: NOOP,\n        overrideComponentView: NOOP,\n        clearOverrides: NOOP,\n        checkAndUpdateView: checkAndUpdateView,\n        checkNoChangesView: checkNoChangesView,\n        destroyView: destroyView,\n        createDebugContext: function (view, nodeIndex) { return new DebugContext_(view, nodeIndex); },\n        handleEvent: function (view, nodeIndex, eventName, event) {\n            return view.def.handleEvent(view, nodeIndex, eventName, event);\n        },\n        updateDirectives: function (view, checkType) {\n            return view.def.updateDirectives(checkType === 0 /* CheckAndUpdate */ ? prodCheckAndUpdateNode :\n                prodCheckNoChangesNode, view);\n        },\n        updateRenderer: function (view, checkType) {\n            return view.def.updateRenderer(checkType === 0 /* CheckAndUpdate */ ? prodCheckAndUpdateNode :\n                prodCheckNoChangesNode, view);\n        },\n    };\n}\nfunction createDebugServices() {\n    return {\n        setCurrentNode: debugSetCurrentNode,\n        createRootView: debugCreateRootView,\n        createEmbeddedView: debugCreateEmbeddedView,\n        createComponentView: debugCreateComponentView,\n        createNgModuleRef: debugCreateNgModuleRef,\n        overrideProvider: debugOverrideProvider,\n        overrideComponentView: debugOverrideComponentView,\n        clearOverrides: debugClearOverrides,\n        checkAndUpdateView: debugCheckAndUpdateView,\n        checkNoChangesView: debugCheckNoChangesView,\n        destroyView: debugDestroyView,\n        createDebugContext: function (view, nodeIndex) { return new DebugContext_(view, nodeIndex); },\n        handleEvent: debugHandleEvent,\n        updateDirectives: debugUpdateDirectives,\n        updateRenderer: debugUpdateRenderer,\n    };\n}\nfunction createProdRootView(elInjector, projectableNodes, rootSelectorOrNode, def, ngModule, context) {\n    var rendererFactory = ngModule.injector.get(RendererFactory2);\n    return createRootView(createRootData(elInjector, ngModule, rendererFactory, projectableNodes, rootSelectorOrNode), def, context);\n}\nfunction debugCreateRootView(elInjector, projectableNodes, rootSelectorOrNode, def, ngModule, context) {\n    var rendererFactory = ngModule.injector.get(RendererFactory2);\n    var root = createRootData(elInjector, ngModule, new DebugRendererFactory2(rendererFactory), projectableNodes, rootSelectorOrNode);\n    var defWithOverride = applyProviderOverridesToView(def);\n    return callWithDebugContext(DebugAction.create, createRootView, null, [root, defWithOverride, context]);\n}\nfunction createRootData(elInjector, ngModule, rendererFactory, projectableNodes, rootSelectorOrNode) {\n    var sanitizer = ngModule.injector.get(Sanitizer);\n    var errorHandler = ngModule.injector.get(ErrorHandler);\n    var renderer = rendererFactory.createRenderer(null, null);\n    return {\n        ngModule: ngModule,\n        injector: elInjector, projectableNodes: projectableNodes,\n        selectorOrNode: rootSelectorOrNode, sanitizer: sanitizer, rendererFactory: rendererFactory, renderer: renderer, errorHandler: errorHandler\n    };\n}\nfunction debugCreateEmbeddedView(parentView, anchorDef, viewDef$$1, context) {\n    var defWithOverride = applyProviderOverridesToView(viewDef$$1);\n    return callWithDebugContext(DebugAction.create, createEmbeddedView, null, [parentView, anchorDef, defWithOverride, context]);\n}\nfunction debugCreateComponentView(parentView, nodeDef, viewDef$$1, hostElement) {\n    var overrideComponentView = viewDefOverrides.get(nodeDef.element.componentProvider.provider.token);\n    if (overrideComponentView) {\n        viewDef$$1 = overrideComponentView;\n    }\n    else {\n        viewDef$$1 = applyProviderOverridesToView(viewDef$$1);\n    }\n    return callWithDebugContext(DebugAction.create, createComponentView, null, [parentView, nodeDef, viewDef$$1, hostElement]);\n}\nfunction debugCreateNgModuleRef(moduleType, parentInjector, bootstrapComponents, def) {\n    var defWithOverride = applyProviderOverridesToNgModule(def);\n    return createNgModuleRef(moduleType, parentInjector, bootstrapComponents, defWithOverride);\n}\nvar providerOverrides = new Map();\nvar providerOverridesWithScope = new Map();\nvar viewDefOverrides = new Map();\nfunction debugOverrideProvider(override) {\n    providerOverrides.set(override.token, override);\n    if (typeof override.token === 'function' && override.token.ngInjectableDef &&\n        typeof override.token.ngInjectableDef.providedIn === 'function') {\n        providerOverridesWithScope.set(override.token, override);\n    }\n}\nfunction debugOverrideComponentView(comp, compFactory) {\n    var hostViewDef = resolveDefinition(getComponentViewDefinitionFactory(compFactory));\n    var compViewDef = resolveDefinition((hostViewDef.nodes[0].element.componentView));\n    viewDefOverrides.set(comp, compViewDef);\n}\nfunction debugClearOverrides() {\n    providerOverrides.clear();\n    providerOverridesWithScope.clear();\n    viewDefOverrides.clear();\n}\n// Notes about the algorithm:\n// 1) Locate the providers of an element and check if one of them was overwritten\n// 2) Change the providers of that element\n//\n// We only create new datastructures if we need to, to keep perf impact\n// reasonable.\nfunction applyProviderOverridesToView(def) {\n    if (providerOverrides.size === 0) {\n        return def;\n    }\n    var elementIndicesWithOverwrittenProviders = findElementIndicesWithOverwrittenProviders(def);\n    if (elementIndicesWithOverwrittenProviders.length === 0) {\n        return def;\n    }\n    // clone the whole view definition,\n    // as it maintains references between the nodes that are hard to update.\n    def = def.factory(function () { return NOOP; });\n    for (var i = 0; i < elementIndicesWithOverwrittenProviders.length; i++) {\n        applyProviderOverridesToElement(def, elementIndicesWithOverwrittenProviders[i]);\n    }\n    return def;\n    function findElementIndicesWithOverwrittenProviders(def) {\n        var elIndicesWithOverwrittenProviders = [];\n        var lastElementDef = null;\n        for (var i = 0; i < def.nodes.length; i++) {\n            var nodeDef = def.nodes[i];\n            if (nodeDef.flags & 1 /* TypeElement */) {\n                lastElementDef = nodeDef;\n            }\n            if (lastElementDef && nodeDef.flags & 3840 /* CatProviderNoDirective */ &&\n                providerOverrides.has(nodeDef.provider.token)) {\n                elIndicesWithOverwrittenProviders.push(lastElementDef.nodeIndex);\n                lastElementDef = null;\n            }\n        }\n        return elIndicesWithOverwrittenProviders;\n    }\n    function applyProviderOverridesToElement(viewDef$$1, elIndex) {\n        for (var i = elIndex + 1; i < viewDef$$1.nodes.length; i++) {\n            var nodeDef = viewDef$$1.nodes[i];\n            if (nodeDef.flags & 1 /* TypeElement */) {\n                // stop at the next element\n                return;\n            }\n            if (nodeDef.flags & 3840 /* CatProviderNoDirective */) {\n                var provider = (nodeDef.provider);\n                var override = providerOverrides.get(provider.token);\n                if (override) {\n                    nodeDef.flags = (nodeDef.flags & ~3840 /* CatProviderNoDirective */) | override.flags;\n                    provider.deps = splitDepsDsl(override.deps);\n                    provider.value = override.value;\n                }\n            }\n        }\n    }\n}\n// Notes about the algorithm:\n// We only create new datastructures if we need to, to keep perf impact\n// reasonable.\nfunction applyProviderOverridesToNgModule(def) {\n    var _a = calcHasOverrides(def), hasOverrides = _a.hasOverrides, hasDeprecatedOverrides = _a.hasDeprecatedOverrides;\n    if (!hasOverrides) {\n        return def;\n    }\n    // clone the whole view definition,\n    // as it maintains references between the nodes that are hard to update.\n    def = def.factory(function () { return NOOP; });\n    applyProviderOverrides(def);\n    return def;\n    function calcHasOverrides(def) {\n        var hasOverrides = false;\n        var hasDeprecatedOverrides = false;\n        if (providerOverrides.size === 0) {\n            return { hasOverrides: hasOverrides, hasDeprecatedOverrides: hasDeprecatedOverrides };\n        }\n        def.providers.forEach(function (node) {\n            var override = providerOverrides.get(node.token);\n            if ((node.flags & 3840 /* CatProviderNoDirective */) && override) {\n                hasOverrides = true;\n                hasDeprecatedOverrides = hasDeprecatedOverrides || override.deprecatedBehavior;\n            }\n        });\n        def.modules.forEach(function (module) {\n            providerOverridesWithScope.forEach(function (override, token) {\n                if (token.ngInjectableDef.providedIn === module) {\n                    hasOverrides = true;\n                    hasDeprecatedOverrides = hasDeprecatedOverrides || override.deprecatedBehavior;\n                }\n            });\n        });\n        return { hasOverrides: hasOverrides, hasDeprecatedOverrides: hasDeprecatedOverrides };\n    }\n    function applyProviderOverrides(def) {\n        for (var i = 0; i < def.providers.length; i++) {\n            var provider = def.providers[i];\n            if (hasDeprecatedOverrides) {\n                // We had a bug where me made\n                // all providers lazy. Keep this logic behind a flag\n                // for migrating existing users.\n                provider.flags |= 4096 /* LazyProvider */;\n            }\n            var override = providerOverrides.get(provider.token);\n            if (override) {\n                provider.flags = (provider.flags & ~3840 /* CatProviderNoDirective */) | override.flags;\n                provider.deps = splitDepsDsl(override.deps);\n                provider.value = override.value;\n            }\n        }\n        if (providerOverridesWithScope.size > 0) {\n            var moduleSet_1 = new Set(def.modules);\n            providerOverridesWithScope.forEach(function (override, token) {\n                if (moduleSet_1.has(token.ngInjectableDef.providedIn)) {\n                    var provider = {\n                        token: token,\n                        flags: override.flags | (hasDeprecatedOverrides ? 4096 /* LazyProvider */ : 0 /* None */),\n                        deps: splitDepsDsl(override.deps),\n                        value: override.value,\n                        index: def.providers.length,\n                    };\n                    def.providers.push(provider);\n                    def.providersByKey[tokenKey(token)] = provider;\n                }\n            });\n        }\n    }\n}\nfunction prodCheckAndUpdateNode(view, checkIndex, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var nodeDef = view.def.nodes[checkIndex];\n    checkAndUpdateNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    return (nodeDef.flags & 224 /* CatPureExpression */) ?\n        asPureExpressionData(view, checkIndex).value :\n        undefined;\n}\nfunction prodCheckNoChangesNode(view, checkIndex, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {\n    var nodeDef = view.def.nodes[checkIndex];\n    checkNoChangesNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    return (nodeDef.flags & 224 /* CatPureExpression */) ?\n        asPureExpressionData(view, checkIndex).value :\n        undefined;\n}\nfunction debugCheckAndUpdateView(view) {\n    return callWithDebugContext(DebugAction.detectChanges, checkAndUpdateView, null, [view]);\n}\nfunction debugCheckNoChangesView(view) {\n    return callWithDebugContext(DebugAction.checkNoChanges, checkNoChangesView, null, [view]);\n}\nfunction debugDestroyView(view) {\n    return callWithDebugContext(DebugAction.destroy, destroyView, null, [view]);\n}\nvar DebugAction;\n(function (DebugAction) {\n    DebugAction[DebugAction[\"create\"] = 0] = \"create\";\n    DebugAction[DebugAction[\"detectChanges\"] = 1] = \"detectChanges\";\n    DebugAction[DebugAction[\"checkNoChanges\"] = 2] = \"checkNoChanges\";\n    DebugAction[DebugAction[\"destroy\"] = 3] = \"destroy\";\n    DebugAction[DebugAction[\"handleEvent\"] = 4] = \"handleEvent\";\n})(DebugAction || (DebugAction = {}));\nvar _currentAction;\nvar _currentView;\nvar _currentNodeIndex;\nfunction debugSetCurrentNode(view, nodeIndex) {\n    _currentView = view;\n    _currentNodeIndex = nodeIndex;\n}\nfunction debugHandleEvent(view, nodeIndex, eventName, event) {\n    debugSetCurrentNode(view, nodeIndex);\n    return callWithDebugContext(DebugAction.handleEvent, view.def.handleEvent, null, [view, nodeIndex, eventName, event]);\n}\nfunction debugUpdateDirectives(view, checkType) {\n    if (view.state & 128 /* Destroyed */) {\n        throw viewDestroyedError(DebugAction[_currentAction]);\n    }\n    debugSetCurrentNode(view, nextDirectiveWithBinding(view, 0));\n    return view.def.updateDirectives(debugCheckDirectivesFn, view);\n    function debugCheckDirectivesFn(view, nodeIndex, argStyle) {\n        var values = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            values[_i - 3] = arguments[_i];\n        }\n        var nodeDef = view.def.nodes[nodeIndex];\n        if (checkType === 0 /* CheckAndUpdate */) {\n            debugCheckAndUpdateNode(view, nodeDef, argStyle, values);\n        }\n        else {\n            debugCheckNoChangesNode(view, nodeDef, argStyle, values);\n        }\n        if (nodeDef.flags & 16384 /* TypeDirective */) {\n            debugSetCurrentNode(view, nextDirectiveWithBinding(view, nodeIndex));\n        }\n        return (nodeDef.flags & 224 /* CatPureExpression */) ?\n            asPureExpressionData(view, nodeDef.nodeIndex).value :\n            undefined;\n    }\n}\nfunction debugUpdateRenderer(view, checkType) {\n    if (view.state & 128 /* Destroyed */) {\n        throw viewDestroyedError(DebugAction[_currentAction]);\n    }\n    debugSetCurrentNode(view, nextRenderNodeWithBinding(view, 0));\n    return view.def.updateRenderer(debugCheckRenderNodeFn, view);\n    function debugCheckRenderNodeFn(view, nodeIndex, argStyle) {\n        var values = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            values[_i - 3] = arguments[_i];\n        }\n        var nodeDef = view.def.nodes[nodeIndex];\n        if (checkType === 0 /* CheckAndUpdate */) {\n            debugCheckAndUpdateNode(view, nodeDef, argStyle, values);\n        }\n        else {\n            debugCheckNoChangesNode(view, nodeDef, argStyle, values);\n        }\n        if (nodeDef.flags & 3 /* CatRenderNode */) {\n            debugSetCurrentNode(view, nextRenderNodeWithBinding(view, nodeIndex));\n        }\n        return (nodeDef.flags & 224 /* CatPureExpression */) ?\n            asPureExpressionData(view, nodeDef.nodeIndex).value :\n            undefined;\n    }\n}\nfunction debugCheckAndUpdateNode(view, nodeDef, argStyle, givenValues) {\n    var changed = checkAndUpdateNode.apply(void 0, __spread([view, nodeDef, argStyle], givenValues));\n    if (changed) {\n        var values = argStyle === 1 /* Dynamic */ ? givenValues[0] : givenValues;\n        if (nodeDef.flags & 16384 /* TypeDirective */) {\n            var bindingValues = {};\n            for (var i = 0; i < nodeDef.bindings.length; i++) {\n                var binding = nodeDef.bindings[i];\n                var value = values[i];\n                if (binding.flags & 8 /* TypeProperty */) {\n                    bindingValues[normalizeDebugBindingName((binding.nonMinifiedName))] =\n                        normalizeDebugBindingValue(value);\n                }\n            }\n            var elDef = (nodeDef.parent);\n            var el = asElementData(view, elDef.nodeIndex).renderElement;\n            if (!elDef.element.name) {\n                // a comment.\n                view.renderer.setValue(el, \"bindings=\" + JSON.stringify(bindingValues, null, 2));\n            }\n            else {\n                // a regular element.\n                for (var attr in bindingValues) {\n                    var value = bindingValues[attr];\n                    if (value != null) {\n                        view.renderer.setAttribute(el, attr, value);\n                    }\n                    else {\n                        view.renderer.removeAttribute(el, attr);\n                    }\n                }\n            }\n        }\n    }\n}\nfunction debugCheckNoChangesNode(view, nodeDef, argStyle, values) {\n    checkNoChangesNode.apply(void 0, __spread([view, nodeDef, argStyle], values));\n}\nfunction normalizeDebugBindingName(name) {\n    // Attribute names with `$` (eg `x-y$`) are valid per spec, but unsupported by some browsers\n    name = camelCaseToDashCase(name.replace(/[$@]/g, '_'));\n    return \"ng-reflect-\" + name;\n}\nvar CAMEL_CASE_REGEXP = /([A-Z])/g;\nfunction camelCaseToDashCase(input) {\n    return input.replace(CAMEL_CASE_REGEXP, function () {\n        var m = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            m[_i] = arguments[_i];\n        }\n        return '-' + m[1].toLowerCase();\n    });\n}\nfunction normalizeDebugBindingValue(value) {\n    try {\n        // Limit the size of the value as otherwise the DOM just gets polluted.\n        return value != null ? value.toString().slice(0, 30) : value;\n    }\n    catch (e) {\n        return '[ERROR] Exception while trying to serialize the value';\n    }\n}\nfunction nextDirectiveWithBinding(view, nodeIndex) {\n    for (var i = nodeIndex; i < view.def.nodes.length; i++) {\n        var nodeDef = view.def.nodes[i];\n        if (nodeDef.flags & 16384 /* TypeDirective */ && nodeDef.bindings && nodeDef.bindings.length) {\n            return i;\n        }\n    }\n    return null;\n}\nfunction nextRenderNodeWithBinding(view, nodeIndex) {\n    for (var i = nodeIndex; i < view.def.nodes.length; i++) {\n        var nodeDef = view.def.nodes[i];\n        if ((nodeDef.flags & 3 /* CatRenderNode */) && nodeDef.bindings && nodeDef.bindings.length) {\n            return i;\n        }\n    }\n    return null;\n}\nvar DebugContext_ = /** @class */ (function () {\n    function DebugContext_(view, nodeIndex) {\n        this.view = view;\n        this.nodeIndex = nodeIndex;\n        if (nodeIndex == null) {\n            this.nodeIndex = nodeIndex = 0;\n        }\n        this.nodeDef = view.def.nodes[nodeIndex];\n        var elDef = this.nodeDef;\n        var elView = view;\n        while (elDef && (elDef.flags & 1 /* TypeElement */) === 0) {\n            elDef = (elDef.parent);\n        }\n        if (!elDef) {\n            while (!elDef && elView) {\n                elDef = (viewParentEl(elView));\n                elView = (elView.parent);\n            }\n        }\n        this.elDef = elDef;\n        this.elView = elView;\n    }\n    Object.defineProperty(DebugContext_.prototype, \"elOrCompView\", {\n        get: function () {\n            // Has to be done lazily as we use the DebugContext also during creation of elements...\n            return asElementData(this.elView, this.elDef.nodeIndex).componentView || this.view;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"injector\", {\n        get: function () { return createInjector$1(this.elView, this.elDef); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"component\", {\n        get: function () { return this.elOrCompView.component; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"context\", {\n        get: function () { return this.elOrCompView.context; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"providerTokens\", {\n        get: function () {\n            var tokens = [];\n            if (this.elDef) {\n                for (var i = this.elDef.nodeIndex + 1; i <= this.elDef.nodeIndex + this.elDef.childCount; i++) {\n                    var childDef = this.elView.def.nodes[i];\n                    if (childDef.flags & 20224 /* CatProvider */) {\n                        tokens.push(childDef.provider.token);\n                    }\n                    i += childDef.childCount;\n                }\n            }\n            return tokens;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"references\", {\n        get: function () {\n            var references = {};\n            if (this.elDef) {\n                collectReferences(this.elView, this.elDef, references);\n                for (var i = this.elDef.nodeIndex + 1; i <= this.elDef.nodeIndex + this.elDef.childCount; i++) {\n                    var childDef = this.elView.def.nodes[i];\n                    if (childDef.flags & 20224 /* CatProvider */) {\n                        collectReferences(this.elView, childDef, references);\n                    }\n                    i += childDef.childCount;\n                }\n            }\n            return references;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"componentRenderElement\", {\n        get: function () {\n            var elData = findHostElement(this.elOrCompView);\n            return elData ? elData.renderElement : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DebugContext_.prototype, \"renderNode\", {\n        get: function () {\n            return this.nodeDef.flags & 2 /* TypeText */ ? renderNode(this.view, this.nodeDef) :\n                renderNode(this.elView, this.elDef);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DebugContext_.prototype.logError = function (console) {\n        var values = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            values[_i - 1] = arguments[_i];\n        }\n        var logViewDef;\n        var logNodeIndex;\n        if (this.nodeDef.flags & 2 /* TypeText */) {\n            logViewDef = this.view.def;\n            logNodeIndex = this.nodeDef.nodeIndex;\n        }\n        else {\n            logViewDef = this.elView.def;\n            logNodeIndex = this.elDef.nodeIndex;\n        }\n        // Note: we only generate a log function for text and element nodes\n        // to make the generated code as small as possible.\n        var renderNodeIndex = getRenderNodeIndex(logViewDef, logNodeIndex);\n        var currRenderNodeIndex = -1;\n        var nodeLogger = function () {\n            currRenderNodeIndex++;\n            if (currRenderNodeIndex === renderNodeIndex) {\n                return (_a = console.error).bind.apply(_a, __spread([console], values));\n            }\n            else {\n                return NOOP;\n            }\n            var _a;\n        };\n        logViewDef.factory(nodeLogger);\n        if (currRenderNodeIndex < renderNodeIndex) {\n            console.error('Illegal state: the ViewDefinitionFactory did not call the logger!');\n            console.error.apply(console, __spread(values));\n        }\n    };\n    return DebugContext_;\n}());\nfunction getRenderNodeIndex(viewDef$$1, nodeIndex) {\n    var renderNodeIndex = -1;\n    for (var i = 0; i <= nodeIndex; i++) {\n        var nodeDef = viewDef$$1.nodes[i];\n        if (nodeDef.flags & 3 /* CatRenderNode */) {\n            renderNodeIndex++;\n        }\n    }\n    return renderNodeIndex;\n}\nfunction findHostElement(view) {\n    while (view && !isComponentView(view)) {\n        view = (view.parent);\n    }\n    if (view.parent) {\n        return asElementData(view.parent, viewParentEl(view).nodeIndex);\n    }\n    return null;\n}\nfunction collectReferences(view, nodeDef, references) {\n    for (var refName in nodeDef.references) {\n        references[refName] = getQueryValue(view, nodeDef, nodeDef.references[refName]);\n    }\n}\nfunction callWithDebugContext(action, fn, self, args) {\n    var oldAction = _currentAction;\n    var oldView = _currentView;\n    var oldNodeIndex = _currentNodeIndex;\n    try {\n        _currentAction = action;\n        var result = fn.apply(self, args);\n        _currentView = oldView;\n        _currentNodeIndex = oldNodeIndex;\n        _currentAction = oldAction;\n        return result;\n    }\n    catch (e) {\n        if (isViewDebugError(e) || !_currentView) {\n            throw e;\n        }\n        throw viewWrappedDebugError(e, (getCurrentDebugContext()));\n    }\n}\nfunction getCurrentDebugContext() {\n    return _currentView ? new DebugContext_(_currentView, _currentNodeIndex) : null;\n}\nvar DebugRendererFactory2 = /** @class */ (function () {\n    function DebugRendererFactory2(delegate) {\n        this.delegate = delegate;\n    }\n    DebugRendererFactory2.prototype.createRenderer = function (element, renderData) {\n        return new DebugRenderer2(this.delegate.createRenderer(element, renderData));\n    };\n    DebugRendererFactory2.prototype.begin = function () {\n        if (this.delegate.begin) {\n            this.delegate.begin();\n        }\n    };\n    DebugRendererFactory2.prototype.end = function () {\n        if (this.delegate.end) {\n            this.delegate.end();\n        }\n    };\n    DebugRendererFactory2.prototype.whenRenderingDone = function () {\n        if (this.delegate.whenRenderingDone) {\n            return this.delegate.whenRenderingDone();\n        }\n        return Promise.resolve(null);\n    };\n    return DebugRendererFactory2;\n}());\nvar DebugRenderer2 = /** @class */ (function () {\n    function DebugRenderer2(delegate) {\n        this.delegate = delegate;\n        this.data = this.delegate.data;\n    }\n    DebugRenderer2.prototype.destroyNode = function (node) {\n        removeDebugNodeFromIndex((getDebugNode(node)));\n        if (this.delegate.destroyNode) {\n            this.delegate.destroyNode(node);\n        }\n    };\n    DebugRenderer2.prototype.destroy = function () { this.delegate.destroy(); };\n    DebugRenderer2.prototype.createElement = function (name, namespace) {\n        var el = this.delegate.createElement(name, namespace);\n        var debugCtx = getCurrentDebugContext();\n        if (debugCtx) {\n            var debugEl = new DebugElement(el, null, debugCtx);\n            debugEl.name = name;\n            indexDebugNode(debugEl);\n        }\n        return el;\n    };\n    DebugRenderer2.prototype.createComment = function (value) {\n        var comment = this.delegate.createComment(value);\n        var debugCtx = getCurrentDebugContext();\n        if (debugCtx) {\n            indexDebugNode(new DebugNode(comment, null, debugCtx));\n        }\n        return comment;\n    };\n    DebugRenderer2.prototype.createText = function (value) {\n        var text = this.delegate.createText(value);\n        var debugCtx = getCurrentDebugContext();\n        if (debugCtx) {\n            indexDebugNode(new DebugNode(text, null, debugCtx));\n        }\n        return text;\n    };\n    DebugRenderer2.prototype.appendChild = function (parent, newChild) {\n        var debugEl = getDebugNode(parent);\n        var debugChildEl = getDebugNode(newChild);\n        if (debugEl && debugChildEl && debugEl instanceof DebugElement) {\n            debugEl.addChild(debugChildEl);\n        }\n        this.delegate.appendChild(parent, newChild);\n    };\n    DebugRenderer2.prototype.insertBefore = function (parent, newChild, refChild) {\n        var debugEl = getDebugNode(parent);\n        var debugChildEl = getDebugNode(newChild);\n        var debugRefEl = (getDebugNode(refChild));\n        if (debugEl && debugChildEl && debugEl instanceof DebugElement) {\n            debugEl.insertBefore(debugRefEl, debugChildEl);\n        }\n        this.delegate.insertBefore(parent, newChild, refChild);\n    };\n    DebugRenderer2.prototype.removeChild = function (parent, oldChild) {\n        var debugEl = getDebugNode(parent);\n        var debugChildEl = getDebugNode(oldChild);\n        if (debugEl && debugChildEl && debugEl instanceof DebugElement) {\n            debugEl.removeChild(debugChildEl);\n        }\n        this.delegate.removeChild(parent, oldChild);\n    };\n    DebugRenderer2.prototype.selectRootElement = function (selectorOrNode) {\n        var el = this.delegate.selectRootElement(selectorOrNode);\n        var debugCtx = getCurrentDebugContext();\n        if (debugCtx) {\n            indexDebugNode(new DebugElement(el, null, debugCtx));\n        }\n        return el;\n    };\n    DebugRenderer2.prototype.setAttribute = function (el, name, value, namespace) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            var fullName = namespace ? namespace + ':' + name : name;\n            debugEl.attributes[fullName] = value;\n        }\n        this.delegate.setAttribute(el, name, value, namespace);\n    };\n    DebugRenderer2.prototype.removeAttribute = function (el, name, namespace) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            var fullName = namespace ? namespace + ':' + name : name;\n            debugEl.attributes[fullName] = null;\n        }\n        this.delegate.removeAttribute(el, name, namespace);\n    };\n    DebugRenderer2.prototype.addClass = function (el, name) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.classes[name] = true;\n        }\n        this.delegate.addClass(el, name);\n    };\n    DebugRenderer2.prototype.removeClass = function (el, name) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.classes[name] = false;\n        }\n        this.delegate.removeClass(el, name);\n    };\n    DebugRenderer2.prototype.setStyle = function (el, style, value, flags) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.styles[style] = value;\n        }\n        this.delegate.setStyle(el, style, value, flags);\n    };\n    DebugRenderer2.prototype.removeStyle = function (el, style, flags) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.styles[style] = null;\n        }\n        this.delegate.removeStyle(el, style, flags);\n    };\n    DebugRenderer2.prototype.setProperty = function (el, name, value) {\n        var debugEl = getDebugNode(el);\n        if (debugEl && debugEl instanceof DebugElement) {\n            debugEl.properties[name] = value;\n        }\n        this.delegate.setProperty(el, name, value);\n    };\n    DebugRenderer2.prototype.listen = function (target, eventName, callback) {\n        if (typeof target !== 'string') {\n            var debugEl = getDebugNode(target);\n            if (debugEl) {\n                debugEl.listeners.push(new EventListener(eventName, callback));\n            }\n        }\n        return this.delegate.listen(target, eventName, callback);\n    };\n    DebugRenderer2.prototype.parentNode = function (node) { return this.delegate.parentNode(node); };\n    DebugRenderer2.prototype.nextSibling = function (node) { return this.delegate.nextSibling(node); };\n    DebugRenderer2.prototype.setValue = function (node, value) { return this.delegate.setValue(node, value); };\n    return DebugRenderer2;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\n\n// Attention: this function is called as top level function.\n// Putting any logic in here will destroy closure tree shaking!\n\nvar NgModuleFactory_ = /** @class */ (function (_super) {\n    __extends(NgModuleFactory_, _super);\n    function NgModuleFactory_(moduleType, _bootstrapComponents, _ngModuleDefFactory) {\n        var _this = \n        // Attention: this ctor is called as top level function.\n        // Putting any logic in here will destroy closure tree shaking!\n        _super.call(this) || this;\n        _this.moduleType = moduleType;\n        _this._bootstrapComponents = _bootstrapComponents;\n        _this._ngModuleDefFactory = _ngModuleDefFactory;\n        return _this;\n    }\n    NgModuleFactory_.prototype.create = function (parentInjector) {\n        initServicesIfNeeded();\n        var def = resolveDefinition(this._ngModuleDefFactory);\n        return Services.createNgModuleRef(this.moduleType, parentInjector || Injector.NULL, this._bootstrapComponents, def);\n    };\n    return NgModuleFactory_;\n}(NgModuleFactory));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// The functions in this file verify that the assumptions we are making\n// about state in an instruction are correct before implementing any logic.\n// They are meant only to be called in dev mode as sanity checks.\n\nfunction assertEqual(actual, expected, msg) {\n    if (actual != expected) {\n        throwError$1(msg);\n    }\n}\n\n\nfunction assertLessThan(actual, expected, msg) {\n    if (actual >= expected) {\n        throwError$1(msg);\n    }\n}\nfunction assertGreaterThan(actual, expected, msg) {\n    if (actual <= expected) {\n        throwError$1(msg);\n    }\n}\nfunction assertNull(actual, msg) {\n    if (actual != null) {\n        throwError$1(msg);\n    }\n}\nfunction assertNotNull$1(actual, msg) {\n    if (actual == null) {\n        throwError$1(msg);\n    }\n}\n\nfunction throwError$1(msg) {\n    debugger; // Left intentionally for better debugger experience.\n    throw new Error(\"ASSERTION ERROR: \" + msg);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * If this is the first template pass, any ngOnInit or ngDoCheck hooks will be queued into\n * TView.initHooks during directiveCreate.\n *\n * The directive index and hook type are encoded into one number (1st bit: type, remaining bits:\n * directive index), then saved in the even indices of the initHooks array. The odd indices\n * hold the hook functions themselves.\n *\n * @param index The index of the directive in LView.data\n * @param hooks The static hooks map on the directive def\n * @param tView The current TView\n */\n\n/**\n * Loops through the directives on a node and queues all their hooks except ngOnInit\n * and ngDoCheck, which are queued separately in directiveCreate.\n */\n\n/**\n * Calls onInit and doCheck calls if they haven't already been called.\n *\n * @param currentView The current view\n */\nfunction executeInitHooks(currentView, tView, creationMode) {\n    if (currentView.lifecycleStage === 1 /* Init */) {\n        executeHooks((currentView.directives), tView.initHooks, tView.checkHooks, creationMode);\n        currentView.lifecycleStage = 2 /* AfterInit */;\n    }\n}\n/**\n * Iterates over afterViewInit and afterViewChecked functions and calls them.\n *\n * @param currentView The current view\n */\nfunction executeHooks(data, allHooks, checkHooks, creationMode) {\n    var hooksToCall = creationMode ? allHooks : checkHooks;\n    if (hooksToCall) {\n        callHooks(data, hooksToCall);\n    }\n}\n/**\n * Calls lifecycle hooks with their contexts, skipping init hooks if it's not\n * creation mode.\n *\n * @param currentView The current view\n * @param arr The array in which the hooks are found\n */\nfunction callHooks(data, arr) {\n    for (var i = 0; i < arr.length; i += 2) {\n        arr[i + 1].call(data[arr[i]]);\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ngDevModeResetPerfCounters = (typeof ngDevMode == 'undefined' && (function (global) {\n    function ngDevModeResetPerfCounters() {\n        global['ngDevMode'] = {\n            firstTemplatePass: 0,\n            tNode: 0,\n            tView: 0,\n            rendererCreateTextNode: 0,\n            rendererSetText: 0,\n            rendererCreateElement: 0,\n            rendererAddEventListener: 0,\n            rendererSetAttribute: 0,\n            rendererRemoveAttribute: 0,\n            rendererSetProperty: 0,\n            rendererSetClassName: 0,\n            rendererAddClass: 0,\n            rendererRemoveClass: 0,\n            rendererSetStyle: 0,\n            rendererRemoveStyle: 0,\n            rendererDestroy: 0,\n            rendererDestroyNode: 0,\n        };\n    }\n    ngDevModeResetPerfCounters();\n    return ngDevModeResetPerfCounters;\n})(typeof window != 'undefined' && window || typeof self != 'undefined' && self ||\n    typeof global != 'undefined' && global));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction assertNodeType(node, type) {\n    assertNotNull$1(node, 'should be called with a node');\n    assertEqual(node.tNode.type, type, \"should be a \" + typeName(type));\n}\nfunction assertNodeOfPossibleTypes(node) {\n    var types = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        types[_i - 1] = arguments[_i];\n    }\n    assertNotNull$1(node, 'should be called with a node');\n    var found = types.some(function (type) { return node.tNode.type === type; });\n    assertEqual(found, true, \"Should be one of \" + types.map(typeName).join(', '));\n}\nfunction typeName(type) {\n    if (type == 1 /* Projection */)\n        return 'Projection';\n    if (type == 0 /* Container */)\n        return 'Container';\n    if (type == 2 /* View */)\n        return 'View';\n    if (type == 3 /* Element */)\n        return 'Element';\n    return '<unknown>';\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// TODO: cleanup once the code is merged in angular/angular\n// TODO: cleanup once the code is merged in angular/angular\nvar RendererStyleFlags3;\n// TODO: cleanup once the code is merged in angular/angular\n(function (RendererStyleFlags3) {\n    RendererStyleFlags3[RendererStyleFlags3[\"Important\"] = 1] = \"Important\";\n    RendererStyleFlags3[RendererStyleFlags3[\"DashCase\"] = 2] = \"DashCase\";\n})(RendererStyleFlags3 || (RendererStyleFlags3 = {}));\n/** Returns whether the `renderer` is a `ProceduralRenderer3` */\nfunction isProceduralRenderer(renderer) {\n    return !!(renderer.listen);\n}\n\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n* Must use this method for CD (instead of === ) since NaN !== NaN\n*/\n\n\n/**\n *  Function that throws a \"not implemented\" error so it's clear certain\n *  behaviors/methods aren't yet ready.\n *\n * @returns Not implemented error\n */\nfunction notImplemented() {\n    return new Error('NotImplemented');\n}\n/**\n * Flattens an array in non-recursive way. Input arrays are not modified.\n */\nfunction flatten$3(list) {\n    var result = [];\n    var i = 0;\n    while (i < list.length) {\n        var item = list[i];\n        if (Array.isArray(item)) {\n            if (item.length > 0) {\n                list = item.concat(list.slice(i + 1));\n                i = 0;\n            }\n            else {\n                i++;\n            }\n        }\n        else {\n            result.push(item);\n            i++;\n        }\n    }\n    return result;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Returns the first RNode following the given LNode in the same parent DOM element.\n *\n * This is needed in order to insert the given node with insertBefore.\n *\n * @param node The node whose following DOM node must be found.\n * @param stopNode A parent node at which the lookup in the tree should be stopped, or null if the\n * lookup should not be stopped until the result is found.\n * @returns RNode before which the provided node should be inserted or null if the lookup was\n * stopped\n * or if there is no native node after the given logical node in the same native parent.\n */\nfunction findNextRNodeSibling(node, stopNode) {\n    var currentNode = node;\n    while (currentNode && currentNode !== stopNode) {\n        var pNextOrParent = currentNode.pNextOrParent;\n        if (pNextOrParent) {\n            while (pNextOrParent.tNode.type !== 1 /* Projection */) {\n                var nativeNode = findFirstRNode(pNextOrParent);\n                if (nativeNode) {\n                    return nativeNode;\n                }\n                pNextOrParent = (pNextOrParent.pNextOrParent);\n            }\n            currentNode = pNextOrParent;\n        }\n        else {\n            var currentSibling = getNextLNode(currentNode);\n            while (currentSibling) {\n                var nativeNode = findFirstRNode(currentSibling);\n                if (nativeNode) {\n                    return nativeNode;\n                }\n                currentSibling = getNextLNode(currentSibling);\n            }\n            var parentNode = getParentLNode(currentNode);\n            currentNode = null;\n            if (parentNode) {\n                var parentType = parentNode.tNode.type;\n                if (parentType === 0 /* Container */ || parentType === 2 /* View */) {\n                    currentNode = parentNode;\n                }\n            }\n        }\n    }\n    return null;\n}\n/** Retrieves the sibling node for the given node. */\nfunction getNextLNode(node) {\n    // View nodes don't have TNodes, so their next must be retrieved through their LView.\n    if (node.tNode.type === 2 /* View */) {\n        var lView = node.data;\n        return lView.next ? lView.next.node : null;\n    }\n    return node.tNode.next ? node.view.data[node.tNode.next.index] : null;\n}\n/** Retrieves the first child of a given node */\nfunction getChildLNode(node) {\n    if (node.tNode.child) {\n        var view = node.tNode.type === 2 /* View */ ? node.data : node.view;\n        return view.data[node.tNode.child.index];\n    }\n    return null;\n}\nfunction getParentLNode(node) {\n    if (node.tNode.index === null)\n        return null;\n    var parent = node.tNode.parent;\n    return parent ? node.view.data[parent.index] : node.view.node;\n}\n/**\n * Get the next node in the LNode tree, taking into account the place where a node is\n * projected (in the shadow DOM) rather than where it comes from (in the light DOM).\n *\n * @param node The node whose next node in the LNode tree must be found.\n * @return LNode|null The next sibling in the LNode tree.\n */\nfunction getNextLNodeWithProjection(node) {\n    var pNextOrParent = node.pNextOrParent;\n    if (pNextOrParent) {\n        // The node is projected\n        var isLastProjectedNode = pNextOrParent.tNode.type === 1;\n        // returns pNextOrParent if we are not at the end of the list, null otherwise\n        return isLastProjectedNode ? null : pNextOrParent;\n    }\n    // returns node.next because the the node is not projected\n    return getNextLNode(node);\n}\n/**\n * Find the next node in the LNode tree, taking into account the place where a node is\n * projected (in the shadow DOM) rather than where it comes from (in the light DOM).\n *\n * If there is no sibling node, this function goes to the next sibling of the parent node...\n * until it reaches rootNode (at which point null is returned).\n *\n * @param initialNode The node whose following node in the LNode tree must be found.\n * @param rootNode The root node at which the lookup should stop.\n * @return LNode|null The following node in the LNode tree.\n */\nfunction getNextOrParentSiblingNode(initialNode, rootNode) {\n    var node = initialNode;\n    var nextNode = getNextLNodeWithProjection(node);\n    while (node && !nextNode) {\n        // if node.pNextOrParent is not null here, it is not the next node\n        // (because, at this point, nextNode is null, so it is the parent)\n        node = node.pNextOrParent || getParentLNode(node);\n        if (node === rootNode) {\n            return null;\n        }\n        nextNode = node && getNextLNodeWithProjection(node);\n    }\n    return nextNode;\n}\n/**\n * Returns the first RNode inside the given LNode.\n *\n * @param node The node whose first DOM node must be found\n * @returns RNode The first RNode of the given LNode or null if there is none.\n */\nfunction findFirstRNode(rootNode) {\n    var node = rootNode;\n    while (node) {\n        var nextNode = null;\n        if (node.tNode.type === 3 /* Element */) {\n            // A LElementNode has a matching RNode in LElementNode.native\n            return node.native;\n        }\n        else if (node.tNode.type === 0 /* Container */) {\n            var lContainerNode = node;\n            var childContainerData = lContainerNode.dynamicLContainerNode ?\n                lContainerNode.dynamicLContainerNode.data :\n                lContainerNode.data;\n            nextNode =\n                childContainerData.views.length ? getChildLNode(childContainerData.views[0]) : null;\n        }\n        else if (node.tNode.type === 1 /* Projection */) {\n            // For Projection look at the first projected node\n            nextNode = node.data.head;\n        }\n        else {\n            // Otherwise look at the first child\n            nextNode = getChildLNode(node);\n        }\n        node = nextNode === null ? getNextOrParentSiblingNode(node, rootNode) : nextNode;\n    }\n    return null;\n}\n\nfunction addRemoveViewFromContainer(container, rootNode, insertMode, beforeNode) {\n    ngDevMode && assertNodeType(container, 0 /* Container */);\n    ngDevMode && assertNodeType(rootNode, 2 /* View */);\n    var parentNode = container.data.renderParent;\n    var parent = parentNode ? parentNode.native : null;\n    var node = getChildLNode(rootNode);\n    if (parent) {\n        while (node) {\n            var nextNode = null;\n            var renderer = container.view.renderer;\n            if (node.tNode.type === 3 /* Element */) {\n                if (insertMode) {\n                    isProceduralRenderer(renderer) ?\n                        renderer.insertBefore(parent, (node.native), beforeNode) :\n                        parent.insertBefore((node.native), beforeNode, true);\n                }\n                else {\n                    if (isProceduralRenderer(renderer)) {\n                        renderer.removeChild(parent, (node.native));\n                        if (renderer.destroyNode) {\n                            ngDevMode && ngDevMode.rendererDestroyNode++;\n                            renderer.destroyNode((node.native));\n                        }\n                    }\n                    else {\n                        parent.removeChild((node.native));\n                    }\n                }\n                nextNode = getNextLNode(node);\n            }\n            else if (node.tNode.type === 0 /* Container */) {\n                // if we get to a container, it must be a root node of a view because we are only\n                // propagating down into child views / containers and not child elements\n                var childContainerData = node.data;\n                childContainerData.renderParent = parentNode;\n                nextNode =\n                    childContainerData.views.length ? getChildLNode(childContainerData.views[0]) : null;\n            }\n            else if (node.tNode.type === 1 /* Projection */) {\n                nextNode = node.data.head;\n            }\n            else {\n                nextNode = getChildLNode(node);\n            }\n            if (nextNode === null) {\n                node = getNextOrParentSiblingNode(node, rootNode);\n            }\n            else {\n                node = nextNode;\n            }\n        }\n    }\n}\n/**\n * Traverses down and up the tree of views and containers to remove listeners and\n * call onDestroy callbacks.\n *\n * Notes:\n *  - Because it's used for onDestroy calls, it needs to be bottom-up.\n *  - Must process containers instead of their views to avoid splicing\n *  when views are destroyed and re-added.\n *  - Using a while loop because it's faster than recursion\n *  - Destroy only called on movement to sibling or movement to parent (laterally or up)\n *\n *  @param rootView The view to destroy\n */\nfunction destroyViewTree(rootView) {\n    // A view to cleanup doesn't have children so we should not try to descend down the view tree.\n    if (!rootView.child) {\n        return cleanUpView(rootView);\n    }\n    var viewOrContainer = rootView.child;\n    while (viewOrContainer) {\n        var next = null;\n        if (viewOrContainer.views && viewOrContainer.views.length) {\n            next = viewOrContainer.views[0].data;\n        }\n        else if (viewOrContainer.child) {\n            next = viewOrContainer.child;\n        }\n        else if (viewOrContainer.next) {\n            // Only move to the side and clean if operating below rootView -\n            // otherwise we would start cleaning up sibling views of the rootView.\n            cleanUpView(viewOrContainer);\n            next = viewOrContainer.next;\n        }\n        if (next == null) {\n            // If the viewOrContainer is the rootView and next is null it means that we are dealing\n            // with a root view that doesn't have children. We didn't descend into child views\n            // so no need to go back up the views tree.\n            while (viewOrContainer && !viewOrContainer.next && viewOrContainer !== rootView) {\n                cleanUpView(viewOrContainer);\n                viewOrContainer = getParentState(viewOrContainer, rootView);\n            }\n            cleanUpView(viewOrContainer || rootView);\n            next = viewOrContainer && viewOrContainer.next;\n        }\n        viewOrContainer = next;\n    }\n}\n/**\n * Inserts a view into a container.\n *\n * This adds the view to the container's array of active views in the correct\n * position. It also adds the view's elements to the DOM if the container isn't a\n * root node of another view (in that case, the view's elements will be added when\n * the container's parent view is added later).\n *\n * @param container The container into which the view should be inserted\n * @param viewNode The view to insert\n * @param index The index at which to insert the view\n * @returns The inserted view\n */\nfunction insertView(container, viewNode, index) {\n    var state = container.data;\n    var views = state.views;\n    if (index > 0) {\n        // This is a new view, we need to add it to the children.\n        views[index - 1].data.next = viewNode.data;\n    }\n    if (index < views.length) {\n        viewNode.data.next = views[index].data;\n        views.splice(index, 0, viewNode);\n    }\n    else {\n        views.push(viewNode);\n        viewNode.data.next = null;\n    }\n    // If the container's renderParent is null, we know that it is a root node of its own parent view\n    // and we should wait until that parent processes its nodes (otherwise, we will insert this view's\n    // nodes twice - once now and once when its parent inserts its views).\n    if (container.data.renderParent !== null) {\n        var beforeNode = findNextRNodeSibling(viewNode, container);\n        if (!beforeNode) {\n            var containerNextNativeNode = container.native;\n            if (containerNextNativeNode === undefined) {\n                containerNextNativeNode = container.native = findNextRNodeSibling(container, null);\n            }\n            beforeNode = containerNextNativeNode;\n        }\n        addRemoveViewFromContainer(container, viewNode, true, beforeNode);\n    }\n    return viewNode;\n}\n/**\n * Removes a view from a container.\n *\n * This method splices the view from the container's array of active views. It also\n * removes the view's elements from the DOM and conducts cleanup (e.g. removing\n * listeners, calling onDestroys).\n *\n * @param container The container from which to remove a view\n * @param removeIndex The index of the view to remove\n * @returns The removed view\n */\nfunction removeView(container, removeIndex) {\n    var views = container.data.views;\n    var viewNode = views[removeIndex];\n    if (removeIndex > 0) {\n        views[removeIndex - 1].data.next = viewNode.data.next;\n    }\n    views.splice(removeIndex, 1);\n    destroyViewTree(viewNode.data);\n    addRemoveViewFromContainer(container, viewNode, false);\n    // Notify query that view has been removed\n    container.data.queries && container.data.queries.removeView(removeIndex);\n    return viewNode;\n}\n/**\n * Determines which LViewOrLContainer to jump to when traversing back up the\n * tree in destroyViewTree.\n *\n * Normally, the view's parent LView should be checked, but in the case of\n * embedded views, the container (which is the view node's parent, but not the\n * LView's parent) needs to be checked for a possible next property.\n *\n * @param state The LViewOrLContainer for which we need a parent state\n * @param rootView The rootView, so we don't propagate too far up the view tree\n * @returns The correct parent LViewOrLContainer\n */\nfunction getParentState(state, rootView) {\n    var node;\n    if ((node = state.node) && node.tNode.type === 2 /* View */) {\n        // if it's an embedded view, the state needs to go up to the container, in case the\n        // container has a next\n        return getParentLNode(node).data;\n    }\n    else {\n        // otherwise, use parent view for containers or component views\n        return state.parent === rootView ? null : state.parent;\n    }\n}\n/**\n * Removes all listeners and call all onDestroys in a given view.\n *\n * @param view The LView to clean up\n */\nfunction cleanUpView(view) {\n    removeListeners(view);\n    executeOnDestroys(view);\n    executePipeOnDestroys(view);\n    // For component views only, the local renderer is destroyed as clean up time.\n    if (view.id === -1 && isProceduralRenderer(view.renderer)) {\n        ngDevMode && ngDevMode.rendererDestroy++;\n        view.renderer.destroy();\n    }\n}\n/** Removes listeners and unsubscribes from output subscriptions */\nfunction removeListeners(view) {\n    var cleanup = (view.cleanup);\n    if (cleanup != null) {\n        for (var i = 0; i < cleanup.length - 1; i += 2) {\n            if (typeof cleanup[i] === 'string') {\n                cleanup[i + 1].removeEventListener(cleanup[i], cleanup[i + 2], cleanup[i + 3]);\n                i += 2;\n            }\n            else {\n                cleanup[i].call(cleanup[i + 1]);\n            }\n        }\n        view.cleanup = null;\n    }\n}\n/** Calls onDestroy hooks for this view */\nfunction executeOnDestroys(view) {\n    var tView = view.tView;\n    var destroyHooks;\n    if (tView != null && (destroyHooks = tView.destroyHooks) != null) {\n        callHooks((view.directives), destroyHooks);\n    }\n}\n/** Calls pipe destroy hooks for this view */\nfunction executePipeOnDestroys(view) {\n    var pipeDestroyHooks = view.tView && view.tView.pipeDestroyHooks;\n    if (pipeDestroyHooks) {\n        callHooks((view.data), pipeDestroyHooks);\n    }\n}\n/**\n * Returns whether a native element should be inserted in the given parent.\n *\n * The native node can be inserted when its parent is:\n * - A regular element => Yes\n * - A component host element =>\n *    - if the `currentView` === the parent `view`: The element is in the content (vs the\n *      template)\n *      => don't add as the parent component will project if needed.\n *    - `currentView` !== the parent `view` => The element is in the template (vs the content),\n *      add it\n * - View element => delay insertion, will be done on `viewEnd()`\n *\n * @param parent The parent in which to insert the child\n * @param currentView The LView being processed\n * @return boolean Whether the child element should be inserted.\n */\n\n/**\n * Appends the `child` element to the `parent`.\n *\n * The element insertion might be delayed {@link canInsertNativeNode}\n *\n * @param parent The parent to which to append the child\n * @param child The child that should be appended\n * @param currentView The current LView\n * @returns Whether or not the child was appended\n */\n\n/**\n * Inserts the provided node before the correct element in the DOM.\n *\n * The element insertion might be delayed {@link canInsertNativeNode}\n *\n * @param node Node to insert\n * @param currentView Current LView\n */\n\n/**\n * Appends a projected node to the DOM, or in the case of a projected container,\n * appends the nodes from all of the container's active views to the DOM.\n *\n * @param node The node to process\n * @param currentParent The last parent element to be processed\n * @param currentView Current LView\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A utility function to match an Ivy node static data against a simple CSS selector\n *\n * @param node static data to match\n * @param selector\n * @returns true if node matches the selector.\n */\n\n\n\n/**\n * Checks a given node against matching selectors and returns\n * selector index (or 0 if none matched).\n *\n * This function takes into account the ngProjectAs attribute: if present its value will be compared\n * to the raw (un-parsed) CSS selector instead of using standard selector matching logic.\n */\n\n/** Called when directives inject each other (creating a circular dependency) */\n\n/** Called when there are multiple component selectors that match a given node */\n\n/** Throws an ExpressionChangedAfterChecked error if checkNoChanges mode is on. */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Directive (D) sets a property on all component instances using this constant as a key and the\n * component's host node (LElement) as the value. This is used in methods like detectChanges to\n * facilitate jumping from an instance to the host node.\n */\nvar NG_HOST_SYMBOL = '__ngHostLNode__';\n/**\n * A permanent marker promise which signifies that the current CD tree is\n * clean.\n */\nvar _CLEAN_PROMISE = Promise.resolve(null);\n/**\n * Directive and element indices for top-level directive.\n *\n * Saved here to avoid re-instantiating an array on every change detection run.\n */\nvar _ROOT_DIRECTIVE_INDICES = [0, 0];\n/**\n * Token set in currentMatches while dependencies are being resolved.\n *\n * If we visit a directive that has a value set to CIRCULAR, we know we've\n * already seen it, and thus have a circular dependency.\n */\n\n/**\n * This property gets set before entering a template.\n *\n * This renderer can be one of two varieties of Renderer3:\n *\n * - ObjectedOrientedRenderer3\n *\n * This is the native browser API style, e.g. operations are methods on individual objects\n * like HTMLElement. With this style, no additional code is needed as a facade (reducing payload\n * size).\n *\n * - ProceduralRenderer3\n *\n * In non-native browser environments (e.g. platforms such as web-workers), this is the facade\n * that enables element manipulation. This also facilitates backwards compatibility with\n * Renderer2.\n */\nvar renderer;\nvar rendererFactory;\n\nfunction getCurrentSanitizer() {\n    return currentView && currentView.sanitizer;\n}\n/** Used to set the parent property when nodes are created. */\nvar previousOrParentNode;\n\n/**\n * If `isParent` is:\n *  - `true`: then `previousOrParentNode` points to a parent node.\n *  - `false`: then `previousOrParentNode` points to previous node (sibling).\n */\nvar isParent;\n/**\n * Static data that corresponds to the instance-specific data array on an LView.\n *\n * Each node's static data is stored in tData at the same index that it's stored\n * in the data array. Any nodes that do not have static data store a null value in\n * tData to avoid a sparse array.\n */\nvar tData;\n/**\n * State of the current view being processed.\n *\n * NOTE: we cheat here and initialize it to `null` even thought the type does not\n * contain `null`. This is because we expect this value to be not `null` as soon\n * as we enter the view. Declaring the type as `null` would require us to place `!`\n * in most instructions since they all assume that `currentView` is defined.\n */\nvar currentView = (null);\nvar currentQueries;\n\n/**\n * This property gets set before entering a template.\n */\nvar creationMode;\n\n/**\n * An array of nodes (text, element, container, etc), pipes, their bindings, and\n * any local variables that need to be stored between invocations.\n */\nvar data;\n/**\n * An array of directive instances in the current view.\n *\n * These must be stored separately from LNodes because their presence is\n * unknown at compile-time and thus space cannot be reserved in data[].\n */\nvar directives;\n/**\n * When a view is destroyed, listeners need to be released and outputs need to be\n * unsubscribed. This cleanup array stores both listener data (in chunks of 4)\n * and output data (in chunks of 2) for a particular view. Combining the arrays\n * saves on memory (70 bytes per array) and on a few bytes of code size (for two\n * separate for loops).\n *\n * If it's a listener being stored:\n * 1st index is: event name to remove\n * 2nd index is: native element\n * 3rd index is: listener function\n * 4th index is: useCapture boolean\n *\n * If it's an output subscription:\n * 1st index is: unsubscribe function\n * 2nd index is: context for function\n */\nvar cleanup;\n/**\n * In this mode, any changes in bindings will throw an ExpressionChangedAfterChecked error.\n *\n * Necessary to support ChangeDetectorRef.checkNoChanges().\n */\nvar checkNoChangesMode = false;\n/** Whether or not this is the first time the current view has been processed. */\nvar firstTemplatePass = true;\n/**\n * Swap the current state with a new state.\n *\n * For performance reasons we store the state in the top level of the module.\n * This way we minimize the number of properties to read. Whenever a new view\n * is entered we have to store the state for later, and when the view is\n * exited the state has to be restored\n *\n * @param newView New state to become active\n * @param host Element to which the View is a child of\n * @returns the previous state;\n */\nfunction enterView(newView, host) {\n    var oldView = currentView;\n    data = newView && newView.data;\n    directives = newView && newView.directives;\n    tData = newView && newView.tView.data;\n    creationMode = newView && (newView.flags & 1 /* CreationMode */) === 1 /* CreationMode */;\n    firstTemplatePass = newView && newView.tView.firstTemplatePass;\n    cleanup = newView && newView.cleanup;\n    renderer = newView && newView.renderer;\n    if (newView && newView.bindingIndex < 0) {\n        newView.bindingIndex = newView.bindingStartIndex;\n    }\n    if (host != null) {\n        previousOrParentNode = host;\n        isParent = true;\n    }\n    currentView = newView;\n    currentQueries = newView && newView.queries;\n    return oldView;\n}\n/**\n * Used in lieu of enterView to make it clear when we are exiting a child view. This makes\n * the direction of traversal (up or down the view tree) a bit clearer.\n *\n * @param newView New state to become active\n * @param creationOnly An optional boolean to indicate that the view was processed in creation mode\n * only, i.e. the first update will be done later. Only possible for dynamically created views.\n */\nfunction leaveView(newView, creationOnly) {\n    if (!creationOnly) {\n        if (!checkNoChangesMode) {\n            executeHooks((directives), currentView.tView.viewHooks, currentView.tView.viewCheckHooks, creationMode);\n        }\n        // Views are clean and in update mode after being checked, so these bits are cleared\n        currentView.flags &= ~(1 /* CreationMode */ | 4 /* Dirty */);\n    }\n    currentView.lifecycleStage = 1 /* Init */;\n    currentView.bindingIndex = -1;\n    enterView(newView, null);\n}\n/**\n * Refreshes the view, executing the following steps in that order:\n * triggers init hooks, refreshes dynamic children, triggers content hooks, sets host bindings,\n * refreshes child components.\n * Note: view hooks are triggered later when leaving the view.\n * */\nfunction refreshView() {\n    var tView = currentView.tView;\n    if (!checkNoChangesMode) {\n        executeInitHooks(currentView, tView, creationMode);\n    }\n    refreshDynamicChildren();\n    if (!checkNoChangesMode) {\n        executeHooks((directives), tView.contentHooks, tView.contentCheckHooks, creationMode);\n    }\n    // This needs to be set before children are processed to support recursive components\n    tView.firstTemplatePass = firstTemplatePass = false;\n    setHostBindings(tView.hostBindings);\n    refreshChildComponents(tView.components);\n}\n/** Sets the host bindings for the current view. */\nfunction setHostBindings(bindings) {\n    if (bindings != null) {\n        var defs = (currentView.tView.directives);\n        for (var i = 0; i < bindings.length; i += 2) {\n            var dirIndex = bindings[i];\n            var def = defs[dirIndex];\n            def.hostBindings && def.hostBindings(dirIndex, bindings[i + 1]);\n        }\n    }\n}\n/** Refreshes child components in the current view. */\nfunction refreshChildComponents(components) {\n    if (components != null) {\n        for (var i = 0; i < components.length; i += 2) {\n            componentRefresh(components[i], components[i + 1]);\n        }\n    }\n}\nfunction executeInitAndContentHooks() {\n    if (!checkNoChangesMode) {\n        var tView = currentView.tView;\n        executeInitHooks(currentView, tView, creationMode);\n        executeHooks((directives), tView.contentHooks, tView.contentCheckHooks, creationMode);\n    }\n}\nfunction createLView(viewId, renderer, tView, template, context, flags, sanitizer) {\n    var newView = {\n        parent: currentView,\n        id: viewId,\n        // -1 for component views\n        flags: flags | 1 /* CreationMode */ | 8 /* Attached */,\n        node: (null),\n        // until we initialize it in createNode.\n        data: [],\n        directives: null,\n        tView: tView,\n        cleanup: null,\n        renderer: renderer,\n        child: null,\n        tail: null,\n        next: null,\n        bindingStartIndex: -1,\n        bindingIndex: -1,\n        template: template,\n        context: context,\n        dynamicViewCount: 0,\n        lifecycleStage: 1 /* Init */,\n        queries: null,\n        injector: currentView && currentView.injector,\n        sanitizer: sanitizer || null\n    };\n    return newView;\n}\n/**\n * Creation of LNode object is extracted to a separate function so we always create LNode object\n * with the same shape\n * (same properties assigned in the same order).\n */\nfunction createLNodeObject(type, currentView, parent, native, state, queries) {\n    return {\n        native: native,\n        view: currentView,\n        nodeInjector: parent ? parent.nodeInjector : null,\n        data: state,\n        queries: queries,\n        tNode: (null),\n        pNextOrParent: null,\n        dynamicLContainerNode: null\n    };\n}\nfunction createLNode(index, type, native, name, attrs, state) {\n    var parent = isParent ? previousOrParentNode :\n        previousOrParentNode && getParentLNode(previousOrParentNode);\n    // Parents cannot cross component boundaries because components will be used in multiple places,\n    // so it's only set if the view is the same.\n    var tParent = parent && parent.view === currentView ? parent.tNode : null;\n    var queries = (isParent ? currentQueries : previousOrParentNode && previousOrParentNode.queries) ||\n        parent && parent.queries && parent.queries.child();\n    var isState = state != null;\n    var node = createLNodeObject(type, currentView, parent, native, isState ? state : null, queries);\n    if (index === null || type === 2 /* View */) {\n        // View nodes are not stored in data because they can be added / removed at runtime (which\n        // would cause indices to change). Their TNodes are instead stored in TView.node.\n        node.tNode = state.tView.node || createTNode(type, index, null, null, tParent, null);\n    }\n    else {\n        // This is an element or container or projection node\n        ngDevMode && assertDataNext(index);\n        data[index] = node;\n        // Every node adds a value to the static data array to avoid a sparse array\n        if (index >= tData.length) {\n            var tNode = tData[index] = createTNode(type, index, name, attrs, tParent, null);\n            if (!isParent && previousOrParentNode) {\n                var previousTNode = previousOrParentNode.tNode;\n                previousTNode.next = tNode;\n                if (previousTNode.dynamicContainerNode)\n                    previousTNode.dynamicContainerNode.next = tNode;\n            }\n        }\n        node.tNode = tData[index];\n        // Now link ourselves into the tree.\n        if (isParent) {\n            currentQueries = null;\n            if (previousOrParentNode.tNode.child == null && previousOrParentNode.view === currentView ||\n                previousOrParentNode.tNode.type === 2 /* View */) {\n                // We are in the same view, which means we are adding content node to the parent View.\n                previousOrParentNode.tNode.child = node.tNode;\n            }\n        }\n    }\n    // View nodes and host elements need to set their host node (components set host nodes later)\n    if ((type & 2 /* ViewOrElement */) === 2 /* ViewOrElement */ && isState) {\n        // Bit of a hack to bust through the readonly because there is a circular dep between\n        // LView and LNode.\n        ngDevMode && assertNull(state.node, 'LView.node should not have been initialized');\n        state.node = node;\n        if (firstTemplatePass)\n            state.tView.node = node.tNode;\n    }\n    previousOrParentNode = node;\n    isParent = true;\n    return node;\n}\n/**\n *\n * @param hostNode Existing node to render into.\n * @param template Template function with the instructions.\n * @param context to pass into the template.\n * @param providedRendererFactory renderer factory to use\n * @param host The host element node to use\n * @param directives Directive defs that should be used for matching\n * @param pipes Pipe defs that should be used for matching\n */\n\n/**\n * Used for rendering embedded views (e.g. dynamically created views)\n *\n * Dynamically created views must store/retrieve their TViews differently from component views\n * because their template functions are nested in the template functions of their hosts, creating\n * closures. If their host template happens to be an embedded template in a loop (e.g. ngFor inside\n * an ngFor), the nesting would mean we'd have multiple instances of the template function, so we\n * can't store TViews in the template function itself (as we do for comps). Instead, we store the\n * TView for dynamically created views on their host TNode, which only has one instance.\n */\nfunction renderEmbeddedTemplate(viewNode, tView, template, context, renderer, directives, pipes) {\n    var _isParent = isParent;\n    var _previousOrParentNode = previousOrParentNode;\n    var oldView;\n    var rf = 2;\n    try {\n        isParent = true;\n        previousOrParentNode = (null);\n        if (viewNode == null) {\n            var lView = createLView(-1, renderer, tView, template, context, 2 /* CheckAlways */, getCurrentSanitizer());\n            viewNode = createLNode(null, 2 /* View */, null, null, null, lView);\n            rf = 1 /* Create */;\n        }\n        oldView = enterView(viewNode.data, viewNode);\n        template(rf, context);\n        if (rf & 2 /* Update */) {\n            refreshView();\n        }\n        else {\n            viewNode.data.tView.firstTemplatePass = firstTemplatePass = false;\n        }\n    }\n    finally {\n        // renderEmbeddedTemplate() is called twice in fact, once for creation only and then once for\n        // update. When for creation only, leaveView() must not trigger view hooks, nor clean flags.\n        var isCreationOnly = (rf & 1 /* Create */) === 1;\n        leaveView((oldView), isCreationOnly);\n        isParent = _isParent;\n        previousOrParentNode = _previousOrParentNode;\n    }\n    return viewNode;\n}\nfunction renderComponentOrTemplate(node, hostView, componentOrContext, template) {\n    var oldView = enterView(hostView, node);\n    try {\n        if (rendererFactory.begin) {\n            rendererFactory.begin();\n        }\n        if (template) {\n            template(getRenderFlags(hostView), (componentOrContext));\n            refreshView();\n        }\n        else {\n            executeInitAndContentHooks();\n            // Element was stored at 0 in data and directive was stored at 0 in directives\n            // in renderComponent()\n            setHostBindings(_ROOT_DIRECTIVE_INDICES);\n            componentRefresh(0, 0);\n        }\n    }\n    finally {\n        if (rendererFactory.end) {\n            rendererFactory.end();\n        }\n        leaveView(oldView);\n    }\n}\n/**\n * This function returns the default configuration of rendering flags depending on when the\n * template is in creation mode or update mode. By default, the update block is run with the\n * creation block when the view is in creation mode. Otherwise, the update block is run\n * alone.\n *\n * Dynamically created views do NOT use this configuration (update block and create block are\n * always run separately).\n */\nfunction getRenderFlags(view) {\n    return view.flags & 1 /* CreationMode */ ? 1 /* Create */ | 2 /* Update */ :\n        2 /* Update */;\n}\n/**\n * Create DOM element. The instruction must later be followed by `elementEnd()` call.\n *\n * @param index Index of the element in the data array\n * @param name Name of the DOM Node\n * @param attrs Statically bound set of attributes to be written into the DOM element on creation.\n * @param localRefs A set of local reference bindings on the element.\n *\n * Attributes and localRefs are passed as an array of strings where elements with an even index\n * hold an attribute name and elements with an odd index hold an attribute value, ex.:\n * ['id', 'warning5', 'class', 'alert']\n */\n\n\n/** Sets the context for a ChangeDetectorRef to the given instance. */\n\n\n/** Creates a TView instance */\n\n\n/**\n * Locates the host native element, used for bootstrapping existing nodes into rendering pipeline.\n *\n * @param elementOrSelector Render element or CSS selector to locate the element.\n */\n\n/**\n * Creates the host LNode.\n *\n * @param rNode Render host element.\n * @param def ComponentDef\n *\n * @returns LElementNode created\n */\n\n/**\n * Adds an event listener to the current node.\n *\n * If an output exists on one of the node's directives, it also subscribes to the output\n * and saves the subscription for later cleanup.\n *\n * @param eventName Name of the event\n * @param listenerFn The function to be called when event emits\n * @param useCapture Whether or not to use capture in event listener.\n */\n\n/** Mark the end of the element. */\n\n/**\n * Updates the value of removes an attribute on an Element.\n *\n * @param number index The index of the element in the data array\n * @param name name The name of the attribute.\n * @param value value The attribute is removed when value is `null` or `undefined`.\n *                  Otherwise the attribute value is set to the stringified value.\n * @param sanitizer An optional function used to sanitize the value.\n */\n\n/**\n * Update a property on an Element.\n *\n * If the property name also exists as an input property on one of the element's directives,\n * the component property will be set instead of the element property. This check must\n * be conducted at runtime so child components that add new @Inputs don't have to be re-compiled.\n *\n * @param index The index of the element to update in the data array\n * @param propName Name of property. Because it is going to DOM, this is not subject to\n *        renaming as part of minification.\n * @param value New value to write.\n * @param sanitizer An optional function used to sanitize the value.\n */\n\n/**\n * Constructs a TNode object from the arguments.\n *\n * @param type The type of the node\n * @param index The index of the TNode in TView.data\n * @param tagName The tag name of the node\n * @param attrs The attributes defined on this node\n * @param parent The parent of this node\n * @param tViews Any TViews attached to this node\n * @returns the TNode object\n */\nfunction createTNode(type, index, tagName, attrs, parent, tViews) {\n    ngDevMode && ngDevMode.tNode++;\n    return {\n        type: type,\n        index: index,\n        flags: 0,\n        tagName: tagName,\n        attrs: attrs,\n        localNames: null,\n        initialInputs: undefined,\n        inputs: undefined,\n        outputs: undefined,\n        tViews: tViews,\n        next: null,\n        child: null,\n        parent: parent,\n        dynamicContainerNode: null\n    };\n}\n/**\n * Add or remove a class in a `classList` on a DOM element.\n *\n * This instruction is meant to handle the [class.foo]=\"exp\" case\n *\n * @param index The index of the element to update in the data array\n * @param className Name of class to toggle. Because it is going to DOM, this is not subject to\n *        renaming as part of minification.\n * @param value A value indicating if a given class should be added or removed.\n */\n\n/**\n * Set the `className` property on a DOM element.\n *\n * This instruction is meant to handle the `[class]=\"exp\"` usage.\n *\n * `elementClass` instruction writes the value to the \"element's\" `className` property.\n *\n * @param index The index of the element to update in the data array\n * @param value A value indicating a set of classes which should be applied. The method overrides\n *   any existing classes. The value is stringified (`toString`) before it is applied to the\n *   element.\n */\n\n\n/**\n * Set the `style` property on a DOM element.\n *\n * This instruction is meant to handle the `[style]=\"exp\"` usage.\n *\n *\n * @param index The index of the element to update in the data array\n * @param value A value indicating if a given style should be added or removed.\n *   The expected shape of `value` is an object where keys are style names and the values\n *   are their corresponding values to set. If value is falsy than the style is remove. An absence\n *   of style does not cause that style to be removed. `NO_CHANGE` implies that no update should be\n *   performed.\n */\n\n/**\n * Create static text node\n *\n * @param index Index of the node in the data array.\n * @param value Value to write. This value will be stringified.\n */\n\n/**\n * Create text node with binding\n * Bindings should be handled externally with the proper bind(1-8) method\n *\n * @param index Index of the node in the data array.\n * @param value Stringified value to write.\n */\n\n/**\n * Create a directive.\n *\n * NOTE: directives can be created in order other than the index order. They can also\n *       be retrieved before they are created in which case the value will be null.\n *\n * @param directive The directive instance.\n * @param directiveDef DirectiveDef object which contains information about the template.\n */\n\n/**\n * A lighter version of directiveCreate() that is used for the root component\n *\n * This version does not contain features that we don't already support at root in\n * current Angular. Example: local refs and inputs on root component.\n */\n\n\n/**\n * Creates an LContainerNode.\n *\n * Only `LViewNodes` can go into `LContainerNodes`.\n *\n * @param index The index of the container in the data array\n * @param template Optional inline template\n * @param tagName The name of the container element, if applicable\n * @param attrs The attrs attached to the container, if applicable\n * @param localRefs A set of local reference bindings on the element.\n */\n\n/**\n * Sets a container up to receive views.\n *\n * @param index The index of the container in the data array\n */\n\n/**\n * Marks the end of the LContainerNode.\n *\n * Marking the end of LContainerNode is the time when to child Views get inserted or removed.\n */\n\nfunction refreshDynamicChildren() {\n    for (var current = currentView.child; current !== null; current = current.next) {\n        if (current.dynamicViewCount !== 0 && current.views) {\n            var container_1 = current;\n            for (var i = 0; i < container_1.views.length; i++) {\n                var lViewNode = container_1.views[i];\n                // The directives and pipes are not needed here as an existing view is only being refreshed.\n                var dynamicView = lViewNode.data;\n                ngDevMode && assertNotNull$1(dynamicView.tView, 'TView must be allocated');\n                renderEmbeddedTemplate(lViewNode, dynamicView.tView, (dynamicView.template), (dynamicView.context), renderer);\n            }\n        }\n    }\n}\n/**\n * Marks the start of an embedded view.\n *\n * @param viewBlockId The ID of this view\n * @return boolean Whether or not this view is in creation mode\n */\n\n/** Marks the end of an embedded view. */\n\n/**\n * Refreshes components by entering the component view and processing its bindings, queries, etc.\n *\n * @param directiveIndex\n * @param elementIndex\n */\nfunction componentRefresh(directiveIndex, elementIndex) {\n    ngDevMode && assertDataInRange(elementIndex);\n    var element = data[elementIndex];\n    ngDevMode && assertNodeType(element, 3 /* Element */);\n    ngDevMode && assertNotNull$1(element.data, \"Component's host node should have an LView attached.\");\n    var hostView = (element.data);\n    // Only attached CheckAlways components or attached, dirty OnPush components should be checked\n    if (viewAttached(hostView) && hostView.flags & (2 /* CheckAlways */ | 4 /* Dirty */)) {\n        ngDevMode && assertDataInRange(directiveIndex, (directives));\n        var def = currentView.tView.directives[directiveIndex];\n        detectChangesInternal(hostView, element, def, getDirectiveInstance(directives[directiveIndex]));\n    }\n}\n/** Returns a boolean for whether the view is attached */\nfunction viewAttached(view) {\n    return (view.flags & 8 /* Attached */) === 8 /* Attached */;\n}\n/**\n * Instruction to distribute projectable nodes among <ng-content> occurrences in a given template.\n * It takes all the selectors from the entire component's template and decides where\n * each projected node belongs (it re-distributes nodes among \"buckets\" where each \"bucket\" is\n * backed by a selector).\n *\n * This function requires CSS selectors to be provided in 2 forms: parsed (by a compiler) and text,\n * un-parsed form.\n *\n * The parsed form is needed for efficient matching of a node against a given CSS selector.\n * The un-parsed, textual form is needed for support of the ngProjectAs attribute.\n *\n * Having a CSS selector in 2 different formats is not ideal, but alternatives have even more\n * drawbacks:\n * - having only a textual form would require runtime parsing of CSS selectors;\n * - we can't have only a parsed as we can't re-construct textual form from it (as entered by a\n * template author).\n *\n * @param selectors A collection of parsed CSS selectors\n * @param rawSelectors A collection of CSS selectors in the raw, un-parsed form\n */\n\n/**\n * Inserts previously re-distributed projected nodes. This instruction must be preceded by a call\n * to the projectionDef instruction.\n *\n * @param nodeIndex\n * @param localIndex - index under which distribution of projected nodes was memorized\n * @param selectorIndex:\n *        - 0 when the selector is `*` (or unspecified as this is the default value),\n *        - 1 based index of the selector from the {@link projectionDef}\n */\n\n/**\n * Adds a LView or a LContainer to the end of the current view tree.\n *\n * This structure will be used to traverse through nested views to remove listeners\n * and call onDestroy callbacks.\n *\n * @param currentView The view where LView or LContainer should be added\n * @param state The LView or LContainer to add to the view tree\n * @returns The state passed in\n */\n\n/** If node is an OnPush component, marks its LView dirty. */\n\n/**\n * Wraps an event listener so its host view and its ancestor views will be marked dirty\n * whenever the event fires. Necessary to support OnPush components.\n */\n\n/**\n * Wraps an event listener so its host view and its ancestor views will be marked dirty\n * whenever the event fires. Also wraps with preventDefault behavior.\n */\n\n/** Marks current view and all ancestors dirty */\nfunction markViewDirty(view) {\n    var currentView = view;\n    while (currentView.parent != null) {\n        currentView.flags |= 4 /* Dirty */;\n        currentView = currentView.parent;\n    }\n    currentView.flags |= 4 /* Dirty */;\n    ngDevMode && assertNotNull$1(currentView.context, 'rootContext');\n    scheduleTick(currentView.context);\n}\n/**\n * Used to schedule change detection on the whole application.\n *\n * Unlike `tick`, `scheduleTick` coalesces multiple calls into one change detection run.\n * It is usually called indirectly by calling `markDirty` when the view needs to be\n * re-rendered.\n *\n * Typically `scheduleTick` uses `requestAnimationFrame` to coalesce multiple\n * `scheduleTick` requests. The scheduling function can be overridden in\n * `renderComponent`'s `scheduler` option.\n */\nfunction scheduleTick(rootContext) {\n    if (rootContext.clean == _CLEAN_PROMISE) {\n        var res_1;\n        rootContext.clean = new Promise(function (r) { return res_1 = r; });\n        rootContext.scheduler(function () {\n            tick(rootContext.component);\n            res_1(null);\n            rootContext.clean = _CLEAN_PROMISE;\n        });\n    }\n}\n/**\n * Used to perform change detection on the whole application.\n *\n * This is equivalent to `detectChanges`, but invoked on root component. Additionally, `tick`\n * executes lifecycle hooks and conditionally checks components based on their\n * `ChangeDetectionStrategy` and dirtiness.\n *\n * The preferred way to trigger change detection is to call `markDirty`. `markDirty` internally\n * schedules `tick` using a scheduler in order to coalesce multiple `markDirty` calls into a\n * single change detection run. By default, the scheduler is `requestAnimationFrame`, but can\n * be changed when calling `renderComponent` and providing the `scheduler` option.\n */\nfunction tick(component) {\n    var rootView = getRootView(component);\n    var rootComponent = rootView.context.component;\n    var hostNode = _getComponentHostLElementNode(rootComponent);\n    ngDevMode && assertNotNull$1(hostNode.data, 'Component host node should be attached to an LView');\n    renderComponentOrTemplate(hostNode, rootView, rootComponent);\n}\n/**\n * Retrieve the root view from any component by walking the parent `LView` until\n * reaching the root `LView`.\n *\n * @param component any component\n */\nfunction getRootView(component) {\n    ngDevMode && assertNotNull$1(component, 'component');\n    var lElementNode = _getComponentHostLElementNode(component);\n    var lView = lElementNode.view;\n    while (lView.parent) {\n        lView = lView.parent;\n    }\n    return lView;\n}\n/**\n * Synchronously perform change detection on a component (and possibly its sub-components).\n *\n * This function triggers change detection in a synchronous way on a component. There should\n * be very little reason to call this function directly since a preferred way to do change\n * detection is to {@link markDirty} the component and wait for the scheduler to call this method\n * at some future point in time. This is because a single user action often results in many\n * components being invalidated and calling change detection on each component synchronously\n * would be inefficient. It is better to wait until all components are marked as dirty and\n * then perform single change detection across all of the components\n *\n * @param component The component which the change detection should be performed on.\n */\nfunction detectChanges(component) {\n    var hostNode = _getComponentHostLElementNode(component);\n    ngDevMode && assertNotNull$1(hostNode.data, 'Component host node should be attached to an LView');\n    var componentIndex = hostNode.tNode.flags >> 13;\n    var def = hostNode.view.tView.directives[componentIndex];\n    detectChangesInternal(hostNode.data, hostNode, def, component);\n}\n/**\n * Checks the change detector and its children, and throws if any changes are detected.\n *\n * This is used in development mode to verify that running change detection doesn't\n * introduce other changes.\n */\nfunction checkNoChanges(component) {\n    checkNoChangesMode = true;\n    try {\n        detectChanges(component);\n    }\n    finally {\n        checkNoChangesMode = false;\n    }\n}\n/** Checks the view of the component provided. Does not gate on dirty checks or execute doCheck. */\nfunction detectChangesInternal(hostView, hostNode, def, component) {\n    var oldView = enterView(hostView, hostNode);\n    var template = def.template;\n    try {\n        template(getRenderFlags(hostView), component);\n        refreshView();\n    }\n    finally {\n        leaveView(oldView);\n    }\n}\n/**\n * Mark the component as dirty (needing change detection).\n *\n * Marking a component dirty will schedule a change detection on this\n * component at some point in the future. Marking an already dirty\n * component as dirty is a noop. Only one outstanding change detection\n * can be scheduled per component tree. (Two components bootstrapped with\n * separate `renderComponent` will have separate schedulers)\n *\n * When the root component is bootstrapped with `renderComponent`, a scheduler\n * can be provided.\n *\n * @param component Component to mark as dirty.\n */\n\n/** A special value which designates that a value has not changed. */\n\n/**\n * Creates a single value binding.\n *\n * @param value Value to diff\n */\n\n/**\n * Reserves slots for pure functions (`pureFunctionX` instructions)\n *\n * Binding for pure functions are store after the LNodes in the data array but before the binding.\n *\n *  ----------------------------------------------------------------------------\n *  |  LNodes ... | pure function bindings | regular bindings / interpolations |\n *  ----------------------------------------------------------------------------\n *                                         ^\n *                                         LView.bindingStartIndex\n *\n * Pure function instructions are given an offset from LView.bindingStartIndex.\n * Subtracting the offset from LView.bindingStartIndex gives the first index where the bindings\n * are stored.\n *\n * NOTE: reserveSlots instructions are only ever allowed at the very end of the creation block\n */\n\n/**\n * Sets up the binding index before execute any `pureFunctionX` instructions.\n *\n * The index must be restored after the pure function is executed\n *\n * {@link reserveSlots}\n */\n\n/**\n * Restores the binding index to the given value.\n *\n * This function is typically used to restore the index after a `pureFunctionX` has\n * been executed.\n */\n\n/**\n * Create interpolation bindings with a variable number of expressions.\n *\n * If there are 1 to 8 expressions `interpolation1()` to `interpolation8()` should be used instead.\n * Those are faster because there is no need to create an array of expressions and iterate over it.\n *\n * `values`:\n * - has static text at even indexes,\n * - has evaluated expressions at odd indexes.\n *\n * Returns the concatenated string when any of the arguments changes, `NO_CHANGE` otherwise.\n */\n\n/**\n * Creates an interpolation binding with 1 expression.\n *\n * @param prefix static value used for concatenation only.\n * @param v0 value checked for change.\n * @param suffix static value used for concatenation only.\n */\n\n/** Creates an interpolation binding with 2 expressions. */\n\n/** Creates an interpolation bindings with 3 expressions. */\n\n/** Create an interpolation binding with 4 expressions. */\n\n/** Creates an interpolation binding with 5 expressions. */\n\n/** Creates an interpolation binding with 6 expressions. */\n\n/** Creates an interpolation binding with 7 expressions. */\n\n/** Creates an interpolation binding with 8 expressions. */\n\n/** Store a value in the `data` at a given `index`. */\n\n/** Retrieves a value from the `data`. */\n\n/** Retrieves a value from the `directives` array. */\n\n/** Gets the current binding value and increments the binding index. */\n\n/** Updates binding if changed, then returns whether it was updated. */\n\n/** Updates binding if changed, then returns the latest value. */\n\n/** Updates 2 bindings if changed, then returns whether either was updated. */\n\n/** Updates 4 bindings if changed, then returns whether any was updated. */\n\n\nfunction getDirectiveInstance(instanceOrArray) {\n    // Directives with content queries store an array in directives[directiveIndex]\n    // with the instance as the first index\n    return Array.isArray(instanceOrArray) ? instanceOrArray[0] : instanceOrArray;\n}\n\nfunction assertDataInRange(index, arr) {\n    if (arr == null)\n        arr = data;\n    assertLessThan(index, arr ? arr.length : 0, 'index expected to be a valid data index');\n}\nfunction assertDataNext(index, arr) {\n    if (arr == null)\n        arr = data;\n    assertEqual(arr.length, index, \"index \" + index + \" expected to be at the end of arr (length \" + arr.length + \")\");\n}\n/**\n * On the first template pass the reserved slots should be set `NO_CHANGE`.\n *\n * If not they might not have been actually reserved.\n */\n\nfunction _getComponentHostLElementNode(component) {\n    ngDevMode && assertNotNull$1(component, 'expecting component got null');\n    var lElementNode = component[NG_HOST_SYMBOL];\n    ngDevMode && assertNotNull$1(component, 'object is not a component');\n    return lElementNode;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ViewRef$1 = /** @class */ (function () {\n    function ViewRef(_view, context) {\n        this._view = _view;\n        this.context = (context);\n    }\n    /** @internal */\n    /** @internal */\n    ViewRef.prototype._setComponentContext = /** @internal */\n    function (view, context) {\n        this._view = view;\n        this.context = context;\n    };\n    ViewRef.prototype.destroy = function () {  };\n    ViewRef.prototype.onDestroy = function (callback) {  };\n    /**\n     * Marks a view and all of its ancestors dirty.\n     *\n     * It also triggers change detection by calling `scheduleTick` internally, which coalesces\n     * multiple `markForCheck` calls to into one change detection run.\n     *\n     * This can be used to ensure an {@link ChangeDetectionStrategy#OnPush OnPush} component is\n     * checked when it needs to be re-rendered but the two normal triggers haven't marked it\n     * dirty (i.e. inputs haven't changed and events haven't fired in the view).\n     *\n     * <!-- TODO: Add a link to a chapter on OnPush components -->\n     *\n     * ### Example ([live demo](https://stackblitz.com/edit/angular-kx7rrw))\n     *\n     * ```typescript\n     * @Component({\n     *   selector: 'my-app',\n     *   template: `Number of ticks: {{numberOfTicks}}`\n     *   changeDetection: ChangeDetectionStrategy.OnPush,\n     * })\n     * class AppComponent {\n     *   numberOfTicks = 0;\n     *\n     *   constructor(private ref: ChangeDetectorRef) {\n     *     setInterval(() => {\n     *       this.numberOfTicks++;\n     *       // the following is required, otherwise the view will not be updated\n     *       this.ref.markForCheck();\n     *     }, 1000);\n     *   }\n     * }\n     * ```\n     */\n    /**\n       * Marks a view and all of its ancestors dirty.\n       *\n       * It also triggers change detection by calling `scheduleTick` internally, which coalesces\n       * multiple `markForCheck` calls to into one change detection run.\n       *\n       * This can be used to ensure an {@link ChangeDetectionStrategy#OnPush OnPush} component is\n       * checked when it needs to be re-rendered but the two normal triggers haven't marked it\n       * dirty (i.e. inputs haven't changed and events haven't fired in the view).\n       *\n       * <!-- TODO: Add a link to a chapter on OnPush components -->\n       *\n       * ### Example ([live demo](https://stackblitz.com/edit/angular-kx7rrw))\n       *\n       * ```typescript\n       * @Component({\n       *   selector: 'my-app',\n       *   template: `Number of ticks: {{numberOfTicks}}`\n       *   changeDetection: ChangeDetectionStrategy.OnPush,\n       * })\n       * class AppComponent {\n       *   numberOfTicks = 0;\n       *\n       *   constructor(private ref: ChangeDetectorRef) {\n       *     setInterval(() => {\n       *       this.numberOfTicks++;\n       *       // the following is required, otherwise the view will not be updated\n       *       this.ref.markForCheck();\n       *     }, 1000);\n       *   }\n       * }\n       * ```\n       */\n    ViewRef.prototype.markForCheck = /**\n       * Marks a view and all of its ancestors dirty.\n       *\n       * It also triggers change detection by calling `scheduleTick` internally, which coalesces\n       * multiple `markForCheck` calls to into one change detection run.\n       *\n       * This can be used to ensure an {@link ChangeDetectionStrategy#OnPush OnPush} component is\n       * checked when it needs to be re-rendered but the two normal triggers haven't marked it\n       * dirty (i.e. inputs haven't changed and events haven't fired in the view).\n       *\n       * <!-- TODO: Add a link to a chapter on OnPush components -->\n       *\n       * ### Example ([live demo](https://stackblitz.com/edit/angular-kx7rrw))\n       *\n       * ```typescript\n       * @Component({\n       *   selector: 'my-app',\n       *   template: `Number of ticks: {{numberOfTicks}}`\n       *   changeDetection: ChangeDetectionStrategy.OnPush,\n       * })\n       * class AppComponent {\n       *   numberOfTicks = 0;\n       *\n       *   constructor(private ref: ChangeDetectorRef) {\n       *     setInterval(() => {\n       *       this.numberOfTicks++;\n       *       // the following is required, otherwise the view will not be updated\n       *       this.ref.markForCheck();\n       *     }, 1000);\n       *   }\n       * }\n       * ```\n       */\n    function () { markViewDirty(this._view); };\n    /**\n     * Detaches the view from the change detection tree.\n     *\n     * Detached views will not be checked during change detection runs until they are\n     * re-attached, even if they are dirty. `detach` can be used in combination with\n     * {@link ChangeDetectorRef#detectChanges detectChanges} to implement local change\n     * detection checks.\n     *\n     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n     * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n     *\n     * ### Example\n     *\n     * The following example defines a component with a large list of readonly data.\n     * Imagine the data changes constantly, many times per second. For performance reasons,\n     * we want to check and update the list every five seconds. We can do that by detaching\n     * the component's change detector and doing a local check every five seconds.\n     *\n     * ```typescript\n     * class DataProvider {\n     *   // in a real application the returned data will be different every time\n     *   get data() {\n     *     return [1,2,3,4,5];\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'giant-list',\n     *   template: `\n     *     <li *ngFor=\"let d of dataProvider.data\">Data {{d}}</li>\n     *   `,\n     * })\n     * class GiantList {\n     *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {\n     *     ref.detach();\n     *     setInterval(() => {\n     *       this.ref.detectChanges();\n     *     }, 5000);\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'app',\n     *   providers: [DataProvider],\n     *   template: `\n     *     <giant-list><giant-list>\n     *   `,\n     * })\n     * class App {\n     * }\n     * ```\n     */\n    /**\n       * Detaches the view from the change detection tree.\n       *\n       * Detached views will not be checked during change detection runs until they are\n       * re-attached, even if they are dirty. `detach` can be used in combination with\n       * {@link ChangeDetectorRef#detectChanges detectChanges} to implement local change\n       * detection checks.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n       *\n       * ### Example\n       *\n       * The following example defines a component with a large list of readonly data.\n       * Imagine the data changes constantly, many times per second. For performance reasons,\n       * we want to check and update the list every five seconds. We can do that by detaching\n       * the component's change detector and doing a local check every five seconds.\n       *\n       * ```typescript\n       * class DataProvider {\n       *   // in a real application the returned data will be different every time\n       *   get data() {\n       *     return [1,2,3,4,5];\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'giant-list',\n       *   template: `\n       *     <li *ngFor=\"let d of dataProvider.data\">Data {{d}}</li>\n       *   `,\n       * })\n       * class GiantList {\n       *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {\n       *     ref.detach();\n       *     setInterval(() => {\n       *       this.ref.detectChanges();\n       *     }, 5000);\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'app',\n       *   providers: [DataProvider],\n       *   template: `\n       *     <giant-list><giant-list>\n       *   `,\n       * })\n       * class App {\n       * }\n       * ```\n       */\n    ViewRef.prototype.detach = /**\n       * Detaches the view from the change detection tree.\n       *\n       * Detached views will not be checked during change detection runs until they are\n       * re-attached, even if they are dirty. `detach` can be used in combination with\n       * {@link ChangeDetectorRef#detectChanges detectChanges} to implement local change\n       * detection checks.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n       *\n       * ### Example\n       *\n       * The following example defines a component with a large list of readonly data.\n       * Imagine the data changes constantly, many times per second. For performance reasons,\n       * we want to check and update the list every five seconds. We can do that by detaching\n       * the component's change detector and doing a local check every five seconds.\n       *\n       * ```typescript\n       * class DataProvider {\n       *   // in a real application the returned data will be different every time\n       *   get data() {\n       *     return [1,2,3,4,5];\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'giant-list',\n       *   template: `\n       *     <li *ngFor=\"let d of dataProvider.data\">Data {{d}}</li>\n       *   `,\n       * })\n       * class GiantList {\n       *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {\n       *     ref.detach();\n       *     setInterval(() => {\n       *       this.ref.detectChanges();\n       *     }, 5000);\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'app',\n       *   providers: [DataProvider],\n       *   template: `\n       *     <giant-list><giant-list>\n       *   `,\n       * })\n       * class App {\n       * }\n       * ```\n       */\n    function () { this._view.flags &= ~8 /* Attached */; };\n    /**\n     * Re-attaches a view to the change detection tree.\n     *\n     * This can be used to re-attach views that were previously detached from the tree\n     * using {@link ChangeDetectorRef#detach detach}. Views are attached to the tree by default.\n     *\n     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n     *\n     * ### Example ([live demo](https://stackblitz.com/edit/angular-ymgsxw))\n     *\n     * The following example creates a component displaying `live` data. The component will detach\n     * its change detector from the main change detector tree when the component's live property\n     * is set to false.\n     *\n     * ```typescript\n     * class DataProvider {\n     *   data = 1;\n     *\n     *   constructor() {\n     *     setInterval(() => {\n     *       this.data = this.data * 2;\n     *     }, 500);\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'live-data',\n     *   inputs: ['live'],\n     *   template: 'Data: {{dataProvider.data}}'\n     * })\n     * class LiveData {\n     *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {}\n     *\n     *   set live(value) {\n     *     if (value) {\n     *       this.ref.reattach();\n     *     } else {\n     *       this.ref.detach();\n     *     }\n     *   }\n     * }\n     *\n     * @Component({\n     *   selector: 'my-app',\n     *   providers: [DataProvider],\n     *   template: `\n     *     Live Update: <input type=\"checkbox\" [(ngModel)]=\"live\">\n     *     <live-data [live]=\"live\"><live-data>\n     *   `,\n     * })\n     * class AppComponent {\n     *   live = true;\n     * }\n     * ```\n     */\n    /**\n       * Re-attaches a view to the change detection tree.\n       *\n       * This can be used to re-attach views that were previously detached from the tree\n       * using {@link ChangeDetectorRef#detach detach}. Views are attached to the tree by default.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       *\n       * ### Example ([live demo](https://stackblitz.com/edit/angular-ymgsxw))\n       *\n       * The following example creates a component displaying `live` data. The component will detach\n       * its change detector from the main change detector tree when the component's live property\n       * is set to false.\n       *\n       * ```typescript\n       * class DataProvider {\n       *   data = 1;\n       *\n       *   constructor() {\n       *     setInterval(() => {\n       *       this.data = this.data * 2;\n       *     }, 500);\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'live-data',\n       *   inputs: ['live'],\n       *   template: 'Data: {{dataProvider.data}}'\n       * })\n       * class LiveData {\n       *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {}\n       *\n       *   set live(value) {\n       *     if (value) {\n       *       this.ref.reattach();\n       *     } else {\n       *       this.ref.detach();\n       *     }\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'my-app',\n       *   providers: [DataProvider],\n       *   template: `\n       *     Live Update: <input type=\"checkbox\" [(ngModel)]=\"live\">\n       *     <live-data [live]=\"live\"><live-data>\n       *   `,\n       * })\n       * class AppComponent {\n       *   live = true;\n       * }\n       * ```\n       */\n    ViewRef.prototype.reattach = /**\n       * Re-attaches a view to the change detection tree.\n       *\n       * This can be used to re-attach views that were previously detached from the tree\n       * using {@link ChangeDetectorRef#detach detach}. Views are attached to the tree by default.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       *\n       * ### Example ([live demo](https://stackblitz.com/edit/angular-ymgsxw))\n       *\n       * The following example creates a component displaying `live` data. The component will detach\n       * its change detector from the main change detector tree when the component's live property\n       * is set to false.\n       *\n       * ```typescript\n       * class DataProvider {\n       *   data = 1;\n       *\n       *   constructor() {\n       *     setInterval(() => {\n       *       this.data = this.data * 2;\n       *     }, 500);\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'live-data',\n       *   inputs: ['live'],\n       *   template: 'Data: {{dataProvider.data}}'\n       * })\n       * class LiveData {\n       *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {}\n       *\n       *   set live(value) {\n       *     if (value) {\n       *       this.ref.reattach();\n       *     } else {\n       *       this.ref.detach();\n       *     }\n       *   }\n       * }\n       *\n       * @Component({\n       *   selector: 'my-app',\n       *   providers: [DataProvider],\n       *   template: `\n       *     Live Update: <input type=\"checkbox\" [(ngModel)]=\"live\">\n       *     <live-data [live]=\"live\"><live-data>\n       *   `,\n       * })\n       * class AppComponent {\n       *   live = true;\n       * }\n       * ```\n       */\n    function () { this._view.flags |= 8 /* Attached */; };\n    /**\n     * Checks the view and its children.\n     *\n     * This can also be used in combination with {@link ChangeDetectorRef#detach detach} to implement\n     * local change detection checks.\n     *\n     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n     * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n     *\n     * ### Example\n     *\n     * The following example defines a component with a large list of readonly data.\n     * Imagine, the data changes constantly, many times per second. For performance reasons,\n     * we want to check and update the list every five seconds.\n     *\n     * We can do that by detaching the component's change detector and doing a local change detection\n     * check every five seconds.\n     *\n     * See {@link ChangeDetectorRef#detach detach} for more information.\n     */\n    /**\n       * Checks the view and its children.\n       *\n       * This can also be used in combination with {@link ChangeDetectorRef#detach detach} to implement\n       * local change detection checks.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n       *\n       * ### Example\n       *\n       * The following example defines a component with a large list of readonly data.\n       * Imagine, the data changes constantly, many times per second. For performance reasons,\n       * we want to check and update the list every five seconds.\n       *\n       * We can do that by detaching the component's change detector and doing a local change detection\n       * check every five seconds.\n       *\n       * See {@link ChangeDetectorRef#detach detach} for more information.\n       */\n    ViewRef.prototype.detectChanges = /**\n       * Checks the view and its children.\n       *\n       * This can also be used in combination with {@link ChangeDetectorRef#detach detach} to implement\n       * local change detection checks.\n       *\n       * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n       * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n       *\n       * ### Example\n       *\n       * The following example defines a component with a large list of readonly data.\n       * Imagine, the data changes constantly, many times per second. For performance reasons,\n       * we want to check and update the list every five seconds.\n       *\n       * We can do that by detaching the component's change detector and doing a local change detection\n       * check every five seconds.\n       *\n       * See {@link ChangeDetectorRef#detach detach} for more information.\n       */\n    function () { detectChanges(this.context); };\n    /**\n     * Checks the change detector and its children, and throws if any changes are detected.\n     *\n     * This is used in development mode to verify that running change detection doesn't\n     * introduce other changes.\n     */\n    /**\n       * Checks the change detector and its children, and throws if any changes are detected.\n       *\n       * This is used in development mode to verify that running change detection doesn't\n       * introduce other changes.\n       */\n    ViewRef.prototype.checkNoChanges = /**\n       * Checks the change detector and its children, and throws if any changes are detected.\n       *\n       * This is used in development mode to verify that running change detection doesn't\n       * introduce other changes.\n       */\n    function () { checkNoChanges(this.context); };\n    return ViewRef;\n}());\nvar EmbeddedViewRef$1 = /** @class */ (function (_super) {\n    __extends(EmbeddedViewRef, _super);\n    function EmbeddedViewRef(viewNode, template, context) {\n        var _this = _super.call(this, viewNode.data, context) || this;\n        _this._lViewNode = viewNode;\n        return _this;\n    }\n    return EmbeddedViewRef;\n}(ViewRef$1));\n/**\n * Creates a ViewRef bundled with destroy functionality.\n *\n * @param context The context for this view\n * @returns The ViewRef\n */\n\n/**\n * Decorates an object with destroy logic (implementing the DestroyRef interface)\n * and returns the enhanced object.\n *\n * @param obj The object to decorate\n * @returns The object with destroy logic\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Bootstraps a component, then creates and returns a `ComponentRef` for that component.\n *\n * @param componentType Component to bootstrap\n * @param options Optional parameters which control bootstrapping\n */\n\n// TODO: A hack to not pull in the NullInjector from @angular/core.\n\n/**\n * Bootstraps a Component into an existing host element and returns an instance\n * of the component.\n *\n * Use this function to bootstrap a component into the DOM tree. Each invocation\n * of this function will create a separate tree of components, injectors and\n * change detection cycles and lifetimes. To dynamically insert a new component\n * into an existing tree such that it shares the same injection, change detection\n * and object lifetime, use {@link ViewContainer#createComponent}.\n *\n * @param componentType Component to bootstrap\n * @param options Optional parameters which control bootstrapping\n */\n\n/**\n * Used to enable lifecycle hooks on the root component.\n *\n * Include this feature when calling `renderComponent` if the root component\n * you are rendering has lifecycle hooks defined. Otherwise, the hooks won't\n * be called properly.\n *\n * Example:\n *\n * ```\n * renderComponent(AppComponent, {features: [RootLifecycleHooks]});\n * ```\n */\n\n/**\n * Retrieve the host element of the component.\n *\n * Use this function to retrieve the host element of the component. The host\n * element is the element which the component is associated with.\n *\n * @param component Component for which the host element should be retrieved.\n */\n\n/**\n * Retrieves the rendered text for a given component.\n *\n * This function retrieves the host element of a component and\n * and then returns the `textContent` for that element. This implies\n * that the text returned will include re-projected content of\n * the component as well.\n *\n * @param component The component to return the content text for.\n */\n\n/**\n * Wait on component until it is rendered.\n *\n * This function returns a `Promise` which is resolved when the component's\n * change detection is executed. This is determined by finding the scheduler\n * associated with the `component`'s render tree and waiting until the scheduler\n * flushes. If nothing is scheduled, the function returns a resolved promise.\n *\n * Example:\n * ```\n * await whenRendered(myComponent);\n * ```\n *\n * @param component Component to wait upon\n * @returns Promise which resolves when the component is rendered.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Registers this directive as present in its node's injector by flipping the directive's\n * corresponding bit in the injector's bloom filter.\n *\n * @param injector The node injector in which the directive should be registered\n * @param type The directive to register\n */\n\n\n/**\n * Creates (or gets an existing) injector for a given element or container.\n *\n * @param node for which an injector should be retrieved / created.\n * @returns Node injector\n */\n\n/**\n * Makes a directive public to the DI system by adding it to an injector's bloom filter.\n *\n * @param di The node injector in which a directive will be added\n * @param def The definition of the directive to be made public\n */\n\n/**\n * Makes a directive public to the DI system by adding it to an injector's bloom filter.\n *\n * @param def The definition of the directive to be made public\n */\n\n\n/**\n * Creates an ElementRef and stores it on the injector.\n * Or, if the ElementRef already exists, retrieves the existing ElementRef.\n *\n * @returns The ElementRef instance to use\n */\n\n/**\n * Creates a TemplateRef and stores it on the injector. Or, if the TemplateRef already\n * exists, retrieves the existing TemplateRef.\n *\n * @returns The TemplateRef instance to use\n */\n\n/**\n * Creates a ViewContainerRef and stores it on the injector. Or, if the ViewContainerRef\n * already exists, retrieves the existing ViewContainerRef.\n *\n * @returns The ViewContainerRef instance to use\n */\n\n/** Returns a ChangeDetectorRef (a.k.a. a ViewRef) */\n\n/**\n * Inject static attribute value into directive constructor.\n *\n * This method is used with `factory` functions which are generated as part of\n * `defineDirective` or `defineComponent`. The method retrieves the static value\n * of an attribute. (Dynamic attributes are not supported since they are not resolved\n *  at the time of injection and can change over time.)\n *\n * # Example\n * Given:\n * ```\n * @Component(...)\n * class MyComponent {\n *   constructor(@Attribute('title') title: string) { ... }\n * }\n * ```\n * When instantiated with\n * ```\n * <my-component title=\"Hello\"></my-component>\n * ```\n *\n * Then factory method generated is:\n * ```\n * MyComponent.ngComponentDef = defineComponent({\n *   factory: () => new MyComponent(injectAttribute('title'))\n *   ...\n * })\n * ```\n *\n * @experimental\n */\n\n/**\n * Creates a ViewRef and stores it on the injector as ChangeDetectorRef (public alias).\n * Or, if it already exists, retrieves the existing instance.\n *\n * @returns The ChangeDetectorRef to use\n */\n\n/**\n * Searches for an instance of the given directive type up the injector tree and returns\n * that instance if found.\n *\n * Specifically, it gets the bloom filter bit associated with the directive (see bloomHashBit),\n * checks that bit against the bloom filter structure to identify an injector that might have\n * the directive (see bloomFindPossibleInjector), then searches the directives on that injector\n * for a match.\n *\n * If not found, it will propagate up to the next parent injector until the token\n * is found or the top is reached.\n *\n * @param di Node injector where the search should start\n * @param token The directive type to search for\n * @param flags Injection flags (e.g. CheckParent)\n * @returns The instance found\n */\n\n/**\n * Finds the closest injector that might have a certain directive.\n *\n * Each directive corresponds to a bit in an injector's bloom filter. Given the bloom bit to\n * check and a starting injector, this function traverses up injectors until it finds an\n * injector that contains a 1 for that bit in its bloom filter. A 1 indicates that the\n * injector may have that directive. It only *may* have the directive because directives begin\n * to share bloom filter bits after the BLOOM_SIZE is reached, and it could correspond to a\n * different directive sharing the bit.\n *\n * Note: We can skip checking further injectors up the tree if an injector's cbf structure\n * has a 0 for that bloom bit. Since cbf contains the merged value of all the parent\n * injectors, a 0 in the bloom bit indicates that the parents definitely do not contain\n * the directive and do not need to be checked.\n *\n * @param injector The starting node injector to check\n * @param  bloomBit The bit to check in each injector's bloom filter\n * @param  flags The injection flags for this injection site (e.g. Optional or SkipSelf)\n * @returns An injector that might have the directive\n */\n\n/**\n * Creates an ElementRef for a given node injector and stores it on the injector.\n * Or, if the ElementRef already exists, retrieves the existing ElementRef.\n *\n * @param di The node injector where we should store a created ElementRef\n * @returns The ElementRef instance to use\n */\n\n\n\n\n\n/**\n * Creates a ViewContainerRef and stores it on the injector. Or, if the ViewContainerRef\n * already exists, retrieves the existing ViewContainerRef.\n *\n * @returns The ViewContainerRef instance to use\n */\n\n/**\n * A ref to a container that enables adding and removing views from that container\n * imperatively.\n */\nvar ViewContainerRef$1 = /** @class */ (function () {\n    function ViewContainerRef(_lContainerNode) {\n        this._lContainerNode = _lContainerNode;\n        this._viewRefs = [];\n    }\n    ViewContainerRef.prototype.clear = function () {\n        var lContainer = this._lContainerNode.data;\n        while (lContainer.views.length) {\n            this.remove(0);\n        }\n    };\n    ViewContainerRef.prototype.get = function (index) { return this._viewRefs[index] || null; };\n    Object.defineProperty(ViewContainerRef.prototype, \"length\", {\n        get: function () {\n            var lContainer = this._lContainerNode.data;\n            return lContainer.views.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ViewContainerRef.prototype.createEmbeddedView = function (templateRef, context, index) {\n        var viewRef = templateRef.createEmbeddedView(context || {});\n        this.insert(viewRef, index);\n        return viewRef;\n    };\n    ViewContainerRef.prototype.createComponent = function (componentFactory, index, injector, projectableNodes, ngModule) {\n        throw notImplemented();\n    };\n    ViewContainerRef.prototype.insert = function (viewRef, index) {\n        var lViewNode = viewRef._lViewNode;\n        var adjustedIdx = this._adjustIndex(index);\n        insertView(this._lContainerNode, lViewNode, adjustedIdx);\n        // invalidate cache of next sibling RNode (we do similar operation in the containerRefreshEnd\n        // instruction)\n        this._lContainerNode.native = undefined;\n        this._viewRefs.splice(adjustedIdx, 0, viewRef);\n        // If the view is dynamic (has a template), it needs to be counted both at the container\n        // level and at the node above the container.\n        if (lViewNode.data.template !== null) {\n            // Increment the container view count.\n            this._lContainerNode.data.dynamicViewCount++;\n            // Look for the parent node and increment its dynamic view count.\n            var containerParent = getParentLNode(this._lContainerNode);\n            if (containerParent !== null && containerParent.data !== null) {\n                ngDevMode && assertNodeOfPossibleTypes(containerParent, 2 /* View */, 3 /* Element */);\n                containerParent.data.dynamicViewCount++;\n            }\n        }\n        return viewRef;\n    };\n    ViewContainerRef.prototype.move = function (viewRef, newIndex) {\n        var index = this.indexOf(viewRef);\n        this.detach(index);\n        this.insert(viewRef, this._adjustIndex(newIndex));\n        return viewRef;\n    };\n    ViewContainerRef.prototype.indexOf = function (viewRef) { return this._viewRefs.indexOf(viewRef); };\n    ViewContainerRef.prototype.remove = function (index) {\n        this.detach(index);\n        // TODO(ml): proper destroy of the ViewRef, i.e. recursively destroy the LviewNode and its\n        // children, delete DOM nodes and QueryList, trigger hooks (onDestroy), destroy the renderer,\n        // detach projected nodes\n    };\n    ViewContainerRef.prototype.detach = function (index) {\n        var adjustedIdx = this._adjustIndex(index, -1);\n        removeView(this._lContainerNode, adjustedIdx);\n        return this._viewRefs.splice(adjustedIdx, 1)[0] || null;\n    };\n    ViewContainerRef.prototype._adjustIndex = function (index, shift) {\n        if (shift === void 0) { shift = 0; }\n        if (index == null) {\n            return this._lContainerNode.data.views.length + shift;\n        }\n        if (ngDevMode) {\n            assertGreaterThan(index, -1, 'index must be positive');\n            // +1 because it's legal to insert at the end.\n            assertLessThan(index, this._lContainerNode.data.views.length + 1 + shift, 'index');\n        }\n        return index;\n    };\n    return ViewContainerRef;\n}());\n/**\n * Creates a TemplateRef and stores it on the injector. Or, if the TemplateRef already\n * exists, retrieves the existing TemplateRef.\n *\n * @param di The node injector where we should store a created TemplateRef\n * @returns The TemplateRef instance to use\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a component definition object.\n *\n *\n * # Example\n * ```\n * class MyDirective {\n *   // Generated by Angular Template Compiler\n *   // [Symbol] syntax will not be supported by TypeScript until v2.7\n *   static ngComponentDef = defineComponent({\n *     ...\n *   });\n * }\n * ```\n */\n\n\n\n/**\n * Creates an NgOnChangesFeature function for a component's features list.\n *\n * It accepts an optional map of minified input property names to original property names,\n * if any input properties have a public alias.\n *\n * The NgOnChangesFeature function that is returned decorates a component with support for\n * the ngOnChanges lifecycle hook, so it should be included in any component that implements\n * that hook.\n *\n * Example usage:\n *\n * ```\n * static ngComponentDef = defineComponent({\n *   ...\n *   inputs: {name: 'publicName'},\n *   features: [NgOnChangesFeature({name: 'name'})]\n * });\n * ```\n *\n * @param inputPropertyNames Map of input property names, if they are aliased\n * @returns DirectiveDefFeature\n */\n\n\n/**\n * Create a directive definition object.\n *\n * # Example\n * ```\n * class MyDirective {\n *   // Generated by Angular Template Compiler\n *   // [Symbol] syntax will not be supported by TypeScript until v2.7\n *   static ngDirectiveDef = defineDirective({\n *     ...\n *   });\n * }\n * ```\n */\n\n/**\n * Create a pipe definition object.\n *\n * # Example\n * ```\n * class MyPipe implements PipeTransform {\n *   // Generated by Angular Template Compiler\n *   static ngPipeDef = definePipe({\n *     ...\n *   });\n * }\n * ```\n * @param pipeDef Pipe definition generated by the compiler\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * If the value hasn't been saved, calls the pure function to store and return the\n * value. If it has been saved, returns the saved value.\n *\n * @param pureFn Function that returns a value\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param thisArg Optional calling context of pureFn\n * @returns value\n */\n\n/**\n * If the value of the provided exp has changed, calls the pure function to return\n * an updated value. Or if the value has not changed, returns cached value.\n *\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param pureFn Function that returns an updated value\n * @param exp Updated expression value\n * @param thisArg Optional calling context of pureFn\n * @returns Updated or cached value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param thisArg Optional calling context of pureFn\n * @returns Updated or cached value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param thisArg Optional calling context of pureFn\n * @returns Updated or cached value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param thisArg Optional calling context of pureFn\n * @returns Updated or cached value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param exp5\n * @param thisArg Optional calling context of pureFn\n * @returns Updated or cached value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param exp5\n * @param exp6\n * @param thisArg Optional calling context of pureFn\n * @returns Updated or cached value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param exp5\n * @param exp6\n * @param exp7\n * @param thisArg Optional calling context of pureFn\n * @returns Updated or cached value\n */\n\n/**\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param pureFn\n * @param exp1\n * @param exp2\n * @param exp3\n * @param exp4\n * @param exp5\n * @param exp6\n * @param exp7\n * @param exp8\n * @param thisArg Optional calling context of pureFn\n * @returns Updated or cached value\n */\n\n/**\n * pureFunction instruction that can support any number of bindings.\n *\n * If the value of any provided exp has changed, calls the pure function to return\n * an updated value. Or if no values have changed, returns cached value.\n *\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param pureFn A pure function that takes binding values and builds an object or array\n * containing those values.\n * @param exps An array of binding values\n * @param thisArg Optional calling context of pureFn\n * @returns Updated or cached value\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a pipe.\n *\n * @param index Pipe index where the pipe will be stored.\n * @param pipeName The name of the pipe\n * @returns T the instance of the pipe.\n */\n\n/**\n * Invokes a pipe with 1 arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param v1 1st argument to {@link PipeTransform#transform}.\n */\n\n/**\n * Invokes a pipe with 2 arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param v1 1st argument to {@link PipeTransform#transform}.\n * @param v2 2nd argument to {@link PipeTransform#transform}.\n */\n\n/**\n * Invokes a pipe with 3 arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param v1 1st argument to {@link PipeTransform#transform}.\n * @param v2 2nd argument to {@link PipeTransform#transform}.\n * @param v3 4rd argument to {@link PipeTransform#transform}.\n */\n\n/**\n * Invokes a pipe with 4 arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param v1 1st argument to {@link PipeTransform#transform}.\n * @param v2 2nd argument to {@link PipeTransform#transform}.\n * @param v3 3rd argument to {@link PipeTransform#transform}.\n * @param v4 4th argument to {@link PipeTransform#transform}.\n */\n\n/**\n * Invokes a pipe with variable number of arguments.\n *\n * This instruction acts as a guard to {@link PipeTransform#transform} invoking\n * the pipe only when an input to the pipe changes.\n *\n * @param index Pipe index where the pipe was stored on creation.\n * @param slotOffset the offset in the reserved slot space {@link reserveSlots}\n * @param values Array of arguments to pass to {@link PipeTransform#transform} method.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// Note: This hack is necessary so we don't erroneously get a circular dependency\n// failure based on types.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar QueryList_ = /** @class */ (function () {\n    function QueryList_() {\n        this.dirty = true;\n        this.changes = new EventEmitter();\n        this._values = [];\n        /** @internal */\n        this._valuesTree = [];\n    }\n    Object.defineProperty(QueryList_.prototype, \"length\", {\n        get: function () { return this._values.length; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QueryList_.prototype, \"first\", {\n        get: function () {\n            var values = this._values;\n            return values.length ? values[0] : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(QueryList_.prototype, \"last\", {\n        get: function () {\n            var values = this._values;\n            return values.length ? values[values.length - 1] : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * See\n     * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n     */\n    /**\n       * See\n       * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n       */\n    QueryList_.prototype.map = /**\n       * See\n       * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)\n       */\n    function (fn) { return this._values.map(fn); };\n    /**\n     * See\n     * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n     */\n    /**\n       * See\n       * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n       */\n    QueryList_.prototype.filter = /**\n       * See\n       * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n       */\n    function (fn) {\n        return this._values.filter(fn);\n    };\n    /**\n     * See\n     * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n     */\n    /**\n       * See\n       * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n       */\n    QueryList_.prototype.find = /**\n       * See\n       * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)\n       */\n    function (fn) {\n        return this._values.find(fn);\n    };\n    /**\n     * See\n     * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n     */\n    /**\n       * See\n       * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n       */\n    QueryList_.prototype.reduce = /**\n       * See\n       * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n       */\n    function (fn, init) {\n        return this._values.reduce(fn, init);\n    };\n    /**\n     * See\n     * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n     */\n    /**\n       * See\n       * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n       */\n    QueryList_.prototype.forEach = /**\n       * See\n       * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)\n       */\n    function (fn) { this._values.forEach(fn); };\n    /**\n     * See\n     * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n     */\n    /**\n       * See\n       * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n       */\n    QueryList_.prototype.some = /**\n       * See\n       * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)\n       */\n    function (fn) {\n        return this._values.some(fn);\n    };\n    QueryList_.prototype.toArray = function () { return this._values.slice(0); };\n    QueryList_.prototype[getSymbolIterator()] = function () { return this._values[getSymbolIterator()](); };\n    QueryList_.prototype.toString = function () { return this._values.toString(); };\n    QueryList_.prototype.reset = function (res) {\n        this._values = flatten$3(res);\n        this.dirty = false;\n    };\n    QueryList_.prototype.notifyOnChanges = function () { this.changes.emit(this); };\n    QueryList_.prototype.setDirty = function () { this.dirty = true; };\n    QueryList_.prototype.destroy = function () {\n        this.changes.complete();\n        this.changes.unsubscribe();\n    };\n    return QueryList_;\n}());\n\n/**\n * Creates and returns a QueryList.\n *\n * @param memoryIndex The index in memory where the QueryList should be saved. If null,\n * this is is a content query and the QueryList will be saved later through directiveCreate.\n * @param predicate The type for which the query will search\n * @param descend Whether or not to descend into children\n * @param read What to save in the query\n * @returns QueryList<T>\n */\n\n/**\n * Refreshes a query by combining matches from all active views and removing matches from deleted\n * views.\n * Returns true if a query got dirty during change detection, false otherwise.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * An `html` sanitizer which converts untrusted `html` **string** into trusted string by removing\n * dangerous content.\n *\n * This method parses the `html` and locates potentially dangerous content (such as urls and\n * javascript) and removes it.\n *\n * It is possible to mark a string as trusted by calling {@link bypassSanitizationTrustHtml}.\n *\n * @param unsafeHtml untrusted `html`, typically from the user.\n * @returns `html` string which is safe to display to user, because all of the dangerous javascript\n * and urls have been removed.\n */\n\n/**\n * A `style` sanitizer which converts untrusted `style` **string** into trusted string by removing\n * dangerous content.\n *\n * This method parses the `style` and locates potentially dangerous content (such as urls and\n * javascript) and removes it.\n *\n * It is possible to mark a string as trusted by calling {@link bypassSanitizationTrustStyle}.\n *\n * @param unsafeStyle untrusted `style`, typically from the user.\n * @returns `style` string which is safe to bind to the `style` properties, because all of the\n * dangerous javascript and urls have been removed.\n */\n\n/**\n * A `url` sanitizer which converts untrusted `url` **string** into trusted string by removing\n * dangerous\n * content.\n *\n * This method parses the `url` and locates potentially dangerous content (such as javascript) and\n * removes it.\n *\n * It is possible to mark a string as trusted by calling {@link bypassSanitizationTrustUrl}.\n *\n * @param unsafeUrl untrusted `url`, typically from the user.\n * @returns `url` string which is safe to bind to the `src` properties such as `<img src>`, because\n * all of the dangerous javascript has been removed.\n */\n\n/**\n * A `url` sanitizer which only lets trusted `url`s through.\n *\n * This passes only `url`s marked trusted by calling {@link bypassSanitizationTrustResourceUrl}.\n *\n * @param unsafeResourceUrl untrusted `url`, typically from the user.\n * @returns `url` string which is safe to bind to the `src` properties such as `<img src>`, because\n * only trusted `url`s have been allowed to pass.\n */\n\n/**\n * A `script` sanitizer which only lets trusted javascript through.\n *\n * This passes only `script`s marked trusted by calling {@link bypassSanitizationTrustScript}.\n *\n * @param unsafeScript untrusted `script`, typically from the user.\n * @returns `url` string which is safe to bind to the `<script>` element such as `<img src>`,\n * because only trusted `scripts`s have been allowed to pass.\n */\n\n/**\n * Mark `html` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link htmlSanitizer} to be trusted implicitly.\n *\n * @param trustedHtml `html` string which needs to be implicitly trusted.\n * @returns a `html` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * Mark `style` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link styleSanitizer} to be trusted implicitly.\n *\n * @param trustedStyle `style` string which needs to be implicitly trusted.\n * @returns a `style` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * Mark `script` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link scriptSanitizer} to be trusted implicitly.\n *\n * @param trustedScript `script` string which needs to be implicitly trusted.\n * @returns a `script` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * Mark `url` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link urlSanitizer} to be trusted implicitly.\n *\n * @param trustedUrl `url` string which needs to be implicitly trusted.\n * @returns a `url` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * Mark `url` string as trusted.\n *\n * This function wraps the trusted string in `String` and brands it in a way which makes it\n * recognizable to {@link resourceUrlSanitizer} to be trusted implicitly.\n *\n * @param trustedResourceUrl `url` string which needs to be implicitly trusted.\n * @returns a `url` `String` which has been branded to be implicitly trusted.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// clang-format on\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar ReflectorModuleModuleResolutionHost = /** @class */ (function () {\n    function ReflectorModuleModuleResolutionHost(host, getProgram) {\n        var _this = this;\n        this.host = host;\n        this.getProgram = getProgram;\n        // Note: verboseInvalidExpressions is important so that\n        // the collector will collect errors instead of throwing\n        this.metadataCollector = new MetadataCollector({ verboseInvalidExpression: true });\n        if (host.directoryExists)\n            this.directoryExists = function (directoryName) { return _this.host.directoryExists(directoryName); };\n    }\n    ReflectorModuleModuleResolutionHost.prototype.fileExists = function (fileName) { return !!this.host.getScriptSnapshot(fileName); };\n    ReflectorModuleModuleResolutionHost.prototype.readFile = function (fileName) {\n        var snapshot = this.host.getScriptSnapshot(fileName);\n        if (snapshot) {\n            return snapshot.getText(0, snapshot.getLength());\n        }\n        // Typescript readFile() declaration should be `readFile(fileName: string): string | undefined\n        return undefined;\n    };\n    ReflectorModuleModuleResolutionHost.prototype.getSourceFileMetadata = function (fileName) {\n        var sf = this.getProgram().getSourceFile(fileName);\n        return sf ? this.metadataCollector.getMetadata(sf) : undefined;\n    };\n    ReflectorModuleModuleResolutionHost.prototype.cacheMetadata = function (fileName) {\n        // Don't cache the metadata for .ts files as they might change in the editor!\n        return fileName.endsWith('.d.ts');\n    };\n    return ReflectorModuleModuleResolutionHost;\n}());\nvar ReflectorHost = /** @class */ (function () {\n    function ReflectorHost(getProgram, serviceHost, options) {\n        this.options = options;\n        this.metadataReaderCache = createMetadataReaderCache();\n        this.hostAdapter = new ReflectorModuleModuleResolutionHost(serviceHost, getProgram);\n        this.moduleResolutionCache =\n            ts.createModuleResolutionCache(serviceHost.getCurrentDirectory(), function (s) { return s; });\n    }\n    ReflectorHost.prototype.getMetadataFor = function (modulePath) {\n        return readMetadata(modulePath, this.hostAdapter, this.metadataReaderCache);\n    };\n    ReflectorHost.prototype.moduleNameToFileName = function (moduleName, containingFile) {\n        if (!containingFile) {\n            if (moduleName.indexOf('.') === 0) {\n                throw new Error('Resolution of relative paths requires a containing file.');\n            }\n            // Any containing file gives the same result for absolute imports\n            containingFile = path.join(this.options.basePath, 'index.ts').replace(/\\\\/g, '/');\n        }\n        var resolved = ts.resolveModuleName(moduleName, containingFile, this.options, this.hostAdapter)\n            .resolvedModule;\n        return resolved ? resolved.resolvedFileName : null;\n    };\n    ReflectorHost.prototype.getOutputName = function (filePath) { return filePath; };\n    return ReflectorHost;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Create a `LanguageServiceHost`\n */\nfunction createLanguageServiceFromTypescript(host, service) {\n    var ngHost = new TypeScriptServiceHost(host, service);\n    var ngServer = createLanguageService(ngHost);\n    ngHost.setSite(ngServer);\n    return ngServer;\n}\n/**\n * The language service never needs the normalized versions of the metadata. To avoid parsing\n * the content and resolving references, return an empty file. This also allows normalizing\n * template that are syntatically incorrect which is required to provide completions in\n * syntactically incorrect templates.\n */\nvar DummyHtmlParser = /** @class */ (function (_super) {\n    __extends(DummyHtmlParser, _super);\n    function DummyHtmlParser() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DummyHtmlParser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {\n        if (parseExpansionForms === void 0) { parseExpansionForms = false; }\n        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }\n        return new ParseTreeResult([], []);\n    };\n    return DummyHtmlParser;\n}(HtmlParser));\n/**\n * Avoid loading resources in the language servcie by using a dummy loader.\n */\nvar DummyResourceLoader = /** @class */ (function (_super) {\n    __extends(DummyResourceLoader, _super);\n    function DummyResourceLoader() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DummyResourceLoader.prototype.get = function (url) { return Promise.resolve(''); };\n    return DummyResourceLoader;\n}(ResourceLoader));\n/**\n * An implementation of a `LanguageServiceHost` for a TypeScript project.\n *\n * The `TypeScriptServiceHost` implements the Angular `LanguageServiceHost` using\n * the TypeScript language services.\n *\n * @experimental\n */\nvar TypeScriptServiceHost = /** @class */ (function () {\n    function TypeScriptServiceHost(host, tsService) {\n        this.host = host;\n        this.tsService = tsService;\n        this._staticSymbolCache = new StaticSymbolCache();\n        this._typeCache = [];\n        this.modulesOutOfDate = true;\n        this.fileVersions = new Map();\n    }\n    TypeScriptServiceHost.prototype.setSite = function (service) { this.service = service; };\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"resolver\", {\n        /**\n         * Angular LanguageServiceHost implementation\n         */\n        get: function () {\n            var _this = this;\n            this.validate();\n            var result = this._resolver;\n            if (!result) {\n                var moduleResolver = new NgModuleResolver(this.reflector);\n                var directiveResolver = new DirectiveResolver(this.reflector);\n                var pipeResolver = new PipeResolver(this.reflector);\n                var elementSchemaRegistry = new DomElementSchemaRegistry();\n                var resourceLoader = new DummyResourceLoader();\n                var urlResolver = createOfflineCompileUrlResolver();\n                var htmlParser = new DummyHtmlParser();\n                // This tracks the CompileConfig in codegen.ts. Currently these options\n                // are hard-coded.\n                var config = new CompilerConfig({ defaultEncapsulation: ViewEncapsulation$1.Emulated, useJit: false });\n                var directiveNormalizer = new DirectiveNormalizer(resourceLoader, urlResolver, htmlParser, config);\n                result = this._resolver = new CompileMetadataResolver(config, htmlParser, moduleResolver, directiveResolver, pipeResolver, new JitSummaryResolver(), elementSchemaRegistry, directiveNormalizer, new Console(), this._staticSymbolCache, this.reflector, function (error, type) { return _this.collectError(error, type && type.filePath); });\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeScriptServiceHost.prototype.getTemplateReferences = function () {\n        this.ensureTemplateMap();\n        return this.templateReferences || [];\n    };\n    TypeScriptServiceHost.prototype.getTemplateAt = function (fileName, position) {\n        var sourceFile = this.getSourceFile(fileName);\n        if (sourceFile) {\n            this.context = sourceFile.fileName;\n            var node = this.findNode(sourceFile, position);\n            if (node) {\n                return this.getSourceFromNode(fileName, this.host.getScriptVersion(sourceFile.fileName), node);\n            }\n        }\n        else {\n            this.ensureTemplateMap();\n            // TODO: Cannocalize the file?\n            var componentType = this.fileToComponent.get(fileName);\n            if (componentType) {\n                return this.getSourceFromType(fileName, this.host.getScriptVersion(fileName), componentType);\n            }\n        }\n        return undefined;\n    };\n    TypeScriptServiceHost.prototype.getAnalyzedModules = function () {\n        this.updateAnalyzedModules();\n        return this.ensureAnalyzedModules();\n    };\n    TypeScriptServiceHost.prototype.ensureAnalyzedModules = function () {\n        var analyzedModules = this.analyzedModules;\n        if (!analyzedModules) {\n            if (this.host.getScriptFileNames().length === 0) {\n                analyzedModules = {\n                    files: [],\n                    ngModuleByPipeOrDirective: new Map(),\n                    ngModules: [],\n                };\n            }\n            else {\n                var analyzeHost = { isSourceFile: function (filePath) { return true; } };\n                var programFiles = this.program.getSourceFiles().map(function (sf) { return sf.fileName; });\n                analyzedModules =\n                    analyzeNgModules(programFiles, analyzeHost, this.staticSymbolResolver, this.resolver);\n            }\n            this.analyzedModules = analyzedModules;\n        }\n        return analyzedModules;\n    };\n    TypeScriptServiceHost.prototype.getTemplates = function (fileName) {\n        var _this = this;\n        this.ensureTemplateMap();\n        var componentType = this.fileToComponent.get(fileName);\n        if (componentType) {\n            var templateSource = this.getTemplateAt(fileName, 0);\n            if (templateSource) {\n                return [templateSource];\n            }\n        }\n        else {\n            var version_1 = this.host.getScriptVersion(fileName);\n            var result_1 = [];\n            // Find each template string in the file\n            var visit_1 = function (child) {\n                var templateSource = _this.getSourceFromNode(fileName, version_1, child);\n                if (templateSource) {\n                    result_1.push(templateSource);\n                }\n                else {\n                    ts.forEachChild(child, visit_1);\n                }\n            };\n            var sourceFile = this.getSourceFile(fileName);\n            if (sourceFile) {\n                this.context = sourceFile.path || sourceFile.fileName;\n                ts.forEachChild(sourceFile, visit_1);\n            }\n            return result_1.length ? result_1 : undefined;\n        }\n    };\n    TypeScriptServiceHost.prototype.getDeclarations = function (fileName) {\n        var _this = this;\n        var result = [];\n        var sourceFile = this.getSourceFile(fileName);\n        if (sourceFile) {\n            var visit_2 = function (child) {\n                var declaration = _this.getDeclarationFromNode(sourceFile, child);\n                if (declaration) {\n                    result.push(declaration);\n                }\n                else {\n                    ts.forEachChild(child, visit_2);\n                }\n            };\n            ts.forEachChild(sourceFile, visit_2);\n        }\n        return result;\n    };\n    TypeScriptServiceHost.prototype.getSourceFile = function (fileName) {\n        return this.tsService.getProgram().getSourceFile(fileName);\n    };\n    TypeScriptServiceHost.prototype.updateAnalyzedModules = function () {\n        this.validate();\n        if (this.modulesOutOfDate) {\n            this.analyzedModules = null;\n            this._reflector = null;\n            this.templateReferences = null;\n            this.fileToComponent = null;\n            this.ensureAnalyzedModules();\n            this.modulesOutOfDate = false;\n        }\n    };\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"program\", {\n        get: function () { return this.tsService.getProgram(); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"checker\", {\n        get: function () {\n            var checker = this._checker;\n            if (!checker) {\n                checker = this._checker = this.program.getTypeChecker();\n            }\n            return checker;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeScriptServiceHost.prototype.validate = function () {\n        var _this = this;\n        var program = this.program;\n        if (this.lastProgram !== program) {\n            // Invalidate file that have changed in the static symbol resolver\n            var invalidateFile = function (fileName) {\n                return _this._staticSymbolResolver.invalidateFile(fileName);\n            };\n            this.clearCaches();\n            var seen_1 = new Set();\n            try {\n                for (var _a = __values(this.program.getSourceFiles()), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var sourceFile = _b.value;\n                    var fileName = sourceFile.fileName;\n                    seen_1.add(fileName);\n                    var version$$1 = this.host.getScriptVersion(fileName);\n                    var lastVersion = this.fileVersions.get(fileName);\n                    if (version$$1 != lastVersion) {\n                        this.fileVersions.set(fileName, version$$1);\n                        if (this._staticSymbolResolver) {\n                            invalidateFile(fileName);\n                        }\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            // Remove file versions that are no longer in the file and invalidate them.\n            var missing = Array.from(this.fileVersions.keys()).filter(function (f) { return !seen_1.has(f); });\n            missing.forEach(function (f) { return _this.fileVersions.delete(f); });\n            if (this._staticSymbolResolver) {\n                missing.forEach(invalidateFile);\n            }\n            this.lastProgram = program;\n        }\n        var e_1, _c;\n    };\n    TypeScriptServiceHost.prototype.clearCaches = function () {\n        this._checker = null;\n        this._typeCache = [];\n        this._resolver = null;\n        this.collectedErrors = null;\n        this.modulesOutOfDate = true;\n    };\n    TypeScriptServiceHost.prototype.ensureTemplateMap = function () {\n        if (!this.fileToComponent || !this.templateReferences) {\n            var fileToComponent = new Map();\n            var templateReference = [];\n            var ngModuleSummary = this.getAnalyzedModules();\n            var urlResolver = createOfflineCompileUrlResolver();\n            try {\n                for (var _a = __values(ngModuleSummary.ngModules), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var module_1 = _b.value;\n                    try {\n                        for (var _c = __values(module_1.declaredDirectives), _d = _c.next(); !_d.done; _d = _c.next()) {\n                            var directive = _d.value;\n                            var metadata = this.resolver.getNonNormalizedDirectiveMetadata(directive.reference).metadata;\n                            if (metadata.isComponent && metadata.template && metadata.template.templateUrl) {\n                                var templateName = urlResolver.resolve(this.reflector.componentModuleUrl(directive.reference), metadata.template.templateUrl);\n                                fileToComponent.set(templateName, directive.reference);\n                                templateReference.push(templateName);\n                            }\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (_d && !_d.done && (_e = _c.return)) _e.call(_c);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_f = _a.return)) _f.call(_a);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            this.fileToComponent = fileToComponent;\n            this.templateReferences = templateReference;\n        }\n        var e_3, _f, e_2, _e;\n    };\n    TypeScriptServiceHost.prototype.getSourceFromDeclaration = function (fileName, version$$1, source, span, type, declaration, node, sourceFile) {\n        var queryCache = undefined;\n        var t = this;\n        if (declaration) {\n            return {\n                version: version$$1,\n                source: source,\n                span: span,\n                type: type,\n                get members() {\n                    return getClassMembersFromDeclaration(t.program, t.checker, sourceFile, declaration);\n                },\n                get query() {\n                    if (!queryCache) {\n                        var pipes_1 = t.service.getPipesAt(fileName, node.getStart());\n                        queryCache = getSymbolQuery(t.program, t.checker, sourceFile, function () { return getPipesTable(sourceFile, t.program, t.checker, pipes_1); });\n                    }\n                    return queryCache;\n                }\n            };\n        }\n    };\n    TypeScriptServiceHost.prototype.getSourceFromNode = function (fileName, version$$1, node) {\n        var result = undefined;\n        switch (node.kind) {\n            case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n            case ts.SyntaxKind.StringLiteral:\n                var _a = __read(this.getTemplateClassDeclFromNode(node), 2), declaration = _a[0], decorator = _a[1];\n                if (declaration && declaration.name) {\n                    var sourceFile = this.getSourceFile(fileName);\n                    if (sourceFile) {\n                        return this.getSourceFromDeclaration(fileName, version$$1, this.stringOf(node) || '', shrink$1(spanOf$4(node)), this.reflector.getStaticSymbol(sourceFile.fileName, declaration.name.text), declaration, node, sourceFile);\n                    }\n                }\n                break;\n        }\n        return result;\n    };\n    TypeScriptServiceHost.prototype.getSourceFromType = function (fileName, version$$1, type) {\n        var result = undefined;\n        var declaration = this.getTemplateClassFromStaticSymbol(type);\n        if (declaration) {\n            var snapshot = this.host.getScriptSnapshot(fileName);\n            if (snapshot) {\n                var source = snapshot.getText(0, snapshot.getLength());\n                result = this.getSourceFromDeclaration(fileName, version$$1, source, { start: 0, end: source.length }, type, declaration, declaration, declaration.getSourceFile());\n            }\n        }\n        return result;\n    };\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"reflectorHost\", {\n        get: function () {\n            var _this = this;\n            var result = this._reflectorHost;\n            if (!result) {\n                if (!this.context) {\n                    // Make up a context by finding the first script and using that as the base dir.\n                    var scriptFileNames = this.host.getScriptFileNames();\n                    if (0 === scriptFileNames.length) {\n                        throw new Error('Internal error: no script file names found');\n                    }\n                    this.context = scriptFileNames[0];\n                }\n                // Use the file context's directory as the base directory.\n                // The host's getCurrentDirectory() is not reliable as it is always \"\" in\n                // tsserver. We don't need the exact base directory, just one that contains\n                // a source file.\n                var source = this.tsService.getProgram().getSourceFile(this.context);\n                if (!source) {\n                    throw new Error('Internal error: no context could be determined');\n                }\n                var tsConfigPath = findTsConfig$1(source.fileName);\n                var basePath = path.dirname(tsConfigPath || this.context);\n                var options = { basePath: basePath, genDir: basePath };\n                var compilerOptions = this.host.getCompilationSettings();\n                if (compilerOptions && compilerOptions.baseUrl) {\n                    options.baseUrl = compilerOptions.baseUrl;\n                }\n                if (compilerOptions && compilerOptions.paths) {\n                    options.paths = compilerOptions.paths;\n                }\n                result = this._reflectorHost =\n                    new ReflectorHost(function () { return _this.tsService.getProgram(); }, this.host, options);\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeScriptServiceHost.prototype.collectError = function (error, filePath) {\n        if (filePath) {\n            var errorMap = this.collectedErrors;\n            if (!errorMap || !this.collectedErrors) {\n                errorMap = this.collectedErrors = new Map();\n            }\n            var errors = errorMap.get(filePath);\n            if (!errors) {\n                errors = [];\n                this.collectedErrors.set(filePath, errors);\n            }\n            errors.push(error);\n        }\n    };\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"staticSymbolResolver\", {\n        get: function () {\n            var _this = this;\n            var result = this._staticSymbolResolver;\n            if (!result) {\n                this._summaryResolver = new AotSummaryResolver({\n                    loadSummary: function (filePath) { return null; },\n                    isSourceFile: function (sourceFilePath) { return true; },\n                    toSummaryFileName: function (sourceFilePath) { return sourceFilePath; },\n                    fromSummaryFileName: function (filePath) { return filePath; },\n                }, this._staticSymbolCache);\n                result = this._staticSymbolResolver = new StaticSymbolResolver(this.reflectorHost, this._staticSymbolCache, this._summaryResolver, function (e, filePath) { return _this.collectError(e, filePath); });\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TypeScriptServiceHost.prototype, \"reflector\", {\n        get: function () {\n            var _this = this;\n            var result = this._reflector;\n            if (!result) {\n                var ssr = this.staticSymbolResolver;\n                result = this._reflector = new StaticReflector(this._summaryResolver, ssr, [], [], function (e, filePath) { return _this.collectError(e, filePath); });\n            }\n            return result;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TypeScriptServiceHost.prototype.getTemplateClassFromStaticSymbol = function (type) {\n        var source = this.getSourceFile(type.filePath);\n        if (source) {\n            var declarationNode = ts.forEachChild(source, function (child) {\n                if (child.kind === ts.SyntaxKind.ClassDeclaration) {\n                    var classDeclaration = child;\n                    if (classDeclaration.name != null && classDeclaration.name.text === type.name) {\n                        return classDeclaration;\n                    }\n                }\n            });\n            return declarationNode;\n        }\n        return undefined;\n    };\n    /**\n     * Given a template string node, see if it is an Angular template string, and if so return the\n     * containing class.\n     */\n    TypeScriptServiceHost.prototype.getTemplateClassDeclFromNode = function (currentToken) {\n        // Verify we are in a 'template' property assignment, in an object literal, which is an call\n        // arg, in a decorator\n        var parentNode = currentToken.parent; // PropertyAssignment\n        if (!parentNode) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        if (parentNode.kind !== ts.SyntaxKind.PropertyAssignment) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        else {\n            // TODO: Is this different for a literal, i.e. a quoted property name like \"template\"?\n            if (parentNode.name.text !== 'template') {\n                return TypeScriptServiceHost.missingTemplate;\n            }\n        }\n        parentNode = parentNode.parent; // ObjectLiteralExpression\n        if (!parentNode || parentNode.kind !== ts.SyntaxKind.ObjectLiteralExpression) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        parentNode = parentNode.parent; // CallExpression\n        if (!parentNode || parentNode.kind !== ts.SyntaxKind.CallExpression) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        var callTarget = parentNode.expression;\n        var decorator = parentNode.parent; // Decorator\n        if (!decorator || decorator.kind !== ts.SyntaxKind.Decorator) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        var declaration = decorator.parent; // ClassDeclaration\n        if (!declaration || declaration.kind !== ts.SyntaxKind.ClassDeclaration) {\n            return TypeScriptServiceHost.missingTemplate;\n        }\n        return [declaration, callTarget];\n    };\n    TypeScriptServiceHost.prototype.getCollectedErrors = function (defaultSpan, sourceFile) {\n        var errors = (this.collectedErrors && this.collectedErrors.get(sourceFile.fileName));\n        return (errors && errors.map(function (e) {\n            var line = e.line || (e.position && e.position.line);\n            var column = e.column || (e.position && e.position.column);\n            var span = spanAt$1(sourceFile, line, column) || defaultSpan;\n            if (isFormattedError(e)) {\n                return errorToDiagnosticWithChain(e, span);\n            }\n            return { message: e.message, span: span };\n        })) ||\n            [];\n    };\n    TypeScriptServiceHost.prototype.getDeclarationFromNode = function (sourceFile, node) {\n        if (node.kind == ts.SyntaxKind.ClassDeclaration && node.decorators &&\n            node.name) {\n            try {\n                for (var _a = __values(node.decorators), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var decorator = _b.value;\n                    if (decorator.expression && decorator.expression.kind == ts.SyntaxKind.CallExpression) {\n                        var classDeclaration = node;\n                        if (classDeclaration.name) {\n                            var call = decorator.expression;\n                            var target = call.expression;\n                            var type = this.checker.getTypeAtLocation(target);\n                            if (type) {\n                                var staticSymbol = this.reflector.getStaticSymbol(sourceFile.fileName, classDeclaration.name.text);\n                                try {\n                                    if (this.resolver.isDirective(staticSymbol)) {\n                                        var metadata = this.resolver.getNonNormalizedDirectiveMetadata(staticSymbol).metadata;\n                                        var declarationSpan = spanOf$4(target);\n                                        return {\n                                            type: staticSymbol,\n                                            declarationSpan: declarationSpan,\n                                            metadata: metadata,\n                                            errors: this.getCollectedErrors(declarationSpan, sourceFile)\n                                        };\n                                    }\n                                }\n                                catch (e) {\n                                    if (e.message) {\n                                        this.collectError(e, sourceFile.fileName);\n                                        var declarationSpan = spanOf$4(target);\n                                        return {\n                                            type: staticSymbol,\n                                            declarationSpan: declarationSpan,\n                                            errors: this.getCollectedErrors(declarationSpan, sourceFile)\n                                        };\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n        }\n        var e_4, _c;\n    };\n    TypeScriptServiceHost.prototype.stringOf = function (node) {\n        switch (node.kind) {\n            case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n                return node.text;\n            case ts.SyntaxKind.StringLiteral:\n                return node.text;\n        }\n    };\n    TypeScriptServiceHost.prototype.findNode = function (sourceFile, position) {\n        function find(node) {\n            if (position >= node.getStart() && position < node.getEnd()) {\n                return ts.forEachChild(node, find) || node;\n            }\n        }\n        return find(sourceFile);\n    };\n    TypeScriptServiceHost.missingTemplate = [undefined, undefined];\n    return TypeScriptServiceHost;\n}());\nfunction findTsConfig$1(fileName) {\n    var dir = path.dirname(fileName);\n    while (fs.existsSync(dir)) {\n        var candidate = path.join(dir, 'tsconfig.json');\n        if (fs.existsSync(candidate))\n            return candidate;\n        var parentDir = path.dirname(dir);\n        if (parentDir === dir)\n            break;\n        dir = parentDir;\n    }\n}\nfunction spanOf$4(node) {\n    return { start: node.getStart(), end: node.getEnd() };\n}\nfunction shrink$1(span, offset) {\n    if (offset == null)\n        offset = 1;\n    return { start: span.start + offset, end: span.end - offset };\n}\nfunction spanAt$1(sourceFile, line, column) {\n    if (line != null && column != null) {\n        var position_1 = ts.getPositionOfLineAndCharacter(sourceFile, line, column);\n        var findChild = function findChild(node) {\n            if (node.kind > ts.SyntaxKind.LastToken && node.pos <= position_1 && node.end > position_1) {\n                var betterNode = ts.forEachChild(node, findChild);\n                return betterNode || node;\n            }\n        };\n        var node = ts.forEachChild(sourceFile, findChild);\n        if (node) {\n            return { start: node.getStart(), end: node.getEnd() };\n        }\n    }\n}\nfunction convertChain(chain) {\n    return { message: chain.message, next: chain.next ? convertChain(chain.next) : undefined };\n}\nfunction errorToDiagnosticWithChain(error, span) {\n    return { message: error.chain ? convertChain(error.chain) : error.message, span: span };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar projectHostMap = new WeakMap();\nfunction getExternalFiles(project) {\n    var host = projectHostMap.get(project);\n    if (host) {\n        return host.getTemplateReferences();\n    }\n}\nfunction create(info /* ts.server.PluginCreateInfo */) {\n    // Create the proxy\n    var proxy = Object.create(null);\n    var oldLS = info.languageService;\n    function tryCall(fileName, callback) {\n        if (fileName && !oldLS.getProgram().getSourceFile(fileName)) {\n            return undefined;\n        }\n        try {\n            return callback();\n        }\n        catch (e) {\n            return undefined;\n        }\n    }\n    function tryFilenameCall(m) {\n        return function (fileName) { return tryCall(fileName, function () { return (m.call(ls, fileName)); }); };\n    }\n    function tryFilenameOneCall(m) {\n        return function (fileName, p) { return tryCall(fileName, function () { return (m.call(ls, fileName, p)); }); };\n    }\n    function tryFilenameTwoCall(m) {\n        return function (fileName, p1, p2) { return tryCall(fileName, function () { return (m.call(ls, fileName, p1, p2)); }); };\n    }\n    function tryFilenameThreeCall(m) {\n        return function (fileName, p1, p2, p3) { return tryCall(fileName, function () { return (m.call(ls, fileName, p1, p2, p3)); }); };\n    }\n    function tryFilenameFourCall(m) {\n        return function (fileName, p1, p2, p3, p4) {\n            return tryCall(fileName, function () { return (m.call(ls, fileName, p1, p2, p3, p4)); });\n        };\n    }\n    function typescriptOnly(ls) {\n        var languageService = {\n            cleanupSemanticCache: function () { return ls.cleanupSemanticCache(); },\n            getSyntacticDiagnostics: tryFilenameCall(ls.getSyntacticDiagnostics),\n            getSemanticDiagnostics: tryFilenameCall(ls.getSemanticDiagnostics),\n            getCompilerOptionsDiagnostics: function () { return ls.getCompilerOptionsDiagnostics(); },\n            getSyntacticClassifications: tryFilenameOneCall(ls.getSemanticClassifications),\n            getSemanticClassifications: tryFilenameOneCall(ls.getSemanticClassifications),\n            getEncodedSyntacticClassifications: tryFilenameOneCall(ls.getEncodedSyntacticClassifications),\n            getEncodedSemanticClassifications: tryFilenameOneCall(ls.getEncodedSemanticClassifications),\n            getCompletionsAtPosition: tryFilenameTwoCall(ls.getCompletionsAtPosition),\n            getCompletionEntryDetails: tryFilenameFourCall(ls.getCompletionEntryDetails),\n            getCompletionEntrySymbol: tryFilenameThreeCall(ls.getCompletionEntrySymbol),\n            getQuickInfoAtPosition: tryFilenameOneCall(ls.getQuickInfoAtPosition),\n            getNameOrDottedNameSpan: tryFilenameTwoCall(ls.getNameOrDottedNameSpan),\n            getBreakpointStatementAtPosition: tryFilenameOneCall(ls.getBreakpointStatementAtPosition),\n            getSignatureHelpItems: tryFilenameOneCall(ls.getSignatureHelpItems),\n            getRenameInfo: tryFilenameOneCall(ls.getRenameInfo),\n            findRenameLocations: tryFilenameThreeCall(ls.findRenameLocations),\n            getDefinitionAtPosition: tryFilenameOneCall(ls.getDefinitionAtPosition),\n            getTypeDefinitionAtPosition: tryFilenameOneCall(ls.getTypeDefinitionAtPosition),\n            getImplementationAtPosition: tryFilenameOneCall(ls.getImplementationAtPosition),\n            getReferencesAtPosition: tryFilenameOneCall(ls.getReferencesAtPosition),\n            findReferences: tryFilenameOneCall(ls.findReferences),\n            getDocumentHighlights: tryFilenameTwoCall(ls.getDocumentHighlights),\n            /** @deprecated */\n            getOccurrencesAtPosition: tryFilenameOneCall(ls.getOccurrencesAtPosition),\n            getNavigateToItems: function (searchValue, maxResultCount, fileName, excludeDtsFiles) { return tryCall(fileName, function () { return ls.getNavigateToItems(searchValue, maxResultCount, fileName, excludeDtsFiles); }); },\n            getNavigationBarItems: tryFilenameCall(ls.getNavigationBarItems),\n            getNavigationTree: tryFilenameCall(ls.getNavigationTree),\n            getOutliningSpans: tryFilenameCall(ls.getOutliningSpans),\n            getTodoComments: tryFilenameOneCall(ls.getTodoComments),\n            getBraceMatchingAtPosition: tryFilenameOneCall(ls.getBraceMatchingAtPosition),\n            getIndentationAtPosition: tryFilenameTwoCall(ls.getIndentationAtPosition),\n            getFormattingEditsForRange: tryFilenameThreeCall(ls.getFormattingEditsForRange),\n            getFormattingEditsForDocument: tryFilenameOneCall(ls.getFormattingEditsForDocument),\n            getFormattingEditsAfterKeystroke: tryFilenameThreeCall(ls.getFormattingEditsAfterKeystroke),\n            getDocCommentTemplateAtPosition: tryFilenameOneCall(ls.getDocCommentTemplateAtPosition),\n            isValidBraceCompletionAtPosition: tryFilenameTwoCall(ls.isValidBraceCompletionAtPosition),\n            getSpanOfEnclosingComment: tryFilenameTwoCall(ls.getSpanOfEnclosingComment),\n            getCodeFixesAtPosition: tryFilenameFourCall(ls.getCodeFixesAtPosition),\n            applyCodeActionCommand: (function (action) { return tryCall(undefined, function () { return ls.applyCodeActionCommand(action); }); }),\n            getEmitOutput: tryFilenameCall(ls.getEmitOutput),\n            getProgram: function () { return ls.getProgram(); },\n            dispose: function () { return ls.dispose(); },\n            getApplicableRefactors: tryFilenameOneCall(ls.getApplicableRefactors),\n            getEditsForRefactor: tryFilenameFourCall(ls.getEditsForRefactor),\n            getDefinitionAndBoundSpan: tryFilenameOneCall(ls.getDefinitionAndBoundSpan),\n            getCombinedCodeFix: function (scope, fixId, formatOptions) {\n                return tryCall(undefined, function () { return ls.getCombinedCodeFix(scope, fixId, formatOptions); });\n            },\n            // TODO(kyliau): dummy implementation to compile with ts 2.8, create real one\n            getSuggestionDiagnostics: function (fileName) { return []; },\n            // TODO(kyliau): dummy implementation to compile with ts 2.8, create real one\n            organizeImports: function (scope, formatOptions) { return []; },\n        };\n        return languageService;\n    }\n    oldLS = typescriptOnly(oldLS);\n    var _loop_1 = function (k) {\n        proxy[k] = function () { return oldLS[k].apply(oldLS, arguments); };\n    };\n    for (var k in oldLS) {\n        _loop_1(k);\n    }\n    function completionToEntry(c) {\n        return {\n            // TODO: remove any and fix type error.\n            kind: c.kind,\n            name: c.name,\n            sortText: c.sort,\n            kindModifiers: ''\n        };\n    }\n    function diagnosticChainToDiagnosticChain(chain) {\n        return {\n            messageText: chain.message,\n            category: ts.DiagnosticCategory.Error,\n            code: 0,\n            next: chain.next ? diagnosticChainToDiagnosticChain(chain.next) : undefined\n        };\n    }\n    function diagnosticMessageToDiagnosticMessageText(message) {\n        if (typeof message === 'string') {\n            return message;\n        }\n        return diagnosticChainToDiagnosticChain(message);\n    }\n    function diagnosticToDiagnostic(d, file) {\n        var result = {\n            file: file,\n            start: d.span.start,\n            length: d.span.end - d.span.start,\n            messageText: diagnosticMessageToDiagnosticMessageText(d.message),\n            category: ts.DiagnosticCategory.Error,\n            code: 0,\n            source: 'ng'\n        };\n        return result;\n    }\n    function tryOperation(attempting, callback) {\n        try {\n            return callback();\n        }\n        catch (e) {\n            info.project.projectService.logger.info(\"Failed to \" + attempting + \": \" + e.toString());\n            info.project.projectService.logger.info(\"Stack trace: \" + e.stack);\n            return null;\n        }\n    }\n    var serviceHost = new TypeScriptServiceHost(info.languageServiceHost, info.languageService);\n    var ls = createLanguageService(serviceHost);\n    serviceHost.setSite(ls);\n    projectHostMap.set(info.project, serviceHost);\n    proxy.getCompletionsAtPosition = function (fileName, position, options) {\n        var base = oldLS.getCompletionsAtPosition(fileName, position, options) || {\n            isGlobalCompletion: false,\n            isMemberCompletion: false,\n            isNewIdentifierLocation: false,\n            entries: []\n        };\n        tryOperation('get completions', function () {\n            var results = ls.getCompletionsAt(fileName, position);\n            if (results && results.length) {\n                if (base === undefined) {\n                    base = {\n                        isGlobalCompletion: false,\n                        isMemberCompletion: false,\n                        isNewIdentifierLocation: false,\n                        entries: []\n                    };\n                }\n                try {\n                    for (var results_1 = __values(results), results_1_1 = results_1.next(); !results_1_1.done; results_1_1 = results_1.next()) {\n                        var entry = results_1_1.value;\n                        base.entries.push(completionToEntry(entry));\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (results_1_1 && !results_1_1.done && (_a = results_1.return)) _a.call(results_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n            var e_1, _a;\n        });\n        return base;\n    };\n    proxy.getQuickInfoAtPosition = function (fileName, position) {\n        var base = oldLS.getQuickInfoAtPosition(fileName, position);\n        // TODO(vicb): the tags property has been removed in TS 2.2\n        tryOperation('get quick info', function () {\n            var ours = ls.getHoverAt(fileName, position);\n            if (ours) {\n                var displayParts = [];\n                try {\n                    for (var _a = __values(ours.text), _b = _a.next(); !_b.done; _b = _a.next()) {\n                        var part = _b.value;\n                        displayParts.push({ kind: part.language || 'angular', text: part.text });\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n                var tags = base && base.tags;\n                base = {\n                    displayParts: displayParts,\n                    documentation: [],\n                    kind: 'angular',\n                    kindModifiers: 'what does this do?',\n                    textSpan: { start: ours.span.start, length: ours.span.end - ours.span.start },\n                };\n                if (tags) {\n                    base.tags = tags;\n                }\n            }\n            var e_2, _c;\n        });\n        return base;\n    };\n    proxy.getSemanticDiagnostics = function (fileName) {\n        var result = oldLS.getSemanticDiagnostics(fileName);\n        var base = result || [];\n        tryOperation('get diagnostics', function () {\n            info.project.projectService.logger.info(\"Computing Angular semantic diagnostics...\");\n            var ours = ls.getDiagnostics(fileName);\n            if (ours && ours.length) {\n                var file_1 = oldLS.getProgram().getSourceFile(fileName);\n                if (file_1) {\n                    base.push.apply(base, ours.map(function (d) { return diagnosticToDiagnostic(d, file_1); }));\n                }\n            }\n        });\n        return base;\n    };\n    proxy.getDefinitionAtPosition = function (fileName, position) {\n        var base = oldLS.getDefinitionAtPosition(fileName, position);\n        if (base && base.length) {\n            return base;\n        }\n        return tryOperation('get definition', function () {\n            var ours = ls.getDefinitionAt(fileName, position);\n            if (ours && ours.length) {\n                base = base || [];\n                try {\n                    for (var ours_1 = __values(ours), ours_1_1 = ours_1.next(); !ours_1_1.done; ours_1_1 = ours_1.next()) {\n                        var loc = ours_1_1.value;\n                        base.push({\n                            fileName: loc.fileName,\n                            textSpan: { start: loc.span.start, length: loc.span.end - loc.span.start },\n                            name: '',\n                            // TODO: remove any and fix type error.\n                            kind: 'definition',\n                            containerName: loc.fileName,\n                            containerKind: 'file',\n                        });\n                    }\n                }\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                finally {\n                    try {\n                        if (ours_1_1 && !ours_1_1.done && (_a = ours_1.return)) _a.call(ours_1);\n                    }\n                    finally { if (e_3) throw e_3.error; }\n                }\n            }\n            return base;\n            var e_3, _a;\n        }) || [];\n    };\n    return proxy;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of the common package.\n */\nvar VERSION$3 = new Version$1('6.0.0-rc.5+252.sha-7c1bd71');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @module\n * @description\n * Entry point for all public APIs of the language service package.\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexports.createLanguageService = createLanguageService;\nexports.TypeScriptServiceHost = TypeScriptServiceHost;\nexports.createLanguageServiceFromTypescript = createLanguageServiceFromTypescript;\nexports.VERSION = VERSION$3;\nexports.getExternalFiles = getExternalFiles;\nexports.create = create;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n});\n//# sourceMappingURL=language-service.umd.js.map\n"]}