!function(global,factory){if("function"==typeof define&&define.amd)define("@angular/language-service",["exports","@angular/compiler","typescript","@angular/core","fs","path","@angular/compiler-cli"],factory);else if("undefined"!=typeof exports)factory(exports,require("@angular/compiler"),require("typescript"),require("@angular/core"),require("fs"),require("path"),require("@angular/compiler-cli"));else{var mod={exports:{}};factory(mod.exports,global.angularCompiler,global.ts,global.angularCore,global.fs,global.path,global.angularCompilerCli),global.ng=global.ng||{},global.ng.language_service=mod.exports}}(this,function(exports,_compiler,_typescript,_core,_fs,_path,_compilerCli){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function isParseSourceSpan(n){return n&&!!n.start}function spanOf(n){if(n)return isParseSourceSpan(n)?{start:n.start.offset,end:n.end.offset}:n.endSourceSpan?{start:n.sourceSpan.start.offset,end:n.endSourceSpan.end.offset}:n.children&&n.children.length?{start:n.sourceSpan.start.offset,end:spanOf(n.children[n.children.length-1]).end}:{start:n.sourceSpan.start.offset,end:n.sourceSpan.end.offset}}function inSpan(n,r,o){return r&&o?n>=r.start&&n<r.end:n>=r.start&&n<=r.end}function offsetSpan(n,r){return{start:n.start+r,end:n.end+r}}function isNarrower(n,r){return n.start>=r.start&&n.end<=r.end}function hasTemplateReference(n){if(n.diDeps){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=n.diDeps[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _r=_step.value;if(_r.token.identifier&&"TemplateRef"==(0,_compiler.identifierName)(_r.token.identifier))return!0}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}return!1}function getSelectors(n){var r=new Map,o=flatten(n.directives.map(function(l){var m=_compiler.CssSelector.parse(l.selector);return m.forEach(function(g){return r.set(g,l)}),m}));return{selectors:o,map:r}}function flatten(n){var _ref;return(_ref=[]).concat.apply(_ref,_toConsumableArray(n))}function removeSuffix(n,r){return n.endsWith(r)?n.substring(0,n.length-r.length):n}function uniqueByName(n){if(n){var r=[],o=new Set,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=n[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var l=_step2.value;o.has(l.name)||(o.add(l.name),r.push(l))}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return r}}function buildTemplatePath(n,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=new TemplateAstPathBuilder(r,o);return(0,_compiler.templateVisitAll)(l,n),l.getPath()}function getExpressionDiagnostics(n,r,o){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},m=new AstType(n,o,l);return m.getDiagnostics(r),m.diagnostics}function getExpressionCompletions(n,r,o,l){function m(h){return new AstType(n,l,{}).getType(h)}var g=new AstPath(r,o);if(!g.empty){var u=g.tail,y=n;return u.visit({visitBinary:function(){},visitChain:function(){},visitConditional:function(){},visitFunctionCall:function(){},visitImplicitReceiver:function(){},visitInterpolation:function(){y=void 0},visitKeyedRead:function(){},visitKeyedWrite:function(){},visitLiteralArray:function(){},visitLiteralMap:function(){},visitLiteralPrimitive:function(){},visitMethodCall:function(){},visitPipe:function(h){o>=h.exp.span.end&&(!h.args||!h.args.length||o<h.args[0].span.start)&&(y=l.getPipes())},visitPrefixNot:function(){},visitPropertyRead:function(h){var f=m(h.receiver);y=f?f.members():n},visitPropertyWrite:function(h){var f=m(h.receiver);y=f?f.members():n},visitQuote:function(){y=l.getBuiltinType(BuiltinType.Any).members()},visitSafeMethodCall:function(h){var f=m(h.receiver);y=f?f.members():n},visitSafePropertyRead:function(h){var f=m(h.receiver);y=f?f.members():n}}),y&&y.values()}}function getExpressionSymbol(n,r,o,l){function m(f){return new AstType(n,l,{}).getType(f)}var g=new AstPath(r,o,(!0));if(!g.empty){var u=g.tail,y=void 0,h=void 0;if(u.visit({visitBinary:function(){},visitChain:function(){},visitConditional:function(){},visitFunctionCall:function(){},visitImplicitReceiver:function(){},visitInterpolation:function(){},visitKeyedRead:function(){},visitKeyedWrite:function(){},visitLiteralArray:function(){},visitLiteralMap:function(){},visitLiteralPrimitive:function(){},visitMethodCall:function(f){var T=m(f.receiver);y=T&&T.members().get(f.name),h=f.span},visitPipe:function(f){if(o>=f.exp.span.end&&(!f.args||!f.args.length||o<f.args[0].span.start)){var T=l.getPipes();T&&(y=T.get(f.name),h=f.span)}},visitPrefixNot:function(){},visitPropertyRead:function(f){var T=m(f.receiver);y=T&&T.members().get(f.name),h=f.span},visitPropertyWrite:function(f){var T=m(f.receiver);y=T&&T.members().get(f.name),h=f.span},visitQuote:function(){},visitSafeMethodCall:function(f){var T=m(f.receiver);y=T&&T.members().get(f.name),h=f.span},visitSafePropertyRead:function(f){var T=m(f.receiver);y=T&&T.members().get(f.name),h=f.span}}),y&&h)return{symbol:y,span:h}}}function visitChildren(n,r){function o(m){r.visit&&r.visit(m)||m.visit(r)}function l(m){m.forEach(o)}n.visit({visitBinary:function(m){o(m.left),o(m.right)},visitChain:function(m){l(m.expressions)},visitConditional:function(m){o(m.condition),o(m.trueExp),o(m.falseExp)},visitFunctionCall:function(m){o(m.target),l(m.args)},visitImplicitReceiver:function(){},visitInterpolation:function(m){l(m.expressions)},visitKeyedRead:function(m){o(m.obj),o(m.key)},visitKeyedWrite:function(m){o(m.obj),o(m.key),o(m.obj)},visitLiteralArray:function(m){l(m.expressions)},visitLiteralMap:function(){},visitLiteralPrimitive:function(){},visitMethodCall:function(m){o(m.receiver),l(m.args)},visitPipe:function(m){o(m.exp),l(m.args)},visitPrefixNot:function(m){o(m.expression)},visitPropertyRead:function(m){o(m.receiver)},visitPropertyWrite:function(m){o(m.receiver),o(m.value)},visitQuote:function(){},visitSafeMethodCall:function(m){o(m.receiver),l(m.args)},visitSafePropertyRead:function(m){o(m.receiver)}})}function getExpressionScope(n,r,o){var l=n.template.members,m=getReferences(n),g=getVarDeclarations(n,r),u=getEventDeclaration(n,r,o);if(m.length||g.length||u.length){var y=n.template.query.createSymbolTable(m),h=n.template.query.createSymbolTable(g),f=n.template.query.createSymbolTable(u);l=n.template.query.mergeSymbolTable([l,y,h,f])}return l}function getEventDeclaration(n,r,o){var l=[];return o&&(l=[{name:"$event",kind:"variable",type:n.template.query.getBuiltinType(BuiltinType.Any)}]),l}function getReferences(n){function r(m){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_loop=function(){var g=_step3.value,u=void 0;g.value&&(u=n.template.query.getTypeSymbol((0,_compiler.tokenReference)(g.value))),o.push({name:g.name,kind:"reference",type:u||n.template.query.getBuiltinType(BuiltinType.Any),get definition(){return getDefintionOf(n,g)}})},_iterator3=m[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0)_loop()}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}var o=[],l=new(function(_TemplateAstChildVisi2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_TemplateAstChildVisi2),_createClass(_class,[{key:"visitEmbeddedTemplate",value:function(m,g){_get(_class.prototype.__proto__||Object.getPrototypeOf(_class.prototype),"visitEmbeddedTemplate",this).call(this,m,g),r(m.references)}},{key:"visitElement",value:function(m,g){_get(_class.prototype.__proto__||Object.getPrototypeOf(_class.prototype),"visitElement",this).call(this,m,g),r(m.references)}}]),_class}(TemplateAstChildVisitor));return(0,_compiler.templateVisitAll)(l,n.templateAst),o}function getVarDeclarations(n,r){for(var o=[],l=r.tail;l;){if(l instanceof _compiler.EmbeddedTemplateAst){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_loop2=function(){var m=_step4.value,g=m.name,u=l.directives.map(function(h){return n.template.query.getTemplateContext(h.directive.type.reference)}).find(function(h){return!!h}),y=void 0;if(u){var h=u.get(m.value);if(h){y=h.type;var f=n.template.query.getTypeKind(y);(f===BuiltinType.Any||f==BuiltinType.Unbound)&&(y=refinedVariableType(y,n,l))}}y||(y=n.template.query.getBuiltinType(BuiltinType.Any)),o.push({name:g,kind:"variable",type:y,get definition(){return getDefintionOf(n,m)}})},_iterator4=l.variables[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0)_loop2()}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}l=r.parentOf(l)}return o}function refinedVariableType(n,r,o){var l=o.directives.find(function(m){var g=(0,_compiler.identifierName)(m.directive.type);return"NgFor"==g||"NgForOf"==g});if(l){var m=l.inputs.find(function(g){return"ngForOf"==g.directiveName});if(m){var _g=new AstType(r.template.members,r.template.query,{}).getType(m.value);if(_g)return r.template.query.getElementType(_g)}}return n}function getDefintionOf(n,r){if(n.fileName){var o=n.template.span.start;return[{fileName:n.fileName,span:{start:r.sourceSpan.start.offset+o,end:r.sourceSpan.end.offset+o}}]}}function elementNames(){return Object.keys(elements).sort().map(function(n){return n.toLowerCase()})}function compose(n){var r={};if(n){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=n[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var _o=_step5.value,l=groups[_o];for(var m in l)l.hasOwnProperty(m)&&(r[m]=values[l[m]])}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}return r}function attributeNames(n){return Object.keys(compose(elements[n.toUpperCase()]||defaultAttributes)).sort()}function eventNames(n){return SchemaInformation.instance.eventsOf(n)}function propertyNames(n){return SchemaInformation.instance.propertiesOf(n)}function buildPath(n,r){var o=new HtmlAstPathBuilder(r);return(0,_compiler.visitAll)(o,n),o.getPath()}function getTemplateCompletions(n){var r=void 0,o=n.htmlAst,m=(n.templateAst,n.template),g=n.position-m.span.start,u=new HtmlAstPath(o,g),y=u.tail;if(u.empty)r=elementCompletions(n,u);else{var h=g-y.sourceSpan.start.offset;y.visit({visitElement:function(f){var T=spanOf(f.sourceSpan),b=f.name.length;g<=T.start+b+1?r=elementCompletions(n,u):g<T.end&&(r=attributeCompletions(n,u))},visitAttribute:function(f){f.valueSpan&&inSpan(g,spanOf(f.valueSpan))?f.valueSpan&&inSpan(g,spanOf(f.valueSpan))&&(r=attributeValueCompletions(n,g,f)):r=attributeCompletions(n,u)},visitText:function(f){if(r=entityCompletions(getSourceText(m,spanOf(f)),h))return r;if(r=interpolationCompletions(n,g))return r;var T=u.first(Element$1);if(T){var b=(0,_compiler.getHtmlTagDefinition)(T.name);b.contentType===_compiler.TagContentType.PARSABLE_DATA&&(r=voidElementAttributeCompletions(n,u),!r&&(r=elementCompletions(n,u)))}else r=voidElementAttributeCompletions(n,u),r||(r=elementCompletions(n,u))},visitComment:function(){},visitExpansion:function(){},visitExpansionCase:function(){}},null)}return r}function attributeCompletions(n,r){var o=r.tail instanceof Element$1?r.tail:r.parentOf(r.tail);return o instanceof Element$1?attributeCompletionsForElement(n,o.name,o):void 0}function attributeCompletionsForElement(n,r,o){var l=getAttributeInfosForElement(n,r,o);return l.map(function(m){return{kind:m.fromHtml?"html attribute":"attribute",name:nameOfAttr(m),sort:m.name}})}function getAttributeInfosForElement(n,r,o){var l=[],m=attributeNames(r)||[];m&&l.push.apply(l,_toConsumableArray(m.map(function(f){return{name:f,fromHtml:!0}})));var g=propertyNames(r);g&&l.push.apply(l,_toConsumableArray(g.map(function(f){return{name:f,input:!0}})));var u=eventNames(r);u&&l.push.apply(l,_toConsumableArray(u.map(function(f){return{name:f,output:!0}})));var _getSelectors=getSelectors(n),y=_getSelectors.selectors,h=_getSelectors.map;if(y&&y.length){var f=y.filter(function(x){return!x.element||x.element==r}),T=f.map(function(x){return{selector:x,attrs:x.attrs.filter(function(A){return!!A})}}),b=flatten(T.map(function(x){var A=h.get(x.selector),L=x.attrs.map(function(M){return{name:M,input:M in A.inputs,output:M in A.outputs}});return L}));T.forEach(function(x){var A=x.selector,L=h.get(A);L&&hasTemplateReference(L.type)&&A.attrs.length&&A.attrs[0]&&b.push({name:A.attrs[0],template:!0})});var S=createElementCssSelector(o?o:new Element$1(r,[],[],(void 0),(void 0),(void 0))),E=new _compiler.SelectorMatcher;E.addSelectables(y),E.match(S,function(x){var _b,_b2,A=h.get(x);A&&((_b=b).push.apply(_b,_toConsumableArray(Object.keys(A.inputs).map(function(L){return{name:L,input:!0}}))),(_b2=b).push.apply(_b2,_toConsumableArray(Object.keys(A.outputs).map(function(L){return{name:L,output:!0}}))))}),b=foldAttrs(b),l.push.apply(l,_toConsumableArray(flatten(b.map(expandedAttr))))}return l}function attributeValueCompletions(n,r,o){var l=new TemplateAstPath(n.templateAst,r),m=l.tail;if(m){var _g2=new ExpressionVisitor(n,r,o,function(){return getExpressionScope(n,l,!1)});if(m.visit(_g2,null),!_g2.result||!_g2.result.length){var _u=new TemplateAstPath(n.templateAst,r,(!0));if(_u.tail){var _y=new ExpressionVisitor(n,r,o,function(){return getExpressionScope(n,_u,!1)});return _u.tail.visit(_y,null),_y.result}}return _g2.result}}function elementCompletions(n){var o=elementNames().filter(function(u){return!(u in hiddenHtmlElements)}),l=getSelectors(n).selectors.map(function(u){return u.element}).filter(function(u){return!!u}),m=l.map(function(u){return{kind:"component",name:u,sort:u}}),g=o.map(function(u){return{kind:"element",name:u,sort:u}});return uniqueByName(g.concat(m))}function entityCompletions(n,r){for(var o=/&[A-Za-z]*;?(?!\d)/g,l=void 0,m=void 0;l=o.exec(n);){var _g3=l[0].length;if(r>=l.index&&r<l.index+_g3){m=Object.keys(_compiler.NAMED_ENTITIES).map(function(u){return{kind:"entity",name:"&"+u+";",sort:u}});break}}return m}function interpolationCompletions(n,r){var o=new TemplateAstPath(n.templateAst,r),l=o.tail;if(l){var m=new ExpressionVisitor(n,r,(void 0),function(){return getExpressionScope(n,o,!1)});return l.visit(m,null),uniqueByName(m.result)}}function voidElementAttributeCompletions(n,r){var o=r.tail;if(o instanceof _compiler.Text){var l=o.value.match(/<(\w(\w|\d|-)*:)?(\w(\w|\d|-)*)\s/);if(l&&r.position>=l.index+l[0].length+o.sourceSpan.start.offset)return attributeCompletionsForElement(n,l[3])}}function getSourceText(n,r){return n.source.substring(r.start,r.end)}function nameOfAttr(n){var r=n.name;n.output&&(r=removeSuffix(r,"Events"),r=removeSuffix(r,"Changed"));var o=[r];return n.input&&(o.unshift("["),o.push("]")),n.output&&(o.unshift("("),o.push(")")),n.template&&o.unshift("*"),o.join("")}function createElementCssSelector(n){var r=new _compiler.CssSelector,o=(0,_compiler.splitNsName)(n.name)[1];r.setElement(o);var _iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=n.attrs[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var l=_step6.value;if(!l.name.match(templateAttr)){var _splitNsName=(0,_compiler.splitNsName)(l.name),_splitNsName2=_slicedToArray(_splitNsName,2),_g5=(_splitNsName2[0],_splitNsName2[1]);if(r.addAttribute(_g5,l.value),"class"==l.name.toLowerCase()){var _u3=l.value.split(/s+/g);_u3.forEach(function(y){return r.addClassName(y)})}}}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}return r}function foldAttrs(n){var r=new Map,o=new Map,l=[];return n.forEach(function(m){if(m.fromHtml)return m;if(m.template){var _g6=o.get(m.name);_g6||(l.push({name:m.name,template:!0}),o.set(m.name,m))}if(m.input||m.output){var _g7=r.get(m.name);if(_g7)_g7.input=_g7.input||m.input,_g7.output=_g7.output||m.output;else{var _u4={name:m.name};m.input&&(_u4.input=!0),m.output&&(_u4.output=!0),l.push(_u4),r.set(m.name,_u4)}}}),l}function expandedAttr(n){return n.input&&n.output?[n,{name:n.name,input:!0,output:!1},{name:n.name,input:!1,output:!0}]:[n]}function lowerName(n){return n&&n[0].toLowerCase()+n.substr(1)}function locateSymbol(n){var r=n.position-n.template.span.start,o=new TemplateAstPath(n.templateAst,r);if(o.tail){var l=void 0,m=void 0,_g8=function(u){var y=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=findAttribute(n);if(h&&inSpan(r,spanOf(h.valueSpan))){var f=getExpressionScope(n,o,y),T=h.valueSpan.start.offset+1,b=getExpressionSymbol(f,u,r-T,n.template.query);return b&&(l=b.symbol,m=offsetSpan(b.span,T)),!0}return!1};if(o.tail.visit({visitNgContent:function(){},visitEmbeddedTemplate:function(){},visitElement:function(u){var y=u.directives.find(function(h){return h.directive.isComponent});if(y)l=n.template.query.getTypeSymbol(y.directive.type.reference),l=l&&new OverrideKindSymbol(l,"component"),m=spanOf(u);else{var h=u.directives.find(function(f){return 0<=f.directive.selector.indexOf(u.name)});h&&(l=n.template.query.getTypeSymbol(h.directive.type.reference),l=l&&new OverrideKindSymbol(l,"directive"),m=spanOf(u))}},visitReference:function(u){l=n.template.query.getTypeSymbol((0,_compiler.tokenReference)(u.value)),m=spanOf(u)},visitVariable:function(){},visitEvent:function(u){_g8(u.handler,!0)||(l=findOutputBinding(n,o,u),l=l&&new OverrideKindSymbol(l,"event"),m=spanOf(u))},visitElementProperty:function(u){_g8(u.value)},visitAttr:function(){},visitBoundText:function(u){var y=r-u.sourceSpan.start.offset;if(inSpan(y,u.value.span)){var h=getExpressionScope(n,o,!1),f=getExpressionSymbol(h,u.value,y,n.template.query);f&&(l=f.symbol,m=offsetSpan(f.span,u.sourceSpan.start.offset))}},visitText:function(){},visitDirective:function(u){l=n.template.query.getTypeSymbol(u.directive.type.reference),m=spanOf(u)},visitDirectiveProperty:function(u){_g8(u.value)||(l=findInputBinding(n,o,u),m=spanOf(u))}},null),l&&m)return{symbol:l,span:offsetSpan(m,n.template.span.start)}}}function findAttribute(n){var r=n.position-n.template.span.start,o=new HtmlAstPath(n.htmlAst,r);return o.first(_compiler.Attribute)}function findInputBinding(n,r,o){var l=r.first(_compiler.ElementAst);if(l){var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=l.directives[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){var _m=_step7.value,_g9=invertMap(_m.directive.inputs),_u5=_g9[o.templateName];if(_u5){var _y3=n.template.query.getTypeSymbol(_m.directive.type.reference);if(_y3)return _y3.members().get(_u5)}}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{!_iteratorNormalCompletion7&&_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}}}function findOutputBinding(n,r,o){var l=r.first(_compiler.ElementAst);if(l){var _iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _step8,_iterator8=l.directives[Symbol.iterator]();!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){var _m2=_step8.value,_g10=invertMap(_m2.directive.outputs),_u6=_g10[o.name];if(_u6){var _y4=n.template.query.getTypeSymbol(_m2.directive.type.reference);if(_y4)return _y4.members().get(_u6)}}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{!_iteratorNormalCompletion8&&_iterator8.return&&_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}}}function invertMap(n){var r={},_iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _step9,_iterator9=Object.keys(n)[Symbol.iterator]();!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0){var o=_step9.value,l=n[o];r[l]=o}}catch(err){_didIteratorError9=!0,_iteratorError9=err}finally{try{!_iteratorNormalCompletion9&&_iterator9.return&&_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9}}return r}function getDefinition(n){var r=locateSymbol(n);return r&&r.symbol.definition}function getTemplateDiagnostics(n,r,o){var l=[],_iteratorNormalCompletion10=!0,_didIteratorError10=!1,_iteratorError10=void 0;try{for(var _step10,_loop3=function(){var m=_step10.value,g=r.getTemplateAst(m,n);if(g){if(g.parseErrors&&g.parseErrors.length)l.push.apply(l,_toConsumableArray(g.parseErrors.map(function(u){return{kind:DiagnosticKind.Error,span:offsetSpan(spanOf(u.span),m.span.start),message:u.msg}})));else if(g.templateAst){var _u7=getTemplateExpressionDiagnostics(m,g);l.push.apply(l,_toConsumableArray(_u7))}g.errors&&l.push.apply(l,_toConsumableArray(g.errors.map(function(u){return{kind:u.kind,span:u.span||m.span,message:u.message}})))}},_iterator10=o[Symbol.iterator]();!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=!0)_loop3()}catch(err){_didIteratorError10=!0,_iteratorError10=err}finally{try{!_iteratorNormalCompletion10&&_iterator10.return&&_iterator10.return()}finally{if(_didIteratorError10)throw _iteratorError10}}return l}function getDeclarationDiagnostics(n,r){var o=[],l=void 0,_iteratorNormalCompletion11=!0,_didIteratorError11=!1,_iteratorError11=void 0;try{for(var _step11,_loop4=function(){var m=_step11.value,g=function(u,y){o.push({kind:DiagnosticKind.Error,span:y||m.declarationSpan,message:u})},_iteratorNormalCompletion12=!0,_didIteratorError12=!1,_iteratorError12=void 0;try{for(var _step12,_iterator12=m.errors[Symbol.iterator]();!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=!0){var _u8=_step12.value;g(_u8.message,_u8.span)}}catch(err){_didIteratorError12=!0,_iteratorError12=err}finally{try{!_iteratorNormalCompletion12&&_iterator12.return&&_iterator12.return()}finally{if(_didIteratorError12)throw _iteratorError12}}m.metadata&&(m.metadata.isComponent?(!r.ngModuleByPipeOrDirective.has(m.type)&&g("Component '"+m.type.name+"' is not included in a module and will not be available inside a template. Consider adding it to a NgModule declaration"),null==m.metadata.template.template&&!m.metadata.template.templateUrl&&g("Component "+m.type.name+" must have a template or templateUrl")):(!l&&(l=new Set,r.ngModules.forEach(function(u){u.declaredDirectives.forEach(function(y){l.add(y.reference)})})),!l.has(m.type)&&g("Directive '"+m.type.name+"' is not included in a module and will not be available inside a template. Consider adding it to a NgModule declaration")))},_iterator11=n[Symbol.iterator]();!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=!0)_loop4()}catch(err){_didIteratorError11=!0,_iteratorError11=err}finally{try{!_iteratorNormalCompletion11&&_iterator11.return&&_iterator11.return()}finally{if(_didIteratorError11)throw _iteratorError11}}return o}function getTemplateExpressionDiagnostics(n,r){var o={template:n,htmlAst:r.htmlAst,directive:r.directive,directives:r.directives,pipes:r.pipes,templateAst:r.templateAst,expressionParser:r.expressionParser},l=new ExpressionDiagnosticsVisitor(o,function(m,g){return getExpressionScope(o,m,g)});return(0,_compiler.templateVisitAll)(l,r.templateAst),l.diagnostics}function getHover(n){var r=locateSymbol(n);if(r)return{text:hoverTextOf(r.symbol),span:r.span}}function hoverTextOf(n){var r=[{text:n.kind},{text:" "},{text:n.name,language:n.language}],o=n.container;return o&&r.push({text:" of "},{text:o.name,language:o.language}),r}function createLanguageService(n){return new LanguageServiceImpl(n)}function uniqueBySpan(n){if(n){var r=[],o=new Map,_iteratorNormalCompletion13=!0,_didIteratorError13=!1,_iteratorError13=void 0;try{for(var _step13,_iterator13=n[Symbol.iterator]();!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=!0){var l=_step13.value,_m6=l.span,_g12=o.get(_m6.start);_g12||(_g12=new Set,o.set(_m6.start,_g12)),_g12.has(_m6.end)||(_g12.add(_m6.end),r.push(l))}}catch(err){_didIteratorError13=!0,_iteratorError13=err}finally{try{!_iteratorNormalCompletion13&&_iterator13.return&&_iterator13.return()}finally{if(_didIteratorError13)throw _iteratorError13}}return r}}function findSuitableDefaultModule(n){var r=void 0,o=0,_iteratorNormalCompletion14=!0,_didIteratorError14=!1,_iteratorError14=void 0;try{for(var _step14,_iterator14=n.ngModules[Symbol.iterator]();!(_iteratorNormalCompletion14=(_step14=_iterator14.next()).done);_iteratorNormalCompletion14=!0){var l=_step14.value,_m7=l.transitiveModule.directives.length;_m7>o&&(r=l,o=_m7)}}catch(err){_didIteratorError14=!0,_iteratorError14=err}finally{try{!_iteratorNormalCompletion14&&_iterator14.return&&_iterator14.return()}finally{if(_didIteratorError14)throw _iteratorError14}}return r}function createLanguageServiceFromTypescript(n,r){var o=new TypeScriptServiceHost(n,r),l=createLanguageService(o);return o.setSite(l),l}function typeCallable(n){var r=n.getCallSignatures();return r&&0!=r.length}function signaturesOf(n,r){return n.getCallSignatures().map(function(o){return new SignatureWrapper(o,r)})}function _selectSignature(n,r){var l=n.getCallSignatures();return l.length?new SignatureWrapper(l[0],r):void 0}function toSymbolTable(n){var r={},_iteratorNormalCompletion20=!0,_didIteratorError20=!1,_iteratorError20=void 0;try{for(var _step20,_iterator20=n[Symbol.iterator]();!(_iteratorNormalCompletion20=(_step20=_iterator20.next()).done);_iteratorNormalCompletion20=!0){var o=_step20.value;r[o.name]=o}}catch(err){_didIteratorError20=!0,_iteratorError20=err}finally{try{!_iteratorNormalCompletion20&&_iterator20.return&&_iterator20.return()}finally{if(_didIteratorError20)throw _iteratorError20}}return r}function toSymbols(n,r){var o=[],l="function"==typeof n.hasOwnProperty?function(m){return n.hasOwnProperty(m)}:function(m){return!!n[m]};for(var _m14 in n)l(_m14)&&(!r||r(n[_m14]))&&o.push(n[_m14]);return o}function findClassSymbolInContext(n,r){var o=r.program.getSourceFile(n.filePath);if(o){var l=o.module||o.symbol,_m15=r.checker.getExportsOfModule(l);return(_m15||[]).find(function(g){return g.name==n.name})}}function findTsConfig(n){for(var r=path.dirname(n);fs.existsSync(r);){var o=path.join(r,"tsconfig.json");if(fs.existsSync(o))return o;r=path.dirname(r)}}function isSymbolPrivate(n){return n.valueDeclaration&&isPrivate(n.valueDeclaration)}function getBuiltinTypeFromTs(n,r){var o=void 0,l=r.checker,m=r.node;switch(n){case BuiltinType.Any:o=l.getTypeAtLocation(setParents({kind:ts.SyntaxKind.AsExpression,expression:{kind:ts.SyntaxKind.TrueKeyword},type:{kind:ts.SyntaxKind.AnyKeyword}},m));break;case BuiltinType.Boolean:o=l.getTypeAtLocation(setParents({kind:ts.SyntaxKind.TrueKeyword},m));break;case BuiltinType.Null:o=l.getTypeAtLocation(setParents({kind:ts.SyntaxKind.NullKeyword},m));break;case BuiltinType.Number:var _g20={kind:ts.SyntaxKind.NumericLiteral};setParents({kind:ts.SyntaxKind.ExpressionStatement,expression:_g20},m),o=l.getTypeAtLocation(_g20);break;case BuiltinType.String:o=l.getTypeAtLocation(setParents({kind:ts.SyntaxKind.NoSubstitutionTemplateLiteral},m));break;case BuiltinType.Undefined:o=l.getTypeAtLocation(setParents({kind:ts.SyntaxKind.VoidExpression,expression:{kind:ts.SyntaxKind.NumericLiteral}},m));break;default:throw new Error("Internal error, unhandled literal kind "+n+":"+BuiltinType[n])}return o}function setParents(n,r){return n.parent=r,ts.forEachChild(n,function(o){return setParents(o,n)}),n}function spanOf$1(n){return{start:n.getStart(),end:n.getEnd()}}function shrink(n,r){return null==r&&(r=1),{start:n.start+r,end:n.end-r}}function spanAt(n,r,o){if(null!=r&&null!=o){var l=ts.getPositionOfLineAndCharacter(n,r,o),_g21=ts.forEachChild(n,function u(y){if(y.kind>ts.SyntaxKind.LastToken&&y.pos<=l&&y.end>l){var h=ts.forEachChild(y,u);return h||y}});if(_g21)return{start:_g21.getStart(),end:_g21.getEnd()}}}function definitionFromTsSymbol(n){var r=n.declarations;if(r)return r.map(function(o){var l=o.getSourceFile();return{fileName:l.fileName,span:{start:o.getStart(),end:o.getEnd()}}})}function parentDeclarationOf(n){for(;n;){switch(n.kind){case ts.SyntaxKind.ClassDeclaration:case ts.SyntaxKind.InterfaceDeclaration:return n;case ts.SyntaxKind.SourceFile:return null}n=n.parent}}function getContainerOf(n,r){if(n.getFlags()&ts.SymbolFlags.ClassMember&&n.declarations){var _iteratorNormalCompletion22=!0,_didIteratorError22=!1,_iteratorError22=void 0;try{for(var _step22,_iterator22=n.declarations[Symbol.iterator]();!(_iteratorNormalCompletion22=(_step22=_iterator22.next()).done);_iteratorNormalCompletion22=!0){var _o4=_step22.value,l=parentDeclarationOf(_o4);if(l){var _m16=r.checker.getTypeAtLocation(l);if(_m16)return new TypeWrapper(_m16,r)}}}catch(err){_didIteratorError22=!0,_iteratorError22=err}finally{try{!_iteratorNormalCompletion22&&_iterator22.return&&_iterator22.return()}finally{if(_didIteratorError22)throw _iteratorError22}}}}function getTypeParameterOf(n,r){if(n&&n.symbol&&n.symbol.name==r){var o=n.typeArguments;if(o&&1>=o.length)return o[0]}}function typeKindOf(n){if(n){if(n.flags&ts.TypeFlags.Any)return BuiltinType.Any;if(n.flags&(ts.TypeFlags.String|ts.TypeFlags.StringLike|ts.TypeFlags.StringLiteral))return BuiltinType.String;if(n.flags&(ts.TypeFlags.Number|ts.TypeFlags.NumberLike))return BuiltinType.Number;if(n.flags&ts.TypeFlags.Undefined)return BuiltinType.Undefined;if(n.flags&ts.TypeFlags.Null)return BuiltinType.Null;if(n.flags&ts.TypeFlags.Union){var r=void 0,o=n;if(0<o.types.length){r=typeKindOf(o.types[0]);var _iteratorNormalCompletion23=!0,_didIteratorError23=!1,_iteratorError23=void 0;try{for(var _step23,_iterator23=o.types[Symbol.iterator]();!(_iteratorNormalCompletion23=(_step23=_iterator23.next()).done);_iteratorNormalCompletion23=!0){var l=_step23.value;if(r!=typeKindOf(l))return BuiltinType.Other}}catch(err){_didIteratorError23=!0,_iteratorError23=err}finally{try{!_iteratorNormalCompletion23&&_iterator23.return&&_iterator23.return()}finally{if(_didIteratorError23)throw _iteratorError23;
}}}return r}if(n.flags&ts.TypeFlags.TypeParameter)return BuiltinType.Unbound}return BuiltinType.Other}function create(n){function r(h){return{kind:h.kind,name:h.name,sortText:h.sort,kindModifiers:""}}function o(h,f){return{file:f,start:h.span.start,length:h.span.end-h.span.start,messageText:h.message,category:ts.DiagnosticCategory.Error,code:0}}function l(h,f){try{f()}catch(T){n.project.projectService.logger.info("Failed to "+h+": "+T.toString()),n.project.projectService.logger.info("Stack trace: "+T.stack)}}var m=Object.create(null),g=n.languageService,_loop5=function(h){m[h]=function(){return g[h].apply(g,arguments)}};for(var h in g)_loop5(h);var u=new TypeScriptServiceHost(n.languageServiceHost,n.languageService),y=createLanguageService(u);return u.setSite(y),m.getCompletionsAtPosition=function(h,f){var T=g.getCompletionsAtPosition(h,f);return l("get completions",function(){var b=y.getCompletionsAt(h,f);if(b&&b.length){void 0===T&&(T={isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!1,entries:[]});var _iteratorNormalCompletion24=!0,_didIteratorError24=!1,_iteratorError24=void 0;try{for(var _step24,_iterator24=b[Symbol.iterator]();!(_iteratorNormalCompletion24=(_step24=_iterator24.next()).done);_iteratorNormalCompletion24=!0){var S=_step24.value;T.entries.push(r(S))}}catch(err){_didIteratorError24=!0,_iteratorError24=err}finally{try{!_iteratorNormalCompletion24&&_iterator24.return&&_iterator24.return()}finally{if(_didIteratorError24)throw _iteratorError24}}}}),T},m.getQuickInfoAtPosition=function(h,f){var T=g.getQuickInfoAtPosition(h,f);return l("get quick info",function(){var b=y.getHoverAt(h,f);if(b){var S=[],_iteratorNormalCompletion25=!0,_didIteratorError25=!1,_iteratorError25=void 0;try{for(var _step25,_iterator25=b.text[Symbol.iterator]();!(_iteratorNormalCompletion25=(_step25=_iterator25.next()).done);_iteratorNormalCompletion25=!0){var E=_step25.value;S.push({kind:E.language,text:E.text})}}catch(err){_didIteratorError25=!0,_iteratorError25=err}finally{try{!_iteratorNormalCompletion25&&_iterator25.return&&_iterator25.return()}finally{if(_didIteratorError25)throw _iteratorError25}}T={displayParts:S,documentation:[],kind:"angular",kindModifiers:"what does this do?",textSpan:{start:b.span.start,length:b.span.end-b.span.start},tags:[]}}}),T},m.getSemanticDiagnostics=function(h){var f=g.getSemanticDiagnostics(h);return void 0===f&&(f=[]),l("get diagnostics",function(){n.project.projectService.logger.info("Computing Angular semantic diagnostics...");var T=y.getDiagnostics(h);if(T&&T.length){var b=g.getProgram().getSourceFile(h);f.push.apply(f,T.map(function(S){return o(S,b)}))}}),f},m.getDefinitionAtPosition=function(h,f){var T=g.getDefinitionAtPosition(h,f);return T&&T.length?T:(l("get definition",function(){var b=y.getDefinitionAt(h,f);if(b&&b.length){T=T||[];var _iteratorNormalCompletion26=!0,_didIteratorError26=!1,_iteratorError26=void 0;try{for(var _step26,_iterator26=b[Symbol.iterator]();!(_iteratorNormalCompletion26=(_step26=_iterator26.next()).done);_iteratorNormalCompletion26=!0){var S=_step26.value;T.push({fileName:S.fileName,textSpan:{start:S.span.start,length:S.span.end-S.span.start},name:"",kind:"definition",containerName:S.fileName,containerKind:"file"})}}catch(err){_didIteratorError26=!0,_iteratorError26=err}finally{try{!_iteratorNormalCompletion26&&_iterator26.return&&_iterator26.return()}finally{if(_didIteratorError26)throw _iteratorError26}}}}),T)},m}Object.defineProperty(exports,"__esModule",{value:!0}),exports.VERSION=exports.createLanguageServiceFromTypescript=exports.TypeScriptServiceHost=exports.create=exports.createLanguageService=void 0;var BuiltinType,ts=_interopRequireWildcard(_typescript),fs=_interopRequireWildcard(_fs),path=_interopRequireWildcard(_path),_slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),AstPath$1=function(){function AstPath$1(n){_classCallCheck(this,AstPath$1),this.path=n}return _createClass(AstPath$1,[{key:"parentOf",value:function(n){return this.path[this.path.indexOf(n)-1]}},{key:"childOf",value:function(n){return this.path[this.path.indexOf(n)+1]}},{key:"first",value:function(n){for(var o,r=this.path.length-1;0<=r;r--)if(o=this.path[r],o instanceof n)return o}},{key:"push",value:function(n){this.path.push(n)}},{key:"pop",value:function(){return this.path.pop()}},{key:"empty",get:function(){return!this.path||!this.path.length}},{key:"head",get:function(){return this.path[0]}},{key:"tail",get:function(){return this.path[this.path.length-1]}}]),AstPath$1}(),TemplateAstPath=function(_AstPath$){function TemplateAstPath(n,r){var _this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,TemplateAstPath),_this=_possibleConstructorReturn(this,(TemplateAstPath.__proto__||Object.getPrototypeOf(TemplateAstPath)).call(this,buildTemplatePath(n,r,o))),_this.position=r,_this}return _inherits(TemplateAstPath,_AstPath$),TemplateAstPath}(AstPath$1),NullTemplateVisitor=function(){function NullTemplateVisitor(){_classCallCheck(this,NullTemplateVisitor)}return _createClass(NullTemplateVisitor,[{key:"visitNgContent",value:function(){}},{key:"visitEmbeddedTemplate",value:function(){}},{key:"visitElement",value:function(){}},{key:"visitReference",value:function(){}},{key:"visitVariable",value:function(){}},{key:"visitEvent",value:function(){}},{key:"visitElementProperty",value:function(){}},{key:"visitAttr",value:function(){}},{key:"visitBoundText",value:function(){}},{key:"visitText",value:function(){}},{key:"visitDirective",value:function(){}},{key:"visitDirectiveProperty",value:function(){}}]),NullTemplateVisitor}(),TemplateAstChildVisitor=function(){function TemplateAstChildVisitor(n){_classCallCheck(this,TemplateAstChildVisitor),this.visitor=n}return _createClass(TemplateAstChildVisitor,[{key:"visitEmbeddedTemplate",value:function(n,r){return this.visitChildren(r,function(o){o(n.attrs),o(n.references),o(n.variables),o(n.directives),o(n.providers),o(n.children)})}},{key:"visitElement",value:function(n,r){return this.visitChildren(r,function(o){o(n.attrs),o(n.inputs),o(n.outputs),o(n.references),o(n.directives),o(n.providers),o(n.children)})}},{key:"visitDirective",value:function(n,r){return this.visitChildren(r,function(o){o(n.inputs),o(n.hostProperties),o(n.hostEvents)})}},{key:"visitNgContent",value:function(){}},{key:"visitReference",value:function(){}},{key:"visitVariable",value:function(){}},{key:"visitEvent",value:function(){}},{key:"visitElementProperty",value:function(){}},{key:"visitAttr",value:function(){}},{key:"visitBoundText",value:function(){}},{key:"visitText",value:function(){}},{key:"visitDirectiveProperty",value:function(){}},{key:"visitChildren",value:function(n,r){var l=this.visitor||this,m=[];return r(function(g){g&&g.length&&m.push((0,_compiler.templateVisitAll)(l,g,n))}),[].concat.apply([],m)}}]),TemplateAstChildVisitor}(),TemplateAstPathBuilder=function(_TemplateAstChildVisi){function TemplateAstPathBuilder(n,r){var _this2;return _classCallCheck(this,TemplateAstPathBuilder),_this2=_possibleConstructorReturn(this,(TemplateAstPathBuilder.__proto__||Object.getPrototypeOf(TemplateAstPathBuilder)).call(this)),_this2.position=n,_this2.allowWidening=r,_this2.path=[],_this2}return _inherits(TemplateAstPathBuilder,_TemplateAstChildVisi),_createClass(TemplateAstPathBuilder,[{key:"visit",value:function(n){var o=spanOf(n);if(!inSpan(this.position,o))return!0;var l=this.path.length;(!l||this.allowWidening||isNarrower(o,spanOf(this.path[l-1])))&&this.path.push(n)}},{key:"visitEmbeddedTemplate",value:function(n,r){return this.visitChildren(r,function(o){o(n.attrs),o(n.directives),o(n.children)})}},{key:"visitElement",value:function(n,r){return this.visitChildren(r,function(o){o(n.attrs),o(n.inputs),o(n.outputs),o(n.references),o(n.directives),o(n.children)})}},{key:"visitDirective",value:function(n,r){var o=this.visitChildren(r,function(l){l(n.inputs)});return this.path[this.path.length-1]==n&&this.path.pop(),o}},{key:"getPath",value:function(){return this.path}}]),TemplateAstPathBuilder}(TemplateAstChildVisitor);!function(n){n[n.Any=0]="Any",n[n.String=1]="String",n[n.Number=2]="Number",n[n.Boolean=3]="Boolean",n[n.Undefined=4]="Undefined",n[n.Null=5]="Null",n[n.Unbound=6]="Unbound",n[n.Other=7]="Other"}(BuiltinType||(BuiltinType={}));var DiagnosticKind;!function(n){n[n.Error=0]="Error",n[n.Warning=1]="Warning"}(DiagnosticKind||(DiagnosticKind={}));var NullVisitor=function(){function NullVisitor(){_classCallCheck(this,NullVisitor)}return _createClass(NullVisitor,[{key:"visitBinary",value:function(){}},{key:"visitChain",value:function(){}},{key:"visitConditional",value:function(){}},{key:"visitFunctionCall",value:function(){}},{key:"visitImplicitReceiver",value:function(){}},{key:"visitInterpolation",value:function(){}},{key:"visitKeyedRead",value:function(){}},{key:"visitKeyedWrite",value:function(){}},{key:"visitLiteralArray",value:function(){}},{key:"visitLiteralMap",value:function(){}},{key:"visitLiteralPrimitive",value:function(){}},{key:"visitMethodCall",value:function(){}},{key:"visitPipe",value:function(){}},{key:"visitPrefixNot",value:function(){}},{key:"visitPropertyRead",value:function(){}},{key:"visitPropertyWrite",value:function(){}},{key:"visitQuote",value:function(){}},{key:"visitSafeMethodCall",value:function(){}},{key:"visitSafePropertyRead",value:function(){}}]),NullVisitor}(),TypeDiagnostic=function TypeDiagnostic(n,r,o){_classCallCheck(this,TypeDiagnostic),this.kind=n,this.message=r,this.ast=o},AstType=function(){function AstType(n,r,o){_classCallCheck(this,AstType),this.scope=n,this.query=r,this.context=o}return _createClass(AstType,[{key:"getType",value:function(n){return n.visit(this)}},{key:"getDiagnostics",value:function(n){this.diagnostics=[];var r=n.visit(this);return this.context.event&&r.callable&&this.reportWarning("Unexpected callable expression. Expected a method call",n),this.diagnostics}},{key:"visitBinary",value:function(n){function r(f,T){return f===BuiltinType.Undefined||f===BuiltinType.Null?r(T,BuiltinType.Other):f}var o=this.getType(n.left),l=this.getType(n.right),m=this.query.getTypeKind(o),g=this.query.getTypeKind(l),u=r(m,g),y=r(g,m),h=u<<8|y;switch(n.operation){case"*":case"/":case"%":case"-":case"<<":case">>":case">>>":case"&":case"^":case"|":switch(h){case BuiltinType.Any<<8|BuiltinType.Any:case BuiltinType.Number<<8|BuiltinType.Any:case BuiltinType.Any<<8|BuiltinType.Number:case BuiltinType.Number<<8|BuiltinType.Number:return this.query.getBuiltinType(BuiltinType.Number);default:var f=n.left;return u===BuiltinType.Any||u===BuiltinType.Number?f=n.right:void 0,this.reportError("Expected a numeric type",f)}case"+":return h==(BuiltinType.Any<<8|BuiltinType.Any)||h==(BuiltinType.Any<<8|BuiltinType.Boolean)||h==(BuiltinType.Any<<8|BuiltinType.Number)||h==(BuiltinType.Any<<8|BuiltinType.Other)||h==(BuiltinType.Boolean<<8|BuiltinType.Any)||h==(BuiltinType.Number<<8|BuiltinType.Any)||h==(BuiltinType.Other<<8|BuiltinType.Any)?this.anyType:h==(BuiltinType.Any<<8|BuiltinType.String)||h==(BuiltinType.Boolean<<8|BuiltinType.String)||h==(BuiltinType.Number<<8|BuiltinType.String)||h==(BuiltinType.String<<8|BuiltinType.Any)||h==(BuiltinType.String<<8|BuiltinType.Boolean)||h==(BuiltinType.String<<8|BuiltinType.Number)||h==(BuiltinType.String<<8|BuiltinType.String)||h==(BuiltinType.String<<8|BuiltinType.Other)||h==(BuiltinType.Other<<8|BuiltinType.String)?this.query.getBuiltinType(BuiltinType.String):h==(BuiltinType.Number<<8|BuiltinType.Number)?this.query.getBuiltinType(BuiltinType.Number):h==(BuiltinType.Boolean<<8|BuiltinType.Number)||h==(BuiltinType.Other<<8|BuiltinType.Number)?this.reportError("Expected a number type",n.left):h==(BuiltinType.Number<<8|BuiltinType.Boolean)||h==(BuiltinType.Number<<8|BuiltinType.Other)?this.reportError("Expected a number type",n.right):this.reportError("Expected operands to be a string or number type",n);case">":case"<":case"<=":case">=":case"==":case"!=":case"===":case"!==":return h==(BuiltinType.Any<<8|BuiltinType.Any)||h==(BuiltinType.Any<<8|BuiltinType.Boolean)||h==(BuiltinType.Any<<8|BuiltinType.Number)||h==(BuiltinType.Any<<8|BuiltinType.String)||h==(BuiltinType.Any<<8|BuiltinType.Other)||h==(BuiltinType.Boolean<<8|BuiltinType.Any)||h==(BuiltinType.Boolean<<8|BuiltinType.Boolean)||h==(BuiltinType.Number<<8|BuiltinType.Any)||h==(BuiltinType.Number<<8|BuiltinType.Number)||h==(BuiltinType.String<<8|BuiltinType.Any)||h==(BuiltinType.String<<8|BuiltinType.String)||h==(BuiltinType.Other<<8|BuiltinType.Any)||h==(BuiltinType.Other<<8|BuiltinType.Other)?this.query.getBuiltinType(BuiltinType.Boolean):this.reportError("Expected the operants to be of similar type or any",n);case"&&":return l;case"||":return this.query.getTypeUnion(o,l)}return this.reportError("Unrecognized operator "+n.operation,n)}},{key:"visitChain",value:function(n){return this.diagnostics&&visitChildren(n,this),this.query.getBuiltinType(BuiltinType.Undefined)}},{key:"visitConditional",value:function(n){return this.query.getTypeUnion(this.getType(n.trueExp),this.getType(n.falseExp))}},{key:"visitFunctionCall",value:function(n){var _this3=this,r=n.args.map(function(m){return _this3.getType(m)}),o=this.getType(n.target);if(!o||!o.callable)return this.reportError("Call target is not callable",n);var l=o.selectSignature(r);return l?l.result:this.reportError("Unable no compatible signature found for call",n)}},{key:"visitImplicitReceiver",value:function(){var r=this;return{name:"$implict",kind:"component",language:"ng-template",type:void 0,container:void 0,callable:!1,public:!0,definition:void 0,members:function(){return r.scope},signatures:function(){return[]},selectSignature:function(){},indexed:function(){}}}},{key:"visitInterpolation",value:function(n){return this.diagnostics&&visitChildren(n,this),this.undefinedType}},{key:"visitKeyedRead",value:function(n){var r=this.getType(n.obj),o=this.getType(n.key),l=r.indexed(o);return l||this.anyType}},{key:"visitKeyedWrite",value:function(n){return this.getType(n.value)}},{key:"visitLiteralArray",value:function(n){var _query,_this4=this;return this.query.getArrayType((_query=this.query).getTypeUnion.apply(_query,_toConsumableArray(n.expressions.map(function(r){return _this4.getType(r)}))))}},{key:"visitLiteralMap",value:function(n){return this.diagnostics&&visitChildren(n,this),this.anyType}},{key:"visitLiteralPrimitive",value:function(n){switch(n.value){case!0:case!1:return this.query.getBuiltinType(BuiltinType.Boolean);case null:return this.query.getBuiltinType(BuiltinType.Null);case void 0:return this.query.getBuiltinType(BuiltinType.Undefined);default:switch(_typeof(n.value)){case"string":return this.query.getBuiltinType(BuiltinType.String);case"number":return this.query.getBuiltinType(BuiltinType.Number);default:return this.reportError("Unrecognized primitive",n)}}}},{key:"visitMethodCall",value:function(n){return this.resolveMethodCall(this.getType(n.receiver),n)}},{key:"visitPipe",value:function(n){var _this5=this,r=this.query.getPipes().get(n.name);if(!r)return this.reportError("No pipe by the name "+r.name+" found",n);var o=this.getType(n.exp),l=r.selectSignature([o].concat(n.args.map(function(m){return _this5.getType(m)})));return l?l.result:this.reportError("Unable to resolve signature for pipe invocation",n)}},{key:"visitPrefixNot",value:function(){return this.query.getBuiltinType(BuiltinType.Boolean)}},{key:"visitPropertyRead",value:function(n){return this.resolvePropertyRead(this.getType(n.receiver),n)}},{key:"visitPropertyWrite",value:function(n){return this.getType(n.value)}},{key:"visitQuote",value:function(){return this.query.getBuiltinType(BuiltinType.Any)}},{key:"visitSafeMethodCall",value:function(n){return this.resolveMethodCall(this.query.getNonNullableType(this.getType(n.receiver)),n)}},{key:"visitSafePropertyRead",value:function(n){return this.resolvePropertyRead(this.query.getNonNullableType(this.getType(n.receiver)),n)}},{key:"resolveMethodCall",value:function(n,r){var _this6=this;if(this.isAny(n))return this.anyType;var o=n.members().get(r.name);if(!o)return this.reportError("Unknown method "+r.name,r);if(!o.type.callable)return this.reportError("Member "+r.name+" is not callable",r);var l=o.type.selectSignature(r.args.map(function(m){return _this6.getType(m)}));return l?l.result:this.reportError("Unable to resolve signature for call of method "+r.name,r)}},{key:"resolvePropertyRead",value:function(n,r){if(this.isAny(n))return this.anyType;var o=n.members().get(r.name);if(!o){var l=n.name;return l="$implict"==l?"The component declaration, template variable declarations, and element references do":"'"+l+"' does",this.reportError("Identifier '"+r.name+"' is not defined. "+l+" not contain such a member",r)}if(!o.public){var _l=n.name;_l="$implict"==_l?"the component":"'"+_l+"'",this.reportWarning("Identifier '"+r.name+"' refers to a private member of "+_l,r)}return o.type}},{key:"reportError",value:function(n,r){return this.diagnostics&&this.diagnostics.push(new TypeDiagnostic(DiagnosticKind.Error,n,r)),this.anyType}},{key:"reportWarning",value:function(n,r){return this.diagnostics&&this.diagnostics.push(new TypeDiagnostic(DiagnosticKind.Warning,n,r)),this.anyType}},{key:"isAny",value:function(n){return!n||this.query.getTypeKind(n)==BuiltinType.Any||n.type&&this.isAny(n.type)}},{key:"anyType",get:function(){var n=this._anyType;return n||(n=this._anyType=this.query.getBuiltinType(BuiltinType.Any)),n}},{key:"undefinedType",get:function(){var n=this._undefinedType;return n||(n=this._undefinedType=this.query.getBuiltinType(BuiltinType.Undefined)),n}}]),AstType}(),AstPath=function(_AstPath$2){function AstPath(n,r){var _this7,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,AstPath),_this7=_possibleConstructorReturn(this,(AstPath.__proto__||Object.getPrototypeOf(AstPath)).call(this,new AstPathVisitor(r,o).buildPath(n).path)),_this7.position=r,_this7}return _inherits(AstPath,_AstPath$2),AstPath}(AstPath$1),AstPathVisitor=function(_NullVisitor){function AstPathVisitor(n,r){var _this8;return _classCallCheck(this,AstPathVisitor),_this8=_possibleConstructorReturn(this,(AstPathVisitor.__proto__||Object.getPrototypeOf(AstPathVisitor)).call(this)),_this8.position=n,_this8.excludeEmpty=r,_this8.path=[],_this8}return _inherits(AstPathVisitor,_NullVisitor),_createClass(AstPathVisitor,[{key:"visit",value:function(n){(!this.excludeEmpty||n.span.start<n.span.end)&&inSpan(this.position,n.span)&&(this.path.push(n),visitChildren(n,this))}},{key:"buildPath",value:function(n){return n instanceof _compiler.ASTWithSource&&(n=n.ast),this.visit(n),this}}]),AstPathVisitor}(NullVisitor),values=["ID","CDATA","NAME",["ltr","rtl"],["rect","circle","poly","default"],"NUMBER",["nohref"],["ismap"],["declare"],["DATA","REF","OBJECT"],["GET","POST"],"IDREF",["TEXT","PASSWORD","CHECKBOX","RADIO","SUBMIT","RESET","FILE","HIDDEN","IMAGE","BUTTON"],["checked"],["disabled"],["readonly"],["multiple"],["selected"],["button","submit","reset"],["void","above","below","hsides","lhs","rhs","vsides","box","border"],["none","groups","rows","cols","all"],["left","center","right","justify","char"],["top","middle","bottom","baseline"],"IDREFS",["row","col","rowgroup","colgroup"],["defer"]],groups=[{id:0},{onclick:1,ondblclick:1,onmousedown:1,onmouseup:1,onmouseover:1,onmousemove:1,onmouseout:1,onkeypress:1,onkeydown:1,onkeyup:1},{lang:2,dir:3},{onload:1,onunload:1},{name:1},{href:1},{type:1},{alt:1},{tabindex:5},{media:1},{nohref:6},{usemap:1},{src:1},{onfocus:1,onblur:1},{charset:1},{declare:8,classid:1,codebase:1,data:1,codetype:1,archive:1,standby:1},{title:1},{value:1},{cite:1},{datetime:1},{accept:1},{shape:4,coords:1},{for:11},{action:1,method:10,enctype:1,onsubmit:1,onreset:1,"accept-charset":1},{valuetype:9},{longdesc:1},{width:1},{disabled:14},{readonly:15,onselect:1},{accesskey:1},{size:5,multiple:16},{onchange:1},{label:1},{selected:17},{type:12,checked:13,size:1,maxlength:5},{rows:5,cols:5},{type:18},{height:1},{summary:1,border:1,frame:19,rules:20,cellspacing:1,cellpadding:1,datapagesize:1},{align:21,char:1,charoff:1,valign:22},{span:5},{abbr:1,axis:1,headers:23,scope:24,rowspan:5,colspan:5},{profile:1},{"http-equiv":2,name:2,content:1,scheme:1},{class:1,style:1},{hreflang:2,rel:1,rev:1},{ismap:7},{defer:25,event:1,for:1}],elements={TT:[0,1,2,16,44],I:[0,1,2,16,44],B:[0,1,2,16,44],BIG:[0,1,2,16,44],SMALL:[0,1,2,16,44],EM:[0,1,2,16,44],STRONG:[0,1,2,16,44],DFN:[0,1,2,16,44],CODE:[0,1,2,16,44],SAMP:[0,1,2,16,44],KBD:[0,1,2,16,44],VAR:[0,1,2,16,44],CITE:[0,1,2,16,44],ABBR:[0,1,2,16,44],ACRONYM:[0,1,2,16,44],SUB:[0,1,2,16,44],SUP:[0,1,2,16,44],SPAN:[0,1,2,16,44],BDO:[0,2,16,44],BR:[0,16,44],BODY:[0,1,2,3,16,44],ADDRESS:[0,1,2,16,44],DIV:[0,1,2,16,44],A:[0,1,2,4,5,6,8,13,14,16,21,29,44,45],MAP:[0,1,2,4,16,44],AREA:[0,1,2,5,7,8,10,13,16,21,29,44],LINK:[0,1,2,5,6,9,14,16,44,45],IMG:[0,1,2,4,7,11,12,16,25,26,37,44,46],OBJECT:[0,1,2,4,6,8,11,15,16,26,37,44],PARAM:[0,4,6,17,24],HR:[0,1,2,16,44],P:[0,1,2,16,44],H1:[0,1,2,16,44],H2:[0,1,2,16,44],H3:[0,1,2,16,44],H4:[0,1,2,16,44],H5:[0,1,2,16,44],H6:[0,1,2,16,44],PRE:[0,1,2,16,44],Q:[0,1,2,16,18,44],BLOCKQUOTE:[0,1,2,16,18,44],INS:[0,1,2,16,18,19,44],DEL:[0,1,2,16,18,19,44],DL:[0,1,2,16,44],DT:[0,1,2,16,44],DD:[0,1,2,16,44],OL:[0,1,2,16,44],UL:[0,1,2,16,44],LI:[0,1,2,16,44],FORM:[0,1,2,4,16,20,23,44],LABEL:[0,1,2,13,16,22,29,44],INPUT:[0,1,2,4,7,8,11,12,13,16,17,20,27,28,29,31,34,44,46],SELECT:[0,1,2,4,8,13,16,27,30,31,44],OPTGROUP:[0,1,2,16,27,32,44],OPTION:[0,1,2,16,17,27,32,33,44],TEXTAREA:[0,1,2,4,8,13,16,27,28,29,31,35,44],FIELDSET:[0,1,2,16,44],LEGEND:[0,1,2,16,29,44],BUTTON:[0,1,2,4,8,13,16,17,27,29,36,44],TABLE:[0,1,2,16,26,38,44],CAPTION:[0,1,2,16,44],COLGROUP:[0,1,2,16,26,39,40,44],COL:[0,1,2,16,26,39,40,44],THEAD:[0,1,2,16,39,44],TBODY:[0,1,2,16,39,44],TFOOT:[0,1,2,16,39,44],TR:[0,1,2,16,39,44],TH:[0,1,2,16,39,41,44],TD:[0,1,2,16,39,41,44],HEAD:[2,42],TITLE:[2],BASE:[5],META:[2,43],STYLE:[2,6,9,16],SCRIPT:[6,12,14,47],NOSCRIPT:[0,1,2,16,44],HTML:[2]},defaultAttributes=[0,1,2,4],SCHEMA=["[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop","[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*beforecopy,*beforecut,*beforepaste,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*message,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*paste,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*search,*seeked,*seeking,*select,*selectstart,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate","abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*beforecopy,*beforecut,*beforepaste,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*message,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*paste,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*search,*seeked,*seeking,*select,*selectstart,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate","media^[HTMLElement]|!autoplay,!controls,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,#playbackRate,preload,src,%srcObject,#volume",":svg:^[HTMLElement]|*abort,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username","area^[HTMLElement]|alt,coords,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,search,shape,target,username","audio^media|","br^[HTMLElement]|clear","base^[HTMLElement]|href,target","body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^[HTMLElement]|#height,#width","content^[HTMLElement]|select","dl^[HTMLElement]|!compact","datalist^[HTMLElement]|","details^[HTMLElement]|!open","dialog^[HTMLElement]|!open,returnValue","dir^[HTMLElement]|!compact","div^[HTMLElement]|align","embed^[HTMLElement]|align,height,name,src,type,width","fieldset^[HTMLElement]|!disabled,name","font^[HTMLElement]|color,face,size","form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^[HTMLElement]|align,color,!noShade,size,width","head^[HTMLElement]|","h1,h2,h3,h4,h5,h6^[HTMLElement]|align","html^[HTMLElement]|version","iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","keygen^[HTMLElement]|!autofocus,challenge,!disabled,keytype,name","li^[HTMLElement]|type,#value","label^[HTMLElement]|htmlFor","legend^[HTMLElement]|align","link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,rel,%relList,rev,%sizes,target,type","map^[HTMLElement]|name","marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^[HTMLElement]|!compact","meta^[HTMLElement]|content,httpEquiv,name,scheme","meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value","ins,del^[HTMLElement]|cite,dateTime","ol^[HTMLElement]|!compact,!reversed,#start,type","object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^[HTMLElement]|!disabled,label","option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value","output^[HTMLElement]|defaultValue,%htmlFor,name,value","p^[HTMLElement]|align","param^[HTMLElement]|name,type,value,valueType","picture^[HTMLElement]|","pre^[HTMLElement]|#width","progress^[HTMLElement]|#max,#value","q,blockquote,cite^[HTMLElement]|","script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type","select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","shadow^[HTMLElement]|","source^[HTMLElement]|media,sizes,src,srcset,type","span^[HTMLElement]|","style^[HTMLElement]|!disabled,media,type","caption^[HTMLElement]|align","th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width","table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign","template^[HTMLElement]|","textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","title^[HTMLElement]|text","track^[HTMLElement]|!default,kind,label,src,srclang","ul^[HTMLElement]|!compact,type","unknown^[HTMLElement]|","video^media|#height,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:cursor^:svg:|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan","data^[HTMLElement]|value","menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default","summary^[HTMLElement]|","time^[HTMLElement]|dateTime"],EVENT="event",BOOLEAN="boolean",NUMBER="number",STRING="string",OBJECT="object",SchemaInformation=function(){
function SchemaInformation(){var _this10=this;_classCallCheck(this,SchemaInformation),this.schema={},SCHEMA.forEach(function(n){var r=n.split("|"),o=r[1].split(","),l=(r[0]+"^").split("^"),m=l[0],g={};m.split(",").forEach(function(h){return _this10.schema[h.toLowerCase()]=g});var u=l[1],y=u&&_this10.schema[u.toLowerCase()];if(y)for(var h in y)g[h]=y[h];o.forEach(function(h){""==h||(h.startsWith("*")?g[h.substring(1)]=EVENT:h.startsWith("!")?g[h.substring(1)]=BOOLEAN:h.startsWith("#")?g[h.substring(1)]=NUMBER:h.startsWith("%")?g[h.substring(1)]=OBJECT:g[h]=STRING)})})}return _createClass(SchemaInformation,[{key:"allKnownElements",value:function(){return Object.keys(this.schema)}},{key:"eventsOf",value:function(n){var r=this.schema[n.toLowerCase()]||{};return Object.keys(r).filter(function(o){return r[o]===EVENT})}},{key:"propertiesOf",value:function(n){var r=this.schema[n.toLowerCase()]||{};return Object.keys(r).filter(function(o){return r[o]!==EVENT})}},{key:"typeOf",value:function(n,r){return(this.schema[n.toLowerCase()]||{})[r]}}],[{key:"instance",get:function(){var n=SchemaInformation._instance;return n||(n=SchemaInformation._instance=new SchemaInformation),n}}]),SchemaInformation}(),HtmlAstPath=function(_AstPath$3){function HtmlAstPath(n,r){var _this11;return _classCallCheck(this,HtmlAstPath),_this11=_possibleConstructorReturn(this,(HtmlAstPath.__proto__||Object.getPrototypeOf(HtmlAstPath)).call(this,buildPath(n,r))),_this11.position=r,_this11}return _inherits(HtmlAstPath,_AstPath$3),HtmlAstPath}(AstPath$1),ChildVisitor=function(){function ChildVisitor(n){_classCallCheck(this,ChildVisitor),this.visitor=n}return _createClass(ChildVisitor,[{key:"visitElement",value:function(n,r){this.visitChildren(r,function(o){o(n.attrs),o(n.children)})}},{key:"visitAttribute",value:function(){}},{key:"visitText",value:function(){}},{key:"visitComment",value:function(){}},{key:"visitExpansion",value:function(n,r){return this.visitChildren(r,function(o){o(n.cases)})}},{key:"visitExpansionCase",value:function(){}},{key:"visitChildren",value:function(n,r){var l=this.visitor||this,m=[];return r(function(g){g&&m.push((0,_compiler.visitAll)(l,g,n))}),[].concat.apply([],m)}}]),ChildVisitor}(),HtmlAstPathBuilder=function(_ChildVisitor){function HtmlAstPathBuilder(n){var _this12;return _classCallCheck(this,HtmlAstPathBuilder),_this12=_possibleConstructorReturn(this,(HtmlAstPathBuilder.__proto__||Object.getPrototypeOf(HtmlAstPathBuilder)).call(this)),_this12.position=n,_this12.path=[],_this12}return _inherits(HtmlAstPathBuilder,_ChildVisitor),_createClass(HtmlAstPathBuilder,[{key:"visit",value:function(n){var o=spanOf(n);return!inSpan(this.position,o)||void this.path.push(n)}},{key:"getPath",value:function(){return this.path}}]),HtmlAstPathBuilder}(ChildVisitor),TEMPLATE_ATTR_PREFIX="*",hiddenHtmlElements={html:!0,script:!0,noscript:!0,base:!0,body:!0,title:!0,head:!0,link:!0},ExpressionVisitor=function(_NullTemplateVisitor){function ExpressionVisitor(n,r,o,l){var _this13;return _classCallCheck(this,ExpressionVisitor),_this13=_possibleConstructorReturn(this,(ExpressionVisitor.__proto__||Object.getPrototypeOf(ExpressionVisitor)).call(this)),_this13.info=n,_this13.position=r,_this13.attr=o,_this13.getExpressionScope=l,l||(_this13.getExpressionScope=function(){return n.template.members}),_this13}return _inherits(ExpressionVisitor,_NullTemplateVisitor),_createClass(ExpressionVisitor,[{key:"visitDirectiveProperty",value:function(n){this.attributeValueCompletions(n.value)}},{key:"visitElementProperty",value:function(n){this.attributeValueCompletions(n.value)}},{key:"visitEvent",value:function(n){this.attributeValueCompletions(n.handler)}},{key:"visitElement",value:function(){var _this14=this;if(this.attr&&getSelectors(this.info)&&this.attr.name.startsWith(TEMPLATE_ATTR_PREFIX)){var r=this.attr.name.substr(TEMPLATE_ATTR_PREFIX.length),o=getSelectors(this.info),l=o.selectors,m=l.filter(function(T){return T.attrs.some(function(b,S){return 0==S%2&&b==r})})[0],_g4=this.info.expressionParser.parseTemplateBindings(r,this.attr.value,null),_u2=this.position-this.attr.valueSpan.start.offset-1,_y2=_g4.templateBindings,h=_y2.find(function(T){return inSpan(_u2,T.span,!0)})||_y2.find(function(T){return inSpan(_u2,T.span)}),f=function(){var T=[];if(m){var b=m.attrs.filter(function(S,E){return 0==E%2});T=b.filter(function(S){return S.startsWith(r)&&S!=r}).map(function(S){return lowerName(S.substr(r.length))})}T.push("let"),_this14.result=T.map(function(b){return{kind:"key",name:b,sort:b}})};if(!h||h.key==r&&!h.expression)f();else if(h.keyIsVar){var T=this.attr.value.indexOf("=");if(this.result=[],0<=T&&_u2>=T){var b=o.map.get(m),S=this.info.template.query.getTemplateContext(b.type.reference);S&&(this.result=this.symbolsToCompletions(S.values()))}else h.key&&_u2<=h.key.length-r.length&&f()}else if(h.expression&&inSpan(_u2,h.expression.ast.span)||h.key&&_u2>h.span.start+(h.key.length-r.length)||!h.key){var _T=new _compiler.ParseSpan(0,this.attr.value.length);this.attributeValueCompletions(h.expression?h.expression.ast:new _compiler.PropertyRead(_T,new _compiler.ImplicitReceiver(_T),""),_u2)}else f()}}},{key:"visitBoundText",value:function(n){var r=this.position-n.sourceSpan.start.offset;if(inSpan(r,n.value.span)){var o=getExpressionCompletions(this.getExpressionScope(),n.value,r,this.info.template.query);o&&(this.result=this.symbolsToCompletions(o))}}},{key:"attributeValueCompletions",value:function(n,r){var o=getExpressionCompletions(this.getExpressionScope(),n,null==r?this.attributeValuePosition:r,this.info.template.query);o&&(this.result=this.symbolsToCompletions(o))}},{key:"symbolsToCompletions",value:function(n){return n.filter(function(r){return!r.name.startsWith("__")&&r.public}).map(function(r){return{kind:r.kind,name:r.name,sort:r.name}})}},{key:"attributeValuePosition",get:function(){return this.position-this.attr.valueSpan.start.offset-1}}]),ExpressionVisitor}(NullTemplateVisitor),templateAttr=/^(\w+:)?(template$|^\*)/,OverrideKindSymbol=function(){function OverrideKindSymbol(n,r){_classCallCheck(this,OverrideKindSymbol),this.sym=n,this.kindOverride=r}return _createClass(OverrideKindSymbol,[{key:"members",value:function(){return this.sym.members()}},{key:"signatures",value:function(){return this.sym.signatures()}},{key:"selectSignature",value:function(n){return this.sym.selectSignature(n)}},{key:"indexed",value:function(n){return this.sym.indexed(n)}},{key:"name",get:function(){return this.sym.name}},{key:"kind",get:function(){return this.kindOverride}},{key:"language",get:function(){return this.sym.language}},{key:"type",get:function(){return this.sym.type}},{key:"container",get:function(){return this.sym.container}},{key:"public",get:function(){return this.sym.public}},{key:"callable",get:function(){return this.sym.callable}},{key:"definition",get:function(){return this.sym.definition}}]),OverrideKindSymbol}(),ExpressionDiagnosticsVisitor=function(_TemplateAstChildVisi3){function ExpressionDiagnosticsVisitor(n,r){var _this15;return _classCallCheck(this,ExpressionDiagnosticsVisitor),_this15=_possibleConstructorReturn(this,(ExpressionDiagnosticsVisitor.__proto__||Object.getPrototypeOf(ExpressionDiagnosticsVisitor)).call(this)),_this15.info=n,_this15.getExpressionScope=r,_this15.diagnostics=[],_this15.path=new TemplateAstPath([],0),_this15}return _inherits(ExpressionDiagnosticsVisitor,_TemplateAstChildVisi3),_createClass(ExpressionDiagnosticsVisitor,[{key:"visitDirective",value:function(n,r){n.inputs&&n.inputs.length&&(0,_compiler.templateVisitAll)(this,n.inputs,r)}},{key:"visitBoundText",value:function(n){this.push(n),this.diagnoseExpression(n.value,n.sourceSpan.start.offset,!1),this.pop()}},{key:"visitDirectiveProperty",value:function(n){this.push(n),this.diagnoseExpression(n.value,this.attributeValueLocation(n),!1),this.pop()}},{key:"visitElementProperty",value:function(n){this.push(n),this.diagnoseExpression(n.value,this.attributeValueLocation(n),!1),this.pop()}},{key:"visitEvent",value:function(n){this.push(n),this.diagnoseExpression(n.handler,this.attributeValueLocation(n),!0),this.pop()}},{key:"visitVariable",value:function(n){var r=this.directiveSummary;if(r&&n.value){var o=this.info.template.query.getTemplateContext(r.type.reference);o.has(n.value)||("$implicit"===n.value?this.reportError("The template context does not have an implicit value",spanOf(n.sourceSpan)):this.reportError("The template context does not defined a member called '"+n.value+"'",spanOf(n.sourceSpan)))}}},{key:"visitElement",value:function(n,r){this.push(n),_get(ExpressionDiagnosticsVisitor.prototype.__proto__||Object.getPrototypeOf(ExpressionDiagnosticsVisitor.prototype),"visitElement",this).call(this,n,r),this.pop()}},{key:"visitEmbeddedTemplate",value:function(n,r){var o=this.directiveSummary;this.push(n),this.directiveSummary=n.directives.map(function(l){return l.directive}).find(function(l){return hasTemplateReference(l.type)}),_get(ExpressionDiagnosticsVisitor.prototype.__proto__||Object.getPrototypeOf(ExpressionDiagnosticsVisitor.prototype),"visitEmbeddedTemplate",this).call(this,n,r),this.pop(),this.directiveSummary=o}},{key:"attributeValueLocation",value:function(n){var r=new HtmlAstPath(this.info.htmlAst,n.sourceSpan.start.offset),o=r.tail;return o instanceof _compiler.Attribute&&o.valueSpan?o.valueSpan.start.offset+1:n.sourceSpan.start.offset}},{key:"diagnoseExpression",value:function(n,r,o){var _diagnostics,_this16=this,l=this.getExpressionScope(this.path,o);(_diagnostics=this.diagnostics).push.apply(_diagnostics,_toConsumableArray(getExpressionDiagnostics(l,n,this.info.template.query,{event:o}).map(function(m){return{span:offsetSpan(m.ast.span,r+_this16.info.template.span.start),kind:m.kind,message:m.message}})))}},{key:"push",value:function(n){this.path.push(n)}},{key:"pop",value:function(){this.path.pop()}},{key:"selectors",value:function(){var n=this._selectors;return n||(this._selectors=n=getSelectors(this.info)),n}},{key:"findElement",value:function(n){var r=new HtmlAstPath(this.info.htmlAst,n);if(r.tail instanceof _compiler.Element)return r.tail}},{key:"reportError",value:function(n,r){this.diagnostics.push({span:offsetSpan(r,this.info.template.span.start),kind:DiagnosticKind.Error,message:n})}},{key:"reportWarning",value:function(n,r){this.diagnostics.push({span:offsetSpan(r,this.info.template.span.start),kind:DiagnosticKind.Warning,message:n})}}]),ExpressionDiagnosticsVisitor}(TemplateAstChildVisitor),LanguageServiceImpl=function(){function LanguageServiceImpl(n){_classCallCheck(this,LanguageServiceImpl),this.host=n}return _createClass(LanguageServiceImpl,[{key:"getTemplateReferences",value:function(){return this.host.getTemplateReferences()}},{key:"getDiagnostics",value:function(n){var r=[],o=this.host.getTemplates(n);o&&o.length&&r.push.apply(r,_toConsumableArray(getTemplateDiagnostics(n,this,o)));var l=this.host.getDeclarations(n);if(l&&l.length){var _m3=this.host.getAnalyzedModules();r.push.apply(r,_toConsumableArray(getDeclarationDiagnostics(l,_m3)))}return uniqueBySpan(r)}},{key:"getPipesAt",value:function(n,r){var o=this.getTemplateAstAtPosition(n,r);if(o)return o.pipes.map(function(l){return{name:l.name,symbol:l.type.reference}})}},{key:"getCompletionsAt",value:function(n,r){var o=this.getTemplateAstAtPosition(n,r);if(o)return getTemplateCompletions(o)}},{key:"getDefinitionAt",value:function(n,r){var o=this.getTemplateAstAtPosition(n,r);if(o)return getDefinition(o)}},{key:"getHoverAt",value:function(n,r){var o=this.getTemplateAstAtPosition(n,r);if(o)return getHover(o)}},{key:"getTemplateAstAtPosition",value:function(n,r){var o=this.host.getTemplateAt(n,r);if(o){var l=this.getTemplateAst(o,n);if(l&&l.htmlAst&&l.templateAst)return{position:r,fileName:n,template:o,htmlAst:l.htmlAst,directive:l.directive,directives:l.directives,pipes:l.pipes,templateAst:l.templateAst,expressionParser:l.expressionParser}}}},{key:"getTemplateAst",value:function(n,r){var _this17=this,o=void 0;try{var l=this.metadataResolver.getNonNormalizedDirectiveMetadata(n.type),_m4=l&&l.metadata;if(_m4){var _g11=new _compiler.HtmlParser,_u9=new _compiler.I18NHtmlParser(_g11),_y5=new _compiler.Parser(new _compiler.Lexer),h=new _compiler.CompilerConfig,f=new _compiler.TemplateParser(h,_y5,new _compiler.DomElementSchemaRegistry,_u9,null,[]),T=_u9.parse(n.source,""),b=this.host.getAnalyzedModules(),S=void 0,E=b.ngModuleByPipeOrDirective.get(n.type);if(E||(E=findSuitableDefaultModule(b)),E){var x=E.transitiveModule.directives.map(function(N){return _this17.host.resolver.getNonNormalizedDirectiveMetadata(N.reference)}),A=x.filter(function(N){return null!==N}).map(function(N){return N.metadata.toSummary()}),L=E.transitiveModule.pipes.map(function(N){return _this17.host.resolver.getOrLoadPipeMetadata(N.reference).toSummary()}),M=E.schemas,C=f.tryParseHtml(T,_m4,n.source,A,L,M,"");o={htmlAst:T.rootNodes,templateAst:C.templateAst,directive:_m4,directives:A,pipes:L,parseErrors:C.errors,expressionParser:_y5,errors:S}}}}catch(l){var _m5=n.span;l.fileName==r&&(_m5=n.query.getSpanAt(l.line,l.column)||_m5),o={errors:[{kind:DiagnosticKind.Error,message:l.message,span:_m5}]}}return o}},{key:"metadataResolver",get:function(){return this.host.resolver}}]),LanguageServiceImpl}(),ReflectorModuleModuleResolutionHost=function(){function ReflectorModuleModuleResolutionHost(n){var _this18=this;_classCallCheck(this,ReflectorModuleModuleResolutionHost),this.host=n,n.directoryExists&&(this.directoryExists=function(r){return _this18.host.directoryExists(r)})}return _createClass(ReflectorModuleModuleResolutionHost,[{key:"fileExists",value:function(n){return!!this.host.getScriptSnapshot(n)}},{key:"readFile",value:function(n){var r=this.host.getScriptSnapshot(n);if(r)return r.getText(0,r.getLength())}}]),ReflectorModuleModuleResolutionHost}(),ReflectorHost=function(_CompilerHost){function ReflectorHost(n,r,o){var _this19;return _classCallCheck(this,ReflectorHost),_this19=_possibleConstructorReturn(this,(ReflectorHost.__proto__||Object.getPrototypeOf(ReflectorHost)).call(this,null,o,new _compilerCli.ModuleResolutionHostAdapter(new ReflectorModuleModuleResolutionHost(r)))),_this19.getProgram=n,_this19}return _inherits(ReflectorHost,_CompilerHost),_createClass(ReflectorHost,[{key:"program",get:function(){return this.getProgram()},set:function(n){}}]),ReflectorHost}(_compilerCli.CompilerHost),isPrivate=ts.ModifierFlags?function(n){return!!(ts.getCombinedModifierFlags(n)&ts.ModifierFlags.Private)}:function(n){return!!(n.flags&ts.NodeFlags.Private)},isReferenceType=ts.ObjectFlags?function(n){return!!(n.flags&ts.TypeFlags.Object&&n.objectFlags&ts.ObjectFlags.Reference)}:function(n){return!!(n.flags&ts.TypeFlags.Reference)},DummyHtmlParser=function(_HtmlParser){function DummyHtmlParser(){return _classCallCheck(this,DummyHtmlParser),_possibleConstructorReturn(this,(DummyHtmlParser.__proto__||Object.getPrototypeOf(DummyHtmlParser)).call(this))}return _inherits(DummyHtmlParser,_HtmlParser),_createClass(DummyHtmlParser,[{key:"parse",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:_compiler.DEFAULT_INTERPOLATION_CONFIG;return new _compiler.ParseTreeResult([],[])}}]),DummyHtmlParser}(_compiler.HtmlParser),DummyResourceLoader=function(_ResourceLoader){function DummyResourceLoader(){return _classCallCheck(this,DummyResourceLoader),_possibleConstructorReturn(this,(DummyResourceLoader.__proto__||Object.getPrototypeOf(DummyResourceLoader)).apply(this,arguments))}return _inherits(DummyResourceLoader,_ResourceLoader),_createClass(DummyResourceLoader,[{key:"get",value:function(){return Promise.resolve("")}}]),DummyResourceLoader}(_compiler.ResourceLoader),TypeScriptServiceHost=function(){function TypeScriptServiceHost(n,r){_classCallCheck(this,TypeScriptServiceHost),this.host=n,this.tsService=r,this._staticSymbolCache=new _compiler.StaticSymbolCache,this._typeCache=[],this.modulesOutOfDate=!0}return _createClass(TypeScriptServiceHost,[{key:"setSite",value:function(n){this.service=n}},{key:"getTemplateReferences",value:function(){return this.ensureTemplateMap(),this.templateReferences}},{key:"getTemplateAt",value:function(n,r){var o=this.getSourceFile(n);if(o){this.context=o.fileName;var l=this.findNode(o,r);if(l)return this.getSourceFromNode(n,this.host.getScriptVersion(o.fileName),l)}else{this.ensureTemplateMap();var _l2=this.fileToComponent.get(n);if(_l2)return this.getSourceFromType(n,this.host.getScriptVersion(n),_l2)}}},{key:"getAnalyzedModules",value:function(){return this.validate(),this.ensureAnalyzedModules()}},{key:"ensureAnalyzedModules",value:function(){var n=this.analyzedModules;if(!n){var r={isSourceFile:function(){return!0}},o=(0,_compiler.extractProgramSymbols)(this.staticSymbolResolver,this.program.getSourceFiles().map(function(l){return l.fileName}),r);n=this.analyzedModules=(0,_compiler.analyzeNgModules)(o,r,this.resolver)}return n}},{key:"getTemplates",value:function(n){var _this22=this;this.ensureTemplateMap();var r=this.fileToComponent.get(n);if(!r){var _o2=this.host.getScriptVersion(n),l=[],_m8=function _m8(u){var y=_this22.getSourceFromNode(n,_o2,u);y?l.push(y):ts.forEachChild(u,_m8)},_g13=this.getSourceFile(n);return _g13&&(this.context=_g13.path,ts.forEachChild(_g13,_m8)),l.length?l:void 0}var o=this.getTemplateAt(n,0);if(o)return[o]}},{key:"getDeclarations",value:function(n){var _this23=this,r=[],o=this.getSourceFile(n);if(o){var l=function l(m){var g=_this23.getDeclarationFromNode(o,m);g?r.push(g):ts.forEachChild(m,l)};ts.forEachChild(o,l)}return r}},{key:"getSourceFile",value:function(n){return this.tsService.getProgram().getSourceFile(n)}},{key:"updateAnalyzedModules",value:function(){this.validate(),this.modulesOutOfDate&&(this.analyzedModules=null,this._reflector=null,this._staticSymbolResolver=null,this.templateReferences=null,this.fileToComponent=null,this.ensureAnalyzedModules(),this.modulesOutOfDate=!1)}},{key:"validate",value:function(){var n=this.program;this.lastProgram!=n&&(this.clearCaches(),this.lastProgram=n)}},{key:"clearCaches",value:function(){this._checker=null,this._typeCache=[],this._resolver=null,this.collectedErrors=null,this.modulesOutOfDate=!0}},{key:"ensureTemplateMap",value:function(){if(!this.fileToComponent||!this.templateReferences){var n=new Map,r=[],o=this.getAnalyzedModules(),l=(0,_compiler.createOfflineCompileUrlResolver)(),_iteratorNormalCompletion15=!0,_didIteratorError15=!1,_iteratorError15=void 0;try{for(var _step15,_iterator15=o.ngModules[Symbol.iterator]();!(_iteratorNormalCompletion15=(_step15=_iterator15.next()).done);_iteratorNormalCompletion15=!0){var _m9=_step15.value,_iteratorNormalCompletion16=!0,_didIteratorError16=!1,_iteratorError16=void 0;try{for(var _step16,_iterator16=_m9.declaredDirectives[Symbol.iterator]();!(_iteratorNormalCompletion16=(_step16=_iterator16.next()).done);_iteratorNormalCompletion16=!0){var _g14=_step16.value,_resolver$getNonNorma=this.resolver.getNonNormalizedDirectiveMetadata(_g14.reference),_u10=_resolver$getNonNorma.metadata,_y6=_resolver$getNonNorma.annotation;if(_u10.isComponent&&_u10.template&&_u10.template.templateUrl){var h=l.resolve((0,_compiler.componentModuleUrl)(this.reflector,_g14.reference,_y6),_u10.template.templateUrl);n.set(h,_g14.reference),r.push(h)}}}catch(err){_didIteratorError16=!0,_iteratorError16=err}finally{try{!_iteratorNormalCompletion16&&_iterator16.return&&_iterator16.return()}finally{if(_didIteratorError16)throw _iteratorError16}}}}catch(err){_didIteratorError15=!0,_iteratorError15=err}finally{try{!_iteratorNormalCompletion15&&_iterator15.return&&_iterator15.return()}finally{if(_didIteratorError15)throw _iteratorError15}}this.fileToComponent=n,this.templateReferences=r}}},{key:"getSourceFromDeclaration",value:function(n,r,o,l,m,g,u,y){var h=void 0,f=this;if(g)return{version:r,source:o,span:l,type:m,get members(){var T=f.checker,b=f.program,S=T.getTypeAtLocation(g);return new TypeWrapper(S,{node:u,program:b,checker:T}).members()},get query(){return h||(h=new TypeScriptSymbolQuery(f.program,f.checker,y,function(){var T=f.service.getPipesAt(n,u.getStart()),b=f.checker,S=f.program;return new PipesTable(T,{node:u,program:S,checker:b})})),h}}}},{key:"getSourceFromNode",value:function(n,r,o){var l=void 0;switch(o.kind){case ts.SyntaxKind.NoSubstitutionTemplateLiteral:case ts.SyntaxKind.StringLiteral:var _getTemplateClassDecl=this.getTemplateClassDeclFromNode(o),_getTemplateClassDecl2=_slicedToArray(_getTemplateClassDecl,2),_g15=_getTemplateClassDecl2[0];_getTemplateClassDecl2[1];if(_g15&&_g15.name){var h=this.getSourceFile(n);return this.getSourceFromDeclaration(n,r,this.stringOf(o),shrink(spanOf$1(o)),this.reflector.getStaticSymbol(h.fileName,_g15.name.text),_g15,o,h)}}return l}},{key:"getSourceFromType",value:function(n,r,o){var l=void 0,m=this.getTemplateClassFromStaticSymbol(o);if(m){var _g16=this.host.getScriptSnapshot(n),_u12=_g16.getText(0,_g16.getLength());l=this.getSourceFromDeclaration(n,r,_u12,{start:0,end:_u12.length},o,m,m,m.getSourceFile())}return l}},{key:"collectError",value:function(n,r){var o=this.collectedErrors;o||(o=this.collectedErrors=new Map);var l=o.get(r);l||(l=[],this.collectedErrors.set(r,l)),l.push(n)}},{key:"getTemplateClassFromStaticSymbol",value:function(n){var r=this.getSourceFile(n.filePath);if(r){var o=ts.forEachChild(r,function(l){if(l.kind===ts.SyntaxKind.ClassDeclaration){var _m10=l;if(_m10.name.text===n.name)return _m10}});return o}}},{key:"getTemplateClassDeclFromNode",value:function(n){var r=n.parent;if(!r)return TypeScriptServiceHost.missingTemplate;if(r.kind!==ts.SyntaxKind.PropertyAssignment)return TypeScriptServiceHost.missingTemplate;if("template"!==r.name.text)return TypeScriptServiceHost.missingTemplate;if(r=r.parent,!r||r.kind!==ts.SyntaxKind.ObjectLiteralExpression)return TypeScriptServiceHost.missingTemplate;if(r=r.parent,!r||r.kind!==ts.SyntaxKind.CallExpression)return TypeScriptServiceHost.missingTemplate;var o=r.expression,l=r.parent;if(!l||l.kind!==ts.SyntaxKind.Decorator)return TypeScriptServiceHost.missingTemplate;var m=l.parent;return m&&m.kind===ts.SyntaxKind.ClassDeclaration?[m,o]:TypeScriptServiceHost.missingTemplate}},{key:"getCollectedErrors",value:function(n,r){var o=this.collectedErrors&&this.collectedErrors.get(r.fileName);return o&&o.map(function(l){return{message:l.message,span:spanAt(r,l.line,l.column)||n}})||[]}},{key:"getDeclarationFromNode",value:function(n,r){if(r.kind==ts.SyntaxKind.ClassDeclaration&&r.decorators&&r.name){var _iteratorNormalCompletion17=!0,_didIteratorError17=!1,_iteratorError17=void 0;try{for(var _step17,_iterator17=r.decorators[Symbol.iterator]();!(_iteratorNormalCompletion17=(_step17=_iterator17.next()).done);_iteratorNormalCompletion17=!0){var _o3=_step17.value;if(_o3.expression&&_o3.expression.kind==ts.SyntaxKind.CallExpression){var l=r;if(l.name){var _m11=_o3.expression,_g17=_m11.expression,_u13=this.checker.getTypeAtLocation(_g17);if(_u13){var _y7=this._reflector.getStaticSymbol(n.fileName,l.name.text);try{if(this.resolver.isDirective(_y7)){var _resolver$getNonNorma2=this.resolver.getNonNormalizedDirectiveMetadata(_y7),h=_resolver$getNonNorma2.metadata,f=spanOf$1(_g17);return{type:_y7,declarationSpan:f,metadata:h,errors:this.getCollectedErrors(f,n)}}}catch(h){if(h.message){this.collectError(h,n.fileName);var _f=spanOf$1(_g17);return{type:_y7,declarationSpan:_f,errors:this.getCollectedErrors(_f,n)}}}}}}}}catch(err){_didIteratorError17=!0,_iteratorError17=err}finally{try{!_iteratorNormalCompletion17&&_iterator17.return&&_iterator17.return()}finally{if(_didIteratorError17)throw _iteratorError17}}}}},{key:"stringOf",value:function(n){switch(n.kind){case ts.SyntaxKind.NoSubstitutionTemplateLiteral:return n.text;case ts.SyntaxKind.StringLiteral:return n.text}}},{key:"findNode",value:function(n,r){function o(m){if(r>=m.getStart()&&r<m.getEnd())return ts.forEachChild(m,o)||m}return o(n)}},{key:"findLiteralType",value:function(n,r){var o=this.checker,l=void 0;switch(n){case BuiltinType.Any:l=o.getTypeAtLocation({kind:ts.SyntaxKind.AsExpression,expression:{kind:ts.SyntaxKind.TrueKeyword},type:{kind:ts.SyntaxKind.AnyKeyword}});break;case BuiltinType.Boolean:l=o.getTypeAtLocation({kind:ts.SyntaxKind.TrueKeyword});break;case BuiltinType.Null:l=o.getTypeAtLocation({kind:ts.SyntaxKind.NullKeyword});break;case BuiltinType.Number:l=o.getTypeAtLocation({kind:ts.SyntaxKind.NumericLiteral});break;case BuiltinType.String:l=o.getTypeAtLocation({kind:ts.SyntaxKind.NoSubstitutionTemplateLiteral});break;case BuiltinType.Undefined:l=o.getTypeAtLocation({kind:ts.SyntaxKind.VoidExpression});break;default:throw new Error("Internal error, unhandled literal kind "+n+":"+BuiltinType[n])}return new TypeWrapper(l,r)}},{key:"resolver",get:function(){var _this24=this;this.validate();var n=this._resolver;if(!n){var r=new _compiler.NgModuleResolver(this.reflector),o=new _compiler.DirectiveResolver(this.reflector),l=new _compiler.PipeResolver(this.reflector),_m12=new _compiler.DomElementSchemaRegistry,_g18=new DummyResourceLoader,_u14=(0,_compiler.createOfflineCompileUrlResolver)(),_y8=new DummyHtmlParser,h=new _compiler.CompilerConfig({genDebugInfo:!1,defaultEncapsulation:_core.ViewEncapsulation.Emulated,logBindingUpdate:!1,useJit:!1}),f=new _compiler.DirectiveNormalizer(_g18,_u14,_y8,h);n=this._resolver=new _compiler.CompileMetadataResolver(h,r,o,l,new _compiler.SummaryResolver,_m12,f,this._staticSymbolCache,this.reflector,function(T,b){return _this24.collectError(T,b&&b.filePath)})}return n}},{key:"program",get:function(){return this.tsService.getProgram()}},{key:"checker",get:function(){var n=this._checker;return n||(n=this._checker=this.program.getTypeChecker()),n}},{key:"reflectorHost",get:function(){var _this25=this,n=this._reflectorHost;if(!n){this.context||(this.context=this.host.getScriptFileNames()[0]);var r=this.tsService.getProgram().getSourceFile(this.context);if(!r)throw new Error("Internal error: no context could be determined");var o=findTsConfig(r.fileName),l=path.dirname(o||this.context);n=this._reflectorHost=new ReflectorHost(function(){return _this25.tsService.getProgram()},this.host,{basePath:l,genDir:l})}return n}},{key:"staticSymbolResolver",get:function(){var _this26=this,n=this._staticSymbolResolver;if(!n){var r=new _compiler.AotSummaryResolver({loadSummary:function(){return null},isSourceFile:function(){return!0},getOutputFileName:function(){return null}},this._staticSymbolCache);n=this._staticSymbolResolver=new _compiler.StaticSymbolResolver(this.reflectorHost,this._staticSymbolCache,r,function(o,l){return _this26.collectError(o,l)})}return n}},{key:"reflector",get:function(){var _this27=this,n=this._reflector;return n||(n=this._reflector=new _compiler.StaticReflector(this.staticSymbolResolver,[],[],function(r,o){return _this27.collectError(r,o)})),n}}]),TypeScriptServiceHost}();TypeScriptServiceHost.missingTemplate=[];var TypeScriptSymbolQuery=function(){function TypeScriptSymbolQuery(n,r,o,l){_classCallCheck(this,TypeScriptSymbolQuery),this.program=n,this.checker=r,this.source=o,this.fetchPipes=l,this.typeCache=new Map}return _createClass(TypeScriptSymbolQuery,[{key:"getTypeKind",value:function(n){return typeKindOf(this.getTsTypeOf(n))}},{key:"getBuiltinType",value:function(n){var r=this.typeCache.get(n);if(!r){var o=getBuiltinTypeFromTs(n,{checker:this.checker,node:this.source,program:this.program});r=new TypeWrapper(o,{program:this.program,checker:this.checker,node:this.source}),this.typeCache.set(n,r)}return r}},{key:"getTypeUnion",value:function(){var _ref2;return this.checker,arguments.length?(_ref2=arguments.length-1,arguments.length<=_ref2?void 0:arguments[_ref2]):this.getBuiltinType(BuiltinType.Any)}},{key:"getArrayType",value:function(){return this.getBuiltinType(BuiltinType.Any)}},{key:"getElementType",value:function(n){if(n instanceof TypeWrapper){var r=getTypeParameterOf(n.tsType,"Array");if(r)return new TypeWrapper(r,n.context)}}},{key:"getNonNullableType",value:function(n){return n}},{key:"getPipes",value:function(){var n=this.pipesCache;return n||(n=this.pipesCache=this.fetchPipes()),n}},{key:"getTemplateContext",value:function(n){var r={node:this.source,program:this.program,checker:this.checker},o=findClassSymbolInContext(n,r);if(o){var l=this.getTemplateRefContextType(o);if(l)return new SymbolWrapper(l,r).members()}}},{key:"getTypeSymbol",value:function(n){var r={node:this.source,program:this.program,checker:this.checker},o=findClassSymbolInContext(n,r);return new SymbolWrapper(o,r)}},{key:"createSymbolTable",value:function(n){var r=new MapSymbolTable;return r.addAll(n.map(function(o){return new DeclaredSymbol(o)})),r}},{key:"mergeSymbolTable",value:function(n){var r=new MapSymbolTable,_iteratorNormalCompletion18=!0,_didIteratorError18=!1,_iteratorError18=void 0;try{for(var _step18,_iterator18=n[Symbol.iterator]();!(_iteratorNormalCompletion18=(_step18=_iterator18.next()).done);_iteratorNormalCompletion18=!0){var o=_step18.value;r.addAll(o.values())}}catch(err){_didIteratorError18=!0,_iteratorError18=err}finally{try{!_iteratorNormalCompletion18&&_iterator18.return&&_iterator18.return()}finally{if(_didIteratorError18)throw _iteratorError18}}return r}},{key:"getSpanAt",value:function(n,r){return spanAt(this.source,n,r)}},{key:"getTemplateRefContextType",value:function(n){var r=n.members.__constructor;if(r){var o=r.declarations[0],_iteratorNormalCompletion19=!0,_didIteratorError19=!1,_iteratorError19=void 0;try{for(var _step19,_iterator19=o.parameters[Symbol.iterator]();!(_iteratorNormalCompletion19=(_step19=_iterator19.next()).done);_iteratorNormalCompletion19=!0){var l=_step19.value,_m13=this.checker.getTypeAtLocation(l.type);if("TemplateRef"==_m13.symbol.name&&isReferenceType(_m13)){var _g19=_m13;if(1===_g19.typeArguments.length)return _g19.typeArguments[0].symbol}}}catch(err){_didIteratorError19=!0,_iteratorError19=err}finally{try{!_iteratorNormalCompletion19&&_iterator19.return&&_iterator19.return()}finally{if(_didIteratorError19)throw _iteratorError19}}}}},{key:"getTsTypeOf",value:function(n){var r=this.getTypeWrapper(n);return r&&r.tsType}},{key:"getTypeWrapper",value:function(n){var r=void 0;return n instanceof TypeWrapper?r=n:n.type instanceof TypeWrapper&&(r=n.type),r}}]),TypeScriptSymbolQuery}(),TypeWrapper=function(){function TypeWrapper(n,r){if(_classCallCheck(this,TypeWrapper),this.tsType=n,this.context=r,!n)throw Error("Internal: null type")}return _createClass(TypeWrapper,[{key:"members",value:function(){return new SymbolTableWrapper(this.tsType.getProperties(),this.context)}},{key:"signatures",value:function(){return signaturesOf(this.tsType,this.context)}},{key:"selectSignature",value:function(n){return _selectSignature(this.tsType,this.context,n)}},{key:"indexed",value:function(){}},{key:"name",get:function(){var n=this.tsType.symbol;return n&&n.name||"<anonymous>"}},{key:"kind",get:function(){return"type"}},{key:"language",get:function(){return"typescript"}},{key:"type",get:function(){}},{key:"container",get:function(){}},{key:"public",get:function(){return!0}},{key:"callable",get:function(){return typeCallable(this.tsType)}},{key:"definition",get:function(){return definitionFromTsSymbol(this.tsType.getSymbol())}}]),TypeWrapper}(),SymbolWrapper=function(){function SymbolWrapper(n,r){_classCallCheck(this,SymbolWrapper),this.symbol=n,this.context=r}return _createClass(SymbolWrapper,[{key:"members",value:function(){return new SymbolTableWrapper(this.symbol.members,this.context)}},{key:"signatures",value:function(){return signaturesOf(this.tsType,this.context)}},{key:"selectSignature",value:function(n){return _selectSignature(this.tsType,this.context,n)}},{key:"indexed",value:function(){}},{key:"name",get:function(){return this.symbol.name}},{key:"kind",get:function(){return this.callable?"method":"property"}},{key:"language",get:function(){return"typescript"}},{key:"type",get:function(){return new TypeWrapper(this.tsType,this.context)}},{key:"container",get:function(){return getContainerOf(this.symbol,this.context);
}},{key:"public",get:function(){return!isSymbolPrivate(this.symbol)}},{key:"callable",get:function(){return typeCallable(this.tsType)}},{key:"definition",get:function(){return definitionFromTsSymbol(this.symbol)}},{key:"tsType",get:function(){var n=this._tsType;return n||(n=this._tsType=this.context.checker.getTypeOfSymbolAtLocation(this.symbol,this.context.node)),n}}]),SymbolWrapper}(),DeclaredSymbol=function(){function DeclaredSymbol(n){_classCallCheck(this,DeclaredSymbol),this.declaration=n}return _createClass(DeclaredSymbol,[{key:"members",value:function(){return this.declaration.type.members()}},{key:"signatures",value:function(){return this.declaration.type.signatures()}},{key:"selectSignature",value:function(n){return this.declaration.type.selectSignature(n)}},{key:"indexed",value:function(){}},{key:"name",get:function(){return this.declaration.name}},{key:"kind",get:function(){return this.declaration.kind}},{key:"language",get:function(){return"ng-template"}},{key:"container",get:function(){}},{key:"type",get:function(){return this.declaration.type}},{key:"callable",get:function(){return this.declaration.type.callable}},{key:"public",get:function(){return!0}},{key:"definition",get:function(){return this.declaration.definition}}]),DeclaredSymbol}(),SignatureWrapper=function(){function SignatureWrapper(n,r){_classCallCheck(this,SignatureWrapper),this.signature=n,this.context=r}return _createClass(SignatureWrapper,[{key:"arguments",get:function(){return new SymbolTableWrapper(this.signature.getParameters(),this.context)}},{key:"result",get:function(){return new TypeWrapper(this.signature.getReturnType(),this.context)}}]),SignatureWrapper}(),SignatureResultOverride=function(){function SignatureResultOverride(n,r){_classCallCheck(this,SignatureResultOverride),this.signature=n,this.resultType=r}return _createClass(SignatureResultOverride,[{key:"arguments",get:function(){return this.signature.arguments}},{key:"result",get:function(){return this.resultType}}]),SignatureResultOverride}(),SymbolTableWrapper=function(){function SymbolTableWrapper(n,r,o){_classCallCheck(this,SymbolTableWrapper),this.context=r,Array.isArray(n)?(this.symbols=o?n.filter(o):n,this.symbolTable=toSymbolTable(n)):(this.symbols=toSymbols(n,o),this.symbolTable=o?toSymbolTable(this.symbols):n)}return _createClass(SymbolTableWrapper,[{key:"get",value:function(n){var r=this.symbolTable[n];return r?new SymbolWrapper(r,this.context):void 0}},{key:"has",value:function(n){return null!=this.symbolTable[n]}},{key:"values",value:function(){var _this28=this;return this.symbols.map(function(n){return new SymbolWrapper(n,_this28.context)})}},{key:"size",get:function(){return this.symbols.length}}]),SymbolTableWrapper}(),MapSymbolTable=function(){function MapSymbolTable(){_classCallCheck(this,MapSymbolTable),this.map=new Map,this._values=[]}return _createClass(MapSymbolTable,[{key:"get",value:function(n){return this.map.get(n)}},{key:"add",value:function(n){if(this.map.has(n.name)){var r=this.map.get(n.name);this._values[this._values.indexOf(r)]=n}this.map.set(n.name,n),this._values.push(n)}},{key:"addAll",value:function(n){var _iteratorNormalCompletion21=!0,_didIteratorError21=!1,_iteratorError21=void 0;try{for(var _step21,_iterator21=n[Symbol.iterator]();!(_iteratorNormalCompletion21=(_step21=_iterator21.next()).done);_iteratorNormalCompletion21=!0){var r=_step21.value;this.add(r)}}catch(err){_didIteratorError21=!0,_iteratorError21=err}finally{try{!_iteratorNormalCompletion21&&_iterator21.return&&_iterator21.return()}finally{if(_didIteratorError21)throw _iteratorError21}}}},{key:"has",value:function(n){return this.map.has(n)}},{key:"values",value:function(){return this._values}},{key:"size",get:function(){return this.map.size}}]),MapSymbolTable}(),PipesTable=function(){function PipesTable(n,r){_classCallCheck(this,PipesTable),this.pipes=n,this.context=r}return _createClass(PipesTable,[{key:"get",value:function(n){var r=this.pipes.find(function(o){return o.name==n});if(r)return new PipeSymbol(r,this.context)}},{key:"has",value:function(n){return null!=this.pipes.find(function(r){return r.name==n})}},{key:"values",value:function(){var _this29=this;return this.pipes.map(function(n){return new PipeSymbol(n,_this29.context)})}},{key:"size",get:function(){return this.pipes.length}}]),PipesTable}(),PipeSymbol=function(){function PipeSymbol(n,r){_classCallCheck(this,PipeSymbol),this.pipe=n,this.context=r}return _createClass(PipeSymbol,[{key:"members",value:function(){return EmptyTable.instance}},{key:"signatures",value:function(){return signaturesOf(this.tsType,this.context)}},{key:"selectSignature",value:function(n){var r=_selectSignature(this.tsType,this.context,n);if(1==n.length){var o=n[0];if(o instanceof TypeWrapper){var l=void 0;switch(this.name){case"async":switch(o.name){case"Observable":case"Promise":case"EventEmitter":l=getTypeParameterOf(o.tsType,o.name)}break;case"slice":l=getTypeParameterOf(o.tsType,"Array")}l&&(r=new SignatureResultOverride(r,new TypeWrapper(l,o.context)))}}return r}},{key:"indexed",value:function(){}},{key:"findClassSymbol",value:function(n){return findClassSymbolInContext(n,this.context)}},{key:"findTransformMethodType",value:function(n){var r=n.members.transform;if(r)return this.context.checker.getTypeOfSymbolAtLocation(r,this.context.node)}},{key:"name",get:function(){return this.pipe.name}},{key:"kind",get:function(){return"pipe"}},{key:"language",get:function(){return"typescript"}},{key:"type",get:function(){return new TypeWrapper(this.tsType,this.context)}},{key:"container",get:function(){}},{key:"callable",get:function(){return!0}},{key:"public",get:function(){return!0}},{key:"definition",get:function(){return definitionFromTsSymbol(this.tsType.getSymbol())}},{key:"tsType",get:function(){var n=this._tsType;if(!n){var r=this.findClassSymbol(this.pipe.symbol);r&&(n=this._tsType=this.findTransformMethodType(r)),n||(n=this._tsType=getBuiltinTypeFromTs(BuiltinType.Any,this.context))}return n}}]),PipeSymbol}(),EmptyTable=function(){function EmptyTable(){_classCallCheck(this,EmptyTable)}return _createClass(EmptyTable,[{key:"get",value:function(){}},{key:"has",value:function(){return!1}},{key:"values",value:function(){return[]}},{key:"size",get:function(){return 0}}]),EmptyTable}();EmptyTable.instance=new EmptyTable;var VERSION=new _core.Version("4.0.0-beta.8-ee747f7");exports.createLanguageService=createLanguageService,exports.create=create,exports.TypeScriptServiceHost=TypeScriptServiceHost,exports.createLanguageServiceFromTypescript=createLanguageServiceFromTypescript,exports.VERSION=VERSION});